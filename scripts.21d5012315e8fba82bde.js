!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],i=e.document,o=Object.getPrototypeOf,r=n.slice,a=n.concat,s=n.push,g=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,I=u.toString,d=I.call(Object),C={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},A=function(e){return null!=e&&e===e.window},f={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var o,r,a=(n=n||i).createElement("script");if(a.text=e,t)for(o in f)(r=t[o]||t.getAttribute&&t.getAttribute(o))&&a.setAttribute(o,r);n.head.appendChild(a).parentNode.removeChild(a)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b=function(e,t){return new b.fn.init(e,t)},B=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function v(e){var t=!!e&&"length"in e&&e.length,n=p(e);return!h(e)&&!A(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}b.fn=b.prototype={jquery:"3.4.1",constructor:b,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return b.each(this,e)},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},b.extend=b.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,g=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||h(a)||(a={}),s===g&&(a=this,s--);s<g;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(l&&i&&(b.isPlainObject(i)||(o=Array.isArray(i)))?(n=a[t],r=o&&!Array.isArray(n)?[]:o||b.isPlainObject(n)?n:{},o=!1,a[t]=b.extend(l,r,i)):void 0!==i&&(a[t]=i));return a},b.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=o(e))&&("function"!=typeof(n=u.call(t,"constructor")&&t.constructor)||I.call(n)!==d))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){m(e,{nonce:t&&t.nonce})},each:function(e,t){var n,i=0;if(v(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(B,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(v(Object(e))?b.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,a=!n;o<r;o++)!t(e[o],o)!==a&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,s=[];if(v(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&s.push(o);return a.apply([],s)},guid:1,support:C}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=n[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var y=function(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b="sizzle"+1*new Date,B=e.document,v=0,y=0,x=ge(),F=ge(),G=ge(),Q=ge(),w=function(e,t){return e===t&&(u=!0),0},S={}.hasOwnProperty,X=[],Z=X.pop,N=X.push,k=X.push,R=X.slice,D=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},U="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",T="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",E="\\["+T+"*("+W+")(?:"+T+"*([*^$|!~]?=)"+T+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+W+"))|)"+T+"*\\]",H=":("+W+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+E+")*)|.*)\\)|)",O=new RegExp(T+"+","g"),L=new RegExp("^"+T+"+|((?:^|[^\\\\])(?:\\\\.)*)"+T+"+$","g"),V=new RegExp("^"+T+"*,"+T+"*"),Y=new RegExp("^"+T+"*([>+~]|"+T+")"+T+"*"),M=new RegExp(T+"|>"),_=new RegExp(H),K=new RegExp("^"+W+"$"),z={ID:new RegExp("^#("+W+")"),CLASS:new RegExp("^\\.("+W+")"),TAG:new RegExp("^("+W+"|[*])"),ATTR:new RegExp("^"+E),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+T+"*(even|odd|(([+-]|)(\\d*)n|)"+T+"*(?:([+-]|)"+T+"*(\\d+)|))"+T+"*\\)|)","i"),bool:new RegExp("^(?:"+U+")$","i"),needsContext:new RegExp("^"+T+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+T+"*((?:-\\d)?\\d*)"+T+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,P=/^(?:input|select|textarea|button)$/i,j=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+T+"?|("+T+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){I()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{k.apply(X=R.call(B.childNodes),B.childNodes)}catch(Fe){k={apply:X.length?function(e,t){N.apply(e,R.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,o){var r,s,l,c,u,C,f,m=t&&t.ownerDocument,v=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return i;if(!o&&((t?t.ownerDocument||t:B)!==d&&I(t),t=t||d,h)){if(11!==v&&(u=q.exec(e)))if(r=u[1]){if(9===v){if(!(l=t.getElementById(r)))return i;if(l.id===r)return i.push(l),i}else if(m&&(l=m.getElementById(r))&&p(t,l)&&l.id===r)return i.push(l),i}else{if(u[2])return k.apply(i,t.getElementsByTagName(e)),i;if((r=u[3])&&n.getElementsByClassName&&t.getElementsByClassName)return k.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!Q[e+" "]&&(!A||!A.test(e))&&(1!==v||"object"!==t.nodeName.toLowerCase())){if(f=e,m=t,1===v&&M.test(e)){for((c=t.getAttribute("id"))?c=c.replace(ie,oe):t.setAttribute("id",c=b),s=(C=a(e)).length;s--;)C[s]="#"+c+" "+pe(C[s]);f=C.join(","),m=ee.test(e)&&fe(t.parentNode)||t}try{return k.apply(i,m.querySelectorAll(f)),i}catch(y){Q(e,!0)}finally{c===b&&t.removeAttribute("id")}}}return g(e.replace(L,"$1"),t,i,o)}function ge(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[b]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(Fe){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function Ie(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Ce(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function Ae(e){return le(function(t){return t=+t,le(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},r=se.isXML=function(e){var t=(e.ownerDocument||e).documentElement;return!J.test(e.namespaceURI||t&&t.nodeName||"HTML")},I=se.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:B;return a!==d&&9===a.nodeType&&a.documentElement?(C=(d=a).documentElement,h=!r(d),B!==d&&(o=d.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ce(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=$.test(d.getElementsByClassName),n.getById=ce(function(e){return C.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},f=[],A=[],(n.qsa=$.test(d.querySelectorAll))&&(ce(function(e){C.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+T+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||A.push("\\["+T+"*(?:value|"+U+")"),e.querySelectorAll("[id~="+b+"-]").length||A.push("~="),e.querySelectorAll(":checked").length||A.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||A.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&A.push("name"+T+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&A.push(":enabled",":disabled"),C.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),(n.matchesSelector=$.test(m=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.msMatchesSelector))&&ce(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),f.push("!=",H)}),A=A.length&&new RegExp(A.join("|")),f=f.length&&new RegExp(f.join("|")),t=$.test(C.compareDocumentPosition),p=t||$.test(C.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},w=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===d||e.ownerDocument===B&&p(B,e)?-1:t===d||t.ownerDocument===B&&p(B,t)?1:c?D(c,e)-D(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(!o||!r)return e===d?-1:t===d?1:o?-1:r?1:c?D(c,e)-D(c,t):0;if(o===r)return Ie(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?Ie(a[i],s[i]):a[i]===B?-1:s[i]===B?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&I(e),n.matchesSelector&&h&&!Q[t+" "]&&(!f||!f.test(t))&&(!A||!A.test(t)))try{var i=m.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(Fe){Q(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==d&&I(e),p(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==d&&I(e);var o=i.attrHandle[t.toLowerCase()],r=o&&S.call(i.attrHandle,t.toLowerCase())?o(e,t,!h):void 0;return void 0!==r?r:n.attributes||!h?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(ie,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],o=0,r=0;if(u=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(w),u){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return c=null,e},o=se.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=se.selectors={cacheLength:50,createPseudo:le,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&_.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+T+")"+e+"("+T+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=se.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(O," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,g){var l,c,u,I,d,C,h=r!==a?"nextSibling":"previousSibling",A=t.parentNode,f=s&&t.nodeName.toLowerCase(),m=!g&&!s,p=!1;if(A){if(r){for(;h;){for(I=t;I=I[h];)if(s?I.nodeName.toLowerCase()===f:1===I.nodeType)return!1;C=h="only"===e&&!C&&"nextSibling"}return!0}if(C=[a?A.firstChild:A.lastChild],a&&m){for(p=(d=(l=(c=(u=(I=A)[b]||(I[b]={}))[I.uniqueID]||(u[I.uniqueID]={}))[e]||[])[0]===v&&l[1])&&l[2],I=d&&A.childNodes[d];I=++d&&I&&I[h]||(p=d=0)||C.pop();)if(1===I.nodeType&&++p&&I===t){c[e]=[v,d,p];break}}else if(m&&(p=d=(l=(c=(u=(I=t)[b]||(I[b]={}))[I.uniqueID]||(u[I.uniqueID]={}))[e]||[])[0]===v&&l[1]),!1===p)for(;(I=++d&&I&&I[h]||(p=d=0)||C.pop())&&((s?I.nodeName.toLowerCase()!==f:1!==I.nodeType)||!++p||(m&&((c=(u=I[b]||(I[b]={}))[I.uniqueID]||(u[I.uniqueID]={}))[e]=[v,p]),I!==t)););return(p-=o)===i||p%i==0&&p/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[b]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var i,r=o(e,t),a=r.length;a--;)e[i=D(e,r[a])]=!(n[i]=r[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:le(function(e){var t=[],n=[],i=s(e.replace(L,"$1"));return i[b]?le(function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return se(e,t).length>0}}),contains:le(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}}),lang:le(function(e){return K.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===C},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return j.test(e.nodeName)},input:function(e){return P.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Ae(function(){return[0]}),last:Ae(function(e,t){return[t-1]}),eq:Ae(function(e,t,n){return[n<0?n+t:n]}),even:Ae(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:Ae(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:Ae(function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:Ae(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=Ce(t);function me(){}function pe(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(e,t,n){var i=t.dir,o=t.next,r=o||i,a=n&&"parentNode"===r,s=y++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,g){var l,c,u,I=[v,s];if(g){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,g))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(c=(u=t[b]||(t[b]={}))[t.uniqueID]||(u[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((l=c[r])&&l[0]===v&&l[1]===s)return I[2]=l[2];if(c[r]=I,I[2]=e(t,n,g))return!0}return!1}}function Be(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function ve(e,t,n,i,o){for(var r,a=[],s=0,g=e.length,l=null!=t;s<g;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),l&&t.push(s)));return a}function ye(e,t,n,i,o,r){return i&&!i[b]&&(i=ye(i)),o&&!o[b]&&(o=ye(o,r)),le(function(r,a,s,g){var l,c,u,I=[],d=[],C=a.length,h=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)se(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),A=!e||!r&&t?h:ve(h,I,e,s,g),f=n?o||(r?e:C||i)?[]:a:A;if(n&&n(A,f,s,g),i)for(l=ve(f,d),i(l,[],s,g),c=l.length;c--;)(u=l[c])&&(f[d[c]]=!(A[d[c]]=u));if(r){if(o||e){if(o){for(l=[],c=f.length;c--;)(u=f[c])&&l.push(A[c]=u);o(null,f=[],l,g)}for(c=f.length;c--;)(u=f[c])&&(l=o?D(r,u):I[c])>-1&&(r[l]=!(a[l]=u))}}else f=ve(f===a?f.splice(C,f.length):f),o?o(null,a,f,g):k.apply(a,f)})}function xe(e){for(var t,n,o,r=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],g=a?1:0,c=be(function(e){return e===t},s,!0),u=be(function(e){return D(t,e)>-1},s,!0),I=[function(e,n,i){var o=!a&&(i||n!==l)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,o}];g<r;g++)if(n=i.relative[e[g].type])I=[be(Be(I),n)];else{if((n=i.filter[e[g].type].apply(null,e[g].matches))[b]){for(o=++g;o<r&&!i.relative[e[o].type];o++);return ye(g>1&&Be(I),g>1&&pe(e.slice(0,g-1).concat({value:" "===e[g-2].type?"*":""})).replace(L,"$1"),n,g<o&&xe(e.slice(g,o)),o<r&&xe(e=e.slice(o)),o<r&&pe(e))}I.push(n)}return Be(I)}return me.prototype=i.filters=i.pseudos,i.setFilters=new me,a=se.tokenize=function(e,t){var n,o,r,a,s,g,l,c=F[e+" "];if(c)return t?0:c.slice(0);for(s=e,g=[],l=i.preFilter;s;){for(a in n&&!(o=V.exec(s))||(o&&(s=s.slice(o[0].length)||s),g.push(r=[])),n=!1,(o=Y.exec(s))&&(n=o.shift(),r.push({value:n,type:o[0].replace(L," ")}),s=s.slice(n.length)),i.filter)!(o=z[a].exec(s))||l[a]&&!(o=l[a](o))||(n=o.shift(),r.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):F(e,g).slice(0)},s=se.compile=function(e,t){var n,o=[],r=[],s=G[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=xe(t[n]))[b]?o.push(s):r.push(s);(s=G(e,function(e,t){var n=t.length>0,o=e.length>0,r=function(r,a,s,g,c){var u,C,A,f=0,m="0",p=r&&[],b=[],B=l,y=r||o&&i.find.TAG("*",c),x=v+=null==B?1:Math.random()||.1,F=y.length;for(c&&(l=a===d||a||c);m!==F&&null!=(u=y[m]);m++){if(o&&u){for(C=0,a||u.ownerDocument===d||(I(u),s=!h);A=e[C++];)if(A(u,a||d,s)){g.push(u);break}c&&(v=x)}n&&((u=!A&&u)&&f--,r&&p.push(u))}if(f+=m,n&&m!==f){for(C=0;A=t[C++];)A(p,b,a,s);if(r){if(f>0)for(;m--;)p[m]||b[m]||(b[m]=Z.call(g));b=ve(b)}k.apply(g,b),c&&!r&&b.length>0&&f+t.length>1&&se.uniqueSort(g)}return c&&(v=x,l=B),p};return n?le(r):r}(r,o))).selector=e}return s},g=se.select=function(e,t,n,o){var r,g,l,c,u,I="function"==typeof e&&e,d=!o&&a(e=I.selector||e);if(n=n||[],1===d.length){if((g=d[0]=d[0].slice(0)).length>2&&"ID"===(l=g[0]).type&&9===t.nodeType&&h&&i.relative[g[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;I&&(t=t.parentNode),e=e.slice(g.shift().value.length)}for(r=z.needsContext.test(e)?0:g.length;r--&&!i.relative[c=(l=g[r]).type];)if((u=i.find[c])&&(o=u(l.matches[0].replace(te,ne),ee.test(g[0].type)&&fe(t.parentNode)||t))){if(g.splice(r,1),!(e=o.length&&pe(g)))return k.apply(n,o),n;break}}return(I||s(e,d))(o,t,!h,n,!t||ee.test(e)&&fe(t.parentNode)||t),n},n.sortStable=b.split("").sort(w).join("")===b,n.detectDuplicates=!!u,I(),n.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||ue(U,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),se}(e);b.find=y,b.expr=y.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=y.uniqueSort,b.text=y.getText,b.isXMLDoc=y.isXML,b.contains=y.contains,b.escapeSelector=y.escape;var x=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&b(e).is(n))break;i.push(e)}return i},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},G=b.expr.match.needsContext;function Q(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function S(e,t,n){return h(t)?b.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?b.grep(e,function(e){return e===t!==n}):"string"!=typeof t?b.grep(e,function(e){return g.call(t,e)>-1!==n}):b.filter(t,e,n)}b.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?b.find.matchesSelector(i,e)?[i]:[]:b.find.matches(e,b.grep(t,function(e){return 1===e.nodeType}))},b.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)b.find(e,o[t],n);return i>1?b.uniqueSort(n):n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&G.test(e)?b(e):e||[],!1).length}});var X,Z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(b.fn.init=function(e,t,n){var o,r;if(!e)return this;if(n=n||X,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Z.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(b.merge(this,b.parseHTML(o[1],(t=t instanceof b?t[0]:t)&&t.nodeType?t.ownerDocument||t:i,!0)),w.test(o[1])&&b.isPlainObject(t))for(o in t)h(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(r=i.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(b):b.makeArray(e,this)}).prototype=b.fn,X=b(i);var N=/^(?:parents|prev(?:Until|All))/,k={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}b.fn.extend({has:function(e){var t=b(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(b.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,r=[],a="string"!=typeof e&&b(e);if(!G.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&b.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?b.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?g.call(b(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(Q(e,"template")&&(e=e.content||e),b.merge([],e.childNodes))}},function(e,t){b.fn[e]=function(n,i){var o=b.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=b.filter(i,o)),this.length>1&&(k[e]||b.uniqueSort(o),N.test(e)&&o.reverse()),this.pushStack(o)}});var D=/[^\x20\t\r\n\f]+/g;function U(e){return e}function T(e){throw e}function W(e,t,n,i){var o;try{e&&h(o=e.promise)?o.call(e).done(t).fail(n):e&&h(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}b.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return b.each(e.match(D)||[],function(e,n){t[n]=!0}),t}(e):b.extend({},e);var t,n,i,o,r=[],a=[],s=-1,g=function(){for(o=o||e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<r.length;)!1===r[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},l={add:function(){return r&&(n&&!t&&(s=r.length-1,a.push(n)),function t(n){b.each(n,function(n,i){h(i)?e.unique&&l.has(i)||r.push(i):i&&i.length&&"string"!==p(i)&&t(i)})}(arguments),n&&!t&&g()),this},remove:function(){return b.each(arguments,function(e,t){for(var n;(n=b.inArray(t,r,n))>-1;)r.splice(n,1),n<=s&&s--}),this},has:function(e){return e?b.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=a=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||g()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},b.extend({Deferred:function(t){var n=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return b.Deferred(function(t){b.each(n,function(n,i){var o=h(e[i[4]])&&e[i[4]];r[i[1]](function(){var e=o&&o.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,i,o){var r=0;function a(t,n,i,o){return function(){var s=this,g=arguments,l=function(){var e,l;if(!(t<r)){if((e=i.apply(s,g))===n.promise())throw new TypeError("Thenable self-resolution");h(l=e&&("object"==typeof e||"function"==typeof e)&&e.then)?o?l.call(e,a(r,n,U,o),a(r,n,T,o)):l.call(e,a(++r,n,U,o),a(r,n,T,o),a(r,n,U,n.notifyWith)):(i!==U&&(s=void 0,g=[e]),(o||n.resolveWith)(s,g))}},c=o?l:function(){try{l()}catch(e){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(e,c.stackTrace),t+1>=r&&(i!==T&&(s=void 0,g=[e]),n.rejectWith(s,g))}};t?c():(b.Deferred.getStackHook&&(c.stackTrace=b.Deferred.getStackHook()),e.setTimeout(c))}}return b.Deferred(function(e){n[0][3].add(a(0,e,h(o)?o:U,e.notifyWith)),n[1][3].add(a(0,e,h(t)?t:U)),n[2][3].add(a(0,e,h(i)?i:T))}).promise()},promise:function(e){return null!=e?b.extend(e,o):o}},r={};return b.each(n,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add(function(){i=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=a.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=r.call(arguments),a=b.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?r.call(arguments):n,--t||a.resolveWith(i,o)}};if(t<=1&&(W(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||h(o[n]&&o[n].then)))return a.then();for(;n--;)W(o[n],s(n),a.reject);return a.promise()}});var E=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&E.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},b.readyException=function(t){e.setTimeout(function(){throw t})};var H=b.Deferred();function O(){i.removeEventListener("DOMContentLoaded",O),e.removeEventListener("load",O),b.ready()}b.fn.ready=function(e){return H.then(e).catch(function(e){b.readyException(e)}),this},b.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--b.readyWait:b.isReady)||(b.isReady=!0,!0!==e&&--b.readyWait>0||H.resolveWith(i,[b]))}}),b.ready.then=H.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?e.setTimeout(b.ready):(i.addEventListener("DOMContentLoaded",O),e.addEventListener("load",O));var L=function(e,t,n,i,o,r,a){var s=0,g=e.length,l=null==n;if("object"===p(n))for(s in o=!0,n)L(e,t,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,h(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(b(e),n)})),t))for(;s<g;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):g?t(e[0],n):r},V=/^-ms-/,Y=/-([a-z])/g;function M(e,t){return t.toUpperCase()}function _(e){return e.replace(V,"ms-").replace(Y,M)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function z(){this.expando=b.expando+z.uid++}z.uid=1,z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[_(t)]=n;else for(i in t)o[_(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(_):(t=_(t))in i?[t]:t.match(D)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||b.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!b.isEmptyObject(t)}};var J=new z,P=new z,j=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/[A-Z]/g;function q(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace($,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:j.test(e)?JSON.parse(e):e)}(n)}catch(o){}P.set(e,t,n)}else n=void 0;return n}b.extend({hasData:function(e){return P.hasData(e)||J.hasData(e)},data:function(e,t,n){return P.access(e,t,n)},removeData:function(e,t){P.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),b.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=P.get(r),1===r.nodeType&&!J.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=_(i.slice(5)),q(r,i,o[i]));J.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){P.set(this,e)}):L(this,function(t){var n;if(r&&void 0===t)return void 0!==(n=P.get(r,e))?n:void 0!==(n=q(r,e))?n:void 0;this.each(function(){P.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){P.remove(this,e)})}}),b.extend({queue:function(e,t,n){var i;if(e)return i=J.get(e,t=(t||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=J.access(e,t,b.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){var n=b.queue(e,t=t||"fx"),i=n.length,o=n.shift(),r=b._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,function(){b.dequeue(e,t)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:b.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),b.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?b.queue(this[0],e):void 0===t?this:this.each(function(){var n=b.queue(this,e,t);b._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=b.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=J.get(r[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=i.documentElement,oe=function(e){return b.contains(e.ownerDocument,e)},re={composed:!0};ie.getRootNode&&(oe=function(e){return b.contains(e.ownerDocument,e)||e.getRootNode(re)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===b.css(e,"display")},se=function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in o=n.apply(e,i||[]),t)e.style[r]=a[r];return o};function ge(e,t,n,i){var o,r,a=20,s=i?function(){return i.cur()}:function(){return b.css(e,t,"")},g=s(),l=n&&n[3]||(b.cssNumber[t]?"":"px"),c=e.nodeType&&(b.cssNumber[t]||"px"!==l&&+g)&&te.exec(b.css(e,t));if(c&&c[3]!==l){for(l=l||c[3],c=+(g/=2)||1;a--;)b.style(e,t,c+l),(1-r)*(1-(r=s()/g||.5))<=0&&(a=0),c/=r;b.style(e,t,(c*=2)+l),n=n||[]}return n&&(c=+c||+g||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=o)),o}var le={};function ce(e){var t,n=e.ownerDocument,i=e.nodeName,o=le[i];return o||(t=n.body.appendChild(n.createElement(i)),o=b.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),le[i]=o,o)}function ue(e,t){for(var n,i,o=[],r=0,a=e.length;r<a;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=J.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&ae(i)&&(o[r]=ce(i))):"none"!==n&&(o[r]="none",J.set(i,"display",n)));for(r=0;r<a;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}b.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?b(this).show():b(this).hide()})}});var Ie=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i,he={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ae(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&Q(e,t)?b.merge([e],n):n}function fe(e,t){for(var n=0,i=e.length;n<i;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}he.optgroup=he.option,he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td;var me,pe,be=/<|&#?\w+;/;function Be(e,t,n,i,o){for(var r,a,s,g,l,c,u=t.createDocumentFragment(),I=[],d=0,C=e.length;d<C;d++)if((r=e[d])||0===r)if("object"===p(r))b.merge(I,r.nodeType?[r]:r);else if(be.test(r)){for(a=a||u.appendChild(t.createElement("div")),s=(de.exec(r)||["",""])[1].toLowerCase(),a.innerHTML=(g=he[s]||he._default)[1]+b.htmlPrefilter(r)+g[2],c=g[0];c--;)a=a.lastChild;b.merge(I,a.childNodes),(a=u.firstChild).textContent=""}else I.push(t.createTextNode(r));for(u.textContent="",d=0;r=I[d++];)if(i&&b.inArray(r,i)>-1)o&&o.push(r);else if(l=oe(r),a=Ae(u.appendChild(r),"script"),l&&fe(a),n)for(c=0;r=a[c++];)Ce.test(r.type||"")&&n.push(r);return u}me=i.createDocumentFragment().appendChild(i.createElement("div")),(pe=i.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),me.appendChild(pe),C.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var ve=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function Fe(){return!0}function Ge(){return!1}function Qe(e,t){return e===function(){try{return i.activeElement}catch(e){}}()==("focus"===t)}function we(e,t,n,i,o,r){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)we(e,s,n,i,t[s],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Ge;else if(!o)return e;return 1===r&&(a=o,(o=function(e){return b().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=b.guid++)),e.each(function(){b.event.add(this,t,o,i,n)})}function Se(e,t,n){n?(J.set(e,t,!1),b.event.add(e,t,{namespace:!1,handler:function(e){var i,o,a=J.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(b.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=r.call(arguments),J.set(this,t,a),i=n(this,t),this[t](),a!==(o=J.get(this,t))||i?J.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o.value}else a.length&&(J.set(this,t,{value:b.event.trigger(b.extend(a[0],b.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&b.event.add(e,t,Fe)}b.event={global:{},add:function(e,t,n,i,o){var r,a,s,g,l,c,u,I,d,C,h,A=J.get(e);if(A)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&b.find.matchesSelector(ie,o),n.guid||(n.guid=b.guid++),(g=A.events)||(g=A.events={}),(a=A.handle)||(a=A.handle=function(t){return void 0!==b&&b.event.triggered!==t.type?b.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(D)||[""]).length;l--;)d=h=(s=xe.exec(t[l])||[])[1],C=(s[2]||"").split(".").sort(),d&&(u=b.event.special[d]||{},u=b.event.special[d=(o?u.delegateType:u.bindType)||d]||{},c=b.extend({type:d,origType:h,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:C.join(".")},r),(I=g[d])||((I=g[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,C,a)||e.addEventListener&&e.addEventListener(d,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?I.splice(I.delegateCount++,0,c):I.push(c),b.event.global[d]=!0)},remove:function(e,t,n,i,o){var r,a,s,g,l,c,u,I,d,C,h,A=J.hasData(e)&&J.get(e);if(A&&(g=A.events)){for(l=(t=(t||"").match(D)||[""]).length;l--;)if(d=h=(s=xe.exec(t[l])||[])[1],C=(s[2]||"").split(".").sort(),d){for(u=b.event.special[d]||{},I=g[d=(i?u.delegateType:u.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=I.length;r--;)c=I[r],!o&&h!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(I.splice(r,1),c.selector&&I.delegateCount--,u.remove&&u.remove.call(e,c));a&&!I.length&&(u.teardown&&!1!==u.teardown.call(e,C,A.handle)||b.removeEvent(e,d,A.handle),delete g[d])}else for(d in g)b.event.remove(e,d+t[l],n,i,!0);b.isEmptyObject(g)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,a,s=b.event.fix(e),g=new Array(arguments.length),l=(J.get(this,"events")||{})[s.type]||[],c=b.event.special[s.type]||{};for(g[0]=s,t=1;t<arguments.length;t++)g[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=b.event.handlers.call(this,s,l),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==r.namespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(i=((b.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,g))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,o,r,a,s=[],g=t.delegateCount,l=e.target;if(g&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(r=[],a={},n=0;n<g;n++)void 0===a[o=(i=t[n]).selector+" "]&&(a[o]=i.needsContext?b(o,this).index(l)>-1:b.find(o,this,null,[l]).length),a[o]&&r.push(i);r.length&&s.push({elem:l,handlers:r})}return l=this,g<t.length&&s.push({elem:l,handlers:t.slice(g)}),s},addProp:function(e,t){Object.defineProperty(b.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[b.expando]?e:new b.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ie.test(t.type)&&t.click&&Q(t,"input")&&Se(t,"click",Fe),!1},trigger:function(e){var t=this||e;return Ie.test(t.type)&&t.click&&Q(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return Ie.test(t.type)&&t.click&&Q(t,"input")&&J.get(t,"click")||Q(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},b.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Fe:Ge,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Ge,isPropagationStopped:Ge,isImmediatePropagationStopped:Ge,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Fe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Fe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Fe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(e,t){b.event.special[e]={setup:function(){return Se(this,e,Qe),!1},trigger:function(){return Se(this,e),!0},delegateType:t}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,o=e.handleObj;return i&&(i===this||b.contains(this,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.fn.extend({on:function(e,t,n,i){return we(this,e,t,n,i)},one:function(e,t,n,i){return we(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ge),this.each(function(){b.event.remove(this,e,n,t)})}});var Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ze=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Re(e,t){return Q(e,"table")&&Q(11!==t.nodeType?t:t.firstChild,"tr")&&b(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Te(e,t){var n,i,o,r,a,s,g,l;if(1===t.nodeType){if(J.hasData(e)&&(r=J.access(e),a=J.set(t,r),l=r.events))for(o in delete a.handle,a.events={},l)for(n=0,i=l[o].length;n<i;n++)b.event.add(t,o,l[o][n]);P.hasData(e)&&(s=P.access(e),g=b.extend({},s),P.set(t,g))}}function We(e,t,n,i){t=a.apply([],t);var o,r,s,g,l,c,u=0,I=e.length,d=I-1,A=t[0],f=h(A);if(f||I>1&&"string"==typeof A&&!C.checkClone&&Ne.test(A))return e.each(function(o){var r=e.eq(o);f&&(t[0]=A.call(this,o,r.html())),We(r,t,n,i)});if(I&&(r=(o=Be(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(g=(s=b.map(Ae(o,"script"),De)).length;u<I;u++)l=o,u!==d&&(l=b.clone(l,!0,!0),g&&b.merge(s,Ae(l,"script"))),n.call(e[u],l,u);if(g)for(c=s[s.length-1].ownerDocument,b.map(s,Ue),u=0;u<g;u++)Ce.test((l=s[u]).type||"")&&!J.access(l,"globalEval")&&b.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?b._evalUrl&&!l.noModule&&b._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):m(l.textContent.replace(ke,""),l,c))}return e}function Ee(e,t,n){for(var i,o=t?b.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||b.cleanData(Ae(i)),i.parentNode&&(n&&oe(i)&&fe(Ae(i,"script")),i.parentNode.removeChild(i));return e}b.extend({htmlPrefilter:function(e){return e.replace(Xe,"<$1></$2>")},clone:function(e,t,n){var i,o,r,a,s,g,l,c=e.cloneNode(!0),u=oe(e);if(!(C.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(a=Ae(c),i=0,o=(r=Ae(e)).length;i<o;i++)s=r[i],"input"===(l=(g=a[i]).nodeName.toLowerCase())&&Ie.test(s.type)?g.checked=s.checked:"input"!==l&&"textarea"!==l||(g.defaultValue=s.defaultValue);if(t)if(n)for(r=r||Ae(e),a=a||Ae(c),i=0,o=r.length;i<o;i++)Te(r[i],a[i]);else Te(e,c);return(a=Ae(c,"script")).length>0&&fe(a,!u&&Ae(e,"script")),c},cleanData:function(e){for(var t,n,i,o=b.event.special,r=0;void 0!==(n=e[r]);r++)if(K(n)){if(t=n[J.expando]){if(t.events)for(i in t.events)o[i]?b.event.remove(n,i):b.removeEvent(n,i,t.handle);n[J.expando]=void 0}n[P.expando]&&(n[P.expando]=void 0)}}}),b.fn.extend({detach:function(e){return Ee(this,e,!0)},remove:function(e){return Ee(this,e)},text:function(e){return L(this,function(e){return void 0===e?b.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return We(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return We(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return We(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return We(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(b.cleanData(Ae(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return L(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ze.test(e)&&!he[(de.exec(e)||["",""])[1].toLowerCase()]){e=b.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(b.cleanData(Ae(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,function(t){var n=this.parentNode;b.inArray(this,e)<0&&(b.cleanData(Ae(this)),n&&n.replaceChild(t,this))},e)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,i=[],o=b(e),r=o.length-1,a=0;a<=r;a++)n=a===r?this:this.clone(!0),b(o[a])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var He=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Oe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Le=new RegExp(ne.join("|"),"i");function Ve(e,t,n){var i,o,r,a,s=e.style;return(n=n||Oe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=b.style(e,t)),!C.pixelBoxStyles()&&He.test(a)&&Le.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);o="1%"!==t.top,g=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),r=36===n(t.width),c.style.position="absolute",a=12===n(c.offsetWidth/3),ie.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var o,r,a,s,g,l=i.createElement("div"),c=i.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle="content-box"===c.style.backgroundClip,b.extend(C,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),g},scrollboxSize:function(){return t(),a}}))}();var Me=["Webkit","Moz","ms"],_e=i.createElement("div").style,Ke={};function ze(e){return b.cssProps[e]||Ke[e]||(e in _e?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Me.length;n--;)if((e=Me[n]+t)in _e)return e}(e)||e)}var Je=/^(none|table(?!-c[ea]).+)/,Pe=/^--/,je={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"};function qe(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function et(e,t,n,i,o,r){var a="width"===t?1:0,s=0,g=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(g+=b.css(e,n+ne[a],!0,o)),i?("content"===n&&(g-=b.css(e,"padding"+ne[a],!0,o)),"margin"!==n&&(g-=b.css(e,"border"+ne[a]+"Width",!0,o))):(g+=b.css(e,"padding"+ne[a],!0,o),"padding"!==n?g+=b.css(e,"border"+ne[a]+"Width",!0,o):s+=b.css(e,"border"+ne[a]+"Width",!0,o));return!i&&r>=0&&(g+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-g-s-.5))||0),g}function tt(e,t,n){var i=Oe(e),o=(!C.boxSizingReliable()||n)&&"border-box"===b.css(e,"boxSizing",!1,i),r=o,a=Ve(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(a)){if(!n)return a;a="auto"}return(!C.boxSizingReliable()&&o||"auto"===a||!parseFloat(a)&&"inline"===b.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===b.css(e,"boxSizing",!1,i),(r=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(o?"border":"content"),r,i,a)+"px"}function nt(e,t,n,i,o){return new nt.prototype.init(e,t,n,i,o)}b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ve(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=_(t),g=Pe.test(t),l=e.style;if(g||(t=ze(s)),a=b.cssHooks[t]||b.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:l[t];"string"==(r=typeof n)&&(o=te.exec(n))&&o[1]&&(n=ge(e,t,o),r="number"),null!=n&&n==n&&("number"!==r||g||(n+=o&&o[3]||(b.cssNumber[s]?"":"px")),C.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(g?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,i){var o,r,a,s=_(t);return Pe.test(t)||(t=ze(s)),(a=b.cssHooks[t]||b.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ve(e,t,i)),"normal"===o&&t in $e&&(o=$e[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,i){if(n)return!Je.test(b.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,i):se(e,je,function(){return tt(e,t,i)})},set:function(e,n,i){var o,r=Oe(e),a=!C.scrollboxSize()&&"absolute"===r.position,s=(a||i)&&"border-box"===b.css(e,"boxSizing",!1,r),g=i?et(e,t,i,s,r):0;return s&&a&&(g-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-et(e,t,"border",!1,r)-.5)),g&&(o=te.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=b.css(e,t)),qe(0,n,g)}}}),b.cssHooks.marginLeft=Ye(C.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+ne[i]+t]=r[i]||r[i-2]||r[0];return o}},"margin"!==e&&(b.cssHooks[e+t].set=qe)}),b.fn.extend({css:function(e,t){return L(this,function(e,t,n){var i,o,r={},a=0;if(Array.isArray(t)){for(i=Oe(e),o=t.length;a<o;a++)r[t[a]]=b.css(e,t[a],!1,i);return r}return void 0!==n?b.style(e,t,n):b.css(e,t)},e,t,arguments.length>1)}}),b.Tween=nt,(nt.prototype={constructor:nt,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||b.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(b.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=b.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):1!==e.elem.nodeType||!b.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:b.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},b.fx=nt.prototype.init,b.fx.step={};var it,ot,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){ot&&(!1===i.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,b.fx.interval),b.fx.tick())}function gt(){return e.setTimeout(function(){it=void 0}),it=Date.now()}function lt(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=ne[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function ct(e,t,n){for(var i,o=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,t,e))return i}function ut(e,t,n){var i,o,r=0,a=ut.prefilters.length,s=b.Deferred().always(function(){delete g.elem}),g=function(){if(o)return!1;for(var t=it||gt(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),r=0,a=l.tweens.length;r<a;r++)l.tweens[r].run(i);return s.notifyWith(e,[l,i,n]),i<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||gt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,i,o,r,a;for(n in e)if(o=t[i=_(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(a=b.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(c,l.opts.specialEasing);r<a;r++)if(i=ut.prefilters[r].call(l,e,c,l.opts))return h(i.stop)&&(b._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return b.map(c,ct,l),h(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),b.fx.timer(b.extend(g,{elem:e,anim:l,queue:l.opts.queue})),l}b.Animation=b.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ge(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(D);for(var n,i=0,o=e.length;i<o;i++)(ut.tweeners[n=e[i]]=ut.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var i,o,r,a,s,g,l,c,u="width"in t||"height"in t,I=this,d={},C=e.style,h=e.nodeType&&ae(e),A=J.get(e,"fxshow");for(i in n.queue||(null==(a=b._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,I.always(function(){I.always(function(){a.unqueued--,b.queue(e,"fx").length||a.empty.fire()})})),t)if(rt.test(o=t[i])){if(delete t[i],r=r||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!A||void 0===A[i])continue;h=!0}d[i]=A&&A[i]||b.style(e,i)}if((g=!b.isEmptyObject(t))||!b.isEmptyObject(d))for(i in u&&1===e.nodeType&&(n.overflow=[C.overflow,C.overflowX,C.overflowY],null==(l=A&&A.display)&&(l=J.get(e,"display")),"none"===(c=b.css(e,"display"))&&(l?c=l:(ue([e],!0),l=e.style.display||l,c=b.css(e,"display"),ue([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===b.css(e,"float")&&(g||(I.done(function(){C.display=l}),null==l&&(l="none"===(c=C.display)?"":c)),C.display="inline-block")),n.overflow&&(C.overflow="hidden",I.always(function(){C.overflow=n.overflow[0],C.overflowX=n.overflow[1],C.overflowY=n.overflow[2]})),g=!1,d)g||(A?"hidden"in A&&(h=A.hidden):A=J.access(e,"fxshow",{display:l}),r&&(A.hidden=!h),h&&ue([e],!0),I.done(function(){for(i in h||ue([e]),J.remove(e,"fxshow"),d)b.style(e,i,d[i])})),g=ct(h?A[i]:0,i,I),i in A||(A[i]=g.start,h&&(g.end=g.start,g.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),b.speed=function(e,t,n){var i=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return b.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration=i.duration in b.fx.speeds?b.fx.speeds[i.duration]:b.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){h(i.old)&&i.old.call(this),i.queue&&b.dequeue(this,i.queue)},i},b.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=b.isEmptyObject(e),r=b.speed(t,n,i),a=function(){var t=ut(this,b.extend({},e),r);(o||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=b.timers,a=J.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&at.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||b.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=b.timers,a=i?i.length:0;for(n.finish=!0,b.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,i,o)}}),b.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),b.timers=[],b.fx.tick=function(){var e,t=0,n=b.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||b.fx.stop(),it=void 0},b.fx.timer=function(e){b.timers.push(e),b.fx.start()},b.fx.interval=13,b.fx.start=function(){ot||(ot=!0,st())},b.fx.stop=function(){ot=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(t,n){return t=b.fx&&b.fx.speeds[t]||t,this.queue(n=n||"fx",function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=i.createElement("input"),t=i.createElement("select").appendChild(i.createElement("option"));e.type="checkbox",C.checkOn=""!==e.value,C.optSelected=t.selected,(e=i.createElement("input")).value="t",e.type="radio",C.radioValue="t"===e.value}();var It,dt=b.expr.attrHandle;b.fn.extend({attr:function(e,t){return L(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})}}),b.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?b.prop(e,t,n):(1===r&&b.isXMLDoc(e)||(o=b.attrHooks[t.toLowerCase()]||(b.expr.match.bool.test(t)?It:void 0)),void 0!==n?null===n?void b.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=b.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!C.radioValue&&"radio"===t&&Q(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(D);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),It={set:function(e,t,n){return!1===t?b.removeAttr(e,n):e.setAttribute(n,n),n}},b.each(b.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||b.find.attr;dt[t]=function(e,t,i){var o,r,a=t.toLowerCase();return i||(r=dt[a],dt[a]=o,o=null!=n(e,t,i)?a:null,dt[a]=r),o}});var Ct=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;function At(e){return(e.match(D)||[]).join(" ")}function ft(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}b.fn.extend({prop:function(e,t){return L(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[b.propFix[e]||e]})}}),b.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&b.isXMLDoc(e)||(o=b.propHooks[t=b.propFix[t]||t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=b.find.attr(e,"tabindex");return t?parseInt(t,10):Ct.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(b.propHooks.selected={get:function(e){return null},set:function(e){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(e){var t,n,i,o,r,a,s,g=0;if(h(e))return this.each(function(t){b(this).addClass(e.call(this,t,ft(this)))});if((t=mt(e)).length)for(;n=this[g++];)if(o=ft(n),i=1===n.nodeType&&" "+At(o)+" "){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(s=At(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,o,r,a,s,g=0;if(h(e))return this.each(function(t){b(this).removeClass(e.call(this,t,ft(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[g++];)if(o=ft(n),i=1===n.nodeType&&" "+At(o)+" "){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(s=At(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,ft(this),t),t)}):this.each(function(){var t,o,r,a;if(i)for(o=0,r=b(this),a=mt(e);t=a[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=ft(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+At(ft(n))+" ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g;b.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=h(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,b(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),(t=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(pt,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=b.find.attr(e,"value");return null!=t?t:At(b.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,a="select-one"===e.type,s=a?null:[],g=a?r+1:o.length;for(i=r<0?g:a?r:0;i<g;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!Q(n.parentNode,"optgroup"))){if(t=b(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=b.makeArray(t),a=o.length;a--;)((i=o[a]).selected=b.inArray(b.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=b.inArray(b(e).val(),t)>-1}},C.checkOn||(b.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),C.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,Bt=function(e){e.stopPropagation()};b.extend(b.event,{trigger:function(t,n,o,r){var a,s,g,l,c,I,d,C,f=[o||i],m=u.call(t,"type")?t.type:t,p=u.call(t,"namespace")?t.namespace.split("."):[];if(s=C=g=o=o||i,3!==o.nodeType&&8!==o.nodeType&&!bt.test(m+b.event.triggered)&&(m.indexOf(".")>-1&&(p=m.split("."),m=p.shift(),p.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[b.expando]?t:new b.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:b.makeArray(n,[t]),d=b.event.special[m]||{},r||!d.trigger||!1!==d.trigger.apply(o,n))){if(!r&&!d.noBubble&&!A(o)){for(bt.test((l=d.delegateType||m)+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),g=s;g===(o.ownerDocument||i)&&f.push(g.defaultView||g.parentWindow||e)}for(a=0;(s=f[a++])&&!t.isPropagationStopped();)C=s,t.type=a>1?l:d.bindType||m,(I=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&I.apply(s,n),(I=c&&s[c])&&I.apply&&K(s)&&(t.result=I.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),n)||!K(o)||c&&h(o[m])&&!A(o)&&((g=o[c])&&(o[c]=null),b.event.triggered=m,t.isPropagationStopped()&&C.addEventListener(m,Bt),o[m](),t.isPropagationStopped()&&C.removeEventListener(m,Bt),b.event.triggered=void 0,g&&(o[c]=g)),t.result}},simulate:function(e,t,n){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0});b.event.trigger(i,null,t)}}),b.fn.extend({trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),C.focusin||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){b.event.simulate(t,e.target,b.event.fix(e))};b.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=J.access(i,t);o||i.addEventListener(e,n,!0),J.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=J.access(i,t)-1;o?J.access(i,t,o):(i.removeEventListener(e,n,!0),J.remove(i,t))}}});var vt=e.location,yt=Date.now(),xt=/\?/;b.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+t),n};var Ft=/\[\]$/,Gt=/\r?\n/g,Qt=/^(?:submit|button|image|reset|file)$/i,wt=/^(?:input|select|textarea|keygen)/i;function St(e,t,n,i){var o;if(Array.isArray(t))b.each(t,function(t,o){n||Ft.test(e)?i(e,o):St(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==p(t))i(e,t);else for(o in t)St(e+"["+o+"]",t[o],n,i)}b.param=function(e,t){var n,i=[],o=function(e,t){var n=h(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(n in e)St(n,e[n],t,o);return i.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&wt.test(this.nodeName)&&!Qt.test(e)&&(this.checked||!Ie.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:Array.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(Gt,"\r\n")}}):{name:t.name,value:n.replace(Gt,"\r\n")}}).get()}});var Xt=/%20/g,Zt=/#.*$/,Nt=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Dt=/^\/\//,Ut={},Tt={},Wt="*/".concat("*"),Et=i.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(D)||[];if(h(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Ot(e,t,n,i){var o={},r=e===Tt;function a(s){var g;return o[s]=!0,b.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||r||o[l]?r?!(g=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),g}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Lt(e,t){var n,i,o=b.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&b.extend(!0,e,i),e}Et.href=vt.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,b.ajaxSettings),t):Lt(b.ajaxSettings,e)},ajaxPrefilter:Ht(Ut),ajaxTransport:Ht(Tt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var o,r,a,s,g,l,c,u,I,d,C=b.ajaxSetup({},n=n||{}),h=C.context||C,A=C.context&&(h.nodeType||h.jquery)?b(h):b.event,f=b.Deferred(),m=b.Callbacks("once memory"),p=C.statusCode||{},B={},v={},y="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=kt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=v[e.toLowerCase()]=v[e.toLowerCase()]||e,B[e]=t),this},overrideMimeType:function(e){return null==c&&(C.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)x.always(e[x.status]);else for(t in e)p[t]=[p[t],e[t]];return this},abort:function(e){var t=e||y;return o&&o.abort(t),F(0,t),this}};if(f.promise(x),C.url=((t||C.url||vt.href)+"").replace(Dt,vt.protocol+"//"),C.type=n.method||n.type||C.method||C.type,C.dataTypes=(C.dataType||"*").toLowerCase().match(D)||[""],null==C.crossDomain){l=i.createElement("a");try{l.href=C.url,l.href=l.href,C.crossDomain=Et.protocol+"//"+Et.host!=l.protocol+"//"+l.host}catch(G){C.crossDomain=!0}}if(C.data&&C.processData&&"string"!=typeof C.data&&(C.data=b.param(C.data,C.traditional)),Ot(Ut,C,n,x),c)return x;for(I in(u=b.event&&C.global)&&0==b.active++&&b.event.trigger("ajaxStart"),C.type=C.type.toUpperCase(),C.hasContent=!Rt.test(C.type),r=C.url.replace(Zt,""),C.hasContent?C.data&&C.processData&&0===(C.contentType||"").indexOf("application/x-www-form-urlencoded")&&(C.data=C.data.replace(Xt,"+")):(d=C.url.slice(r.length),C.data&&(C.processData||"string"==typeof C.data)&&(r+=(xt.test(r)?"&":"?")+C.data,delete C.data),!1===C.cache&&(r=r.replace(Nt,"$1"),d=(xt.test(r)?"&":"?")+"_="+yt+++d),C.url=r+d),C.ifModified&&(b.lastModified[r]&&x.setRequestHeader("If-Modified-Since",b.lastModified[r]),b.etag[r]&&x.setRequestHeader("If-None-Match",b.etag[r])),(C.data&&C.hasContent&&!1!==C.contentType||n.contentType)&&x.setRequestHeader("Content-Type",C.contentType),x.setRequestHeader("Accept",C.dataTypes[0]&&C.accepts[C.dataTypes[0]]?C.accepts[C.dataTypes[0]]+("*"!==C.dataTypes[0]?", "+Wt+"; q=0.01":""):C.accepts["*"]),C.headers)x.setRequestHeader(I,C.headers[I]);if(C.beforeSend&&(!1===C.beforeSend.call(h,x,C)||c))return x.abort();if(y="abort",m.add(C.complete),x.done(C.success),x.fail(C.error),o=Ot(Tt,C,n,x)){if(x.readyState=1,u&&A.trigger("ajaxSend",[x,C]),c)return x;C.async&&C.timeout>0&&(g=e.setTimeout(function(){x.abort("timeout")},C.timeout));try{c=!1,o.send(B,F)}catch(G){if(c)throw G;F(-1,G)}}else F(-1,"No Transport");function F(t,n,i,s){var l,I,d,B,v,y=n;c||(c=!0,g&&e.clearTimeout(g),o=void 0,a=s||"",x.readyState=t>0?4:0,l=t>=200&&t<300||304===t,i&&(B=function(e,t,n){for(var i,o,r,a,s=e.contents,g=e.dataTypes;"*"===g[0];)g.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){g.unshift(o);break}if(g[0]in n)r=g[0];else{for(o in n){if(!g[0]||e.converters[o+" "+g[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==g[0]&&g.unshift(r),n[r]}(C,x,i)),B=function(e,t,n,i){var o,r,a,s,g,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!g&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),g=r,r=c.shift())if("*"===r)r=g;else if("*"!==g&&g!==r){if(!(a=l[g+" "+r]||l["* "+r]))for(o in l)if((s=o.split(" "))[1]===r&&(a=l[g+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[o]:!0!==l[o]&&(r=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(G){return{state:"parsererror",error:a?G:"No conversion from "+g+" to "+r}}}return{state:"success",data:t}}(C,B,x,l),l?(C.ifModified&&((v=x.getResponseHeader("Last-Modified"))&&(b.lastModified[r]=v),(v=x.getResponseHeader("etag"))&&(b.etag[r]=v)),204===t||"HEAD"===C.type?y="nocontent":304===t?y="notmodified":(y=B.state,I=B.data,l=!(d=B.error))):(d=y,!t&&y||(y="error",t<0&&(t=0))),x.status=t,x.statusText=(n||y)+"",l?f.resolveWith(h,[I,y,x]):f.rejectWith(h,[x,y,d]),x.statusCode(p),p=void 0,u&&A.trigger(l?"ajaxSuccess":"ajaxError",[x,C,l?I:d]),m.fireWith(h,[x,y]),u&&(A.trigger("ajaxComplete",[x,C]),--b.active||b.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return b.get(e,t,n,"json")},getScript:function(e,t){return b.get(e,void 0,t,"script")}}),b.each(["get","post"],function(e,t){b[t]=function(e,n,i,o){return h(n)&&(o=o||i,i=n,n=void 0),b.ajax(b.extend({url:e,type:t,dataType:o,data:n,success:i},b.isPlainObject(e)&&e))}}),b._evalUrl=function(e,t){return b.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){b.globalEval(e,t)}})},b.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=b(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(e){return!b.expr.pseudos.visible(e)},b.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Vt={0:200,1223:204},Yt=b.ajaxSettings.xhr();C.cors=!!Yt&&"withCredentials"in Yt,C.ajax=Yt=!!Yt,b.ajaxTransport(function(t){var n,i;if(C.cors||Yt&&!t.crossDomain)return{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(g){if(n)throw g}},abort:function(){n&&n()}}}),b.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),b.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(o,r){t=b("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),i.head.appendChild(t[0])},abort:function(){n&&n()}}});var Mt,_t=[],Kt=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=_t.pop()||b.expando+"_"+yt++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,a,s=!1!==t.jsonp&&(Kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Kt,"$1"+o):!1!==t.jsonp&&(t.url+=(xt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||b.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},i.always(function(){void 0===r?b(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,_t.push(o)),a&&h(r)&&r(a[0]),a=r=void 0}),"script"}),C.createHTMLDocument=((Mt=i.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Mt.childNodes.length),b.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(C.createHTMLDocument?((o=(t=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,t.head.appendChild(o)):t=i),a=!n&&[],(r=w.exec(e))?[t.createElement(r[1])]:(r=Be([e],t,a),a&&a.length&&b(a).remove(),b.merge([],r.childNodes)));var o,r,a},b.fn.load=function(e,t,n){var i,o,r,a=this,s=e.indexOf(" ");return s>-1&&(i=At(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&b.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.expr.pseudos.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length},b.offset={setOffset:function(e,t,n){var i,o,r,a,s,g,l=b.css(e,"position"),c=b(e),u={};"static"===l&&(e.style.position="relative"),s=c.offset(),r=b.css(e,"top"),g=b.css(e,"left"),("absolute"===l||"fixed"===l)&&(r+g).indexOf("auto")>-1?(a=(i=c.position()).top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(g)||0),h(t)&&(t=t.call(e,n,b.extend({},s))),null!=t.top&&(u.top=t.top-s.top+a),null!=t.left&&(u.left=t.left-s.left+o),"using"in t?t.using.call(e,u):c.css(u)}},b.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){b.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?{top:(t=i.getBoundingClientRect()).top+(n=i.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===b.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===b.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=b(e).offset()).top+=b.css(e,"borderTopWidth",!0),o.left+=b.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-b.css(i,"marginTop",!0),left:t.left-o.left-b.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===b.css(e,"position");)e=e.offsetParent;return e||ie})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;b.fn[e]=function(i){return L(this,function(e,i,o){var r;if(A(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o},e,i,arguments.length)}}),b.each(["top","left"],function(e,t){b.cssHooks[t]=Ye(C.pixelPosition,function(e,n){if(n)return n=Ve(e,t),He.test(n)?b(e).position()[t]+"px":n})}),b.each({Height:"height",Width:"width"},function(e,t){b.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){b.fn[i]=function(o,r){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===r?"margin":"border");return L(this,function(t,n,o){var r;return A(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?b.css(t,n,s):b.style(t,n,o,s)},t,a?o:void 0,a)}})}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),b.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),b.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||b.guid++,o},b.holdReady=function(e){e?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=Q,b.isFunction=h,b.isWindow=A,b.camelCase=_,b.type=p,b.now=Date.now,b.isNumeric=function(e){var t=b.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return b});var zt=e.jQuery,Jt=e.$;return b.noConflict=function(t){return e.$===b&&(e.$=Jt),t&&e.jQuery===b&&(e.jQuery=zt),b},t||(e.jQuery=e.$=b),b}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var n,i,o,r;return t&&t.requirejs||(t?i=t:t={},function(e){var t,r,a,s,g={},l={},c={},u={},I=Object.prototype.hasOwnProperty,d=[].slice,C=/\.js$/;function h(e,t){return I.call(e,t)}function A(e,t){var n,i,o,r,a,s,g,l,u,I,d,h=t&&t.split("/"),A=c.map,f=A&&A["*"]||{};if(e){for(a=(e=e.split("/")).length-1,c.nodeIdCompat&&C.test(e[a])&&(e[a]=e[a].replace(C,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),u=0;u<e.length;u++)if("."===(d=e[u]))e.splice(u,1),u-=1;else if(".."===d){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((h||f)&&A){for(u=(n=e.split("/")).length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(I=h.length;I>0;I-=1)if((o=A[h.slice(0,I).join("/")])&&(o=o[i])){r=o,s=u;break}if(r)break;!g&&f&&f[i]&&(g=f[i],l=u)}!r&&g&&(r=g,s=l),r&&(n.splice(0,s,r),e=n.join("/"))}return e}function f(t,n){return function(){var i=d.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),r.apply(e,i.concat([t,n]))}}function m(e){return function(t){g[e]=t}}function p(n){if(h(l,n)){var i=l[n];delete l[n],u[n]=!0,t.apply(e,i)}if(!h(g,n)&&!h(u,n))throw new Error("No "+n);return g[n]}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function B(e){return e?b(e):[]}function v(e){return function(){return c&&c.config&&c.config[e]||{}}}a=function(e,t){var n,i,o=b(e),r=o[0],a=t[1];return e=o[1],r&&(n=p(r=A(r,a))),r?e=n&&n.normalize?n.normalize(e,(i=a,function(e){return A(e,i)})):A(e,a):(e=(o=b(e=A(e,a)))[1],(r=o[0])&&(n=p(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},s={require:function(e){return f(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:v(e)}}},t=function(t,n,i,o){var r,c,I,d,C,A,b,v=[],y=typeof i;if(A=B(o=o||t),"undefined"===y||"function"===y){for(n=!n.length&&i.length?["require","exports","module"]:n,C=0;C<n.length;C+=1)if("require"===(c=(d=a(n[C],A)).f))v[C]=s.require(t);else if("exports"===c)v[C]=s.exports(t),b=!0;else if("module"===c)r=v[C]=s.module(t);else if(h(g,c)||h(l,c)||h(u,c))v[C]=p(c);else{if(!d.p)throw new Error(t+" missing "+c);d.p.load(d.n,f(o,!0),m(c),{}),v[C]=g[c]}I=i?i.apply(g[t],v):void 0,t&&(r&&r.exports!==e&&r.exports!==g[t]?g[t]=r.exports:I===e&&b||(g[t]=I))}else t&&(g[t]=i)},n=i=r=function(n,i,o,g,l){if("string"==typeof n)return s[n]?s[n](i):p(a(n,B(i)).f);if(!n.splice){if((c=n).deps&&r(c.deps,c.callback),!i)return;i.splice?(n=i,i=o,o=null):n=e}return i=i||function(){},"function"==typeof o&&(o=g,g=l),g?t(e,n,i,o):setTimeout(function(){t(e,n,i,o)},4),r},r.config=function(e){return r(e)},n._defined=g,(o=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),h(g,e)||h(l,e)||(l[e]=[e,t,n])}).amd={jQuery:!0}}(),t.requirejs=n,t.require=i,t.define=o),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){var t={};function n(e){var t=e.prototype,n=[];for(var i in t)"function"==typeof t[i]&&"constructor"!==i&&n.push(i);return n}t.Extend=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},t.Decorate=function(e,t){var i=n(t),o=n(e);function r(){var n=Array.prototype.unshift,i=e.prototype.constructor;t.prototype.constructor.length>0&&(n.call(arguments,e.prototype.constructor),i=t.prototype.constructor),i.apply(this,arguments)}t.displayName=e.displayName,r.prototype=new function(){this.constructor=r};for(var a=0;a<o.length;a++){var s=o[a];r.prototype[s]=e.prototype[s]}for(var g=function(e){var n=function(){};e in r.prototype&&(n=r.prototype[e]);var i=t.prototype[e];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}},l=0;l<i.length;l++){var c=i[l];r.prototype[c]=g(c)}return r};var i=function(){this.listeners={}};i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},t.Observable=i,t.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var o=0;o<n.length;o++){var r=n[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in i||(i[r]={}),o==n.length-1&&(i[r]=e[t]),i=i[r]}delete e[t]}}return e},t.hasScroll=function(t,n){var i=e(n),o=n.style.overflowX,r=n.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},t.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},t.__cache={};var o=0;return t.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?e.setAttribute("data-select2-id",t=e.id):(e.setAttribute("data-select2-id",++o),t=o.toString())),t},t.StoreData=function(e,n,i){var o=t.GetUniqueElementId(e);t.__cache[o]||(t.__cache[o]={}),t.__cache[o][n]=i},t.GetData=function(n,i){var o=t.GetUniqueElementId(n);return i?t.__cache[o]&&null!=t.__cache[o][i]?t.__cache[o][i]:e(n).data(i):t.__cache[o]},t.RemoveData=function(e){var n=t.GetUniqueElementId(e);null!=t.__cache[n]&&delete t.__cache[n]},t}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(t.message);i.append(n(o(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=this.option(e.results[n]);t.push(i)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current(function(i){var o=e.map(i,function(e){return e.id.toString()});n.$results.find(".select2-results__option[aria-selected]").each(function(){var n=e(this),i=t.GetData(this,"data");null!=i.element&&i.element.selected||null==i.element&&e.inArray(""+i.id,o)>-1?n.attr("aria-selected","true"):n.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var i=document.createElement("li");i.className="select2-results__option";var o={role:"treeitem","aria-selected":"false"};for(var r in n.disabled&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==n.id&&delete o["aria-selected"],null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(o.role="group",o["aria-label"]=n.text,delete o["aria-selected"]),o)i.setAttribute(r,o[r]);if(n.children){var a=e(i),s=document.createElement("strong");s.className="select2-results__group",e(s),this.template(n,s);for(var g=[],l=0;l<n.children.length;l++){var c=this.option(n.children[l]);g.push(c)}var u=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});u.append(g),a.append(s),a.append(u)}else this.template(n,i);return t.StoreData(i,"data",n),i},n.prototype.bind=function(n,i){var o=this;this.$results.attr("id",n.id+"-results"),n.on("results:all",function(e){o.clear(),o.append(e.data),n.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),n.on("results:append",function(e){o.append(e.data),n.isOpen()&&o.setClasses()}),n.on("query",function(e){o.hideMessages(),o.showLoading(e)}),n.on("select",function(){n.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),n.on("unselect",function(){n.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),n.on("open",function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()}),n.on("close",function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")}),n.on("results:toggle",function(){var e=o.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),n.on("results:select",function(){var e=o.getHighlightedResults();if(0!==e.length){var n=t.GetData(e[0],"data");"true"==e.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:n})}}),n.on("results:previous",function(){var e=o.getHighlightedResults(),t=o.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var i=n-1;0===e.length&&(i=0);var r=t.eq(i);r.trigger("mouseenter");var a=o.$results.offset().top,s=r.offset().top,g=o.$results.scrollTop()+(s-a);0===i?o.$results.scrollTop(0):s-a<0&&o.$results.scrollTop(g)}}),n.on("results:next",function(){var e=o.getHighlightedResults(),t=o.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var i=t.eq(n);i.trigger("mouseenter");var r=o.$results.offset().top+o.$results.outerHeight(!1),a=i.offset().top+i.outerHeight(!1),s=o.$results.scrollTop()+a-r;0===n?o.$results.scrollTop(0):a>r&&o.$results.scrollTop(s)}}),n.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),n.on("results:message",function(e){o.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-t+e.deltaY,i=e.deltaY>0&&t-e.deltaY<=0,r=e.deltaY<0&&n<=o.$results.height();i?(o.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):r&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(n){var i=e(this),r=t.GetData(this,"data");"true"!==i.attr("aria-selected")?o.trigger("select",{originalEvent:n,data:r}):o.options.get("multiple")?o.trigger("unselect",{originalEvent:n,data:r}):o.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(n){var i=t.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:i,element:e(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,o=this.$results.scrollTop()+(i-n),r=i-n;o-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=i(t,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=o(r):e(n).append(r)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var n=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),this.$selection=n,n},i.prototype.bind=function(e,t){var i=this,o=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),window.setTimeout(function(){i.$selection.focus()},0),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(n){e(document.body).on("mousedown.select2."+n.id,function(n){var i=e(n.target).closest(".select2");e(".select2.select2-container--open").each(function(){e(this),this!=i[0]&&t.GetData(this,"element").select2("close")})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(e,t){var n=this;o.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()})},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.attr("title",t.title||t.text)}else this.clear()},o}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,o){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!r.options.get("disabled")){var i=e(this).parent(),o=n.GetData(i[0],"data");r.trigger("unselect",{originalEvent:t,data:o})}})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var o=e[i],r=this.selectionContainer(),a=this.display(o,r);r.append(a),r.attr("title",o.title||o.text),n.StoreData(r[0],"data",o),t.push(r)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){if(t.length>1||1==t.length&&t[0].id!=this.placeholder.id)return e.call(this,t);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(e,t,n){function i(){}return i.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},i.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();var o=n.GetData(i[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var a={data:o};if(this.trigger("clear",a),a.prevented)this.$element.val(r);else{for(var s=0;s<o.length;s++)if(this.trigger("unselect",a={data:o[s]}),a.prevented)return void this.$element.val(r);this.$element.trigger("change"),this.trigger("toggle",{})}}}},i.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var o=e('<span class="select2-selection__clear">&times;</span>');n.StoreData(o[0],"data",i),this.$selection.find(".select2-selection__rendered").prepend(o)}},i}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,i,o){var r=this;e.call(this,i,o),i.on("open",function(){r.$search.trigger("focus")}),i.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),i.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),i.on("disable",function(){r.$search.prop("disabled",!0)}),i.on("focus",function(e){r.$search.trigger("focus")}),i.on("results:focus",function(e){r.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===r.$search.val()){var i=r.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var o=t.GetData(i[0],"data");r.searchRemoveChoice(o),e.preventDefault()}}});var a=document.documentMode,s=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){r.$selection.off(s?"input.search input.searchcheck":"keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&r.handleSearch(e)}})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&(this.$element.find("[data-select2-tag]").length?this.$element.focus():this.$search.focus())},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e;e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,r)){var i=e.Event("select2:"+t,{params:n=n||{}});o.$element.trigger(i),-1!==e.inArray(t,a)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"}}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return(i+=e.generateChars(4))+(null!=n.id?"-"+n.id.toString():"-"+e.generateChars(4))},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),o=i.item(e);t.push(o)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current(function(i){var o=[];(e=[e]).push.apply(e,i);for(var r=0;r<e.length;r++){var a=e[r].id;-1===n.inArray(a,o)&&o.push(a)}t.$element.val(o),t.$element.trigger("change")}):(this.$element.val(e.id),this.$element.trigger("change"))},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,n(e.element).is("option"))return e.element.selected=!1,void this.$element.trigger("change");this.current(function(i){for(var o=[],r=0;r<i.length;r++){var a=i[r].id;a!==e.id&&-1===n.inArray(a,o)&&o.push(a)}t.$element.val(o),t.$element.trigger("change")})}},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){t.RemoveData(this)})},i.prototype.query=function(e,t){var i=[],o=this;this.$element.children().each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var r=o.item(t),a=o.matches(e,r);null!==a&&i.push(a)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var i;e.children?(i=document.createElement("optgroup")).label=e.text:void 0!==(i=document.createElement("option")).textContent?i.textContent=e.text:i.innerText=e.text,void 0!==e.id&&(i.value=e.id),e.disabled&&(i.disabled=!0),e.selected&&(i.selected=!0),e.title&&(i.title=e.title);var o=n(i),r=this._normalizeItem(e);return r.element=i,t.StoreData(i,"data",r),o},i.prototype.item=function(e){var i={};if(null!=(i=t.GetData(e[0],"data")))return i;if(e.is("option"))i={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){i={text:e.prop("label"),children:[],title:e.prop("title")};for(var o=e.children("option"),r=[],a=0;a<o.length;a++){var s=n(o[a]),g=this.item(s);r.push(g)}i.children=r}return(i=this._normalizeItem(i)).element=e[0],t.StoreData(e[0],"data",i),i},i.prototype._normalizeItem=function(e){return e!==Object(e)&&(e={id:e,text:e}),null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},{selected:!1,disabled:!1},e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){var i=this,o=this.$element.find("option"),r=o.map(function(){return i.item(n(this)).id}).get(),a=[];function s(e){return function(){return n(this).val()==e.id}}for(var g=0;g<e.length;g++){var l=this._normalizeItem(e[g]);if(n.inArray(l.id,r)>=0){var c=o.filter(s(l)),u=this.item(c),I=n.extend(!0,{},l,u),d=this.option(I);c.replaceWith(d)}else{var C=this.option(l);if(l.children){var h=this.convertToOptions(l.children);t.appendMany(C,h)}a.push(C)}}return a},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var o=n.ajax(e);return o.then(t),o.fail(i),o}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);function r(){var r=o.transport(o,function(o){var r=i.processResults(o,e);i.options.get("debug")&&window.console&&console.error&&(r&&r.results&&n.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(r)},function(){"status"in r&&(0===r.status||"0"===r.status)||i.trigger("results:message",{message:"errorLoading"})});i._request=r}"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var o=i.get("tags"),r=i.get("createTag");void 0!==r&&(this.createTag=r);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,n,i),e.isArray(o))for(var s=0;s<o.length;s++){var g=this._normalizeItem(o[s]),l=this.option(g);this.$element.append(l)}}return t.prototype.query=function(e,t,n){var i=this;this._removeOldTags(),e.call(this,t,null!=t.term&&null==t.page?function e(o,r){for(var a=o.results,s=0;s<a.length;s++){var g=a[s],l=null!=g.children&&!e({results:g.children},!0);if((g.text||"").toUpperCase()===(t.term||"").toUpperCase()||l)return!r&&(o.data=a,void n(o))}if(r)return!0;var c=i.createTag(t);if(null!=c){var u=i.option(c);u.attr("data-select2-tag",!0),i.addOptions([u]),i.insertTag(a,c)}o.results=a,n(o)}:n)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){var o=this;n.term=n.term||"";var r=this.tokenizer(n,this.options,function(t){var n=o._normalizeItem(t);if(!o.$element.find("option").filter(function(){return e(this).val()===n.id}).length){var i=o.option(n);i.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([i])}o.trigger("select",{data:n})});r.term!==n.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),n.term=r.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,o){for(var r=i.get("tokenSeparators")||[],a=n.term,s=0,g=this.createTag||function(e){return{id:e.term,text:e.term}};s<a.length;)if(-1!==e.inArray(a[s],r)){var l=a.substr(0,s),c=g(e.extend({},n,{term:l}));null!=c?(o(c),a=a.substr(s+1)||"",s=0):s++}else s++;return{term:a}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(o){i.maximumSelectionLength>0&&(null!=o?o.length:0)>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var o=this;t.call(this,n,i),this.$search.on("keydown",function(e){o.trigger("keypress",e),o._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){o.handleSearch(e)}),n.on("open",function(){o.$search.attr("tabindex",0),o.$search.focus(),window.setTimeout(function(){o.$search.focus()},0)}),n.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val(""),o.$search.blur()}),n.on("focus",function(){n.isOpen()||o.$search.focus()}),n.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(o.showSearch(e)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--)this.placeholder.id===t[i].id&&n.splice(i,1);return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var o=this;t.call(this,n,i),n.on("query",function(e){o.lastParams=e,o.loading=!0}),n.on("query:append",function(e){o.lastParams=e,o.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,o.$loadingMore[0]);!o.loading&&t&&o.$results.offset().top+o.$results.outerHeight(!1)+50>=o.$loadingMore.offset().top+o.$loadingMore.outerHeight(!1)&&o.loadMore()})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,o=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),o||(o=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var o=this,r="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id,g=this.$container.parents().filter(t.hasScroll);g.each(function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),g.on(r,function(n){var i=t.GetData(this,"select2-scroll-position");e(this).scrollTop(i.y)}),e(window).on(r+" "+a+" "+s,function(e){o._positionDropdown(),o._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,r="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(o),e(window).off(o+" "+r+" "+a)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s=this.$dropdown.outerHeight(!1),g=t.scrollTop(),l=t.scrollTop()+t.height(),c=g<r.top-s,u=l>r.bottom+s,I={left:r.left,top:a.bottom},d=this.$dropdownParent;"static"===d.css("position")&&(d=d.offsetParent());var C=d.offset();I.top-=C.top,I.left-=C.left,n||i||(o="below"),u||!c||n?!c&&u&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(I.top=a.top-C.top-s),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(I)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var o=t[i];o.children?n+=e(o.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),t.define("select2/dropdown/selectOnClose",["../utils"],function(e){function t(){}return t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},t.prototype._handleSelectOnClose=function(t,n){if(n&&null!=n.originalSelect2Event){var i=n.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var r=e.GetData(o[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},t}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B,v,y,x,F,G,Q,w){function S(){this.reset()}return S.prototype.apply=function(u){if(null==(u=e.extend(!0,{},this.defaults,u)).dataAdapter){if(u.dataAdapter=null!=u.ajax?C:null!=u.data?d:I,u.minimumInputLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,f)),u.maximumInputLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,m)),u.maximumSelectionLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,p)),u.tags&&(u.dataAdapter=l.Decorate(u.dataAdapter,h)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=l.Decorate(u.dataAdapter,A)),null!=u.query){var w=t(u.amdBase+"compat/query");u.dataAdapter=l.Decorate(u.dataAdapter,w)}if(null!=u.initSelection){var S=t(u.amdBase+"compat/initSelection");u.dataAdapter=l.Decorate(u.dataAdapter,S)}}if(null==u.resultsAdapter&&(u.resultsAdapter=n,null!=u.ajax&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,y)),null!=u.placeholder&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,v)),u.selectOnClose&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,G))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=b;else{var X=l.Decorate(b,B);u.dropdownAdapter=X}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,F)),u.closeOnSelect&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,Q)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var Z=t(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=l.Decorate(u.dropdownAdapter,Z)}u.dropdownAdapter=l.Decorate(u.dropdownAdapter,x)}if(null==u.selectionAdapter){if(u.selectionAdapter=u.multiple?o:i,null!=u.placeholder&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,r)),u.allowClear&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,a)),u.multiple&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,s)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var N=t(u.amdBase+"compat/containerCss");u.selectionAdapter=l.Decorate(u.selectionAdapter,N)}u.selectionAdapter=l.Decorate(u.selectionAdapter,g)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var k=u.language.split("-");u.language=[u.language,k[0]]}else u.language=[u.language];if(e.isArray(u.language)){var R=new c;u.language.push("en");for(var D=u.language,U=0;U<D.length;U++){var T=D[U],W={};try{W=c.loadPath(T)}catch(O){try{W=c.loadPath(T=this.defaults.amdLanguageBase+T)}catch(L){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+T+'" could not be automatically loaded. A fallback will be used instead.');continue}}R.extend(W)}u.translations=R}else{var E=c.loadPath(this.defaults.amdLanguageBase+"en"),H=new c(u.language);H.extend(E),u.translations=H}return u},S.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return u[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:l.escapeMarkup,language:w,matcher:function n(i,o){if(""===e.trim(i.term))return o;if(o.children&&o.children.length>0){for(var r=e.extend(!0,{},o),a=o.children.length-1;a>=0;a--)null==n(i,o.children[a])&&r.children.splice(a,1);return r.children.length>0?r:n(i,r)}var s=t(o.text).toUpperCase(),g=t(i.term).toUpperCase();return s.indexOf(g)>-1?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},S.prototype.set=function(t,n){var i={};i[e.camelCase(t)]=n;var o=l._convertData(i);e.extend(!0,this.defaults,o)},new S}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function o(t,o){if(this.options=t,null!=o&&this.fromElement(o),this.options=n.apply(this.options),o&&o.is("input")){var r=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(e){var n,o=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=e.prop("dir")?e.prop("dir"):e.closest("[dir]").prop("dir")?e.closest("[dir]").prop("dir"):"ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),i.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(e[0],"data",i.GetData(e[0],"select2Tags")),i.StoreData(e[0],"tags",!0)),i.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",i.GetData(e[0],"ajaxUrl")),i.StoreData(e[0],"ajax-Url",i.GetData(e[0],"ajaxUrl"))),n=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,i.GetData(e[0])):i.GetData(e[0]);var r=t.extend(!0,{},n);for(var a in r=i._convertData(r))t.inArray(a,o)>-1||(t.isPlainObject(this.options[a])?t.extend(this.options[a],r[a]):this.options[a]=r[a]);return this},o.prototype.get=function(e){return this.options[e]},o.prototype.set=function(e,t){this.options[e]=t},o}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var o=function(e,i){null!=n.GetData(e[0],"select2")&&n.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new t(i=i||{},e),o.__super__.constructor.call(this);var r=e.attr("tabindex")||0;n.StoreData(e[0],"old-tabindex",r),e.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(e,this.options);var s=this.render();this._placeContainer(s);var g=this.options.get("selectionAdapter");this.selection=new g(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var c=this.options.get("resultsAdapter");this.results=new c(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(e[0],"select2",this),e.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var o=e.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==t){var r=e.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,g=a.length;s<g;s+=1){var l=a[s].replace(/\s/g,"").match(n);if(null!==l&&l.length>=1)return l[1]}return null}return t},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},o.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},o.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,o){-1===e.inArray(i,n)&&t.trigger(i,o)})},o.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},o.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},o.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var o=0;o<t.addedNodes.length;o++)t.addedNodes[o].selected&&(n=!0);else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in i){var r={prevented:!1,name:e,args:t};if(n.call(this,i[e],r),r.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.trigger("query",{})},o.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]),this.$element.prop("disabled",!e[0])},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},o.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),n.StoreData(t[0],"element",this.$element),t},o}),t.define("select2/compat/utils",["jquery"],function(e){return{syncCssClasses:function(t,n,i){var o,r,a=[];(o=e.trim(t.attr("class")))&&e((o=""+o).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&a.push(this)}),(o=e.trim(n.attr("class")))&&e((o=""+o).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(r=i(this))&&a.push(r)}),t.attr("class",a.join(" "))}}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),r=this.options.get("containerCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptContainerCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=a;a=function(e){var t=s(e);return null!=t?t+" "+e:e}}var g=this.options.get("containerCss")||{};return e.isFunction(g)&&(g=g(this.$element)),t.syncCssClasses(o,this.$element,a),o.css(g),o.addClass(r),o},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(e,t){function n(e){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),r=this.options.get("dropdownCssClass")||"";e.isFunction(r)&&(r=r(this.$element));var a=this.options.get("adaptDropdownCssClass");if(a=a||n,-1!==r.indexOf(":all:")){r=r.replace(":all:","");var s=a;a=function(e){var t=s(e);return null!=t?t+" "+e:e}}var g=this.options.get("dropdownCss")||{};return e.isFunction(g)&&(g=g(this.$element)),t.syncCssClasses(o,this.$element,a),o.css(g),o.addClass(r),o},i}),t.define("select2/compat/initSelection",["jquery"],function(e){function t(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return t.prototype.current=function(t,n){var i=this;this._isInitialized?t.call(this,n):this.initSelection.call(null,this.$element,function(t){i._isInitialized=!0,e.isArray(t)||(t=[t]),n(t)})},t}),t.define("select2/compat/inputData",["jquery","../utils"],function(e,t){function n(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,n)}return n.prototype.current=function(t,n){function i(t,n){var o=[];return t.selected||-1!==e.inArray(t.id,n)?(t.selected=!0,o.push(t)):t.selected=!1,t.children&&o.push.apply(o,i(t.children,n)),o}for(var o=[],r=0;r<this._currentData.length;r++)o.push.apply(o,i(this._currentData[r],this.$element.val().split(this._valueSeparator)));n(o)},n.prototype.select=function(t,n){if(this.options.get("multiple")){var i=this.$element.val();this.$element.val(i+=this._valueSeparator+n.id),this.$element.trigger("change")}else this.current(function(t){e.map(t,function(e){e.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},n.prototype.unselect=function(e,t){var n=this;t.selected=!1,this.current(function(e){for(var i=[],o=0;o<e.length;o++){var r=e[o];t.id!=r.id&&i.push(r.id)}n.$element.val(i.join(n._valueSeparator)),n.$element.trigger("change")})},n.prototype.query=function(e,t,n){for(var i=[],o=0;o<this._currentData.length;o++){var r=this.matches(t,this._currentData[o]);null!==r&&i.push(r)}n({results:i})},n.prototype.addOptions=function(n,i){var o=e.map(i,function(e){return t.GetData(e[0],"data")});this._currentData.push.apply(this._currentData,o)},n}),t.define("select2/compat/matcher",["jquery"],function(e){return function(t){return function(n,i){var o=e.extend(!0,{},i);if(null==n.term||""===e.trim(n.term))return o;if(i.children){for(var r=i.children.length-1;r>=0;r--){var a=i.children[r];t(n.term,a.text,a)||o.children.splice(r,1)}if(o.children.length>0)return o}return t(n.term,i.text,i)?o:null}}}),t.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n,this.options.get("query").call(null,t)},e}),t.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),t.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),t.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),r=function(e){var t,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(e.event.fixHooks)for(var a=i.length;a;)e.event.fixHooks[i[--a]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],g,!1);else this.onmousewheel=g;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],g,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function g(i){var o,a=i||window.event,g=r.call(arguments,1),u=0,I=0,d=0,C=0,h=0;if((i=e.event.fix(a)).type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(I=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(I=-1*d,d=0),u=0===d?I:d,"deltaY"in a&&(u=d=-1*a.deltaY),"deltaX"in a&&(I=a.deltaX,0===d&&(u=-1*I)),0!==d||0!==I){if(1===a.deltaMode){var A=e.data(this,"mousewheel-line-height");u*=A,d*=A,I*=A}else if(2===a.deltaMode){var f=e.data(this,"mousewheel-page-height");u*=f,d*=f,I*=f}if(o=Math.max(Math.abs(d),Math.abs(I)),(!n||o<n)&&(n=o,c(a,o)&&(n/=40)),c(a,o)&&(u/=40,I/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/n),I=Math[I>=1?"floor":"ceil"](I/n),d=Math[d>=1?"floor":"ceil"](d/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var m=this.getBoundingClientRect();C=i.clientX-m.left,h=i.clientY-m.top}return i.deltaX=I,i.deltaY=d,i.deltaFactor=n,i.offsetX=C,i.offsetY=h,i.deltaMode=0,g.unshift(i,u,I,d),t&&clearTimeout(t),t=setTimeout(l,200),(e.event.dispatch||e.event.handle).apply(this,g)}}function l(){n=null}function c(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof t.define&&t.define.amd?t.define("jquery-mousewheel",["jquery"],r):"object"==typeof exports?module.exports=r:r(e),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(e,t,n,i,o){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=e[t].apply(e,a)}),e.inArray(t,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(){function t(e,t,n,i){this.markup=e,this.children=t,this.options=n,this.callback=i}return t.prototype.render=function(t){var n=e(this.markup);if(this.options&&this.options.contents&&n.html(this.options.contents),this.options&&this.options.className&&n.addClass(this.options.className),this.options&&this.options.data&&e.each(this.options.data,function(e,t){n.attr("data-"+e,t)}),this.options&&this.options.click&&n.on("click",this.options.click),this.children){var i=n.find(".note-children-container");this.children.forEach(function(e){e.render(i.length?i:n)})}return this.callback&&this.callback(n,this.options),this.options&&this.options.callback&&this.options.callback(n),t&&t.append(n),n},t}(),n=function(n,i){return function(){var o="object"==typeof arguments[1]?arguments[1]:arguments[0],r=e.isArray(arguments[0])?arguments[0]:[];return o&&o.children&&(r=o.children),new t(n,r,o,i)}},i=function(){function e(e,t){if(this.$node=e,this.options=$.extend({},{title:"",target:t.container,trigger:"hover focus",placement:"bottom"},t),this.$tooltip=$(['<div class="note-tooltip in">','  <div class="note-tooltip-arrow"/>','  <div class="note-tooltip-content"/>',"</div>"].join("")),"manual"!==this.options.trigger){var n=this.show.bind(this),i=this.hide.bind(this),o=this.toggle.bind(this);this.options.trigger.split(" ").forEach(function(t){"hover"===t?(e.off("mouseenter mouseleave"),e.on("mouseenter",n).on("mouseleave",i)):"click"===t?e.on("click",o):"focus"===t&&e.on("focus",n).on("blur",i)})}}return e.prototype.show=function(){var e=this.$node,t=e.offset(),n=this.$tooltip,i=this.options.title||e.attr("title")||e.data("title"),o=this.options.placement||e.data("placement");n.addClass(o),n.addClass("in"),n.find(".note-tooltip-content").text(i),n.appendTo(this.options.target);var r=e.outerWidth(),a=e.outerHeight(),s=n.outerWidth(),g=n.outerHeight();"bottom"===o?n.css({top:t.top+a,left:t.left+(r/2-s/2)}):"top"===o?n.css({top:t.top-g,left:t.left+(r/2-s/2)}):"left"===o?n.css({top:t.top+(a/2-g/2),left:t.left-s}):"right"===o&&n.css({top:t.top+(a/2-g/2),left:t.left+r})},e.prototype.hide=function(){this.$tooltip.removeClass("in"),this.$tooltip.remove()},e.prototype.toggle=function(){this.$tooltip.hasClass("in")?this.hide():this.show()},e}(),o=function(){function e(e,t){this.$button=e,this.options=$.extend({},{target:t.container},t),this.setEvent()}return e.prototype.setEvent=function(){var e=this;this.$button.on("click",function(t){e.toggle(),t.stopImmediatePropagation()})},e.prototype.clear=function(){var e=$(".note-btn-group.open");e.find(".note-btn.active").removeClass("active"),e.removeClass("open")},e.prototype.show=function(){this.$button.addClass("active"),this.$button.parent().addClass("open");var e=this.$button.next(),t=e.offset(),n=e.outerWidth(),i=$(window).width(),o=parseFloat($(this.options.target).css("margin-right"));e.css("margin-left",t.left+n>i-o?i-o-(t.left+n):"")},e.prototype.hide=function(){this.$button.removeClass("active"),this.$button.parent().removeClass("open")},e.prototype.toggle=function(){var e=this.$button.parent().hasClass("open");this.clear(),e?this.hide():this.show()},e}();$(document).on("click",function(e){$(e.target).closest(".note-btn-group").length||$(".note-btn-group.open").removeClass("open")}),$(document).on("click.note-dropdown-menu",function(e){$(e.target).closest(".note-dropdown-menu").parent().removeClass("open")});var r=function(){function e(e,t){this.options=$.extend({},{target:t.container||"body"},t),this.$modal=e,this.$backdrop=$('<div class="note-modal-backdrop" />')}return e.prototype.show=function(){"body"===this.options.target?(this.$backdrop.css("position","fixed"),this.$modal.css("position","fixed")):(this.$backdrop.css("position","absolute"),this.$modal.css("position","absolute")),this.$backdrop.appendTo(this.options.target).show(),this.$modal.appendTo(this.options.target).addClass("open").show(),this.$modal.trigger("note.modal.show"),this.$modal.off("click",".close").on("click",".close",this.hide.bind(this))},e.prototype.hide=function(){this.$modal.removeClass("open").hide(),this.$backdrop.hide(),this.$modal.trigger("note.modal.hide")},e}(),a=n('<div class="note-editor note-frame"/>'),s=n('<div class="note-toolbar" role="toolbar"/>'),g=n('<div class="note-editing-area"/>'),l=n('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),c=n('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),u=n(['<output class="note-status-output" role="status" aria-live="polite"/>','<div class="note-statusbar" role="resize">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),I=n('<div class="note-editor"/>'),d=n(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" role="status" aria-live="polite"/>'].join("")),C=n('<div class="note-btn-group">'),h=n('<button type="button" class="note-btn" role="button" tabindex="-1">',function(e,t){t&&t.tooltip&&(e.attr({"aria-label":t.tooltip}),e.data("_lite_tooltip",new i(e,{title:t.tooltip,container:t.container}))),t.contents&&e.html(t.contents),t&&t.data&&"dropdown"===t.data.toggle&&e.data("_lite_dropdown",new o(e,{container:t.container}))}),A=n('<div class="note-dropdown-menu" role="list">',function(e,t){var n=$.isArray(t.items)?t.items.map(function(e){var n="string"==typeof e?e:e.value||"",i=t.template?t.template(e):e,o=$('<a class="note-dropdown-item" href="#" data-value="'+n+'" role="listitem" aria-label="'+e+'"></a>');return o.html(i).data("item",e),o}):t.items;e.html(n).attr({"aria-label":t.title}),e.on("click","> .note-dropdown-item",function(e){var n=$(this),i=n.data("item"),o=n.data("value");i.click?i.click(n):t.itemClick&&t.itemClick(e,i,o)})}),f=n('<div class="note-dropdown-menu note-check" role="list">',function(e,t){var n=$.isArray(t.items)?t.items.map(function(e){var n="string"==typeof e?e:e.value||"",i=t.template?t.template(e):e,o=$('<a class="note-dropdown-item" href="#" data-value="'+n+'" role="listitem" aria-label="'+e+'"></a>');return o.html([v(t.checkClassName)," ",i]).data("item",e),o}):t.items;e.html(n).attr({"aria-label":t.title}),e.on("click","> .note-dropdown-item",function(e){var n=$(this),i=n.data("item"),o=n.data("value");i.click?i.click(n):t.itemClick&&t.itemClick(e,i,o)})}),m=n('<div class="note-color-palette"/>',function(e,t){for(var n=[],o=0,r=t.colors.length;o<r;o++){for(var a=t.eventName,s=t.colors[o],g=t.colorsName[o],l=[],c=0,u=s.length;c<u;c++){var I=s[c],d=g[c];l.push(['<button type="button" class="note-btn note-color-btn"','style="background-color:',I,'" ','data-event="',a,'" ','data-value="',I,'" ','title="',d,'" ','aria-label="',d,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(n.join("")),e.find(".note-color-btn").each(function(){$(this).data("_lite_tooltip",new i($(this),{container:t.container}))})}),p=n('<div class="note-modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(e,t){t.fade&&e.addClass("fade"),e.attr({"aria-label":t.title}),e.html(['  <div class="note-modal-content">',t.title?'    <div class="note-modal-header">      <button type="button" class="close" aria-label="Close" aria-hidden="true"><i class="note-icon-close"></i></button>      <h4 class="note-modal-title">'+t.title+"</h4>    </div>":"",'    <div class="note-modal-body">'+t.body+"</div>",t.footer?'    <div class="note-modal-footer">'+t.footer+"</div>":"","  </div>"].join("")),e.data("modal",new r(e,t))}),b=n(['<div class="note-popover bottom">','  <div class="note-popover-arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){e.addClass(void 0!==t.direction?t.direction:"bottom").hide(),t.hideArrow&&e.find(".note-popover-arrow").hide()}),B=n('<div class="checkbox"></div>',function(e,t){e.html(["<label"+(t.id?' for="'+t.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(t.id?' id="'+t.id+'"':""),t.checked?" checked":"",' aria-checked="'+(t.checked?"true":"false")+'"/>',t.text?t.text:"","</label>"].join(""))}),v=function(e,t){return"<"+(t=t||"i")+' class="'+e+'"/>'},y={editor:a,toolbar:s,editingArea:g,codable:l,editable:c,statusbar:u,airEditor:I,airEditable:d,buttonGroup:C,button:h,dropdown:A,dropdownCheck:f,dropdownButton:function(e,t){return C([h({className:"dropdown-toggle",contents:e.title+" "+v("note-icon-caret"),tooltip:e.tooltip,data:{toggle:"dropdown"}}),A({className:e.className,items:e.items,template:e.template,itemClick:e.itemClick})],{callback:t}).render()},dropdownButtonContents:function(e,t){return e+" "+v(t.icons.caret,"span")},dropdownCheckButton:function(e,t){return C([h({className:"dropdown-toggle",contents:e.title+" "+v("note-icon-caret"),tooltip:e.tooltip,data:{toggle:"dropdown"}}),f({className:e.className,checkClassName:e.checkClassName,items:e.items,template:e.template,itemClick:e.itemClick})],{callback:t}).render()},paragraphDropdownButton:function(e){return C([h({className:"dropdown-toggle",contents:e.title+" "+v("note-icon-caret"),tooltip:e.tooltip,data:{toggle:"dropdown"}}),A([C({className:"note-align",children:e.items[0]}),C({className:"note-list",children:e.items[1]})])]).render()},tableDropdownButton:function(e){return C([h({className:"dropdown-toggle",contents:e.title+" "+v("note-icon-caret"),tooltip:e.tooltip,data:{toggle:"dropdown"}}),A({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){t.find(".note-dimension-picker-mousecatcher").css({width:e.col+"em",height:e.row+"em"}).mousedown(e.itemClick).mousemove(function(t){!function(e,t,n){var i,o=$(e.target.parentNode),r=o.next(),a=o.find(".note-dimension-picker-mousecatcher"),s=o.find(".note-dimension-picker-highlighted"),g=o.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var l=$(e.target).offset();i={x:e.pageX-l.left,y:e.pageY-l.top}}else i={x:e.offsetX,y:e.offsetY};var c=Math.ceil(i.x/18)||1,u=Math.ceil(i.y/18)||1;s.css({width:c+"em",height:u+"em"}),a.data("value",c+"x"+u),c>3&&c<t&&g.css({width:c+1+"em"}),u>3&&u<n&&g.css({height:u+1+"em"}),r.html(c+" x "+u)}(t,e.col,e.row)})}}).render()},colorDropdownButton:function(e,t){return C({className:"note-color",children:[h({className:"note-current-color-button",contents:e.title,tooltip:e.lang.color.recent,click:e.currentClick,callback:function(e){var n=e.find(".note-recent-color");"foreColor"!==t&&(n.css("background-color","#FFFF00"),e.attr("data-backColor","#FFFF00"))}}),h({className:"dropdown-toggle",contents:v("note-icon-caret"),tooltip:e.lang.color.more,data:{toggle:"dropdown"}}),A({items:["<div>",'<div class="note-btn-group btn-background-color">','  <div class="note-palette-title">'+e.lang.color.background+"</div>","  <div>",'<button type="button" class="note-color-reset note-btn note-btn-block"  data-event="backColor" data-value="inherit">',e.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>','  <div class="btn-sm">','    <input type="color" id="html5bcp" class="note-btn btn-default" value="#21104A" style="width:100%;" data-value="cp">','    <button type="button" class="note-color-reset btn" data-event="backColor" data-value="cpbackColor">',e.lang.color.cpSelect,"    </button>","  </div>","</div>",'<div class="note-btn-group btn-foreground-color">','  <div class="note-palette-title">'+e.lang.color.foreground+"</div>","  <div>",'<button type="button" class="note-color-reset note-btn note-btn-block"  data-event="removeFormat" data-value="foreColor">',e.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>','  <div class="btn-sm">','    <input type="color" id="html5fcp" class="note-btn btn-default" value="#21104A" style="width:100%;" data-value="cp">','    <button type="button" class="note-color-reset btn" data-event="foreColor" data-value="cpforeColor">',e.lang.color.cpSelect,"    </button>","  </div>","</div>","</div>"].join(""),callback:function(n){n.find(".note-holder").each(function(){var t=$(this);t.append(m({colors:e.colors,eventName:t.data("event")}).render())}),"fore"===t?(n.find(".btn-background-color").hide(),n.css({"min-width":"210px"})):"back"===t&&(n.find(".btn-foreground-color").hide(),n.css({"min-width":"210px"}))},click:function(n){var i=$(n.target),o=i.data("event"),r=i.data("value"),a=document.getElementById("html5fcp").value,s=document.getElementById("html5bcp").value;if("cp"===r?n.stopPropagation():"cpbackColor"===r?r=s:"cpforeColor"===r&&(r=a),o&&r){var g="backColor"===o?"background-color":"color",l=i.closest(".note-color").find(".note-recent-color"),c=i.closest(".note-color").find(".note-current-color-button");l.css(g,r),c.attr("data-"+o,r),e.itemClick("fore"===t?"foreColor":"back"===t?"backColor":o,r)}}})]}).render()},palette:m,dialog:p,videoDialog:function(e){var t='<div class="note-form-group"><label class="note-form-label">'+e.lang.video.url+' <small class="text-muted">'+e.lang.video.providers+'</small></label><input class="note-video-url note-input" type="text" /></div>',n=['<button type="button" href="#" class="note-btn note-btn-primary note-video-btn disabled" disabled>',e.lang.video.insert,"</button>"].join("");return p({title:e.lang.video.insert,fade:e.fade,body:t,footer:n}).render()},imageDialog:function(e){var t='<div class="note-form-group note-group-select-from-files"><label class="note-form-label">'+e.lang.image.selectFromFiles+'</label><input class="note-note-image-input note-input" type="file" name="files" accept="image/*" multiple="multiple" />'+e.imageLimitation+'</div><div class="note-form-group" style="overflow:auto;"><label class="note-form-label">'+e.lang.image.url+'</label><input class="note-image-url note-input" type="text" /></div>',n=['<button href="#" type="button" class="note-btn note-btn-primary note-btn-large note-image-btn disabled" disabled>',e.lang.image.insert,"</button>"].join("");return p({title:e.lang.image.insert,fade:e.fade,body:t,footer:n}).render()},linkDialog:function(e){var t='<div class="note-form-group"><label class="note-form-label">'+e.lang.link.textToDisplay+'</label><input class="note-link-text note-input" type="text" /></div><div class="note-form-group"><label class="note-form-label">'+e.lang.link.url+'</label><input class="note-link-url note-input" type="text" value="http://" /></div>'+(e.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+e.lang.link.openInNewWindow+"</label></div>"),n=['<button href="#" type="button" class="note-btn note-btn-primary note-link-btn disabled" disabled>',e.lang.link.insert,"</button>"].join("");return p({className:"link-dialog",title:e.lang.link.insert,fade:e.fade,body:t,footer:n}).render()},popover:b,checkbox:B,icon:v,toggleBtn:function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},check:function(e,t){e.find(".checked").removeClass("checked"),e.find('[data-value="'+t+'"]').addClass("checked")},onDialogShown:function(e,t){e.one("note.modal.show",t)},onDialogHidden:function(e,t){e.one("note.modal.hide",t)},showDialog:function(e){e.data("modal").show()},hideDialog:function(e){e.data("modal").hide()},getPopoverContent:function(e){return e.find(".note-popover-content")},getDialogBody:function(e){return e.find(".note-modal-body")},createLayout:function(e,t){var n=(t.airMode?y.airEditor([y.editingArea([y.airEditable()])]):y.editor([y.toolbar(),y.editingArea([y.codable(),y.editable()]),y.statusbar()])).render();return n.insertAfter(e),{note:e,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html()),t.editor.remove(),e.off("summernote"),e.show()}};e.summernote=e.summernote||{lang:{}},e.extend(e.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var x,F="function"==typeof define&&define.amd,G=navigator.userAgent,Q=/MSIE|Trident/i.test(G);if(Q){var w=/MSIE (\d+[.]\d+)/.exec(G);w&&(x=parseFloat(w[1])),(w=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(G))&&(x=parseFloat(w[1]))}var S=/Edge\/\d+/.test(G),X=!!window.CodeMirror;if(!X&&F)if("function"==typeof __webpack_require__)try{require.resolve("codemirror"),X=!0}catch(ht){}else if("undefined"!=typeof require)if(void 0!==require.resolve)try{require.resolve("codemirror"),X=!0}catch(ht){}else void 0!==require.specified&&(X=require.specified("codemirror"));var Z="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,N=Q||S?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",k={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:Q,isEdge:S,isFF:!S&&/firefox/i.test(G),isPhantom:/PhantomJS/i.test(G),isWebkit:!S&&/webkit/i.test(G),isChrome:!S&&/chrome/i.test(G),isSafari:!S&&/safari/i.test(G),browserVersion:x,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:F,isSupportTouch:Z,hasCodeMirror:X,isFontInstalled:function(t){var n="Comic Sans MS"===t?"Courier New":"Comic Sans MS",i=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),o=i.css("fontFamily",n).width(),r=i.css("fontFamily",t+","+n).width();return i.remove(),o!==r},isW3CRangeSupport:!!document.createRange,inputEventName:N},R=0,D={eq:function(e){return function(t){return e===t}},eq2:function(e,t){return e===t},peq2:function(e){return function(t,n){return t[e]===n[e]}},ok:function(){return!0},fail:function(){return!1},self:function(e){return e},not:function(e){return function(){return!e.apply(e,arguments)}},and:function(e,t){return function(n){return e(n)&&t(n)}},invoke:function(e,t){return function(){return e[t].apply(e,arguments)}},uniqueId:function(e){var t=++R+"";return e?e+t:t},rect2bnd:function(e){var t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},invertObject:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},namespaceToCamel:function(e,t){return(t=t||"")+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")},debounce:function(e,t,n){var i;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(o,r)},t),a&&e.apply(o,r)}}};function U(e){return e[0]}function T(e){return e[e.length-1]}function W(e){return e.slice(1)}function E(t,n){return e.inArray(n,t)}function H(e,t){return-1!==E(e,t)}var O={head:U,last:T,initial:function(e){return e.slice(0,e.length-1)},tail:W,prev:function(e,t){var n=E(e,t);return-1===n?null:e[n-1]},next:function(e,t){var n=E(e,t);return-1===n?null:e[n+1]},find:function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o))return o}},contains:H,all:function(e,t){for(var n=0,i=e.length;n<i;n++)if(!t(e[n]))return!1;return!0},sum:function(e,t){return t=t||D.self,e.reduce(function(e,n){return e+t(n)},0)},from:function(e){for(var t=[],n=e.length,i=-1;++i<n;)t[i]=e[i];return t},isEmpty:function(e){return!e||!e.length},clusterBy:function(e,t){return e.length?W(e).reduce(function(e,n){var i=T(e);return t(T(i),n)?i[i.length]=n:e[e.length]=[n],e},[[U(e)]]):[]},compact:function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]&&t.push(e[n]);return t},unique:function(e){for(var t=[],n=0,i=e.length;n<i;n++)H(t,e[n])||t.push(e[n]);return t}},L={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},V={isEdit:function(e){return O.contains([L.BACKSPACE,L.TAB,L.ENTER,L.SPACE,L.DELETE],e)},isMove:function(e){return O.contains([L.LEFT,L.UP,L.RIGHT,L.DOWN],e)},nameFromCode:D.invertObject(L),code:L},Y=String.fromCharCode(160);function M(t){return t&&e(t).hasClass("note-editable")}function _(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}}function K(e){return e&&3===e.nodeType}function z(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^VIDEO|^EMBED/.test(e.nodeName.toUpperCase())}function J(e){return!M(e)&&e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())}var P=_("PRE"),j=_("LI"),q=_("TABLE"),ee=_("DATA");function te(e){return!(ae(e)||ne(e)||ie(e)||J(e)||q(e)||re(e)||ee(e))}function ne(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())}var ie=_("HR");function oe(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())}var re=_("BLOCKQUOTE");function ae(e){return oe(e)||re(e)||M(e)}var se=_("A"),ge=_("BODY"),le=k.isMSIE&&k.browserVersion<11?"&nbsp;":"<br>";function ce(e){return K(e)?e.nodeValue.length:e?e.childNodes.length:0}function ue(e){var t=ce(e);return 0===t||!K(e)&&1===t&&e.innerHTML===le||!(!O.all(e.childNodes,K)||""!==e.innerHTML)}function Ie(e){z(e)||ce(e)||(e.innerHTML=le)}function de(e,t){for(;e;){if(t(e))return e;if(M(e))break;e=e.parentNode}return null}function Ce(e,t){t=t||D.fail;var n=[];return de(e,function(e){return M(e)||n.push(e),t(e)}),n}function he(e,t){t=t||D.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.nextSibling;return n}function Ae(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function fe(t,n){return e.each(n,function(e,n){t.appendChild(n)}),t}function me(e){return 0===e.offset}function pe(e){return e.offset===ce(e.node)}function be(e){return me(e)||pe(e)}function Be(e,t){for(;e&&e!==t;){if(0!==ye(e))return!1;e=e.parentNode}return!0}function ve(e,t){if(!t)return!1;for(;e&&e!==t;){if(ye(e)!==ce(e.parentNode)-1)return!1;e=e.parentNode}return!0}function ye(e){for(var t=0;e=e.previousSibling;)t+=1;return t}function xe(e){return!!(e&&e.childNodes&&e.childNodes.length)}function Fe(e,t){var n,i;if(0===e.offset){if(M(e.node))return null;n=e.node.parentNode,i=ye(e.node)}else xe(e.node)?i=ce(n=e.node.childNodes[e.offset-1]):(n=e.node,i=t?0:e.offset-1);return{node:n,offset:i}}function Ge(e,t){var n,i;if(ce(e.node)===e.offset){if(M(e.node))return null;n=e.node.parentNode,i=ye(e.node)+1}else xe(e.node)?(n=e.node.childNodes[e.offset],i=0):(n=e.node,i=t?ce(e.node):e.offset+1);return{node:n,offset:i}}function Qe(e,t){return e.node===t.node&&e.offset===t.offset}function we(e,t){var n=t&&t.isSkipPaddingBlankHTML,i=t&&t.isNotSplitEdgePoint,o=t&&t.isDiscardEmptySplits;if(o&&(n=!0),be(e)&&(K(e.node)||i)){if(me(e))return e.node;if(pe(e))return e.node.nextSibling}if(K(e.node))return e.node.splitText(e.offset);var r=e.node.childNodes[e.offset],a=Ae(e.node.cloneNode(!1),e.node);return fe(a,he(r)),n||(Ie(e.node),Ie(a)),o&&(ue(e.node)&&Ze(e.node),ue(a))?(Ze(a),e.node.nextSibling):a}function Se(e,t,n){var i=Ce(t.node,D.eq(e));return i.length?1===i.length?we(t,n):i.reduce(function(e,i){return e===t.node&&(e=we(t,n)),we({node:i,offset:e?ye(e):ce(i)},n)}):null}function Xe(e){return document.createElement(e)}function Ze(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){for(var i=[],o=0,r=e.childNodes.length;o<r;o++)i.push(e.childNodes[o]);for(o=0,r=i.length;o<r;o++)n.insertBefore(i[o],e)}n.removeChild(e)}}var Ne=_("TEXTAREA");function ke(e,t){var n=Ne(e[0])?e.val():e.html();return t?n.replace(/[\n\r]/g,""):n}var Re={NBSP_CHAR:Y,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:le,emptyPara:"<p>"+le+"</p>",makePredByNodeName:_,isEditable:M,isControlSizing:function(t){return t&&e(t).hasClass("note-control-sizing")},isText:K,isElement:function(e){return e&&1===e.nodeType},isVoid:z,isPara:J,isPurePara:function(e){return J(e)&&!j(e)},isHeading:function(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())},isInline:te,isBlock:D.not(te),isBodyInline:function(e){return te(e)&&!de(e,J)},isBody:ge,isParaInline:function(e){return te(e)&&!!de(e,J)},isPre:P,isList:ne,isTable:q,isData:ee,isCell:oe,isBlockquote:re,isBodyContainer:ae,isAnchor:se,isDiv:_("DIV"),isLi:j,isBR:_("BR"),isSpan:_("SPAN"),isB:_("B"),isU:_("U"),isS:_("S"),isI:_("I"),isImg:_("IMG"),isTextarea:Ne,isEmpty:ue,isEmptyAnchor:D.and(se,ue),isClosestSibling:function(e,t){return e.nextSibling===t||e.previousSibling===t},withClosestSiblings:function(e,t){t=t||D.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n},nodeLength:ce,isLeftEdgePoint:me,isRightEdgePoint:pe,isEdgePoint:be,isLeftEdgeOf:Be,isRightEdgeOf:ve,isLeftEdgePointOf:function(e,t){return me(e)&&Be(e.node,t)},isRightEdgePointOf:function(e,t){return pe(e)&&ve(e.node,t)},prevPoint:Fe,nextPoint:Ge,isSamePoint:Qe,isVisiblePoint:function(e){if(K(e.node)||!xe(e.node)||ue(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return!(t&&!z(t)||n&&!z(n))},prevPointUntil:function(e,t){for(;e;){if(t(e))return e;e=Fe(e)}return null},nextPointUntil:function(e,t){for(;e;){if(t(e))return e;e=Ge(e)}return null},isCharPoint:function(e){if(!K(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&" "!==t&&t!==Y},walkPoint:function(e,t,n,i){for(var o=e;o&&(n(o),!Qe(o,t));)o=Ge(o,i&&e.node!==o.node&&t.node!==o.node)},ancestor:de,singleChildAncestor:function(e,t){for(e=e.parentNode;e&&1===ce(e);){if(t(e))return e;if(M(e))break;e=e.parentNode}return null},listAncestor:Ce,lastAncestor:function(e,t){var n=Ce(e);return O.last(n.filter(t))},listNext:he,listPrev:function(e,t){t=t||D.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.previousSibling;return n},listDescendant:function(e,t){var n=[];return t=t||D.ok,function i(o){e!==o&&t(o)&&n.push(o);for(var r=0,a=o.childNodes.length;r<a;r++)i(o.childNodes[r])}(e),n},commonAncestor:function(t,n){for(var i=Ce(t),o=n;o;o=o.parentNode)if(e.inArray(o,i)>-1)return o;return null},wrap:function(t,n){var i=t.parentNode,o=e("<"+n+">")[0];return i.insertBefore(o,t),o.appendChild(t),o},insertAfter:Ae,appendChildNodes:fe,position:ye,hasChildren:xe,makeOffsetPath:function(e,t){return Ce(t,D.eq(e)).map(ye).reverse()},fromOffsetPath:function(e,t){for(var n=e,i=0,o=t.length;i<o;i++)n=n.childNodes.length<=t[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[t[i]];return n},splitTree:Se,splitPoint:function(e,t){var n,i,o=t?J:ae,r=Ce(e.node,o),a=O.last(r)||e.node;o(a)?(n=r[r.length-2],i=a):i=(n=a).parentNode;var s=n&&Se(n,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return s||i!==e.node||(s=e.node.childNodes[e.offset]),{rightNode:s,container:i}},create:Xe,createText:function(e){return document.createTextNode(e)},remove:Ze,removeWhile:function(e,t){for(;e&&!M(e)&&t(e);){var n=e.parentNode;Ze(e),e=n}},replace:function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=Xe(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),fe(n,O.from(e.childNodes)),Ae(n,e),Ze(e),n},html:function(t,n){var i=ke(t);return n&&(i=i.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(e,t,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(i||o?"\n":"")}),i=e.trim(i)),i},value:ke,posFromPlaceholder:function(t){var n=e(t),i=n.offset(),o=n.outerHeight(!0);return{left:i.left,top:i.top+o}},attachEvents:function(e,t){Object.keys(t).forEach(function(n){e.on(n,t[n])})},detachEvents:function(e,t){Object.keys(t).forEach(function(n){e.off(n,t[n])})},isCustomStyleTag:function(e){return e&&!K(e)&&O.contains(e.classList,"note-styletag")}};function De(e,t){var n,i,o=e.parentElement(),r=document.body.createTextRange(),a=O.from(o.childNodes);for(n=0;n<a.length;n++)if(!Re.isText(a[n])){if(r.moveToElementText(a[n]),r.compareEndPoints("StartToStart",e)>=0)break;i=a[n]}if(0!==n&&Re.isText(a[n-1])){var s=document.body.createTextRange(),g=null;s.moveToElementText(i||o),s.collapse(!i),g=i?i.nextSibling:o.firstChild;var l=e.duplicate();l.setEndPoint("StartToStart",s);for(var c=l.text.replace(/[\r\n]/g,"").length;c>g.nodeValue.length&&g.nextSibling;)c-=g.nodeValue.length,g=g.nextSibling;t&&g.nextSibling&&Re.isText(g.nextSibling)&&c===g.nodeValue.length&&(c-=g.nodeValue.length,g=g.nextSibling),o=g,n=c}return{cont:o,offset:n}}function Ue(e){var t=function(e,n){var i,o;if(Re.isText(e)){var r=Re.listPrev(e,D.not(Re.isText)),a=O.last(r).previousSibling;i=a||e.parentNode,n+=O.sum(O.tail(r),Re.nodeLength),o=!a}else{if(Re.isText(i=e.childNodes[n]||e))return t(i,0);n=0,o=!1}return{node:i,collapseToStart:o,offset:n}},n=document.body.createTextRange(),i=t(e.node,e.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n}var Te=function(){function t(e,t,n,i){this.sc=e,this.so=t,this.ec=n,this.eo=i,this.isOnEditable=this.makeIsOn(Re.isEditable),this.isOnList=this.makeIsOn(Re.isList),this.isOnAnchor=this.makeIsOn(Re.isAnchor),this.isOnCell=this.makeIsOn(Re.isCell),this.isOnData=this.makeIsOn(Re.isData)}return t.prototype.nativeRange=function(){if(k.isW3CRangeSupport){var e=document.createRange();return e.setStart(this.sc,this.so),e.setEnd(this.ec,this.eo),e}var t=Ue({node:this.sc,offset:this.so});return t.setEndPoint("EndToEnd",Ue({node:this.ec,offset:this.eo})),t},t.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},t.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},t.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},t.prototype.select=function(){var e=this.nativeRange();if(k.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},t.prototype.scrollIntoView=function(t){var n=e(t).height();return t.scrollTop+n<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+n-this.sc.offsetTop)),this},t.prototype.normalize=function(){var e=function(e,t){if(Re.isVisiblePoint(e)&&!Re.isEdgePoint(e)||Re.isVisiblePoint(e)&&Re.isRightEdgePoint(e)&&!t||Re.isVisiblePoint(e)&&Re.isLeftEdgePoint(e)&&t||Re.isVisiblePoint(e)&&Re.isBlock(e.node)&&Re.isEmpty(e.node))return e;var n=Re.ancestor(e.node,Re.isBlock);if((Re.isLeftEdgePointOf(e,n)||Re.isVoid(Re.prevPoint(e).node))&&!t||(Re.isRightEdgePointOf(e,n)||Re.isVoid(Re.nextPoint(e).node))&&t){if(Re.isVisiblePoint(e))return e;t=!t}return(t?Re.nextPointUntil(Re.nextPoint(e),Re.isVisiblePoint):Re.prevPointUntil(Re.prevPoint(e),Re.isVisiblePoint))||e},n=e(this.getEndPoint(),!1),i=this.isCollapsed()?n:e(this.getStartPoint(),!0);return new t(i.node,i.offset,n.node,n.offset)},t.prototype.nodes=function(e,t){e=e||D.ok;var n=t&&t.includeAncestor,i=t&&t.fullyContains,o=this.getStartPoint(),r=this.getEndPoint(),a=[],s=[];return Re.walkPoint(o,r,function(t){var o;Re.isEditable(t.node)||(i?(Re.isLeftEdgePoint(t)&&s.push(t.node),Re.isRightEdgePoint(t)&&O.contains(s,t.node)&&(o=t.node)):o=n?Re.ancestor(t.node,e):t.node,o&&e(o)&&a.push(o))},!0),O.unique(a)},t.prototype.commonAncestor=function(){return Re.commonAncestor(this.sc,this.ec)},t.prototype.expand=function(e){var n=Re.ancestor(this.sc,e),i=Re.ancestor(this.ec,e);if(!n&&!i)return new t(this.sc,this.so,this.ec,this.eo);var o=this.getPoints();return n&&(o.sc=n,o.so=0),i&&(o.ec=i,o.eo=Re.nodeLength(i)),new t(o.sc,o.so,o.ec,o.eo)},t.prototype.collapse=function(e){return e?new t(this.sc,this.so,this.sc,this.so):new t(this.ec,this.eo,this.ec,this.eo)},t.prototype.splitText=function(){var e=this.sc===this.ec,n=this.getPoints();return Re.isText(this.ec)&&!Re.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),Re.isText(this.sc)&&!Re.isEdgePoint(this.getStartPoint())&&(n.sc=this.sc.splitText(this.so),n.so=0,e&&(n.ec=n.sc,n.eo=this.eo-this.so)),new t(n.sc,n.so,n.ec,n.eo)},t.prototype.deleteContents=function(){if(this.isCollapsed())return this;var n=this.splitText(),i=n.nodes(null,{fullyContains:!0}),o=Re.prevPointUntil(n.getStartPoint(),function(e){return!O.contains(i,e.node)}),r=[];return e.each(i,function(e,t){var n=t.parentNode;o.node!==n&&1===Re.nodeLength(n)&&r.push(n),Re.remove(t,!1)}),e.each(r,function(e,t){Re.remove(t,!1)}),new t(o.node,o.offset,o.node,o.offset).normalize()},t.prototype.makeIsOn=function(e){return function(){var t=Re.ancestor(this.sc,e);return!!t&&t===Re.ancestor(this.ec,e)}},t.prototype.isLeftEdgeOf=function(e){if(!Re.isLeftEdgePoint(this.getStartPoint()))return!1;var t=Re.ancestor(this.sc,e);return t&&Re.isLeftEdgeOf(this.sc,t)},t.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},t.prototype.wrapBodyInlineWithPara=function(){if(Re.isBodyContainer(this.sc)&&Re.isEmpty(this.sc))return this.sc.innerHTML=Re.emptyPara,new t(this.sc.firstChild,0,this.sc.firstChild,0);var e,n=this.normalize();if(Re.isParaInline(this.sc)||Re.isPara(this.sc))return n;if(Re.isInline(n.sc)){var i=Re.listAncestor(n.sc,D.not(Re.isInline));e=O.last(i),Re.isInline(e)||(e=i[i.length-2]||n.sc.childNodes[n.so])}else e=n.sc.childNodes[n.so>0?n.so-1:0];var o=Re.listPrev(e,Re.isParaInline).reverse();if((o=o.concat(Re.listNext(e.nextSibling,Re.isParaInline))).length){var r=Re.wrap(O.head(o),"p");Re.appendChildNodes(r,O.tail(o))}return this.normalize()},t.prototype.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=Re.splitPoint(t.getStartPoint(),Re.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},t.prototype.pasteHTML=function(t){var n=e("<div></div>").html(t)[0],i=O.from(n.childNodes),o=this.wrapBodyInlineWithPara().deleteContents();return o.so>0&&(i=i.reverse()),i=i.map(function(e){return o.insertNode(e)}),o.so>0&&(i=i.reverse()),i},t.prototype.toString=function(){var e=this.nativeRange();return k.isW3CRangeSupport?e.toString():e.text},t.prototype.getWordRange=function(e){var n=this.getEndPoint();if(!Re.isCharPoint(n))return this;var i=Re.prevPointUntil(n,function(e){return!Re.isCharPoint(e)});return e&&(n=Re.nextPointUntil(n,function(e){return!Re.isCharPoint(e)})),new t(i.node,i.offset,n.node,n.offset)},t.prototype.bookmark=function(e){return{s:{path:Re.makeOffsetPath(e,this.sc),offset:this.so},e:{path:Re.makeOffsetPath(e,this.ec),offset:this.eo}}},t.prototype.paraBookmark=function(e){return{s:{path:O.tail(Re.makeOffsetPath(O.head(e),this.sc)),offset:this.so},e:{path:O.tail(Re.makeOffsetPath(O.last(e),this.ec)),offset:this.eo}}},t.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},t}(),We={create:function(e,t,n,i){if(4===arguments.length)return new Te(e,t,n,i);if(2===arguments.length)return new Te(e,t,n=e,i=t);var o=this.createFromSelection();return o||1!==arguments.length?o:(o=this.createFromNode(arguments[0])).collapse(Re.emptyPara===arguments[0].innerHTML)},createFromSelection:function(){var e,t,n,i;if(k.isW3CRangeSupport){var o=document.getSelection();if(!o||0===o.rangeCount)return null;if(Re.isBody(o.anchorNode))return null;var r=o.getRangeAt(0);e=r.startContainer,t=r.startOffset,n=r.endContainer,i=r.endOffset}else{var a=document.selection.createRange(),s=a.duplicate();s.collapse(!1);var g=a;g.collapse(!0);var l=De(g,!0),c=De(s,!1);Re.isText(l.node)&&Re.isLeftEdgePoint(l)&&Re.isTextNode(c.node)&&Re.isRightEdgePoint(c)&&c.node.nextSibling===l.node&&(l=c),e=l.cont,t=l.offset,n=c.cont,i=c.offset}return new Te(e,t,n,i)},createFromNode:function(e){var t=e,n=0,i=e,o=Re.nodeLength(i);return Re.isVoid(t)&&(n=Re.listPrev(t).length-1,t=t.parentNode),Re.isBR(i)?(o=Re.listPrev(i).length-1,i=i.parentNode):Re.isVoid(i)&&(o=Re.listPrev(i).length,i=i.parentNode),this.create(t,n,i,o)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=Re.fromOffsetPath(e,t.s.path),i=t.s.offset,o=Re.fromOffsetPath(e,t.e.path);return new Te(n,i,o,t.e.offset)},createFromParaBookmark:function(e,t){var n=e.s.offset,i=e.e.offset,o=Re.fromOffsetPath(O.head(t),e.s.path),r=Re.fromOffsetPath(O.last(t),e.e.path);return new Te(o,n,r,i)}},Ee=function(){function e(e){this.stack=[],this.stackOffset=-1,this.$editable=e,this.editable=e[0]}return e.prototype.makeSnapshot=function(){var e=We.create(this.editable);return{contents:this.$editable.html(),bookmark:e?e.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},e.prototype.applySnapshot=function(e){null!==e.contents&&this.$editable.html(e.contents),null!==e.bookmark&&We.createFromBookmark(this.editable,e.bookmark).select()},e.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},e.prototype.commit=function(){this.stack=[],this.stackOffset=-1,this.recordUndo()},e.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},e.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},e.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},e.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},e}(),He=function(){function t(){}return t.prototype.jQueryCSS=function(t,n){if(k.jqueryVersion<1.9){var i={};return e.each(n,function(e,n){i[n]=t.css(n)}),i}return t.css(n)},t.prototype.fromNode=function(e){var t=this.jQueryCSS(e,["font-family","font-size","text-align","list-style-type","line-height"])||{};return t["font-size"]=parseInt(t["font-size"],10),t},t.prototype.stylePara=function(t,n){e.each(t.nodes(Re.isPara,{includeAncestor:!0}),function(t,i){e(i).css(n)})},t.prototype.styleNodes=function(t,n){t=t.splitText();var i=n&&n.nodeName||"SPAN",o=!(!n||!n.expandClosestSibling),r=!(!n||!n.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(Re.create(i))];var a=Re.makePredByNodeName(i),s=t.nodes(Re.isText,{fullyContains:!0}).map(function(e){return Re.singleChildAncestor(e,a)||Re.wrap(e,i)});if(o){if(r){var g=t.nodes();a=D.and(a,function(e){return O.contains(g,e)})}return s.map(function(t){var n=Re.withClosestSiblings(t,a),i=O.head(n),o=O.tail(n);return e.each(o,function(e,t){Re.appendChildNodes(i,t.childNodes),Re.remove(t)}),O.head(n)})}return s},t.prototype.current=function(t){var n=e(Re.isElement(t.sc)?t.sc:t.sc.parentNode),i=this.fromNode(n);try{i=e.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||i["font-family"]})}catch(ht){}if(t.isOnList()){var o=e.inArray(i["list-style-type"],["circle","disc","disc-leading-zero","square"])>-1;i["list-style"]=o?"unordered":"ordered"}else i["list-style"]="none";var r=Re.ancestor(t.sc,Re.isPara);if(r&&r.style["line-height"])i["line-height"]=r.style.lineHeight;else{var a=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=a.toFixed(1)}return i.anchor=t.isOnAnchor()&&Re.ancestor(t.sc,Re.isAnchor),i.ancestors=Re.listAncestor(t.sc,Re.isEditable),i.range=t,i},t}(),Oe=function(){function t(){}return t.prototype.insertOrderedList=function(e){this.toggleList("OL",e)},t.prototype.insertUnorderedList=function(e){this.toggleList("UL",e)},t.prototype.indent=function(t){var n=this,i=We.create(t).wrapBodyInlineWithPara(),o=i.nodes(Re.isPara,{includeAncestor:!0}),r=O.clusterBy(o,D.peq2("parentNode"));e.each(r,function(t,i){var o=O.head(i);if(Re.isLi(o)){var r=n.findList(o.previousSibling);r?i.map(function(e){return r.appendChild(e)}):(n.wrapList(i,o.parentNode.nodeName),i.map(function(e){return e.parentNode}).map(function(e){return n.appendToPrevious(e)}))}else e.each(i,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}),i.select()},t.prototype.outdent=function(t){var n=this,i=We.create(t).wrapBodyInlineWithPara(),o=i.nodes(Re.isPara,{includeAncestor:!0}),r=O.clusterBy(o,D.peq2("parentNode"));e.each(r,function(t,i){var o=O.head(i);Re.isLi(o)?n.releaseList([i]):e.each(i,function(t,n){e(n).css("marginLeft",function(e,t){return(t=parseInt(t,10)||0)>25?t-25:""})})}),i.select()},t.prototype.toggleList=function(t,n){var i=this,o=We.create(n).wrapBodyInlineWithPara(),r=o.nodes(Re.isPara,{includeAncestor:!0}),a=o.paraBookmark(r),s=O.clusterBy(r,D.peq2("parentNode"));if(O.find(r,Re.isPurePara)){var g=[];e.each(s,function(e,n){g=g.concat(i.wrapList(n,t))}),r=g}else{var l=o.nodes(Re.isList,{includeAncestor:!0}).filter(function(n){return!e.nodeName(n,t)});l.length?e.each(l,function(e,n){Re.replace(n,t)}):r=this.releaseList(s,!0)}We.createFromParaBookmark(a,r).select()},t.prototype.wrapList=function(e,t){var n=O.head(e),i=O.last(e),o=Re.isList(n.previousSibling)&&n.previousSibling,r=Re.isList(i.nextSibling)&&i.nextSibling,a=o||Re.insertAfter(Re.create(t||"UL"),i);return e=e.map(function(e){return Re.isPurePara(e)?Re.replace(e,"LI"):e}),Re.appendChildNodes(a,e),r&&(Re.appendChildNodes(a,O.from(r.childNodes)),Re.remove(r)),e},t.prototype.releaseList=function(t,n){var i=this,o=[];return e.each(t,function(t,r){var a=O.head(r),s=O.last(r),g=n?Re.lastAncestor(a,Re.isList):a.parentNode,l=g.parentNode;if("LI"===g.parentNode.nodeName)r.map(function(e){var t=i.findNextSiblings(e);l.nextSibling?l.parentNode.insertBefore(e,l.nextSibling):l.parentNode.appendChild(e),t.length&&(i.wrapList(t,g.nodeName),e.appendChild(t[0].parentNode))}),0===g.children.length&&l.removeChild(g),0===l.childNodes.length&&l.parentNode.removeChild(l);else{var c=g.childNodes.length>1?Re.splitTree(g,{node:s.parentNode,offset:Re.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,u=Re.splitTree(g,{node:a.parentNode,offset:Re.position(a)},{isSkipPaddingBlankHTML:!0});r=n?Re.listDescendant(u,Re.isLi):O.from(u.childNodes).filter(Re.isLi),!n&&Re.isList(g.parentNode)||(r=r.map(function(e){return Re.replace(e,"P")})),e.each(O.from(r).reverse(),function(e,t){Re.insertAfter(t,g)});var I=O.compact([g,u,c]);e.each(I,function(t,n){var i=[n].concat(Re.listDescendant(n,Re.isList));e.each(i.reverse(),function(e,t){Re.nodeLength(t)||Re.remove(t,!0)})})}o=o.concat(r)}),o},t.prototype.appendToPrevious=function(e){return e.previousSibling?Re.appendChildNodes(e.previousSibling,[e]):this.wrapList([e],"LI")},t.prototype.findList=function(e){return e?O.find(e.children,function(e){return["OL","UL"].indexOf(e.nodeName)>-1}):null},t.prototype.findNextSiblings=function(e){for(var t=[];e.nextSibling;)t.push(e.nextSibling),e=e.nextSibling;return t},t}(),Le=function(){function t(e){this.bullet=new Oe,this.options=e.options}return t.prototype.insertTab=function(e,t){var n=Re.createText(new Array(t+1).join(Re.NBSP_CHAR));(e=e.deleteContents()).insertNode(n,!0),(e=We.create(n,t)).select()},t.prototype.insertParagraph=function(t,n){n=(n=(n=n||We.create(t)).deleteContents()).wrapBodyInlineWithPara();var i,o=Re.ancestor(n.sc,Re.isPara);if(o){if(Re.isEmpty(o)&&Re.isLi(o))return void this.bullet.toggleList(o.parentNode.nodeName);var r=null;if(1===this.options.blockquoteBreakingLevel?r=Re.ancestor(o,Re.isBlockquote):2===this.options.blockquoteBreakingLevel&&(r=Re.lastAncestor(o,Re.isBlockquote)),r){i=e(Re.emptyPara)[0],Re.isRightEdgePoint(n.getStartPoint())&&Re.isBR(n.sc.nextSibling)&&e(n.sc.nextSibling).remove();var a=Re.splitTree(r,n.getStartPoint(),{isDiscardEmptySplits:!0});a?a.parentNode.insertBefore(i,a):Re.insertAfter(i,r)}else{i=Re.splitTree(o,n.getStartPoint());var s=Re.listDescendant(o,Re.isEmptyAnchor);s=s.concat(Re.listDescendant(i,Re.isEmptyAnchor)),e.each(s,function(e,t){Re.remove(t)}),(Re.isHeading(i)||Re.isPre(i)||Re.isCustomStyleTag(i))&&Re.isEmpty(i)&&(i=Re.replace(i,"p"))}}else{var g=n.sc.childNodes[n.so];i=e(Re.emptyPara)[0],g?n.sc.insertBefore(i,g):n.sc.appendChild(i)}We.create(i,0).normalize().select().scrollIntoView(t)},t}(),Ve=function(e,t,n,i){var o={colPos:0,rowPos:0},r=[],a=[];function s(e,t,n,i,o,a,s){var g={baseRow:n,baseCell:i,isRowSpan:o,isColSpan:a,isVirtual:s};r[e]||(r[e]=[]),r[e][t]=g}function g(e,t,n,i){return{baseCell:e.baseCell,action:t,virtualTable:{rowIndex:n,cellIndex:i}}}function l(e,t){if(!r[e])return t;if(!r[e][t])return t;for(var n=t;r[e][n];)if(!r[e][++n])return n}function c(e,t){var n=l(e.rowIndex,t.cellIndex),i=t.colSpan>1,r=t.rowSpan>1,a=e.rowIndex===o.rowPos&&t.cellIndex===o.colPos;s(e.rowIndex,n,e,t,r,i,!1);var g=t.attributes.rowSpan?parseInt(t.attributes.rowSpan.value,10):0;if(g>1)for(var c=1;c<g;c++){var I=e.rowIndex+c;u(I,n,t,a),s(I,n,e,t,!0,i,!0)}var d=t.attributes.colSpan?parseInt(t.attributes.colSpan.value,10):0;if(d>1)for(var C=1;C<d;C++){var h=l(e.rowIndex,n+C);u(e.rowIndex,h,t,a),s(e.rowIndex,h,e,t,r,!0,!0)}}function u(e,t,n,i){e===o.rowPos&&o.colPos>=n.cellIndex&&n.cellIndex<=t&&!i&&o.colPos++}function I(e){switch(t){case Ve.where.Column:if(e.isColSpan)return Ve.resultAction.SubtractSpanCount;break;case Ve.where.Row:if(!e.isVirtual&&e.isRowSpan)return Ve.resultAction.AddCell;if(e.isRowSpan)return Ve.resultAction.SubtractSpanCount}return Ve.resultAction.RemoveCell}function d(e){switch(t){case Ve.where.Column:if(e.isColSpan)return Ve.resultAction.SumSpanCount;if(e.isRowSpan&&e.isVirtual)return Ve.resultAction.Ignore;break;case Ve.where.Row:if(e.isRowSpan)return Ve.resultAction.SumSpanCount;if(e.isColSpan&&e.isVirtual)return Ve.resultAction.Ignore}return Ve.resultAction.AddCell}this.getActionList=function(){for(var e=t===Ve.where.Row?o.rowPos:-1,i=t===Ve.where.Column?o.colPos:-1,s=0,l=!0;l;){var c=e>=0?e:s,u=i>=0?i:s,C=r[c];if(!C)return l=!1,a;var h=C[u];if(!h)return l=!1,a;var A=Ve.resultAction.Ignore;switch(n){case Ve.requestAction.Add:A=d(h);break;case Ve.requestAction.Delete:A=I(h)}a.push(g(h,A,c,u)),s++}return a},e&&e.tagName&&("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase())?(o.colPos=e.cellIndex,e.parentElement&&e.parentElement.tagName&&"tr"===e.parentElement.tagName.toLowerCase()?o.rowPos=e.parentElement.rowIndex:console.error("Impossible to identify start Row point.",e)):console.error("Impossible to identify start Cell point.",e),function(){for(var e=i.rows,t=0;t<e.length;t++)for(var n=e[t].cells,o=0;o<n.length;o++)c(e[t],n[o])}()};Ve.where={Row:0,Column:1},Ve.requestAction={Add:0,Delete:1},Ve.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Ye,Me=function(){function t(){}return t.prototype.tab=function(e,t){var n=Re.ancestor(e.commonAncestor(),Re.isCell),i=Re.ancestor(n,Re.isTable),o=Re.listDescendant(i,Re.isCell),r=O[t?"prev":"next"](o,n);r&&We.create(r,0).select()},t.prototype.addRow=function(t,n){for(var i=Re.ancestor(t.commonAncestor(),Re.isCell),o=e(i).closest("tr"),r=this.recoverAttributes(o),a=e("<tr"+r+"></tr>"),s=new Ve(i,Ve.where.Row,Ve.requestAction.Add,e(o).closest("table")[0]).getActionList(),g=0;g<s.length;g++){var l=s[g],c=this.recoverAttributes(l.baseCell);switch(l.action){case Ve.resultAction.AddCell:a.append("<td"+c+">"+Re.blank+"</td>");break;case Ve.resultAction.SumSpanCount:if("top"===n&&(l.baseCell.parent?l.baseCell.closest("tr").rowIndex:0)<=o[0].rowIndex){var u=e("<div></div>").append(e("<td"+c+">"+Re.blank+"</td>").removeAttr("rowspan")).html();a.append(u);break}var I=parseInt(l.baseCell.rowSpan,10);l.baseCell.setAttribute("rowSpan",++I)}}if("top"===n)o.before(a);else{if(i.rowSpan>1){var d=o[0].rowIndex+(i.rowSpan-2);return void e(e(o).parent().find("tr")[d]).after(e(a))}o.after(a)}},t.prototype.addCol=function(t,n){var i=Re.ancestor(t.commonAncestor(),Re.isCell),o=e(i).closest("tr");e(o).siblings().push(o);for(var r=new Ve(i,Ve.where.Column,Ve.requestAction.Add,e(o).closest("table")[0]).getActionList(),a=0;a<r.length;a++){var s=r[a],g=this.recoverAttributes(s.baseCell);switch(s.action){case Ve.resultAction.AddCell:"right"===n?e(s.baseCell).after("<td"+g+">"+Re.blank+"</td>"):e(s.baseCell).before("<td"+g+">"+Re.blank+"</td>");break;case Ve.resultAction.SumSpanCount:if("right"===n){var l=parseInt(s.baseCell.colSpan,10);s.baseCell.setAttribute("colSpan",++l)}else e(s.baseCell).before("<td"+g+">"+Re.blank+"</td>")}}},t.prototype.recoverAttributes=function(e){var t="";if(!e)return t;for(var n=e.attributes||[],i=0;i<n.length;i++)"id"!==n[i].name.toLowerCase()&&n[i].specified&&(t+=" "+n[i].name+"='"+n[i].value+"'");return t},t.prototype.deleteRow=function(t){for(var n=Re.ancestor(t.commonAncestor(),Re.isCell),i=e(n).closest("tr"),o=i.children("td, th").index(e(n)),r=i[0].rowIndex,a=new Ve(n,Ve.where.Row,Ve.requestAction.Delete,e(i).closest("table")[0]).getActionList(),s=0;s<a.length;s++)if(a[s]){var g=a[s].baseCell,l=a[s].virtualTable,c=g.rowSpan&&g.rowSpan>1,u=c?parseInt(g.rowSpan,10):0;switch(a[s].action){case Ve.resultAction.Ignore:continue;case Ve.resultAction.AddCell:var I=i.next("tr")[0];if(!I)continue;var d=i[0].cells[o];c&&(u>2?(u--,I.insertBefore(d,I.cells[o]),I.cells[o].setAttribute("rowSpan",u),I.cells[o].innerHTML=""):2===u&&(I.insertBefore(d,I.cells[o]),I.cells[o].removeAttribute("rowSpan"),I.cells[o].innerHTML=""));continue;case Ve.resultAction.SubtractSpanCount:c&&(u>2?(g.setAttribute("rowSpan",--u),l.rowIndex!==r&&g.cellIndex===o&&(g.innerHTML="")):2===u&&(g.removeAttribute("rowSpan"),l.rowIndex!==r&&g.cellIndex===o&&(g.innerHTML="")));continue;case Ve.resultAction.RemoveCell:continue}}i.remove()},t.prototype.deleteCol=function(t){for(var n=Re.ancestor(t.commonAncestor(),Re.isCell),i=e(n).closest("tr"),o=i.children("td, th").index(e(n)),r=new Ve(n,Ve.where.Column,Ve.requestAction.Delete,e(i).closest("table")[0]).getActionList(),a=0;a<r.length;a++)if(r[a])switch(r[a].action){case Ve.resultAction.Ignore:continue;case Ve.resultAction.SubtractSpanCount:var s=r[a].baseCell;if(s.colSpan&&s.colSpan>1){var g=s.colSpan?parseInt(s.colSpan,10):0;g>2?(s.setAttribute("colSpan",--g),s.cellIndex===o&&(s.innerHTML="")):2===g&&(s.removeAttribute("colSpan"),s.cellIndex===o&&(s.innerHTML=""))}continue;case Ve.resultAction.RemoveCell:Re.remove(r[a].baseCell,!0);continue}},t.prototype.createTable=function(t,n,i){for(var o,r=[],a=0;a<t;a++)r.push("<td>"+Re.blank+"</td>");o=r.join("");for(var s,g=[],l=0;l<n;l++)g.push("<tr>"+o+"</tr>");s=g.join("");var c=e("<table>"+s+"</table>");return i&&i.tableClassName&&c.addClass(i.tableClassName),c[0]},t.prototype.deleteTable=function(t){var n=Re.ancestor(t.commonAncestor(),Re.isCell);e(n).closest("table").remove()},t}(),_e=function(){function t(t){var n=this;this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new He,this.table=new Me,this.typing=new Le(t),this.bullet=new Oe,this.history=new Ee(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var i=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],o=0,r=i.length;o<r;o++)this[i[o]]=function(e){return function(t){n.beforeCommand(),document.execCommand(e,!1,t),n.afterCommand(!0)}}(i[o]),this.context.memo("help."+i[o],this.lang.help[i[o]]);for(this.fontName=this.wrapCommand(function(e){return n.fontStyling("font-family","'"+e+"'")}),this.fontSize=this.wrapCommand(function(e){return n.fontStyling("font-size",e+"px")}),o=1;o<=6;o++)this["formatH"+o]=function(e){return function(){n.formatBlock("H"+e)}}(o),this.context.memo("help.formatH"+o,this.lang.help["formatH"+o]);this.insertParagraph=this.wrapCommand(function(){n.typing.insertParagraph(n.editable)}),this.insertOrderedList=this.wrapCommand(function(){n.bullet.insertOrderedList(n.editable)}),this.insertUnorderedList=this.wrapCommand(function(){n.bullet.insertUnorderedList(n.editable)}),this.indent=this.wrapCommand(function(){n.bullet.indent(n.editable)}),this.outdent=this.wrapCommand(function(){n.bullet.outdent(n.editable)}),this.insertNode=this.wrapCommand(function(t){n.isLimited(e(t).text().length)||(n.createRange().insertNode(t),We.createFromNodeAfter(t).select())}),this.insertText=this.wrapCommand(function(e){if(!n.isLimited(e.length)){var t=n.createRange().insertNode(Re.createText(e));We.create(t,Re.nodeLength(t)).select()}}),this.pasteHTML=this.wrapCommand(function(e){if(!n.isLimited(e.length)){var t=n.createRange().pasteHTML(e);We.createFromNodeAfter(O.last(t)).select()}}),this.formatBlock=this.wrapCommand(function(e,t){var i=n.options.callbacks.onApplyCustomStyle;i?i.call(n,t,n.context,n.onFormatBlock):n.onFormatBlock(e,t)}),this.insertHorizontalRule=this.wrapCommand(function(){var e=n.createRange().insertNode(Re.create("HR"));e.nextSibling&&We.create(e.nextSibling,0).normalize().select()}),this.lineHeight=this.wrapCommand(function(e){n.style.stylePara(n.createRange(),{lineHeight:e})}),this.createLink=this.wrapCommand(function(t){var i=t.url,o=t.text,r=t.isNewWindow,a=t.range||n.createRange(),s=o.length-a.toString().length;if(!(s>0&&n.isLimited(s))){var g=a.toString()!==o;"string"==typeof i&&(i=i.trim()),n.options.onCreateLink?i=n.options.onCreateLink(i):/^\.?\/(.*)/.test(i)||(i=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(i)?i:"http://"+i);var l=[];if(g){var c=(a=a.deleteContents()).insertNode(e("<A>"+o+"</A>")[0]);l.push(c)}else l=n.style.styleNodes(a,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(l,function(t,n){e(n).attr("href",i),r?e(n).attr("target","_blank"):e(n).removeAttr("target")});var u=We.createFromNodeBefore(O.head(l)).getStartPoint(),I=We.createFromNodeAfter(O.last(l)).getEndPoint();We.create(u.node,u.offset,I.node,I.offset).select()}}),this.color=this.wrapCommand(function(e){var t=e.foreColor,n=e.backColor;t&&document.execCommand("foreColor",!1,t),n&&document.execCommand("backColor",!1,n)}),this.foreColor=this.wrapCommand(function(e){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,e)}),this.insertTable=this.wrapCommand(function(e){var t=e.split("x");n.createRange().deleteContents().insertNode(n.table.createTable(t[0],t[1],n.options))}),this.removeMedia=this.wrapCommand(function(){var t=e(n.restoreTarget()).parent();t.parent("figure").length?t.parent("figure").remove():t=e(n.restoreTarget()).detach(),n.context.triggerEvent("media.delete",t,n.$editable)}),this.floatMe=this.wrapCommand(function(t){var i=e(n.restoreTarget());i.toggleClass("note-float-left","left"===t),i.toggleClass("note-float-right","right"===t),i.css("float",t)}),this.resize=this.wrapCommand(function(t){e(n.restoreTarget()).css({width:100*t+"%",height:""})})}return t.prototype.initialize=function(){var e=this;this.$editable.on("keydown",function(t){if(t.keyCode===V.code.ENTER&&e.context.triggerEvent("enter",t),e.context.triggerEvent("keydown",t),t.isDefaultPrevented()||(e.options.shortcuts?e.handleKeyMap(t):e.preventDefaultEditableShortCuts(t)),e.isLimited(1,t))return!1}).on("keyup",function(t){e.context.triggerEvent("keyup",t)}).on("focus",function(t){e.context.triggerEvent("focus",t)}).on("blur",function(t){e.context.triggerEvent("blur",t)}).on("mousedown",function(t){e.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.context.triggerEvent("mouseup",t)}).on("scroll",function(t){e.context.triggerEvent("scroll",t)}).on("paste",function(t){e.context.triggerEvent("paste",t)}),this.$editable.html(Re.html(this.$note)||Re.emptyPara),this.$editable.on(k.inputEventName,D.debounce(function(){e.context.triggerEvent("change",e.$editable.html())},10)),this.$editor.on("focusin",function(t){e.context.triggerEvent("focusin",t)}).on("focusout",function(t){e.context.triggerEvent("focusout",t)}),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo()},t.prototype.destroy=function(){this.$editable.off()},t.prototype.handleKeyMap=function(e){var t=this.options.keyMap[k.isMac?"mac":"pc"],n=[];e.metaKey&&n.push("CMD"),e.ctrlKey&&!e.altKey&&n.push("CTRL"),e.shiftKey&&n.push("SHIFT");var i=V.nameFromCode[e.keyCode];i&&n.push(i);var o=t[n.join("+")];o?!1!==this.context.invoke(o)&&e.preventDefault():V.isEdit(e.keyCode)&&this.afterCommand()},t.prototype.preventDefaultEditableShortCuts=function(e){(e.ctrlKey||e.metaKey)&&O.contains([66,73,85],e.keyCode)&&e.preventDefault()},t.prototype.isLimited=function(e,t){return e=e||0,(void 0===t||!(V.isMove(t.keyCode)||t.ctrlKey||t.metaKey||O.contains([V.code.BACKSPACE,V.code.DELETE],t.keyCode)))&&this.options.maxTextLength>0&&this.$editable.text().length+e>=this.options.maxTextLength},t.prototype.createRange=function(){return this.focus(),We.create(this.editable)},t.prototype.saveRange=function(e){this.lastRange=this.createRange(),e&&this.lastRange.collapse().select()},t.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},t.prototype.saveTarget=function(e){this.$editable.data("target",e)},t.prototype.clearTarget=function(){this.$editable.removeData("target")},t.prototype.restoreTarget=function(){return this.$editable.data("target")},t.prototype.currentStyle=function(){var e=We.create();return e&&(e=e.normalize()),e?this.style.current(e):this.style.fromNode(this.$editable)},t.prototype.styleFromNode=function(e){return this.style.fromNode(e)},t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},t.prototype.afterCommand=function(e){this.normalizeContent(),this.history.recordUndo(),e||this.context.triggerEvent("change",this.$editable.html())},t.prototype.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell())this.table.tab(e);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(e,this.options.tabSize),this.afterCommand())}},t.prototype.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell())this.table.tab(e,!0);else if(0===this.options.tabSize)return!1},t.prototype.wrapCommand=function(e){return function(){this.beforeCommand(),e.apply(this,arguments),this.afterCommand()}},t.prototype.insertImage=function(t,n){var i,o=this;return(i=t,e.Deferred(function(t){var n=e("<img>");n.one("load",function(){n.off("error abort"),t.resolve(n)}).one("error abort",function(){n.off("load").detach(),t.reject(n)}).css({display:"none"}).appendTo(document.body).attr("src",i)}).promise()).then(function(e){o.beforeCommand(),"function"==typeof n?n(e):("string"==typeof n&&e.attr("data-filename",n),e.css("width",Math.min(o.$editable.width(),e.width()))),e.show(),We.create(o.editable).insertNode(e[0]),We.createFromNodeAfter(e[0]).select(),o.afterCommand()}).fail(function(e){o.context.triggerEvent("image.upload.error",e)})},t.prototype.insertImagesAsDataURL=function(t){var n=this;e.each(t,function(t,i){var o=i.name;n.options.maximumImageFileSize&&n.options.maximumImageFileSize<i.size?n.context.triggerEvent("image.upload.error",n.lang.image.maximumFileSizeError):function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){n.resolve(e.target.result)},onerror:function(e){n.reject(e)}}).readAsDataURL(t)}).promise()}(i).then(function(e){return n.insertImage(e,o)}).fail(function(){n.context.triggerEvent("image.upload.error")})})},t.prototype.getSelectedText=function(){var e=this.createRange();return e.isOnAnchor()&&(e=We.createFromNode(Re.ancestor(e.sc,Re.isAnchor))),e.toString()},t.prototype.onFormatBlock=function(t,n){if(t=k.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),n&&n.length){var i=n[0].className||"";if(i){var o=this.createRange();e([o.sc,o.ec]).closest(t).addClass(i)}}},t.prototype.formatPara=function(){this.formatBlock("P")},t.prototype.fontStyling=function(t,n){var i=this.createRange();if(i){var o=this.style.styleNodes(i);if(e(o).css(t,n),i.isCollapsed()){var r=O.head(o);r&&!Re.nodeLength(r)&&(r.innerHTML=Re.ZERO_WIDTH_NBSP_CHAR,We.createFromNodeAfter(r.firstChild).select(),this.$editable.data("bogus",r))}}},t.prototype.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=Re.ancestor(e.sc,Re.isAnchor);(e=We.createFromNode(t)).select(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},t.prototype.getLinkInfo=function(){var t=this.createRange().expand(Re.isAnchor),n=e(O.head(t.nodes(Re.isAnchor))),i={range:t,text:t.toString(),url:n.length?n.attr("href"):""};return n.length&&(i.isNewWindow="_blank"===n.attr("target")),i},t.prototype.addRow=function(e){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addRow(t,e),this.afterCommand())},t.prototype.addCol=function(e){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addCol(t,e),this.afterCommand())},t.prototype.deleteRow=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(e),this.afterCommand())},t.prototype.deleteCol=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(e),this.afterCommand())},t.prototype.deleteTable=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(e),this.afterCommand())},t.prototype.resizeTo=function(e,t,n){var i;if(n){var o=e.y/e.x,r=t.data("ratio");i={width:r>o?e.x:e.y/r,height:r>o?e.x*r:e.y}}else i={width:e.x,height:e.y};t.css(i)},t.prototype.hasFocus=function(){return this.$editable.is(":focus")},t.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},t.prototype.isEmpty=function(){return Re.isEmpty(this.$editable[0])||Re.emptyPara===this.$editable.html()},t.prototype.empty=function(){this.context.invoke("code",Re.emptyPara)},t.prototype.normalizeContent=function(){this.$editable[0].normalize()},t}(),Ke=function(){function e(e){this.context=e,this.$editable=e.layoutInfo.editable}return e.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},e.prototype.pasteByEvent=function(e){var t=e.originalEvent.clipboardData;if(t&&t.items&&t.items.length){var n=t.items.length>1?t.items[1]:O.head(t.items);"file"===n.kind&&-1!==n.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),this.context.invoke("editor.afterCommand")}},e}(),ze=function(){function t(t){this.context=t,this.$eventListener=e(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=e(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return t.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(e){e.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},t.prototype.attachDragAndDropEvent=function(){var t=this,n=e(),i=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(e){var o=t.context.invoke("codeview.isActivated"),r=t.$editor.width()>0&&t.$editor.height()>0;o||n.length||!r||(t.$editor.addClass("dragover"),t.$dropzone.width(t.$editor.width()),t.$dropzone.height(t.$editor.height()),i.text(t.lang.image.dragImageHere)),n=n.add(e.target)},this.documentEventHandlers.onDragleave=function(e){(n=n.not(e.target)).length||t.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){n=e(),t.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){t.$dropzone.addClass("hover"),i.text(t.lang.image.dropImage)}).on("dragleave",function(){t.$dropzone.removeClass("hover"),i.text(t.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(n){var i=n.originalEvent.dataTransfer;n.preventDefault(),i&&i.files&&i.files.length?(t.$editable.focus(),t.context.invoke("editor.insertImagesOrCallback",i.files)):e.each(i.types,function(n,o){var r=i.getData(o);o.toLowerCase().indexOf("text")>-1?t.context.invoke("editor.pasteHTML",r):e(r).each(function(e,n){t.context.invoke("editor.insertNode",n)})})}).on("dragover",!1)},t.prototype.destroy=function(){var e=this;Object.keys(this.documentEventHandlers).forEach(function(t){e.$eventListener.off(t.substr(2).toLowerCase(),e.documentEventHandlers[t])}),this.documentEventHandlers={}},t}();k.hasCodeMirror&&(k.isSupportAmd?require(["codemirror"],function(e){Ye=e}):Ye=window.CodeMirror);var Je=function(){function e(e){this.context=e,this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.$codable=e.layoutInfo.codable,this.options=e.options}return e.prototype.sync=function(){this.isActivated()&&k.hasCodeMirror&&this.$codable.data("cmEditor").save()},e.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},e.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},e.prototype.activate=function(){var e=this;if(this.$codable.val(Re.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),k.hasCodeMirror){var t=Ye.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new Ye.TernServer(this.options.codemirror.tern);t.ternServer=n,t.on("cursorActivity",function(e){n.updateArgHints(e)})}t.on("blur",function(n){e.context.triggerEvent("blur.codeview",t.getValue(),n)}),t.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",t)}else this.$codable.on("blur",function(t){e.context.triggerEvent("blur.codeview",e.$codable.val(),t)})},e.prototype.deactivate=function(){if(k.hasCodeMirror){var e=this.$codable.data("cmEditor");this.$codable.val(e.getValue()),e.toTextArea()}var t=Re.value(this.$codable,this.options.prettifyHtml)||Re.emptyPara,n=this.$editable.html()!==t;this.$editable.html(t),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),n&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},e.prototype.destroy=function(){this.isActivated()&&this.deactivate()},e}(),Pe=function(){function t(t){this.$document=e(document),this.$statusbar=t.layoutInfo.statusbar,this.$editable=t.layoutInfo.editable,this.options=t.options}return t.prototype.initialize=function(){var e=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var n=e.$editable.offset().top-e.$document.scrollTop(),i=function(t){var i=t.clientY-(n+24);i=e.options.minheight>0?Math.max(i,e.options.minheight):i,i=e.options.maxHeight>0?Math.min(i,e.options.maxHeight):i,e.$editable.height(i)};e.$document.on("mousemove",i).one("mouseup",function(){e.$document.off("mousemove",i)})})},t.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},t}(),je=function(){function t(t){var n=this;this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=e(window),this.$scrollbar=e("html, body"),this.onResize=function(){n.resizeTo({h:n.$window.height()-n.$toolbar.outerHeight()})}}return t.prototype.resizeTo=function(e){this.$editable.css("height",e.h),this.$codable.css("height",e.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,e.h)},t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},t}(),$e=function(){function t(t){var n=this;this.context=t,this.$document=e(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(e,t){n.update(t.target)&&t.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()},"summernote.disable":function(){n.hide()},"summernote.codeview.toggled":function(){n.update()}}}return t.prototype.initialize=function(){var t=this;this.$handle=e(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(e){if(Re.isControlSizing(e.target)){e.preventDefault(),e.stopPropagation();var n=t.$handle.find(".note-control-selection").data("target"),i=n.offset(),o=t.$document.scrollTop(),r=function(e){t.context.invoke("editor.resizeTo",{x:e.clientX-i.left,y:e.clientY-(i.top-o)},n,!e.shiftKey),t.update(n[0])};t.$document.on("mousemove",r).one("mouseup",function(e){e.preventDefault(),t.$document.off("mousemove",r),t.context.invoke("editor.afterCommand")}),n.data("ratio")||n.data("ratio",n.height()/n.width())}}),this.$handle.on("wheel",function(e){e.preventDefault(),t.update()})},t.prototype.destroy=function(){this.$handle.remove()},t.prototype.update=function(t){if(this.context.isDisabled())return!1;var n=Re.isImg(t),i=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",t),n){var o=e(t),r=o.position(),a={left:r.left+parseInt(o.css("marginLeft"),10),top:r.top+parseInt(o.css("marginTop"),10)},s={w:o.outerWidth(!1),h:o.outerHeight(!1)};i.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",o);var g=new Image;g.src=o.attr("src");var l=s.w+"x"+s.h+" ("+this.lang.image.original+": "+g.width+"x"+g.height+")";i.find(".note-control-selection-info").text(l),this.context.invoke("editor.saveTarget",t)}else this.hide();return n},t.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},t}(),qe=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,et=function(){function t(e){var t=this;this.context=e,this.events={"summernote.keyup":function(e,n){n.isDefaultPrevented()||t.handleKeyup(n)},"summernote.keydown":function(e,n){t.handleKeydown(n)}}}return t.prototype.initialize=function(){this.lastWordRange=null},t.prototype.destroy=function(){this.lastWordRange=null},t.prototype.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString(),n=t.match(qe);if(n&&(n[1]||n[2])){var i=n[1]?t:"http://"+t,o=e("<a />").html(t).attr("href",i)[0];this.context.options.linkTargetBlank&&e(o).attr("target","_blank"),this.lastWordRange.insertNode(o),this.lastWordRange=null,this.context.invoke("editor.focus")}}},t.prototype.handleKeydown=function(e){if(O.contains([V.code.ENTER,V.code.SPACE],e.keyCode)){var t=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=t}},t.prototype.handleKeyup=function(e){O.contains([V.code.ENTER,V.code.SPACE],e.keyCode)&&this.replace()},t}(),tt=function(){function e(e){var t=this;this.$note=e.layoutInfo.note,this.events={"summernote.change":function(){t.$note.val(e.invoke("code"))}}}return e.prototype.shouldInitialize=function(){return Re.isTextarea(this.$note[0])},e}(),nt=function(){function t(e){var t=this;this.context=e,this.$editingArea=e.layoutInfo.editingArea,this.options=e.options,this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}}}return t.prototype.shouldInitialize=function(){return!!this.options.placeholder},t.prototype.initialize=function(){var t=this;this.$placeholder=e('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()},t.prototype.destroy=function(){this.$placeholder.remove()},t.prototype.update=function(){var e=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(e)},t}(),it=function(){function t(t){this.ui=e.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=D.invertObject(this.options.keyMap[k.isMac?"mac":"pc"])}return t.prototype.representShortcut=function(e){var t=this.invertedKeyMap[e];return this.options.shortcuts&&t?(k.isMac&&(t=t.replace("CMD","\u2318").replace("SHIFT","\u21e7"))," ("+(t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},t.prototype.button=function(e){return!this.options.tooltip&&e.tooltip&&delete e.tooltip,e.container=this.options.container,this.ui.button(e)},t.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},t.prototype.destroy=function(){delete this.fontInstalledMap},t.prototype.isFontInstalled=function(e){return this.fontInstalledMap.hasOwnProperty(e)||(this.fontInstalledMap[e]=k.isFontInstalled(e)||O.contains(this.options.fontNamesIgnoreCheck,e)),this.fontInstalledMap[e]},t.prototype.isFontDeservedToAdd=function(t){return""!==(t=t.toLowerCase())&&this.isFontInstalled(t)&&-1===e.inArray(t,["sans-serif","serif","monospace","cursive","fantasy"])},t.prototype.colorPalette=function(t,n,i,o){var r=this;return this.ui.buttonGroup({className:"note-color "+t,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:n,click:function(t){var n=e(t.currentTarget);i&&o?r.context.invoke("editor.color",{backColor:n.attr("data-backColor"),foreColor:n.attr("data-foreColor")}):i?r.context.invoke("editor.color",{backColor:n.attr("data-backColor")}):o&&r.context.invoke("editor.color",{foreColor:n.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");i&&(t.css("background-color","#FFFF00"),e.attr("data-backColor","#FFFF00")),o||t.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(i?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="#FFFF00" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(o?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="#000000" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function(t){t.find(".note-holder").each(function(t,n){var i=e(n);i.append(r.ui.palette({colors:r.options.colors,colorsName:r.options.colorsName,eventName:i.data("event"),container:r.options.container,tooltip:r.options.tooltip}).render())});var n=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];t.find(".note-holder-custom").each(function(t,i){var o=e(i);o.append(r.ui.palette({colors:n,colorsName:n,eventName:o.data("event"),container:r.options.container,tooltip:r.options.tooltip}).render())}),t.find("input[type=color]").each(function(n,i){e(i).change(function(){var n=t.find("#"+e(this).data("event")).find(".note-color-btn").first(),i=this.value.toUpperCase();n.css("background-color",i).attr("aria-label",i).attr("data-value",i).attr("data-original-title",i),n.click()})})},click:function(n){n.stopPropagation();var i=e("."+t),o=e(n.target),a=o.data("event"),s=o.attr("data-value");if("openPalette"===a){var g=i.find("#"+s),l=e(i.find("#"+g.data("event")).find(".note-color-row")[0]),c=l.find(".note-color-btn").last().detach(),u=g.val();c.css("background-color",u).attr("aria-label",u).attr("data-value",u).attr("data-original-title",u),l.prepend(c),g.click()}else if(O.contains(["backColor","foreColor"],a)){var I="backColor"===a?"background-color":"color",d=o.closest(".note-color").find(".note-recent-color"),C=o.closest(".note-color").find(".note-current-color-button");d.css(I,s),C.attr("data-"+a,s),r.context.invoke("editor."+a,s)}}})]}).render()},t.prototype.addToolbarButtons=function(){var t=this;this.context.memo("button.style",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic),t.options),tooltip:t.lang.style.style,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"dropdown-style",items:t.options.styleTags,title:t.lang.style.style,template:function(e){"string"==typeof e&&(e={tag:e,title:t.lang.style.hasOwnProperty(e)?t.lang.style[e]:e});var n=e.tag;return"<"+n+(e.style?' style="'+e.style+'" ':"")+(e.className?' class="'+e.className+'"':"")+">"+e.title+"</"+n+">"},click:t.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var n=function(e,n){var o=i.options.styleTags[e];i.context.memo("button.style."+o,function(){return t.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:t.lang.style[o],click:t.context.createInvokeHandler("editor.formatBlock")}).render()})},i=this,o=0,r=this.options.styleTags.length;o<r;o++)n(o);this.context.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.ui.icon(t.options.icons.bold),tooltip:t.lang.font.bold+t.representShortcut("bold"),click:t.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.ui.icon(t.options.icons.italic),tooltip:t.lang.font.italic+t.representShortcut("italic"),click:t.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.ui.icon(t.options.icons.underline),tooltip:t.lang.font.underline+t.representShortcut("underline"),click:t.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return t.button({contents:t.ui.icon(t.options.icons.eraser),tooltip:t.lang.font.clear+t.representShortcut("removeFormat"),click:t.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.ui.icon(t.options.icons.strikethrough),tooltip:t.lang.font.strikethrough+t.representShortcut("strikethrough"),click:t.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.ui.icon(t.options.icons.superscript),tooltip:t.lang.font.superscript,click:t.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.ui.icon(t.options.icons.subscript),tooltip:t.lang.font.subscript,click:t.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var n=t.context.invoke("editor.currentStyle");return e.each(n["font-family"].split(","),function(n,i){i=i.trim().replace(/['"]+/g,""),t.isFontDeservedToAdd(i)&&-1===e.inArray(i,t.options.fontNames)&&t.options.fontNames.push(i)}),t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontname"/>',t.options),tooltip:t.lang.font.name,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:t.options.icons.menuCheck,items:t.options.fontNames.filter(t.isFontInstalled.bind(t)),title:t.lang.font.name,template:function(e){return"<span style=\"font-family: '"+e+"'\">"+e+"</span>"},click:t.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',t.options),tooltip:t.lang.font.size,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:t.options.icons.menuCheck,items:t.options.fontSizes,title:t.lang.font.size,click:t.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.color",function(){return t.colorPalette("note-color-all",t.lang.color.recent,!0,!0)}),this.context.memo("button.forecolor",function(){return t.colorPalette("note-color-fore",t.lang.color.foreground,!1,!0)}),this.context.memo("button.backcolor",function(){return t.colorPalette("note-color-back",t.lang.color.background,!0,!1)}),this.context.memo("button.ul",function(){return t.button({contents:t.ui.icon(t.options.icons.unorderedlist),tooltip:t.lang.lists.unordered+t.representShortcut("insertUnorderedList"),click:t.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return t.button({contents:t.ui.icon(t.options.icons.orderedlist),tooltip:t.lang.lists.ordered+t.representShortcut("insertOrderedList"),click:t.context.createInvokeHandler("editor.insertOrderedList")}).render()});var a=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),s=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),g=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),l=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),c=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),u=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",D.invoke(a,"render")),this.context.memo("button.justifyCenter",D.invoke(s,"render")),this.context.memo("button.justifyRight",D.invoke(g,"render")),this.context.memo("button.justifyFull",D.invoke(l,"render")),this.context.memo("button.outdent",D.invoke(c,"render")),this.context.memo("button.indent",D.invoke(u,"render")),this.context.memo("button.paragraph",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft),t.options),tooltip:t.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),t.ui.dropdown([t.ui.buttonGroup({className:"note-align",children:[a,s,g,l]}),t.ui.buttonGroup({className:"note-list",children:[c,u]})])]).render()}),this.context.memo("button.height",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight),t.options),tooltip:t.lang.font.height,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({items:t.options.lineHeights,checkClassName:t.options.icons.menuCheck,className:"dropdown-line-height",title:t.lang.font.height,click:t.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table),t.options),tooltip:t.lang.table.table,data:{toggle:"dropdown"}}),t.ui.dropdown({title:t.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){e.find(".note-dimension-picker-mousecatcher").css({width:t.options.insertTableMaxSize.col+"em",height:t.options.insertTableMaxSize.row+"em"}).mousedown(t.context.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler.bind(t))}}).render()}),this.context.memo("button.link",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.link+t.representShortcut("linkDialog.show"),click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return t.button({contents:t.ui.icon(t.options.icons.picture),tooltip:t.lang.image.image,click:t.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return t.button({contents:t.ui.icon(t.options.icons.video),tooltip:t.lang.video.video,click:t.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return t.button({contents:t.ui.icon(t.options.icons.minus),tooltip:t.lang.hr.insert+t.representShortcut("insertHorizontalRule"),click:t.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.ui.icon(t.options.icons.arrowsAlt),tooltip:t.lang.options.fullscreen,click:t.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.ui.icon(t.options.icons.code),tooltip:t.lang.options.codeview,click:t.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return t.button({contents:t.ui.icon(t.options.icons.redo),tooltip:t.lang.history.redo+t.representShortcut("redo"),click:t.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return t.button({contents:t.ui.icon(t.options.icons.undo),tooltip:t.lang.history.undo+t.representShortcut("undo"),click:t.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return t.button({contents:t.ui.icon(t.options.icons.question),tooltip:t.lang.options.help,click:t.context.createInvokeHandler("helpDialog.show")}).render()})},t.prototype.addImagePopoverButtons=function(){var e=this;this.context.memo("button.imageSize100",function(){return e.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:e.lang.image.resizeFull,click:e.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.imageSize50",function(){return e.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:e.lang.image.resizeHalf,click:e.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.imageSize25",function(){return e.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:e.lang.image.resizeQuarter,click:e.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.floatLeft",function(){return e.button({contents:e.ui.icon(e.options.icons.alignLeft),tooltip:e.lang.image.floatLeft,click:e.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return e.button({contents:e.ui.icon(e.options.icons.alignRight),tooltip:e.lang.image.floatRight,click:e.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return e.button({contents:e.ui.icon(e.options.icons.alignJustify),tooltip:e.lang.image.floatNone,click:e.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return e.button({contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.image.remove,click:e.context.createInvokeHandler("editor.removeMedia")}).render()})},t.prototype.addLinkPopoverButtons=function(){var e=this;this.context.memo("button.linkDialogShow",function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.edit,click:e.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return e.button({contents:e.ui.icon(e.options.icons.unlink),tooltip:e.lang.link.unlink,click:e.context.createInvokeHandler("editor.unlink")}).render()})},t.prototype.addTablePopoverButtons=function(){var e=this;this.context.memo("button.addRowUp",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowAbove),tooltip:e.lang.table.addRowAbove,click:e.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowBelow),tooltip:e.lang.table.addRowBelow,click:e.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colBefore),tooltip:e.lang.table.addColLeft,click:e.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colAfter),tooltip:e.lang.table.addColRight,click:e.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowRemove),tooltip:e.lang.table.delRow,click:e.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colRemove),tooltip:e.lang.table.delCol,click:e.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.table.delTable,click:e.context.createInvokeHandler("editor.deleteTable")}).render()})},t.prototype.build=function(t,n){for(var i=0,o=n.length;i<o;i++){for(var r=n[i],a=e.isArray(r)?r[0]:r,s=e.isArray(r)?1===r.length?[r[0]]:r[1]:[r],g=this.ui.buttonGroup({className:"note-"+a}).render(),l=0,c=s.length;l<c;l++){var u=this.context.memo("button."+s[l]);u&&g.append("function"==typeof u?u(this.context):u)}g.appendTo(t)}},t.prototype.updateCurrentStyle=function(t){var n=this,i=t||this.$toolbar,o=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(i,{".note-btn-bold":function(){return"bold"===o["font-bold"]},".note-btn-italic":function(){return"italic"===o["font-italic"]},".note-btn-underline":function(){return"underline"===o["font-underline"]},".note-btn-subscript":function(){return"subscript"===o["font-subscript"]},".note-btn-superscript":function(){return"superscript"===o["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===o["font-strikethrough"]}}),o["font-family"]){var r=o["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),a=O.find(r,this.isFontInstalled.bind(this));i.find(".dropdown-fontname a").each(function(t,n){var i=e(n),o=i.data("value")+""==a+"";i.toggleClass("checked",o)}),i.find(".note-current-fontname").text(a).css("font-family",a)}if(o["font-size"]){var s=o["font-size"];i.find(".dropdown-fontsize a").each(function(t,n){var i=e(n),o=i.data("value")+""==s+"";i.toggleClass("checked",o)}),i.find(".note-current-fontsize").text(s)}if(o["line-height"]){var g=o["line-height"];i.find(".dropdown-line-height li a").each(function(t,i){var o=e(i).data("value")+""==g+"";n.className=o?"checked":""})}},t.prototype.updateBtnStates=function(t,n){var i=this;e.each(n,function(e,n){i.ui.toggleBtnActive(t.find(e),n())})},t.prototype.tableMoveHandler=function(t){var n,i=e(t.target.parentNode),o=i.next(),r=i.find(".note-dimension-picker-mousecatcher"),a=i.find(".note-dimension-picker-highlighted"),s=i.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var g=e(t.target).offset();n={x:t.pageX-g.left,y:t.pageY-g.top}}else n={x:t.offsetX,y:t.offsetY};var l=Math.ceil(n.x/18)||1,c=Math.ceil(n.y/18)||1;a.css({width:l+"em",height:c+"em"}),r.data("value",l+"x"+c),l>3&&l<this.options.insertTableMaxSize.col&&s.css({width:l+1+"em"}),c>3&&c<this.options.insertTableMaxSize.row&&s.css({height:c+1+"em"}),o.html(l+" x "+c)},t}(),ot=function(){function t(t){this.context=t,this.$window=e(window),this.$document=e(document),this.ui=e.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.followScroll=this.followScroll.bind(this)}return t.prototype.shouldInitialize=function(){return!this.options.airMode},t.prototype.initialize=function(){var e=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){e.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},t.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var t=this.$toolbar.parent(".note-toolbar-wrapper"),n=this.$editor.outerHeight(),i=this.$editor.width(),o=this.$toolbar.height();t.css({height:o});var r=0;this.options.otherStaticBar&&(r=e(this.options.otherStaticBar).outerHeight());var a=this.$document.scrollTop(),s=this.$editor.offset().top;this.$toolbar.css(a>s-r&&a<s+n-r-o?{position:"fixed",top:r,width:i}:{position:"relative",top:0,width:"100%"})},t.prototype.changeContainer=function(e){e?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer)},t.prototype.updateFullscreen=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),e),this.changeContainer(e)},t.prototype.updateCodeview=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),e),e?this.deactivate():this.activate()},t.prototype.activate=function(e){var t=this.$toolbar.find("button");e||(t=t.not(".btn-codeview")),this.ui.toggleBtn(t,!0)},t.prototype.deactivate=function(e){var t=this.$toolbar.find("button");e||(t=t.not(".btn-codeview")),this.ui.toggleBtn(t,!1)},t}(),rt=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,n=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":e("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join("");this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:n,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>'}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===V.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.toggleLinkBtn=function(e,t,n){this.ui.toggleBtn(e,t.val()&&n.val())},t.prototype.showLinkDialog=function(t){var n=this;return e.Deferred(function(e){var i=n.$dialog.find(".note-link-text"),o=n.$dialog.find(".note-link-url"),r=n.$dialog.find(".note-link-btn"),a=n.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown"),t.url||(t.url=t.text),i.val(t.text);var s=function(){n.toggleLinkBtn(r,i,o),t.text=i.val()};i.on("input",s).on("paste",function(){setTimeout(s,0)});var g=function(){n.toggleLinkBtn(r,i,o),t.text||i.val(o.val())};o.on("input",g).on("paste",function(){setTimeout(g,0)}).val(t.url),k.isSupportTouch||o.trigger("focus"),n.toggleLinkBtn(r,i,o),n.bindEnterKey(o,r),n.bindEnterKey(i,r),a.prop("checked",void 0!==t.isNewWindow?t.isNewWindow:n.context.options.linkTargetBlank),r.one("click",function(r){r.preventDefault(),e.resolve({range:t.range,url:o.val(),text:i.val(),isNewWindow:a.is(":checked")}),n.ui.hideDialog(n.$dialog)})}),n.ui.onDialogHidden(n.$dialog,function(){i.off("input paste keypress"),o.off("input paste keypress"),r.off("click"),"pending"===e.state()&&e.reject()}),n.ui.showDialog(n.$dialog)}).promise()},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(t).then(function(t){e.context.invoke("editor.restoreRange"),e.context.invoke("editor.createLink",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t}(),at=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!O.isEmpty(this.options.popover.link)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(e){e.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.link)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var t=this.context.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var n=Re.ancestor(t.sc,Re.isAnchor),i=e(n).attr("href");this.$popover.find("a").attr("href",i).html(i);var o=Re.posFromPlaceholder(n);this.$popover.css({display:"block",left:o.left,top:o.top})}else this.hide()}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),st=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),i=1*(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)+" "+" KMGTP"[n]+"B";t="<small>"+this.lang.image.maximumFileSize+" : "+i+"</small>"}var o=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',t,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join("");this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:o,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>'}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===V.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange"),"string"==typeof t?e.options.callbacks.onImageLinkInsert?e.context.triggerEvent("image.link.insert",t):e.context.invoke("editor.insertImage",t):e.options.callbacks.onImageUpload?e.context.triggerEvent("image.upload",t):e.context.invoke("editor.insertImagesAsDataURL",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showImageDialog=function(){var t=this;return e.Deferred(function(e){var n=t.$dialog.find(".note-image-input"),i=t.$dialog.find(".note-image-url"),o=t.$dialog.find(".note-image-btn");t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),n.replaceWith(n.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val("")),o.click(function(t){t.preventDefault(),e.resolve(i.val())}),i.on("keyup paste",function(){var e=i.val();t.ui.toggleBtn(o,e)}).val(""),k.isSupportTouch||i.trigger("focus"),t.bindEnterKey(i,o)}),t.ui.onDialogHidden(t.$dialog,function(){n.off("change"),i.off("keyup paste keypress"),o.off("click"),"pending"===e.state()&&e.reject()}),t.ui.showDialog(t.$dialog)})},t}(),gt=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.disable":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!O.isEmpty(this.options.popover.image)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.image)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(e){if(Re.isImg(e)){var t=Re.posFromPlaceholder(e),n=Re.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:t.left,top:this.options.popatmouse?event.pageY:Math.min(t.top,n.top)})}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),lt=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.mousedown":function(e,t){n.update(t.target)},"summernote.keyup summernote.scroll summernote.change":function(){n.update()},"summernote.disable":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!O.isEmpty(this.options.popover.table)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.table),k.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(e){if(this.context.isDisabled())return!1;var t=Re.isCell(e);if(t){var n=Re.posFromPlaceholder(e);this.$popover.css({display:"block",left:n.left,top:n.top})}else this.hide();return t},t.prototype.hide=function(){this.$popover.hide()},t}(),ct=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join("");this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:t,footer:'<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>'}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===V.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.createVideoNode=function(t){var n,i=t.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),o=t.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),r=t.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),a=t.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),s=t.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),g=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),l=t.match(/\/\/v\.qq\.com.*?vid=(.+)/),c=t.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),u=t.match(/^.+.(mp4|m4v)$/),I=t.match(/^.+.(ogg|ogv)$/),d=t.match(/^.+.(webm)$/);if(i&&11===i[1].length){var C=i[1],h=0;if(void 0!==i[2]){var A=i[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(A)for(var f=[3600,60,1],m=0,p=f.length;m<p;m++)h+=void 0!==A[m+1]?f[m]*parseInt(A[m+1],10):0}n=e("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+C+(h>0?"?start="+h:"")).attr("width","640").attr("height","360")}else if(o&&o[0].length)n=e("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+o[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(r&&r[0].length)n=e("<iframe>").attr("frameborder",0).attr("src",r[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(a&&a[3].length)n=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+a[3]).attr("width","640").attr("height","360");else if(s&&s[2].length)n=e("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+s[2]).attr("width","640").attr("height","360");else if(g&&g[1].length)n=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+g[1]);else if(l&&l[1].length||c&&c[2].length){var b=l&&l[1].length?l[1]:c[2];n=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+b+"&amp;auto=0")}else{if(!(u||I||d))return!1;n=e("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return n.addClass("note-video-clip"),n[0]},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(t).then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange");var n=e.createVideoNode(t);n&&e.context.invoke("editor.insertNode",n)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showVideoDialog=function(t){var n=this;return e.Deferred(function(e){var i=n.$dialog.find(".note-video-url"),o=n.$dialog.find(".note-video-btn");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown"),i.val(t).on("input",function(){n.ui.toggleBtn(o,i.val())}),k.isSupportTouch||i.trigger("focus"),o.click(function(t){t.preventDefault(),e.resolve(i.val())}),n.bindEnterKey(i,o)}),n.ui.onDialogHidden(n.$dialog,function(){i.off("input"),o.off("click"),"pending"===e.state()&&e.reject()}),n.ui.showDialog(n.$dialog)})},t}(),ut=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.11</a> \xb7 ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> \xb7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:t,callback:function(e){e.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.createShortcutList=function(){var t=this,n=this.options.keyMap[k.isMac?"mac":"pc"];return Object.keys(n).map(function(i){var o=n[i],r=e('<div><div class="help-list-item"/></div>');return r.append(e("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append(e("<span/>").html(t.context.memo("help."+o)||o)),r.html()}).join("")},t.prototype.showHelpDialog=function(){var t=this;return e.Deferred(function(e){t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),e.resolve()}),t.ui.showDialog(t.$dialog)}).promise()},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){e.context.invoke("editor.restoreRange")})},t}(),It=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){n.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){n.hide()},"summernote.focusout":function(e,t){k.isFF||t.relatedTarget&&Re.ancestor(t.relatedTarget,D.eq(n.$popover[0]))||n.hide()}}}return t.prototype.shouldInitialize=function(){return this.options.airMode&&!O.isEmpty(this.options.popover.air)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content");this.context.invoke("buttons.build",e,this.options.popover.air)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){var e=this.context.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var t=O.last(e.range.getClientRects());if(t){var n=D.rect2bnd(t);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-20,top:n.top+n.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),dt=function(){function t(t){var n=this;this.context=t,this.ui=e.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=e.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(e,t){t.isDefaultPrevented()||n.handleKeyup(t)},"summernote.keydown":function(e,t){n.handleKeydown(t)},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return this.hints.length>0},t.prototype.initialize=function(){var t=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(n){t.$content.find(".active").removeClass("active"),e(n.currentTarget).addClass("active"),t.replace()})},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.selectItem=function(e){this.$content.find(".active").removeClass("active"),e.addClass("active"),this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2},t.prototype.moveDown=function(){var e=this.$content.find(".note-hint-item.active"),t=e.next();if(t.length)this.selectItem(t);else{var n=e.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},t.prototype.moveUp=function(){var e=this.$content.find(".note-hint-item.active"),t=e.prev();if(t.length)this.selectItem(t);else{var n=e.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},t.prototype.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var t=this.nodeFromItem(e);this.lastWordRange.insertNode(t),We.createFromNode(t).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},t.prototype.nodeFromItem=function(e){var t=this.hints[e.data("index")],n=e.data("item"),i=t.content?t.content(n):n;return"string"==typeof i&&(i=Re.createText(i)),i},t.prototype.createItemTemplates=function(t,n){var i=this.hints[t];return n.map(function(n,o){var r=e('<div class="note-hint-item"/>');return r.append(i.template?i.template(n):n+""),r.data({index:t,item:n}),r})},t.prototype.handleKeydown=function(e){this.$popover.is(":visible")&&(e.keyCode===V.code.ENTER?(e.preventDefault(),this.replace()):e.keyCode===V.code.UP?(e.preventDefault(),this.moveUp()):e.keyCode===V.code.DOWN&&(e.preventDefault(),this.moveDown()))},t.prototype.searchKeyword=function(e,t,n){var i=this.hints[e];if(i&&i.match.test(t)&&i.search){var o=i.match.exec(t);i.search(o[1],n)}else n()},t.prototype.createGroup=function(t,n){var i=this,o=e('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,n,function(e){(e=e||[]).length&&(o.html(i.createItemTemplates(t,e)),i.show())}),o},t.prototype.handleKeyup=function(e){var t=this;if(!O.contains([V.code.ENTER,V.code.UP,V.code.DOWN],e.keyCode)){var n=this.context.invoke("editor.createRange").getWordRange(),i=n.toString();if(this.hints.length&&i){this.$content.empty();var o=D.rect2bnd(O.last(n.getClientRects()));o&&(this.$popover.hide(),this.lastWordRange=n,this.hints.forEach(function(e,n){e.match.test(i)&&t.createGroup(n,i).appendTo(t.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),this.$popover.css("top"===this.direction?{left:o.left,top:o.top-this.$popover.outerHeight()-5}:{left:o.left,top:o.top+o.height+5}))}else this.hide()}},t.prototype.show=function(){this.$popover.show()},t.prototype.hide=function(){this.$popover.hide()},t}(),Ct=function(){function t(t,n){this.ui=e.summernote.ui,this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=n,this.initialize()}return t.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},t.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},t.prototype.reset=function(){var e=this.isDisabled();this.code(Re.emptyPara),this._destroy(),this._initialize(),e&&this.disable()},t.prototype._initialize=function(){var t=this,n=e.extend({},this.options.buttons);Object.keys(n).forEach(function(e){t.memo("button."+e,n[e])});var i=e.extend({},this.options.modules,e.summernote.plugins||{});Object.keys(i).forEach(function(e){t.module(e,i[e],!0)}),Object.keys(this.modules).forEach(function(e){t.initializeModule(e)})},t.prototype._destroy=function(){var e=this;Object.keys(this.modules).reverse().forEach(function(t){e.removeModule(t)}),Object.keys(this.memos).forEach(function(t){e.removeMemo(t)}),this.triggerEvent("destroy",this)},t.prototype.code=function(e){var t=this.invoke("codeview.isActivated");if(void 0===e)return this.invoke("codeview.sync"),t?this.layoutInfo.codable.val():this.layoutInfo.editable.html();t?this.layoutInfo.codable.val(e):this.layoutInfo.editable.html(e),this.$note.val(e),this.triggerEvent("change",e)},t.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},t.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},t.prototype.triggerEvent=function(){var e=O.head(arguments),t=O.tail(O.from(arguments)),n=this.options.callbacks[D.namespaceToCamel(e,"on")];n&&n.apply(this.$note[0],t),this.$note.trigger("summernote."+e,t)},t.prototype.initializeModule=function(e){var t=this.modules[e];t.shouldInitialize=t.shouldInitialize||D.ok,t.shouldInitialize()&&(t.initialize&&t.initialize(),t.events&&Re.attachEvents(this.$note,t.events))},t.prototype.module=function(e,t,n){if(1===arguments.length)return this.modules[e];this.modules[e]=new t(this),n||this.initializeModule(e)},t.prototype.removeModule=function(e){var t=this.modules[e];t.shouldInitialize()&&(t.events&&Re.detachEvents(this.$note,t.events),t.destroy&&t.destroy()),delete this.modules[e]},t.prototype.memo=function(e,t){if(1===arguments.length)return this.memos[e];this.memos[e]=t},t.prototype.removeMemo=function(e){this.memos[e]&&this.memos[e].destroy&&this.memos[e].destroy(),delete this.memos[e]},t.prototype.createInvokeHandlerAndUpdateState=function(e,t){var n=this;return function(i){n.createInvokeHandler(e,t)(i),n.invoke("buttons.updateCurrentStyle")}},t.prototype.createInvokeHandler=function(t,n){var i=this;return function(o){o.preventDefault();var r=e(o.target);i.invoke(t,n||r.closest("[data-value]").data("value"),r)}},t.prototype.invoke=function(){var e=O.head(arguments),t=O.tail(O.from(arguments)),n=e.split("."),i=n.length>1,o=i&&O.head(n),r=i?O.last(n):O.head(n),a=this.modules[o||"editor"];return!o&&this[r]?this[r].apply(this,t):a&&a[r]&&a.shouldInitialize()?a[r].apply(a,t):void 0},t}();e.fn.extend({summernote:function(){var t=e.type(O.head(arguments)),n="string"===t,i=e.extend({},e.summernote.options,"object"===t?O.head(arguments):{});i.langInfo=e.extend(!0,{},e.summernote.lang["en-US"],e.summernote.lang[i.lang]),i.icons=e.extend(!0,{},e.summernote.options.icons,i.icons),i.tooltip="auto"===i.tooltip?!k.isSupportTouch:i.tooltip,this.each(function(t,n){var o=e(n);if(!o.data("summernote")){var r=new Ct(o,i);o.data("summernote",r),o.data("summernote").triggerEvent("init",r.layoutInfo)}});var o=this.first();if(o.length){var r=o.data("summernote");if(n)return r.invoke.apply(r,O.from(arguments));i.focus&&r.invoke("editor.focus")}return this}}),e.summernote=e.extend(e.summernote,{version:"0.8.11",ui:y,plugins:{},options:{modules:{editor:_e,clipboard:Ke,dropzone:ze,codeview:Je,statusbar:Pe,fullscreen:je,handle:$e,hintPopover:dt,autoLink:et,autoSync:tt,placeholder:nt,buttons:it,toolbar:ot,linkDialog:rt,linkPopover:at,imageDialog:st,imagePopover:gt,tablePopover:lt,videoDialog:ct,helpDialog:ut,airPopover:It},buttons:{},lang:"en-US",followingToolbar:!0,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,styleTags:["p","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null,onImageLinkInsert:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}),function(e){"use strict";var t=function(){},n=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(null,n))}},i=function(e){return function(){return e}},o=function(e){return e};function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=t.concat(n);return e.apply(null,o)}}var a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B,v,y=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},x=i(!1),F=i(!0),G=x,Q=F,w=function(){return S},S=(l={fold:function(e,t){return e()},is:G,isSome:G,isNone:Q,getOr:g=function(e){return e},getOrThunk:s=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:g,orThunk:s,map:w,ap:w,each:function(){},bind:w,flatten:w,exists:G,forall:Q,filter:w,equals:a=function(e){return e.isNone()},equals_:a,toArray:function(){return[]},toString:i("none()")},Object.freeze&&Object.freeze(l),l),X=function(e){var t=function(){return e},n=function(){return o},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Q,isNone:G,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return X(t(e))},ap:function(t){return t.fold(w,function(t){return X(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:S},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(G,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Z={some:X,none:w,from:function(e){return null==e?S:X(e)}},N=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},k=N("string"),R=N("object"),D=N("array"),U=N("null"),T=N("boolean"),W=N("function"),E=N("number"),H=Array.prototype.slice,O=void 0===(c=Array.prototype.indexOf)?function(e,t){return j(e,t)}:function(e,t){return c.call(e,t)},L=function(e,t){return-1<O(e,t)},V=function(e,t){return P(e,t).isSome()},Y=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o,e);return i},M=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n,e)},_=function(e,t){for(var n=[],i=[],o=0,r=e.length;o<r;o++){var a=e[o];(t(a,o,e)?n:i).push(a)}return{pass:n,fail:i}},K=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r,i,e)&&n.push(r)}return n},z=function(e,t,n){return M(e,function(e){n=t(n,e)}),n},J=function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o,n,e))return Z.some(o)}return Z.none()},P=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n,e))return Z.some(n);return Z.none()},j=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return n;return-1},$=Array.prototype.push,q=function(e,t){return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!D(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);$.apply(t,e[n])}return t}(Y(e,t))},ee=function(e,t){for(var n=0,i=e.length;n<i;++n)if(!0!==t(e[n],n,e))return!1;return!0},te=function(e,t){return K(e,function(e){return!L(t,e)})},ne=function(e){return 0===e.length?Z.none():Z.some(e[0])},ie=function(e){return 0===e.length?Z.none():Z.some(e[e.length-1])},oe=W(Array.from)?Array.from:function(e){return H.call(e)},re=void 0!==e.window?e.window:Function("return this;")(),ae={getOrDie:function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:re,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n}},se=function(){return ae.getOrDie("URL")},ge={createObjectURL:function(e){return se().createObjectURL(e)},revokeObjectURL:function(e){se().revokeObjectURL(e)}},le=e.navigator,ce=le.userAgent,ue=function(t){return"matchMedia"in e.window&&e.matchMedia(t).matches};m=/Android/.test(ce),I=(I=!(u=/WebKit/.test(ce))&&/MSIE/gi.test(ce)&&/Explorer/gi.test(le.appName))&&/MSIE (\w+)\./.exec(ce)[1],d=-1!==ce.indexOf("Trident/")&&(-1!==ce.indexOf("rv:")||-1!==le.appName.indexOf("Netscape"))&&11,C=-1!==ce.indexOf("Edge/")&&!I&&!d&&12,I=I||d||C,h=!u&&!d&&/Gecko/.test(ce),A=-1!==ce.indexOf("Mac"),f=/(iPad|iPhone)/.test(ce),p="FormData"in e.window&&"FileReader"in e.window&&"URL"in e.window&&!!ge.createObjectURL,b=ue("only screen and (max-device-width: 480px)")&&(m||f),B=ue("only screen and (min-width: 800px)")&&(m||f),v=-1!==ce.indexOf("Windows Phone"),C&&(u=!1);var Ie,de={opera:!1,webkit:u,ie:I,gecko:h,mac:A,iOS:f,android:m,contentEditable:!f||p||534<=parseInt(ce.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==I,range:e.window.getSelection&&"Range"in e.window,documentMode:I&&!C?e.document.documentMode||7:10,fileApi:p,ceFalse:!1===I||8<I,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===I||11<I,desktop:!b&&!B,windowsPhone:v},Ce=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(r,this),e(a,this))},i=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e){var t=this;null!==this._state?i(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(g){return void e.reject(g)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void c(e(n,t),e(r,this),e(a,this))}this._state=!0,this._value=t,s.call(this)}catch(g){a.call(this,g)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function c(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var i=this;return new n(function(n,r){o.call(i,new l(e,t,n,r))})},n.all=function(){var i=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(0===i.length)return t([]);var o=i.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var g=s.then;if("function"==typeof g)return void g.call(s,function(e){r(a,e)},n)}i[a]=s,0==--o&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)r(a,i[a])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},n}(),he=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Ae=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},fe=function(e,t){var n,i;return(i=function(){var i=arguments;clearTimeout(n),n=he(function(){e.apply(this,i)},t)}).stop=function(){clearTimeout(n)},i},me={requestAnimationFrame:function(t,n){Ie?Ie.then(t):Ie=new Ce(function(t){n||(n=e.document.body),function(t,n){var i,o=e.window.requestAnimationFrame,r=["ms","moz","webkit"];for(i=0;i<r.length&&!o;i++)o=e.window[r[i]+"RequestAnimationFrame"];o||(o=function(t){e.window.setTimeout(t,0)}),o(t,n)}(t,n)}).then(t)},setTimeout:he,setInterval:Ae,setEditorTimeout:function(e,t,n){return he(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var i;return i=Ae(function(){e.removed?clearInterval(i):t()},n)},debounce:fe,throttle:fe,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},pe=/^(?:mouse|contextmenu)|click/,be={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Be=function(){return!1},ve=function(){return!0},ye=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},xe=function(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Fe=function(t,n){var i,o,r=n||{};for(i in t)be[i]||(r[i]=t[i]);if(r.target||(r.target=r.srcElement||e.document),de.experimentalShadowDom&&(r.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t}(t,r.target)),t&&pe.test(t.type)&&void 0===t.pageX&&void 0!==t.clientX){var a=r.target.ownerDocument||e.document,s=a.documentElement,g=a.body;r.pageX=t.clientX+(s&&s.scrollLeft||g&&g.scrollLeft||0)-(s&&s.clientLeft||g&&g.clientLeft||0),r.pageY=t.clientY+(s&&s.scrollTop||g&&g.scrollTop||0)-(s&&s.clientTop||g&&g.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=ve,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=ve,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},!(r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=ve,r.stopPropagation()})==((o=r).isDefaultPrevented===ve||o.isDefaultPrevented===Be)&&(r.isDefaultPrevented=Be,r.isPropagationStopped=Be,r.isImmediatePropagationStopped=Be),void 0===r.metaKey&&(r.metaKey=!1),r},Ge=function(e,t,n){var i=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var r=function(){return"complete"===i.readyState||"interactive"===i.readyState&&i.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(o))},s=function(){r()&&(xe(i,"readystatechange",s),a())},g=function(){try{i.documentElement.doScroll("left")}catch(e){return void me.setTimeout(g)}a()};!i.addEventListener||de.ie&&de.ie<11?(ye(i,"readystatechange",s),i.documentElement.doScroll&&e.self===e.top&&g()):r()?a():ye(e,"DOMContentLoaded",a),ye(e,"load",a)}},Qe=function(){var t,n,i,o,a,s=this,g={};n="mce-data-"+(+new Date).toString(32),o="onmouseenter"in e.document.documentElement,i="onfocusin"in e.document.documentElement,a={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,s.domLoaded=!1,s.events=g;var l=function(e,t){var n,i,o,r,a=g[t];if(n=a&&a[e.type])for(i=0,o=n.length;i<o;i++)if((r=n[i])&&!1===r.func.call(r.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};s.bind=function(r,c,u,I){var d,C,h,A,f,m,p,b=e.window,B=function(e){l(Fe(e||b.event),d)};if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[n]?d=r[n]:(d=t++,r[n]=d,g[d]={}),I=I||r,h=(c=c.split(" ")).length;h--;)m=B,f=p=!1,"DOMContentLoaded"===(A=c[h])&&(A="ready"),s.domLoaded&&"ready"===A&&"complete"===r.readyState?u.call(I,Fe({type:A})):(o||(f=a[A])&&(m=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Fe(e||b.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,l(e,d))}),i||"focusin"!==A&&"focusout"!==A||(p=!0,f="focusin"===A?"focus":"blur",m=function(e){(e=Fe(e||b.event)).type="focus"===e.type?"focusin":"focusout",l(e,d)}),(C=g[d][A])?"ready"===A&&s.domLoaded?u({type:A}):C.push({func:u,scope:I}):(g[d][A]=C=[{func:u,scope:I}],C.fakeName=f,C.capture=p,C.nativeHandler=m,"ready"===A?Ge(r,m,s):ye(r,f||A,m,p)));return r=C=0,u}},s.unbind=function(e,t,i){var o,a,l,c,u,I;if(!e||3===e.nodeType||8===e.nodeType)return s;if(o=e[n]){if(I=g[o],t){for(l=(t=t.split(" ")).length;l--;)if(a=I[u=t[l]]){if(i)for(c=a.length;c--;)if(a[c].func===i){var d=a.nativeHandler,C=a.fakeName,h=a.capture;(a=a.slice(0,c).concat(a.slice(c+1))).nativeHandler=d,a.fakeName=C,a.capture=h,I[u]=a}i&&0!==a.length||(delete I[u],xe(e,a.fakeName||u,a.nativeHandler,a.capture))}}else{for(u in I)xe(e,(a=I[u]).fakeName||u,a.nativeHandler,a.capture);I={}}for(u in I)return s;delete g[o];try{delete e[n]}catch(r){e[n]=null}}return s},s.fire=function(e,t,i){var o;if(!e||3===e.nodeType||8===e.nodeType)return s;for((i=Fe(null,i)).type=t,i.target=e;(o=e[n])&&l(i,o),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!i.isPropagationStopped(););return s},s.clean=function(e){var t,i,o=s.unbind;if(!e||3===e.nodeType||8===e.nodeType)return s;if(e[n]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),t=(i=e.getElementsByTagName("*")).length;t--;)(e=i[t])[n]&&o(e);return s},s.destroy=function(){g={}},s.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Qe.Event=new Qe,Qe.Event.bind(e.window,"ready",function(){});var we,Se,Xe,Ze,Ne,ke,Re,De,Ue,Te,We,Ee,He,Oe,Le,Ve,Ye,Me,_e="sizzle"+-new Date,Ke=e.window.document,ze=0,Je=0,Pe=wt(),je=wt(),$e=wt(),qe=function(e,t){return e===t&&(We=!0),0},et="undefined",tt={}.hasOwnProperty,nt=[],it=nt.pop,ot=nt.push,rt=nt.push,at=nt.slice,st=nt.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},gt="[\\x20\\t\\r\\n\\f]",lt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ct="\\["+gt+"*("+lt+")(?:"+gt+"*([*^$|!~]?=)"+gt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+lt+"))|)"+gt+"*\\]",ut=":("+lt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ct+")*)|.*)\\)|)",It=new RegExp("^"+gt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+gt+"+$","g"),dt=new RegExp("^"+gt+"*,"+gt+"*"),Ct=new RegExp("^"+gt+"*([>+~]|"+gt+")"+gt+"*"),ht=new RegExp("="+gt+"*([^\\]'\"]*?)"+gt+"*\\]","g"),At=new RegExp(ut),ft=new RegExp("^"+lt+"$"),mt={ID:new RegExp("^#("+lt+")"),CLASS:new RegExp("^\\.("+lt+")"),TAG:new RegExp("^("+lt+"|[*])"),ATTR:new RegExp("^"+ct),PSEUDO:new RegExp("^"+ut),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+gt+"*(even|odd|(([+-]|)(\\d*)n|)"+gt+"*(?:([+-]|)"+gt+"*(\\d+)|))"+gt+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+gt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+gt+"*((?:-\\d)?\\d*)"+gt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,Bt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,xt=/'|\\/g,Ft=new RegExp("\\\\([\\da-f]{1,6}"+gt+"?|("+gt+")|.)","ig"),Gt=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{rt.apply(nt=at.call(Ke.childNodes),Ke.childNodes)}catch(Db){rt={apply:nt.length?function(e,t){ot.apply(e,at.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}var Qt=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d;if((t?t.ownerDocument||t:Ke)!==He&&Ee(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||He).nodeType)&&9!==s)return[];if(Le&&!i){if(o=vt.exec(e))if(a=o[1]){if(9===s){if(!(r=t.getElementById(a))||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&Me(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return rt.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&Se.getElementsByClassName)return rt.apply(n,t.getElementsByClassName(a)),n}if(Se.qsa&&(!Ve||!Ve.test(e))){if(u=c=_e,I=t,d=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=ke(e),(c=t.getAttribute("id"))?u=c.replace(xt,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",g=l.length;g--;)l[g]=u+Ut(l[g]);I=yt.test(e)&&Rt(t.parentNode)||t,d=l.join(",")}if(d)try{return rt.apply(n,I.querySelectorAll(d)),n}catch(m){}finally{c||t.removeAttribute("id")}}}return De(e.replace(It,"$1"),t,n,i)};function wt(){var e=[];return function t(n,i){return e.push(n+" ")>Xe.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function St(e){return e[_e]=!0,e}function Xt(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Zt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Nt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function kt(e){return St(function(t){return t=+t,St(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function Rt(e){return e&&typeof e.getElementsByTagName!==et&&e}for(we in Se=Qt.support={},Ne=Qt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Ee=Qt.setDocument=function(e){var t,n=e?e.ownerDocument||e:Ke,i=n.defaultView;return n!==He&&9===n.nodeType&&n.documentElement?(Oe=(He=n).documentElement,Le=!Ne(n),i&&i!==function(e){try{return e.top}catch(t){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",function(){Ee()},!1):i.attachEvent&&i.attachEvent("onunload",function(){Ee()})),Se.attributes=!0,Se.getElementsByTagName=!0,Se.getElementsByClassName=Bt.test(n.getElementsByClassName),Se.getById=!0,Xe.find.ID=function(e,t){if(typeof t.getElementById!==et&&Le){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Xe.filter.ID=function(e){var t=e.replace(Ft,Gt);return function(e){return e.getAttribute("id")===t}},Xe.find.TAG=Se.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==et)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},Xe.find.CLASS=Se.getElementsByClassName&&function(e,t){if(Le)return t.getElementsByClassName(e)},Ye=[],Ve=[],Se.disconnectedMatch=!0,Ve=Ve.length&&new RegExp(Ve.join("|")),Ye=Ye.length&&new RegExp(Ye.join("|")),t=Bt.test(Oe.compareDocumentPosition),Me=t||Bt.test(Oe.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},qe=t?function(e,t){if(e===t)return We=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Se.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===Ke&&Me(Ke,e)?-1:t===n||t.ownerDocument===Ke&&Me(Ke,t)?1:Te?st.call(Te,e)-st.call(Te,t):0:4&i?-1:1)}:function(e,t){if(e===t)return We=!0,0;var i,o=0,r=e.parentNode,a=t.parentNode,s=[e],g=[t];if(!r||!a)return e===n?-1:t===n?1:r?-1:a?1:Te?st.call(Te,e)-st.call(Te,t):0;if(r===a)return Xt(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)g.unshift(i);for(;s[o]===g[o];)o++;return o?Xt(s[o],g[o]):s[o]===Ke?-1:g[o]===Ke?1:0},n):He},Qt.matches=function(e,t){return Qt(e,null,null,t)},Qt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==He&&Ee(e),t=t.replace(ht,"='$1']"),Se.matchesSelector&&Le&&(!Ye||!Ye.test(t))&&(!Ve||!Ve.test(t)))try{var n=(void 0).call(e,t);if(n||Se.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Db){}return 0<Qt(t,He,null,[e]).length},Qt.contains=function(e,t){return(e.ownerDocument||e)!==He&&Ee(e),Me(e,t)},Qt.attr=function(e,t){(e.ownerDocument||e)!==He&&Ee(e);var n=Xe.attrHandle[t.toLowerCase()],i=n&&tt.call(Xe.attrHandle,t.toLowerCase())?n(e,t,!Le):void 0;return void 0!==i?i:Se.attributes||!Le?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},Qt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Qt.uniqueSort=function(e){var t,n=[],i=0,o=0;if(We=!Se.detectDuplicates,Te=!Se.sortStable&&e.slice(0),e.sort(qe),We){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return Te=null,e},Ze=Qt.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Ze(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=Ze(t);return n},(Xe=Qt.selectors={cacheLength:50,createPseudo:St,match:mt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ft,Gt),e[3]=(e[3]||e[4]||e[5]||"").replace(Ft,Gt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Qt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Qt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return mt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&At.test(n)&&(t=ke(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ft,Gt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Pe[e+" "];return t||(t=new RegExp("(^|"+gt+")"+e+"("+gt+"|$)"))&&Pe(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==et&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=Qt.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&-1<o.indexOf(n):"$="===t?n&&o.slice(-n.length)===n:"~="===t?-1<(" "+o+" ").indexOf(n):"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,g){var l,c,u,I,d,C,h=r!==a?"nextSibling":"previousSibling",A=t.parentNode,f=s&&t.nodeName.toLowerCase(),m=!g&&!s;if(A){if(r){for(;h;){for(u=t;u=u[h];)if(s?u.nodeName.toLowerCase()===f:1===u.nodeType)return!1;C=h="only"===e&&!C&&"nextSibling"}return!0}if(C=[a?A.firstChild:A.lastChild],a&&m){for(d=(l=(c=A[_e]||(A[_e]={}))[e]||[])[0]===ze&&l[1],I=l[0]===ze&&l[2],u=d&&A.childNodes[d];u=++d&&u&&u[h]||(I=d=0)||C.pop();)if(1===u.nodeType&&++I&&u===t){c[e]=[ze,d,I];break}}else if(m&&(l=(t[_e]||(t[_e]={}))[e])&&l[0]===ze)I=l[1];else for(;(u=++d&&u&&u[h]||(I=d=0)||C.pop())&&((s?u.nodeName.toLowerCase()!==f:1!==u.nodeType)||!++I||(m&&((u[_e]||(u[_e]={}))[e]=[ze,I]),u!==t)););return(I-=o)===i||I%i==0&&0<=I/i}}},PSEUDO:function(e,t){var n,i=Xe.pseudos[e]||Xe.setFilters[e.toLowerCase()]||Qt.error("unsupported pseudo: "+e);return i[_e]?i(t):1<i.length?(n=[e,e,"",t],Xe.setFilters.hasOwnProperty(e.toLowerCase())?St(function(e,n){for(var o,r=i(e,t),a=r.length;a--;)e[o=st.call(e,r[a])]=!(n[o]=r[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:St(function(e){var t=[],n=[],i=Re(e.replace(It,"$1"));return i[_e]?St(function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:St(function(e){return function(t){return 0<Qt(e,t).length}}),contains:St(function(e){return e=e.replace(Ft,Gt),function(t){return-1<(t.textContent||t.innerText||Ze(t)).indexOf(e)}}),lang:St(function(e){return ft.test(e||"")||Qt.error("unsupported lang: "+e),e=e.replace(Ft,Gt).toLowerCase(),function(t){var n;do{if(n=Le?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.window.location&&e.window.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===Oe},focus:function(e){return e===He.activeElement&&(!He.hasFocus||He.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Xe.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return pt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:kt(function(){return[0]}),last:kt(function(e,t){return[t-1]}),eq:kt(function(e,t,n){return[n<0?n+t:n]}),even:kt(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:kt(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:kt(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:kt(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=Xe.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Xe.pseudos[we]=Zt(we);for(we in{submit:!0,reset:!0})Xe.pseudos[we]=Nt(we);function Dt(){}function Ut(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function Tt(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=Je++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,g,l=[ze,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((s=(g=t[_e]||(t[_e]={}))[i])&&s[0]===ze&&s[1]===r)return l[2]=s[2];if((g[i]=l)[2]=e(t,n,a))return!0}}}function Wt(e){return 1<e.length?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Et(e,t,n,i,o){for(var r,a=[],s=0,g=e.length,l=null!=t;s<g;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),l&&t.push(s)));return a}function Ht(e,t,n,i,o,r){return i&&!i[_e]&&(i=Ht(i)),o&&!o[_e]&&(o=Ht(o,r)),St(function(r,a,s,g){var l,c,u,I=[],d=[],C=a.length,h=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)Qt(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),A=!e||!r&&t?h:Et(h,I,e,s,g),f=n?o||(r?e:C||i)?[]:a:A;if(n&&n(A,f,s,g),i)for(l=Et(f,d),i(l,[],s,g),c=l.length;c--;)(u=l[c])&&(f[d[c]]=!(A[d[c]]=u));if(r){if(o||e){if(o){for(l=[],c=f.length;c--;)(u=f[c])&&l.push(A[c]=u);o(null,f=[],l,g)}for(c=f.length;c--;)(u=f[c])&&-1<(l=o?st.call(r,u):I[c])&&(r[l]=!(a[l]=u))}}else f=Et(f===a?f.splice(C,f.length):f),o?o(null,a,f,g):rt.apply(a,f)})}function Ot(e){for(var t,n,i,o=e.length,r=Xe.relative[e[0].type],a=r||Xe.relative[" "],s=r?1:0,g=Tt(function(e){return e===t},a,!0),l=Tt(function(e){return-1<st.call(t,e)},a,!0),c=[function(e,n,i){return!r&&(i||n!==Ue)||((t=n).nodeType?g(e,n,i):l(e,n,i))}];s<o;s++)if(n=Xe.relative[e[s].type])c=[Tt(Wt(c),n)];else{if((n=Xe.filter[e[s].type].apply(null,e[s].matches))[_e]){for(i=++s;i<o&&!Xe.relative[e[i].type];i++);return Ht(1<s&&Wt(c),1<s&&Ut(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(It,"$1"),n,s<i&&Ot(e.slice(s,i)),i<o&&Ot(e=e.slice(i)),i<o&&Ut(e))}c.push(n)}return Wt(c)}Dt.prototype=Xe.filters=Xe.pseudos,Xe.setFilters=new Dt,ke=Qt.tokenize=function(e,t){var n,i,o,r,a,s,g,l=je[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],g=Xe.preFilter;a;){for(r in n&&!(i=dt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=Ct.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(It," ")}),a=a.slice(n.length)),Xe.filter)!(i=mt[r].exec(a))||g[r]&&!(i=g[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Qt.error(e):je(e,s).slice(0)},Re=Qt.compile=function(e,t){var n,i,o,r,a,s,g=[],l=[],c=$e[e+" "];if(!c){for(t||(t=ke(e)),n=t.length;n--;)(c=Ot(t[n]))[_e]?g.push(c):l.push(c);(c=$e(e,(i=l,r=0<(o=g).length,a=0<i.length,s=function(e,t,n,s,g){var l,c,u,I=0,d="0",C=e&&[],h=[],A=Ue,f=e||a&&Xe.find.TAG("*",g),m=ze+=null==A?1:Math.random()||.1,p=f.length;for(g&&(Ue=t!==He&&t);d!==p&&null!=(l=f[d]);d++){if(a&&l){for(c=0;u=i[c++];)if(u(l,t,n)){s.push(l);break}g&&(ze=m)}r&&((l=!u&&l)&&I--,e&&C.push(l))}if(I+=d,r&&d!==I){for(c=0;u=o[c++];)u(C,h,t,n);if(e){if(0<I)for(;d--;)C[d]||h[d]||(h[d]=it.call(s));h=Et(h)}rt.apply(s,h),g&&!e&&0<h.length&&1<I+o.length&&Qt.uniqueSort(s)}return g&&(ze=m,Ue=A),C},r?St(s):s))).selector=e}return c},De=Qt.select=function(e,t,n,i){var o,r,a,s,g,l="function"==typeof e&&e,c=!i&&ke(e=l.selector||e);if(n=n||[],1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(a=r[0]).type&&Se.getById&&9===t.nodeType&&Le&&Xe.relative[r[1].type]){if(!(t=(Xe.find.ID(a.matches[0].replace(Ft,Gt),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=mt.needsContext.test(e)?0:r.length;o--&&!Xe.relative[s=(a=r[o]).type];)if((g=Xe.find[s])&&(i=g(a.matches[0].replace(Ft,Gt),yt.test(r[0].type)&&Rt(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&Ut(r)))return rt.apply(n,i),n;break}}return(l||Re(e,c))(i,t,!Le,n,yt.test(e)&&Rt(t.parentNode)||t),n},Se.sortStable=_e.split("").sort(qe).join("")===_e,Se.detectDuplicates=!!We,Ee(),Se.sortDetached=!0;var Lt=Array.isArray,Vt=function(e,t,n){var i,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(i=0,o=e.length;i<o;i++)if(!1===t.call(n,e[i],i,e))return 0}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return 0;return 1},Yt=function(e,t,n){var i,o;for(i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return i;return-1},Mt={isArray:Lt,toArray:function(e){var t,n,i=e;if(!Lt(e))for(i=[],t=0,n=e.length;t<n;t++)i[t]=e[t];return i},each:Vt,map:function(e,t){var n=[];return Vt(e,function(i,o){n.push(t(i,o,e))}),n},filter:function(e,t){var n=[];return Vt(e,function(i,o){t&&!t(i,o,e)||n.push(i)}),n},indexOf:function(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,i){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(i,n,e[o],o);return n},findIndex:Yt,find:function(e,t,n){var i=Yt(e,t,n);return-1!==i?e[i]:void 0},last:function(e){return e[e.length-1]}},_t=/^\s*|\s*$/g,Kt=function(e){return null==e?"":(""+e).replace(_t,"")},zt=function(e,t){return t?!("array"!==t||!Mt.isArray(e))||typeof e===t:void 0!==e},Jt=function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),Mt.each(e,function(e,o){if(!1===t.call(i,e,o,n))return!1;Jt(e,t,n,i)}))},Pt={trim:Kt,isArray:Mt.isArray,is:zt,toArray:Mt.toArray,makeMap:function(e,t,n){var i;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n},each:Mt.each,map:Mt.map,grep:Mt.filter,inArray:Mt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,i,o,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s,g=arguments;for(n=1,i=g.length;n<i;n++)for(o in t=g[n])t.hasOwnProperty(o)&&void 0!==(s=t[o])&&(e[o]=s);return e},create:function(e,t,n){var i,o,r,a,s,g=this,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=g.createNS(e[3].replace(/\.\w+$/,""),n))[r]){if("static"===e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},l=1),o[r]=t[r],g.extend(o[r].prototype,t),e[5]&&(i=g.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[r],o[r]=l?function(){return i[a].apply(this,arguments)}:function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],g.each(i,function(e,t){o[r].prototype[t]=i[t]}),g.each(t,function(e,t){i[t]?o[r].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!==r&&(o[r].prototype[t]=e)})),g.each(t.static,function(e,t){o[r][t]=e})}},walk:Jt,createNS:function(t,n){var i,o;for(n=n||e.window,t=t.split("."),i=0;i<t.length;i++)n[o=t[i]]||(n[o]={}),n=n[o];return n},resolve:function(t,n){var i,o;for(n=n||e.window,i=0,o=(t=t.split(".")).length;i<o&&(n=n[t[i]]);i++);return n},explode:function(e,t){return!e||zt(e,"array")?e:Mt.map(e.split(t||","),Kt)},_addCacheSuffix:function(e){var t=de.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},jt=e.document,$t=Array.prototype.push,qt=Array.prototype.slice,en=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,tn=Qe.Event,nn=Pt.makeMap("children,contents,next,prev"),on=function(e){return void 0!==e},rn=function(e){return"string"==typeof e},an=function(e,t){var n,i,o;for(o=(t=t||jt).createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;i=o.firstChild;)n.appendChild(i);return n},sn=function(e,t,n,i){var o;if(rn(t))t=an(t,Bn(e[0]));else if(t.length&&!t.nodeType){if(t=An.makeArray(t),i)for(o=t.length-1;0<=o;o--)sn(e,t[o],n,i);else for(o=0;o<t.length;o++)sn(e,t[o],n,i);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},gn=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},ln=function(e,t,n){var i,o;return t=An(t)[0],e.each(function(){var e=this;n&&i===e.parentNode||(i=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)}),e},cn=Pt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),un=Pt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),In={for:"htmlFor",class:"className",readonly:"readOnly"},dn={float:"cssFloat"},Cn={},hn={},An=function(e,t){return new An.fn.init(e,t)},fn=/^\s*|\s*$/g,mn=function(e){return null==e?"":(""+e).replace(fn,"")},pn=function(e,t){var n,i,o,r;if(e)if(void 0===(n=e.length)){for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(r=e[i],i,r))break}else for(o=0;o<n&&!1!==t.call(r=e[o],o,r);o++);return e},bn=function(e,t){var n=[];return pn(e,function(e,i){t(i,e)&&n.push(i)}),n},Bn=function(e){return e?9===e.nodeType?e:e.ownerDocument:jt};An.fn=An.prototype={constructor:An,selector:"",context:null,length:0,init:function(t,n){var i,o,r=this;if(!t)return r;if(t.nodeType)return r.context=r[0]=t,r.length=1,r;if(n&&n.nodeType)r.context=n;else{if(n)return An(t).attr(n);r.context=n=e.document}if(rn(t)){if(!(i="<"===(r.selector=t).charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:en.exec(t)))return An(n).find(t);if(i[1])for(o=an(t,Bn(n)).firstChild;o;)$t.call(r,o),o=o.nextSibling;else{if(!(o=Bn(n).getElementById(i[2])))return r;if(o.id!==i[2])return r.find(t);r.length=1,r[0]=o}}else this.add(t,!1);return r},toArray:function(){return Pt.toArray(this)},add:function(e,t){var n,i,o=this;if(rn(e))return o.add(An(e));if(!1!==t)for(n=An.unique(o.toArray().concat(An.makeArray(e))),o.length=n.length,i=0;i<n.length;i++)o[i]=n[i];else $t.apply(o,An.makeArray(e));return o},attr:function(e,t){var n,i=this;if("object"==typeof e)pn(e,function(e,t){i.attr(e,t)});else{if(!on(t)){if(i[0]&&1===i[0].nodeType){if((n=Cn[e])&&n.get)return n.get(i[0],e);if(un[e])return i.prop(e)?e:void 0;null===(t=i[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=Cn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=In[e]||e))pn(e,function(e,t){n.prop(e,t)});else{if(!on(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,i,o=this,r=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)pn(e,function(e,t){o.css(e,t)});else if(on(t))e=r(e),"number"!=typeof t||cn[e]||(t=t.toString()+"px"),o.each(function(){var n=this.style;if((i=hn[e])&&i.set)i.set(this,t);else{try{this.style[dn[e]||e]=t}catch(r){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}});else{if(n=o[0],(i=hn[e])&&i.get)return i.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[r(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(I){return}}return o},remove:function(){for(var e,t=this.length;t--;)tn.clean(e=this[t]),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(on(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(l){An(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(on(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return sn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return sn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?sn(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?sn(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return An(e).append(this),this},prependTo:function(e){return An(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return ln(this,e)},wrapAll:function(e){return ln(this,e,!0)},wrapInner:function(e){return this.each(function(){An(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){An(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),An(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?pn(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,i){var o,r;(r=gn(i,e))!==t&&(o=i.className,r?i.className=mn((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e)})),n},hasClass:function(e){return gn(this[0],e)},each:function(e){return pn(this,e)},on:function(e,t){return this.each(function(){tn.bind(this,e,t)})},off:function(e,t){return this.each(function(){tn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?tn.fire(this,e.type,e):tn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new An(qt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)An.find(e,this[t],i);return An(i)},filter:function(e){return An("function"==typeof e?bn(this.toArray(),function(t,n){return e(n,t)}):An.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof An&&(e=e[0]),this.each(function(n,i){for(;i;){if("string"==typeof e&&An(i).is(e)){t.push(i);break}if(i===e){t.push(i);break}i=i.parentNode}}),An(t)},offset:function(e){var t,n,i,o,r=0,a=0;return e?this.css(e):((t=this[0])&&(i=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(r=(o=t.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:a})},push:$t,sort:[].sort,splice:[].splice},Pt.extend(An,{extend:Pt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Pt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Pt.isArray,each:pn,trim:mn,grep:bn,find:Qt,expr:Qt.selectors,unique:Qt.uniqueSort,text:Qt.getText,contains:Qt.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!==t[i].nodeType&&t.splice(i,1);return 1===t.length?An.find.matchesSelector(t[0],e)?[t[0]]:[]:An.find.matches(e,t)}});var vn=function(e,t,n){var i=[],o=e[t];for("string"!=typeof n&&n instanceof An&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&An(o).is(n))break}1===o.nodeType&&i.push(o),o=o[t]}return i},yn=function(e,t,n,i){var o=[];for(i instanceof An&&(i=i[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==i){if(e===i)break;if("string"==typeof i&&An(e).is(i))break}o.push(e)}return o},xn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};pn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return vn(e,"parentNode")},next:function(e){return xn(e,"nextSibling",1)},prev:function(e){return xn(e,"previousSibling",1)},children:function(e){return yn(e.firstChild,"nextSibling",1)},contents:function(e){return Pt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){An.fn[e]=function(n){var i=[];return this.each(function(){var e=t.call(i,this,n,i);e&&(An.isArray(e)?i.push.apply(i,e):i.push(e))}),1<this.length&&(nn[e]||(i=An.unique(i)),0===e.indexOf("parents")&&(i=i.reverse())),i=An(i),n?i.filter(n):i}}),pn({parentsUntil:function(e,t){return vn(e,"parentNode",t)},nextUntil:function(e,t){return yn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return yn(e,"previousSibling",1,t).slice(1)}},function(e,t){An.fn[e]=function(n,i){var o=[];return this.each(function(){var e=t.call(o,this,n,o);e&&(An.isArray(e)?o.push.apply(o,e):o.push(e))}),1<this.length&&(o=An.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=An(o),i?o.filter(i):o}}),An.fn.is=function(e){return!!e&&0<this.filter(e).length},An.fn.init.prototype=An.fn,An.overrideDefaults=function(e){var t,n=function(i,o){return t=t||e(),0===arguments.length&&(i=t.element),o||(o=t.context),new n.fn.init(i,o)};return An.extend(n,this),n};var Fn=function(e,t,n){pn(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})};de.ie&&de.ie<8&&(Fn(Cn,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?void 0:t},size:function(e){var t=e.size;return 20===t?void 0:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?void 0:t}}),Fn(Cn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),de.ie&&de.ie<9&&(dn.float="styleFloat",Fn(hn,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),An.attrHooks=Cn,An.cssHooks=hn;var Gn,Qn,wn,Sn,Xn,Zn,Nn=function(){return kn(0,0)},kn=function(e,t){return{major:e,minor:t}},Rn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Nn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return kn(i(1),i(2))}(e,n)},Dn=Nn,Un="Firefox",Tn=function(e,t){return function(){return t===e}},Wn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Tn("Edge",t),isChrome:Tn("Chrome",t),isIE:Tn("IE",t),isOpera:Tn("Opera",t),isFirefox:Tn(Un,t),isSafari:Tn("Safari",t)}},En=function(){return Wn({current:void 0,version:Dn()})},Hn=Wn,On=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i(Un),i("Safari"),"Windows"),Ln="Android",Vn="Solaris",Yn="FreeBSD",Mn=function(e,t){return function(){return t===e}},_n=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Mn(On,t),isiOS:Mn("iOS",t),isAndroid:Mn(Ln,t),isOSX:Mn("OSX",t),isLinux:Mn("Linux",t),isSolaris:Mn(Vn,t),isFreeBSD:Mn(Yn,t)}},Kn=function(){return _n({current:void 0,version:Dn()})},zn=_n,Jn=(i(On),i("iOS"),i(Ln),i("Linux"),i("OSX"),i(Vn),i(Yn),function(e,t){var n=String(t).toLowerCase();return J(e,function(e){return e.search(n)})}),Pn=function(e,t){return-1!==e.indexOf(t)},jn=function(e){return e.replace(/^\s+|\s+$/g,"")},$n=function(e){return e.replace(/\s+$/g,"")},qn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ei=function(e){return function(t){return Pn(t,e)}},ti=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Pn(e,"edge/")&&Pn(e,"chrome")&&Pn(e,"safari")&&Pn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qn],search:function(e){return Pn(e,"chrome")&&!Pn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Pn(e,"msie")||Pn(e,"trident")}},{name:"Opera",versionRegexes:[qn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ei("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ei("firefox")},{name:"Safari",versionRegexes:[qn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Pn(e,"safari")||Pn(e,"mobile/"))&&Pn(e,"applewebkit")}}],ni=[{name:"Windows",search:ei("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Pn(e,"iphone")||Pn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ei("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ei("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ei("linux"),versionRegexes:[]},{name:"Solaris",search:ei("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ei("freebsd"),versionRegexes:[]}],ii={browsers:i(ti),oses:i(ni)},oi={detect:(Gn=function(){return t=e.navigator.userAgent,C=ii.browsers(),h=ii.oses(),{browser:A=function(e,t){return Jn(C,t).map(function(e){var n=Rn(e.versionRegexes,t);return{current:e.name,version:n}})}(0,t).fold(En,Hn),os:f=function(e,t){return Jn(h,t).map(function(e){var n=Rn(e.versionRegexes,t);return{current:e.name,version:n}})}(0,t).fold(Kn,zn),deviceType:(o=A,r=t,a=(n=f).isiOS()&&!0===/ipad/i.test(r),s=n.isiOS()&&!a,g=n.isAndroid()&&3===n.version.major,l=n.isAndroid()&&4===n.version.major,c=a||g||l&&!0===/mobile/i.test(r),u=n.isiOS()||n.isAndroid(),I=u&&!c,d=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(r),{isiPad:i(a),isiPhone:i(s),isTablet:i(c),isPhone:i(I),isTouch:i(u),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:i(d)})};var t,n,o,r,a,s,g,l,c,u,I,d,C,h,A,f},wn=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wn||(wn=!0,Qn=Gn.apply(null,e)),Qn})},ri=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:i(e)}},ai={fromHtml:function(t,n){var i=(n||e.document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||1<i.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return ri(i.childNodes[0])},fromTag:function(t,n){var i=(n||e.document).createElement(t);return ri(i)},fromText:function(t,n){var i=(n||e.document).createTextNode(t);return ri(i)},fromDom:ri,fromPoint:function(e,t,n){var i=e.dom();return Z.from(i.elementFromPoint(t,n)).map(ri)}},si=e.Node.DOCUMENT_NODE,gi=e.Node.ELEMENT_NODE,li=e.Node.TEXT_NODE,ci=function(e){return e.dom().nodeName.toLowerCase()},ui=function(e){return function(t){return t.dom().nodeType===e}},Ii=ui(gi),di=ui(li),Ci=Object.keys,hi=Object.hasOwnProperty,Ai=function(e,t){for(var n=Ci(e),i=0,o=n.length;i<o;i++){var r=n[i];t(e[r],r,e)}},fi=function(e,t){var n={};return Ai(e,function(i,o){var r=t(i,o,e);n[r.k]=r.v}),n},mi=function(e){return void 0!==e.style&&W(e.style.getPropertyValue)},pi=function(t,n,i){if(!(k(i)||T(i)||E(i)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,i+"")},bi=function(e,t,n){pi(e.dom(),t,n)},Bi=function(e,t){var n=e.dom();Ai(t,function(e,t){pi(n,t,e)})},vi=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},yi=function(e,t){e.dom().removeAttribute(t)},xi=function(t,n){var i,o,r=t.dom(),a=e.window.getComputedStyle(r).getPropertyValue(n),s=""!==a||void 0!==(o=di(i=t)?i.dom().parentNode:i.dom())&&null!==o&&o.ownerDocument.body.contains(o)?a:Fi(r,n);return null===s?void 0:s},Fi=function(e,t){return mi(e)?e.style.getPropertyValue(t):""},Gi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var o={};return M(e,function(e,n){o[e]=i(t[n])}),o}},Qi=function(e,t){for(var n=[],i=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(i)).isSome(););return n},wi=gi,Si=si,Xi=function(e,t){var n=e.dom();if(n.nodeType!==wi)return!1;var i=n;if(void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Zi=function(e){return e.nodeType!==wi&&e.nodeType!==Si||0===e.childElementCount},Ni=function(e,t){return e.dom()===t.dom()},ki=oi.detect().browser.isIE()?function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ae.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),t.dom())}:function(e,t){var n=e.dom(),i=t.dom();return n!==i&&n.contains(i)},Ri=function(e){return ai.fromDom(e.dom().ownerDocument)},Di=function(e){return ai.fromDom(e.dom().ownerDocument.defaultView)},Ui=function(e){return Z.from(e.dom().parentNode).map(ai.fromDom)},Ti=function(e){return Z.from(e.dom().previousSibling).map(ai.fromDom)},Wi=function(e){return Z.from(e.dom().nextSibling).map(ai.fromDom)},Ei=function(e){return t=Qi(e,Ti),(n=H.call(t,0)).reverse(),n;var t,n},Hi=function(e){return Qi(e,Wi)},Oi=function(e){return Y(e.dom().childNodes,ai.fromDom)},Li=function(e,t){var n=e.dom().childNodes;return Z.from(n[t]).map(ai.fromDom)},Vi=function(e){return Li(e,0)},Yi=function(e){return Li(e,e.dom().childNodes.length-1)},Mi=(Gi("element","offset"),oi.detect().browser),_i=function(e){return J(e,Ii)},Ki={getPos:function(e,t,n){var i,o,r,a=0,s=0,g=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===xi(ai.fromDom(e),"position"))return{x:a=(o=t.getBoundingClientRect()).left+(g.documentElement.scrollLeft||e.scrollLeft)-g.documentElement.clientLeft,y:s=o.top+(g.documentElement.scrollTop||e.scrollTop)-g.documentElement.clientTop};for(i=t;i&&i!==n&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!==n&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode;s+=(r=ai.fromDom(t),Mi.isFirefox()&&"table"===ci(r)?_i(Oi(r)).filter(function(e){return"caption"===ci(e)}).bind(function(e){return _i(Hi(e)).map(function(t){var n=t.dom().offsetTop,i=e.dom().offsetTop,o=e.dom().offsetHeight;return n<=i?-o:0})}).getOr(0):0)}return{x:a,y:s}}},zi={},Ji={exports:zi};Sn=zi,Xn=Ji,Zn=void 0,function(e){"object"==typeof Sn&&void 0!==Xn?Xn.exports=e():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}(function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var g="function"==typeof Zn&&Zn;if(!s&&g)return g(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof Zn&&Zn,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i,o,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function g(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(Db){try{return i.call(null,e,0)}catch(Db){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(Db){i=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(Db){o=s}}();var l,c=[],u=!1,I=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):I=-1,c.length&&C())}function C(){if(!u){var e=g(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++I<t;)l&&l[I].run();I=-1,t=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(Db){try{return o.call(null,e)}catch(Db){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function A(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||g(C)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=A,r.addListener=A,r.once=A,r.off=A,r.removeListener=A,r.removeAllListeners=A,r.emit=A,r.prependListener=A,r.prependOnceListener=A,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var i=setTimeout;function o(){}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(Db){return void g(t.promise,Db)}s(t.promise,i)}else(1===e._state?s:g)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(Db){g(e,Db)}var i,o}function g(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,g(t,e))})}catch(o){if(n)return;n=!0,g(t,o)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new c(e,t,n)),n},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){if(0===t.length)return e([]);var i=t.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var g=s.then;if("function"==typeof g)return void g.call(s,function(e){r(a,e)},n)}t[a]=s,0==--i&&e(t)}catch(o){n(o)}}for(var a=0;a<t.length;a++)r(a,t[a])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},r._immediateFn="function"==typeof e?function(t){e(t)}:function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=r:n.Promise||(n.Promise=r)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,i){var o=e("process/browser.js").nextTick,r=Function.prototype.apply,a=Array.prototype.slice,s={},g=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=g++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,o(function(){s[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var i=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)});var Pi=Ji.exports.boltExport,ji=function(t){var n=Z.none(),i=[],o=function(e){r()?a(e):i.push(e)},r=function(){return n.isSome()},a=function(t){n.each(function(n){e.setTimeout(function(){t(n)},0)})};return t(function(e){n=Z.some(e),M(i,a),i=[]}),{get:o,map:function(e){return ji(function(t){o(function(n){t(e(n))})})},isReady:r}},$i={nu:ji,pure:function(e){return ji(function(t){t(e)})}},qi=function(t){e.setTimeout(function(){throw t},0)},eo=function(e){var t=function(t){e().then(t,qi)};return{map:function(t){return eo(function(){return e().then(t)})},bind:function(t){return eo(function(){return e().then(function(e){return t(e).toPromise()})})},anonBind:function(t){return eo(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return $i.nu(t)},toCached:function(){var t=null;return eo(function(){return null===t&&(t=e()),t})},toPromise:e,get:t}},to={nu:function(e){return eo(function(){return new Pi(e)})},pure:function(e){return eo(function(){return Pi.resolve(e)})}},no=function(e){return t=e,(0,to.nu)(function(e){var n=[],i=0;0===t.length?e([]):M(t,function(o,r){var a;o.get((a=r,function(o){n[a]=o,++i>=t.length&&e(n)}))})});var t},io=function(e){return{is:function(t){return e===t},isValue:F,isError:x,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:function(t){return io(e)},orThunk:function(t){return io(e)},fold:function(t,n){return n(e)},map:function(t){return io(t(e))},mapError:function(t){return io(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return Z.some(e)}}},oo=function(e){return{is:x,isValue:x,isError:F,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return oo(e)},mapError:function(t){return oo(t(e))},each:t,bind:function(t){return oo(e)},exists:x,forall:F,toOption:Z.none}},ro={value:io,error:oo,fromOption:function(e,t){return e.fold(function(){return oo(t)},io)}};function ao(e,t){var n=e,i=function(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!==t){if(r=e[i])return r;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(r=a[i])return r}}};this.current=function(){return n},this.next=function(e){return n=i(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=i(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,i,o){var r,a,s;if(e){if(r=e.previousSibling,t&&r===t)return;if(r){if(!o)for(s=r[n];s;s=s[n])if(!s[n])return s;return r}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var so,go,lo,co=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},i=0,o=e.length;i<o;i++){var r=e[i];n[String(r)]=t(r,i)}return n}(e,i(!0))).hasOwnProperty(ci(n))}},uo=co(["h1","h2","h3","h4","h5","h6"]),Io=co(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Co=function(e){return Ii(e)&&!Io(e)},ho=function(e){return Ii(e)&&"br"===ci(e)},Ao=co(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),fo=co(["ul","ol","dl"]),mo=co(["li","dd","dt"]),po=co(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),bo=co(["thead","tbody","tfoot"]),Bo=co(["td","th"]),vo=co(["pre","script","textarea","style"]),yo=function(e){return function(t){return!!t&&t.nodeType===e}},xo=yo(1),Fo=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,i;if(e&&e.nodeType)for(i=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(i===t[n])return!0;return!1}},Go=function(e){return function(t){if(xo(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Qo=yo(3),wo=yo(8),So=yo(9),Xo=yo(11),Zo=Fo("br"),No=Go("true"),ko=Go("false"),Ro={isText:Qo,isElement:xo,isComment:wo,isDocument:So,isDocumentFragment:Xo,isBr:Zo,isContentEditableTrue:No,isContentEditableFalse:ko,isRestrictedNode:function(e){return!!e&&!Object.getPrototypeOf(e)},matchNodeNames:Fo,hasPropValue:function(e,t){return function(n){return xo(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return xo(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return xo(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var i;if(xo(t))for(i=0;i<n.length;i++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[i])return!0}return!1}},isBogus:function(e){return xo(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return xo(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return xo(e)&&"TABLE"===e.tagName}},Do=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Uo=function(e,t){var n,i=t.childNodes;if(!Ro.isElement(t)||!Do(t)){for(n=i.length-1;0<=n;n--)Uo(e,i[n]);if(!1===Ro.isDocument(t)){if(Ro.isText(t)&&0<t.nodeValue.length){var o=Pt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<o)return;if(0===o&&(r=t).previousSibling&&"SPAN"===r.previousSibling.nodeName&&r.nextSibling&&"SPAN"===r.nextSibling.nodeName)return}else if(Ro.isElement(t)&&(1===(i=t.childNodes).length&&Do(i[0])&&t.parentNode.insertBefore(i[0],t),i.length||po(ai.fromDom(t))))return;e.remove(t)}var r;return t}},To={trimNode:Uo},Wo=Pt.makeMap,Eo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ho=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oo=/[<>&\"\']/g,Lo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Vo={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};go={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},lo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Yo=function(e,t){var n,i,o,r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),go[i]||(r[i]=o="&"+e[n+1]+";",r[o]=i);return r}};so=Yo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Mo=function(e,t){return e.replace(t?Eo:Ho,function(e){return go[e]||e})},_o=function(e,t){return e.replace(t?Eo:Ho,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":go[e]||"&#"+e.charCodeAt(0)+";"})},Ko=function(e,t,n){return n=n||so,e.replace(t?Eo:Ho,function(e){return go[e]||n[e]||e})},zo={encodeRaw:Mo,encodeAllRaw:function(e){return(""+e).replace(Oo,function(e){return go[e]||e})},encodeNumeric:_o,encodeNamed:Ko,getEncodeFunc:function(e,t){var n=Yo(t)||so,i=Wo(e.replace(/\+/g,","));return i.named&&i.numeric?function(e,t){return e.replace(t?Eo:Ho,function(e){return void 0!==go[e]?go[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:i.named?t?function(e,t){return Ko(e,t,n)}:Ko:i.numeric?_o:Mo},decode:function(e){return e.replace(Lo,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Vo[t]||String.fromCharCode(t):lo[e]||so[e]||(n=e,(i=ai.fromTag("div").dom()).innerHTML=n,i.textContent||i.innerText||n);var n,i})}},Jo={},Po={},jo=Pt.makeMap,$o=Pt.each,qo=Pt.extend,er=Pt.explode,tr=Pt.inArray,nr=function(e,t){return(e=Pt.trim(e))?e.split(t||" "):[]},ir=function(e){var t,n,i,o,r,a,s={},g=function(e,n,i){var o,r,a,g=function(e,t){var n,i,o={};for(n=0,i=e.length;n<i;n++)o[e[n]]=t||{};return o};for(n=n||"","string"==typeof(i=i||[])&&(i=nr(i)),o=(e=nr(e)).length;o--;)a={attributes:g(r=nr([t,n].join(" "))),attributesOrder:r,children:g(i,Po)},s[e[o]]=a},l=function(e,t){var n,i,o,r;for(n=(e=nr(e)).length,t=nr(t);n--;)for(i=s[e[n]],o=0,r=t.length;o<r;o++)i.attributes[t[o]]={},i.attributesOrder.push(t[o])};return Jo[e]?Jo[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",i=[i,a="acronym applet basefont big font strike tt"].join(" "),$o(nr(a),function(e){g(e,"",i)}),n=[n,r="center dir isindex noframes"].join(" "),o=[n,i].join(" "),$o(nr(r),function(e){g(e,"",o)})),o=o||[n,i].join(" "),g("html","manifest","head body"),g("head","","base command link meta noscript script style title"),g("title hr noscript br"),g("base","href target"),g("link","href rel media hreflang type sizes hreflang"),g("meta","name http-equiv content charset"),g("style","media type scoped"),g("script","src async defer type charset"),g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),g("address dt dd div caption","",o),g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),g("blockquote","cite",o),g("ol","reversed start type","li"),g("ul","","li"),g("li","value",o),g("dl","","dt dd"),g("a","href target rel media hreflang type",i),g("q","cite",i),g("ins del","cite datetime",o),g("img","src sizes srcset alt usemap ismap width height"),g("iframe","src name width height",o),g("embed","src type width height"),g("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),g("param","name value"),g("map","name",[o,"area"].join(" ")),g("area","alt coords shape href target rel media hreflang type"),g("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),g("colgroup","span","col"),g("col","span"),g("tbody thead tfoot","","tr"),g("tr","","td th"),g("td","colspan rowspan headers",o),g("th","colspan rowspan headers scope abbr",o),g("form","accept-charset action autocomplete enctype method name novalidate target",o),g("fieldset","disabled form name",[o,"legend"].join(" ")),g("label","form for",i),g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:i),g("select","disabled form multiple name required size","option optgroup"),g("optgroup","disabled label","option"),g("option","disabled label selected value"),g("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),g("menu","type label",[o,"li"].join(" ")),g("noscript","",o),"html4"!==e&&(g("wbr"),g("ruby","",[i,"rt rp"].join(" ")),g("figcaption","",o),g("mark rt rp summary bdi","",i),g("canvas","width height",o),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[i,"option"].join(" ")),g("article section nav aside main header footer","",o),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[o,"figcaption"].join(" ")),g("time","datetime",i),g("dialog","open",o),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",i),g("progress","value max",i),g("meter","value min max low high optimum",i),g("details","open",[o,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen")),$o(nr("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Jo[e]=s)},or=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),$o(e,function(e,i){n[i]=n[i.toUpperCase()]="map"===t?jo(e,/[, ]/):er(e,/[, ]/)})),n};function rr(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,C={},h={},A=[],f={},m={},p=function(t,n,i){var o=e[t];return o?o=jo(o,/[, ]/,jo(o.toUpperCase(),/[, ]/)):(o=Jo[t])||(o=jo(n," ",jo(n.toUpperCase()," ")),o=qo(o,i),Jo[t]=o),o};i=ir((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=or(e.valid_styles),n=or(e.invalid_styles,"map"),g=or(e.valid_classes,"map"),o=p("whitespace_elements","pre script noscript style textarea video audio iframe object code"),r=p("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=p("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=p("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=p("non_empty_elements","td th iframe video audio object script pre code",a),u=p("move_caret_before_on_enter_elements","table",c),I=p("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),l=p("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",I),d=p("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),$o((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){m[e]=new RegExp("</"+e+"[^>]*>","gi")});var b=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},B=function(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,h,f,m,p,B,v,y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(e)for(e=nr(e,","),C["@"]&&(m=C["@"].attributes,p=C["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(r=y.exec(e[t])){if(l=r[2],f=r[3],g=r[5],a={attributes:I={},attributesOrder:d=[]},"#"===(h=r[1])&&(a.paddEmpty=!0),"-"===h&&(a.removeEmpty=!0),"!"===r[4]&&(a.removeEmptyAttrs=!0),m){for(B in m)I[B]=m[B];d.push.apply(d,p)}if(g)for(i=0,o=(g=nr(g,"|")).length;i<o;i++)if(r=x.exec(g[i])){if(s={},u=r[1],c=r[2].replace(/[\\:]:/g,":"),h=r[3],v=r[4],"!"===u&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===u){delete I[c],d.splice(tr(d,c),1);continue}h&&("="===h&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:v}),s.defaultValue=v),":"===h&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:v}),s.forcedValue=v),"<"===h&&(s.validValues=jo(v,"?"))),F.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=b(c),a.attributePatterns.push(s)):(I[c]||d.push(c),I[c]=s)}m||"@"!==l||(m=I,p=d),f&&(a.outputName=l,C[f]=a),F.test(l)?(a.pattern=b(l),A.push(a)):C[l]=a}},v=function(e){C={},A=[],B(e),$o(i,function(e,t){h[t]=e.children})},y=function(e){var t=/^(~)?(.+)$/;e&&(Jo.text_block_elements=Jo.block_elements=null,$o(nr(e,","),function(e){var n=t.exec(e),i="~"===n[1],o=i?"span":"div",r=n[2];if(h[r]=h[o],f[r]=o,i||(l[r.toUpperCase()]={},l[r]={}),!C[r]){var a=C[o];delete(a=qo({},a)).removeEmptyAttrs,delete a.removeEmpty,C[r]=a}$o(h,function(e,t){e[o]&&(h[t]=e=qo({},h[t]),e[r]=e[o])})}))},x=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Jo[e.schema]=null,t&&$o(nr(t,","),function(e){var t,i,o=n.exec(e);o&&(t=(i=o[1])?h[o[2]]:h[o[2]]={"#comment":{}},t=h[o[2]],$o(nr(o[3],"|"),function(e){"-"===i?delete t[e]:t[e]={}}))})},F=function(e){var t,n=C[e];if(n)return n;for(t=A.length;t--;)if((n=A[t]).pattern.test(e))return n};return e.valid_elements?v(e.valid_elements):($o(i,function(e,t){C[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},h[t]=e.children}),"html5"!==e.schema&&$o(nr("strong/b em/i"),function(e){e=nr(e,"/"),C[e[1]].outputName=e[0]}),$o(nr("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){C[e]&&(C[e].removeEmpty=!0)}),$o(nr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){C[e].paddEmpty=!0}),$o(nr("span"),function(e){C[e].removeEmptyAttrs=!0})),y(e.custom_elements),x(e.valid_children),B(e.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),$o({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){C[t]&&(C[t].parentsRequired=nr(e))}),e.invalid_elements&&$o(er(e.invalid_elements),function(e){C[e]&&delete C[e]}),F("span")||B("span[!data-mce-type|*]"),{children:h,elements:C,getValidStyles:function(){return t},getValidClasses:function(){return g},getBlockElements:function(){return l},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return I},getTextInlineElements:function(){return d},getBoolAttrs:function(){return s},getElementRule:F,getSelfClosingElements:function(){return r},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return u},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return m},isValidChild:function(e,t){var n=h[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,i,o=F(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},getCustomElements:function(){return f},addValidElements:B,setValidElements:v,addCustomElements:y,addValidChildren:x}}var ar=function(e,t,n,i){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(i)};function sr(e,t){var n,i,o,r,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,g=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,c={},u="\ufeff";for(e=e||{},t&&(o=t.getValidStyles(),r=t.getInvalidStyles()),i=("\\\" \\' \\; \\: ; : "+u).split(" "),n=0;n<i.length;n++)c[i[n]]=u+n,c[u+n]=i[n];return{toHex:function(e){return e.replace(a,ar)},parse:function(t){var i,o,r,I,d,C,h,A={},f=e.url_converter,m=e.url_converter_scope||this,p=function(e,t,i){var o,r,a,s;if((o=A[e+"-top"+t])&&(r=A[e+"-right"+t])&&(a=A[e+"-bottom"+t])&&(s=A[e+"-left"+t])){var g=[o,r,a,s];for(n=g.length-1;n--&&g[n]===g[n+1];);-1<n&&i||(A[e+t]=-1===n?g[0]:g.join(" "),delete A[e+"-top"+t],delete A[e+"-right"+t],delete A[e+"-bottom"+t],delete A[e+"-left"+t])}},b=function(e){var t,n=A[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return A[e]=n[0],!0}},B=function(e){return I=!0,c[e]},v=function(e,t){return I&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},y=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},x=function(e){return e.replace(/\\[0-9a-f]+/gi,y)},F=function(t,n,i,o,r,a){if(r=r||a)return"'"+(r=v(r)).replace(/\'/g,"\\'")+"'";if(n=v(n||i||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return f&&(n=f.call(m,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,B).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,B)});i=g.exec(t);)if(g.lastIndex=i.index+i[0].length,o=i[1].replace(l,"").toLowerCase(),r=i[2].replace(l,""),o&&r){if(o=x(o),r=x(r),-1!==o.indexOf(u)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===o&&"700"===r?r="bold":"color"!==o&&"background-color"!==o||(r=r.toLowerCase()),r=(r=r.replace(a,ar)).replace(s,F),A[o]=I?v(r,!0):r}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),C="border-style",h="border-color",b(d="border-width")&&b(C)&&b(h)&&(A.border=A[d]+" "+A[C]+" "+A[h],delete A[d],delete A[C],delete A[h]),"medium none"===A.border&&delete A.border,"none"===A["border-image"]&&delete A["border-image"]}return A},serialize:function(e,t){var n,i,a,s,g="",l=function(t){var n,i,r,a;if(n=o[t])for(i=0,r=n.length;i<r;i++)(a=e[t=n[i]])&&(g+=(0<g.length?" ":"")+t+": "+a+";")};if(t&&o)l("*"),l(t);else for(n in e)!(i=e[n])||r&&(a=n,s=void 0,(s=r["*"])&&s[a]||(s=r[t])&&s[a])||(g+=(0<g.length?" ":"")+n+": "+i+";");return g}}}var gr,lr=Pt.each,cr=Pt.grep,ur=de.ie,Ir=/^([a-z0-9],?)+$/i,dr=/^[ \t\r\n]*$/,Cr=function(e,t,n){var i={},o=t.keep_values,r={set:function(e,i,o){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||n(),i,o,e[0])),e.attr("data-mce-"+o,i).attr(o,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return i={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},o&&(i.href=i.src=r),i},hr=function(e,t){var n=t.attr("style"),i=e.serialize(e.parse(n),t[0].nodeName);i||(i=null),t.attr("data-mce-style",i)},Ar=function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!==i||i!==n&&e.nodeValue.length)&&(o++,n=i);return o};function fr(t,r){var a,s=this;void 0===r&&(r={});var g={},l=e.window,c={},u=0,I=function(t,r){void 0===r&&(r={});var a,s=0,g={};a=r.maxLoadTime||5e3;var l=function(e){t.getElementsByTagName("head")[0].appendChild(e)},c=function(n,i,o){var c,u,I,d,C=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},h=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},A=function(e,t){e()||((new Date).getTime()-I<a?me.setTimeout(t):h())},f=function(){A(function(){for(var e,n,i=t.styleSheets,o=i.length;o--;)if((n=(e=i[o]).ownerNode?e.ownerNode:e.owningElement)&&n.id===c.id)return C(),!0},f)},m=function(){A(function(){try{var e=u.sheet.cssRules;return C(),!!e}catch(i){}},m)};if(n=Pt._addCacheSuffix(n),g[n]?d=g[n]:g[n]=d={passed:[],failed:[]},i&&d.passed.push(i),o&&d.failed.push(o),1!==d.status)if(2!==d.status)if(3!==d.status){if(d.status=1,(c=t.createElement("link")).rel="stylesheet",c.type="text/css",c.id="u"+s++,c.async=!1,c.defer=!1,I=(new Date).getTime(),r.contentCssCors&&(c.crossOrigin="anonymous"),"onload"in c&&!((p=e.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(p[1],10)<536))c.onload=f,c.onerror=h;else{if(0<e.navigator.userAgent.indexOf("Firefox"))return(u=t.createElement("style")).textContent='@import "'+n+'"',m(),void l(u);f()}var p;l(c),c.href=n}else h();else C()},u=function(e){return to.nu(function(t){c(e,n(t,i(ro.value(e))),n(t,i(ro.error(e))))})},I=function(e){return e.fold(o,o)};return{load:c,loadAll:function(e,t,n){no(Y(e,u)).get(function(e){var i=_(e,function(e){return e.isValue()});0<i.fail.length?n(i.fail.map(I)):t(i.pass.map(I))})}}}(t,{contentCssCors:r.contentCssCors}),d=[],C=r.schema?r.schema:rr({}),h=sr({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),A=r.ownEvents?new Qe(r.proxy):Qe.Event,f=C.getBlockElements(),m=An.overrideDefaults(function(){return{context:t,element:M.getRoot()}}),p=function(e){if(e&&t&&"string"==typeof e){var n=t.getElementById(e);return n&&n.id!==e?t.getElementsByName(e)[1]:n}return e},b=function(e){return"string"==typeof e&&(e=p(e)),m(e)},B=function(e,t,n){var i,o,r=b(e);return r.length&&(o=(i=a[t])&&i.get?i.get(r,t):r.attr(t)),void 0===o&&(o=n||""),o},v=function(e){var t=p(e);return t?t.attributes:[]},y=function(e,t,n){var i,o;""===n&&(n=null);var s=b(e);i=s.attr(t),s.length&&((o=a[t])&&o.set?o.set(s,n,t):s.attr(t,n),i!==n&&r.onSetAttrib&&r.onSetAttrib({attrElm:s,attrName:t,attrValue:n}))},x=function(){return r.root_element||t.body},F=function(e,n){return Ki.getPos(t.body,p(e),n)},G=function(e,t,n){var i=b(e);return n?i.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=de.ie&&de.ie<12?"styleFloat":"cssFloat"),i[0]&&i[0].style?i[0].style[t]:void 0)},Q=function(e){var t,n;return e=p(e),t=G(e,"width"),n=G(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},w=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Ir.test(t)){var i=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase();for(n=i.length-1;0<=n;n--)if(i[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var r=Array.isArray(e)?e:[e];return 0<Qt(t,r[0].ownerDocument||r[0],null,r).length},S=function(e,t,n,i){var o,r=[],a=p(e);for(i=void 0===i,n=n||("BODY"!==x().nodeName?x().parentNode:null),Pt.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return w(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!i)return[a];r.push(a)}a=a.parentNode}return i?r:null},X=function(e,t,n){var i=t;if(e)for("string"==typeof t&&(i=function(e){return w(e,t)}),e=e[n];e;e=e[n])if("function"==typeof i&&i(e))return e;return null},Z=function(e,t,n){var i,o="string"==typeof e?p(e):e;return!!o&&(Pt.isArray(o)&&(o.length||0===o.length)?(i=[],lr(o,function(e,o){e&&("string"==typeof e&&(e=p(e)),i.push(t.call(n,e,o)))}),i):t.call(n||s,o))},N=function(e,t){b(e).each(function(e,n){lr(t,function(e,t){y(n,t,e)})})},k=function(e,t){var n=b(e);ur?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(f){An("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},R=function(e,n,i,o,r){return Z(e,function(e){var a="string"==typeof n?t.createElement(n):n;return N(a,i),o&&("string"!=typeof o&&o.nodeType?a.appendChild(o):"string"==typeof o&&k(a,o)),r?a:e.appendChild(a)})},D=function(e,n,i){return R(t.createElement(e),e,n,i,!0)},U=zo.encodeAllRaw,T=function(e,t){var n=b(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},W=function(e,t,n){b(e).toggleClass(t,n).each(function(){""===this.className&&An(this).attr("class",null)})},E=function(e,t,n){return Z(t,function(t){return Pt.is(t,"array")&&(e=e.cloneNode(!0)),n&&lr(cr(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},H=function(){return t.createRange()},O=function(e,n,i,o){if(Pt.isArray(e)){for(var a=e.length;a--;)e[a]=O(e[a],n,i,o);return e}return!r.collect||e!==t&&e!==l||d.push([e,n,i,o]),A.bind(e,n,i,o||M)},L=function(e,n,i){var o;if(Pt.isArray(e)){for(o=e.length;o--;)e[o]=L(e[o],n,i);return e}if(d&&(e===t||e===l))for(o=d.length;o--;){var r=d[o];e!==r[0]||n&&n!==r[1]||i&&i!==r[2]||A.unbind(r[0],r[1],r[2])}return A.unbind(e,n,i)},V=function(e){if(e&&Ro.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},M={doc:t,settings:r,win:l,files:c,stdMode:!0,boxModel:!0,styleSheetLoader:I,boundEvents:d,styles:h,schema:C,events:A,isBlock:function(e){if("string"==typeof e)return!!f[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!f[e.nodeName])}return!1},$:m,$$:b,root:null,clone:function(e,n){if(!ur||1!==e.nodeType||n)return e.cloneNode(n);if(!n){var i=t.createElement(e.nodeName);return lr(v(e),function(t){y(i,t.nodeName,B(e,t.nodeName))}),i}return null},getRoot:x,getViewPort:function(e){var t=e||l,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=p(e),t=F(e),n=Q(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:Q,getParent:function(e,t,n){var i=S(e,t,n,!1);return i&&0<i.length?i[0]:null},getParents:S,get:p,getNext:function(e,t){return X(e,t,"nextSibling")},getPrev:function(e,t){return X(e,t,"previousSibling")},select:function(e,n){return Qt(e,p(n)||r.root_element||t,[])},is:w,add:R,create:D,createHTML:function(e,t,n){var i,o="";for(i in o+="<"+e,t)t.hasOwnProperty(i)&&null!=t[i]&&(o+=" "+i+'="'+U(t[i])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var n,i=t.createElement("div"),o=t.createDocumentFragment();for(e&&(i.innerHTML=e);n=i.firstChild;)o.appendChild(n);return o},remove:T,setStyle:function(e,t,n){var i=b(e).css(t,n);r.update_styles&&hr(h,i)},getStyle:G,setStyles:function(e,t){var n=b(e).css(t);r.update_styles&&hr(h,n)},removeAllAttribs:function(e){return Z(e,function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))})},setAttrib:y,setAttribs:N,getAttrib:B,getPos:F,parseStyle:function(e){return h.parse(e)},serializeStyle:function(e,t){return h.serialize(e,t)},addStyle:function(n){var i,o;if(M!==fr.DOM&&t===e.document){if(g[n])return;g[n]=!0}(o=t.getElementById("mceDefaultStyles"))||((o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css",(i=t.getElementsByTagName("head")[0]).firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(t.createTextNode(n))},loadCSS:function(n){var i;M===fr.DOM||t!==e.document?(n||(n=""),i=t.getElementsByTagName("head")[0],lr(n.split(","),function(e){var t;e=Pt._addCacheSuffix(e),c[e]||(c[e]=!0,t=D("link",{rel:"stylesheet",href:e}),i.appendChild(t))})):fr.DOM.loadCSS(n)},addClass:function(e,t){b(e).addClass(t)},removeClass:function(e,t){W(e,t,!1)},hasClass:function(e,t){return b(e).hasClass(t)},toggleClass:W,show:function(e){b(e).show()},hide:function(e){b(e).hide()},isHidden:function(e){return"none"===b(e).css("display")},uniqueId:function(e){return(e||"mce_")+u++},setHTML:k,getOuterHTML:function(e){var t="string"==typeof e?p(e):e;return Ro.isElement(t)?t.outerHTML:An("<div></div>").append(An(t).clone()).html()},setOuterHTML:function(e,t){b(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}T(An(this).html(t),!0)})},decode:zo.decode,encode:U,insertAfter:function(e,t){var n=p(t);return Z(e,function(e){var t,i;return t=n.parentNode,(i=n.nextSibling)?t.insertBefore(e,i):t.appendChild(e),e})},replace:E,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=D(t),lr(v(e),function(t){y(n,t.nodeName,B(e,t.nodeName))}),E(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!==n;)n=n.parentNode;if(i===n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return h.toHex(Pt.trim(e))},run:Z,getAttribs:v,isEmpty:function(e,t){var n,i,o,r,a,s,g=0;if(e=e.firstChild){a=new ao(e,e.parentNode),t=t||(C?C.getNonEmptyElements():null),r=C?C.getWhiteSpaceElements():{};do{if(o=e.nodeType,Ro.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=a.next("all"===l);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){g++,e=a.next();continue}return!1}for(n=(i=v(e)).length;n--;)if("name"===(s=i[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===o)return!1;if(3===o&&!dr.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&r[e.parentNode.nodeName]&&dr.test(e.nodeValue))return!1;e=a.next()}while(e)}return g<=1},createRng:H,nodeIndex:Ar,split:function(e,t,n){var i,o,r,a=H();if(e&&t)return a.setStart(e.parentNode,Ar(e)),a.setEnd(t.parentNode,Ar(t)),i=a.extractContents(),(a=H()).setStart(t.parentNode,Ar(t)+1),a.setEnd(e.parentNode,Ar(e)+1),o=a.extractContents(),(r=e.parentNode).insertBefore(To.trimNode(M,i),e),r.insertBefore(n||t,e),r.insertBefore(To.trimNode(M,o),e),T(e),n||t},bind:O,unbind:L,fire:function(e,t,n){return A.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=x(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(d)for(var e=d.length;e--;){var t=d[e];A.unbind(t[0],t[1],t[2])}Qt.setDocument&&Qt.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return a=Cr(h,r,function(){return M}),M}(gr=fr||(fr={})).DOM=gr(e.document),gr.nodeIndex=Ar;var mr=fr,pr=mr.DOM,br=Pt.each,Br=Pt.grep,vr=function(e){return"function"==typeof e},yr=function(){var t={},n=[],i={},o=[],r=0;this.isDone=function(e){return 2===t[e]},this.markDone=function(e){t[e]=2},this.add=this.load=function(e,o,r,a){void 0===t[e]&&(n.push(e),t[e]=0),o&&(i[e]||(i[e]=[]),i[e].push({success:o,failure:a,scope:r||this}))},this.remove=function(e){delete t[e],delete i[e]},this.loadQueue=function(e,t,i){this.loadScripts(n,e,t,i)},this.loadScripts=function(n,a,s,g){var l,c=[],u=function(e,t){br(i[t],function(t){vr(t[e])&&t[e].call(t.scope)}),i[t]=void 0};o.push({success:a,failure:g,scope:s||this}),(l=function(){var i=Br(n);if(n.length=0,br(i,function(n){var i,o,a,s,g,I;2!==t[n]?3!==t[n]?1!==t[n]&&(t[n]=1,r++,i=n,o=function(){t[n]=2,r--,u("success",n),l()},a=function(){t[n]=3,r--,c.push(n),u("failure",n),l()},g=(I=pr).uniqueId(),(s=e.document.createElement("script")).id=g,s.type="text/javascript",s.src=Pt._addCacheSuffix(i),s.onload=function(){I.remove(g),s&&(s.onreadystatechange=s.onload=s=null),o()},s.onerror=function(){vr(a)?a():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+i)},(e.document.getElementsByTagName("head")[0]||e.document.body).appendChild(s)):u("failure",n):u("success",n)}),!r){var a=o.slice(0);o.length=0,br(a,function(e){0===c.length?vr(e.success)&&e.success.call(e.scope):vr(e.failure)&&e.failure.call(e.scope,c)})}})()}};yr.ScriptLoader=new yr;var xr,Fr=Pt.each;function Gr(){var e=this,t=[],n={},i={},o=[],r=function(e){var t;return i[e]&&(t=i[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},s=function(e,t,n,i){var o=r(e);Fr(o,function(e){var n=a(t,e);g(n.resource,n,void 0,void 0)}),n&&n.call(i||yr)},g=function(e,t,o,r,a){if(!n[e]){var g="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==g.indexOf("/")&&-1===g.indexOf("://")&&(g=Gr.baseURL+"/"+g),n[e]=g.substring(0,g.lastIndexOf("/")),i[e]?s(e,t,o,r):yr.ScriptLoader.add(g,function(){return s(e,t,o,r)},r,a)}};return{items:t,urls:n,lookup:i,_listeners:o,get:function(e){return i[e]?i[e].instance:void 0},dependencies:r,requireLangPack:function(e,t){var i=Gr.language;if(i&&!1!==Gr.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1===t.indexOf(","+i+","))return;yr.ScriptLoader.add(n[e]+"/langs/"+i+".js")}},add:function(e,n,r){t.push(n),i[e]={instance:n,dependencies:r};var a=_(o,function(t){return t.name===e});return o=a.fail,Fr(a.pass,function(e){e.callback()}),n},remove:function(e){delete n[e],delete i[e]},createUrl:a,addComponents:function(t,n){var i=e.urls[t];Fr(n,function(e){yr.ScriptLoader.add(i+"/"+e)})},load:g,waitFor:function(e,t){i.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}(xr=Gr||(Gr={})).PluginManager=xr(),xr.ThemeManager=xr();var Qr=function(e,t){Ui(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},wr=function(e,t){Wi(e).fold(function(){Ui(e).each(function(e){Xr(e,t)})},function(e){Qr(e,t)})},Sr=function(e,t){Vi(e).fold(function(){Xr(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},Xr=function(e,t){e.dom().appendChild(t.dom())},Zr=function(e,t){M(t,function(t){Xr(e,t)})},Nr=function(e){e.dom().textContent="",M(Oi(e),function(e){kr(e)})},kr=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Rr=function(e){var t,n=Oi(e);0<n.length&&(t=e,M(n,function(e){Qr(t,e)})),kr(e)},Dr=function(t,n){var i=null;return{cancel:function(){null!==i&&(e.clearTimeout(i),i=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null===i&&(i=e.setTimeout(function(){t.apply(null,o),i=null},n))}}},Ur=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ur(n())}}},Tr=function(e,t){var n=vi(e,t);return void 0===n||""===n?[]:n.split(" ")},Wr=function(e){return void 0!==e.dom().classList},Er=function(e,t){Wr(e)?e.dom().classList.add(t):function(e,t){return i=t,o=Tr(n=e,"class").concat([i]),bi(n,"class",o.join(" ")),!0;var n,i,o}(e,t)},Hr=function(e,t){return Wr(e)&&e.dom().classList.contains(t)},Or=function(e,t){var n=[];return M(Oi(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Or(e,t))}),n},Lr=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),Zi(r)?[]:Y(r.querySelectorAll(i),ai.fromDom);var i,o,r};function Vr(e,t,n,i,o){return e(n,i)?Z.some(n):W(o)&&o(n)?Z.none():t(n,i,o)}var Yr,Mr=function(e,t,n){for(var o=e.dom(),r=W(n)?n:i(!1);o.parentNode;){var a=ai.fromDom(o=o.parentNode);if(t(a))return Z.some(a);if(r(a))break}return Z.none()},_r=function(e,t,n){return Vr(function(e,t){return t(e)},Mr,e,t,n)},Kr=function(e,t,n){return Mr(e,function(e){return Xi(e,t)},n)},zr=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),Zi(r)?Z.none():Z.from(r.querySelector(i)).map(ai.fromDom);var i,o,r},Jr=function(e,t,n){return Vr(Xi,Kr,e,t,n)},Pr=i("mce-annotation"),jr=i("data-mce-annotation"),$r=i("data-mce-annotation-uid"),qr=function(e,t){var n=e.selection.getRng(),i=ai.fromDom(n.startContainer),o=ai.fromDom(e.getBody()),r=t.fold(function(){return"."+Pr()},function(e){return"["+jr()+'="'+e+'"]'}),a=Li(i,n.startOffset).getOr(i),s=Jr(a,r,function(e){return Ni(e,o)}),g=function(e,t){return n=t,(i=e.dom())&&i.hasAttribute&&i.hasAttribute(n)?Z.some(vi(e,t)):Z.none();var n,i};return s.bind(function(t){return g(t,""+$r()).bind(function(n){return g(t,""+jr()).map(function(t){var i=ea(e,n);return{uid:n,name:t,elements:i}})})})},ea=function(e,t){var n=ai.fromDom(e.getBody());return Lr(n,"["+$r()+'="'+t+'"]')},ta=function(t,n){var i,o,r=Ur({}),a=function(e,t){s(e,function(e){return t(e),e})},s=function(e,t){var n=r.get(),i=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Ur(Z.none())});n[e]=i,r.set(n)},g=(i=function(){var e,n,i=r.get(),o=(e=Ci(i),(n=H.call(e,0)).sort(void 0),n);M(o,function(e){s(e,function(n){var i=n.previous.get();return qr(t,Z.some(e)).fold(function(){var t;i.isSome()&&(a(t=e,function(e){M(e.listeners,function(e){return e(!1,t)})}),n.previous.set(Z.none()))},function(e){var t,o,r,s=e.uid,g=e.name,l=e.elements;i.is(s)||(o=s,r=l,a(t=g,function(e){M(e.listeners,function(e){return e(!0,t,{uid:o,nodes:Y(r,function(e){return e.dom()})})})}),n.previous.set(Z.some(s)))}),{previous:n.previous,listeners:n.listeners}})})},o=null,{cancel:function(){null!==o&&(e.clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==o&&e.clearTimeout(o),o=e.setTimeout(function(){i.apply(null,t),o=null},30)}});return t.on("remove",function(){g.cancel()}),t.on("nodeChange",function(){g.throttle()}),{addListener:function(e,t){s(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},na=function(e,t){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){M(e,function(e){var n;(n=e,Z.from(n.attributes.map[jr()]).bind(t.lookup)).each(function(t){!1===t.persistent&&e.unwrap()})})})})},ia=0,oa=function(e,t){return ai.fromDom(e.dom().cloneNode(t))},ra=function(e){return oa(e,!1)},aa=function(e){return oa(e,!0)},sa=function(t,n){var i,o,r=Ri(t).dom(),a=ai.fromDom(r.createDocumentFragment()),s=(i=n,(o=(r||e.document).createElement("div")).innerHTML=i,Oi(ai.fromDom(o)));Zr(a,s),Nr(t),Xr(t,a)},ga="\ufeff",la=function(e){return e===ga},ca=ga,ua=function(e){return e.replace(new RegExp(ga,"g"),"")},Ia=Ro.isElement,da=Ro.isText,Ca=function(e){return da(e)&&(e=e.parentNode),Ia(e)&&e.hasAttribute("data-mce-caret")},ha=function(e){return da(e)&&la(e.data)},Aa=function(e){return Ca(e)||ha(e)},fa=function(e){return e.firstChild!==e.lastChild||!Ro.isBr(e.firstChild)},ma=function(e){var t=e.container();return!(!e||!Ro.isText(t))&&(t.data.charAt(e.offset())===ca||e.isAtStart()&&ha(t.previousSibling))},pa=function(e){var t=e.container();return!(!e||!Ro.isText(t))&&(t.data.charAt(e.offset()-1)===ca||e.isAtEnd()&&ha(t.nextSibling))},ba=function(e){return da(e)&&e.data[0]===ca},Ba=function(e){return da(e)&&e.data[e.data.length-1]===ca},va=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),Ro.isBogus(n=t[t.length-1])&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},ya=Ro.isContentEditableTrue,xa=Ro.isContentEditableFalse,Fa=Ro.isBr,Ga=Ro.isText,Qa=Ro.matchNodeNames("script style textarea"),wa=Ro.matchNodeNames("img input textarea hr iframe video audio object"),Sa=Ro.matchNodeNames("table"),Xa=Aa,Za=function(e){return!Xa(e)&&(Ga(e)?!Qa(e.parentNode):wa(e)||Fa(e)||Sa(e)||Na(e))},Na=function(e){return!1===(Ro.isElement(t=e)&&"true"===t.getAttribute("unselectable"))&&xa(e);var t},ka=function(e,t){return Za(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Na(e))return!1;if(ya(e))return!0}return!0}(e,t)},Ra=Math.round,Da=function(e){return e?{left:Ra(e.left),top:Ra(e.top),bottom:Ra(e.bottom),right:Ra(e.right),width:Ra(e.width),height:Ra(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ua=function(e,t){return e=Da(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Ta=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Wa=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Ta(t.top-e.bottom,e,t)},Ea=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Ta(t.bottom-e.top,e,t)},Ha=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Oa=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},La=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Va=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Ya=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Va.test(e)},Ma=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(!o.isSome())return Z.none();n.push(o.getOrDie())}return Z.some(t.apply(null,n))},_a=[].slice,Ka=Ro.isElement,za=Za,Ja=Ro.matchStyleValues("display","block table"),Pa=Ro.matchStyleValues("float","left right"),ja=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_a.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(Ka,za,y(Pa)),$a=y(Ro.matchStyleValues("white-space","pre pre-line pre-wrap")),qa=Ro.isText,es=Ro.isBr,ts=mr.nodeIndex,ns=La,is=function(e){return"createRange"in e?e.createRange():mr.DOM.createRng()},os=function(e){return e&&/[\r\n\t ]/.test(e)},rs=function(e){return!!e.setStart&&!!e.setEnd},as=function(e){var t,n=e.startContainer,i=e.startOffset;return!!(os(e.toString())&&$a(n.parentNode)&&Ro.isText(n)&&(t=n.data,os(t[i-1])||os(t[i+1])))},ss=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},gs=function(e){var t,n,i,o,r,a,s,g;return t=0<(n=e.getClientRects()).length?Da(n[0]):Da(e.getBoundingClientRect()),!rs(e)&&es(e)&&ss(t)?(r=(i=e).ownerDocument,a=is(r),s=r.createTextNode("\xa0"),(g=i.parentNode).insertBefore(s,i),a.setStart(s,0),a.setEnd(s,1),o=Da(a.getBoundingClientRect()),g.removeChild(s),o):ss(t)&&rs(e)?function(e){var t=e.endContainer,n=e.startOffset,i=e.endOffset;if(e.startContainer===t&&Ro.isText(t)&&0===n&&1===i){var o=e.cloneRange();return o.setEndAfter(t),gs(o)}return null}(e):t},ls=function(e,t){var n=Ua(e,t);return n.width=1,n.right=n.left+1,n},cs=function(e){var t,n,i=[],o=function(e){var t,n;0!==e.height&&(0<i.length&&(t=e).left===(n=i[i.length-1]).left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right||i.push(e))},r=function(e,t){var n=is(e.ownerDocument);if(t<e.data.length){if(Ya(e.data[t]))return i;if(Ya(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!as(n)))return o(ls(gs(n),!1)),i}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),as(n)||o(ls(gs(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),as(n)||o(ls(gs(n),!0)))};if(qa(e.container()))return r(e.container(),e.offset()),i;if(Ka(e.container()))if(e.isAtEnd())n=ns(e.container(),e.offset()),qa(n)&&r(n,n.data.length),ja(n)&&!es(n)&&o(ls(gs(n),!1));else{if(n=ns(e.container(),e.offset()),qa(n)&&r(n,0),ja(n)&&e.isAtEnd())return o(ls(gs(n),!1)),i;t=ns(e.container(),e.offset()-1),ja(t)&&!es(t)&&(Ja(t)||Ja(n)||!ja(n))&&o(ls(gs(t),!1)),ja(n)&&o(ls(gs(n),!0))}return i};function us(e,t,n){var o=function(){return n||(n=cs(us(e,t))),n};return{container:i(e),offset:i(t),toRange:function(){var n;return(n=is(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:function(){return 0<o().length},isAtStart:function(){return qa(e),0===t},isAtEnd:function(){return qa(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return ns(e,n?t-1:t)}}}(Yr=us||(us={})).fromRangeStart=function(e){return Yr(e.startContainer,e.startOffset)},Yr.fromRangeEnd=function(e){return Yr(e.endContainer,e.endOffset)},Yr.after=function(e){return Yr(e.parentNode,ts(e)+1)},Yr.before=function(e){return Yr(e.parentNode,ts(e))},Yr.isAbove=function(e,t){return Ma([ne(t.getClientRects()),ie(e.getClientRects())],Wa).getOr(!1)},Yr.isBelow=function(e,t){return Ma([ie(t.getClientRects()),ne(e.getClientRects())],Ea).getOr(!1)},Yr.isAtStart=function(e){return!!e&&e.isAtStart()},Yr.isAtEnd=function(e){return!!e&&e.isAtEnd()},Yr.isTextPosition=function(e){return!!e&&Ro.isText(e.container())},Yr.isElementPosition=function(e){return!1===Yr.isTextPosition(e)};var Is,ds,Cs=us,hs=Ro.isText,As=Ro.isBogus,fs=mr.nodeIndex,ms=function(e){var t=e.parentNode;return As(t)?ms(t):t},ps=function(e){return e?Mt.reduce(e.childNodes,function(e,t){return As(t)&&"BR"!==t.nodeName?e=e.concat(ps(t)):e.push(t),e},[]):[]},bs=function(e){return function(t){return e===t}},Bs=function(e){var t,n,i,o;return(hs(e)?"text()":e.nodeName.toLowerCase())+"["+(n=ps(ms(t=e)),i=Mt.findIndex(n,bs(t),t),n=n.slice(0,i+1),o=Mt.reduce(n,function(e,t,i){return hs(t)&&hs(n[i-1])&&e++,e},0),n=Mt.filter(n,Ro.matchNodeNames(t.nodeName)),(i=Mt.findIndex(n,bs(t),t))-o)+"]"},vs=function(e,t){var n,i,o,r,a,s=[];return n=t.container(),i=t.offset(),hs(n)?o=function(e,t){for(;(e=e.previousSibling)&&hs(e);)t+=e.data.length;return t}(n,i):(i>=(r=n.childNodes).length?(o="after",i=r.length-1):o="before",n=r[i]),s.push(Bs(n)),a=function(e,t,n){var i=[];for(t=t.parentNode;t!==e;t=t.parentNode)i.push(t);return i}(e,n),a=Mt.filter(a,y(Ro.isBogus)),(s=s.concat(Mt.map(a,function(e){return Bs(e)}))).reverse().join("/")+","+o},ys=function(e,t){var n,i,o;return t?(t=(n=t.split(","))[0].split("/"),o=1<n.length?n[1]:"before",(i=Mt.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,i=t[1],o=parseInt(t[2],10),r=ps(n),r=Mt.filter(r,function(e,t){return!hs(e)||!hs(r[t-1])}),(r=Mt.filter(r,Ro.matchNodeNames(i)))[o]):null;var n,i,o,r},e))?hs(i)?function(e,t){for(var n,i=e,o=0;hs(i);){if(n=i.data.length,o<=t&&t<=o+n){e=i,t-=o;break}if(!hs(i.nextSibling)){e=i,t=n;break}o+=n,i=i.nextSibling}return hs(e)&&t>e.data.length&&(t=e.data.length),Cs(e,t)}(i,parseInt(o,10)):(o="after"===o?fs(i)+1:fs(i),Cs(i.parentNode,o)):null):null},xs=function(e,t){Ro.isText(t)&&0===t.data.length&&e.remove(t)},Fs=function(e,t,n){var i,o,r,a,s,g,l;Ro.isDocumentFragment(n)?(r=e,a=t,g=Z.from((s=n).firstChild),l=Z.from(s.lastChild),a.insertNode(s),g.each(function(e){return xs(r,e.previousSibling)}),l.each(function(e){return xs(r,e.nextSibling)})):(i=e,t.insertNode(o=n),xs(i,o.previousSibling),xs(i,o.nextSibling))},Gs=Ro.isContentEditableFalse,Qs=function(e,t,n,i,o){var r,a=i[o?"startContainer":"endContainer"],s=i[o?"startOffset":"endOffset"],g=[],l=0,c=e.getRoot();for(Ro.isText(a)?g.push(n?function(e,t,n){var i,o;for(o=e(t.data.slice(0,s)).length,i=t.previousSibling;i&&Ro.isText(i);i=i.previousSibling)o+=e(i.data).length;return o}(t,a):s):(s>=(r=a.childNodes).length&&r.length&&(l=1,s=Math.max(0,r.length-1)),g.push(e.nodeIndex(r[s],n)+l));a&&a!==c;a=a.parentNode)g.push(e.nodeIndex(a,n));return g},ws=function(e,t,n){var i=0;return Pt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void i++}),i},Ss=function(e,t){var n,i,o,r=t?"start":"end";i=e[r+"Offset"],Ro.isElement(n=e[r+"Container"])&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?i:i-1,o.length-1)])&&e["set"+(t?"Start":"End")](n,i=t?0:n.childNodes.length)},Xs=function(e){return Ss(e,!0),Ss(e,!1),e},Zs=function(e,t){var n;if(Ro.isElement(e)&&(e=La(e,t),Gs(e)))return e;if(Aa(e)){if(Ro.isText(e)&&Ca(e)&&(e=e.parentNode),Gs(n=e.previousSibling))return n;if(Gs(n=e.nextSibling))return n}},Ns=function(e,t,n){var i=n.getNode(),o=i?i.nodeName:null,r=n.getRng();if(Gs(i)||"IMG"===o)return{name:o,index:ws(n.dom,o,i)};var a,s,g,l,c,u,I,d=Zs((a=r).startContainer,a.startOffset)||Zs(a.endContainer,a.endOffset);return d?{name:o=d.tagName,index:ws(n.dom,o,d)}:(u=(g=n).dom,(I={}).start=Qs(u,s=e,l=t,c=r,!0),g.isCollapsed()||(I.end=Qs(u,s,l,c,!1)),I)},ks=function(e,t,n){var i={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Rs=function(e,t){var n=e.dom,i=e.getRng(),o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:ws(n,s,a)};var g=Xs(i.cloneRange());if(!r){g.collapse(!1);var l=ks(n,o+"_end",t);Fs(n,g,l)}(i=Xs(i)).collapse(!0);var c=ks(n,o+"_start",t);return Fs(n,i,c),e.moveToBookmark({id:o,keep:1}),{id:o}},Ds={getBookmark:function(e,t,n){return 2===t?Ns(ua,n,e):3===t?(o=(i=e).getRng(),{start:vs(i.dom.getRoot(),Cs.fromRangeStart(o)),end:vs(i.dom.getRoot(),Cs.fromRangeEnd(o))}):t?{rng:e.getRng()}:Rs(e,!1);var i,o},getUndoBookmark:r(Ns,o,!0),getPersistentBookmark:Rs},Us="_mce_caret",Ts=function(e){return Ro.isElement(e)&&e.id===Us},Ws=function(e,t){for(;t&&t!==e;){if(t.id===Us)return t;t=t.parentNode}return null},Es=Ro.isElement,Hs=Ro.isText,Os=function(e){var t=e.parentNode;t&&t.removeChild(e)},Ls=function(e,t){0===t.length?Os(e):e.nodeValue=t},Vs=function(e){var t=ua(e);return{count:e.length-t.length,text:t}},Ys=function(e,t){return Ms(e),t},Ms=function(e){if(Es(e)&&Aa(e)&&(fa(e)?e.removeAttribute("data-mce-caret"):Os(e)),Hs(e)){var t=ua(function(e){try{return e.nodeValue}catch(t){return""}}(e));Ls(e,t)}},_s={removeAndReposition:function(e,t){return Cs.isTextPosition(t)?function(e,t){return Hs(e)&&t.container()===e?(o=Vs((n=e).data.substr(0,(i=t).offset())),r=Vs(n.data.substr(i.offset())),0<(a=o.text+r.text).length?(Ls(n,a),Cs(n,i.offset()-o.count)):i):Ys(e,t);var n,i,o,r,a}(e,t):(n=e,(i=t).container()===n.parentNode?function(e,t){var n,i,o,r=t.container(),a=(n=oe(r.childNodes),i=e,o=O(n,i),-1===o?Z.none():Z.some(o)).map(function(e){return e<t.offset()?Cs(r,t.offset()-1):t}).getOr(t);return Ms(e),a}(n,i):Ys(n,i));var n,i},remove:Ms},Ks=oi.detect().browser,zs=Ro.isContentEditableFalse,Js=function(e,t,n){var i,o,r,a,s,g=Ua(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(i=e.ownerDocument.documentElement,o=e.scrollLeft||i.scrollLeft,r=e.scrollTop||i.scrollTop):(s=e.getBoundingClientRect(),o=e.scrollLeft-s.left,r=e.scrollTop-s.top),g.left+=o,g.right+=o,g.top+=r,g.bottom+=r,g.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),g.left+=a,g.right+=a),g},Ps=function(){return Ks.isIE()||Ks.isEdge()||Ks.isFirefox()},js=function(e){return zs(e)||Ro.isTable(e)&&Ps()},$s=Ro.isContentEditableFalse,qs=Ro.matchStyleValues("display","block table table-cell table-caption list-item"),eg=Aa,tg=Ca,ng=Ro.isElement,ig=Za,og=function(e){return 0<e},rg=function(e){return e<0},ag=function(e,t){for(var n;n=e(t);)if(!tg(n))return n;return null},sg=function(e,t,n,i,o){var r=new ao(e,i);if(rg(t)){if(($s(e)||tg(e))&&n(e=ag(r.prev,!0)))return e;for(;e=ag(r.prev,o);)if(n(e))return e}if(og(t)){if(($s(e)||tg(e))&&n(e=ag(r.next,!0)))return e;for(;e=ag(r.next,o);)if(n(e))return e}return null},gg=function(e,t){for(;e&&e!==t;){if(qs(e))return e;e=e.parentNode}return null},lg=function(e,t,n){return gg(e.container(),n)===gg(t.container(),n)},cg=function(e,t){var n,i;return t?(n=t.container(),i=t.offset(),ng(n)?n.childNodes[i+e]:null):null},ug=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Ig=function(e,t,n){var i,o,r,a;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(eg(i=n[o])&&(i=i[o]),$s(i)){if(a=n,gg(i,r=t)===gg(a,r))return i;break}if(ig(i))break;n=n.parentNode}return null},dg=r(ug,!0),Cg=r(ug,!1),hg=function(e,t,n){var i,o,a,s,g=r(Ig,!0,t),l=r(Ig,!1,t);if(a=n.startOffset,Ca(o=n.startContainer)){if(ng(o)||(o=o.parentNode),"before"===(s=o.getAttribute("data-mce-caret"))&&js(i=o.nextSibling))return dg(i);if("after"===s&&js(i=o.previousSibling))return Cg(i)}if(!n.collapsed)return n;if(Ro.isText(o)){if(eg(o)){if(1===e){if(i=l(o))return dg(i);if(i=g(o))return Cg(i)}if(-1===e){if(i=g(o))return Cg(i);if(i=l(o))return dg(i)}return n}if(Ba(o)&&a>=o.data.length-1)return 1===e&&(i=l(o))?dg(i):n;if(ba(o)&&a<=1)return-1===e&&(i=g(o))?Cg(i):n;if(a===o.data.length)return(i=l(o))?dg(i):n;if(0===a)return(i=g(o))?Cg(i):n}return n},Ag=function(e,t){return Z.from(cg(e?0:-1,t)).filter($s)},fg=function(e,t,n){var i=hg(e,t,n);return-1===e?us.fromRangeStart(i):us.fromRangeEnd(i)},mg=function(e){return Z.from(e.getNode()).map(ai.fromDom)},pg=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},bg=function(e,t){var n=lg(e,t);return!(n||!Ro.isBr(e.getNode()))||n};(ds=Is||(Is={}))[ds.Backwards=-1]="Backwards",ds[ds.Forwards=1]="Forwards";var Bg,vg,yg=Ro.isContentEditableFalse,xg=Ro.isText,Fg=Ro.isElement,Gg=Ro.isBr,Qg=Za,wg=function(e){return wa(e)||!!Na(t=e)&&!0!==z(oe(t.getElementsByTagName("*")),function(e,t){return e||ya(t)},!1);var t},Sg=ka,Xg=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Zg=function(e,t){if(og(e)){if(Qg(t.previousSibling)&&!xg(t.previousSibling))return Cs.before(t);if(xg(t))return Cs(t,0)}if(rg(e)){if(Qg(t.nextSibling)&&!xg(t.nextSibling))return Cs.after(t);if(xg(t))return Cs(t,t.data.length)}return rg(e)?Gg(t)?Cs.before(t):Cs.after(t):Cs.before(t)},Ng=function(e,t,n){var o,r,a,s,g;if(!Fg(n)||!t)return null;if(t.isEqual(Cs.after(n))&&n.lastChild){if(g=Cs.after(n.lastChild),rg(e)&&Qg(n.lastChild)&&Fg(n.lastChild))return Gg(n.lastChild)?Cs.before(n.lastChild):g}else g=t;var l,c,u,I=g.container(),d=g.offset();if(xg(I)){if(rg(e)&&0<d)return Cs(I,--d);if(og(e)&&d<I.length)return Cs(I,++d);o=I}else{if(rg(e)&&0<d&&(r=Xg(I,d-1),Qg(r)))return!wg(r)&&(a=sg(r,e,Sg,r))?xg(a)?Cs(a,a.data.length):Cs.after(a):xg(r)?Cs(r,r.data.length):Cs.before(r);if(og(e)&&d<I.childNodes.length&&(r=Xg(I,d),Qg(r)))return Gg(r)?(l=n,(u=(c=r).nextSibling)&&Qg(u)?xg(u)?Cs(u,0):Cs.before(u):Ng(Is.Forwards,Cs.after(c),l)):!wg(r)&&(a=sg(r,e,Sg,r))?xg(a)?Cs(a,0):Cs.before(a):xg(r)?Cs(r,0):Cs.after(r);o=r||g.getNode()}return(og(e)&&g.isAtEnd()||rg(e)&&g.isAtStart())&&(o=sg(o,e,i(!0),n,!0),Sg(o,n))?Zg(e,o):(r=sg(o,e,Sg,n),!(s=Mt.last(K(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(I,n),yg)))||r&&s.contains(r)?r?Zg(e,r):null:g=og(e)?Cs.after(s):Cs.before(s))},kg=function(e){return{next:function(t){return Ng(Is.Forwards,t,e)},prev:function(t){return Ng(Is.Backwards,t,e)}}},Rg=function(e){return Cs.isTextPosition(e)?0===e.offset():Za(e.getNode())},Dg=function(e){if(Cs.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Za(e.getNode(!0))},Ug=function(e,t){return!Cs.isTextPosition(e)&&!Cs.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Tg=function(e,t,n){var i=kg(t);return Z.from(e?i.next(n):i.prev(n))},Wg=function(e,t,n){return Tg(e,t,n).bind(function(i){return lg(n,i,t)&&function(e,t,n){return e?!Ug(t,n)&&!(!Cs.isTextPosition(i=t)&&Ro.isBr(i.getNode()))&&Dg(t)&&Rg(n):!Ug(n,t)&&Rg(t)&&Dg(n);var i}(e,n,i)?Tg(e,t,i):Z.some(i)})},Eg=function(e,t,n,i){return Wg(e,t,n).bind(function(n){return i(n)?Eg(e,t,n,i):Z.some(n)})},Hg=function(e,t){var n,i,o,r,a,s=e?t.firstChild:t.lastChild;return Ro.isText(s)?Z.some(Cs(s,e?0:s.data.length)):s?Za(s)?Z.some(e?Cs.before(s):Ro.isBr(a=s)?Cs.before(a):Cs.after(a)):(i=t,o=s,r=(n=e)?Cs.before(o):Cs.after(o),Tg(n,i,r)):Z.none()},Og=r(Tg,!0),Lg=r(Tg,!1),Vg={fromPosition:Tg,nextPosition:Og,prevPosition:Lg,navigate:Wg,navigateIgnore:Eg,positionIn:Hg,firstPositionIn:r(Hg,!0),lastPositionIn:r(Hg,!1)},Yg=function(e,t){return!e.isBlock(t)||t.innerHTML||de.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Mg=function(e,t){return Vg.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},_g=function(e,t,n){return!(!1!==t.hasChildNodes()||!Ws(e,t)||(o=n,r=(i=t).ownerDocument.createTextNode(ca),i.appendChild(r),o.setStart(r,0),o.setEnd(r,0),0));var i,o,r},Kg=function(e,t,n,i){var o,r,a,s,g=n[t?"start":"end"],l=e.getRoot();if(g){for(a=g[0],r=l,o=g.length-1;1<=o;o--){if(s=r.childNodes,_g(l,r,i))return!0;if(g[o]>s.length-1)return!!_g(l,r,i)||Mg(r,i);r=s[g[o]]}3===r.nodeType&&(a=Math.min(g[0],r.nodeValue.length)),1===r.nodeType&&(a=Math.min(g[0],r.childNodes.length)),t?i.setStart(r,a):i.setEnd(r,a)}return!0},zg=function(e){return Ro.isText(e)&&0<e.data.length},Jg=function(e,t,n){var i,o,r,a,s,g,l=e.get(n.id+"_"+t),c=n.keep;if(l){if(i=l.parentNode,"start"===t?c?l.hasChildNodes()?(i=l.firstChild,o=1):zg(l.nextSibling)?(i=l.nextSibling,o=0):zg(l.previousSibling)?(i=l.previousSibling,o=l.previousSibling.data.length):(i=l.parentNode,o=e.nodeIndex(l)+1):o=e.nodeIndex(l):c?l.hasChildNodes()?(i=l.firstChild,o=1):zg(l.previousSibling)?(i=l.previousSibling,o=l.previousSibling.data.length):(i=l.parentNode,o=e.nodeIndex(l)):o=e.nodeIndex(l),s=i,g=o,!c){for(a=l.previousSibling,r=l.nextSibling,Pt.each(Pt.grep(l.childNodes),function(e){Ro.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);a&&r&&a.nodeType===r.nodeType&&Ro.isText(a)&&!de.opera&&(o=a.nodeValue.length,a.appendData(r.nodeValue),e.remove(r),s=a,g=o)}return Z.some(Cs(s,g))}return Z.none()},Pg=function(e,t,n){return Ds.getBookmark(e,t,n)},jg=function(e,t){(function(e,t){var n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f=e.dom;if(t){if(Pt.isArray(t.start))return h=t,A=(C=f).createRng(),Kg(C,!0,h,A)&&Kg(C,!1,h,A)?Z.some(A):Z.none();if("string"==typeof t.start)return Z.some((u=t,I=(c=f).createRng(),d=ys(c.getRoot(),u.start),I.setStart(d.container(),d.offset()),d=ys(c.getRoot(),u.end),I.setEnd(d.container(),d.offset()),I));if(t.hasOwnProperty("id"))return g=Jg(o=f,"start",r=t),l=Jg(o,"end",r),Ma([g,(a=l,s=g,a.isSome()?a:s)],function(e,t){var n=o.createRng();return n.setStart(Yg(o,e.container()),e.offset()),n.setEnd(Yg(o,t.container()),t.offset()),n});if(t.hasOwnProperty("name"))return Z.from((n=f).select((i=t).name)[i.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(t.hasOwnProperty("rng"))return Z.some(t.rng)}return Z.none()})(e,t).each(function(t){e.setRng(t)})},$g=function(e){return Ro.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},qg=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},el=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},tl=function(e,t,n){var i,o,r,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(r=s.childNodes).length?i=new ao(s=r[a],e.getParent(s,e.isBlock)):(i=new ao(s=r[r.length-1],e.getParent(s,e.isBlock))).next(!0),o=i.current();o;o=i.next())if(3===o.nodeType&&!qg(o))return n.setStart(o,0),void t.setRng(n)},nl=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!qg(e))return e},il=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},ol=function(e,t,n){return e.schema.isValidChild(t,n)},rl=qg,al=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},sl=function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},gl=el,ll=function(e,t,n){return el(e,e.getStyle(t,n),n)},cl=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},ul=function(e,t,n){return e.getParents(t,n,e.getRoot())},Il=$g,dl=ul,Cl=rl,hl=il,Al=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},fl=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ml=function(e,t,n,i){var o,r,a=n.nodeValue;return void 0===i&&(i=e?a.length:0),e?(o=a.lastIndexOf(" ",i),-1!==(o=(r=a.lastIndexOf("\xa0",i))<o?o:r)&&!t&&(o<i||!e)&&o<=a.length&&o++):(o=a.indexOf(" ",i),r=a.indexOf("\xa0",i),o=-1!==o&&(-1===r||o<r)?o:r),o},pl=function(e,t,n,i,o,r){var a,s,g,l;if(3===n.nodeType){if(-1!==(g=ml(o,r,n,i)))return{container:n,offset:g};l=n}for(a=new ao(n,e.getParent(n,e.isBlock)||t);s=a[o?"prev":"next"]();)if(3!==s.nodeType||Il(s.parentNode)){if(e.isBlock(s)||sl(s,"BR"))break}else if(-1!==(g=ml(o,r,l=s)))return{container:s,offset:g};if(l)return{container:l,offset:i=o?0:l.length}},bl=function(e,t,n,i,o){var r,a,s,g;for(3===i.nodeType&&0===i.nodeValue.length&&i[o]&&(i=i[o]),r=dl(e,i),a=0;a<r.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(g=t[s])&&g.collapsed!==n.collapsed)&&e.is(r[a],g.selector))return r[a];return i},Bl=function(e,t,n,i){var o,r=e.dom,a=r.getRoot();if(t[0].wrapper||(o=r.getParent(n,t[0].block,a)),!o){var s=r.getParent(n,"LI,TD,TH");o=r.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&hl(e,t)},s)}if(o&&t[0].wrapper&&(o=dl(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[i]&&!r.isBlock(o[i])&&!sl(o=o[i],"br"););return o||n},vl=function(e,t,n,i,o,r,a){var s,g,l,c,u,I;if(s=g=a?n:o,c=a?"previousSibling":"nextSibling",u=e.getRoot(),3===s.nodeType&&!Cl(s)&&(a?0<i:r<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(g))return g;for(l=g[c];l;l=l[c])if(!Il(l)&&!Cl(l)&&("BR"!==(I=l).nodeName||!I.getAttribute("data-mce-bogus")||I.nextSibling))return g;if(g===u||g.parentNode===u){s=g;break}g=g.parentNode}return s},yl=function(e,t,n,i){var o,r=t.startContainer,a=t.startOffset,s=t.endContainer,g=t.endOffset,l=e.dom;return 1===r.nodeType&&r.hasChildNodes()&&3===(r=La(r,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=La(s,t.collapsed?g:g-1)).nodeType&&(g=s.nodeValue.length),r=fl(l,r),s=fl(l,s),(Il(r.parentNode)||Il(r))&&(r=Il(r)?r:r.parentNode,3===(r=t.collapsed?r.previousSibling||r:r.nextSibling||r).nodeType&&(a=t.collapsed?r.length:0)),(Il(s.parentNode)||Il(s))&&(s=Il(s)?s:s.parentNode,3===(s=t.collapsed?s.nextSibling||s:s.previousSibling||s).nodeType&&(g=t.collapsed?0:s.length)),t.collapsed&&((o=pl(l,e.getBody(),r,a,!0,i))&&(r=o.container,a=o.offset),(o=pl(l,e.getBody(),s,g,!1,i))&&(s=o.container,g=o.offset)),n[0].inline&&(s=i?s:function(e,t){var n=Al(e,g);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Al(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e}(s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===r.nodeType&&0!==a||(r=vl(l,n,r,a,s,g,!0)),n[0].inline&&3===s.nodeType&&g!==s.nodeValue.length||(s=vl(l,n,r,a,s,g,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(r=bl(l,n,t,r,"previousSibling"),s=bl(l,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(r=Bl(e,n,r,"previousSibling"),s=Bl(e,n,s,"nextSibling"),n[0].block&&(l.isBlock(r)||(r=vl(l,n,r,a,s,g,!0)),l.isBlock(s)||(s=vl(l,n,r,a,s,g,!1)))),1===r.nodeType&&(a=l.nodeIndex(r),r=r.parentNode),1===s.nodeType&&(g=l.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:a,endContainer:s,endOffset:g}},xl=Pt.each,Fl=function(e,t,n){var i,o,r,a,s,g,l,c=t.startContainer,u=t.startOffset,I=t.endContainer,d=t.endOffset;if(0<(l=e.select("td[data-mce-selected],th[data-mce-selected]")).length)xl(l,function(e){n([e])});else{var C,h,A,f=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&u>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===d&&0<e.length&&t===I&&3===t.nodeType&&e.splice(e.length-1,1),e},m=function(e,t,n){for(var i=[];e&&e!==n;e=e[t])i.push(e);return i},p=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},b=function(e,t,i){var o=i?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(g=m(a===e?a:a[o],o)).length&&(i||g.reverse(),n(f(g)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[u]),1===I.nodeType&&I.hasChildNodes()&&(h=d,--h>(A=(C=I).childNodes).length-1?h=A.length-1:h<0&&(h=0),I=A[h]||C),c===I)return n(f([c]));for(i=e.findCommonAncestor(c,I),a=c;a;a=a.parentNode){if(a===I)return b(c,i,!0);if(a===i)break}for(a=I;a;a=a.parentNode){if(a===c)return b(I,i);if(a===i)break}o=p(c,i)||c,r=p(I,i)||I,b(c,o,!0),(g=m(o===c?o:o.nextSibling,"nextSibling",r===I?r.nextSibling:r)).length&&n(f(g)),b(I,r)}},Gl=(Bg=di,{get:function(e){if(!Bg(e))throw new Error("Can only get text value of a text node");return vg(e).getOr("")},getOption:vg=function(e){return Bg(e)?Z.from(e.dom().nodeValue):Z.none()},set:function(e,t){if(!Bg(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),Ql=function(e){return Gl.get(e)},wl=function(e,t,n,i){var o,r=t.uid,a=void 0===r?(o=(new Date).getTime(),"mce-annotation_"+Math.floor(1e9*Math.random())+ ++ia+String(o)):r,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(t,["uid"]),g=ai.fromTag("span",e);Er(g,Pr()),bi(g,""+$r(),a),bi(g,""+jr(),n);var l,c=i(a,s),u=c.attributes,I=c.classes,d=void 0===I?[]:I;return Bi(g,void 0===u?{}:u),l=g,M(d,function(e){Er(l,e)}),g},Sl=function(e,t,n,i){e.undoManager.transact(function(){var o,r,a,s,g=e.selection.getRng();if(g.collapsed&&(s=yl(o=e,r=g,[{inline:!0}],3===(a=r).startContainer.nodeType&&a.startContainer.nodeValue.length>=a.startOffset&&"\xa0"===a.startContainer.nodeValue[a.startOffset]),r.setStart(s.startContainer,s.startOffset),r.setEnd(s.endContainer,s.endOffset),o.selection.setRng(r)),e.selection.getRng().collapsed){var l=wl(e.getDoc(),i,t,n.decorate);sa(l,"\xa0"),e.selection.getRng().insertNode(l.dom()),e.selection.select(l.dom())}else{var c=Ds.getPersistentBookmark(e.selection,!1),u=e.selection.getRng();(function(e,t,n,i,o){var r=[],a=wl(e.getDoc(),o,n,i),s=Ur(Z.none()),g=function(){s.set(Z.none())},l=function(e){M(e,c)},c=function(t){var n,i;switch(function(e,t,n,i){return Ui(t).fold(function(){return"skipping"},function(o){return"br"===i||di(a=t)&&"\ufeff"===Ql(a)?"valid":Ii(r=t)&&Hr(r,Pr())?"existing":Ts(t)?"caret":ol(e,n,i)&&ol(e,ci(o),n)?"valid":"invalid-child";var r,a})}(e,t,"span",ci(t))){case"invalid-child":g();var o=Oi(t);l(o),g();break;case"valid":var c=s.get().getOrThunk(function(){var e=ra(a);return r.push(e),s.set(Z.some(e)),e});Qr(n=t,i=c),Xr(i,n)}};Fl(e.dom,t,function(e){var t;g(),t=Y(e,ai.fromDom),l(t)})})(e,u,t,n.decorate,i),e.selection.moveToBookmark(c)}})};function Xl(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?Z.from(t[e]).map(function(e){return e.settings}):Z.none()}});na(e,n);var i=ta(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,i){n.lookup(t).each(function(n){Sl(e,t,n,i)})},annotationChanged:function(e,t){i.addListener(e,t)},remove:function(t){qr(e,Z.some(t)).each(function(e){M(e.elements,Rr)})},getAll:function(t){var n,i,o,r,a,s=(n=t,i=ai.fromDom(e.getBody()),o=Lr(i,"["+jr()+'="'+n+'"]'),r={},M(o,function(e){var t=vi(e,$r()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])}),r);return a=function(e){return Y(e,function(e){return e.dom()})},fi(s,function(e,t,n){return{k:t,v:a(e)}})}}}var Zl=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Nl=function(e,t){var n=Cs.after(e),i=kg(t).prev(n);return i?i.toRange():null},kl=Pt.each,Rl=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var i=function(t){var n={};return kl(e.getAttribs(t),function(i){var o=i.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))}),n},o=function(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(void 0===(n=t[i]))return!1;if(e[i]!==n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0};return!(!o(i(t),i(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||$g(t)||$g(n))}},Dl=function(e){Nr(e),Xr(e,ai.fromHtml('<br data-mce-bogus="1">'))},Ul=function(e){Yi(e).each(function(t){Ti(t).each(function(n){Io(e)&&ho(t)&&Io(n)&&kr(t)})})},Tl=Pt.makeMap;function Wl(e){var t,n,i,o,r,a=[];return t=(e=e||{}).indent,n=Tl(e.indent_before||""),i=Tl(e.indent_after||""),o=zo.getEncodeFunc(e.entity_encoding||"raw",e.entities),r="html"===e.element_format,{start:function(e,s,g){var l,c,u,I;if(t&&n[e]&&0<a.length&&0<(I=a[a.length-1]).length&&"\n"!==I&&a.push("\n"),a.push("<",e),s)for(l=0,c=s.length;l<c;l++)a.push(" ",(u=s[l]).name,'="',o(u.value,!0),'"');a[a.length]=!g||r?">":" />",g&&t&&i[e]&&0<a.length&&0<(I=a[a.length-1]).length&&"\n"!==I&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&i[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n")},text:function(e,t){0<e.length&&(a[a.length]=t?e:o(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",o(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function El(e,t){void 0===t&&(t=rr());var n=Wl(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(i){var o,r;r=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;a(e),e=e.next;);}},n.reset();var a=function(e){var i,s,g,l,c,u,I,d,C,h=o[e.type];if(h)h(e);else{if(i=e.name,s=e.shortEnded,g=e.attributes,r&&g&&1<g.length&&((u=[]).map={},C=t.getElementRule(e.name))){for(I=0,d=C.attributesOrder.length;I<d;I++)(l=C.attributesOrder[I])in g.map&&(u.map[l]=c=g.map[l],u.push({name:l,value:c}));for(I=0,d=g.length;I<d;I++)(l=g[I].name)in u.map||(u.map[l]=c=g.map[l],u.push({name:l,value:c}));g=u}if(n.start(e.name,g,s),!s){if(e=e.firstChild)for(;a(e),e=e.next;);n.end(i)}}};return 1!==i.type||e.inner?o[11](i):a(i),n.getContent()}}}var Hl=function(t){return t.collapsed?t:(i=Cs.fromRangeStart(n=t),o=Cs.fromRangeEnd(n),Vg.fromPosition(!1,r=n.commonAncestorContainer,o).map(function(t){return!lg(i,o,r)&&lg(i,t,r)?(a=i.container(),s=i.offset(),g=t.container(),l=t.offset(),(c=e.document.createRange()).setStart(a,s),c.setEnd(g,l),c):n;var a,s,g,l,c}).getOr(n));var n,i,o,r},Ol=Ro.matchNodeNames("td th"),Ll=function(e,t){var n,i,o=e.selection.getRng(),r=o.startContainer,a=o.startOffset;o.collapsed&&(i=a,Ro.isText(n=r)&&"\xa0"===n.nodeValue[i-1])&&Ro.isText(r)&&(r.insertData(a-1," "),r.deleteData(a,1),o.setStart(r,a),o.setEnd(r,a),e.selection.setRng(o)),e.selection.setContent(t)},Vl=function(e,t){var n,i,o="string"!=typeof(n=t)?(i=Pt.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:i}):{content:n,details:{}};!function(e,t,n){var i,o,r,a,s,g,l,c,u,I,d,C=e.selection,h=e.dom;if(/^ | $/.test(t)&&(t=function(e,t){var n,i;i=e.startOffset;var o=function(e){return n[e]&&3===n[e].nodeType};return 3===(n=e.startContainer).nodeType&&(0<i?t=t.replace(/^&nbsp;/," "):o("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),i<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(C.getRng(),t)),i=e.parser,d=n.merge,o=El({validate:e.settings.validate},e.schema),I='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',(g=e.fire("BeforeSetContent",g={content:t,format:"html",selection:!0,paste:n.paste})).isDefaultPrevented())e.fire("SetContent",{content:g.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=g.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,I);var A,f,m,p,b,B=(c=C.getRng()).startContainer||(c.parentElement?c.parentElement():null),v=e.getBody();B===v&&C.isCollapsed()&&h.isBlock(v.firstChild)&&(A=v.firstChild)&&!e.schema.getShortEndedElements()[A.nodeName]&&h.isEmpty(v.firstChild)&&((c=h.createRng()).setStart(v.firstChild,0),c.setEnd(v.firstChild,0),C.setRng(c)),C.isCollapsed()||(e.selection.setRng(Hl(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),m=t,b=(f=e.selection.getRng()).startOffset,3===(p=f.startContainer).nodeType&&f.collapsed&&("\xa0"===p.data[b]?(p.deleteData(b,1),/[\u00a0| ]$/.test(m)||(m+=" ")):"\xa0"===p.data[b-1]&&(p.deleteData(b-1,1),/[\u00a0| ]$/.test(m)||(m=" "+m))),t=m);var y,x,F,G={context:(r=C.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=i.parse(t,G),!0===n.paste&&function(e,t){var n,i,o,r,a,s,g=t.firstChild,l=t.lastChild;return g&&"meta"===g.name&&(g=g.next),l&&"mce_marker"===l.attr("id")&&(l=l.prev),i=l,s=(n=e).getNonEmptyElements(),i&&(i.isEmpty(s)||(o=i,n.getBlockElements()[o.name]&&(a=o).firstChild&&a.firstChild===a.lastChild&&("br"===(r=o.firstChild).name||"\xa0"===r.value)))&&(l=l.prev),!(!g||g!==l||"ul"!==g.name&&"ol"!==g.name)}(e.schema,s)&&Zl(h,r))return c=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B=(o=t,g=e.serialize(i),a=(r=o.createFragment(g)).firstChild,s=r.lastChild,a&&"META"===a.nodeName&&a.parentNode.removeChild(a),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),r),v=Zl(t,n.startContainer),y=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&("\xa0"===(t=e.firstChild).data||Ro.isBr(t));var t}(t))?e.slice(0,-1):e;var t}(Pt.grep(B.firstChild.childNodes,function(e){return"LI"===e.nodeName})),x=t.getRoot(),F=function(e){var i=Cs.fromRangeStart(n),o=kg(t.getRoot()),r=1===e?o.prev(i):o.next(i);return!r||Zl(t,r.getNode())!==v};return F(1)?function(e,t,n){var i,o,r,a=e.parentNode;return Pt.each(y,function(t){a.insertBefore(t,e)}),i=n,o=Cs.before(e),(r=kg(i).next(o))?r.toRange():null}(v,0,x):F(2)?(l=v,u=x,t.insertAfter((c=y).reverse(),l),Nl(c[0],u)):(d=y,C=x,h=I=v,f=(A=n).cloneRange(),m=A.cloneRange(),f.setStartBefore(h),m.setEndAfter(h),p=[f.cloneContents(),m.cloneContents()],(b=I.parentNode).insertBefore(p[0],I),Pt.each(d,function(e){b.insertBefore(e,I)}),b.insertBefore(p[1],I),b.removeChild(I),Nl(d[d.length-1],C))}(o,h,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",g);if(function(e){for(var t=s;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(),"mce_marker"===(u=s.lastChild).attr("id"))for(u=(l=u).prev;u;u=u.walk(!0))if(3===u.type||!h.isBlock(u.name)){e.schema.isValidChild(u.parent.name,"span")&&u.parent.insert(l,u,"br"===u.name);break}if(e._selectionOverrides.showBlockCaretContainer(r),G.invalid){for(Ll(e,I),r=C.getNode(),a=e.getBody(),9===r.nodeType?r=u=a:u=r;u!==a;)u=(r=u).parentNode;t=r===a?a.innerHTML:h.getOuterHTML(r),t=o.serialize(i.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return o.serialize(s)}))),r===a?h.setHTML(a,t):h.setOuterHTML(r,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var i=n.firstChild;!i||i===n.lastChild&&"BR"===i.nodeName?e.dom.setHTML(n,t):Ll(e,t)}}(e,t=o.serialize(s),r);!function(e,t){var n=e.schema.getTextInlineElements(),i=e.dom;if(t){var o=e.getBody(),r=new Rl(i);Pt.each(i.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==o;t=t.parentNode)n[e.nodeName.toLowerCase()]&&r.compare(t,e)&&i.remove(e,!0)})}}(e,d),function(e,t){var n,i,o,r,a,s=e.dom,g=e.selection;if(t){if(e.selection.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return s.remove(t),g.select(n);var l=s.createRng();(r=t.previousSibling)&&3===r.nodeType?(l.setStart(r,r.nodeValue.length),de.ie||(a=t.nextSibling)&&3===a.nodeType&&(r.appendData(a.data),a.parentNode.removeChild(a))):(l.setStartBefore(t),l.setEndBefore(t)),i=s.getParent(t,s.isBlock),s.remove(t),i&&s.isEmpty(i)&&(e.$(i).empty(),l.setStart(i,0),l.setEnd(i,0),Ol(i)||i.getAttribute("data-mce-fragment")||!(o=function(t){var n=Cs.fromRangeStart(l);if(n=kg(e.getBody()).next(n))return n.toRange()}())?s.add(i,s.create("br",{"data-mce-bogus":"1"})):(l=o,s.remove(i))),g.setRng(l)}}(e,h.get("mce_marker")),y=e.getBody(),Pt.each(y.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),x=e.dom,F=e.selection.getStart(),Z.from(x.getParent(F,"td,th")).map(ai.fromDom).each(Ul),e.fire("SetContent",g),e.addVisual()}}(e,o.content,o.details)},Yl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ml=function(e,t,n){var i=e.getParam(t,n);if(-1!==i.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return i},_l=function(e){return e.getParam("content_security_policy","")},Kl=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},zl=function(e){return e.getParam("forced_root_block_attrs",{})},Jl=function(e){return e.getParam("images_dataimg_filter",i(!0),"function")},Pl=function(e){return e.getParam("automatic_uploads",!0,"boolean")},jl=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},$l=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},ql=function(e){return e.getParam("images_upload_url","","string")},ec=function(e){return e.getParam("images_upload_base_path","","string")},tc=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},nc=function(e){return e.getParam("images_upload_handler",null,"function")},ic=function(e){return e.getParam("content_css_cors",!1,"boolean")},oc=function(e,t){if(!t)return t;var n=t.container(),i=t.offset();return e?ha(n)?Ro.isText(n.nextSibling)?Cs(n.nextSibling,0):Cs.after(n):ma(t)?Cs(n,i+1):t:ha(n)?Ro.isText(n.previousSibling)?Cs(n.previousSibling,n.previousSibling.data.length):Cs.before(n):pa(t)?Cs(n,i-1):t},rc={isInlineTarget:function(e,t){return Xi(ai.fromDom(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},findRootInline:function(e,t,n){var i,o,r=(i=e,o=t,K(mr.DOM.getParents(n.container(),"*",o),i));return Z.from(r[r.length-1])},isRtl:function(e){return"rtl"===mr.DOM.getStyle(e,"direction",!0)||Yl.test(e.textContent)},isAtZwsp:function(e){return ma(e)||pa(e)},normalizePosition:oc,normalizeForwards:r(oc,!0),normalizeBackwards:r(oc,!1),hasSameParentBlock:function(e,t,n){var i=gg(t,e),o=gg(n,e);return i&&i===o}},ac=function(e,t){return ki(e,t)?_r(t,function(e){return Ao(e)||mo(e)},(n=e,function(e){return Ni(n,ai.fromDom(e.dom().parentNode))})):Z.none();var n},sc=function(e){var t,n,i;e.dom.isEmpty(e.getBody())&&(e.setContent(""),i=(n=(t=e).getBody()).firstChild&&t.dom.isBlock(n.firstChild)?n.firstChild:n,t.selection.setCursorLocation(i,0))},gc=function(e,t){return Za(t)&&!1===(i=e,Ro.isText(o=t)&&/^[ \t\r\n]*$/.test(o.data)&&!1===function(e,t){var n,o,a=ai.fromDom(i);return n=ai.fromDom(t),o=r(Ni,a),Kr(n,"pre,code",o).isSome()}(0,o))||Ro.isElement(n=t)&&"A"===n.nodeName&&n.hasAttribute("name")||lc(t);var n,i,o},lc=Ro.hasAttribute("data-mce-bookmark"),cc=Ro.hasAttribute("data-mce-bogus"),uc=Ro.hasAttributeValue("data-mce-bogus","all"),Ic=function(e){return function(e){var t,n,i=0;if(gc(e,e))return!1;if(!(n=e.firstChild))return!0;t=new ao(n,e);do{if(uc(n))n=t.next(!0);else if(cc(n))n=t.next();else if(Ro.isBr(n))i++,n=t.next();else{if(gc(e,n))return!1;n=t.next()}}while(n);return i<=1}(e.dom())},dc=Gi("block","position"),Cc=Gi("from","to"),hc=function(e,t){var n=ai.fromDom(e),i=ai.fromDom(t.container());return ac(n,i).map(function(e){return dc(e,t)})},Ac=function(e,t){return function(e,t,n){return ki(t,e)?function(e,t){for(var n=W(t)?t:x,i=e.dom(),o=[];null!=i.parentNode;){var r=i.parentNode,a=ai.fromDom(r);if(o.push(a),!0===n(a))break;i=r}return o}(e,function(e){return n(e)||Ni(e,t)}).slice(0,-1):[]}(e,t,i(!1))},fc=Ac,mc=function(e,t){return[e].concat(Ac(e,t))},pc=function(e){var t,n=(t=Oi(e),P(t,Io).fold(function(){return t},function(e){return t.slice(0,e)}));return M(n,kr),n},bc=function(e,t){var n=mc(t,e);return J(n.reverse(),Ic).each(kr)},Bc=function(e,t,n,i){if(Ic(n))return Dl(n),Vg.firstPositionIn(n.dom());0===K(Ei(i),function(e){return!Ic(e)}).length&&Ic(t)&&Qr(i,ai.fromTag("br"));var o=Vg.prevPosition(n.dom(),Cs.before(i.dom()));return M(pc(t),function(e){Qr(i,e)}),bc(e,t),o},vc=function(e,t,n){if(Ic(n))return kr(n),Ic(t)&&Dl(t),Vg.firstPositionIn(t.dom());var i=Vg.lastPositionIn(n.dom());return M(pc(t),function(e){Xr(n,e)}),bc(e,t),i},yc=function(e,t){Vg.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(ai.fromDom).filter(ho).each(kr)},xc=function(e,t,n){return yc(!0,t),yc(!1,n),function(e,t){return ki(t,e)?(n=mc(e,t),Z.from(n[n.length-1])):Z.none();var n}(t,n).fold(r(vc,e,t,n),r(Bc,e,t,n))},Fc=function(e,t,n,i){return t?xc(e,i,n):xc(e,n,i)},Gc=function(e,t){var n,i=ai.fromDom(e.getBody());return(n=function(e,t,n){return n.collapsed?function(e,t,n){var i=hc(e,Cs.fromRangeStart(n)),o=i.bind(function(n){return Vg.fromPosition(t,e,n.position()).bind(function(n){return hc(e,n).map(function(n){return i=e,o=t,Ro.isBr((r=n).position().getNode())&&!1===Ic(r.block())?Vg.positionIn(!1,r.block().dom()).bind(function(e){return e.isEqual(r.position())?Vg.fromPosition(o,i,e).bind(function(e){return hc(i,e)}):Z.some(r)}).getOr(r):r;var i,o,r})})});return Ma([i,o],Cc).filter(function(e){return!1===Ni((i=e).from().block(),i.to().block())&&Ui((n=e).from().block()).bind(function(e){return Ui(n.to().block()).filter(function(t){return Ni(e,t)})}).isSome()&&!1===Ro.isContentEditableFalse((t=e).from().block())&&!1===Ro.isContentEditableFalse(t.to().block());var t,n,i})}(e,t,n):Z.none()}(i.dom(),t,e.selection.getRng()).bind(function(e){return Fc(i,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},Qc=function(e,t){var n=ai.fromDom(t),i=r(Ni,e);return Mr(n,Bo,i).isSome()},wc=function(e,t){return!e.selection.isCollapsed()&&function(e){var t,n,i,o,r=ai.fromDom(e.getBody());return function(e,t){var n,i,o=Vg.prevPosition(e.dom(),Cs.fromRangeStart(t)).isNone(),r=Vg.nextPosition(e.dom(),Cs.fromRangeEnd(t)).isNone();return!(Qc(n=e,(i=t).startContainer)||Qc(n,i.endContainer))&&o&&r}(r,e.selection.getRng())?((o=e).setContent(""),o.selection.setCursorLocation(),!0):(t=r,i=(n=e.selection).getRng(),Ma([ac(t,ai.fromDom(i.startContainer)),ac(t,ai.fromDom(i.endContainer))],function(e,o){return!1===Ni(e,o)&&(i.deleteContents(),Fc(t,!0,e,o).each(function(e){n.setRng(e.toRange())}),!0)}).getOr(!1))}(e)},Sc=function(t){if(!D(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],i={};return M(t,function(o,r){var a=Ci(o);if(1!==a.length)throw new Error("one and only one name per case");var s=a[0],g=o[s];if(void 0!==i[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!D(g))throw new Error("case arguments must be an array");n.push(s),i[s]=function(){var i=arguments.length;if(i!==g.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+g.length+" ("+g+"), got "+i);for(var o=new Array(i),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[r].apply(null,o)},match:function(e){var t=Ci(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!ee(n,function(e){return L(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[s].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:s,params:o})}}}}),i},Xc=function(e){return mg(e).exists(ho)},Zc=function(e,t,n){var i=K(mc(ai.fromDom(n.container()),t),Io),o=ne(i).getOr(t);return Vg.fromPosition(e,o.dom(),n).filter(Xc)},Nc=function(e,t){return mg(t).exists(ho)||Zc(!0,e,t).isSome()},kc=function(e,t){return(n=t,Z.from(n.getNode(!0)).map(ai.fromDom)).exists(ho)||Zc(!1,e,t).isSome();var n},Rc=r(Zc,!1),Dc=r(Zc,!0),Uc=function(e){return"\xa0"===e},Tc=function(e){return/^[\r\n\t ]$/.test(e)},Wc=function(e){return!Tc(e)&&!Uc(e)},Ec=function(e,t,n){return Z.from(n.container()).filter(Ro.isText).exists(function(i){var o=e?0:-1;return t(i.data.charAt(n.offset()+o))})},Hc=r(Ec,!0,Tc),Oc=r(Ec,!1,Tc),Lc=function(e){var t=e.container();return Ro.isText(t)&&0===t.data.length},Vc=function(e,t){var n=cg(e,t);return Ro.isContentEditableFalse(n)&&!Ro.isBogusAll(n)},Yc=r(Vc,0),Mc=r(Vc,-1),_c=function(e,t){return Ro.isTable(cg(e,t))},Kc=r(_c,0),zc=r(_c,-1),Jc=Sc([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Pc=function(e,t,n,i){var o=i.getNode(!1===t);return ac(ai.fromDom(e),ai.fromDom(n.getNode())).map(function(e){return Ic(e)?Jc.remove(e.dom()):Jc.moveToElement(o)}).orThunk(function(){return Z.some(Jc.moveToElement(o))})},jc=function(e,t,n){return Vg.fromPosition(t,e,n).bind(function(o){return c=o.getNode(),Bo(ai.fromDom(c))||mo(ai.fromDom(c))?Z.none():(r=e,g=o,l=function(e){return Co(ai.fromDom(e))&&!lg(s,g,r)},Ag(!(a=t),s=n).fold(function(){return Ag(a,g).fold(i(!1),l)},l)?Z.none():t&&Ro.isContentEditableFalse(o.getNode())?Pc(e,t,n,o):!1===t&&Ro.isContentEditableFalse(o.getNode(!0))?Pc(e,t,n,o):t&&Mc(n)?Z.some(Jc.moveToPosition(o)):!1===t&&Yc(n)?Z.some(Jc.moveToPosition(o)):Z.none());var r,a,s,g,l,c})},$c=function(e,t,n){if(0!==n){var i,o,r,a=e.data.slice(t,t+n);e.replaceData(t,n,(o=0===t,r=t+n>=e.data.length,z((i=a).split(""),function(e,t){return-1!==" \f\n\r\t\v".indexOf(t)||"\xa0"===t?e.previousCharIsSpace||""===e.str&&o||e.str.length===i.length-1&&r?{previousCharIsSpace:!1,str:e.str+"\xa0"}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str))}},qc=function(e,t){var n,i=e.data.slice(t),o=i.length-(n=i,n.replace(/^\s+/g,"")).length;return $c(e,t,o)},eu=function(e,t){return i=e,o=(n=t).container(),r=n.offset(),!1===Cs.isTextPosition(n)&&o===i.parentNode&&r>Cs.before(i).offset()?Cs(t.container(),t.offset()-1):t;var n,i,o,r},tu=function(e){return Za(e.previousSibling)?Z.some(Ro.isText(t=e.previousSibling)?Cs(t,t.data.length):Cs.after(t)):e.previousSibling?Vg.lastPositionIn(e.previousSibling):Z.none();var t},nu=function(e){return Za(e.nextSibling)?Z.some(Ro.isText(t=e.nextSibling)?Cs(t,0):Cs.before(t)):e.nextSibling?Vg.firstPositionIn(e.nextSibling):Z.none();var t},iu=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},ou=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(ci(t))},ru=function(e){if(Ic(e)){var t=ai.fromHtml('<br data-mce-bogus="1">');return Nr(e),Xr(e,t),Z.some(Cs.before(t.dom()))}return Z.none()},au=function(e,t,n,i){void 0===i&&(i=!0);var o,a=function(e,t,n){return(i=e,o=t,a=n,i?function(e,t){return nu(t).orThunk(function(){return tu(t)}).orThunk(function(){return Vg.nextPosition(n=e,Cs.after(i=t)).fold(function(){return Vg.prevPosition(n,Cs.before(i))},Z.some);var n,i})}(o,a):function(e,t){return tu(t).orThunk(function(){return nu(t)}).orThunk(function(){return n=e,o=Cs.before((i=t).previousSibling?i.previousSibling:i.parentNode),Vg.prevPosition(n,o).fold(function(){return Vg.nextPosition(n,Cs.after(i))},Z.some);var n,i,o})}(o,a)).map(r(eu,n));var i,o,a}(t,e.getBody(),n.dom()),s=Mr(n,r(ou,e),(o=e.getBody(),function(e){return e.dom()===o})),g=function(e,t,n){var i=Ti(e).filter(di),o=Wi(e).filter(di);return kr(e),Ma([i,o,t],function(e,t,i){var o,r,a,s,g=e.dom(),l=t.dom(),c=g.data.length;return r=l,a=n,s=$n((o=g).data).length,o.appendData(r.data),kr(ai.fromDom(r)),a&&qc(o,s),i.container()===l?Cs(g,c):i}).orThunk(function(){return n&&(i.each(function(e){return t=e.dom(),n=e.dom().length,o=(i=t.data.slice(0,n)).length-$n(i).length,$c(t,n-o,o);var t,n,i,o}),o.each(function(e){return qc(e.dom(),0)})),t})}(n,a,function(e,t){return n=e.schema.getTextInlineElements(),i=ci(t),hi.call(n,i);var n,i}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(ru).fold(function(){i&&iu(e,t,g)},function(n){i&&iu(e,t,Z.some(n))})},su=function(e,t){return e.selection.isCollapsed()?function(e,t){var n,i,o,r,a,s;return(n=e.getBody(),i=t,o=e.selection.getRng(),r=hg(i?1:-1,n,o),a=Cs.fromRangeStart(r),s=ai.fromDom(n),!1===i&&Mc(a)?Z.some(Jc.remove(a.getNode(!0))):i&&Yc(a)?Z.some(Jc.remove(a.getNode())):!1===i&&Yc(a)&&kc(s,a)?Rc(s,a).map(function(e){return Jc.remove(e.getNode())}):i&&Mc(a)&&Nc(s,a)?Dc(s,a).map(function(e){return Jc.remove(e.getNode())}):function(e,t,n){return a=n.getNode(!1===(r=t)),s=r?"after":"before",Ro.isElement(a)&&a.getAttribute("data-mce-caret")===s?(i=t,o=n.getNode(!1===t),i&&Ro.isContentEditableFalse(o.nextSibling)?Z.some(Jc.moveToElement(o.nextSibling)):!1===i&&Ro.isContentEditableFalse(o.previousSibling)?Z.some(Jc.moveToElement(o.previousSibling)):Z.none()).fold(function(){return jc(e,t,n)},Z.some):jc(e,t,n).bind(function(t){return i=e,o=n,t.fold(function(e){return Z.some(Jc.remove(e))},function(e){return Z.some(Jc.moveToElement(e))},function(e){return lg(o,e,i)?Z.none():Z.some(Jc.moveToPosition(e))});var i,o});var i,o,r,a,s}(n,i,a)).map(function(n){return n.fold((a=e,s=t,function(e){return a._selectionOverrides.hideFakeCaret(),au(a,s,ai.fromDom(e)),!0}),(o=e,r=t,function(e){var t=r?Cs.before(e):Cs.after(e);return o.selection.setRng(t.toRange()),!0}),(i=e,function(e){return i.selection.setRng(e.toRange()),!0}));var i,o,r,a,s}).getOr(!1)}(e,t):function(e,t){var n,i=e.selection.getNode();return!!Ro.isContentEditableFalse(i)&&(n=ai.fromDom(e.getBody()),M(Lr(n,".mce-offscreen-selection"),kr),au(e,t,ai.fromDom(e.selection.getNode())),sc(e),!0)}(e,t)},gu=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(Ro.isContentEditableTrue(t)||Ro.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Ro.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(Cs.before(t).toRange())),!0},lu=Ro.isText,cu=function(e){return lu(e)&&e.data[0]===ca},uu=function(e){return lu(e)&&e.data[e.data.length-1]===ca},Iu=function(e){return e.ownerDocument.createTextNode(ca)},du=function(e,t){return e?function(e){if(lu(e.previousSibling))return uu(e.previousSibling)||e.previousSibling.appendData(ca),e.previousSibling;if(lu(e))return cu(e)||e.insertData(0,ca),e;var t=Iu(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(lu(e.nextSibling))return cu(e.nextSibling)||e.nextSibling.insertData(0,ca),e.nextSibling;if(lu(e))return uu(e)||e.appendData(ca),e;var t=Iu(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},Cu=r(du,!0),hu=r(du,!1),Au=function(e,t){return Ro.isText(e.container())?du(t,e.container()):du(t,e.getNode())},fu=function(e,t){var n=t.get();return n&&e.container()===n&&ha(n)},mu=function(e,t){return t.fold(function(t){_s.remove(e.get());var n=Cu(t);return e.set(n),Z.some(Cs(n,n.length-1))},function(t){return Vg.firstPositionIn(t).map(function(t){if(fu(t,e))return Cs(e.get(),1);_s.remove(e.get());var n=Au(t,!0);return e.set(n),Cs(n,1)})},function(t){return Vg.lastPositionIn(t).map(function(t){if(fu(t,e))return Cs(e.get(),e.get().length-1);_s.remove(e.get());var n=Au(t,!1);return e.set(n),Cs(n,n.length-1)})},function(t){_s.remove(e.get());var n=hu(t);return e.set(n),Z.some(Cs(n,1))})},pu=function(e,t){for(var n=0;n<e.length;n++){var i=e[n].apply(null,t);if(i.isSome())return i}return Z.none()},bu=Sc([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Bu=function(e,t){return gg(t,e)||e},vu=function(e,t,n){var i=rc.normalizeForwards(n),o=Bu(t,i.container());return rc.findRootInline(e,o,i).fold(function(){return Vg.nextPosition(o,i).bind(r(rc.findRootInline,e,o)).map(function(e){return bu.before(e)})},Z.none)},yu=function(e,t){return null===Ws(e,t)},xu=function(e,t,n){return rc.findRootInline(e,t,n).filter(r(yu,t))},Fu=function(e,t,n){var i=rc.normalizeBackwards(n);return xu(e,t,i).bind(function(e){return Vg.prevPosition(e,i).isNone()?Z.some(bu.start(e)):Z.none()})},Gu=function(e,t,n){var i=rc.normalizeForwards(n);return xu(e,t,i).bind(function(e){return Vg.nextPosition(e,i).isNone()?Z.some(bu.end(e)):Z.none()})},Qu=function(e,t,n){var i=rc.normalizeBackwards(n),o=Bu(t,i.container());return rc.findRootInline(e,o,i).fold(function(){return Vg.prevPosition(o,i).bind(r(rc.findRootInline,e,o)).map(function(e){return bu.after(e)})},Z.none)},wu=function(e){return!1===rc.isRtl(Xu(e))},Su=function(e,t,n){return pu([vu,Fu,Gu,Qu],[e,t,n]).filter(wu)},Xu=function(e){return e.fold(o,o,o,o)},Zu=function(e){return e.fold(i("before"),i("start"),i("end"),i("after"))},Nu=function(e){return e.fold(bu.before,bu.before,bu.after,bu.after)},ku=function(e,t,n,i,o,r){return Ma([rc.findRootInline(t,n,i),rc.findRootInline(t,n,o)],function(t,i){return t!==i&&rc.hasSameParentBlock(n,t,i)?bu.after(e?t:i):r}).getOr(r)},Ru=function(e,t){return e.fold(i(!0),function(e){return i=t,!(Zu(n=e)===Zu(i)&&Xu(n)===Xu(i));var n,i})},Du=function(e,t){return e?t.fold(n(Z.some,bu.start),Z.none,n(Z.some,bu.after),Z.none):t.fold(Z.none,n(Z.some,bu.before),Z.none,n(Z.some,bu.end))},Uu=function(e,t,n,i){var o=rc.normalizePosition(e,i),a=Su(t,n,o);return Su(t,n,o).bind(r(Du,e)).orThunk(function(){return s=t,g=n,l=a,c=rc.normalizePosition(o=e,i),Vg.fromPosition(o,g,c).map(r(rc.normalizePosition,o)).fold(function(){return l.map(Nu)},function(e){return Su(s,g,e).map(r(ku,o,s,g,c,e)).filter(r(Ru,l))}).filter(wu);var o,s,g,l,c})},Tu=Su,Wu=Uu,Eu=(r(Uu,!1),r(Uu,!0),Nu),Hu=function(e){return e.fold(bu.start,bu.start,bu.end,bu.end)},Ou=function(e,t,n){var i=e?1:-1;return t.setRng(Cs(n.container(),n.offset()+i).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Lu=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Vu=function(e){return!1!==e.settings.inline_boundaries},Yu=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Mu=function(e,t,n){return mu(t,n).map(function(t){return Lu(e,t),n})},_u=function(e,t,n){return function(){return!!Vu(t)&&function(e,t){var n=t.selection.getRng(),i=e?Cs.fromRangeEnd(n):Cs.fromRangeStart(n);return!!W(t.selection.getSel().modify)&&(e&&ma(i)?Ou(!0,t.selection,i):!(e||!pa(i))&&Ou(!1,t.selection,i))}(e,t)}},Ku={move:function(e,t,n){return function(){return!!Vu(e)&&(i=e,o=t,a=n,s=i.getBody(),g=Cs.fromRangeStart(i.selection.getRng()),l=r(rc.isInlineTarget,i),Wu(a,l,s,g).bind(function(e){return Mu(i,o,e)})).isSome();var i,o,a,s,g,l}},moveNextWord:r(_u,!0),movePrevWord:r(_u,!1),setupSelectedState:function(e){var t=Ur(null),n=r(rc.isInlineTarget,e);return e.on("NodeChange",function(i){var o,a,s,g;Vu(e)&&(o=n,a=i.parents,s=K(e.dom.select('*[data-mce-selected="inline-boundary"]'),o),g=K(a,o),M(te(s,g),r(Yu,!1)),M(te(g,s),r(Yu,!0)),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Cs.fromRangeStart(e.selection.getRng());Cs.isTextPosition(n)&&!1===rc.isAtZwsp(n)&&(Lu(e,_s.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,i){if(t.selection.isCollapsed()){var o=K(i,e);M(o,function(i){var o=Cs.fromRangeStart(t.selection.getRng());Tu(e,t.getBody(),o).bind(function(e){return Mu(t,n,e)})})}}(n,e,t,i.parents))}),t},setCaretPosition:Lu},zu=function(e,t){return function(n){return mu(t,n).map(function(t){return Ku.setCaretPosition(e,t),!0}).getOr(!1)}},Ju=function(t,n,i,o){var a=t.getBody(),s=r(rc.isInlineTarget,t);t.undoManager.ignore(function(){var r,g,l;t.selection.setRng((r=i,g=o,(l=e.document.createRange()).setStart(r.container(),r.offset()),l.setEnd(g.container(),g.offset()),l)),t.execCommand("Delete"),Tu(s,a,Cs.fromRangeStart(t.selection.getRng())).map(Hu).map(zu(t,n))}),t.nodeChanged()},Pu=function(e,t,n){if(e.selection.isCollapsed()&&!1!==e.settings.inline_boundaries){var o=Cs.fromRangeStart(e.selection.getRng());return function(e,t,n,o){var a,s,g=(a=e.getBody(),s=o.container(),gg(s,a)||a),l=r(rc.isInlineTarget,e),c=Tu(l,g,o);return c.bind(function(e){return n?e.fold(i(Z.some(Hu(e))),Z.none,i(Z.some(Eu(e))),Z.none):e.fold(Z.none,i(Z.some(Eu(e))),Z.none,i(Z.some(Hu(e))))}).map(zu(e,t)).getOrThunk(function(){var i=Vg.navigate(n,g,o),r=i.bind(function(e){return Tu(l,g,e)});return c.isSome()&&r.isSome()?rc.findRootInline(l,g,o).map(function(t){return!!Ma([Vg.firstPositionIn(i=t),Vg.lastPositionIn(i)],function(e,t){var n=rc.normalizePosition(!0,e),o=rc.normalizePosition(!1,t);return Vg.nextPosition(i,n).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)&&(au(e,n,ai.fromDom(t)),!0);var i}).getOr(!1):r.bind(function(r){return i.map(function(i){return n?Ju(e,t,o,i):Ju(e,t,i,o),!0})}).getOr(!1)})}(e,t,n,o)}return!1},ju=Gi("start","end"),$u=Gi("rng","table","cells"),qu=Sc([{removeTable:["element"]},{emptyCells:["cells"]}]),eI=function(e,t){return Jr(ai.fromDom(e),"td,th",t)},tI=function(e,t){return Kr(e,"table",t)},nI=function(e){return!1===Ni(e.start(),e.end())},iI=function(e,t){return tI(e.start(),t).bind(function(n){return tI(e.end(),t).bind(function(e){return Ni(n,e)?Z.some(n):Z.none()})})},oI=function(e){return Lr(e,"td,th")},rI=function(e,t){return iI(t,e).isSome()},aI=function(e,t){return P(e,function(e){return Ni(e,t)})},sI=function(e){return(t=e,Ma([aI(t.cells(),t.rng().start()),aI(t.cells(),t.rng().end())],function(e,n){return t.cells().slice(e,n+1)})).map(function(t){var n=e.cells();return t.length===n.length?qu.removeTable(e.table()):qu.emptyCells(t)});var t},gI=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},lI=gI,cI=function(e,t){var n=Lr(t,"td[data-mce-selected],th[data-mce-selected]"),i=function(e){return K(function(e){return q(e,function(e){var t=Oa(e);return t?[ai.fromDom(t)]:[]})}(e),Bo)}(e);return 0<n.length?n:i},uI=cI,II=function(e){return cI(lI(e.selection.getSel()),ai.fromDom(e.getBody()))},dI=function(e,t){return M(t,Dl),e.selection.setCursorLocation(t[0].dom(),0),!0},CI=function(e,t){return au(e,!1,t),!0},hI=function(e,t){return J(mc(t,e),Bo)},AI=function(e,t){return J(mc(t,e),function(e){return"caption"===ci(e)})},fI=function(e,t){return Dl(t),e.selection.setCursorLocation(t.dom(),0),Z.some(!0)},mI=function(e,t){var n,i,o,a,s,g=ai.fromDom(e.selection.getStart(!0)),l=II(e);return e.selection.isCollapsed()&&0===l.length?function(e,t,n){var i=ai.fromDom(e.getBody());return AI(i,n).fold(function(){return function(e,t,n,i){var o=Cs.fromRangeStart(e.selection.getRng());return hI(n,i).bind(function(i){return Ic(i)?fI(e,i):(r=n,a=i,s=o,Vg.navigate(t,e.getBody(),s).bind(function(e){return hI(r,ai.fromDom(e.getNode())).map(function(e){return!1===Ni(e,a)})}));var r,a,s})}(e,t,i,n)},function(n){return r=t,a=i,s=n,g=Cs.fromRangeStart((o=e).selection.getRng()),Ic(s)?fI(o,s):function(e,t,n,i,o){return Vg.navigate(n,e.getBody(),o).bind(function(r){return g=n,l=o,c=r,Vg.firstPositionIn((s=i).dom()).bind(function(e){return Vg.lastPositionIn(s.dom()).map(function(t){return g?l.isEqual(e)&&c.isEqual(t):l.isEqual(t)&&c.isEqual(e)})}).getOr(!0)?fI(e,i):(a=i,AI(t,ai.fromDom(r.getNode())).map(function(e){return!1===Ni(e,a)}));var a,s,g,l,c}).or(Z.some(!0))}(o,a,r,s,g);var o,r,a,s,g}).getOr(!1)}(e,t,g):(i=g,o=ai.fromDom((n=e).getBody()),a=n.selection.getRng(),0!==(s=II(n)).length?dI(n,s):function(e,t,n,i){return AI(t,i).fold(function(){return i=e,function(e,t){return function(e,t){var n,i,o,a,s=r(Ni,e);return(n=t,i=s,o=eI(n.startContainer,i),a=eI(n.endContainer,i),Ma([o,a],ju).filter(nI).filter(function(e){return rI(i,e)}).orThunk(function(){return function(e,t){var n=eI(t.startContainer,e),i=eI(t.endContainer,e);return t.collapsed?Z.none():Ma([n,i],ju).fold(function(){return n.fold(function(){return i.bind(function(t){return tI(t,e).bind(function(e){return ne(oI(e)).map(function(e){return ju(e,t)})})})},function(t){return tI(t,e).bind(function(e){return ie(oI(e)).map(function(e){return ju(t,e)})})})},function(t){return rI(e,t)?Z.none():(i=e,tI((n=t).start(),i).bind(function(e){return ie(oI(e)).map(function(e){return ju(n.start(),e)})}));var n,i})}(i,n)})).bind(function(e){return iI(t=e,s).map(function(e){return $u(t,e,oI(e))});var t})}(e,n).bind(sI)}(t).map(function(e){return e.fold(r(CI,i),r(dI,i))});var i},function(t){return fI(e,t)}).getOr(!1)}(n,o,a,i))},pI=sl,bI=function(e,t,n){var i=e.formatter.get(n);if(i)for(var o=0;o<i.length;o++)if(!1===i[o].inherit&&e.dom.is(t,i[o].selector))return!0;return!1},BI=function(e,t,n,i){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,function(t){return!!bI(e,t,n)||t.parentNode===o||!!xI(e,t,n,i,!0)}),xI(e,t,n,i))},vI=function(e,t,n){return!!pI(t,n.inline)||!!pI(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},yI=function(e,t,n,i,o,r){var a,s,g,l=n[i];if(n.onmatch)return n.onmatch(t,n,i);if(l)if(void 0===l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===i?e.getAttrib(t,a):ll(e,t,a),o&&!s&&!n.exact)return;if((!o||n.exact)&&!pI(s,gl(e,al(l[a],r),a)))return}}else for(g=0;g<l.length;g++)if("attributes"===i?e.getAttrib(t,l[g]):ll(e,t,l[g]))return n;return n},xI=function(e,t,n,i,o){var r,a,s,g,l=e.formatter.get(n),c=e.dom;if(l&&t)for(a=0;a<l.length;a++)if(vI(e.dom,t,r=l[a])&&yI(c,t,r,"attributes",o,i)&&yI(c,t,r,"styles",o,i)){if(g=r.classes)for(s=0;s<g.length;s++)if(!e.dom.hasClass(t,g[s]))return;return r}},FI={matchNode:xI,matchName:vI,match:function(e,t,n,i){var o;return i?BI(e,i,t,n):(i=e.selection.getNode(),!!BI(e,i,t,n)||!((o=e.selection.getStart())===i||!BI(e,o,t,n)))},matchAll:function(e,t,n){var i,o=[],r={};return i=e.selection.getStart(),e.dom.getParent(i,function(i){var a,s;for(a=0;a<t.length;a++)!r[s=t[a]]&&xI(e,i,s,n)&&(r[s]=!0,o.push(s))},e.dom.getRoot()),o},canApply:function(e,t){var n,i,o,r,a,s=e.formatter.get(t),g=e.dom;if(s)for(n=e.selection.getStart(),i=ul(g,n),r=s.length-1;0<=r;r--){if(!(a=s[r].selector)||s[r].defaultBlock)return!0;for(o=i.length-1;0<=o;o--)if(g.is(i[o],a))return!0}return!1},matchesUnInheritedFormatSelector:bI},GI=function(e,t){return e.splitText(t)},QI=function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset;return t===i&&Ro.isText(t)?0<n&&n<t.nodeValue.length&&(t=(i=GI(t,n)).previousSibling,n<o?(t=i=GI(i,o-=n).previousSibling,o=i.nodeValue.length,n=0):o=0):(Ro.isText(t)&&0<n&&n<t.nodeValue.length&&(t=GI(t,n),n=0),Ro.isText(i)&&0<o&&o<i.nodeValue.length&&(o=(i=GI(i,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:i,endOffset:o}},wI=ca,SI="_mce_caret",XI=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==wI||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},ZI=function(e){var t;if(e)for(e=(t=new ao(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},NI=function(e){var t=ai.fromTag("span");return Bi(t,{id:SI,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Xr(t,ai.fromText(wI)),t},kI=function(e,t,n){void 0===n&&(n=!0);var i,o=e.dom,r=e.selection;if(XI(t))au(e,!1,ai.fromDom(t),n);else{var a=r.getRng(),s=o.getParent(t,o.isBlock),g=((i=ZI(t))&&i.nodeValue.charAt(0)===wI&&i.deleteData(0,1),i);a.startContainer===g&&0<a.startOffset&&a.setStart(g,a.startOffset-1),a.endContainer===g&&0<a.endOffset&&a.setEnd(g,a.endOffset-1),o.remove(t,!0),s&&o.isEmpty(s)&&Dl(ai.fromDom(s)),r.setRng(a)}},RI=function(e,t,n){void 0===n&&(n=!0);var i=e.dom,o=e.selection;if(t)kI(e,t,n);else if(!(t=Ws(e.getBody(),o.getStart())))for(;t=i.get(SI);)kI(e,t,!1)},DI=function(e,t,n){var i=e.dom,o=i.getParent(n,r(il,e));o&&i.isEmpty(o)?n.parentNode.replaceChild(t,n):(function(e){var t=Lr(e,"br"),n=K(function(e){for(var t=[],n=e.dom();n;)t.push(ai.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),ho);t.length===n.length&&M(n,kr)}(ai.fromDom(n)),i.isEmpty(n)?n.parentNode.replaceChild(t,n):i.insertAfter(t,n))},UI=function(e,t){return e.appendChild(t),t},TI=function(e,t){var n,i,o=(n=function(e,t){return UI(e,t.cloneNode(!1))},i=t,function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,function(e){i=n(i,e)}),i);return UI(o,o.ownerDocument.createTextNode(wI))},WI=function(e){e.on("mouseup keydown",function(t){var n,i,o,r;i=t.keyCode,o=(n=e).selection,r=n.getBody(),RI(n,null,!1),8!==i&&46!==i||!o.isCollapsed()||o.getStart().innerHTML!==wI||RI(n,Ws(r,o.getStart())),37!==i&&39!==i||RI(n,Ws(r,o.getStart()))})},EI=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(ci(t))&&!Ts(t.dom())&&!Ro.isBogus(t.dom())},HI=function(e){return 1===Oi(e).length},OI=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n,o=ai.fromDom(e.getBody()),a=ai.fromDom(e.selection.getStart()),s=K((n=mc(a,o),P(n,Io).fold(i(n),function(e){return n.slice(0,e)})),HI);return ie(s).map(function(n){var i,o=Cs.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Ma([Vg.firstPositionIn(n),Vg.lastPositionIn(n)],function(i,o){var r=rc.normalizePosition(!0,i),a=rc.normalizePosition(!1,o),s=rc.normalizePosition(!1,t);return e?Vg.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(r)}).getOr(!1):Vg.prevPosition(n,s).map(function(e){return e.isEqual(r)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)}(t,o,n.dom())||Ts((i=n).dom())&&XI(i.dom())||(function(e,t,n,i){var o,a,s,g,l=r(EI,t),c=Y(K(i,l),function(e){return e.dom()});if(0===c.length)au(t,e,n);else{var u=(o=n.dom(),a=c,s=NI(!1),g=TI(a,s.dom()),Qr(ai.fromDom(o),s),kr(ai.fromDom(o)),Cs(g,0));t.selection.setRng(u.toRange())}}(t,e,n,s),0))}).getOr(!1)}(e,t)},LI=Ro.isContentEditableTrue,VI=Ro.isContentEditableFalse,YI=function(e,t,n,i,o){return t._selectionOverrides.showCaret(e,n,i,o)},MI=function(e,t){var n,i;return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((i=(n=t).ownerDocument.createRange()).selectNode(n),i)},_I=function(e,t,n){var i=hg(1,e.getBody(),t),o=Cs.fromRangeStart(i),r=o.getNode();if(VI(r))return YI(1,e,r,!o.isAtEnd(),!1);var a=o.getNode(!0);if(VI(a))return YI(1,e,a,!1,!1);var s=e.dom.getParent(o.getNode(),function(e){return VI(e)||LI(e)});return VI(s)?YI(1,e,s,!1,n):null},KI=function(e,t,n){return t&&t.collapsed&&_I(e,t,n)||t},zI=function(e,t,n,i,o,r){var a,s,g=YI(i,e,r.getNode(!o),o,!0);if(t.collapsed){var l=t.cloneRange();o?l.setEnd(g.startContainer,g.startOffset):l.setStart(g.endContainer,g.endOffset),l.deleteContents()}else t.deleteContents();return e.selection.setRng(g),a=e.dom,Ro.isText(s=n)&&0===s.data.length&&a.remove(s),!0},JI=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Ro.isText(n.commonAncestorContainer))return!1;var i=t?Is.Forwards:Is.Backwards,o=kg(e.getBody()),a=r(pg,o.next),s=r(pg,o.prev),g=t?a:s,l=t?Yc:Mc,c=fg(i,e.getBody(),n),u=rc.normalizePosition(t,g(c));if(!u)return!1;if(l(u))return zI(e,n,c.getNode(),i,t,u);var I=g(u);return!!(I&&l(I)&&bg(u,I))&&zI(e,n,c.getNode(),i,t,I)}(e,t)},PI=function(e,t){e.getDoc().execCommand(t,!1,null)},jI=function(e){su(e,!1)||JI(e,!1)||Pu(e,!1)||Gc(e,!1)||mI(e)||wc(e)||OI(e,!1)||(PI(e,"Delete"),sc(e))},$I=function(e){su(e,!0)||JI(e,!0)||Pu(e,!0)||Gc(e,!0)||mI(e)||wc(e)||OI(e,!0)||PI(e,"ForwardDelete")},qI=function(e){return function(t,n){return Z.from(n).map(ai.fromDom).filter(Ii).bind(function(n){return function(e,t,n){var i=function(t){return n=e,i=t.dom(),o=Fi(i,n),Z.from(o).filter(function(e){return 0<e.length});var n,i,o};return _r(ai.fromDom(n),function(e){return i(e).isSome()},function(e){return Ni(ai.fromDom(t),e)}).bind(i)}(e,t,n.dom()).or((i=e,o=n.dom(),Z.from(mr.DOM.getStyle(o,i,!0))));var i,o}).getOr("")}},ed={getFontSize:qI("font-size"),getFontFamily:n(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},qI("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,i=Math.pow(10,t||0),Math.round(n*i)/i+"pt"):e;var n,i}},td=function(e){return Vg.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return Ro.isText(t)?t.parentNode:t})},nd=function(e){return Z.from(e.selection.getRng()).bind(function(t){var n,i=e.getBody();return(n=t).startContainer===i&&0===n.startOffset?Z.none():Z.from(e.selection.getStart(!0))})},id=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var i=function(e){return Pt.explode(e.getParam("font_size_style_values",""))}(e),o=function(e){return Pt.explode(e.getParam("font_size_classes",""))}(e);return o?o[n-1]||t:i[n-1]||t}return t}return t},od=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},rd=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},ad=function(e,t,n){return rd(e,t,function(e){return e.nodeName===n})},sd=function(e){return e&&"TABLE"===e.nodeName},gd=function(e,t,n){for(var i=new ao(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=i[n?"prev":"next"]();)if(Ro.isBr(t))return!0},ld=function(e,t,n,i,o){var r,a,s,g,l,c,u=e.getRoot(),I=e.schema.getNonEmptyElements();if(s=e.getParent(o.parentNode,e.isBlock)||u,i&&Ro.isBr(o)&&t&&e.isEmpty(s))return Z.some(us(o.parentNode,e.nodeIndex(o)));for(r=new ao(o,s);g=r[i?"prev":"next"]();){if("false"===e.getContentEditableParent(g)||(c=u,Aa(l=g)&&!1===rd(l,c,Ts)))return Z.none();if(Ro.isText(g)&&0<g.nodeValue.length)return!1===ad(g,u,"A")?Z.some(us(g,i?g.nodeValue.length:0)):Z.none();if(e.isBlock(g)||I[g.nodeName.toLowerCase()])return Z.none();a=g}return n&&a?Z.some(us(a,0)):Z.none()},cd=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d=e.getRoot(),C=!1;if(r=i[(n?"start":"end")+"Offset"],c=Ro.isElement(o=i[(n?"start":"end")+"Container"])&&r===o.childNodes.length,g=e.schema.getNonEmptyElements(),l=n,Aa(o))return Z.none();if(Ro.isElement(o)&&r>o.childNodes.length-1&&(l=!1),Ro.isDocument(o)&&(o=d,r=0),o===d){if(l&&(s=o.childNodes[0<r?r-1:0])){if(Aa(s))return Z.none();if(g[s.nodeName]||sd(s))return Z.none()}if(o.hasChildNodes()){if(r=Math.min(!l&&0<r?r-1:r,o.childNodes.length-1),r=Ro.isText(o=o.childNodes[r])&&c?o.data.length:0,!t&&o===d.lastChild&&sd(o))return Z.none();if(function(e,t){for(;t&&t!==e;){if(Ro.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(d,o)||Aa(o))return Z.none();if(o.hasChildNodes()&&!1===sd(o)){a=new ao(s=o,d);do{if(Ro.isContentEditableFalse(s)||Aa(s)){C=!1;break}if(Ro.isText(s)&&0<s.nodeValue.length){r=l?0:s.nodeValue.length,o=s,C=!0;break}if(g[s.nodeName.toLowerCase()]&&(!(u=s)||!/^(TD|TH|CAPTION)$/.test(u.nodeName))){r=e.nodeIndex(s),o=s.parentNode,l||r++,C=!0;break}}while(s=l?a.next():a.prev())}}}return t&&(Ro.isText(o)&&0===r&&ld(e,c,t,!0,o).each(function(e){o=e.container(),r=e.offset(),C=!0}),Ro.isElement(o)&&((s=o.childNodes[r])||(s=o.childNodes[r-1]),!s||!Ro.isBr(s)||(I=s).previousSibling&&"A"===I.previousSibling.nodeName||gd(e,s,!1)||gd(e,s,!0)||ld(e,c,t,!0,s).each(function(e){o=e.container(),r=e.offset(),C=!0}))),l&&!t&&Ro.isText(o)&&r===o.nodeValue.length&&ld(e,c,t,!1,o).each(function(e){o=e.container(),r=e.offset(),C=!0}),C?Z.some(us(o,r)):Z.none()},ud=function(e,t){var n=t.collapsed,i=t.cloneRange(),o=us.fromRangeStart(t);return cd(e,n,!0,i).each(function(e){n&&us.isAbove(o,e)||i.setStart(e.container(),e.offset())}),n||cd(e,n,!1,i).each(function(e){i.setEnd(e.container(),e.offset())}),n&&i.collapse(!0),od(t,i)?Z.none():Z.some(i)},Id=function(e,t,n){var i=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(i,n),t.scrollIntoView(i),e.remove(i)},dd=function(e,t,n,i){var o=e.createRng();i?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Cd=function(e,t){var n=ai.fromTag("br");Qr(ai.fromDom(t),n),e.undoManager.add()},hd=function(e,t){Ad(e.getBody(),t)||wr(ai.fromDom(t),ai.fromTag("br"));var n=ai.fromTag("br");wr(ai.fromDom(t),n),Id(e.dom,e.selection,n.dom()),dd(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Ad=function(e,t){return n=Cs.after(t),!!Ro.isBr(n.getNode())||Vg.nextPosition(e,Cs.after(t)).map(function(e){return Ro.isBr(e.getNode())}).getOr(!1);var n},fd=function(e){return e&&"A"===e.nodeName&&"href"in e},md=function(e){return e.fold(i(!1),fd,fd,i(!1))},pd=function(e,n){n.fold(t,r(Cd,e),r(hd,e),t)},bd=function(e,t){var n,i,o,a=(i=r(rc.isInlineTarget,n=e),o=Cs.fromRangeStart(n.selection.getRng()),Tu(i,n.getBody(),o).filter(md));a.isSome()?a.each(r(pd,e)):function(e,t){var n,i,o=e.selection,r=e.dom,a=o.getRng();ud(r,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,g=a.startContainer;if(1===g.nodeType&&g.hasChildNodes()){var l=s>g.childNodes.length-1;g=g.childNodes[Math.min(s,g.childNodes.length-1)]||g,s=l&&3===g.nodeType?g.nodeValue.length:0}var c=r.getParent(g,r.isBlock),u=c?r.getParent(c.parentNode,r.isBlock):null;"LI"!==(u?u.nodeName.toUpperCase():"")||t&&t.ctrlKey||(c=u),g&&3===g.nodeType&&s>=g.nodeValue.length&&(function(e,t,n){for(var i,o=new ao(g,c),r=e.getNonEmptyElements();i=o.next();)if(r[i.nodeName.toLowerCase()]||0<i.length)return!0}(e.schema)||(n=r.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),i=!0)),n=r.create("br"),Fs(r,a,n),Id(r,o,n),dd(r,o,n,i),e.undoManager.add()}(e,t)},Bd={create:Gi("start","soffset","finish","foffset")},vd=(Sc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(e){return e.fold(o,o,o)}),yd=Sc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xd={domRange:yd.domRange,relative:yd.relative,exact:yd.exact,exactFromRange:function(e){return yd.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return ai.fromDom(e.startContainer)},relative:function(e,t){return vd(e)},exact:function(e,t,n,i){return e}});return Di(t)},range:Bd.create},Fd=oi.detect().browser,Gd=function(e,t){var n=di(t)?Ql(t).length:Oi(t).length+1;return n<e?n:e<0?0:e},Qd=function(e){return xd.range(e.start(),Gd(e.soffset(),e.start()),e.finish(),Gd(e.foffset(),e.finish()))},wd=function(e,t){return!Ro.isRestrictedNode(t.dom())&&(ki(e,t)||Ni(e,t))},Sd=function(e){return function(t){return wd(e,t.start())&&wd(e,t.finish())}},Xd=function(e){return xd.range(ai.fromDom(e.startContainer),e.startOffset,ai.fromDom(e.endContainer),e.endOffset)},Zd=function(e,t){return Z.from(t).filter(Sd(e)).map(Qd)},Nd=function(t){var n=e.document.createRange();try{return n.setStart(t.start().dom(),t.soffset()),n.setEnd(t.finish().dom(),t.foffset()),Z.some(n)}catch(g){return Z.none()}},kd=function(e){return(e.bookmark?e.bookmark:Z.none()).bind(r(Zd,ai.fromDom(e.getBody()))).bind(Nd)},Rd=function(e){var t=function(e){return!0===e.inline||Fd.isIE()}(e)?function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?Z.from(t.getRangeAt(0)):Z.none()).map(Xd)}(Di(e).dom()).filter(Sd(e))}(ai.fromDom(e.getBody())):Z.none();e.bookmark=t.isSome()?t:e.bookmark},Dd=function(e){kd(e).each(function(t){e.selection.setRng(t)})},Ud=kd,Td=function(e){return fo(e)||mo(e)},Wd=function(e,t){var n=e.settings,i=e.dom,o=e.selection,r=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),g=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||i.getParent(o.getNode(),i.isBlock)||r.apply("div"),M(function(e){return K(Y(e.selection.getSelectedBlocks(),ai.fromDom),function(e){return!Td(e)&&!Ui(e).map(Td).getOr(!1)})}(e),function(e){!function(e,t,n,i,o,r){if("false"!==e.getContentEditable(r)){var a=n?"margin":"padding";if(a="TABLE"===r.nodeName?"margin":a,a+="rtl"===e.getStyle(r,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(r.style[a]||0,10)-i);e.setStyle(r,a,s?s+o:"")}else s=parseInt(r.style[a]||0,10)+i+o,e.setStyle(r,a,s)}}(i,t,g,s,a,e.dom())})},Ed=Pt.each,Hd=Pt.extend,Od=Pt.map,Ld=Pt.inArray;function Vd(e){var t,n,i,o,r={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,i=e.formatter});var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=r.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(a){}return!1}},g=function(e,t){t=t||"exec",Ed(e,function(e,n){Ed(n.toLowerCase().split(","),function(n){r[t][n]=e})})},l=function(t,n,i){t=t.toLowerCase(),r.value[t]=function(){return n.call(i||e)}};Hd(this,{execCommand:function(t,n,i,o){var a,s,g=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?Dd(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:i})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=r.exec[s])return a(s,n,i),e.fire("ExecCommand",{command:t,ui:n,value:i}),!0;if(Ed(e.plugins,function(o){if(o.execCommand&&o.execCommand(t,n,i))return e.fire("ExecCommand",{command:t,ui:n,value:i}),!(g=!0)}),g)return g;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,i))return e.fire("ExecCommand",{command:t,ui:n,value:i}),!0;try{g=e.getDoc().execCommand(t,n,i)}catch(l){}return!!g&&(e.fire("ExecCommand",{command:t,ui:n,value:i}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=r.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(a){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),r.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(o){}return!1},addCommands:g,addCommand:function(t,n,i){t=t.toLowerCase(),r.exec[t]=function(t,o,r,a){return n.call(i||e,o,r,a)}},addQueryStateHandler:function(t,n,i){t=t.toLowerCase(),r.state[t]=function(){return n.call(i||e)}},addQueryValueHandler:l,hasCustomCommand:function(e){return e=e.toLowerCase(),!!r.exec[e]}});var c=function(t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=null),e.getDoc().execCommand(t,n,i)},u=function(e){return i.match(e)},I=function(t,n){i.toggle(t,n?{value:n}:void 0),e.nodeChanged()},d=function(e){o=n.getBookmark(e)},C=function(){n.moveToBookmark(o)};g({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var i,o=e.getDoc();try{c(n)}catch(t){i=!0}if("paste"!==n||o.queryCommandEnabled(n)||(i=!0),i||!o.queryCommandSupported(n)){var r=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");de.mac&&(r=r.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else i.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Ed("left,center,right,justify".split(","),function(e){t!==e&&i.remove("align"+e)}),"none"!==t&&I("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var i,o;c(e),(i=t.getParent(n.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((o=i.parentNode).nodeName)&&(d(),t.split(o,i),C())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){I(e)},"ForeColor,HiliteColor":function(e,t,n){I(e,n)},FontName:function(t,n,i){var o;(o=e).formatter.toggle("fontname",{value:id(o,i)}),o.nodeChanged()},FontSize:function(t,n,i){var o;(o=e).formatter.toggle("fontsize",{value:id(o,i)}),o.nodeChanged()},RemoveFormat:function(e){i.remove(e)},mceBlockQuote:function(){I("blockquote")},FormatBlock:function(e,t,n){return I(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,i,o){var r=o||n.getNode();r!==e.getBody()&&(d(),e.dom.remove(r,!0),C())},mceSelectNodeDepth:function(i,o,r){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===r)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,i){n.select(i)},mceInsertContent:function(t,n,i){Vl(e,i)},mceInsertRawHTML:function(t,i,o){n.setContent("tiny_mce_marker");var r=e.getContent();e.setContent(r.replace(/tiny_mce_marker/g,function(){return o}))},mceToggleFormat:function(e,t,n){I(n)},mceSetContent:function(t,n,i){e.setContent(i)},"Indent,Outdent":function(t){Wd(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,i,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,r){var a;"string"==typeof r&&(r={href:r}),a=t.getParent(n.getNode(),"a"),r.href=r.href.replace(" ","%20"),a&&r.href||i.remove("link"),r.href&&i.apply("link",r,a)},selectAll:function(){var e=t.getParent(n.getStart(),Ro.isContentEditableTrue);if(e){var i=t.createRng();i.selectNodeContents(e),n.setRng(i)}},delete:function(){jI(e)},forwardDelete:function(){$I(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,i){return bd(e,i),!0}});var h=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),r=Od(o,function(t){return!!i.matchNode(t,e)});return-1!==Ld(r,!0)}};g({JustifyLeft:h("alignleft"),JustifyCenter:h("aligncenter"),JustifyRight:h("alignright"),JustifyFull:h("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return u(e)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var i=t.getParent(n.getNode(),"ul,ol");return i&&("insertunorderedlist"===e&&"UL"===i.tagName||"insertorderedlist"===e&&"OL"===i.tagName)}},"state"),g({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),l("FontName",function(){return nd(t=e).fold(function(){return td(t).map(function(e){return ed.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return ed.getFontFamily(t.getBody(),e)});var t},this),l("FontSize",function(){return nd(t=e).fold(function(){return td(t).map(function(e){return ed.getFontSize(t.getBody(),e)}).getOr("")},function(e){return ed.getFontSize(t.getBody(),e)});var t},this)}var Yd=Pt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Md=function(e){var t,n,i=this,o={},r=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||i,n=e.toggleEvent||r;var s=function(e,t,a,s){var g,l,c;if(!1===t&&(t=r),t)for(t={func:t},s&&Pt.extend(t,s),c=(l=e.toLowerCase().split(" ")).length;c--;)(g=o[e=l[c]])||(g=o[e]=[],n(e,!0)),a?g.unshift(t):g.push(t);return i},g=function(e,t){var r,a,s,g,l;if(e)for(r=(g=e.toLowerCase().split(" ")).length;r--;){if(a=o[e=g[r]],!e){for(s in o)n(s,!1),delete o[s];return i}if(a){if(t)for(l=a.length;l--;)a[l].func===t&&(a=a.slice(0,l).concat(a.slice(l+1)),o[e]=a);else a.length=0;a.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return i};i.fire=function(n,i){var s,l,c,u;if(n=n.toLowerCase(),(i=i||{}).type=n,i.target||(i.target=t),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=a},i.stopPropagation=function(){i.isPropagationStopped=a},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=a},i.isDefaultPrevented=r,i.isPropagationStopped=r,i.isImmediatePropagationStopped=r),e.beforeFire&&e.beforeFire(i),s=o[n])for(l=0,c=s.length;l<c;l++){if((u=s[l]).once&&g(n,u.func),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(!1===u.func.call(t,i))return i.preventDefault(),i}return i},i.on=s,i.off=g,i.once=function(e,t,n){return s(e,t,n,{once:!0})},i.has=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)}};Md.isNative=function(e){return!!Yd[e.toLowerCase()]};var _d,Kd=function(e){return e._eventDispatcher||(e._eventDispatcher=new Md({scope:e,toggleEvent:function(t,n){Md.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},zd={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;if(t=Kd(this).fire(e,t,n),!1!==n&&this.parent)for(var i=this.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return Kd(this).on(e,t,n)},off:function(e,t){return Kd(this).off(e,t)},once:function(e,t){return Kd(this).once(e,t)},hasEventListeners:function(e){return Kd(this).has(e)}},Jd=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(l){}},Pd=function(e,t){(function(e,t,n){var i,o;Hr(e,t)&&!1===n?(o=t,Wr(i=e)?i.dom().classList.remove(o):function(e,t){return"mce-content-readonly",0<(o=K(Tr(n=e,i="class"),function(e){return"mce-content-readonly"!==e})).length?bi(n,i,o.join(" ")):yi(n,i),!1;var n,i,o}(i),function(e){0===(Wr(e)?e.dom().classList:Tr(e,"class")).length&&yi(e,"class")}(i)):n&&Er(e,t)})(ai.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Jd(e,"StyleWithCSS",!1),Jd(e,"enableInlineTableEditing",!1),Jd(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},jd=mr.DOM,$d=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=jd.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},qd=function(e,t,n){var i;(i=e).hidden||i.readonly?!0===e.readonly&&n.preventDefault():e.fire(t,n)},eC=function(e,t){var n,i;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=$d(e,t),e.settings.event_root){if(_d||(_d={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&_d){for(t in _d)e.dom.unbind($d(e,t));_d=null}})),_d[t])return;_d[t]=i=function(n){for(var i=n.target,o=e.editorManager.get(),r=o.length;r--;){var a=o[r].getBody();(a===i||jd.isChildOf(i,a))&&qd(o[r],t,n)}},jd.bind(n,t,i)}else jd.bind(n,t,i=function(n){qd(e,t,n)}),e.delegates[t]=i},tC={bindPendingEventDelegates:function(){var e=this;Pt.each(e._pendingNativeEvents,function(t){eC(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?eC(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind($d(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),i=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind($d(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&i&&(n.onload=null,i.unbind(t.getWin()),i.unbind(t.getDoc())),i&&(i.unbind(n),i.unbind(t.getContainer()))}},nC=tC=Pt.extend({},zd,tC),iC=Gi("sections","settings"),oC=oi.detect().deviceType.isTouch(),rC=["lists","autolink","autosave"],aC={theme:"mobile"},sC=function(e){var t=D(e)?e.join(" "):e,n=Y(k(t)?t.split(" "):[],jn);return K(n,function(e){return 0<e.length})},gC=function(e,t){return e.sections().hasOwnProperty(t)},lC=function(e,t,n,i){var o,a=sC(n.forced_plugins),s=sC(i.plugins),g=(o=e&&gC(t,"mobile")?K(s,r(L,rC)):s,[].concat(sC(a)).concat(sC(o)));return Pt.extend(i,{plugins:g.join(" ")})},cC=function(e,t,n){return Z.from(t.settings[n]).filter(e)},uC=Pt.each,IC=Pt.explode,dC={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},CC=Pt.makeMap("alt,ctrl,shift,meta,access");function hC(e){var t={},n=[],i=function(e){var t,n,i={};for(n in uC(IC(e,"+"),function(e){e in CC?i[e]=!0:/^[0-9]{2,}$/.test(e)?i.keyCode=parseInt(e,10):(i.charCode=e.charCodeAt(0),i.keyCode=dC[e]||e.toUpperCase().charCodeAt(0))}),t=[i.keyCode],CC)i[n]?t.push(n):i[n]=!1;return i.id=t.join(","),i.access&&(i.alt=!0,de.mac?i.ctrl=!0:i.shift=!0),i.meta&&(de.mac?i.meta=!0:(i.ctrl=!0,i.meta=!1)),i},o=function(t,n,o,r){var a;return(a=Pt.map(IC(t,">"),i))[a.length-1]=Pt.extend(a[a.length-1],{func:o,scope:r||e}),Pt.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},r=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){var i,o;((o=e).altKey||o.ctrlKey||o.metaKey||"keydown"===(i=e).type&&112<=i.keyCode&&i.keyCode<=123)&&!e.isDefaultPrevented()&&(uC(t,function(t){if(r(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0}),r(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))}),this.add=function(n,i,r,a){var s;return"string"==typeof(s=r)?r=function(){e.execCommand(s,!1,null)}:Pt.isArray(s)&&(r=function(){e.execCommand(s[0],s[1],s[2])}),uC(IC(Pt.trim(n.toLowerCase())),function(e){var n=o(e,i,r,a);t[n.id]=n}),!0},this.remove=function(e){var n=o(e);return!!t[n.id]&&(delete t[n.id],!0)}}var AC=function(e){var t=Ri(e).dom();return e.dom()===t.activeElement},fC=function(e,t){(function(e,t){return(n=t,n.collapsed?Z.from(La(n.startContainer,n.startOffset)).map(ai.fromDom):Z.none()).bind(function(t){return bo(t)?Z.some(t):!1===ki(e,t)?Z.some(e):Z.none()});var n})(ai.fromDom(e.getBody()),t).bind(function(e){return Vg.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},mC=function(e){if(e.setActive)try{e.setActive()}catch(s){e.focus()}else e.focus()},pC=function(t){return t.inline?function(t){var n,i=t.getBody();return i&&(n=ai.fromDom(i),AC(n)||function(t){return(n=Ri(t),i=void 0!==n?n.dom():e.document,Z.from(i.activeElement).map(ai.fromDom)).filter(function(e){return t.dom().contains(e.dom())});var n,i}(n).isSome())}(t):(n=t).iframeElement&&AC(ai.fromDom(n.iframeElement));var n},bC=function(e){return e.editorManager.setActive(e)},BC=pC,vC=function(e,t){return t.dom()[e]},yC=function(e,t){return parseInt(xi(t,e),10)},xC=r(vC,"clientWidth"),FC=r(vC,"clientHeight"),GC=r(yC,"margin-top"),QC=r(yC,"margin-left"),wC=function(e,t,n){var i,o,r,a,s,g,l,c,u,I,d=ai.fromDom(e.getBody()),C=e.inline?d:ai.fromDom(d.dom().ownerDocument.documentElement),h=(i=e.inline,r=t,a=n,s=(o=C).dom().getBoundingClientRect(),{x:r-(i?s.left+o.dom().clientLeft+QC(o):0),y:a-(i?s.top+o.dom().clientTop+GC(o):0)});return l=h.x,c=h.y,u=xC(g=C),I=FC(g),0<=l&&0<=c&&l<=u&&c<=I},SC=function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),Z.from(t).map(ai.fromDom)).map(function(e){return ki(Ri(e),e)}).getOr(!1)};function XC(e){var t,n=[],i=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},o=function(){0<n.length&&i().reposition(n)},r=function(e){P(n,function(t){return t===e}).each(function(e){n.splice(e,1)})},a=function(t){if(!e.removed&&SC(e))return J(n,function(e){return!((n=i().getArgs(e)).type!==(o=t).type||n.text!==o.text||n.progressBar||n.timeout||o.progressBar||o.timeout);var n,o}).getOrThunk(function(){e.editorManager.setActive(e);var a=i().open(t,function(){r(a),o()});return n.push(a),o(),a})};return(t=e).on("SkinLoaded",function(){var e=t.settings.service_message;e&&a({text:e,type:"warning",timeout:0,icon:""})}),t.on("ResizeEditor ResizeWindow",function(){me.requestAnimationFrame(o)}),t.on("remove",function(){M(n.slice(),function(e){i().close(e)})}),{open:a,close:function(){Z.from(n[0]).each(function(e){i().close(e),r(e),o()})},getNotifications:function(){return n}}}function ZC(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},i=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(n){t.push(n),e.fire("OpenWindow",{win:n})},r=function(n){P(t,function(e){return e===n}).each(function(i){t.splice(i,1),e.fire("CloseWindow",{win:n}),0===t.length&&e.focus()})},a=function(){return Z.from(t[t.length-1])};return e.on("remove",function(){M(t.slice(0),function(e){n().close(e)})}),{windows:t,open:function(t,i){e.editorManager.setActive(e),Rd(e);var a=n().open(t,i,r);return o(a),a},alert:function(e,t,a){var s=n().alert(e,i(a||this,t),r);o(s)},confirm:function(e,t,a){var s=n().confirm(e,i(a||this,t),r);o(s)},close:function(){a().each(function(e){n().close(e),r(e)})},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each(function(t){n().setParams(t,e)})},getWindows:function(){return t}}}var NC={},kC="en",RC={setCode:function(e){e&&(kC=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return kC},rtl:!1,add:function(e,t){var n=NC[e];for(var i in n||(NC[e]=n={}),t)n[i]=t[i];this.setCode(e)},translate:function(e){var t=NC[kC]||{},n=function(e){return Pt.is(e,"function")?Object.prototype.toString.call(e):i(e)?"":""+e},i=function(e){return""===e||null===e||Pt.is(e,"undefined")},o=function(e){return e=n(e),Pt.hasOwn(t,e)?n(t[e]):e};if(i(e))return"";if(Pt.is(e,"object")&&Pt.hasOwn(e,"raw"))return n(e.raw);if(Pt.is(e,"array")){var r=e.slice(1);e=o(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Pt.hasOwn(r,t)?n(r[t]):e})}return o(e).replace(/{context:\w+}$/,"")},data:NC},DC=Gr.PluginManager,UC=function(e,t){e.notificationManager.open({type:"error",text:t})},TC=function(e,t){e._skinLoaded?UC(e,t):e.on("SkinLoaded",function(){UC(e,t)})},WC=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e.window.console;o&&(o.error?o.error.apply(o,arguments):o.log.apply(o,arguments))},EC={pluginLoadError:function(e,t){TC(e,function(e,t){var n=function(e,t){for(var n in DC.urls)if(DC.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return RC.translate(n?["Failed to load plugin: {0} from url {1}",n,t]:["Failed to load plugin url: {0}",t])}(e,t))},pluginInitError:function(e,t,n){var i=RC.translate(["Failed to initialize plugin: {0}",t]);WC(i,n),TC(e,i)},uploadError:function(e,t){TC(e,RC.translate(["Failed to upload image: {0}",t]))},displayError:TC,initError:WC},HC=Gr.PluginManager,OC=Gr.ThemeManager;function LC(){return new(ae.getOrDie("XMLHttpRequest"))}var VC=function(e){var t,n,i=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(i[0]))&&(t=n[1]),{type:t,data:i[1]}},YC=function(n){return 0===n.indexOf("blob:")?(o=n,new Ce(function(e,n){var i=function(){n("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")};try{var r=LC();r.open("GET",o,!0),r.responseType="blob",r.onload=function(){200===this.status?e(this.response):i()},r.onerror=i,r.send()}catch(t){i()}})):0===n.indexOf("data:")?(i=n,new Ce(function(t){var n,o,r,a,s=VC(i);try{n=function(e){return ae.getOrDie("atob")(e)}(s.data)}catch(Db){return void t(new e.Blob([]))}for(a=n.length,o=new(ae.getOrDie("Uint8Array"))(a),r=0;r<o.length;r++)o[r]=n.charCodeAt(r);t(new e.Blob([o],{type:s.type}))})):null;var i,o},MC=VC,_C=0,KC=function(e){return(e||"blobid")+_C++},zC=function(e,t,n,i){var o,r;0!==t.src.indexOf("blob:")?(o=MC(t.src).data,(r=e.findFirst(function(e){return e.base64()===o}))?n({image:t,blobInfo:r}):YC(t.src).then(function(i){r=e.create(KC(),i,o),e.add(r),n({image:t,blobInfo:r})},function(e){i(e)})):(r=e.getByUri(t.src))?n({image:t,blobInfo:r}):YC(t.src).then(function(i){(function(e){return new Ce(function(t){var n=new(ae.getOrDie("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})})(i).then(function(a){o=MC(a).data,r=e.create(KC(),i,o),e.add(r),n({image:t,blobInfo:r})})},function(e){i(e)})},JC=function(e){return e?oe(e.getElementsByTagName("img")):[]},PC=0,jC={uuid:function(e){return e+PC+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};var $C=function(e,t){return e.hasOwnProperty(t.nodeName)},qC=function(e,t){if(Ro.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||$C(e,t.nextSibling)))return!0}return!1},eh=function(e){var t,n,i,o,r,a,s,g,l,c,u,I=e.settings,d=e.dom,C=e.selection,h=e.schema,A=h.getBlockElements(),f=C.getStart(),m=e.getBody();if(u=I.forced_root_block,f&&Ro.isElement(f)&&u&&(c=m.nodeName.toLowerCase(),h.isValidChild(c,u.toLowerCase())&&(p=A,b=m,!V(fc(ai.fromDom(f),ai.fromDom(b)),function(e){return $C(p,e.dom())})))){var p,b,B,v;for(n=(t=C.getRng()).startContainer,i=t.startOffset,o=t.endContainer,r=t.endOffset,l=BC(e),f=m.firstChild;f;)if(B=A,Ro.isText(v=f)||Ro.isElement(v)&&!$C(B,v)&&!$g(v)){if(qC(A,f)){f=(s=f).nextSibling,d.remove(s);continue}a||(a=d.create(u,e.settings.forced_root_block_attrs),f.parentNode.insertBefore(a,f),g=!0),f=(s=f).nextSibling,a.appendChild(s)}else a=null,f=f.nextSibling;g&&l&&(t.setStart(n,i),t.setEnd(o,r),C.setRng(t),e.nodeChanged())}},th=function(e){e.settings.forced_root_block&&e.on("NodeChange",r(eh,e))},nh=function(e){return Vi(e).fold(i([e]),function(t){return[e].concat(nh(t))})},ih=function(e){return Yi(e).fold(i([e]),function(t){return"br"===ci(t)?Ti(t).map(function(t){return[e].concat(ih(t))}).getOr([]):[e].concat(ih(t))})},oh=function(e,t,n,i){var o=n,r=new ao(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Pt.trim(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(de.ie&&de.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"===o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},rh=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount};function ah(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var i,o;o={startContainer:(i=e.selection.getRng()).startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},"nodechange"!==n.type&&od(o,t)||e.fire("SelectionChange"),t=o}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!de.range&&e.selection.isCollapsed()||rh(e)&&!function(t){var i,o;if((o=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(i=o.length;0<=i&&o[i]===n[i];i--);if(-1===i)return n=o,!0}return n=o,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&rh(e)&&("IMG"===e.selection.getNode().nodeName?me.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,i,o,r=e.selection;e.initialized&&r&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=r.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),i=[],e.dom.getParent(n,function(e){if(e===o)return!0;i.push(e)}),(t=t||{}).element=n,t.parents=i,e.fire("NodeChange",t))}}var sh,gh,lh=function(e){var t,n,i,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,{top:o.top+(i=t.defaultView).pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}},ch=function(e,t){return n=(s=e).inline?lh(s.getBody()):{left:0,top:0},a=(r=e).getBody(),i=r.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:0,top:0},{pageX:(o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=lh(e.getContentAreaContainer()),i=(r=(o=e).getBody(),a=o.getDoc().documentElement,o.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:r.scrollLeft||a.scrollLeft,top:r.scrollTop||a.scrollTop});return{left:t.pageX-n.left+i.left,top:t.pageY-n.top+i.top}}var o,r,a;return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+i.left,pageY:o.top-n.top+i.top};var n,i,o,r,a,s},uh=Ro.isContentEditableFalse,Ih=Ro.isContentEditableTrue,dh=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Ch=function(e){e.dragging=!1,e.element=null,dh(e.ghost)},hh=function(e){return z(e,function(e,t){return e.concat(function(e){var t=function(t){return Y(t,function(t){return(t=Da(t)).node=e,t})};if(Ro.isElement(e))return t(e.getClientRects());if(Ro.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))},[])};(gh=sh||(sh={}))[gh.Up=-1]="Up",gh[gh.Down=1]="Down";var Ah=function(e,t,n,i,o,r){var a,s,g=0,l=[],c=function(i){var r,a,c;for(c=hh([i]),-1===e&&(c=c.reverse()),r=0;r<c.length;r++)if(!n(a=c[r],s)){if(0<l.length&&t(a,Mt.last(l))&&g++,a.line=g,o(a))return!0;l.push(a)}};return(s=Mt.last(r.getClientRects()))&&(c(a=r.getNode()),function(e,t,n,i){for(;i=sg(i,e,ka,t);)if(n(i))return}(e,i,c,a)),l},fh=r(Ah,sh.Up,Wa,Ea),mh=r(Ah,sh.Down,Ea,Wa),ph=function(e){return function(t){return t.line>e}},bh=function(e){return function(t){return t.line===e}},Bh=Ro.isContentEditableFalse,vh=sg,yh=function(e,t){return Math.abs(e.left-t)},xh=function(e,t){return Math.abs(e.right-t)},Fh=function(e,t){return e>=t.left&&e<=t.right},Gh=function(e,t){return Mt.reduce(e,function(e,n){var i,o;return i=Math.min(yh(e,t),xh(e,t)),o=Math.min(yh(n,t),xh(n,t)),Fh(t,n)?n:Fh(t,e)?e:o===i&&Bh(n.node)?n:o<i?n:e})},Qh=function(e,t,n,i){for(;i=vh(i,e,ka,t);)if(n(i))return},wh=function(e,t,n){if(n.collapsed)return!1;if(de.ie&&de.ie<=11&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var i=n.startContainer.childNodes[n.startOffset];if(Ro.isElement(i))return V(i.getClientRects(),function(n){return Ha(n,e,t)})}return V(n.getClientRects(),function(n){return Ha(n,e,t)})},Sh={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return de.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Xh=Ro.isContentEditableTrue,Zh=Ro.isContentEditableFalse,Nh=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Xh(t)||Zh(t))return t;t=t.parentNode}return null},kh=function(t){var n,i,o,a=t.getBody(),s=function(n,i,o){var r,a,s=Ur(Z.none()),g=function(){!function(e){var t,i,o,r,a;for(t=An("*[contentEditable=false]",n),r=0;r<t.length;r++)o=(i=t[r]).previousSibling,Ba(o)&&(1===(a=o.data).length?o.parentNode.removeChild(o):o.deleteData(a.length-1,1)),ba(o=i.nextSibling)&&(1===(a=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1))}(),a&&(_s.remove(a),a=null),s.get().each(function(e){An(e.caret).remove(),s.set(Z.none())}),clearInterval(r)},l=function(){r=me.setInterval(function(){BC(t)?An("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden"):An("div.mce-visual-caret",n).addClass("mce-visual-caret-hidden")},500)};return{show:function(i,o){var r,c,u;if(g(),Ro.isElement(u=o)&&/^(TD|TH)$/i.test(u.tagName))return null;if(!function(e){return t.dom.isBlock(e)}(o))return a=function(e,t){var n,i,o;if(i=e.ownerDocument.createTextNode(ca),o=e.parentNode,t){if(da(n=e.previousSibling)){if(Aa(n))return n;if(Ba(n))return n.splitText(n.data.length-1)}o.insertBefore(i,e)}else{if(da(n=e.nextSibling)){if(Aa(n))return n;if(ba(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i)}return i}(o,i),c=o.ownerDocument.createRange(),zs(a.nextSibling)?(c.setStart(a,0),c.setEnd(a,0)):(c.setStart(a,1),c.setEnd(a,1)),c;a=function(t,n,i){var o,r,a;return(o=n.ownerDocument.createElement("p")).setAttribute("data-mce-caret",i?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((a=e.document.createElement("br")).setAttribute("data-mce-bogus","1"),a)),r=n.parentNode,i?r.insertBefore(o,n):n.nextSibling?r.insertBefore(o,n.nextSibling):r.appendChild(o),o}(0,o,i),r=Js(n,o,i),An(a).css("top",r.top);var I=An('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(n)[0];return s.set(Z.some({caret:I,element:o,before:i})),s.get().each(function(e){i&&An(e.caret).addClass("mce-visual-caret-before")}),l(),(c=o.ownerDocument.createRange()).setStart(a,0),c.setEnd(a,0),c},hide:g,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){s.get().each(function(e){var t=Js(n,e.element,e.before);An(e.caret).css(t)})},destroy:function(){return me.clearInterval(r)}}}(t.getBody()),g="sel-"+t.dom.uniqueId(),l=function(e){e&&t.selection.setRng(e)},c=function(){return t.selection.getRng()},u=function(e,n,i,o){return void 0===o&&(o=!0),t.fire("ShowCaret",{target:n,direction:e,before:i}).isDefaultPrevented()?null:(o&&t.selection.scrollIntoView(n,-1===e),s.show(i,n))},I=function(e,t){return t=hg(e,a,t),-1===e?Cs.fromRangeStart(t):Cs.fromRangeEnd(t)},d=function(e){return Aa(e)||ba(e)||Ba(e)},C=function(e){return d(e.startContainer)||d(e.endContainer)},h=function(e,i){var o,r,a,s,l,c,d,h,A,m,p=t.$,b=t.dom;if(!e)return null;if(e.collapsed){if(!C(e))if(!1===i){if(h=I(-1,e),js(h.getNode(!0)))return u(-1,h.getNode(!0),!1,!1);if(js(h.getNode()))return u(-1,h.getNode(),!h.isAtEnd(),!1)}else{if(h=I(1,e),js(h.getNode()))return u(1,h.getNode(),!h.isAtEnd(),!1);if(js(h.getNode(!0)))return u(1,h.getNode(!0),!1,!1)}return null}return l=e.startOffset,c=e.endOffset,3===(s=e.startContainer).nodeType&&0===l&&Zh(s.parentNode)&&(l=b.nodeIndex(s=s.parentNode),s=s.parentNode),1!==s.nodeType?null:(c===l+1&&s===e.endContainer&&(o=s.childNodes[l]),Zh(o)?(A=m=o.cloneNode(!0),(d=t.fire("ObjectSelected",{target:o,targetClone:A})).isDefaultPrevented()?null:(r=zr(ai.fromDom(t.getBody()),"#"+g).fold(function(){return p([])},function(e){return p([e.dom()])}),A=d.targetClone,0===r.length&&(r=p('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",g)).appendTo(t.getBody()),e=t.dom.createRng(),A===m&&de.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(A),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(A)):(r.empty().append("\xa0").append(A).append("\xa0"),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:b.getPos(o,t.getBody()).y}),r[0].focus(),(a=t.selection.getSel()).removeAllRanges(),a.addRange(e),M(Lr(ai.fromDom(t.getBody()),"*[data-mce-selected]"),function(e){yi(e,"data-mce-selected")}),o.setAttribute("data-mce-selected","1"),n=o,f(),e)):null)},A=function(){n&&(n.removeAttribute("data-mce-selected"),zr(ai.fromDom(t.getBody()),"#"+g).each(kr),n=null),zr(ai.fromDom(t.getBody()),"#"+g).each(kr),n=null},f=function(){s.hide()};return de.ceFalse&&(function(){var i,o,I,d;t.on("mouseup",function(e){var n=c();n.collapsed&&wC(t,e.clientX,e.clientY)&&l(_I(t,n,!1))}),t.on("click",function(e){var n;(n=Nh(t,e.target))&&(Zh(n)&&(e.preventDefault(),t.focus()),Xh(n)&&t.dom.isChildOf(n,t.selection.getNode())&&A())}),t.on("blur NewBlock",function(){A()}),t.on("ResizeWindow FullscreenStateChanged",function(){return s.reposition()}),o=!1,(i=t).on("touchstart",function(){o=!1}),i.on("touchmove",function(){o=!0}),i.on("touchend",function(e){var t=Nh(i,e.target);Zh(t)&&(o||(e.preventDefault(),h(MI(i,t))))}),t.on("mousedown",function(e){var n,i=e.target;if((i===a||"HTML"===i.nodeName||t.dom.isChildOf(i,a))&&!1!==wC(t,e.clientX,e.clientY))if(n=Nh(t,i))Zh(n)?(e.preventDefault(),h(MI(t,n))):(A(),Xh(n)&&e.shiftKey||wh(e.clientX,e.clientY,t.selection.getRng())||(f(),t.selection.placeCaretAt(e.clientX,e.clientY)));else if(!1===js(i)){A(),f();var o=function(e,t,n){var i,o,a,s,g,l,c,u=hh(K(oe(e.getElementsByTagName("*")),js)),I=K(u,function(e){return n>=e.top&&n<=e.bottom});return(i=Gh(I,t))&&(i=Gh((s=e,c=function(e,t){var n;return n=K(hh([t]),function(t){return!e(t,g)}),l=l.concat(n),0===n.length},(l=[]).push(g=i),Qh(sh.Up,s,r(c,Wa),g.node),Qh(sh.Down,s,r(c,Ea),g.node),l),t))&&js(i.node)?{node:(o=i).node,before:yh(o,a=t)<xh(o,a)}:null}(a,e.clientX,e.clientY);if(o&&!function(e,n){var i,o=t.dom.getParent(e,t.dom.isBlock),r=t.dom.getParent(n,t.dom.isBlock);return!(!o||!t.dom.isChildOf(o,r)||!1!==Zh(Nh(t,o)))||o&&(i=r,!(t.dom.getParent(o,t.dom.isBlock)===t.dom.getParent(i,t.dom.isBlock)))&&function(e){var t=kg(e);if(!e.firstChild)return!1;var n=Cs.before(e.firstChild),i=t.next(n);return i&&!Yc(i)&&!Mc(i)}(o)}(e.target,o.node)){e.preventDefault();var s=u(1,o.node,o.before,!1);t.getBody().focus(),l(s)}}}),t.on("keypress",function(e){Sh.modifierPressed(e)||Zh(t.selection.getNode())&&e.preventDefault()}),t.on("getSelectionRange",function(e){var t=e.range;if(n){if(!n.parentNode)return void(n=null);(t=t.cloneRange()).selectNode(n),e.range=t}}),t.on("setSelectionRange",function(e){var t;(t=h(e.range,e.forward))&&(e.range=t)}),t.on("AfterSetSelectionRange",function(e){var n=e.range;C(n)||"mcepastebin"===n.startContainer.parentNode.id||f(),t.dom.hasClass(n.startContainer.parentNode,"mce-offscreen-selection")||A()}),t.on("copy",function(e){var n,i=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!de.ie){var o=(n=t.dom.get(g))?n.getElementsByTagName("*")[0]:n;o&&(e.preventDefault(),i.clearData(),i.setData("text/html",o.outerHTML),i.setData("text/plain",o.outerText))}}),function(t){var n;(function(t){var n,i,o,r,a,s,g,l,c,u,I,d,C,h={};n=mr.DOM,s=e.document,i=function(e,t){return function(n){if(0===n.button){var i=J(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_a.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(uh,Ih)).getOr(null);if(s=t.getBody(),uh(g=i)&&g!==s){var o=t.dom.getPos(i),r=t.getBody(),a=t.getDoc().documentElement;e.element=i,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?r.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?r.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=i.offsetWidth,e.height=i.offsetHeight,e.ghost=function(e,t,n,i){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:i}),e.dom.setAttrib(o,"data-mce-selected",null);var r=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(r,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),r.appendChild(o),r}(t,i,e.width,e.height)}}var s,g}}(h,t),g=h,l=t,c=me.throttle(function(e,t){l._selectionOverrides.hideFakeCaret(),l.selection.placeCaretAt(e,t)},0),o=function(e){var t,n,i,o,r,a,s,u,I,d,C,h,A=Math.max(Math.abs(e.screenX-g.screenX),Math.abs(e.screenY-g.screenY));if(g.element&&!g.dragging&&10<A){if(l.fire("dragstart",{target:g.element}).isDefaultPrevented())return;g.dragging=!0,l.focus()}if(g.dragging){var f=(C=g,{pageX:(h=ch(l,e)).pageX-C.relX,pageY:h.pageY+5});I=g.ghost,d=l.getBody(),I.parentNode!==d&&d.appendChild(I),i=g.width,o=g.height,r=g.maxX,a=g.maxY,u=s=0,(t=g.ghost).style.left=(n=f).pageX+"px",t.style.top=n.pageY+"px",n.pageX+i>r&&(s=n.pageX+i-r),n.pageY+o>a&&(u=n.pageY+o-a),t.style.width=i-s+"px",t.style.height=o-u+"px",c(e.clientX,e.clientY)}},d=h,C=t,r=function(e){if(d.dragging&&(r=3===(s=(o=C).selection.getSel().getRangeAt(0).startContainer).nodeType?s.parentNode:s)!==(a=d.element)&&!o.dom.isChildOf(r,a)&&!uh(r)){var t=((i=d.element.cloneNode(!0)).removeAttribute("data-mce-selected"),i),n=C.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY});n.isDefaultPrevented()||(t=n.targetClone,C.undoManager.transact(function(){dh(d.element),C.insertContent(C.dom.getOuterHTML(t)),C._selectionOverrides.hideFakeCaret()}))}var i,o,r,a,s;Ch(d)},u=h,a=function(){u.dragging&&I.fire("dragend"),Ch(u)},(I=t).on("mousedown",i),t.on("mousemove",o),t.on("mouseup",r),n.bind(s,"mousemove",o),n.bind(s,"mouseup",a),t.on("remove",function(){n.unbind(s,"mousemove",o),n.unbind(s,"mouseup",a)})})(t),(n=t).on("drop",function(e){var t=void 0!==e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(uh(t)||uh(n.dom.getContentEditableParent(t)))&&e.preventDefault()})}(t),I=t,d=Dr(function(){if(!I.removed&&I.selection.getRng().collapsed){var e=KI(I,I.selection.getRng(),!1);I.selection.setRng(e)}},0),I.on("focus",function(){d.throttle()}),I.on("blur",function(){d.cancel()})}(),o=".mce-content-body",(i=t.contentStyles).push(s.getCss()),i.push(o+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+o+" *[contentEditable=false] {cursor: default;}"+o+" *[contentEditable=true] {cursor: text;}")),{showCaret:u,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(va(e),l(c()),t.selection.scrollIntoView(e[0]))},hideFakeCaret:f,destroy:function(){s.destroy(),n=null}}},Rh=function(e,t,n){var i,o,r,a,s=1;for(a=e.getShortEndedElements(),(r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;o=r.exec(t);){if(i=r.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i},Dh=function(e,t){var n=e.exec(t);if(n){var i=n[1],o=n[2];return"string"==typeof i&&"data-mce-bogus"===i.toLowerCase()?o:null}return null};function Uh(e,t){void 0===t&&(t=rr());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var i=e.comment?e.comment:n,o=e.cdata?e.cdata:n,r=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,g=e.pi?e.pi:n,l=e.doctype?e.doctype:n;return{parse:function(n){var c,u,I,d,C,h,A,f,m,p,b,B,v,y,x,F,G,Q,w,S,X,Z,N,k,R,D,U,T,W,E=0,H=[],O=0,L=zo.decode,V=Pt.makeMap("src,href,data,background,formaction,poster,xlink:href"),Y=/((java|vb)script|mhtml):/i,M=function(e){var t,n;for(t=H.length;t--&&H[t].name!==e;);if(0<=t){for(n=H.length-1;t<=n;n--)(e=H[n]).valid&&s(e.name);H.length=t}},_=function(t,n,i,o,r){var a,s,g,l,c;if(i=(n=n.toLowerCase())in b?n:L(i||o||r||""),v&&!f&&0==(0===(g=n).indexOf("data-")||0===g.indexOf("aria-"))){if(!(a=Q[n])&&w){for(s=w.length;s--&&!(a=w[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(i in a.validValues))return}if(V[n]&&!e.allow_script_urls){var u=i.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(x){u=unescape(u)}if(Y.test(u))return;if(c=u,!(l=e).allow_html_data_urls&&(/^data:image\//i.test(c)?!1===l.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(c):/^data:/i.test(c)))return}f&&(n in V||0===n.indexOf("on"))||(d.map[n]=i,d.push({name:n,value:i}))};for(R=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,p=t.getShortEndedElements(),k=e.self_closing_elements||t.getSelfClosingElements(),b=t.getBoolAttrs(),v=e.validate,m=e.remove_internals,W=e.fix_self_closing,U=t.getSpecialElements(),N=n+">";c=R.exec(N);){if(E<c.index&&r(L(n.substr(E,c.index-E))),u=c[6])":"===(u=u.toLowerCase()).charAt(0)&&(u=u.substr(1)),M(u);else if(u=c[7]){if(c.index+c[0].length>n.length){r(L(n.substr(c.index))),E=c.index+c[0].length;continue}":"===(u=u.toLowerCase()).charAt(0)&&(u=u.substr(1)),B=u in p,W&&k[u]&&0<H.length&&H[H.length-1].name===u&&M(u);var K=Dh(D,c[8]);if(null!==K){if("all"===K){E=Rh(t,n,R.lastIndex),R.lastIndex=E;continue}x=!1}if(!v||(y=t.getElementRule(u))){if(x=!0,v&&(Q=y.attributes,w=y.attributePatterns),(G=c[8])?((f=-1!==G.indexOf("data-mce-type"))&&m&&(x=!1),(d=[]).map={},G.replace(D,_)):(d=[]).map={},v&&!f){if(S=y.attributesRequired,X=y.attributesDefault,y.removeEmptyAttrs&&!d.length&&(x=!1),Z=y.attributesForced)for(C=Z.length;C--;)A=(F=Z[C]).name,"{$uid}"===(T=F.value)&&(T="mce_"+O++),d.map[A]=T,d.push({name:A,value:T});if(X)for(C=X.length;C--;)(A=(F=X[C]).name)in d.map||("{$uid}"===(T=F.value)&&(T="mce_"+O++),d.map[A]=T,d.push({name:A,value:T}));if(S){for(C=S.length;C--&&!(S[C]in d.map););-1===C&&(x=!1)}if(F=d.map["data-mce-bogus"]){if("all"===F){E=Rh(t,n,R.lastIndex),R.lastIndex=E;continue}x=!1}}x&&a(u,d,B)}else x=!1;if(I=U[u]){I.lastIndex=E=c.index+c[0].length,(c=I.exec(n))?(x&&(h=n.substr(E,c.index-E)),E=c.index+c[0].length):(h=n.substr(E),E=n.length),x&&(0<h.length&&r(h,!0),s(u)),R.lastIndex=E;continue}B||(G&&G.indexOf("/")===G.length-1?x&&s(u):H.push({name:u,valid:x}))}else(u=c[1])?(">"===u.charAt(0)&&(u=" "+u),e.allow_conditional_comments||"[if"!==u.substr(0,3).toLowerCase()||(u=" "+u),i(u)):(u=c[2])?o(u.replace(/<!--|-->/g,"")):(u=c[3])?l(u):(u=c[4])&&g(u,c[5]);E=c.index+c[0].length}for(E<n.length&&r(L(n.substr(E))),C=H.length-1;0<=C;C--)(u=H[C]).valid&&s(u.name)}}}(Uh||(Uh={})).findEndTag=Rh;var Th=Uh,Wh=function(e,t){var n,i,o,r,a,s,g,l,c=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,I=e.schema;for(s=e.getTempAttrs(),g=c,l=new RegExp(["\\s?("+s.join("|")+')="[^"]+"'].join("|"),"gi"),c=g.replace(l,""),a=I.getShortEndedElements();r=u.exec(c);)i=u.lastIndex,o=r[0].length,n=a[r[1]]?i:Th.findEndTag(I,c,i),c=c.substring(0,i-o)+c.substring(n),u.lastIndex=i-o;return ua(c)},Eh=Wh,Hh=Wh,Oh=function(e){return Ro.isElement(e)?e.outerHTML:Ro.isText(e)?zo.encodeRaw(e.data,!1):Ro.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},Lh=Ur(Z.none()),Vh=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},Yh=function(t){var n=ai.fromTag("body",Lh.get().getOrThunk(function(){var t=e.document.implementation.createHTMLDocument("undo");return Lh.set(Z.some(t)),t}));return sa(n,Vh(t)),M(Lr(n,"*[data-mce-bogus]"),Rr),n.dom().innerHTML},Mh=function(e){var t,n,i;return t=function(e){return K(Y(oe(e.childNodes),Oh),function(e){return 0<e.length})}(e.getBody()),-1!==(n=(i=q(t,function(t){var n=Hh(e.serializer,t);return 0<n.length?[n]:[]})).join("")).indexOf("</iframe>")?{type:"fragmented",fragments:i,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},_h=function(t,n,i){"fragmented"===n.type?function(t,n){var i,o,r;i=function(e,t){var n=e.length+t.length+2,i=new Array(n),o=new Array(n),r=function(n,i,o,a,g){var l=s(n,i,o,a);if(null===l||l.start===i&&l.diag===i-a||l.end===n&&l.diag===n-o)for(var c=n,u=o;c<i||u<a;)c<i&&u<a&&e[c]===t[u]?(g.push([0,e[c]]),++c,++u):a-o<i-n?(g.push([2,e[c]]),++c):(g.push([1,t[u]]),++u);else{r(n,l.start,o,l.start-l.diag,g);for(var I=l.start;I<l.end;++I)g.push([0,e[I]]);r(l.end,i,l.end-l.diag,a,g)}},a=function(n,i,o,r){for(var a=n;a-i<r&&a<o&&e[a]===t[a-i];)++a;return{start:n,end:a,diag:i}},s=function(n,r,s,g){var l=r-n,c=g-s;if(0===l||0===c)return null;var u,I,d,C,h,A=l-c,f=c+l,m=(f%2==0?f:f+1)/2;for(i[1+m]=n,o[1+m]=r+1,u=0;u<=m;++u){for(I=-u;I<=u;I+=2){for(i[d=I+m]=I===-u||I!==u&&i[d-1]<i[d+1]?i[d+1]:i[d-1]+1,h=(C=i[d])-n+s-I;C<r&&h<g&&e[C]===t[h];)i[d]=++C,++h;if(A%2!=0&&A-u<=I&&I<=A+u&&o[d-A]<=i[d])return a(o[d-A],I+n-s,r,g)}for(I=A-u;I<=A+u;I+=2){for(o[d=I+m-A]=I===A-u||I!==A+u&&o[d+1]<=o[d-1]?o[d+1]-1:o[d-1],h=(C=o[d]-1)-n+s-I;n<=C&&s<=h&&e[C]===t[h];)o[d]=C--,h--;if(A%2==0&&-u<=I&&I<=u&&o[d]<=i[d+A])return a(o[d],I+n-s,r,g)}}},g=[];return r(0,e.length,0,t.length,g),g}(Y(oe(n.childNodes),Oh),t),o=n,r=0,M(i,function(t){0===t[0]?r++:1===t[0]?(function(t,n,i){var o=function(t){var n,i,o;for(o=e.document.createElement("div"),n=e.document.createDocumentFragment(),t&&(o.innerHTML=t);i=o.firstChild;)n.appendChild(i);return n}(n);if(t.hasChildNodes()&&i<t.childNodes.length){var r=t.childNodes[i];r.parentNode.insertBefore(o,r)}else t.appendChild(o)}(o,t[1],r),r++):2===t[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(o,r)})}(n.fragments,t.getBody()):t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(i?n.beforeBookmark:n.bookmark)},Kh=function(e,t){return!(!e||!t)&&(i=t,Vh(e)===Vh(i)||(n=t,Yh(e)===Yh(n)));var n,i};function zh(e){var t,n,i=this,o=0,r=[],a=0,s=function(){return 0===a},g=function(e){s()&&(i.typing=e)},l=function(t){e.setDirty(t)},c=function(e){g(!1),i.add({},e)},u=function(){i.typing&&(g(!1),i.add())};return e.on("init",function(){i.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(u(),i.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){i.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var o=t.keyCode;t.isDefaultPrevented()||((33<=o&&o<=36||37<=o&&o<=40||45===o||t.ctrlKey)&&(c(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&i.typing&&!1===Kh(Mh(e),r[0])&&(!1===e.isDirty()&&(l(!0),e.fire("change",{level:r[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;e.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?i.typing&&c(e):!(t<16||20<t)||224===t||91===t||i.typing||e.ctrlKey&&!e.altKey||e.metaKey||(i.beforeChange(),g(!0),i.add({},e),n=!0))}),e.on("MouseDown",function(e){i.typing&&c(e)}),e.on("input",function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data)&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),i={data:r,typing:!1,beforeChange:function(){s()&&(t=Ds.getUndoBookmark(e.selection))},add:function(n,i){var a,g,c,u=e.settings;if(c=Mh(e),n=Pt.extend(n=n||{},c),!1===s()||e.removed)return null;if(e.fire("BeforeAddUndo",{level:n,lastLevel:g=r[o],originalEvent:i}).isDefaultPrevented())return null;if(g&&Kh(g,n))return null;if(r[o]&&(r[o].beforeBookmark=t),u.custom_undo_redo_levels&&r.length>u.custom_undo_redo_levels){for(a=0;a<r.length-1;a++)r[a]=r[a+1];r.length--,o=r.length}n.bookmark=Ds.getUndoBookmark(e.selection),o<r.length-1&&(r.length=o+1),r.push(n),o=r.length-1;var I={level:n,lastLevel:g,originalEvent:i};return e.fire("AddUndo",I),0<o&&(l(!0),e.fire("change",I)),n},undo:function(){var t;return i.typing&&(i.add(),i.typing=!1,g(!1)),0<o&&(t=r[--o],_h(e,t,!0),l(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<r.length-1&&(t=r[++o],_h(e,t,!1),l(!0),e.fire("redo",{level:t})),t},clear:function(){r=[],o=0,i.typing=!1,i.data=r,e.fire("ClearUndos")},hasUndo:function(){return 0<o||i.typing&&r[0]&&!Kh(Mh(e),r[0])},hasRedo:function(){return o<r.length-1&&!i.typing},transact:function(e){return u(),i.beforeChange(),i.ignore(e),i.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a;i.transact(t)&&(a=r[o].bookmark,_h(e,r[o-1],!0),i.transact(n)&&(r[o-1].beforeBookmark=a))}}}var Jh,Ph={},jh=Mt.filter,$h=Mt.each;Jh=function(e){var t,n,i=e.selection.getRng();t=Ro.matchNodeNames("pre"),i.collapsed||(n=e.selection.getSelectedBlocks(),$h(jh(jh(n,t),function(e){return t(e.previousSibling)&&-1!==Mt.indexOf(n,e.previousSibling)}),function(e){var t,n;t=e.previousSibling,An(n=e).remove(),An(t).append("<br><br>").append(n.childNodes)}))},Ph.pre||(Ph.pre=[]),Ph.pre.push(Jh);var qh=/^(src|href|style)$/,eA=Pt.each,tA=sl,nA=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},iA=function(e,t,n){var i,o,r;return o=t[n?"startOffset":"endOffset"],Ro.isElement(i=t[n?"startContainer":"endContainer"])&&(!n&&o&&o--,i=i.childNodes[(r=i.childNodes.length-1)<o?r:o]),Ro.isText(i)&&n&&o>=i.nodeValue.length&&(i=new ao(i,e.getBody()).next()||i),Ro.isText(i)&&!n&&0===o&&(i=new ao(i,e.getBody()).prev()||i),i},oA=function(e,t,n,i){var o=e.create(n,i);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},rA=function(e,t,n,i,o){var r=ai.fromDom(t),a=ai.fromDom(e.create(i,o)),s=n?Hi(r):Ei(r);return Zr(a,s),n?(Qr(r,a),Sr(a,r)):(wr(r,a),Xr(a,r)),a.dom()},aA=function(e,t,n,i){return!(t=nl(t,n,i))||"BR"===t.nodeName||e.isBlock(t)},sA=function(e,t,n,i,o){var r,a,s,g,l,c,u,I,d,C,h,A,f,m,p=e.dom;if(l=p,!(tA(c=i,(u=t).inline)||tA(c,u.block)||(u.selector?Ro.isElement(c)&&l.is(c,u.selector):void 0)||(g=i,t.links&&"A"===g.tagName)))return!1;if("all"!==t.remove)for(eA(t.styles,function(e,r){e=gl(p,al(e,n),r),"number"==typeof r&&(r=e,o=0),(t.remove_similar||!o||tA(ll(p,o,r),e))&&p.setStyle(i,r,""),s=1}),s&&""===p.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),eA(t.attributes,function(e,t){var r;if(e=al(e,n),"number"==typeof t&&(t=e,o=0),!o||tA(p.getAttrib(o,t),e)){if("class"===t&&(e=p.getAttrib(i,t))&&(r="",eA(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(r+=(r?" ":"")+e)}),r))return void p.setAttrib(i,t,r);"class"===t&&i.removeAttribute("className"),qh.test(t)&&i.removeAttribute("data-mce-"+t),i.removeAttribute(t)}}),eA(t.classes,function(e){e=al(e,n),o&&!p.hasClass(o,e)||p.removeClass(i,e)}),a=p.getAttribs(i),r=0;r<a.length;r++){var b=a[r].nodeName;if(0!==b.indexOf("_")&&0!==b.indexOf("data-"))return!1}return"none"!==t.remove?(A=(d=i).parentNode,f=(I=e).dom,m=I.settings.forced_root_block,(C=t).block&&(m?A===f.getRoot()&&(C.list_block&&tA(d,C.list_block)||eA(Pt.grep(d.childNodes),function(e){ol(I,m,e.nodeName.toLowerCase())?h?h.appendChild(e):(h=oA(f,e,m),f.setAttribs(h,I.settings.forced_root_block_attrs)):h=0})):f.isBlock(d)&&!f.isBlock(A)&&(aA(f,d,!1)||aA(f,d.firstChild,!0,1)||d.insertBefore(f.create("br"),d.firstChild),aA(f,d,!0)||aA(f,d.lastChild,!1,1)||d.appendChild(f.create("br")))),C.selector&&C.inline&&!tA(C.inline,d)||f.remove(d,1),!0):void 0},gA=sA,lA=function(e,t,n,i,o){var r,a,s=e.formatter.get(t),g=s[0],l=!0,c=e.dom,u=e.selection,I=function(i){var r,a,l,c,u,I=(a=t,l=n,c=o,eA(ul((r=e).dom,i.parentNode).reverse(),function(e){var t;u||"_start"===e.id||"_end"===e.id||(t=FI.matchNode(r,e,a,l,c))&&!1!==t.split&&(u=e)}),u);return function(e,t,n,i,o,r,a,s){var g,l,c,u,I,d,C=e.dom;if(n){for(d=n.parentNode,g=i.parentNode;g&&g!==d;g=g.parentNode){for(l=C.clone(g,!1),I=0;I<t.length;I++)if(sA(e,t[I],s,l,l)){l=0;break}l&&(c&&l.appendChild(c),u||(u=l),c=l)}a.mixed&&C.isBlock(n)||(i=C.split(n,i)),c&&(o.parentNode.insertBefore(c,o),u.appendChild(o))}return i}(e,s,I,i,i,0,g,n)},d=function(t){var i,o,r,a,u;if(Ro.isElement(t)&&c.getContentEditable(t)&&(a=l,l="true"===c.getContentEditable(t),u=!0),i=Pt.grep(t.childNodes),l&&!u)for(o=0,r=s.length;o<r&&!sA(e,s[o],n,t,t);o++);if(g.deep&&i.length){for(o=0,r=i.length;o<r;o++)d(i[o]);u&&(l=a)}},C=function(e){var t,n=c.get(e?"_start":"_end"),i=n[e?"firstChild":"lastChild"];return $g(t=i)&&Ro.isElement(t)&&("_start"===t.id||"_end"===t.id)&&(i=i[e?"firstChild":"lastChild"]),Ro.isText(i)&&0===i.data.length&&(i=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),c.remove(n,!0),i},h=function(t){var n,i,o=t.commonAncestorContainer;if(t=yl(e,t,s,!0),g.split){if(t=QI(t),(n=iA(e,t,!0))!==(i=iA(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(i.nodeName)&&i.firstChild&&(i=i.firstChild||i),nA(c,n,i)){var r=Z.from(n.firstChild).getOr(n);return I(rA(c,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(nA(c,i,n))return r=Z.from(i.lastChild).getOr(i),I(rA(c,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1);n=oA(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=oA(c,i,"span",{id:"_end","data-mce-type":"bookmark"}),I(n),I(i),n=C(!0),i=C()}else n=i=I(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=i.parentNode?i.parentNode:i,t.endOffset=c.nodeIndex(i)+1}Fl(c,t,function(t){eA(t,function(t){d(t),Ro.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===cl(c,t.parentNode)&&sA(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(i)i.nodeType?((a=c.createRng()).setStartBefore(i),a.setEndAfter(i),h(a)):h(i);else if("false"!==c.getContentEditable(u.getNode()))u.isCollapsed()&&g.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,i){var o,r,a,s,g,l,c=e.dom,u=e.selection,I=[],d=u.getRng();for(3===(s=o=d.startContainer).nodeType&&(d.startOffset!==o.nodeValue.length&&(a=!0),s=s.parentNode);s;){if(FI.matchNode(e,s,t,n,i)){g=s;break}s.nextSibling&&(a=!0),I.push(s),s=s.parentNode}if(g)if(a){r=u.getBookmark(),d.collapse(!0);var C=yl(e,d,e.formatter.get(t),!0);C=QI(C),e.formatter.remove(t,n,C),u.moveToBookmark(r)}else{l=Ws(e.getBody(),g);var h=NI(!1).dom(),A=TI(I,h);DI(e,h,l||g),kI(e,l,!1),u.setCursorLocation(A,1),c.isEmpty(g)&&c.remove(g)}}(e,t,n,o):(r=Ds.getPersistentBookmark(e.selection,!0),h(u.getRng()),u.moveToBookmark(r),g.inline&&FI.match(e,t,n,u.getStart())&&tl(c,u,u.getRng()),e.nodeChanged());else{i=u.getNode();for(var A=0,f=s.length;A<f&&(!s[A].ceFalseOverride||!sA(e,s[A],n,i,i));A++);}},cA=Pt.each,uA=function(e){return e&&1===e.nodeType&&!$g(e)&&!Ts(e)&&!Ro.isBogus(e)},IA=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!$g(n))return n}return e},dA=function(e,t,n){var i,o,r=new Rl(e);if(t&&n&&(t=IA(t,"previousSibling"),n=IA(n,"nextSibling"),r.compare(t,n))){for(i=t.nextSibling;i&&i!==n;)i=(o=i).nextSibling,t.appendChild(o);return e.remove(n),Pt.each(Pt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},CA=function(e,t,n){cA(e.childNodes,function(e){uA(e)&&(t(e)&&n(e),e.hasChildNodes()&&CA(e,t,n))})},hA=function(e,t){return r(function(t,n){return!(!n||!ll(e,n,t))},t)},AA=function(e,t,n){return r(function(t,n,i){e.setStyle(i,t,n),""===i.getAttribute("style")&&i.removeAttribute("style"),fA(e,i)},t,n)},fA=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},mA=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=cl(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},pA=Pt.each,bA=function(e,t,n,i){var o,a,s=e.formatter.get(t),g=s[0],l=!i&&e.selection.isCollapsed(),c=e.dom,u=e.selection,I=function(e,t){if(t=t||g,e){if(t.onformat&&t.onformat(e,t,n,i),pA(t.styles,function(t,i){c.setStyle(e,i,al(t,n))}),t.styles){var o=c.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}pA(t.attributes,function(t,i){c.setAttrib(e,i,al(t,n))}),pA(t.classes,function(t){t=al(t,n),c.hasClass(e,t)||c.addClass(e,t)})}},d=function(e,t){var n=!1;return!!g.selector&&(pA(e,function(e){if(!("collapsed"in e&&e.collapsed!==l))return c.is(t,e.selector)&&!Ts(t)?(I(t,e),!(n=!0)):void 0}),n)},C=function(i,o,r,a){var l,c,u=[],C=!0;c=i.create(l=g.inline||g.block),I(c),Fl(i,o,function(o){var r,h=function(o){var A,f,m,p;if(p=C,A=o.nodeName.toLowerCase(),f=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&i.getContentEditable(o)&&(p=C,C="true"===i.getContentEditable(o),m=!0),sl(A,"br"))return r=0,void(g.block&&i.remove(o));if(g.wrapper&&FI.matchNode(e,o,t,n))r=0;else{if(C&&!m&&g.block&&!g.wrapper&&il(e,A)&&ol(e,f,l))return o=i.rename(o,l),I(o),u.push(o),void(r=0);if(g.selector){var b=d(s,o);if(!g.inline||b)return void(r=0)}!C||m||!ol(e,l,A)||!ol(e,f,l)||!a&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||Ts(o)||g.inline&&i.isBlock(o)?(r=0,pA(Pt.grep(o.childNodes),h),m&&(C=p),r=0):(r||(r=i.clone(c,!1),o.parentNode.insertBefore(r,o),u.push(r)),r.appendChild(o))}};pA(o,h)}),!0===g.links&&pA(u,function(e){var t=function(e){"A"===e.nodeName&&I(e,g),pA(Pt.grep(e.childNodes),t)};t(e)}),pA(u,function(o){var r,a,l,c,d;a=0,pA(o.childNodes,function(e){rl(e)||$g(e)||a++}),r=a,!(1<u.length)&&i.isBlock(o)||0!==r?(g.inline||g.wrapper)&&(g.exact||1!==r||((c=function(e){var t=!1;return pA(e.childNodes,function(e){if((n=e)&&1===n.nodeType&&!$g(n)&&!Ts(n)&&!Ro.isBogus(n))return t=e,!1;var n}),t}(l=o))&&!$g(c)&&FI.matchName(i,c,g)&&(d=i.clone(c,!1),I(d),i.replace(d,l,!0),i.remove(c,1)),o=d||l),function(e,t,n,i){cA(s,function(t){cA(e.dom.select(t.inline,i),function(i){uA(i)&&gA(e,t,n,i,t.exact?i:null)}),function(e,t,n){t.clear_child_styles&&cA(e.select(t.links?"*:not(a)":"*",i),function(n){uA(n)&&cA(t.styles,function(t,i){e.setStyle(n,i,"")})})}(e.dom,t)})}(e,0,n,o),function(e,t,n,i,o){FI.matchNode(e,o.parentNode,n,i)&&gA(e,t,i,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,function(r){if(FI.matchNode(e,r,n,i))return gA(e,t,i,o),!0})}(e,g,t,n,o),function(e,t,n,i){t.styles&&t.styles.backgroundColor&&CA(i,hA(e,"fontSize"),AA(e,"backgroundColor",al(t.styles.backgroundColor,n)))}(i,g,n,o),function(e,t,n,i){"sub"!==t.inline&&"sup"!==t.inline||(CA(i,hA(e,"fontSize"),AA(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",i),!0))}(i,g,0,o),function(e,t,n,i){i&&!1!==g.merge_siblings&&(i=dA(e,nl(i),i),i=dA(e,i,nl(i,!0)))}(i,0,0,o)):i.remove(o,1)})};if("false"!==c.getContentEditable(u.getNode())){if(g){if(i)i.nodeType?d(s,i)||((a=c.createRng()).setStartBefore(i),a.setEndAfter(i),C(c,yl(e,a,s),0,!0)):C(c,i,0,!0);else if(l&&g.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var i,o,r,a,s,g,l=e.selection;a=(i=l.getRng(!0)).startOffset,g=i.startContainer.nodeValue,(o=Ws(e.getBody(),l.getStart()))&&(r=ZI(o));var c,u,I=/[^\s\u00a0\u00ad\u200b\ufeff]/;g&&0<a&&a<g.length&&I.test(g.charAt(a))&&I.test(g.charAt(a-1))?(s=l.getBookmark(),i.collapse(!0),i=yl(e,i,e.formatter.get(t)),i=QI(i),e.formatter.apply(t,n,i),l.moveToBookmark(s)):(o&&r.nodeValue===wI||(c=e.getDoc(),u=NI(!0).dom(),r=(o=c.importNode(u,!0)).firstChild,i.insertNode(o),a=1),e.formatter.apply(t,n,o),l.setCursorLocation(r,a))}(e,t,n);else{var h=e.selection.getNode();e.settings.forced_root_block||!s[0].defaultBlock||c.getParent(h,c.isBlock)||bA(e,s[0].defaultBlock),e.selection.setRng(Hl(e.selection.getRng())),o=Ds.getPersistentBookmark(e.selection,!0),C(c,yl(e,u.getRng(),s)),g.styles&&function(e,t,n,i){(g.styles.color||g.styles.textDecoration)&&(Pt.walk(i,r(mA,e),"childNodes"),mA(e,i))}(c,0,0,h),u.moveToBookmark(o),tl(c,u,u.getRng()),e.nodeChanged()}!function(e,n){$h(Ph[t],function(e){e(n)})}(0,e)}}else{i=u.getNode();for(var A=0,f=s.length;A<f;A++)if(s[A].ceFalseOverride&&c.is(i,s[A].selector))return void I(i,s[A])}},BA={applyFormat:bA},vA=Pt.each,yA=function(e,t,n,i,o){var r,a,s,g,l,c,u,I;null===t.get()&&(a=e,s={},(r=t).set({}),a.on("NodeChange",function(e){var t=ul(a.dom,e.element),n={};t=Pt.grep(t,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),vA(r.get(),function(e,i){vA(t,function(o){return a.formatter.matchNode(o,i,{},e.similar)?(s[i]||(vA(e,function(e){e(!0,{node:o,format:i,parents:t})}),s[i]=e),n[i]=e,!1):!FI.matchesUnInheritedFormatSelector(a,o,i)&&void 0})}),vA(s,function(i,o){n[o]||(delete s[o],vA(i,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),l=n,c=i,u=o,I=(g=t).get(),vA(l.split(","),function(e){I[e]||(I[e]=[],I[e].similar=u),I[e].push(c)}),g.set(I)},xA={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,i){Pt.each(i,function(n,i){e.setAttrib(t,i,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Pt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},FA=Pt.each,GA=mr.DOM,QA=function(e,t){var n,i,o,r=t&&t.schema||rr({}),a=function(e){var t,n,o;return n=t=GA.create((i="string"==typeof e?{name:e,classes:[],attrs:{}}:e).name),(o=i).classes.length&&GA.addClass(n,o.classes.join(" ")),GA.setAttribs(n,o.attrs),t},s=function(e,t,n){var i,o,g,l,c,u,I,d,C=0<t.length&&t[0],h=C&&C.name;if(c=h,u="string"!=typeof(l=e)?l.nodeName.toLowerCase():l,g=!(!(d=(I=r.getElementRule(u))&&I.parentsRequired)||!d.length)&&(c&&-1!==Pt.inArray(d,c)?c:d[0]))h===g?(o=t[0],t=t.slice(1)):o=g;else if(C)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(i=a(o)).appendChild(e),n&&(i||(i=GA.create("div")).appendChild(e),Pt.each(n,function(t){var n=a(t);i.insertBefore(n,e)})),s(i,t,o&&o.siblings)};return e&&e.length?(n=a(i=e[0]),(o=GA.create("div")).appendChild(s(n,e.slice(1),i.siblings)),o):""},wA=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Pt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,i,o,r){switch(t){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Pt.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===o){var a=r.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},SA=function(e,t){var n,i,o,r,a,s,g="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(r=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Pt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Pt.map(e.split(/(?:~\+|~|\+)/),wA),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]}(t.selector)).length?(r[0].name||(r[0].name=n),n=t.selector,i=QA(r,e)):i=QA([n],e),o=GA.select(n,i)[0]||i.firstChild,FA(t.styles,function(e,t){(e=l(e))&&GA.setStyle(o,t,e)}),FA(t.attributes,function(e,t){(e=l(e))&&GA.setAttrib(o,t,e)}),FA(t.classes,function(e){e=l(e),GA.hasClass(o,e)||GA.addClass(o,e)}),e.fire("PreviewFormats"),GA.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),a=GA.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,FA(s.split(" "),function(t){var n=GA.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=GA.getStyle(e.getBody(),t,!0),"#ffffff"===GA.toHex(n).toLowerCase())||"color"===t&&"#000000"===GA.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(g+="padding:0 2px;"),g+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),GA.remove(i),g)},XA=function(e,t,n,i,o){var r=t.get(n);!FI.match(e,n,i,o)||"toggle"in r[0]&&!r[0].toggle?BA.applyFormat(e,n,i,o):lA(e,n,i,o)},ZA=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])};function NA(e){var t,n,i,o=(n={},(i=function(e,t){e&&("string"!=typeof e?Pt.each(e,function(e,t){i(t,e)}):(Pt.each(t=t.length?t:[t],function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))})(xA.get((t=e).dom)),i(t.settings.formats),{get:function(e){return e?n[e]:n},register:i,unregister:function(e){return e&&n[e]&&delete n[e],n}}),a=Ur(null);return ZA(e),WI(e),{get:o.get,register:o.register,unregister:o.unregister,apply:r(BA.applyFormat,e),remove:r(lA,e),toggle:r(XA,e,o),match:r(FI.match,e),matchAll:r(FI.matchAll,e),matchNode:r(FI.matchNode,e),canApply:r(FI.canApply,e),formatChanged:r(yA,e,a),getCssText:r(SA,e)}}var kA,RA=Object.prototype.hasOwnProperty,DA=(kA=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<e.length;i++){var o=e[i];for(var r in o)RA.call(o,r)&&(n[r]=kA(0,o[r]))}return n}),UA={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)(n=e[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,i){for(var o,r,a=e.length,s="data-mce-"+i,g=t.url_converter,l=t.url_converter_scope;a--;)void 0!==(r=(o=e[a]).attributes.map[s])?(o.attr(i,0<r.length?r:null),o.attr(s,null)):(r=o.attributes.map[i],"style"===i?r=n.serializeStyle(n.parseStyle(r),o.name):g&&(r=g.call(l,r,i,o.name)),o.attr(i,0<r.length?r:null))}),e.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,o=e.length;o--;)"bookmark"!==(i=e[o]).attributes.map["data-mce-type"]||n.cleanup||(Z.from(i.firstChild).exists(function(e){return!la(e.value)})?i.unwrap():i.remove())}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=zo.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var i,o,r,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)o=(i=e[a]).firstChild?i.firstChild.value:"","script"===n?((r=i.attr("type"))&&i.attr("type","mce-no/type"===r?null:r.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<o.length&&(i.firstChild.value="// <![CDATA[\n"+s(o)+"\n// ]]>")):"xhtml"===t.element_format&&0<o.length&&(i.firstChild.value="\x3c!--\n"+s(o)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){M(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,i=function(e){return e&&"br"===e.name};i(t=e.lastChild)&&i(n=t.prev)&&(t.remove(),n.remove())}},TA={process:function(t,n,i){return I=i,(u=t)&&u.hasEventListeners("PreProcess")&&!I.no_events?(a=i,c=(o=t).dom,r=(r=n).cloneNode(!0),(s=e.document.implementation).createHTMLDocument&&(g=s.createHTMLDocument(""),Pt.each("BODY"===r.nodeName?r.childNodes:[r],function(e){g.body.appendChild(g.importNode(e,!0))}),r="BODY"!==r.nodeName?g.body.firstChild:g.body,l=c.doc,c.doc=g),function(e,t){e.fire("PreProcess",t)}(o,DA(a,{node:r})),l&&(c.doc=l),r):n;var o,r,a,s,g,l,c,u,I}},WA={register:function(e,t){t.inline_styles&&function(e,t){var n,i=sr();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",function(e){M(e,function(e){var i,o=t.parse(e.attr("style")),r=e.attr("color"),a=e.attr("face"),s=e.attr("size");r&&(o.color=r),a&&(o["font-family"]=a),s&&(o["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(o)),i=e,M(["color","face","size"],function(e){i.attr(e,null)})})})}(e,i,Pt.explode(t.font_size_legacy_values)),n=i,e.addNodeFilter("strike",function(e){M(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})}(e,t)}},EA=/^[ \t\r\n]*$/,HA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},OA=function(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}},LA=function(){function e(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var i,o;if(i=new e(t,HA[t]||1),n)for(o in n)i.attr(o,n[o]);return i},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,i;if("string"!=typeof e){for(i in e)this.attr(i,e[i]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),this;return this}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,i,o,r,a=new e(this.name,this.type);if(i=this.attributes){for((r=[]).map={},t=0,n=i.length;t<n;t++)"id"!==(o=i[t]).name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);a.attributes=r}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=i,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=OA(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=OA(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var i,o,r=this.firstChild;if(t=t||{},r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(e[r.name])return!1;for(i=r.attributes.length;i--;)if("name"===(o=r.attributes[i].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===r.type)return!1;if(3===r.type&&!EA.test(r.value))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&EA.test(r.value))return!1;if(n&&n(r))return!1}while(r=OA(r,this));return!0},e.prototype.walk=function(e){return OA(this,null,e)},e}(),VA=function(e,t,n,i){(e.padd_empty_with_br||t.insert)&&n[i.name]?i.empty().append(new LA("br",1)).shortEnded=!0:i.empty().append(new LA("#text",3)).value="\xa0"},YA=function(e){return MA(e,"#text")&&"\xa0"===e.firstChild.value},MA=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},_A=function(e,t,n,i){return i.isEmpty(t,n,function(t){return(n=e.getElementRule(t.name))&&n.paddEmpty;var n})},KA=function(e,t){return e&&(t[e.name]||"br"===e.name)},zA=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,i,o){var r,a,s,g,l,c,u,I,d=e.length,C=Pt.extend({},n.getBlockElements()),h=n.getNonEmptyElements(),A=n.getNonEmptyElements();for(C.body=1,r=0;r<d;r++)if(s=(a=e[r]).parent,C[a.parent.name]&&a===s.lastChild){for(l=a.prev;l;){if("span"!==(c=l.name)||"bookmark"!==l.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}l=l.prev}a&&(a.remove(),_A(n,h,A,s)&&(u=n.getElementRule(s.name))&&(u.removeEmpty?s.remove():u.paddEmpty&&VA(t,o,C,s)))}else{for(g=a;s&&s.firstChild===g&&s.lastChild===g&&!C[(g=s).name];)s=s.parent;g===s&&!0!==t.padd_empty_with_br&&((I=new LA("#text",3)).value="\xa0",a.replace(I))}}),e.addAttributeFilter("href",function(e){var n,i,o,r=e.length;if(!t.allow_unsafe_link_target)for(;r--;)"a"===(n=e[r]).name&&"_blank"===n.attr("target")&&n.attr("rel",(o=(i=n.attr("rel"))?Pt.trim(i):"",/\b(noopener)\b/g.test(o)?o:o.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,i,o,r=e.length;r--;)if("a"===(o=e[r]).name&&o.firstChild&&!o.attr("href"))for(i=o.parent,t=o.lastChild;n=t.prev,i.insert(t,o),t=n;);}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)if("ul"===(n=(t=e[i]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new LA("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,i,o,r,a,s,g,l=e.length,c=n.getValidClasses();l--;){for(i=(t=e[l]).attr("class").split(" "),a="",o=0;o<i.length;o++)r=i[o],g=!1,(s=c["*"])&&s[r]&&(g=!0),s=c[t.name],!g&&s&&s[r]&&(g=!0),g&&(a&&(a+=" "),a+=r);a.length||(a=null),t.attr("class",a)}})},JA=Pt.makeMap,PA=Pt.each,jA=Pt.explode,$A=Pt.extend;function qA(e,t){void 0===t&&(t=rr());var n={},i=[],o={},r={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;(a=e.name)in n&&((s=o[a])?s.push(e):o[a]=[e]),t=i.length;for(;t--;)(a=i[t].name)in e.attributes.map&&((s=r[a])?s.push(e):r[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){PA(jA(e),function(e){var n;for(n=0;n<i.length;n++)if(i[n].name===e)return void i[n].callbacks.push(t);i.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(e,t){PA(jA(e),function(e){var i=n[e];i||(n[e]=i=[]),i.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,g){var l,c,u,I,d,C,h,A,f,m,p,b=[];g=g||{},o={},r={},f=$A(JA("script,style,head,html,body,title,meta,param"),t.getBlockElements());var B=t.getNonEmptyElements(),v=t.children,y=e.validate,x="forced_root_block"in g?g.forced_root_block:e.forced_root_block,F=t.getWhiteSpaceElements(),G=/^[ \t\r\n]+/,Q=/[ \t\r\n]+$/,w=/[ \t\r\n]+/g,S=/^[ \t\r\n]+$/;m=F.hasOwnProperty(g.context)||F.hasOwnProperty(e.root_name);var X=function(e,t){var i,r=new LA(e,t);return e in n&&((i=o[e])?i.push(r):o[e]=[r]),r},Z=function(e){var n,i,o,r,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(0<(o=n.value.replace(Q,"")).length)return void(n.value=o);if(i=n.next){if(3===i.type&&i.value.length){n=n.prev;continue}if(!a[i.name]&&"script"!==i.name&&"style"!==i.name){n=n.prev;continue}}r=n.prev,n.remove(),n=r}};l=Th({validate:y,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){p.append(X("#cdata",4)).value=e},text:function(e,t){var n;m||(e=e.replace(w," "),KA(p.lastChild,f)&&(e=e.replace(G,""))),0!==e.length&&((n=X("#text",3)).raw=!!t,p.append(n).value=e)},comment:function(e){p.append(X("#comment",8)).value=e},pi:function(e,t){p.append(X(e,7)).value=t,Z(p)},doctype:function(e){p.append(X("#doctype",10)).value=e,Z(p)},start:function(e,n,o){var a,s,g,l,c;if(g=y?t.getElementRule(e):{}){for((a=X(g.outputName||e,1)).attributes=n,a.shortEnded=o,p.append(a),(c=v[p.name])&&v[a.name]&&!c[a.name]&&b.push(a),s=i.length;s--;)(l=i[s].name)in n.map&&((h=r[l])?h.push(a):r[l]=[a]);f[e]&&Z(a),o||(p=a),!m&&F[e]&&(m=!0)}},end:function(n){var i,o,r,a,s;if(o=y?t.getElementRule(n):{}){if(f[n]&&!m){if((i=p.firstChild)&&3===i.type)if(0<(r=i.value.replace(G,"")).length)i.value=r,i=i.next;else for(a=i.next,i.remove(),i=a;i&&3===i.type;)a=i.next,(0===(r=i.value).length||S.test(r))&&(i.remove(),i=a),i=a;if((i=p.lastChild)&&3===i.type)if(0<(r=i.value.replace(Q,"")).length)i.value=r,i=i.prev;else for(a=i.prev,i.remove(),i=a;i&&3===i.type;)a=i.prev,(0===(r=i.value).length||S.test(r))&&(i.remove(),i=a),i=a}if(m&&F[n]&&(m=!1),o.removeEmpty&&_A(t,B,F,p)&&!p.attributes.map.name&&!p.attr("id"))return s=p.parent,f[p.name]?p.empty().remove():p.unwrap(),void(p=s);o.paddEmpty&&(YA(p)||_A(t,B,F,p))&&VA(e,g,f,p),p=p.parent}}},t);var N=p=new LA(g.context||e.root_name,11);if(l.parse(s),y&&b.length&&(g.context?g.invalid=!0:function(e){var n,i,o,r,s,g,l,c,u,I,d,C,h,A,f,m;for(C=JA("tr,td,th,tbody,thead,tfoot,table"),I=t.getNonEmptyElements(),d=t.getWhiteSpaceElements(),h=t.getTextBlockElements(),A=t.getSpecialElements(),n=0;n<e.length;n++)if((i=e[n]).parent&&!i.fixed)if(h[i.name]&&"li"===i.parent.name){for(f=i.next;f&&h[f.name];)f.name="li",f.fixed=!0,i.parent.insert(f,i.parent),f=f.next;i.unwrap(i)}else{for(r=[i],o=i.parent;o&&!t.isValidChild(o.name,i.name)&&!C[o.name];o=o.parent)r.push(o);if(o&&1<r.length){for(r.reverse(),s=g=a(r[0].clone()),u=0;u<r.length-1;u++){for(t.isValidChild(g.name,r[u].name)?(l=a(r[u].clone()),g.append(l)):l=g,c=r[u].firstChild;c&&c!==r[u+1];)m=c.next,l.append(c),c=m;g=l}_A(t,I,d,s)?o.insert(i,r[0],!0):(o.insert(s,r[0],!0),o.insert(i,s)),(_A(t,I,d,o=r[0])||MA(o,"br"))&&o.empty().remove()}else if(i.parent){if("li"===i.name){if((f=i.prev)&&("ul"===f.name||"ul"===f.name)){f.append(i);continue}if((f=i.next)&&("ul"===f.name||"ul"===f.name)){f.insert(i,f.firstChild,!0);continue}i.wrap(a(new LA("ul",1)));continue}t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(a(new LA("div",1))):A[i.name]?i.empty().remove():i.unwrap()}}}(b)),x&&("body"===N.name||g.isRootContent)&&function(){var n,i,o=N.firstChild,r=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(G,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(Q,"")))};if(t.isValidChild(N.name,x.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!f[o.name]&&!o.attr("data-mce-type")?(i||((i=X(x,1)).attr(e.forced_root_block_attrs),N.insert(i,o)),i.append(o)):(r(i),i=null),o=n;r(i)}}(),!g.invalid){for(A in o){for(h=n[A],d=(c=o[A]).length;d--;)c[d].parent||c.splice(d,1);for(u=0,I=h.length;u<I;u++)h[u](c,A,g)}for(u=0,I=i.length;u<I;u++)if((h=i[u]).name in r){for(d=(c=r[h.name]).length;d--;)c[d].parent||c.splice(d,1);for(d=0,C=h.callbacks.length;d<C;d++)h.callbacks[d](c,h.name,g)}}return N}};return zA(s,e),WA.register(s,e),s}var ef=function(e,t,n){-1===Pt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},tf=function(e,t,n){var i=ua(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||vo(ai.fromDom(t))?i:Pt.trim(i)},nf=function(e,t,n){var i=n.selection?DA({forced_root_block:!1},n):n,o=e.parse(t,i);return UA.trimTrailingBr(o),o},of=function(e,t,n,i,o){var r,a,s,g;return a=e,r=i,g=El(t,n).serialize(r),!(s=o).no_events&&a?function(e,t){return e.fire("PostProcess",t)}(a,DA(s,{content:g})).content:g};function rf(e,t){var n,i,o,a,s,g,l=(n=e,g=["data-mce-selected"],o=(i=t)&&i.dom?i.dom:mr.DOM,a=i&&i.schema?i.schema:rr(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs,s=qA(n,a),UA.register(s,n,o),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:function(e,t){var r=DA({format:"html"},t||{}),g=TA.process(i,e,r),l=tf(o,g,r),c=nf(s,l,r);return"tree"===r.format?c:of(i,n,a,c,r)},addRules:function(e){a.addValidElements(e)},setRules:function(e){a.setValidElements(e)},addTempAttr:r(ef,s,g),getTempAttrs:function(){return g}});return{schema:l.schema,addNodeFilter:l.addNodeFilter,addAttributeFilter:l.addAttributeFilter,serialize:l.serialize,addRules:l.addRules,setRules:l.setRules,addTempAttr:l.addTempAttr,getTempAttrs:l.getTempAttrs}}function af(e){return{getBookmark:r(Pg,e),moveToBookmark:r(jg,e)}}(af||(af={})).isBookmarkNode=$g;var sf,gf,lf=af,cf=Ro.isContentEditableFalse,uf=Ro.isContentEditableTrue,If=function(t,n){var i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b=n.dom,B=Pt.each,v=n.getDoc(),y=e.document,x=Math.abs,F=Math.round,G=n.getBody();a={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Q=".mce-content-body";n.contentStyles.push(Q+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Q+" .mce-resizehandle:hover {background: #000}"+Q+" img[data-mce-selected],"+Q+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Q+" .mce-clonedresizable {position: absolute;"+(de.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Q+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var w=function(e){return e&&("IMG"===e.nodeName||n.dom.is(e,"figure.image"))},S=function(e){var t,i,o=e.target;t=e,i=n.selection.getRng(),!w(t.target)||wh(t.clientX,t.clientY,i)||e.isDefaultPrevented()||n.selection.select(o)},X=function(e){return n.dom.is(e,"figure.image")?e.querySelector("img"):e},Z=function(e){var t=n.settings.object_resizing;return!1!==t&&!de.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==n.getBody()&&Xi(ai.fromDom(e),t))},N=function(e){var t,a,B,v;A=(A=(t=e.screenX-g)*s[2]+I)<5?5:A,f=(f=(a=e.screenY-l)*s[3]+d)<5?5:f,(w(i)&&!1!==n.settings.resize_img_proportional?!Sh.modifierPressed(e):Sh.modifierPressed(e)||w(i)&&s[2]*s[3]!=0)&&(x(t)>x(a)?(f=F(A*C),A=F(f/C)):(A=F(f/C),f=F(A*C))),b.setStyles(X(o),{width:A,height:f}),B=0<(B=s.startPos.x+t)?B:0,v=0<(v=s.startPos.y+a)?v:0,b.setStyles(r,{left:B,top:v,display:"block"}),r.innerHTML=A+" &times; "+f,s[2]<0&&o.clientWidth<=A&&b.setStyle(o,"left",c+(I-A)),s[3]<0&&o.clientHeight<=f&&b.setStyle(o,"top",u+(d-f)),(t=G.scrollWidth-m)+(a=G.scrollHeight-p)!=0&&b.setStyles(r,{left:B-t,top:v-a}),h||(n.fire("ObjectResizeStart",{target:i,width:I,height:d}),h=!0)},k=function(){h=!1;var e=function(e,t){t&&(i.style[e]||!n.schema.isValid(i.nodeName.toLowerCase(),e)?b.setStyle(X(i),e,t):b.setAttrib(X(i),e,t))};e("width",A),e("height",f),b.unbind(v,"mousemove",N),b.unbind(v,"mouseup",k),y!==v&&(b.unbind(y,"mousemove",N),b.unbind(y,"mouseup",k)),b.remove(o),b.remove(r),R(i),n.fire("ObjectResized",{target:i,width:A,height:f}),b.setAttrib(i,"style",b.getAttrib(i,"style")),n.nodeChanged()},R=function(e){var t,h,x,F,Q;D(),W(),t=b.getPos(e,G),c=t.x,u=t.y,Q=e.getBoundingClientRect(),h=Q.width||Q.right-Q.left,x=Q.height||Q.bottom-Q.top,i!==e&&(i=e,A=f=0),F=n.fire("ObjectSelected",{target:e}),Z(e)&&!F.isDefaultPrevented()?B(a,function(e,t){var n;(n=b.get("mceResizeHandle"+t))&&b.remove(n),n=b.add(G,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===de.ie&&(n.contentEditable=!1),b.bind(n,"mousedown",function(t){var n;t.stopImmediatePropagation(),t.preventDefault(),g=(n=t).screenX,l=n.screenY,I=X(i).clientWidth,d=X(i).clientHeight,C=d/I,(s=e).startPos={x:h*e[0]+c,y:x*e[1]+u},m=G.scrollWidth,p=G.scrollHeight,o=i.cloneNode(!0),b.addClass(o,"mce-clonedresizable"),b.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,b.setStyles(o,{left:c,top:u,margin:0}),o.removeAttribute("data-mce-selected"),G.appendChild(o),b.bind(v,"mousemove",N),b.bind(v,"mouseup",k),y!==v&&(b.bind(y,"mousemove",N),b.bind(y,"mouseup",k)),r=b.add(G,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},I+" &times; "+d)}),e.elm=n,b.setStyles(n,{left:h*e[0]+c-n.offsetWidth/2,top:x*e[1]+u-n.offsetHeight/2})}):D(),i.setAttribute("data-mce-selected","1")},D=function(){var e,t;for(e in W(),i&&i.removeAttribute("data-mce-selected"),a)(t=b.get("mceResizeHandle"+e))&&(b.unbind(t),b.remove(t))},U=function(e){var i,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};h||n.removed||(B(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"===e.type?e.target:t.getNode(),o(i=b.$(i).closest("table,img,figure.image,hr")[0],G)&&(E(),o(t.getStart(!0),i)&&o(t.getEnd(!0),i))?R(i):D())},T=function(e){return cf(function(e,t){for(;t&&t!==e;){if(uf(t)||cf(t))return t;t=t.parentNode}return null}(n.getBody(),e))},W=function(){for(var e in a){var t=a[e];t.elm&&(b.unbind(t.elm),delete t.elm)}},E=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(Q){}};return n.on("init",function(){E(),de.ie&&11<=de.ie&&(n.on("mousedown click",function(e){var t=e.target,i=t.nodeName;h||!/^(TABLE|IMG|HR)$/.test(i)||T(t)||(2!==e.button&&n.selection.select(t,"TABLE"===i),"mousedown"===e.type&&n.nodeChanged())}),n.dom.bind(G,"mscontrolselect",function(e){var t=function(e){me.setEditorTimeout(n,function(){n.selection.select(e)})};if(T(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}));var e=me.throttle(function(e){n.composing||U(e)});n.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),n.on("keyup compositionend",function(t){i&&"TABLE"===i.nodeName&&e(t)}),n.on("hide blur",D),n.on("contextmenu",S)}),n.on("remove",W),{isResizable:Z,showResizeRect:R,hideResizeRect:D,updateResizeRect:U,destroy:function(){i=o=null}}},df=function(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}},Cf=function(e){return Ro.isContentEditableTrue(e)||Ro.isContentEditableFalse(e)},hf=function(e,t,n){var i,o,r,a,s,g=n;if(g.caretPositionFromPoint)(o=g.caretPositionFromPoint(e,t))&&((i=n.createRange()).setStart(o.offsetNode,o.offset),i.collapse(!0));else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(g.body.createTextRange){i=g.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(C){i=function(e,t,n){var i,o,r;if(i=n.elementFromPoint(e,t),o=n.body.createTextRange(),i&&"HTML"!==i.tagName||(i=n.body),o.moveToElementText(i),0<(r=(r=Pt.toArray(o.getClientRects())).sort(function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))})).length){t=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(a){}}return null}(e,t,n)}return a=n.body,s=(r=i)&&r.parentElement?r.parentElement():null,Ro.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(s,a,Cf))?null:r}return i},Af=function(e,t){return Y(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},ff=function(t,n){var i=(n||e.document).createDocumentFragment();return M(t,function(e){i.appendChild(e.dom())}),ai.fromDom(i)},mf=Gi("element","width","rows"),pf=Gi("element","cells"),bf=Gi("x","y"),Bf=function(e,t){var n=parseInt(vi(e,t),10);return isNaN(n)?1:n},vf=function(e){return z(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},yf=function(e,t){for(var n=e.rows(),i=0;i<n.length;i++)for(var o=n[i].cells(),r=0;r<o.length;r++)if(Ni(o[r],t))return Z.some(bf(r,i));return Z.none()},xf=function(e,t,n,i,o){for(var r=[],a=e.rows(),s=n;s<=o;s++){var g=a[s].cells(),l=t<i?g.slice(t,i+1):g.slice(i,t+1);r.push(pf(a[s].element(),l))}return r},Ff=function(e){return n=Y((t=e).rows(),function(e){var t=Y(e.cells(),function(e){var t=aa(e);return yi(t,"colspan"),yi(t,"rowspan"),t}),n=ra(e.element());return Zr(n,t),n}),i=ra(t.element()),o=ai.fromTag("tbody"),Zr(o,n),Xr(i,o),i;var t,n,i,o},Gf=function(){return ff([])},Qf=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return Z.from((u=e).selection.getRng()).map(function(e){var t=u.dom.add(u.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),n=ua(t.innerText);return u.dom.remove(t),n}).getOr("");t.getInner=!0;var n,o,a,s,g,l,c,u,I=(o=t,s=(n=e).selection.getRng(),g=n.dom.create("body"),l=n.selection.getSel(),c=Af(n,lI(l)),(a=o.contextual?function(e,t){var n,o,a=uI(t,e);return 0<a.length?function(e,t){return(n=e,i=t[0],Kr(i,"table",r(Ni,n))).bind(function(e){var n=t[0],i=t[t.length-1];return function(e,t,n){return yf(e,t).bind(function(t){return yf(e,n).map(function(n){return i=e,r=n,a=(o=t).x(),s=o.y(),g=r.x(),c=s<(l=r.y())?xf(i,a,s,g,l):xf(i,a,l,g,s),mf(i.element(),vf(c),c);var i,o,r,a,s,g,l,c})})}(function(e){var t=mf(ra(e),0,[]);return M(Lr(e,"tr"),function(e,n){M(Lr(e,"td,th"),function(i,o){!function(e,t,n,i,o){for(var r=Bf(o,"rowspan"),a=Bf(o,"colspan"),s=e.rows(),g=n;g<n+r;g++){s[g]||(s[g]=pf(aa(i),[]));for(var l=t;l<t+a;l++)s[g].cells()[l]=g===n&&l===t?o:ra(o)}}(t,function(e,t,n){for(;i=t,o=n,r=void 0,((r=e.rows())[o]?r[o].cells():[])[i];)t++;var i,o,r;return t}(t,o,n),n,e,i)})}),mf(t.element(),vf(t.rows()),t.rows())}(e),n,i).map(function(e){return ff([Ff(e)])})}).getOrThunk(Gf);var n,i}(e,a):(n=e,0<(o=t).length&&o[0].collapsed?Gf():function(e,t){return n=ai.fromDom(t.cloneContents()),o=function(e,t){var n,o=ai.fromDom(t.commonAncestorContainer),a=mc(o,e),s=K(a,function(e){return Co(e)||uo(e)}),g=function(e,t){return J(e,function(e){return"li"===ci(e)&&function(e,t){return Ma([(a=t,s=a.startContainer,g=a.startOffset,Ro.isText(s)?0===g?Z.some(ai.fromDom(s)):Z.none():Z.from(s.childNodes[g]).map(ai.fromDom)),(n=t,i=n.endContainer,o=n.endOffset,Ro.isText(i)?o===i.data.length?Z.some(ai.fromDom(i)):Z.none():Z.from(i.childNodes[o-1]).map(ai.fromDom))],function(t,n){var i=J(nh(e),r(Ni,t)),o=J(ih(e),r(Ni,n));return i.isSome()&&o.isSome()}).getOr(!1);var n,i,o,a,s,g}(e,t)}).fold(i([]),function(t){return(n=e,J(n,function(e){return"ul"===ci(e)||"ol"===ci(e)})).map(function(e){return[ai.fromTag("li"),ai.fromTag(ci(e))]}).getOr([]);var n})}(a,t),l=s.concat(g.length?g:mo(n=o)?Ui(n).filter(fo).fold(i([]),function(e){return[n,e]}):fo(n)?[n]:[]);return Y(l,ra)}(e,t),a=z(o,function(e,t){return Xr(t,e),t},n),0<o.length?ff([a]):a;var n,o,a}(n,o[0]))}(ai.fromDom(n.getBody()),c).dom():s.cloneContents())&&g.appendChild(a),n.selection.serializer.serialize(g,o));return"tree"===t.format?I:(t.content=e.selection.isCollapsed()?"":I,e.fire("GetContent",t),t.content)},wf=function(e,t,n,i,o){var r=n?t.startOffset:t.endOffset;return Z.from(n?t.startContainer:t.endContainer).map(ai.fromDom).map(function(e){return i&&t.collapsed?e:Li(e,o(e,r)).getOr(e)}).bind(function(e){return Ii(e)?Z.some(e):Ui(e)}).map(function(e){return e.dom()}).getOr(e)},Sf=function(e,t,n){return wf(e,t,!0,n,function(e,t){return Math.min(e.dom().childNodes.length,t)})},Xf=function(e,t,n){return wf(e,t,!1,n,function(e,t){return 0<t?t-1:t})},Zf=function(e,t){for(var n=e;e&&Ro.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Nf=Pt.each,kf=function(e){return!!e.select},Rf=function(e){return!(!e||!e.ownerDocument)&&ki(ai.fromDom(e.ownerDocument),ai.fromDom(e))},Df=function(e,t,n,i){var o,r,a,s,g,l=function(e,n){return function(e,n,i){var o,r,a,s=e.selection.getRng(),g=e.getDoc();if((i=i||{format:"html"}).set=!0,i.selection=!0,i.content=n,i.no_events||!(i=e.fire("BeforeSetContent",i)).isDefaultPrevented()){if(n=i.content,s.insertNode){n+='<span id="__caret">_</span>',s.startContainer===g&&s.endContainer===g?g.body.innerHTML=n:(s.deleteContents(),0===g.body.childNodes.length?g.body.innerHTML=n:s.createContextualFragment?s.insertNode(s.createContextualFragment(n)):(r=g.createDocumentFragment(),a=g.createElement("div"),r.appendChild(a),a.outerHTML=n,s.insertNode(r))),o=e.dom.get("__caret"),(s=g.createRange()).setStartBefore(o),s.setEndBefore(o),e.selection.setRng(s),e.dom.remove("__caret");try{e.selection.setRng(s)}catch(t){}}else s.item&&(g.execCommand("Delete",!1,null),s=e.getRng()),/^\s+/.test(n)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+n),e.dom.remove("__mce_tmp")):s.pasteHTML(n);i.no_events||e.fire("SetContent",i)}else e.fire("SetContent",i)}(i,e,n)},c=function(e){var t=I();t.collapse(!!e),d(t)},u=function(){return t.getSelection?t.getSelection():t.document.selection},I=function(){var n,o,r,l,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(l){return-1}};if(!t)return null;if(null==(l=t.document))return null;if(void 0!==i.bookmark&&!1===BC(i)){var I=Ud(i);if(I.isSome())return I.map(function(e){return Af(i,[e])[0]}).getOr(l.createRange())}try{(n=u())&&!Ro.isRestrictedNode(n.anchorNode)&&(o=0<n.rangeCount?n.getRangeAt(0):n.createRange?n.createRange():l.createRange())}catch(g){}return(o=Af(i,[o])[0])||(o=l.createRange?l.createRange():l.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(r=e.getRoot(),o.setStart(r,0),o.setEnd(r,0)),a&&s&&(0===c(o.START_TO_START,o,a)&&0===c(o.END_TO_END,o,a)?o=s:s=a=null),o},d=function(e,t){var n,o;if((r=e)&&(kf(r)||Rf(r.startContainer)&&Rf(r.endContainer))){var r,l=kf(e)?e:null;if(l){s=null;try{l.select()}catch(g){}}else{if(n=u(),e=i.fire("SetSelectionRange",{range:e,forward:t}).range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(g){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||de.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),i.fire("AfterSetSelectionRange",{range:e,forward:t})}}},C=function(){var t,n,i=u();return!(i&&i.anchorNode&&i.focusNode)||((t=e.createRng()).setStart(i.anchorNode,i.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(i.focusNode,i.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},h={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:i,collapse:c,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),d(o),c(!1)):(oh(e,o,i.getBody(),!0),d(o))},getContent:function(e){return Qf(i,e)},setContent:l,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,n){var i,o,r;return(i=e,o=t,r=n,Z.from(o).map(function(e){var t=i.nodeIndex(e),n=i.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),r&&(oh(i,n,e,!0),oh(i,n,e,!1)),n})).each(d),t},isCollapsed:function(){var e=I(),t=u();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:C,setNode:function(t){return l(e.getOuterHTML(t)),t},getNode:function(){return e=i.getBody(),(t=I())?(o=t.startContainer,r=t.endContainer,a=t.startOffset,s=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(o===r&&s-a<2&&o.hasChildNodes()&&(n=o.childNodes[a]),3===o.nodeType&&3===r.nodeType&&(o=o.length===a?Zf(o.nextSibling,!0):o.parentNode,r=0===s?Zf(r.previousSibling,!1):r.parentNode,o&&o===r))?o:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,o,r,a,s},getSel:u,setRng:d,getRng:I,getStart:function(e){return Sf(i.getBody(),I(),e)},getEnd:function(e){return Xf(i.getBody(),I(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,i){var o,r,a=[];if(r=e.getRoot(),n=e.getParent(n||Sf(r,t,t.collapsed),e.isBlock),i=e.getParent(i||Xf(r,t,t.collapsed),e.isBlock),n&&n!==r&&a.push(n),n&&i&&n!==i)for(var s=new ao(o=n,r);(o=s.next())&&o!==i;)e.isBlock(o)&&a.push(o);return i&&n!==i&&i!==r&&a.push(i),a}(e,I(),t,n)},normalize:function(){var t=I();if(!function(e){return 1<gI(e).length}(u())&&rh(i)){var n=ud(e,t);return n.each(function(e){d(e,C())}),n.getOr(t)}return t},selectorChanged:function(t,n){var o;return g||(g={},o={},i.on("NodeChange",function(t){var n=t.element,i=e.getParents(n,null,e.getRoot()),r={};Nf(g,function(t,n){Nf(i,function(a){if(e.is(a,n))return o[n]||(Nf(t,function(e){e(!0,{node:a,selector:n,parents:i})}),o[n]=t),r[n]=t,!1})}),Nf(o,function(e,t){r[t]||(delete o[t],Nf(e,function(e){e(!1,{node:n,selector:t,parents:i})}))})})),g[t]||(g[t]=[]),g[t].push(n),h},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var i,o,r,a,s,g=e.dom,l=g.getRoot(),c=0;if(e.fire("scrollIntoView",s={elm:t,alignToTop:n}),!s.isDefaultPrevented()&&Ro.isElement(t)){if(!1===n&&(c=t.offsetHeight),"BODY"!==l.nodeName){var u=e.selection.getScrollContainer();if(u)return i=df(t).y-df(u).y+c,a=u.clientHeight,void((i<(r=u.scrollTop)||r+a<i+25)&&(u.scrollTop=i<r?i:i-a+25))}o=g.getViewPort(e.getWin()),i=g.getPos(t).y+c,r=o.y,a=o.h,(i<o.y||r+a<i+25)&&e.getWin().scrollTo(0,i<r?i:i-a+25)}}(i,e,t)},placeCaretAt:function(e,t){return d(hf(e,t,i.getDoc()))},getBoundingClientRect:function(){var e=I();return e.collapsed?Cs.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=s=null,r.destroy()}};return o=lf(h),r=If(h,i),h.bookmarkManager=o,h.controlSelection=r,h};(gf=sf||(sf={}))[gf.Br=0]="Br",gf[gf.Block=1]="Block",gf[gf.Wrap=2]="Wrap",gf[gf.Eol=3]="Eol";var Uf=function(e,t){return e===Is.Backwards?t.reverse():t},Tf=function(e,t,n,i){for(var o,r,a,s,g,l=kg(n),c=i,u=[];c&&(s=l,g=c,o=t===Is.Forwards?s.next(g):s.prev(g));){if(Ro.isBr(o.getNode(!1)))return t===Is.Forwards?{positions:Uf(t,u).concat([o]),breakType:sf.Br,breakAt:Z.some(o)}:{positions:Uf(t,u),breakType:sf.Br,breakAt:Z.some(o)};if(o.isVisible()){if(e(c,o)){var I=(r=c,Ro.isBr((a=o).getNode(t===Is.Forwards))?sf.Br:!1===lg(r,a)?sf.Block:sf.Wrap);return{positions:Uf(t,u),breakType:I,breakAt:Z.some(o)}}u.push(o),c=o}else c=o}return{positions:Uf(t,u),breakType:sf.Eol,breakAt:Z.none()}},Wf=function(e,t,n,i){return t(n,i).breakAt.map(function(i){var o=t(n,i).positions;return e===Is.Backwards?o.concat(i):[i].concat(o)}).getOr([])},Ef=function(e,t){return z(e,function(e,n){return e.fold(function(){return Z.some(n)},function(i){return Ma([ne(i.getClientRects()),ne(n.getClientRects())],function(e,o){var r=Math.abs(t-e.left);return Math.abs(t-o.left)<=r?n:i}).or(e)})},Z.none())},Hf=function(e,t){return ne(t.getClientRects()).bind(function(t){return Ef(e,t.left)})},Of=r(Tf,us.isAbove,-1),Lf=r(Tf,us.isBelow,1),Vf=r(Wf,-1,Of),Yf=r(Wf,1,Lf),Mf=Ro.isContentEditableFalse,_f=Oa,Kf=function(e,t,n){var i,o,a,s,g=kg(e.getBody()),l=r(pg,g.next),c=r(pg,g.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(i=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?l(Cs.fromRangeStart(n)):c(Cs.fromRangeStart(n)))||(s=(a=e).dom.create(Kl(a)),(!de.ie||11<=de.ie)&&(s.innerHTML='<br data-mce-bogus="1">'),o=s,1===t?e.$(i).after(o):e.$(i).before(o),e.selection.select(o,!0),e.selection.collapse())}},zf=function(e,t){return function(){var n,i,o,a,s,g,l,c,u,I=(i=t,a=kg((n=e).getBody()),s=r(pg,a.next),g=r(pg,a.prev),l=i?Is.Forwards:Is.Backwards,c=i?s:g,u=n.selection.getRng(),(o=function(e,t,n,i){var o=e===Is.Forwards,r=o?Yc:Mc;if(!i.collapsed){var a=_f(i);if(Mf(a))return YI(e,t,a,e===Is.Backwards,!0)}var s=Ca(i.startContainer),g=fg(e,t.getBody(),i);if(r(g))return MI(t,g.getNode(!o));var l=rc.normalizePosition(o,n(g));if(!l)return s?i:null;if(r(l))return YI(e,t,l.getNode(!o),o,!0);var c=n(l);return c&&r(c)&&bg(l,c)?YI(e,t,c.getNode(!o),o,!0):s?KI(t,l.toRange(),!0):null}(l,n,c,u))?o:(o=Kf(n,l,u))||null);return!!I&&(e.selection.setRng(I),!0)}},Jf=function(e,t){return function(){var n,i,o,r,a,s,g=(r=(i=t)?1:-1,a=i?mh:fh,s=(n=e).selection.getRng(),(o=function(e,t,n,i){var o,r,a,s,g,l,c,u,I;if(I=_f(i),o=fg(e,t.getBody(),i),r=n(t.getBody(),ph(1),o),a=K(r,bh(1)),g=Mt.last(o.getClientRects()),(Yc(o)||Kc(o))&&(I=o.getNode()),(Mc(o)||zc(o))&&(I=o.getNode(!0)),!g)return null;if((s=Gh(a,l=g.left))&&Mf(s.node))return c=Math.abs(l-s.left),u=Math.abs(l-s.right),YI(e,t,s.node,c<u,!0);if(I){var d=function(e,t,n,i){var o,r,a,s,g,l,c=kg(t),u=[],I=0,d=function(e){return Mt.last(e.getClientRects())};1===e?(o=c.next,r=Ea,a=Wa,s=Cs.after(i)):(o=c.prev,r=Wa,a=Ea,s=Cs.before(i)),l=d(s);do{if(s.isVisible()&&!a(g=d(s),l)){if(0<u.length&&r(g,Mt.last(u))&&I++,(g=Da(g)).position=s,g.line=I,n(g))return u;u.push(g)}}while(s=o(s));return u}(e,t.getBody(),ph(1),I);if(s=Gh(K(d,bh(1)),l))return KI(t,s.position.toRange(),!0);if(s=Mt.last(K(d,bh(0))))return KI(t,s.position.toRange(),!0)}}(r,n,a,s))?o:(o=Kf(n,r,s))||null);return!!g&&(e.selection.setRng(g),!0)}},Pf=function(e,t){return function(){var n,o=t?Cs.fromRangeEnd(e.selection.getRng()):Cs.fromRangeStart(e.selection.getRng()),r=t?Lf(e.getBody(),o):Of(e.getBody(),o);return(t?ie(r.positions):ne(r.positions)).filter((n=t,function(e){return n?Mc(e):Yc(e)})).fold(i(!1),function(t){return e.selection.setRng(t.toRange()),!0})}},jf=function(e,t,n,i,o){var r,a,s,g,l=Lr(ai.fromDom(n),"td,th,caption").map(function(e){return e.dom()});return(a=K((r=e,q(l,function(e){var t,n={left:(t=Da(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:n.left,y:r(n),cell:e},{x:n.right,y:r(n),cell:e}]})),function(e){return t(e,o)}),s=i,g=o,z(a,function(e,t){return e.fold(function(){return Z.some(t)},function(e){var n=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-g)),i=Math.sqrt(Math.abs(t.x-s)+Math.abs(t.y-g));return Z.some(i<n?t:e)})},Z.none())).map(function(e){return e.cell})},$f=r(jf,function(e){return e.bottom},function(e,t){return e.y<t}),qf=r(jf,function(e){return e.top},function(e,t){return e.y>t}),em=function(e,t){var n;e.selection.setRng(t),n=e,ne(us.fromRangeStart(t).getClientRects()).each(function(e){var t,i,o,r,a,s,g,l,c,u=(a=t=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(n),(s=i=e).left>a.left&&s.right<a.right?0:s.left<a.left?s.left-a.left:s.right-a.right),I=(r=i).top>(o=t).top&&r.bottom<o.bottom?0:r.top<o.top?r.top-o.top:r.bottom-o.bottom;l=0!==u?0<u?u+4:u-4:0,c=0!==I?0<I?I+4:I-4:0,(g=n).inline?(g.getBody().scrollLeft+=l,g.getBody().scrollTop+=c):g.getWin().scrollBy(l,c)})},tm=function(e,t,n){var i,o,r,a,s=e(t,n);return(a=s).breakType===sf.Wrap&&0===a.positions.length||!Ro.isBr(n.getNode())&&(r=s).breakType===sf.Br&&1===r.positions.length?(i=e,o=t,!s.breakAt.map(function(e){return i(o,e).breakAt.isSome()}).getOr(!1)):s.breakAt.isNone()},nm=r(tm,Of),im=r(tm,Lf),om=function(e,t,n){var i,o=(i=n.getNode(!!t),Ro.isElement(i)&&"TABLE"===i.nodeName?Z.some(i):Z.none()),r=!1===t;o.fold(function(){return em(e,n.toRange())},function(i){return Vg.positionIn(r,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return em(e,n.toRange())},function(o){return r=t,s=i,g=n,void((l=Kl(a=e))?a.undoManager.transact(function(){var e=ai.fromTag(l);Bi(e,zl(a)),Xr(e,ai.fromTag("br")),r?wr(ai.fromDom(s),e):Qr(ai.fromDom(s),e);var t=a.dom.createRng();t.setStart(e.dom(),0),t.setEnd(e.dom(),0),em(a,t)}):em(a,g.toRange()));var r,a,s,g,l})})},rm=function(e,t){return function(){return Z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Z.from(e.dom.getParent(n,"table")).map(function(n){return function(e,t,n,i){var o,r,a,s=e.selection.getRng(),g=t?1:-1;if(Ps()&&(o=t,r=n,a=Cs.fromRangeStart(s),Vg.positionIn(!o,r).map(function(e){return e.isEqual(a)}).getOr(!1))){var l=YI(g,e,n,!t,!0);return em(e,l),!0}return!1}(e,t,n)})}).getOr(!1)}},am=function(e,t){return function(){return Z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Z.from(e.dom.getParent(n,"table")).map(function(i){return function(e,t,n,i){var o,r,a,s,g,l,c=e.selection.getRng(),u=Cs.fromRangeStart(c),I=e.getBody();if(!t&&nm(i,u)){var d=(s=I,function(e,t){return ne(t.getClientRects()).bind(function(t){return $f(e,t.left,t.top)}).bind(function(e){return Hf(Vg.lastPositionIn(n=e).map(function(e){return Of(n,e).positions.concat(e)}).getOr([]),t);var n})}(g=n,l=u).orThunk(function(){return ne(l.getClientRects()).bind(function(e){return Ef(Vf(s,Cs.before(g)),e.left)})}).getOr(Cs.before(g)));return om(e,t,d),!0}return!(!t||!im(i,u)||(o=I,d=function(e,t){return ie(t.getClientRects()).bind(function(t){return qf(e,t.left,t.top)}).bind(function(e){return Hf(Vg.firstPositionIn(n=e).map(function(e){return[e].concat(Lf(n,e).positions)}).getOr([]),t);var n})}(r=n,a=u).orThunk(function(){return ne(a.getClientRects()).bind(function(e){return Ef(Yf(o,Cs.after(r)),e.left)})}).getOr(Cs.after(r)),om(e,t,d),0))}(e,t,i,n)})}).getOr(!1)}},sm=function(e){return L(["figcaption"],ci(e))},gm=function(t){var n=e.document.createRange();return n.setStartBefore(t.dom()),n.setEndBefore(t.dom()),n},lm=function(e,t,n){n?Xr(e,t):Sr(e,t)},cm=function(e,t){return function(){return!!e.selection.isCollapsed()&&function(e,t){var n,i,o,a=ai.fromDom(e.getBody()),s=Cs.fromRangeStart(e.selection.getRng()),g=Kl(e),l=zl(e);return(n=s,i=a,o=r(Ni,i),_r(ai.fromDom(n.container()),Io,o).filter(sm)).exists(function(){if(function(e,t,n){return t?(o=e.dom(),Lf(o,n).breakAt.isNone()):(i=e.dom(),Of(i,n).breakAt.isNone());var i,o}(a,t,s)){var n=function(e,t,n,i){return""===t?(l=e,c=i,u=ai.fromTag("br"),lm(l,u,c),gm(u)):(o=e,r=i,a=n,s=ai.fromTag(t),g=ai.fromTag("br"),Bi(s,a),Xr(s,g),lm(o,s,r),gm(g));var o,r,a,s,g,l,c,u}(a,g,l,t);return e.selection.setRng(n),!0}return!1})}(e,t)}},um=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,i)}},Im=function(e,n){return J(function(e,n){return q(Y(e,function(e){return DA({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t},e)}),function(e){return(i=n).keyCode===(t=e).keyCode&&i.shiftKey===t.shiftKey&&i.altKey===t.altKey&&i.ctrlKey===t.ctrlKey&&i.metaKey===t.metaKey?[e]:[];var t,i})}(e,n),function(e){return e.action()})},dm=function(e){return Z.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Cm=function(e,t){var n,i,o,r=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var g=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&t.insertBefore(a.doc.createTextNode("\xa0"),t.firstChild)}if(o=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new ao(t,t);i=n.current();){if(Ro.isText(i)){o.setStart(i,0),o.setEnd(i,0);break}if(s[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}r=i,i=n.next()}i||(o.setStart(r,0),o.setEnd(r,0))}else Ro.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),a.remove(void 0),e.selection.scrollIntoView(t)}},hm=dm,Am=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},fm=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},mm=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},pm=function(e,t,n){for(var i=e[n?"firstChild":"lastChild"];i&&!Ro.isElement(i);)i=i[n?"nextSibling":"previousSibling"];return i===t},bm=function(e){e.innerHTML='<br data-mce-bogus="1">'},Bm=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},vm=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},ym=function(e,t,n){return!1===Ro.isText(t)?n:e?1===n&&t.data.charAt(n-1)===ca?0:n:n===t.data.length-1&&t.data.charAt(n)===ca?t.data.length:n},xm=function(e,t){var n,i,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==o?i:o},Fm=function(e,t){var n=Kl(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,zl(e))},Gm=function(e,t){return hm(e).filter(function(e){return 0<t.length&&Xi(ai.fromDom(e),t)}).isSome()},Qm=Sc([{br:[]},{block:[]},{none:[]}]),wm=function(e,t){return function(e){return Gm(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},Sm=function(e){return function(t,n){return""===Kl(t)===e}},Xm=function(e){return function(t,n){return function(e){return dm(e).filter(function(e){return mo(ai.fromDom(e))}).isSome()}(t)===e}},Zm=function(e,t){return function(n,o){return function(e){return dm(e).fold(i(""),function(e){return e.nodeName.toUpperCase()})}(n)===e.toUpperCase()===t}},Nm=function(e){return Zm("pre",e)},km=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},Rm=function(e,t){return function(e){return Gm(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},Dm=function(e,t){return t},Um=function(e){var t=Kl(e),n=function(e,t){var n,i,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==o?i:o}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},Tm=function(e,t){return function(n,i){return z(e,function(e,t){return e&&t(n,i)},!0)?Z.some(t):Z.none()}},Wm=function(e,n){(function(e,t){return pu([Tm([wm],Qm.none()),Tm([Zm("summary",!0)],Qm.br()),Tm([Nm(!0),km(!1),Dm],Qm.br()),Tm([Nm(!0),km(!1)],Qm.block()),Tm([Nm(!0),km(!0),Dm],Qm.block()),Tm([Nm(!0),km(!0)],Qm.br()),Tm([Xm(!0),Dm],Qm.br()),Tm([Xm(!0)],Qm.block()),Tm([Sm(!0),Dm,Um],Qm.block()),Tm([Sm(!0)],Qm.br()),Tm([Rm],Qm.br()),Tm([Sm(!1),Dm],Qm.br()),Tm([Um],Qm.block())],[e,t.shiftKey]).getOr(Qm.none())})(e,n).fold(function(){bd(e,n)},function(){!function(e,t){var n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b=e.dom,B=e.schema,v=B.getNonEmptyElements(),y=e.selection.getRng(),x=function(t){var n,r,s,g=o,l=B.getTextInlineElements();if(t||"TABLE"===u||"HR"===u?(n=b.create(t||d),Fm(e,n)):n=a.cloneNode(!1),s=n,!1===e.getParam("keep_styles",!0))b.setAttrib(n,"style",null),b.setAttrib(n,"class",null);else do{if(l[g.nodeName]){if(Ts(g)||$g(g))continue;r=g.cloneNode(!1),b.setAttrib(r,"id",""),n.hasChildNodes()?r.appendChild(n.firstChild):s=r,n.appendChild(r)}}while((g=g.parentNode)&&g!==i);return bm(s),n},F=function(e){var t,n,i,s;if(s=ym(e,o,r),Ro.isText(o)&&(e?0<s:s<o.nodeValue.length))return!1;if(o.parentNode===a&&C&&!e)return!0;if(e&&Ro.isElement(o)&&o===a.firstChild)return!0;if(Bm(o,"TABLE")||Bm(o,"HR"))return C&&!e||!C&&e;for(t=new ao(o,a),Ro.isText(o)&&(e&&0===s?t.prev():e||s!==o.nodeValue.length||t.next());n=t.current();){if(Ro.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(i=n.nodeName.toLowerCase(),v[i]&&"br"!==i))return!1}else if(Ro.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},G=function(){g=/^(H[1-6]|PRE|FIGURE)$/.test(u)&&"HGROUP"!==I?x(d):x(),e.getParam("end_container_on_empty_block",!1)&&vm(b,c)&&b.isEmpty(a)?g=b.split(c,a):b.insertAfter(g,a),Cm(e,g)};ud(b,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),o=y.startContainer,r=y.startOffset,d=Kl(e),s=t.shiftKey,Ro.isElement(o)&&o.hasChildNodes()&&(C=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,r=C&&Ro.isText(o)?o.nodeValue.length:0),(i=xm(b,o))&&((d&&!s||!d&&s)&&(o=function(e,t,n,i,o){var r,a,s,g,l,c,u,I=t||"P",d=e.dom,C=xm(d,i);if(!(a=d.getParent(i,d.isBlock))||!vm(d,a)){if(c=(a=a||C)===e.getBody()||(u=a)&&/^(TD|TH|CAPTION)$/.test(u.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return r=d.create(I),Fm(e,r),a.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(g=i;g.parentNode!==a;)g=g.parentNode;for(;g&&!d.isBlock(g);)g=(s=g).previousSibling;if(s&&e.schema.isValidChild(c,I.toLowerCase())){for(r=d.create(I),Fm(e,r),s.parentNode.insertBefore(r,s),g=s;g&&!d.isBlock(g);)l=g.nextSibling,r.appendChild(g),g=l;n.setStart(i,o),n.setEnd(i,o)}}return i}(e,d,y,o,r)),a=b.getParent(o,b.isBlock),c=a?b.getParent(a.parentNode,b.isBlock):null,u=a?a.nodeName.toUpperCase():"","LI"!==(I=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(c=(a=c).parentNode,u=I),/^(LI|DT|DD)$/.test(u)&&b.isEmpty(a)?function(e,t,n,i,o){var r=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;fm(s=n)&&fm(s.parentNode)&&(o="LI");var g,l=o?t(o):r.create("BR");if(pm(n,i,!0)&&pm(n,i,!1))Am(n,"LI")?r.insertAfter(l,mm(n)):r.replace(l,n);else if(pm(n,i,!0))Am(n,"LI")?(r.insertAfter(l,mm(n)),l.appendChild(r.doc.createTextNode(" ")),l.appendChild(n)):n.parentNode.insertBefore(l,n);else if(pm(n,i,!1))r.insertAfter(l,mm(n));else{n=mm(n);var c=a.cloneRange();c.setStartAfter(i),c.setEndAfter(n);var u=c.extractContents();"LI"===o&&(g=u).firstChild&&"LI"===g.firstChild.nodeName?(l=u.firstChild,r.insertAfter(u,n)):(r.insertAfter(u,n),r.insertAfter(l,n))}r.remove(i),Cm(e,l)}}(e,x,c,a,d):d&&a===e.getBody()||(d=d||"P",Ca(a)?(g=va(a),b.isEmpty(a)&&bm(a),Cm(e,g)):F()?G():F(!0)?(g=a.parentNode.insertBefore(x(),a),Cm(e,Bm(a,"HR")?g:a)):((n=(m=y,p=m.cloneRange(),p.setStart(m.startContainer,ym(!0,m.startContainer,m.startOffset)),p.setEnd(m.endContainer,ym(!1,m.endContainer,m.endOffset)),p).cloneRange()).setEndAfter(a),l=n.extractContents(),M(Or(ai.fromDom(l),di),function(e){var t=e.dom();t.nodeValue=ua(t.nodeValue)}),function(e){for(;Ro.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(l),g=l.firstChild,b.insertAfter(l,a),function(e,t,n){var i,o=n,r=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Ro.isElement(o)&&!t[o.nodeName.toLowerCase()]&&r.push(o)}for(i=r.length;i--;)!(o=r[i]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue?e.remove(o):(a=o)&&"A"===a.nodeName&&e.isEmpty(a)&&e.remove(o);var a}}(b,v,g),h=b,(A=a).normalize(),(f=A.lastChild)&&!/^(left|right)$/gi.test(h.getStyle(f,"float",!0))||h.add(A,"br"),b.isEmpty(a)&&bm(a),g.normalize(),b.isEmpty(g)?(b.remove(g),G()):Cm(e,g)),b.setAttrib(g,"id",""),e.fire("NewBlock",{newBlock:g})))}(e,n)},t)},Em=function(e,t){var n=t.container(),i=t.offset();return Ro.isText(n)?(n.insertData(i,e),Z.some(us(n,i+e.length))):mg(t).map(function(n){var i=ai.fromText(e);return t.isAtEnd()?wr(n,i):Qr(n,i),us(i.dom(),e.length)})},Hm=r(Em,"\xa0"),Om=r(Em," "),Lm=function(e,t,n){return Vg.navigateIgnore(e,t,n,Lc)},Vm=function(e,t){return J(mc(ai.fromDom(t.container()),e),Io)},Ym=function(e,t,n){return Lm(e,t.dom(),n).forall(function(e){return Vm(t,n).fold(function(){return!1===lg(e,n,t.dom())},function(i){return!1===lg(e,n,t.dom())&&ki(i,ai.fromDom(e.container()))})})},Mm=function(e,t,n){return Vm(t,n).fold(function(){return Lm(e,t.dom(),n).forall(function(e){return!1===lg(e,n,t.dom())})},function(t){return Lm(e,t.dom(),n).isNone()})},_m=r(Mm,!1),Km=r(Mm,!0),zm=r(Ym,!1),Jm=r(Ym,!0),Pm=function(e){return us.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},jm=function(e,t){var n=K(mc(ai.fromDom(t.container()),e),Io);return ne(n).getOr(e)},$m=function(e,t){return Pm(t)?Oc(t):Oc(t)||Vg.prevPosition(jm(e,t).dom(),t).exists(Oc)},qm=function(e,t){return Pm(t)?Hc(t):Hc(t)||Vg.nextPosition(jm(e,t).dom(),t).exists(Hc)},ep=function(e){return mg(e).bind(function(e){return _r(e,Ii)}).exists(function(e){return t=xi(e,"white-space"),L(["pre","pre-wrap"],t);var t})},tp=function(e,t){return n=e,!ep(i=t)&&(_m(n,i)||zm(n,i)||kc(n,i)||$m(n,i))||function(e,t){var n,i,o,r=(i=(n=t).container(),o=n.offset(),Ro.isText(i)&&o<i.data.length?us(i,o+1):n);return!ep(r)&&(Km(e,r)||Jm(e,r)||Nc(e,r)||qm(e,r))}(e,t);var n,i},np=function(e,t){return Uc(e.charAt(t))},ip=function(e){var t=e.container();return Ro.isText(t)&&Pn(t.data,"\xa0")},op=function(e){var t=ai.fromDom(e.getBody());e.selection.isCollapsed()&&function(e,t){return Z.some(t).filter(ip).bind(function(t){var n,i,o,r,a,s,g,l,c=t.container();return a=e,g=(s=c).data,l=us(s,0),np(g,0)&&!tp(a,l)&&(s.data=" "+g.slice(1),1)||function(e){var t=e.data,n=Y(t.split(""),function(e,t,n){return Uc(e)&&0<t&&t<n.length-1&&Wc(n[t-1])&&Wc(n[t+1])?" ":e}).join("");return n!==t&&(e.data=n,!0)}(c)||(n=e,o=(i=c).data,r=us(i,o.length-1),np(o,o.length-1)&&!tp(n,r)&&(i.data=o.slice(0,-1)+" ",1))?Z.some(t):Z.none()})}(t,us.fromRangeStart(e.selection.getRng())).each(function(t){e.selection.setRng(t.toRange())})},rp=function(e){var t,n,i=Cs.fromRangeStart(e.selection.getRng()),o=ai.fromDom(e.getBody());if(e.selection.isCollapsed()){var a=r(rc.isInlineTarget,e),s=Cs.fromRangeStart(e.selection.getRng());return Tu(a,e.getBody(),s).bind((n=o,function(e){return e.fold(function(e){return Vg.prevPosition(n.dom(),Cs.before(e))},function(e){return Vg.firstPositionIn(e)},function(e){return Vg.lastPositionIn(e)},function(e){return Vg.nextPosition(n.dom(),Cs.after(e))})})).bind(function(e,t){return function(n){return i=e,!ep(o=n)&&(function(e,t){return i=t,Vg.prevPosition(e.dom(),i).isNone()||(n=t,Vg.nextPosition(e.dom(),n).isNone())||_m(e,t)||Km(e,t)||kc(e,t)||Nc(e,t);var n,i}(i,o)||$m(i,o)||qm(i,o))?Hm(t):Om(t);var i,o}}(o,i)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},ap=function(e,t){var n;t.hasAttribute("data-mce-caret")&&(va(t),(n=e).selection.setRng(n.selection.getRng()),e.selection.scrollIntoView(t))},sp=function(e,t){var n=zr(ai.fromDom(e.getBody()),"*[data-mce-caret]").fold(i(null),function(e){return e.dom()});if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void ap(e,n)):void(fa(n)&&(ap(e,n),e.undoManager.add()))},gp=oi.detect().browser,lp=function(e){var t,n,i,o,a=Ku.setupSelectedState(e);(function(e){e.on("keyup compositionstart",r(sp,e))})(e),o=a,(i=e).on("keydown",function(e){var t,n,r,a;!1===e.isDefaultPrevented()&&(t=i,n=o,r=e,a=oi.detect().os,Im([{keyCode:Sh.RIGHT,action:zf(t,!0)},{keyCode:Sh.LEFT,action:zf(t,!1)},{keyCode:Sh.UP,action:Jf(t,!1)},{keyCode:Sh.DOWN,action:Jf(t,!0)},{keyCode:Sh.RIGHT,action:rm(t,!0)},{keyCode:Sh.LEFT,action:rm(t,!1)},{keyCode:Sh.UP,action:am(t,!1)},{keyCode:Sh.DOWN,action:am(t,!0)},{keyCode:Sh.RIGHT,action:Ku.move(t,n,!0)},{keyCode:Sh.LEFT,action:Ku.move(t,n,!1)},{keyCode:Sh.RIGHT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:Ku.moveNextWord(t,n)},{keyCode:Sh.LEFT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:Ku.movePrevWord(t,n)},{keyCode:Sh.UP,action:cm(t,!1)},{keyCode:Sh.DOWN,action:cm(t,!0)}],r).each(function(e){r.preventDefault()}))}),function(e,t){e.on("keydown",function(n){var i,o,r;!1===n.isDefaultPrevented()&&(o=t,r=n,Im([{keyCode:Sh.BACKSPACE,action:um(su,i=e,!1)},{keyCode:Sh.DELETE,action:um(su,i,!0)},{keyCode:Sh.BACKSPACE,action:um(JI,i,!1)},{keyCode:Sh.DELETE,action:um(JI,i,!0)},{keyCode:Sh.BACKSPACE,action:um(Pu,i,o,!1)},{keyCode:Sh.DELETE,action:um(Pu,i,o,!0)},{keyCode:Sh.BACKSPACE,action:um(mI,i,!1)},{keyCode:Sh.DELETE,action:um(mI,i,!0)},{keyCode:Sh.BACKSPACE,action:um(wc,i,!1)},{keyCode:Sh.DELETE,action:um(wc,i,!0)},{keyCode:Sh.BACKSPACE,action:um(Gc,i,!1)},{keyCode:Sh.DELETE,action:um(Gc,i,!0)},{keyCode:Sh.BACKSPACE,action:um(OI,i,!1)},{keyCode:Sh.DELETE,action:um(OI,i,!0)}],r).each(function(e){r.preventDefault()}))}),e.on("keyup",function(t){var n,i;!1===t.isDefaultPrevented()&&(i=t,Im([{keyCode:Sh.BACKSPACE,action:um(gu,n=e)},{keyCode:Sh.DELETE,action:um(gu,n)}],i))})}(e,a),(n=e).on("keydown",function(e){var t,i,o;e.keyCode===Sh.ENTER&&(t=n,(i=e).isDefaultPrevented()||(i.preventDefault(),(o=t.undoManager).typing&&(o.typing=!1,o.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),Wm(t,i)})))}),(t=e).on("keydown",function(e){var n;!1===e.isDefaultPrevented()&&(n=e,Im([{keyCode:Sh.SPACEBAR,action:um(rp,t)}],n).each(function(e){n.preventDefault()}))}),function(e){var t,n;t=e,n=Dr(function(){t.composing||op(t)},0),gp.isIE()&&(t.on("keypress",function(e){n.throttle()}),t.on("remove",function(e){n.cancel()})),e.on("input",function(t){!1===t.isComposing&&op(e)})}(e),function(e){e.on("keydown",function(t){var n,i;!1===t.isDefaultPrevented()&&(i=t,Im([{keyCode:Sh.END,action:Pf(n=e,!0)},{keyCode:Sh.HOME,action:Pf(n,!1)}],i).each(function(e){i.preventDefault()}))})}(e)},cp=function(e){return Ro.isElement(e)&&Ao(ai.fromDom(e))},up=mr.DOM,Ip=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&me.setEditorTimeout(t,function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()},100)},dp=function(t,n){var o,r,a,s,g,l,c,u,I=t.settings,d=t.getElement(),C=t.getDoc();I.inline||(t.getElement().style.visibility=t.orgVisibility),n||I.content_editable||(C.open(),C.write(t.iframeHTML),C.close()),I.content_editable&&(t.on("remove",function(){var e=this.getBody();up.removeClass(e,"mce-content-body"),up.removeClass(e,"mce-edit-focus"),up.setAttrib(e,"contentEditable",null)}),up.addClass(d,"mce-content-body"),t.contentDocument=C=I.content_document||e.document,t.contentWindow=I.content_window||e.window,t.bodyElement=d,I.content_document=I.content_window=null,I.root_name=d.nodeName.toLowerCase()),(o=t.getBody()).disabled=!0,t.readonly=I.readonly,t.readonly||(t.inline&&"static"===up.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=t.getParam("content_editable_state",!0)),o.disabled=!1,t.editorUpload=function(t){var n,o,r,a,s,g,l,c,u,I=(n=[],o=function(e){var t,n,o;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||jC.uuid("blobid"),n=e.name||t,{id:i(t),name:i(n),filename:i(n+"."+(o=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[o.toLowerCase()]||"dat")),blob:i(e.blob),base64:i(e.base64),blobUri:i(e.blobUri||ge.createObjectURL(e.blob)),uri:i(e.uri)}},{create:function(e,t,n,i){if(k(e))return o({id:e,name:i,blob:t,base64:n});if(R(e))return o(e);throw new Error("Unknown input type")},add:function(e){r(e.id())||n.push(e)},get:r=function(e){return a(function(t){return t.id()===e})},getByUri:function(e){return a(function(t){return t.blobUri()===e})},findFirst:a=function(e){return K(n,e)[0]},removeByUri:function(e){n=K(n,function(t){return t.blobUri()!==e||(ge.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){M(n,function(e){ge.revokeObjectURL(e.blobUri())}),n=[]}}),d=(l={},c=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:u=function(e){return e in l},getResultUri:function(e){var t=l[e];return t?t.resultUri:null},isPending:function(e){return!!u(e)&&1===l[e].status},isUploaded:function(e){return!!u(e)&&2===l[e].status},markPending:function(e){l[e]=c(1,null)},markUploaded:function(e,t){l[e]=c(2,t)},removeFailed:function(e){delete l[e]},destroy:function(){l={}}}),C=[],h=function(e){return function(n){return t.selection?e(n):[]}},A=function(e,t,n){for(var i=0;-1!==(i=e.indexOf(t,i))&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1),-1!==i;);return e},f=function(e,t,n){return e=A(e,'src="'+t+'"','src="'+n+'"'),A(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},m=function(e,n){M(t.undoManager.data,function(t){"fragmented"===t.type?t.fragments=Y(t.fragments,function(t){return f(t,e,n)}):t.content=f(t.content,e,n)})},p=function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},b=function(n){return s||(s=function(t,n){var i={},o=function(t,i,o,r){var a,s;(a=LC()).open("POST",n.url),a.withCredentials=n.credentials,a.upload.onprogress=function(e){r(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e,t,r;a.status<200||300<=a.status?o("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?i((r=e.location,(t=n.basePath)?t.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r)):o("Invalid JSON: "+a.responseText)},(s=new e.FormData).append("file",t.blob(),t.filename()),a.send(s)},r=function(e,t){return{url:t,blobInfo:e,status:!0}},a=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},s=function(e,t){Pt.each(i[e],function(e){e(t)}),delete i[e]};return!1===W(n.handler)&&(n.handler=o),{upload:function(e,g){return n.url||n.handler!==o?function(e,o){return e=Pt.grep(e,function(e){return!t.isUploaded(e.blobUri())}),Ce.all(Pt.map(e,function(e){return t.isPending(e.blobUri())?(u=e.blobUri(),new Ce(function(e){i[u]=i[u]||[],i[u].push(e)})):(l=n.handler,c=o,t.markPending((g=e).blobUri()),new Ce(function(n){var i;try{var o=function(){i&&i.close()};l(g,function(e){o(),t.markUploaded(g.blobUri(),e),s(g.blobUri(),r(g,e)),n(r(g,e))},function(e){o(),t.removeFailed(g.blobUri()),s(g.blobUri(),a(g,e)),n(a(g,e))},function(e){e<0||100<e||(i||(i=c()),i.progressBar.value(e))})}catch(e){n(a(g,e.message))}}));var g,l,c,u}))}(e,g):new Ce(function(e){e([])})}}}(d,{url:ql(t),basePath:ec(t),credentials:tc(t),handler:nc(t)})),y().then(h(function(e){var i;return i=Y(e,function(e){return e.blobInfo}),s.upload(i,p).then(h(function(i){var o=Y(i,function(n,i){var o=e[i].image;return n.status&&$l(t)?function(e,n){I.removeByUri(e.src),m(e.src,n),t.$(e).attr({src:jl(t)?n+"?"+(new Date).getTime():n,"data-mce-src":t.convertURL(n,"src")})}(o,n.url):n.error&&EC.uploadError(t,n.error),{element:o,status:n.status}});return n&&n(o),o}))}))},B=function(e){if(Pl(t))return b(e)},v=function(e){return!1!==ee(C,function(t){return t(e)})&&(0!==e.getAttribute("src").indexOf("data:")||Jl(t)(e))},y=function(){var e,n,o;return g||(e=d,n=I,o={},g={findAll:function(t,r){var a;r||(r=i(!0)),a=K(JC(t),function(t){var n=t.src;return!!de.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===de.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&r(t):0===n.indexOf("data:")&&r(t))});var s=Y(a,function(e){if(o[e.src])return new Ce(function(t){o[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var t=new Ce(function(t,i){zC(n,e,t,i)}).then(function(e){return delete o[e.image.src],e}).catch(function(t){return delete o[e.src],t});return o[e.src]=t});return Ce.all(s)}}),g.findAll(t.getBody(),v).then(h(function(e){return e=K(e,function(e){return"string"!=typeof e||(EC.displayError(t,e),!1)}),M(e,function(e){m(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},x=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var i=d.getResultUri(n);if(i)return'src="'+i+'"';var o=I.getByUri(n);return o||(o=z(t.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':e})};return t.on("setContent",function(){Pl(t)?B():y()}),t.on("RawSaveContent",function(e){e.content=x(e.content)}),t.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=x(e.content))}),t.on("PostRender",function(){t.parser.addNodeFilter("img",function(e){M(e,function(e){var t=e.attr("src");if(!I.getByUri(t)){var n=d.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:I,addFilter:function(e){C.push(e)},uploadImages:b,uploadImagesAuto:B,scanForImages:y,destroy:function(){I.destroy(),d.destroy(),g=s=null}}}(t),t.schema=rr(I),t.dom=mr(C,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:I.force_hex_style_colors,class_filter:I.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:I.content_editable,schema:t.schema,contentCssCors:ic(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((s=qA((a=t).settings,a.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,i,o,r=e.length,s=a.dom;r--;)if(i=(n=e[r]).attr(t),!n.attributes.map[o="data-mce-"+t]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===t?((i=s.serializeStyle(s.parseStyle(i),n.name)).length||(i=null),n.attr(o,i),n.attr(t,i)):"tabindex"===t?(n.attr(o,i),n.attr(t,null)):n.attr(o,a.convertURL(i,t,n.name))}}),s.addNodeFilter("script",function(e){for(var t,n,i=e.length;i--;)0!==(n=(t=e[i]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),s.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=a.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(i)&&0===t.getAll("br").length&&(t.append(new LA("br",1)).shortEnded=!0)}),s),t.serializer=rf(I,t),t.selection=Df(t.dom,t.getWin(),t.serializer,t),t.annotator=Xl(t),t.formatter=NA(t),t.undoManager=zh(t),t._nodeChangeDispatcher=new ah(t),t._selectionOverrides=kh(t),function(e){var t,n;(t=e).on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}),(n=e).parser.addNodeFilter("details",function(e){M(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),n.serializer.addNodeFilter("details",function(e){M(e,function(e){var t=e.attr("data-mce-open");e.attr("open",k(t)?t:null),e.attr("data-mce-open",null)})})}(t),function(e){e.on("click",function(t){3<=t.detail&&function(e){var t=e.selection.getRng(),n=us.fromRangeStart(t),i=us.fromRangeEnd(t);if(us.isElementPosition(n)){var o=n.container();cp(o)&&Vg.firstPositionIn(o).each(function(e){return t.setStart(e.container(),e.offset())})}us.isElementPosition(i)&&(o=n.container(),cp(o)&&Vg.lastPositionIn(o).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Hl(t))}(e)})}(t),lp(t),th(t),t.fire("PreInit"),I.browser_spellcheck||I.gecko_spellcheck||(C.body.spellcheck=!1,up.setAttrib(o,"spellcheck","false")),t.quirks=function(t){var n,i,o,r=Pt.each,a=Sh.BACKSPACE,s=Sh.DELETE,g=t.dom,l=t.selection,c=t.settings,u=t.parser,I=de.gecko,d=de.webkit,C="data:text/mce-internal,",h=de.ie?"Text":"URL",A=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(i){}},f=function(e){return e.isDefaultPrevented()},m=function(){t.shortcuts.add("meta+a",null,"SelectAll")},p=function(){t.on("keydown",function(e){if(!f(e)&&e.keyCode===a&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},b=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",function(e){var n;if("HTML"===e.target.nodeName){if(11<de.ie)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}}))};return t.on("keydown",function(e){var n,i,o,r,a;if(!f(e)&&e.keyCode===Sh.BACKSPACE&&(i=(n=l.getRng()).startContainer,o=n.startOffset,r=g.getRoot(),a=i,n.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(t.formatter.toggle("blockquote",null,a),(n=g.createRng()).setStart(i,0),n.setEnd(i,0),l.setRng(n))}}),n=function(e){var t=g.create("body"),n=e.cloneContents();return t.appendChild(n),l.serializer.serialize(t,{format:"html"})},t.on("keydown",function(e){var i,o,r,l,c,u=e.keyCode;if(!f(e)&&(u===s||u===a)){if(i=t.selection.isCollapsed(),o=t.getBody(),i&&!g.isEmpty(o))return;if(!i&&(r=t.selection.getRng(),l=n(r),(c=g.createRng()).selectNode(t.getBody()),l!==n(c)))return;e.preventDefault(),t.setContent(""),o.firstChild&&g.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}}),de.windowsPhone||t.on("keyup focusin mouseup",function(e){Sh.modifierPressed(e)||l.normalize()},!0),d&&(t.settings.content_editable||g.bind(t.getDoc(),"mousedown mouseup",function(e){var n;if(e.target===t.getDoc().documentElement)if(n=l.getRng(),t.getBody().focus(),"mousedown"===e.type){if(Aa(n.startContainer))return;l.placeCaretAt(e.clientX,e.clientY)}else l.setRng(n)}),t.on("click",function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==g.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&g.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),l.select(n))}),c.forced_root_block&&t.on("init",function(){A("DefaultParagraphSeparator",c.forced_root_block)}),t.on("init",function(){t.dom.bind(t.getBody(),"submit",function(e){e.preventDefault()})}),p(),u.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),de.iOS?(t.inline||t.on("keydown",function(){e.document.activeElement===e.document.body&&t.getWin().focus()}),b(),t.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):m()),11<=de.ie&&(b(),p()),de.ie&&(m(),A("AutoUrlDetect",!1),t.on("dragstart",function(e){var n,i,o;(n=e).dataTransfer&&(t.selection.isCollapsed()&&"IMG"===n.target.tagName&&l.select(n.target),0<(i=t.selection.getContent()).length&&(o=C+escape(t.id)+","+escape(i),n.dataTransfer.setData(h,o)))}),t.on("drop",function(e){if(!f(e)){var n=(r=e).dataTransfer&&(a=r.dataTransfer.getData(h))&&0<=a.indexOf(C)?(a=a.substr(C.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null;if(n&&n.id!==t.id){e.preventDefault();var i=hf(e.x,e.y,t.getDoc());l.setRng(i),o=n.html,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:o,internal:!0}):t.execCommand("mceInsertContent",!1,o)}}var o,r,a})),I&&(t.on("keydown",function(e){if(!f(e)&&e.keyCode===a){if(!t.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var n=l.getNode(),i=n.previousSibling;if("HR"===n.nodeName)return g.remove(n),void e.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(g.remove(i),e.preventDefault())}}}),e.Range.prototype.getClientRects||t.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),me.setEditorTimeout(t,function(){n.focus()})}}),i=function(){var e=g.getAttribs(l.getStart().cloneNode(!1));return function(){var n=l.getStart();n!==t.getBody()&&(g.setAttrib(n,"style",null),r(e,function(e){n.setAttributeNode(e.cloneNode(!0))}))}},o=function(){return!l.isCollapsed()&&g.getParent(l.getStart(),g.isBlock)!==g.getParent(l.getEnd(),g.isBlock)},t.on("keypress",function(e){var n;if(!f(e)&&(8===e.keyCode||46===e.keyCode)&&o())return n=i(),t.getDoc().execCommand("delete",!1,null),n(),e.preventDefault(),!1}),g.bind(t.getDoc(),"cut",function(e){var n;!f(e)&&o()&&(n=i(),me.setEditorTimeout(t,function(){n()}))}),c.readonly||t.on("BeforeExecCommand MouseDown",function(){A("StyleWithCSS",!1),A("enableInlineTableEditing",!1),c.object_resizing||A("enableObjectResizing",!1)}),t.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(g.select("a"),function(e){var t=e.parentNode,n=g.getRoot();if(t.lastChild===e){for(;t&&!g.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}g.add(t,"br",{"data-mce-bogus":1})}})}),t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),de.mac&&t.on("keydown",function(e){!Sh.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}),p()),{refreshContentEditable:function(){},isHidden:function(){var e;return!I||t.removed?0:!(e=t.selection.getSel())||!e.rangeCount||0===e.rangeCount}}}(t),t.fire("PostRender"),I.directionality&&(o.dir=I.directionality),I.nowrap&&(o.style.whiteSpace="nowrap"),I.protect&&t.on("BeforeSetContent",function(e){Pt.each(I.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(r="",Pt.each(t.contentStyles,function(e){r+=e+"\r\n"}),t.dom.addStyle(r)),(g=t,g.inline?up.styleSheetLoader:g.dom.styleSheetLoader).loadAll(t.contentCSS,function(e){Ip(t)},function(e){Ip(t)}),I.content_style&&(l=I.content_style,c=ai.fromDom(t.getDoc().head),u=ai.fromTag("style"),bi(u,"type","text/css"),Xr(u,ai.fromText(l)),Xr(c,u))},Cp=mr.DOM,hp=mr.DOM,Ap=function(e,t,n){var i=HC.get(n),o=HC.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Pt.trim(n),i&&-1===Pt.inArray(t,n)){if(Pt.each(HC.dependencies(n),function(n){Ap(e,t,n)}),e.plugins[n])return;try{var r=new i(e,o,e.$);(e.plugins[n]=r).init&&(r.init(e,o),t.push(n))}catch(Db){EC.pluginInitError(e,n,Db)}}},fp=function(e){return e.replace(/^\-/,"")},mp=function(e){return{editorContainer:e,iframeContainer:e}},pp=function(t){var n,i,o,r,a,s,g=t.settings,l=t.getElement();return t.rtl=g.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(g.language),g.aria_label=g.aria_label||hp.getAttrib(l,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),r=(i=t).settings.theme,k(r)?(i.settings.theme=fp(r),o=OC.get(r),i.theme=new o(i,OC.urls[r]),i.theme.init&&i.theme.init(i,OC.urls[r]||i.documentBaseUrl.replace(/\/$/,""),i.$)):i.theme={},s=[],Pt.each((a=t).settings.plugins.split(/[ ,]/),function(e){Ap(a,s,fp(e))}),n=function(e){var t,n,i,o,r,a,s,g,l,c,u,I=e.settings,d=e.getElement();return e.orgDisplay=d.style.display,k(I.theme)?(c=(o=e).settings,u=o.getElement(),r=c.width||hp.getStyle(u,"width")||"100%",a=c.height||hp.getStyle(u,"height")||u.offsetHeight,s=c.min_height||100,(g=/^[0-9\.]+(|px)$/i).test(""+r)&&(r=Math.max(parseInt(r,10),100)),g.test(""+a)&&(a=Math.max(parseInt(a,10),s)),l=o.theme.renderUI({targetNode:u,width:r,height:a,deltaWidth:c.delta_width,deltaHeight:c.delta_height}),c.content_editable||(a=(l.iframeHeight||a)+("number"==typeof a?l.deltaHeight||0:""))<s&&(a=s),l.height=a,l):W(I.theme)?(i=(t=e).getElement(),(n=t.settings.theme(t,i)).editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:i.offsetHeight,n):function(e){var t,n,i=e.getElement();return e.inline?mp(null):(t=i,n=hp.create("div"),hp.insertAfter(n,t),mp(n))}(e)}(t),t.editorContainer=n.editorContainer?n.editorContainer:null,g.content_css&&Pt.each(Pt.explode(g.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),g.content_editable?dp(t):function(t,n){var i=function(t,n){var i,o,r,a,s,g,l,c=t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),u=(i=t.id,o=c,r=n.height,a=function(e){return e.getParam("iframe_attrs",{})}(t),l=ai.fromTag("iframe"),Bi(l,a),Bi(l,{id:i+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),function(t,n){var i=l.dom();Ai(n,function(t,n){!function(t,n,i){if(!k(i))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",i,":: Element ",t),new Error("CSS value must be a string: "+i);mi(t)&&t.style.setProperty(n,i)}(i,n,t)})}(0,{width:"100%",height:(s=r,g="number"==typeof s?s+"px":s,g||""),display:"block"}),l).dom();u.onload=function(){u.onload=null,t.fire("load")};var I,d,C,h,A=function(t,n){if(e.document.domain!==e.window.location.hostname&&de.ie&&de.ie<12){var i=jC.uuid("mce");return t[i]=function(){dp(t)},Cp.setAttrib(n,"src",'javascript:(function(){document.open();document.domain="'+e.document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()"),!0}return!1}(t,u);return t.contentAreaContainer=n.iframeContainer,t.iframeElement=u,t.iframeHTML=(h=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(I=t)+"<html><head>",I.getParam("document_base_url","")!==I.documentBaseUrl&&(h+='<base href="'+I.documentBaseURI.getURI()+'" />'),h+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',d=Ml(I,"body_id","tinymce"),C=Ml(I,"body_class",""),_l(I)&&(h+='<meta http-equiv="Content-Security-Policy" content="'+_l(I)+'" />'),h+='</head><body id="'+d+'" class="mce-content-body '+C+'" data-id="'+I.id+'"><br></body></html>'),Cp.add(n.iframeContainer,u),A}(t,n);n.editorContainer&&(Cp.get(n.editorContainer).style.display=t.orgDisplay,t.hidden=Cp.isHidden(n.editorContainer)),t.getElement().style.display="none",Cp.setAttrib(t.id,"aria-hidden","true"),i||dp(t)}(t,n)},bp=mr.DOM,Bp=function(e){return"-"===e.charAt(0)},vp=Pt.each,yp=Pt.trim,xp="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Fp={ftp:21,http:80,https:443,mailto:25},Gp=function(t,n){var i,o,r=this;if(t=yp(t),i=(n=r.settings=n||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))r.source=t;else{var a=0===t.indexOf("//");0!==t.indexOf("/")||a||(t=(i&&i.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(o=n.base_uri?n.base_uri.path:new Gp(e.document.location.href).directory,""==n.base_uri.protocol?t="//mce_host"+r.toAbsPath(o,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(i&&i.protocol||"http")+"://mce_host"+r.toAbsPath(o,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),vp(xp,function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),r[e]=i}),i&&(r.protocol||(r.protocol=i.protocol),r.userInfo||(r.userInfo=i.userInfo),r.port||"mce_host"!==r.host||(r.port=i.port),r.host&&"mce_host"!==r.host||(r.host=i.host),r.source=""),a&&(r.protocol="")}};Gp.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new Gp(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),i=e.getURI();return n===i||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===i?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new Gp(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=Fp[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;i<o;i++)if(i>=n.length||e[i]!==n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;i<o;i++)if(i>=e.length||e[i]!==n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);i<o;i++)a+="../";for(i=r-1,o=n.length;i<o;i++)a+=i!==r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var n,i,o,r=0,a=[];for(i=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),vp(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<r?r--:a.push(t[n]):r++);return 0!==(o=(n=e.length-r)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},Gp.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},Gp.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var Qp=function(e,t){t(e),e.firstChild&&Qp(e.firstChild,t),e.next&&Qp(e.next,t)},wp=function(e){return e instanceof LA},Sp=function(e,t){var n;e.dom.setHTML(e.getBody(),t),BC(n=e)&&Vg.firstPositionIn(n.getBody()).each(function(e){var t=e.getNode(),i=Ro.isTable(t)?Vg.firstPositionIn(t).getOr(e):e;n.selection.setRng(i.toRange())})},Xp=mr.DOM,Zp=function(e){return Z.from(e).each(function(e){return e.destroy()})},Np=mr.DOM,kp=Pt.extend,Rp=Pt.each,Dp=Pt.resolve,Up=de.ie,Tp=function(e,t,n){var i,o,r=this,a=r.documentBaseUrl=n.documentBaseURL,s=n.baseURI;o={id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(i=r).convertURL,url_converter_scope:i,ie7_compat:!0},t=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d,C=function(e,t){var n,i,o,r=(n=function(t,n){return L(e,n)},i={},o={},Ai(t,function(e,t){(n(0,t)?i:o)[t]=e}),{t:i,f:o});return iC(r.t,r.f)}(["mobile"],i),h=Pt.extend(t,n,C.settings(),(u=e,d=(I=C).settings().inline,u&&gC(I,"mobile")&&!d?(s="mobile",g=aC,c=(l=C.sections()).hasOwnProperty(s)?l[s]:{},Pt.extend({},g,c)):{}),{validate:!0,content_editable:C.settings().inline,external_plugins:(o=n,r=C.settings(),a=r.external_plugins?r.external_plugins:{},o&&o.external_plugins?Pt.extend({},o.external_plugins,a):a)});return lC(e,C,n,h)}(oC,o,n.defaultSettings,t),r.settings=t,Gr.language=t.language||"en",Gr.languageLoad=t.language_load,Gr.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new Gp(t.document_base_url,{base_uri:s}),r.baseURI=s,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new hC(r),r.loadedCSS={},r.editorCommands=new Vd(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(de.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(de.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=An.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};kp(Tp.prototype={render:function(){!function(t){var n,i,o,r=t.settings,a=t.id,s=function(){bp.unbind(e.window,"ready",s),t.render()};if(Qe.Event.domLoaded){if(t.getElement()&&de.contentEditable){r.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var g=t.getElement().form||bp.getParent(a,"form");g&&(t.formElement=g,r.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(bp.insertAfter(bp.create("input",{type:"hidden",name:a}),a),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},bp.bind(g,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!r.submit_patch||g.submit.nodeType||g.submit.length||g._mceOldSubmit||(g._mceOldSubmit=g.submit,g.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),g._mceOldSubmit(g)})),t.windowManager=ZC(t),t.notificationManager=XC(t),"xml"===r.encoding&&t.on("GetContent",function(e){e.save&&(e.content=bp.encode(e.content))}),r.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),r.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),function(e,t,n,i){var o=t.settings,r=o.theme;if(k(r)){if(!Bp(r)&&!OC.urls.hasOwnProperty(r)){var a=o.theme_url;OC.load(r,a?t.documentBaseURI.toAbsolute(a):"themes/"+r+"/theme"+n+".js")}e.loadQueue(function(){OC.waitFor(r,i)})}else i()}(o=yr.ScriptLoader,n=t,i=t.suffix,function(){var e,t,r,a,s;e=o,(r=(t=n).settings).language&&"en"!==r.language&&!r.language_url&&(r.language_url=t.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&!t.editorManager.i18n.data[r.language]&&e.add(r.language_url),s=i,Pt.isArray((a=n.settings).plugins)&&(a.plugins=a.plugins.join(" ")),Pt.each(a.external_plugins,function(e,t){HC.load(t,e),a.plugins+=" "+t}),Pt.each(a.plugins.split(/[ ,]/),function(e){if((e=Pt.trim(e))&&!HC.urls[e])if(Bp(e)){e=e.substr(1,e.length);var t=HC.dependencies(e);Pt.each(t,function(e){e=HC.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"},e),HC.load(e.resource,e)})}else HC.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"})}),o.loadQueue(function(){n.removed||pp(n)},n,function(e){EC.pluginLoadError(n,e[0]),n.removed||pp(n)})})}}else bp.bind(e.window,"ready",s)}(this)},focus:function(e){!function(e,t){e.removed||(t?bC(e):function(e){var t=e.selection,n=e.settings.content_editable,i=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable();var r,a,s=(r=e,a=t.getNode(),r.dom.getParent(a,function(e){return"true"===r.dom.getContentEditable(e)}));if(e.$.contains(i,s))return mC(s),fC(e,o),bC(e);void 0!==e.bookmark&&!1===pC(e)&&Ud(e).each(function(t){e.selection.setRng(t),o=t}),n||(de.opera||mC(i),e.getWin().focus()),(de.gecko||n)&&(mC(i),fC(e,o)),bC(e)}(e))}(this,e)},hasFocus:function(){return BC(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=this.settings[e];if(o)return this.callbackLookup&&(i=this.callbackLookup[e])&&(o=i.func,i=i.scope),"string"==typeof o&&(i=(i=o.replace(/\.\w+$/,""))?Dp(i):0,o=Dp(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:i}),o.apply(i||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Pt.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,i){var o,r,a,s=t in e.settings?e.settings[t]:n;return"hash"===i?(a={},"string"==typeof(r=s)?M(0<r.indexOf("=")?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){var t=e.split("=");a[Pt.trim(t[0])]=Pt.trim(1<t.length?t[1]:t)}):a=r,a):"string"===i?cC(k,e,t).getOr(n):"number"===i?cC(E,e,t).getOr(n):"boolean"===i?cC(T,e,t).getOr(n):"object"===i?cC(R,e,t).getOr(n):"array"===i?cC(D,e,t).getOr(n):"string[]"===i?cC((o=k,function(e){return D(e)&&ee(e,o)}),e,t).getOr(n):"function"===i?cC(W,e,t).getOr(n):s}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var i=e.sidebars?e.sidebars:[];i.push({name:t,settings:n}),e.sidebars=i}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,i=this;i.contextToolbars=i.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return i.dom.is(e,n)}),i.contextToolbars.push({id:jC.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(Np.show(this.getContainer()),Np.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(Up&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Np.hide(e.getContainer()),Np.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,i=this,o=i.getElement();if(o&&i.initialized&&!i.removed)return(e=e||{}).save=!0,e.element=o,e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),"raw"===e.format&&i.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&i.inline||(o.innerHTML=t),(n=Np.getParent(i.id,"form"))&&Rp(n.elements,function(e){if(e.name===i.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&i.setDirty(!1),t},setContent:function(e,t){return n=this,o=e,void 0===(r=t)&&(r={}),r.format=r.format?r.format:"html",r.set=!0,r.content=wp(o)?"":o,wp(o)||r.no_events||(n.fire("BeforeSetContent",r),o=r.content),Z.from(n.getBody()).fold(i(o),function(e){return wp(o)?function(e,t,n,i){!function(e,t,n){var i=function(e,t,n){var i={},o={},r=[];for(var a in n.firstChild&&Qp(n.firstChild,function(n){M(e,function(e){e.name===n.name&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})}),M(t,function(e){"string"==typeof n.attr(e.name)&&(o[e.name]?o[e.name].nodes.push(n):o[e.name]={filter:e,nodes:[n]})})}),i)i.hasOwnProperty(a)&&r.push(i[a]);for(var a in o)o.hasOwnProperty(a)&&r.push(o[a]);return r}(e,t,n);M(i,function(e){M(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=El({validate:e.validate},e.schema).serialize(n);return i.content=vo(ai.fromDom(t))?o:Pt.trim(o),Sp(e,i.content),i.no_events||e.fire("SetContent",i),n}(n,e,o,r):(t=n,i=e,s=r,0===(a=o).length||/^\s+$/.test(a)?(l='<br data-mce-bogus="1">',"TABLE"===i.nodeName?a="<tr><td>"+l+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(a="<li>"+l+"</li>"),(g=Kl(t))&&t.schema.isValidChild(i.nodeName.toLowerCase(),g.toLowerCase())?a=t.dom.createHTML(g,t.settings.forced_root_block_attrs,a=l):a||(a='<br data-mce-bogus="1">'),Sp(t,a),t.fire("SetContent",s)):("raw"!==s.format&&(a=El({validate:t.validate},t.schema).serialize(t.parser.parse(a,{isRootContent:!0,insert:!0}))),s.content=vo(ai.fromDom(i))?a:Pt.trim(a),Sp(t,s.content),s.no_events||t.fire("SetContent",s)),s.content);var t,i,a,s,g,l});var n,o,r},getContent:function(e){return void 0===(n=e)&&(n={}),Z.from((t=this).getBody()).fold(i("tree"===n.format?new LA("body",11):""),function(e){return function(e,t,n){var i,o,r,a,s;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)i=Pt.trim(Eh(e.serializer,n.innerHTML));else if("text"===t.format)i=ua(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=(o=e).serializer.serialize(n,t),a=Kl(o),s=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+a+">[\r\n]*|<br \\/>[\r\n]*)$"),i=r.replace(s,"")}return t.content="text"===t.format||vo(ai.fromDom(n))?i:Pt.trim(i),t.no_events||e.fire("GetContent",t),t.content}(t,n,e)});var t,n},insertContent:function(e,t){t&&(e=kp({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){var t,n;(n=e)!==function(e){return e.readonly?"readonly":"design"}(t=this)&&(t.initialized?Pd(t,"readonly"===n):t.on("init",function(){Pd(t,"readonly"===n)}),function(e,t){e.fire("SwitchMode",{mode:n})}(t))},getContainer:function(){return this.container||(this.container=Np.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=Np.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var i=this.settings;return i.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,i=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=i.visual),Rp(o.select("table,a",e),function(e){var r;switch(e.nodeName){case"TABLE":return t=i.visual_table_class||"mce-item-table",void((r=o.getAttrib(e,"border"))&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=i.visual_anchor_class||"mce-item-anchor",r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,i=e.getBody(),o=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Xp.remove(o.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&i&&Xp.setStyle((r=e).id,"display",r.orgDisplay),function(e){e.fire("detach")}(e),Xp.remove(e.getContainer()),Zp(t),Zp(n),e.destroy()}var r}(this)},destroy:function(e){!function(e,t){var n,i,o,r=e.selection,a=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Zp(r),Zp(a)),(i=(n=e).formElement)&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,i._mceOldSubmit=null),Xp.unbind(i,"submit reset",n.formEventDelegate)),(o=e).contentAreaContainer=o.formElement=o.container=o.editorContainer=null,o.bodyElement=o.contentDocument=o.contentWindow=null,o.iframeElement=o.targetElm=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},nC);var Wp,Ep,Hp,Op={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},Lp=mr.DOM,Vp=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==Lp.getParent(t,function(t){return function(e){return Op.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)})},Yp=function(t,n){var i=n.editor;(function(t){var n,i,o,r=Dr(function(){Rd(t)},0);t.inline&&(n=t,i=r,mr.DOM.bind(e.document,"mouseup",o=function(){i.throttle()}),n.on("remove",function(){mr.DOM.unbind(e.document,"mouseup",o)})),t.on("init",function(){!function(e,t){var n,i;oi.detect().browser.isIE()?(i=e).on("focusout",function(){Rd(i)}):(n=t,e.on("mouseup touchend",function(e){n.throttle()})),e.on("keyup nodechange",function(t){var n;"nodechange"===(n=t).type&&n.selectionChange||Rd(e)})}(t,r)}),t.on("remove",function(){r.cancel()})})(i),i.on("focusin",function(){var e=t.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),t.setActive(this),(t.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))}),i.on("focusout",function(){var n=this;me.setEditorTimeout(n,function(){var i=t.focusedEditor;Vp(n,function(){try{return e.document.activeElement}catch(i){return e.document.body}}())||i!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Wp||Lp.bind(e.document,"focusin",Wp=function(n){var i,o=t.activeEditor;i=n.target,o&&i.ownerDocument===e.document&&(i===e.document.body||Vp(o,i)||t.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),t.focusedEditor=null))})},Mp=function(t,n){t.focusedEditor===n.editor&&(t.focusedEditor=null),t.activeEditor||(Lp.unbind(e.document,"focusin",Wp),Wp=null)},_p=mr.DOM,Kp=Pt.explode,zp=Pt.each,Jp=Pt.extend,Pp=0,jp=!1,$p=[],qp=[],eb=function(e){var t=e.type;zp(Hp.get(),function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}})},tb=function(e){e!==jp&&(e?An(window).on("resize scroll",eb):An(window).off("resize scroll",eb),jp=e)},nb=function(e){var t=qp;delete $p[e.id];for(var n=0;n<$p.length;n++)if($p[n]===e){$p.splice(n,1);break}return qp=K(qp,function(t){return e!==t}),Hp.activeEditor===e&&(Hp.activeEditor=0<qp.length?qp[0]:null),Hp.focusedEditor===e&&(Hp.focusedEditor=null),t.length!==qp.length};Jp(Hp={defaultSettings:{},$:An,majorVersion:"4",minorVersion:"9.6",releaseDate:"2019-09-02",editors:$p,i18n:RC,activeEditor:null,settings:{},setup:function(){var t,n,i,o,a="";if(n=Gp.getDocumentBaseUrl(e.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),i=window.tinymce||window.tinyMCEPreInit)t=i.base||i.baseURL,a=i.suffix;else{for(var s=e.document.getElementsByTagName("script"),g=0;g<s.length;g++){var l=(o=s[g].src).substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==l.indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}!t&&e.document.currentScript&&(-1!==(o=e.document.currentScript.src).indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new Gp(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new Gp(this.baseURL),this.suffix=a,function(e){e.on("AddEditor",r(Yp,e)),e.on("RemoveEditor",r(Mp,e))}(this)},overrideDefaults:function(e){var t;(t=e.base_url)&&(this.baseURL=new Gp(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Gp(this.baseURL)),e.suffix&&(this.suffix=e.suffix);var n=(this.defaultSettings=e).plugin_base_urls;for(var i in n)Gr.PluginManager.urls[i]=n[i]},init:function(t){var n,i,o=this;i=Pt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var r=function(e){var t=e.id;return t||(t=(t=e.name)&&!_p.get(t)?e.name:_p.uniqueId(),e.setAttribute("id",t)),t},a=function(e,t){return t.constructor===RegExp?t.test(e.className):_p.hasClass(e,t)},s=function(e){n=e},g=function(){var n,l=0,c=[],u=function(e,t,i){var r=new Tp(e,t,o);c.push(r),r.on("init",function(){++l===n.length&&s(c)}),r.targetElm=r.targetElm||i,r.render()};_p.unbind(window,"ready",g),function(e){var n=t.onpageload;n&&n.apply(o,Array.prototype.slice.call(arguments,2))}("onpageload"),n=An.unique(function(t){var n,i=[];if(de.ie&&de.ie<11)return EC.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return zp(t.types,function(e){i=i.concat(_p.select(e.selector))}),i;if(t.selector)return _p.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(n=t.elements||"").length&&zp(Kp(n),function(t){var n;(n=_p.get(t))?i.push(n):zp(e.document.forms,function(e){zp(e.elements,function(e){e.name===t&&(t="mce_editor_"+Pp++,_p.setAttrib(e,"id",t),i.push(e))})})});break;case"textareas":case"specific_textareas":zp(_p.select("textarea"),function(e){t.editor_deselector&&a(e,t.editor_deselector)||t.editor_selector&&!a(e,t.editor_selector)||i.push(e)})}return i}(t)),t.types?zp(t.types,function(e){Pt.each(n,function(n){return!_p.is(n,e.selector)||(u(r(n),Jp({},t,e),n),!1)})}):(Pt.each(n,function(e){var t;(t=o.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(nb(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(n=Pt.grep(n,function(e){return!o.get(e.id)})).length?s([]):zp(n,function(e){t.inline&&e.tagName.toLowerCase()in i?EC.initError("Could not initialize inline editor on invalid inline target element",e):u(r(e),t,e)}))};return o.settings=t,_p.bind(window,"ready",g),new Ce(function(e){n?e(n):s=function(t){e(t)}})},get:function(e){return 0===arguments.length?qp.slice(0):k(e)?J(qp,function(t){return t.id===e}).getOr(null):E(e)&&qp[e]?qp[e]:null},add:function(e){var t=this;return $p[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&($p[e.id]=e),$p.push(e),qp.push(e)),tb(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),Ep||(Ep=function(){t.fire("BeforeUnload")},_p.bind(window,"beforeunload",Ep))),e},createEditor:function(e,t){return this.add(new Tp(e,t,this))},remove:function(e){var t,n,i=this;if(e){if(!k(e))return U(i.get((n=e).id))?null:(nb(n)&&i.fire("RemoveEditor",{editor:n}),0===qp.length&&_p.unbind(window,"beforeunload",Ep),n.remove(),tb(0<qp.length),n);zp(_p.select(e),function(e){(n=i.get(e.id))&&i.remove(n)})}else for(t=qp.length-1;0<=t;t--)i.remove(qp[t])},execCommand:function(e,t,n){var i=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new Tp(n,this.settings,this).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?i.isHidden()?i.show():i.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){zp(qp,function(e){e.save()})},addI18n:function(e,t){RC.add(e,t)},translate:function(e){return RC.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},zd),Hp.setup();var ib,ob=Hp;function rb(e){return{walk:function(t,n){return Fl(e,t,n)},split:QI,normalize:function(t){return ud(e,t).fold(i(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}(ib=rb||(rb={})).compareRanges=od,ib.getCaretRangeFromPoint=hf,ib.getSelectedNode=Oa,ib.getNode=La;var ab,sb,gb=rb,lb=Math.min,cb=Math.max,ub=Math.round,Ib=function(e,t,n){var i,o,r,a,s,g;return i=t.x,o=t.y,r=e.w,a=e.h,s=t.w,g=t.h,"b"===(n=(n||"").split(""))[0]&&(o+=g),"r"===n[1]&&(i+=s),"c"===n[0]&&(o+=ub(g/2)),"c"===n[1]&&(i+=ub(s/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(i-=r),"c"===n[3]&&(o-=ub(a/2)),"c"===n[4]&&(i-=ub(r/2)),db(i,o,r,a)},db=function(e,t,n,i){return{x:e,y:t,w:n,h:i}},Cb={inflate:function(e,t,n){return db(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Ib,findBestRelativePosition:function(e,t,n,i){var o,r;for(r=0;r<i.length;r++)if((o=Ib(e,t,i[r])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return i[r];return null},intersect:function(e,t){var n,i,o,r;return n=cb(e.x,t.x),i=cb(e.y,t.y),o=lb(e.x+e.w,t.x+t.w),r=lb(e.y+e.h,t.y+t.h),o-n<0||r-i<0?null:db(n,i,o-n,r-i)},clamp:function(e,t,n){var i,o,r,a,s,g,l,c,u,I;return g=e.y,l=e.x+e.w,c=e.y+e.h,u=t.x+t.w,I=t.y+t.h,i=cb(0,t.x-(s=e.x)),o=cb(0,t.y-g),r=cb(0,l-u),a=cb(0,c-I),s+=i,g+=o,n&&(l+=i,c+=o,s-=r,g-=a),db(s,g,(l-=r)-s,(c-=a)-g)},create:db,fromClientRect:function(e){return db(e.left,e.top,e.width,e.height)}},hb={},Ab={add:function(e,t){hb[e.toLowerCase()]=t},has:function(e){return!!hb[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=hb.hasOwnProperty(t)?hb[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=hb[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},fb=Pt.each,mb=Pt.extend,pb=function(){};pb.extend=ab=function(e){var t,n,i,o=this.prototype,r=function(){var e,t,n;if(!sb&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},s=function(e,t){return function(){var n,i=this._super;return this._super=o[e],n=t.apply(this,arguments),this._super=i,n}};for(n in sb=!0,t=new this,sb=!1,e.Mixins&&(fb(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&fb(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&fb(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&fb(e.Statics,function(e,t){r[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=mb({},o.Defaults,e.Defaults)),e)t[n]="function"==typeof(i=e[n])&&o[n]?s(n,i):i;return r.prototype=t,(r.constructor=r).extend=ab,r};var bb=Math.min,Bb=Math.max,vb=Math.round,yb=function(e,t){var n,i,o,r;if(t=t||'"',null===e)return"null";if("string"==(o=typeof e))return i="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,o){return'"'===t&&"'"===e?e:(n=i.indexOf(o))+1?"\\"+i.charAt(n+1):(e=o.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===o){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,i="[";n<e.length;n++)i+=(0<n?",":"")+yb(e[n],t);return i+"]"}for(r in i="{",e)e.hasOwnProperty(r)&&(i+="function"!=typeof e[r]?(1<i.length?","+t:t)+r+t+":"+yb(e[r],t):"");return i+"}"}return""+e},xb={serialize:yb,parse:function(e){try{return JSON.parse(e)}catch(s){}}},Fb={callbacks:{},count:0,send:function(e){var t=this,n=mr.DOM,i=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+i;t.callbacks[i]=function(r){n.remove(o),delete t.callbacks[i],e.callback(r)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},Gb={send:function(e){var t,n=0,i=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",Gb.fire("beforeInitialize",{settings:e}),t=LC()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Pt.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Gb.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return i();setTimeout(i,10)}}};Pt.extend(Gb,zd);var Qb,wb,Sb,Xb,Zb=Pt.extend,Nb=function(e){this.settings=Zb({},e),this.count=0};Nb.sendRPC=function(e){return(new Nb).send(e)},Nb.prototype={send:function(e){var t=e.error,n=e.success;(e=Zb(this.settings,e)).success=function(i,o){void 0===(i=xb.parse(i))&&(i={error:"JSON Parse error."}),i.error?t.call(e.error_scope||e.scope,i.error,o):n.call(e.success_scope||e.scope,i.result)},e.error=function(n,i){t&&t.call(e.error_scope||e.scope,n,i)},e.data=xb.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",Gb.send(e)}};try{Qb=e.window.localStorage}catch(Db){wb={},Sb=[],Xb={getItem:function(e){return wb[e]||null},setItem:function(e,t){Sb.push(e),wb[e]=String(t)},key:function(e){return Sb[e]},removeItem:function(e){Sb=Sb.filter(function(t){return t===e}),delete wb[e]},clear:function(){Sb=[],wb={}},length:0},Object.defineProperty(Xb,"length",{get:function(){return Sb.length},configurable:!1,enumerable:!1}),Qb=Xb}var kb,Rb=Pt.extend(ob,{geom:{Rect:Cb},util:{Promise:Ce,Delay:me,Tools:Pt,VK:Sh,URI:Gp,Class:pb,EventDispatcher:Md,Observable:zd,I18n:RC,XHR:Gb,JSON:xb,JSONRequest:Nb,JSONP:Fb,LocalStorage:Qb,Color:function(e){var t={},n=0,i=0,o=0,r=function(e){var r;return"object"==typeof e?"r"in e?(n=e.r,i=e.g,o=e.b):"v"in e&&function(e,t,r){var a,s,g,l;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,r=parseInt(r,10)/100,t=Bb(0,bb(t,1)),r=Bb(0,bb(r,1)),0!==t){switch(a=e/60,g=(s=r*t)*(1-Math.abs(a%2-1)),l=r-s,Math.floor(a)){case 0:n=s,i=g,o=0;break;case 1:n=g,i=s,o=0;break;case 2:n=0,i=s,o=g;break;case 3:n=0,i=g,o=s;break;case 4:n=g,i=0,o=s;break;case 5:n=s,i=0,o=g;break;default:n=i=o=0}n=vb(255*(n+l)),i=vb(255*(i+l)),o=vb(255*(o+l))}else n=i=o=vb(255*r)}(e.h,e.s,e.v):(r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(r[1],10),i=parseInt(r[2],10),o=parseInt(r[3],10)):(r=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(r[1],16),i=parseInt(r[2],16),o=parseInt(r[3],16)):(r=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(r[1]+r[1],16),i=parseInt(r[2]+r[2],16),o=parseInt(r[3]+r[3],16)),n=n<0?0:255<n?255:n,i=i<0?0:255<i?255:i,o=o<0?0:255<o?255:o,t};return e&&r(e),t.toRgb=function(){return{r:n,g:i,b:o}},t.toHsv=function(){return e=n,t=i,r=o,s=0,(g=bb(e/=255,bb(t/=255,r/=255)))===(l=Bb(e,Bb(t,r)))?{h:0,s:0,v:100*(s=g)}:(a=(l-g)/l,{h:vb(60*((e===g?3:r===g?1:5)-(e===g?t-r:r===g?e-t:r-e)/((s=l)-g))),s:vb(100*a),v:vb(100*s)});var e,t,r,a,s,g,l},t.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(n)+e(i)+e(o)},t.parse=r,t}},dom:{EventUtils:Qe,Sizzle:Qt,DomQuery:An,TreeWalker:ao,DOMUtils:mr,ScriptLoader:yr,RangeUtils:gb,Serializer:rf,ControlSelection:If,BookmarkManager:lf,Selection:Df,Event:Qe.Event},html:{Styles:sr,Entities:zo,Node:LA,Schema:rr,SaxParser:Th,DomParser:qA,Writer:Wl,Serializer:El},ui:{Factory:Ab},Env:de,AddOnManager:Gr,Annotator:Xl,Formatter:NA,UndoManager:zh,EditorCommands:Vd,WindowManager:ZC,NotificationManager:XC,EditorObservable:nC,Shortcuts:hC,Editor:Tp,FocusManager:Op,EditorManager:ob,DOM:mr.DOM,ScriptLoader:yr.ScriptLoader,PluginManager:Gr.PluginManager,ThemeManager:Gr.ThemeManager,trim:Pt.trim,isArray:Pt.isArray,is:Pt.is,toArray:Pt.toArray,makeMap:Pt.makeMap,each:Pt.each,map:Pt.map,grep:Pt.grep,inArray:Pt.inArray,extend:Pt.extend,create:Pt.create,walk:Pt.walk,createNS:Pt.createNS,resolve:Pt.resolve,explode:Pt.explode,_addCacheSuffix:Pt._addCacheSuffix,isOpera:de.opera,isWebKit:de.webkit,isIE:de.ie,isGecko:de.gecko,isMac:de.mac});kb=Rb,window.tinymce=kb,window.tinyMCE=kb,function(e){if("object"==typeof module)try{module.exports=e}catch(s){}}(Rb)}(window),function(){var e=function(){return this}();if(!e&&"undefined"!=typeof window&&(e=window),"undefined"==typeof requirejs){var t=function(e,n,i){"string"==typeof e?(2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n=function(e,t,n){if("string"==typeof t){var o=r(e,t);if(null!=o)return n&&n(),o}else if("[object Array]"===Object.prototype.toString.call(t)){for(var a=[],s=0,g=t.length;s<g;++s){var l=r(e,t[s]);if(null==l&&i.original)return;a.push(l)}return n&&n.apply(null,a)||!0}},i=function(e,t){var o=n("",e,t);return null==o&&i.original?i.original.apply(this,arguments):o},o=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return o(e,n[0])+"!"+o(e,n[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&i!=t;){var i=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},r=function(e,i){i=o(e,i);var r=t.modules[i];if(!r){if("function"==typeof(r=t.payloads[i])){var a={},s={id:i,uri:"",exports:a,packaged:!0},g=r(function(e,t){return n(i,e,t)},a,s);t.modules[i]=a=g||s.exports,delete t.payloads[i]}r=t.modules[i]=a||r}return r};!function(n){var o=e;o.define&&o.define.packaged||(t.original=o.define,o.define=t,o.define.packaged=!0),o.require&&o.require.packaged||(i.original=o.require,o.require=i,o.require.packaged=!0)}()}}(),define("ace/lib/regexp",["require","exports","module"],function(e,t,n){"use strict";var i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},o=void 0===i.exec.call(/()??/,"")[1],r=function(){var e=/^/g;return i.test.call(e,""),!e.lastIndex}();r&&o||(RegExp.prototype.exec=function(e){var t,n,a=i.exec.apply(this,arguments);if("string"==typeof e&&a){if(!o&&a.length>1&&function(e,t,n){if(Array.prototype.indexOf)return e.indexOf("",void 0);for(var i=0;i<e.length;i++)if(""===e[i])return i;return-1}(a)>-1&&(n=RegExp(this.source,i.replace.call(function(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}(this),"g","")),i.replace.call(e.slice(a.index),n,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var s=1;s<a.length;s++)(t=this._xregexp.captureNames[s-1])&&(a[t]=a[s]);!r&&this.global&&!a[0].length&&this.lastIndex>a.index&&this.lastIndex--}return a},r||(RegExp.prototype.test=function(e){var t=i.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function i(){}function o(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function r(e){return(e=+e)!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError("Function.prototype.bind called on incompatible "+t);var n=C.call(arguments,1),o=function(){if(this instanceof o){var i=t.apply(this,n.concat(C.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(C.call(arguments)))};return t.prototype&&(i.prototype=t.prototype,o.prototype=new i,i.prototype=null),o});var a,s,g,l,c,u=Function.prototype.call,I=Array.prototype,d=Object.prototype,C=I.slice,h=u.bind(d.toString),A=u.bind(d.hasOwnProperty);if((c=A(d,"__defineGetter__"))&&(a=u.bind(d.__defineGetter__),s=u.bind(d.__defineSetter__),g=u.bind(d.__lookupGetter__),l=u.bind(d.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,n=[];if(n.splice.apply(n,e(20)),n.splice.apply(n,e(26)),t=n.length,n.splice(5,0,"XXX"),t+1==n.length)return!0}()){var f=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?f.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(C.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):null==e?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var i=this.slice(e,e+t),o=C.call(arguments,2),r=o.length;if(e===n)r&&this.push.apply(this,o);else{var a=Math.min(t,n-e),s=e+a,g=s+r-a,l=n-s,c=n-a;if(g<s)for(var u=0;u<l;++u)this[g+u]=this[s+u];else if(g>s)for(u=l;u--;)this[g+u]=this[s+u];if(r&&e===c)this.length=c,this.push.apply(this,o);else for(this.length=c+r,u=0;u<r;++u)this[e+u]=o[u]}return i};Array.isArray||(Array.isArray=function(e){return"[object Array]"==h(e)});var m,p=Object("a"),b="a"!=p[0]||!(0 in p);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=Z(this),n=b&&"[object String]"==h(this)?this.split(""):t,i=arguments[1],o=-1,r=n.length>>>0;if("[object Function]"!=h(e))throw new TypeError;for(;++o<r;)o in n&&e.call(i,n[o],o,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=Z(this),n=b&&"[object String]"==h(this)?this.split(""):t,i=n.length>>>0,o=Array(i),r=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var a=0;a<i;a++)a in n&&(o[a]=e.call(r,n[a],a,t));return o}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=Z(this),i=b&&"[object String]"==h(this)?this.split(""):n,o=i.length>>>0,r=[],a=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var s=0;s<o;s++)s in i&&e.call(a,t=i[s],s,n)&&r.push(t);return r}),Array.prototype.every||(Array.prototype.every=function(e){var t=Z(this),n=b&&"[object String]"==h(this)?this.split(""):t,i=n.length>>>0,o=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var r=0;r<i;r++)if(r in n&&!e.call(o,n[r],r,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=Z(this),n=b&&"[object String]"==h(this)?this.split(""):t,i=n.length>>>0,o=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var r=0;r<i;r++)if(r in n&&e.call(o,n[r],r,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=Z(this),n=b&&"[object String]"==h(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,r=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in n){o=n[r++];break}if(++r>=i)throw new TypeError("reduce of empty array with no initial value")}for(;r<i;r++)r in n&&(o=e.call(void 0,o,n[r],r,t));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=Z(this),n=b&&"[object String]"==h(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,r=i-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in n){o=n[r--];break}if(--r<0)throw new TypeError("reduceRight of empty array with no initial value")}do{r in this&&(o=e.call(void 0,o,n[r],r,t))}while(r--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=b&&"[object String]"==h(this)?this.split(""):Z(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=r(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=b&&"[object String]"==h(this)?this.split(""):Z(this),n=t.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,r(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:d)}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(A(e,t)){var n;if(n={enumerable:!0,configurable:!0},c){var i=e.__proto__;e.__proto__=d;var o=g(e,t),r=l(e,t);if(e.__proto__=i,o||r)return o&&(n.get=o),r&&(n.set=r),n}return n.value=e[t],n}}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),Object.create||(m=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var n;if(null===e)n=m();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var i=function(){};i.prototype=e,(n=new i).__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}),Object.defineProperty){var B=o({}),v="undefined"==typeof document||o(document.createElement("div"));if(!B||!v)var y=Object.defineProperty}Object.defineProperty&&!y||(Object.defineProperty=function(e,t,n){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(y)try{return y.call(Object,e,t,n)}catch(u){}if(A(n,"value"))if(c&&(g(e,t)||l(e,t))){var i=e.__proto__;e.__proto__=d,delete e[t],e[t]=n.value,e.__proto__=i}else e[t]=n.value;else{if(!c)throw new TypeError("getters & setters can not be defined on this javascript engine");A(n,"get")&&a(e,t,n.get),A(n,"set")&&s(e,t,n.set)}return e}),Object.defineProperties||(Object.defineProperties=function(e,t){for(var n in t)A(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(N){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(e){return!1}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";A(e,t);)t+="?";e[t]=!0;var n=A(e,t);return delete e[t],n}),!Object.keys){var x=!0,F=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],G=F.length;for(var Q in{toString:null})x=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var n in e)A(e,n)&&t.push(n);if(x)for(var i=0,o=G;i<o;i++){var r=F[i];A(e,r)&&t.push(r)}return t}}Date.now||(Date.now=function(){return(new Date).getTime()});var w="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||w.trim()){w="["+w+"]";var S=new RegExp("^"+w+w+"*"),X=new RegExp(w+w+"*$");String.prototype.trim=function(){return String(this).replace(S,"").replace(X,"")}}var Z=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){"use strict";e("./regexp"),e("./es5-shim"),"undefined"!=typeof Element&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator){var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),o=navigator.userAgent;t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=o.match(/ Gecko\/\d+/),t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isIPad=o.indexOf("iPad")>=0,t.isAndroid=o.indexOf("Android")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIPad||t.isAndroid}}),define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("./useragent");if(t.buildDom=function e(t,n,i){if("string"==typeof t&&t){var o=document.createTextNode(t);return n&&n.appendChild(o),o}if(!Array.isArray(t))return t;if("string"!=typeof t[0]||!t[0]){for(var r=[],a=0;a<t.length;a++){var s=e(t[a],n,i);s&&r.push(s)}return r}var g=document.createElement(t[0]),l=t[1],c=1;for(l&&"object"==typeof l&&!Array.isArray(l)&&(c=2),a=c;a<t.length;a++)e(t[a],g,i);return 2==c&&Object.keys(l).forEach(function(e){var t=l[e];"class"===e?g.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e?g[e]=t:"ref"===e?i&&(i[t]=g):null!=t&&g.setAttribute(e,t)}),n&&n.appendChild(g),g},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var o=n.indexOf(t);if(-1==o)break;i=!1,n.splice(o,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(n=(t=t||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===e)return!0},t.importCssString=function(e,n,i){var o=i;i&&i.getRootNode&&(o=i.getRootNode())&&o!=i||(o=document);var r=o.ownerDocument||o;if(n&&t.hasCssString(n,o))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var a=t.createElement("style");a.appendChild(r.createTextNode(e)),n&&(a.id=n),o==r&&(o=t.getDocumentHead(r)),o.insertBefore(a,o.firstChild)},t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=t.createElement("ace_outer"),o=i.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",i.appendChild(n);var r=e.documentElement;r.appendChild(i);var a=n.offsetWidth;o.overflow="scroll";var s=n.offsetWidth;return a==s&&(s=i.clientWidth),r.removeChild(i),a-s},"undefined"==typeof document&&(t.importCssString=function(){}),t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!i.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var o=document.createElement("div");t.HI_DPI&&void 0!==o.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),!i.isEdge&&void 0!==o.style.animationName&&(t.HAS_CSS_ANIMATION=!0),o=null}t.translate=t.HAS_CSS_TRANSFORMS?function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}}),define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var i=e("./oop"),o=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(t,o),t.keyCodeToString=function(e){var t=o[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function i(e,t,n){var i=l(t);if(!a.isMac&&s){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(i|=8),s.altGr){if(3==(3&i))return;s.altGr=0}if(18===n||17===n){var o="location"in t?t.location:t.keyLocation;17===n&&1===o?1==s[n]&&(g=t.timeStamp):18===n&&3===i&&2===o&&t.timeStamp-g<50&&(s.altGr=!0)}}if(n in r.MODIFIER_KEYS&&(n=-1),8&i&&n>=91&&n<=93&&(n=-1),i||13!==n||3!==(o="location"in t?t.location:t.keyLocation)||(e(t,i,-n),!t.defaultPrevented)){if(a.isChromeOS&&8&i){if(e(t,i,n),t.defaultPrevented)return;i&=-9}return!!(i||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS)&&e(t,i,n)}}function o(){s=Object.create(null)}var r=e("./keys"),a=e("./useragent"),s=null,g=0;t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var i=function(){n.call(e,window.event)};n._wrapper=i,e.attachEvent("on"+t,i)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||a.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,i){function o(e){n&&n(e),i&&i(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",o,!0),t.removeListener(document,"dragstart",o,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",o,!0),t.addListener(document,"dragstart",o,!0),o},t.addTouchMoveListener=function(e,n){var i,o;t.addListener(e,"touchstart",function(e){var t=e.touches[0];i=t.clientX,o=t.clientY}),t.addListener(e,"touchmove",function(e){var t=e.touches;if(!(t.length>1)){var r=t[0];e.wheelX=i-r.clientX,e.wheelY=o-r.clientY,i=r.clientX,o=r.clientY,n(e)}})},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)})},t.addMultiMouseDownListener=function(e,n,i,o){function r(e){if(0!==t.getButton(e)?u=0:e.detail>1?++u>4&&(u=1):u=1,a.isIE){var r=Math.abs(e.clientX-g)>5||Math.abs(e.clientY-l)>5;c&&!r||(u=1),c&&clearTimeout(c),c=setTimeout(function(){c=null},n[u-1]||600),1==u&&(g=e.clientX,l=e.clientY)}if(e._clicks=u,i[o]("mousedown",e),u>4)u=0;else if(u>1)return i[o](I[u],e)}function s(e){u=2,c&&clearTimeout(c),c=setTimeout(function(){c=null},n[u-1]||600),i[o]("mousedown",e),i[o](I[u],e)}var g,l,c,u=0,I={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(e)||(e=[e]),e.forEach(function(e){t.addListener(e,"mousedown",r),a.isOldIE&&t.addListener(e,"dblclick",s)})};var l=!a.isMac||!a.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};if(t.getModifierString=function(e){return r.KEY_MODS[l(e)]},t.addCommandKeyListener=function(e,n){var r=t.addListener;if(a.isOldGecko||a.isOpera&&!("KeyboardEvent"in window)){var g=null;r(e,"keydown",function(e){g=e.keyCode}),r(e,"keypress",function(e){return i(n,e,g)})}else{var l=null;r(e,"keydown",function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=i(n,e,e.keyCode);return l=e.defaultPrevented,t}),r(e,"keypress",function(e){l&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),l=null)}),r(e,"keyup",function(e){s[e.keyCode]=null}),s||(o(),r(window,"focus",o))}},"object"==typeof window&&window.postMessage&&!a.isOldIE){var c=1;t.nextTick=function(e,n){n=n||window;var i="zero-timeout-message-"+c++,o=function(r){r.data==i&&(t.stopPropagation(r),t.removeListener(n,"message",o),e())};t.addListener(n,"message",o),n.postMessage(i,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout(function n(){t.$idleBlocked?setTimeout(n,100):e()},n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame=t.nextFrame?t.nextFrame.bind(window):function(e){setTimeout(e,17)}}),define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var i=function(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,i=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(i.row,i.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(i.row,i.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)&&!this.isStart(e,t)},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else this.end.row<e&&(n={row:e,column:0});if(this.start.row>t)var o={row:t+1,column:0};else this.start.row<e&&(o={row:e,column:0});return i.fromPoints(o||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var o={row:e,column:t};else var r={row:e,column:t};return i.fromPoints(o||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return new i(this.start.row,0,0==this.end.column?Math.max(this.start.row,this.end.row-1):this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var i=/^\s\s*/,o=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(o,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=e[n]&&"object"==typeof e[n]?this.copyObject(e[n]):e[n];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var i=0;i<t.length;i++)n[i]=e(t[i]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var i in n={},t)n[i]=e(t[i]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function(e){return i.cancel(),t=setTimeout(n,e||0),i};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i.isPending=function(){return t},i},t.delayedCall=function(e,t){var n=null,i=function(){n=null,e()},o=function(e){null==n&&(n=setTimeout(i,e||t))};return o.delay=function(e){n&&clearTimeout(n),n=setTimeout(i,e||t)},o.schedule=o,o.call=function(){this.cancel(),e()},o.cancel=function(){n&&clearTimeout(n),n=null},o.isPending=function(){return n},o}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"],function(e,t,n){"use strict";var i=e("../lib/event"),o=e("../lib/useragent"),r=e("../lib/dom"),a=e("../lib/lang"),s=o.isChrome<18,g=o.isIE,l=o.isChrome>63,c=400,u=e("../lib/keys"),I=u.KEY_MODS,d=o.isIOS,C=d?/\s/:/\n/;t.TextInput=function(e,t){function n(){y=!0,A.blur(),A.focus(),y=!1}function h(){clearTimeout(O),O=setTimeout(function(){B&&(A.style.cssText=B,B=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var A=r.createElement("textarea");A.className="ace_text-input",A.setAttribute("wrap","off"),A.setAttribute("autocorrect","off"),A.setAttribute("autocapitalize","off"),A.setAttribute("spellcheck",!1),A.style.opacity="0",e.insertBefore(A,e.firstChild);var f=!1,m=!1,p=!1,b=!1,B="";o.isMobile||(A.style.fontSize="1px");var v=!1,y=!1,x="",F=0,G=0;try{var Q=document.activeElement===A}catch(V){}i.addListener(A,"blur",function(e){y||(t.onBlur(e),Q=!1)}),i.addListener(A,"focus",function(e){if(!y){if(Q=!0,o.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),o.isEdge?setTimeout(w):w()}}),this.$focusScroll=!1,this.focus=function(){if(B||l||"browser"==this.$focusScroll)return A.focus({preventScroll:!0});var e=A.style.top;A.style.position="fixed",A.style.top="0px";try{var t=0!=A.getBoundingClientRect().top}catch(i){return}var n=[];if(t)for(var o=A.parentElement;o&&1==o.nodeType;)n.push(o),o.setAttribute("ace_nocontext",!0),o=!o.parentElement&&o.getRootNode?o.getRootNode().host:o.parentElement;A.focus({preventScroll:!0}),t&&n.forEach(function(e){e.removeAttribute("ace_nocontext")}),setTimeout(function(){A.style.position="","0px"==A.style.top&&(A.style.top=e)},0)},this.blur=function(){A.blur()},this.isFocused=function(){return Q},t.on("beforeEndOperation",function(){t.curOp&&"insertstring"==t.curOp.command.name||(p&&(x=A.value="",E()),w())});var w=d?function(e){if(Q&&(!f||e)){e||(e="");var n="\n ab"+e+"cde fg\n";n!=A.value&&(A.value=x=n);var i=4+(e.length||(t.selection.isEmpty()?0:1));(4!=F||G!=i)&&A.setSelectionRange(4,i),F=4,G=i}}:function(){if(!p&&!b&&(Q||X)){p=!0;var e=t.selection,n=e.getRange(),i=e.cursor.row,o=n.start.column,r=n.end.column,a=t.session.getLine(i);if(n.start.row!=i){var s=t.session.getLine(i-1);o=n.start.row<i-1?0:o,r+=s.length+1,a=s+"\n"+a}else if(n.end.row!=i){var g=t.session.getLine(i+1);r=n.end.row>i+1?g.length:r,r+=a.length+1,a=a+"\n"+g}a.length>c&&(o<c&&r<c?a=a.slice(0,c):(a="\n",o=0,r=1));var l=a+"\n\n";if(l!=x&&(A.value=x=l,F=G=l.length),X&&(F=A.selectionStart,G=A.selectionEnd),G!=r||F!=o||A.selectionEnd!=G)try{A.setSelectionRange(o,r),F=o,G=r}catch(I){}p=!1}};Q&&t.onFocus();var S=null;this.setInputHandler=function(e){S=e},this.getInputHandler=function(){return S};var X=!1,Z=function(e,n){if(X&&(X=!1),m)return w(),e&&t.onPaste(e),m=!1,"";for(var i=A.selectionStart,o=A.selectionEnd,r=F,a=x.length-G,s=e,g=e.length-i,l=e.length-o,c=0;r>0&&x[c]==e[c];)c++,r--;for(s=s.slice(c),c=1;a>0&&x.length-c>F-1&&x[x.length-c]==e[e.length-c];)c++,a--;return g-=c-1,l-=c-1,s=s.slice(0,s.length-c+1),n||g!=s.length||r||a||l?(b=!0,s&&!r&&!a&&!g&&!l||v?t.onTextInput(s):t.onTextInput(s,{extendLeft:r,extendRight:a,restoreStart:g,restoreEnd:l}),b=!1,x=e,F=i,G=o,s):""},N=function(e){if(p)return W();var t=A.value,n=Z(t,!0);(t.length>500||C.test(n))&&w()},k=function(e,t,n){var i=e.clipboardData||window.clipboardData;if(i&&!s){var o=g||n?"Text":"text/plain";try{return t?!1!==i.setData(o,t):i.getData(o)}catch(e){if(!n)return k(e,t,!0)}}},R=function(e,n){var o=t.getCopyText();if(!o)return i.preventDefault(e);k(e,o)?(d&&(w(o),f=o,setTimeout(function(){f=!1},10)),n?t.onCut():t.onCopy(),i.preventDefault(e)):(f=!0,A.value=o,A.select(),setTimeout(function(){f=!1,w(),n?t.onCut():t.onCopy()}))},D=function(e){R(e,!0)},U=function(e){R(e,!1)},T=function(e){var n=k(e);"string"==typeof n?(n&&t.onPaste(n,e),o.isIE&&setTimeout(w),i.preventDefault(e)):(A.value="",m=!0)};i.addCommandKeyListener(A,t.onCommandKey.bind(t)),i.addListener(A,"select",function(e){p||(f?f=!1:0===A.selectionStart&&A.selectionEnd>=x.length&&A.value===x&&x&&A.selectionEnd!==G&&(t.selectAll(),w()))}),i.addListener(A,"input",N),i.addListener(A,"cut",D),i.addListener(A,"copy",U),i.addListener(A,"paste",T),(!("oncut"in A)||!("oncopy"in A)||!("onpaste"in A))&&i.addListener(e,"keydown",function(e){if((!o.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:U(e);break;case 86:T(e);break;case 88:D(e)}});var W=function(){if(p&&t.onCompositionUpdate&&!t.$readOnly){if(v)return n();p.useTextareaForIME?t.onCompositionUpdate(A.value):(Z(A.value),p.markerRange&&(p.context&&(p.markerRange.start.column=p.selectionStart=p.context.compositionStartOffset),p.markerRange.end.column=p.markerRange.start.column+G-p.selectionStart))}},E=function(e){t.onCompositionEnd&&!t.$readOnly&&(p=!1,t.onCompositionEnd(),t.off("mousedown",n),e&&N())},H=a.delayedCall(W,50).schedule.bind(null,null);i.addListener(A,"compositionstart",function(e){if(!p&&t.onCompositionStart&&!t.$readOnly&&(p={},!v)){setTimeout(W,0),t.on("mousedown",n);var i=t.getSelectionRange();i.end.row=i.start.row,i.end.column=i.start.column,p.markerRange=i,p.selectionStart=F,t.onCompositionStart(p),p.useTextareaForIME?(A.value="",x="",F=0,G=0):(A.msGetInputContext&&(p.context=A.msGetInputContext()),A.getInputContext&&(p.context=A.getInputContext()))}}),i.addListener(A,"compositionupdate",W),i.addListener(A,"keyup",function(e){27==e.keyCode&&A.value.length<A.selectionStart&&(p||(x=A.value),F=G=-1,w()),H()}),i.addListener(A,"keydown",H),i.addListener(A,"compositionend",E),this.getElement=function(){return A},this.setCommandMode=function(e){v=e,A.readOnly=!1},this.setReadOnly=function(e){v||(A.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){X=!0,w(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,n){B||(B=A.style.cssText),A.style.cssText=(n?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(F+G)*t.renderer.characterWidth*.5+"px;";var a=t.container.getBoundingClientRect(),s=r.computedStyle(t.container),g=a.top+(parseInt(s.borderTopWidth)||0),l=a.left+(parseInt(a.borderLeftWidth)||0),c=a.bottom-g-A.clientHeight-2,u=function(e){A.style.left=e.clientX-l-2+"px",A.style.top=Math.min(e.clientY-g-2,c)+"px"};u(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),clearTimeout(O),o.isWin&&i.capture(t.container,u,h))},this.onContextMenuClose=h;var O,L=function(e){t.textInput.onContextMenu(e),h()};i.addListener(A,"mouseup",L),i.addListener(A,"mousedown",function(e){e.preventDefault(),h()}),i.addListener(t.renderer.scroller,"contextmenu",L),i.addListener(A,"contextmenu",L),d&&function(e,t,n){var i=null,o=!1;n.addEventListener("keydown",function(e){i&&clearTimeout(i),o=!0},!0),n.addEventListener("keyup",function(e){i=setTimeout(function(){o=!1},100)},!0);var r=function(e){if(document.activeElement===n&&!o&&!p&&!f){var i=n.selectionStart,r=n.selectionEnd,a=null,s=0;console.log(i,r),0==i?a=u.up:1==i?a=u.home:r>G&&"\n"==x[r]?a=u.end:i<F&&" "==x[i-1]?(a=u.left,s=I.option):i<F||i==F&&G!=F&&i==r?a=u.left:r>G&&x.slice(0,r).split("\n").length>2?a=u.down:r>G&&" "==x[r-1]?(a=u.right,s=I.option):(r>G||r==G&&G!=F&&i==r)&&(a=u.right),i!==r&&(s|=I.shift),a&&(t.onCommandKey(null,s,a),F=i,G=r,w(""))}};document.addEventListener("selectionchange",r),t.on("destroy",function(){document.removeEventListener("selectionchange",r)})}(0,t,A)}}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e)),t.setDefaultHandler("touchmove",this.onTouchMove.bind(e)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function o(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else n=e.start.row!=e.end.row-1||e.start.column||e.end.column?2*t.row-e.start.row-e.end.row:t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/useragent");(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,o=e.getButton();return 0!==o?((i.getSelectionRange().isEmpty()||1==o)&&i.selection.moveToPosition(n),void(2==o&&(i.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||i.isFocused()||(i.focus(),!this.$focusTimeout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,e=r.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[e](i.row,i.column);if(this.$clickSelection){var a=this.$clickSelection.comparePoint(r.start),s=this.$clickSelection.comparePoint(r.end);if(-1==a&&s<=0)t=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==s&&a>=0)t=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(-1==a&&1==s)i=r.end,t=r.start;else{var g=o(this.$clickSelection,i);i=g.cursor,t=g.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>0||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=e.domEvent.timeStamp,o=i-n.t,r=o?e.wheelX/o:n.vx,a=o?e.wheelY/o:n.vy;o<550&&(r=(r+n.vx)/2,a=(a+n.vy)/2);var s=Math.abs(r/a),g=!1;return s>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(g=!0),s<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(g=!0),g?n.allowed=i:i-n.allowed<550&&(Math.abs(r)<=1.5*Math.abs(n.vx)&&Math.abs(a)<=1.5*Math.abs(n.vy)?(g=!0,n.allowed=i):n.allowed=0),n.t=i,n.vx=r,n.vy=a,g?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}},this.onTouchMove=function(e){this.editor._emit("mousewheel",e)}}).call(i.prototype),t.DefaultHandlers=i}),define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function i(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}e("./lib/oop");var o=e("./lib/dom");(function(){this.$init=function(){return this.$element=o.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){o.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(i.prototype),t.Tooltip=i}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function i(e){s.call(this,e)}var o=e("../lib/dom"),r=e("../lib/oop"),a=e("../lib/event"),s=e("../tooltip").Tooltip;r.inherits(i,s),(function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),r=this.getHeight();(e+=15)+o>n&&(e-=e+o-n),(t+=15)+r>i&&(t-=20+r),s.prototype.setPosition.call(this,e,t)}}).call(i.prototype),t.GutterHandler=function(e){function t(){var t=g.getDocumentPosition().row,i=u.$annotations[t];if(!i)return n();if(t==c.session.getLength()){var o=c.renderer.pixelToScreenCoordinates(0,g.y).row,a=g.$pos;if(o>c.session.documentToScreenRow(a.row,a.column))return n()}if(l!=i)if(l=i.text.join("<br/>"),I.setHtml(l),I.show(),c._signal("showGutterTooltip",I),c.on("mousewheel",n),e.$tooltipFollowsMouse)r(g);else{var s=g.domEvent.target.getBoundingClientRect(),d=I.getElement().style;d.left=s.right+"px",d.top=s.bottom+"px"}}function n(){s&&(s=clearTimeout(s)),l&&(I.hide(),l=null,c._signal("hideGutterTooltip",I),c.removeEventListener("mousewheel",n))}function r(e){I.setPosition(e.x,e.y)}var s,g,l,c=e.editor,u=c.renderer.$gutterLayer,I=new i(c.container);e.editor.setDefaultHandler("guttermousedown",function(t){if(c.isFocused()&&0==t.getButton()&&"foldWidgets"!=u.getRegion(t)){var n=t.getDocumentPosition().row,i=c.session.selection;if(t.getShiftKey())i.selectTo(n,0);else{if(2==t.domEvent.detail)return c.selectAll(),t.preventDefault();e.$clickSelection=c.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}),e.editor.setDefaultHandler("guttermousemove",function(i){if(o.hasCssClass(i.domEvent.target||i.domEvent.srcElement,"ace_fold-widget"))return n();l&&e.$tooltipFollowsMouse&&r(i),g=i,s||(s=setTimeout(function(){s=null,g&&!e.isMousePressed?t():n()},50))}),a.addListener(c.renderer.$gutter,"mouseout",function(e){g=null,l&&!s&&(s=setTimeout(function(){s=null,n()},50))}),c.on("changeSession",n)}}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("../lib/event"),o=e("../lib/useragent"),r=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(r.prototype)}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function i(e){function t(){var e=B;(function(e,t){var n=Date.now();F&&t&&e.row==t.row&&t&&e.column==t.column?o(G.x,G.y,f,m)>c?F=null:n-F>=l&&(C.renderer.scrollCursorIntoView(),F=null):(C.moveCursorToPosition(e),F=n,G={x:f,y:m})})(B=C.renderer.screenToTextCoordinates(f,m),e),function(e,t){var n=Date.now(),i=C.renderer.layerConfig.lineHeight,o=C.renderer.layerConfig.characterWidth,r=C.renderer.scroller.getBoundingClientRect(),a={x:{left:f-r.left,right:r.right-f},y:{top:m-r.top,bottom:r.bottom-m}},s=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};s/o<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1),e.row!=c.row||e.column!=c.column&&t&&e.row==t.row?x?n-x>=g&&C.renderer.scrollCursorIntoView(c):x=n:x=null}(B,e)}function n(){b=C.selection.toOrientedRange(),A=C.session.addMarker(b,"ace_selection",C.getSelectionStyle()),C.clearSelection(),C.isFocused()&&C.renderer.$cursorLayer.setBlinking(!1),clearInterval(p),t(),p=setInterval(t,20),w=0,a.addListener(document,"mousemove",u)}function i(){clearInterval(p),C.session.removeMarker(A),A=null,C.selection.fromOrientedRange(b),C.isFocused()&&!y&&C.renderer.$cursorLayer.setBlinking(!C.getReadOnly()),b=null,B=null,w=0,x=null,F=null,a.removeListener(document,"mousemove",u)}function u(){null==S&&(S=setTimeout(function(){null!=S&&A&&i()},20))}function I(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function d(e){var t=["copy","copymove","all","uninitialized"],n=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return n&&t.indexOf(i)>=0?o="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var C=e.editor,h=r.createElement("img");h.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(h.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(t){e[t]=this[t]},this),C.addEventListener("mousedown",this.onMouseDown.bind(e));var A,f,m,p,b,B,v,y,x,F,G,Q=C.container,w=0;this.onDragStart=function(e){if(this.cancelDrag||!Q.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}b=C.getSelectionRange();var n=e.dataTransfer;n.effectAllowed=C.getReadOnly()?"copy":"copyMove",s.isOpera&&(C.container.appendChild(h),h.scrollTop=0),n.setDragImage&&n.setDragImage(h,0,0),s.isOpera&&C.container.removeChild(h),n.clearData(),n.setData("Text",C.session.getTextRange()),y=!0,this.setState("drag")},this.onDragEnd=function(e){Q.draggable=!1,y=!1,this.setState(null),C.getReadOnly()||(!v&&"move"==e.dataTransfer.dropEffect&&C.session.remove(C.getSelectionRange()),C.renderer.$cursorLayer.setBlinking(!0)),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!C.getReadOnly()&&I(e.dataTransfer))return f=e.clientX,m=e.clientY,A||n(),w++,e.dataTransfer.dropEffect=v=d(e),a.preventDefault(e)},this.onDragOver=function(e){if(!C.getReadOnly()&&I(e.dataTransfer))return f=e.clientX,m=e.clientY,A||(n(),w++),null!==S&&(S=null),e.dataTransfer.dropEffect=v=d(e),a.preventDefault(e)},this.onDragLeave=function(e){if(--w<=0&&A)return i(),v=null,a.preventDefault(e)},this.onDrop=function(e){if(B){var t=e.dataTransfer;if(y)switch(v){case"move":b=b.contains(B.row,B.column)?{start:B,end:B}:C.moveText(b,B);break;case"copy":b=C.moveText(b,B,!0)}else{var n=t.getData("Text");b={start:B,end:C.session.insert(B,n)},C.focus(),v=null}return i(),a.preventDefault(e)}},a.addListener(Q,"dragstart",this.onDragStart.bind(e)),a.addListener(Q,"dragend",this.onDragEnd.bind(e)),a.addListener(Q,"dragenter",this.onDragEnter.bind(e)),a.addListener(Q,"dragover",this.onDragOver.bind(e)),a.addListener(Q,"dragleave",this.onDragLeave.bind(e)),a.addListener(Q,"drop",this.onDrop.bind(e));var S=null}function o(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}var r=e("../lib/dom"),a=e("../lib/event"),s=e("../lib/useragent"),g=200,l=200,c=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging"),e.renderer.setCursorStyle(s.isWin?"default":"move"),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;s.isIE&&"dragReady"==this.state&&o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop(),"dragWait"===this.state&&o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),i=e.getButton();if(1===(e.domEvent.detail||1)&&0===i&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on"),t.getDragDelay()?(s.isWebKit&&(this.cancelDrag=!0,t.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(i.prototype),t.DragdropHandler=i}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),o=document.createElement("script");o.src=e,n.appendChild(o),o.onload=o.onreadystatechange=function(e,n){!n&&o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(o=o.onload=o.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var i={},o=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],i=this._defaultHandlers[e];if(n.length||i){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=o),t.preventDefault||(t.preventDefault=r),n=n.slice();for(var a=0;a<n.length&&(n[a](t,this),!t.propagationStopped);a++);return i&&!t.defaultPrevented?i(t,this):void 0}},i._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)}},i.once=function(e,t){var n=this;if(this.addEventListener(e,function i(){n.removeEventListener(e,i),t.apply(null,arguments)}),!t)return new Promise(function(e){t=e})},i.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var i=n[e],o=n._disabled_[e];o||(n._disabled_[e]=o=[]),o.push(i);var r=o.indexOf(t);-1!=r&&o.splice(r,1)}n[e]=t},i.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var i=n._disabled_[e];if(n[e]==t)i&&this.setDefaultHandler(e,i.pop());else if(i){var o=i.indexOf(t);-1!=o&&i.splice(o,1)}}},i.on=i.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];return i||(i=this._eventRegistry[e]=[]),-1==i.indexOf(t)&&i[n?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=i}),define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){function i(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function o(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e("./oop"),a=e("./event_emitter").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter(function(e){return!n[e].hidden})}return e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];return n?n.forwardTo?this[n.forwardTo]&&this[n.forwardTo].setOption(e,t):(n.handlesSet||(this["$"+e]=t),void(n&&n.set&&n.set.call(this,t))):i('misspelled option "'+e+'"')}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:i('misspelled option "'+e+'"')}},g=function(){this.$defaultOptions={}};(function(){r.implement(this,a),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var i=n[t];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=t),e.$options[i.name]=i,"initialValue"in i&&(e["$"+i.name]=i.initialValue)}),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[t]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,t,n):i[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=i,this.reportError=o}).call(g.prototype),t.AppConfig=g}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(e,t,n){function i(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var o=e("./lib/lang"),r=(e("./lib/oop"),e("./lib/net")),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var s=function(){return this||"undefined"!=typeof window&&window}(),g={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0};t.get=function(e){if(!g.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return g[e]},t.set=function(e,t){if(!g.hasOwnProperty(e))throw new Error("Unknown config key: "+e);g[e]=t},t.all=function(){return o.copyObject(g)},t.$modes={},t.moduleUrl=function(e,t){if(g.$moduleUrls[e])return g.$moduleUrls[e];var n=e.split("/"),i="snippets"==(t=t||n[n.length-2]||"")?"/":"-",o=n[n.length-1];if("worker"==t&&"-"==i){var r=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");o=o.replace(r,"")}(!o||o==t)&&n.length>1&&(o=n[n.length-2]);var a=g[t+"Path"];return null==a?a=g.basePath:"/"==i&&(t=i=""),a&&"/"!=a.slice(-1)&&(a+="/"),a+t+i+o+this.get("suffix")},t.setModuleUrl=function(e,t){return g.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,i){var o,a;Array.isArray(n)&&(a=n[0],n=n[1]);try{o=e(n)}catch(s){}if(o&&!t.$loading[n])return i&&i(o);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(i),!(t.$loading[n].length>1)){var g=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var i=t.$loading[n];t.$loading[n]=null,i.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return g();r.loadScript(t.moduleUrl(n,a),g),l()}};var l=function(){!g.basePath&&!g.workerPath&&!g.modePath&&!g.themePath&&!Object.keys(g.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),l=function(){})};t.init=function(o){if(s&&s.document){g.packaged=o||e.packaged||n.packaged||s.define&&define.packaged;for(var r={},a="",l=document.currentScript||document._currentScript,c=(l&&l.ownerDocument||document).getElementsByTagName("script"),u=0;u<c.length;u++){var I=c[u],d=I.src||I.getAttribute("src");if(d){for(var C=I.attributes,h=0,A=C.length;h<A;h++){var f=C[h];0===f.name.indexOf("data-ace-")&&(r[i(f.name.replace(/^data-ace-/,""))]=f.value)}var m=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);m&&(a=m[1])}}for(var p in a&&(r.base=r.base||a,r.packaged=!0),r.basePath=r.base,r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base,r)void 0!==r[p]&&t.set(p,r[p])}}}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){"use strict";var i=e("../lib/event"),o=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,s=e("./mouse_event").MouseEvent,g=e("./dragdrop_handler").DragdropHandler,l=e("../config"),c=function(e){var t=this;this.editor=e,new r(this),new a(this),new g(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},s=e.renderer.getMouseEventTarget();i.addListener(s,"click",this.onMouseEvent.bind(this,"click")),i.addListener(s,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener([s,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),i.addTouchMoveListener(e.container,this.onTouchMove.bind(this,"touchmove"));var l=e.renderer.$gutter;i.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(s,"mousedown",n),i.addListener(l,"mousedown",n),o.isIE&&e.renderer.scrollBarV&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",n),i.addListener(e.renderer.scrollBarH.element,"mousedown",n)),e.on("mousemove",function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var i=e.renderer.screenToTextCoordinates(n.x,n.y),o=e.session.selection.getRange(),r=e.renderer;!o.isEmpty()&&o.insideStart(i.row,i.column)?r.setCursorStyle("default"):r.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new s(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new s(t,this.editor))},this.onMouseWheel=function(e,t){var n=new s(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.onTouchMove=function(e,t){var n=new s(t,this.editor);n.speed=1,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,r=this.editor.renderer;r.$keepTextAreaAtCursor&&(r.$keepTextAreaAtCursor=null);var a=this,g=function(e){if(e)return o.isWebKit&&!e.which&&a.releaseMouse?a.releaseMouse():(a.x=e.clientX,a.y=e.clientY,t&&t(e),a.mouseEvent=new s(e,a.editor),void(a.$mouseMoved=!0))},l=function(e){n.off("beforeEndOperation",u),clearInterval(I),c(),a[a.state+"End"]&&a[a.state+"End"](e),a.state="",null==r.$keepTextAreaAtCursor&&(r.$keepTextAreaAtCursor=!0,r.$moveTextAreaToCursor()),a.isMousePressed=!1,a.$onCaptureMouseMove=a.releaseMouse=null,e&&a.onMouseEvent("mouseup",e),n.endOperation()},c=function(){a[a.state]&&a[a.state](),a.$mouseMoved=!1};if(o.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){l(e)});var u=function(e){a.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(a[a.state+"End"]&&a[a.state+"End"](),a.state="",a.releaseMouse())};n.on("beforeEndOperation",u),n.startOperation({command:{name:"mouse"}}),a.$onCaptureMouseMove=g,a.releaseMouse=i.capture(this.editor.container,g,l);var I=setInterval(c,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=(function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}).bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(c.prototype),l.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:o.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c}),define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../lib/dom");t.FoldHandler=function(e){e.on("click",function(t){var n=t.getDocumentPosition(),o=e.session,r=o.getFoldAt(n.row,n.column,1);r&&(t.getAccelKey()?o.removeFold(r):o.expandFold(r),t.stop());var a=t.domEvent&&t.domEvent.target;a&&i.hasCssClass(a,"ace_inline_button")&&i.hasCssClass(a,"ace_toggle_wrap")&&(o.setOption("wrap",!0),e.renderer.scrollCursorIntoView())}),e.on("gutterclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session,o=i.getParentFoldRangeData(n,!0),r=o.range||o.firstRange;if(r){var a=i.getFoldAt(n=r.start.row,i.getLine(n).length,1);a?i.removeFold(a):(i.addFold("...",r),e.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}t.stop()}})}}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var i=e("../lib/keys"),o=e("../lib/event"),r=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"==typeof e&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,i){for(var r,a=!1,s=this.$editor.commands,g=this.$handlers.length;g--&&!((r=this.$handlers[g].handleKeyboard(this.$data,e,t,n,i))&&r.command&&((a="null"==r.command||s.exec(r.command,this.$editor,r.args,i))&&i&&-1!=e&&1!=r.passEvent&&1!=r.command.passEvent&&o.stopEvent(i),a)););return!a&&-1==e&&(r={command:"insertstring"},a=s.exec("insertstring",this.$editor,t)),a&&this.$editor._signal&&this.$editor._signal("keyboardActivity",r),a},this.onCommandKey=function(e,t,n){var o=i.keyCodeToString(n);this.$callKeyboardHandlers(t,o,n,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)}}).call(r.prototype),t.KeyBinding=r}),define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";function i(e,t,n,i){var o=s?d:I,C=null,h=null,A=null,f=0,m=null,p=-1,v=null,x=null,F=[];if(!i)for(v=0,i=[];v<n;v++)i[v]=a(e[v]);for(g=s,l=!1,c=!1,u=!1,x=0;x<n;x++){if(C=f,F[x]=h=r(e,i,F,x),m=240&(f=o[C][h]),t[x]=A=o[f&=15][5],m>0)if(16==m){for(v=p;v<x;v++)t[v]=1;p=-1}else p=-1;if(o[f][6])-1==p&&(p=x);else if(p>-1){for(v=p;v<x;v++)t[v]=A;p=-1}i[x]==b&&(t[x]=0),g|=A}if(u)for(v=0;v<n;v++)if(i[v]==B){t[v]=s;for(var G=v-1;G>=0&&i[G]==y;G--)t[G]=s}}function o(e,t,n){if(!(g<e))if(1!=e||s!=C||c)for(var i,o,r,a,l=n.length,u=0;u<l;){if(t[u]>=e){for(i=u+1;i<l&&t[i]>=e;)i++;for(o=u,r=i-1;o<r;o++,r--)a=n[o],n[o]=n[r],n[r]=a;u=i}u++}else n.reverse()}function r(e,t,n,i){var o,r,a,g,I=t[i];switch(I){case h:case A:l=!1;case p:case m:return I;case f:return l?m:f;case v:return l=!0,A;case y:return p;case x:return i<1||i+1>=t.length||(o=n[i-1])!=f&&o!=m||(r=t[i+1])!=f&&r!=m?p:(l&&(r=m),r==o?r:p);case F:return(o=i>0?n[i-1]:b)==f&&i+1<t.length&&t[i+1]==f?f:p;case G:if(i>0&&n[i-1]==f)return f;if(l)return p;for(g=i+1,a=t.length;g<a&&t[g]==G;)g++;return g<a&&t[g]==f?f:p;case Q:for(a=t.length,g=i+1;g<a&&t[g]==Q;)g++;if(g<a){var d=e[i];if(o=t[g],(d>=1425&&d<=2303||64286==d)&&(o==A||o==v))return A}return i<1||(o=t[i-1])==b?p:n[i-1];case b:return l=!1,c=!0,s;case B:return u=!0,p;case w:case S:case Z:case N:case X:l=!1;case k:return p}}function a(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?h:R[t]:5==n?/[\u0591-\u05f4]/.test(e)?A:h:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?Q:/[\u0660-\u0669\u066b-\u066c]/.test(e)?m:1642==t?G:/[\u06f0-\u06f9]/.test(e)?f:v:32==n&&t<=8287?D[255&t]:254==n&&t>=65136?v:p}var s=0,g=0,l=!1,c=!1,u=!1,I=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C=1,h=0,A=1,f=2,m=3,p=4,b=5,B=6,v=7,y=8,x=9,F=10,G=11,Q=12,w=13,S=14,X=15,Z=16,N=17,k=18,R=[k,k,k,k,k,k,k,k,k,B,b,B,y,b,k,k,k,k,k,k,k,k,k,k,k,k,k,k,b,b,b,B,y,p,p,G,G,G,p,p,p,p,p,F,x,F,x,x,f,f,f,f,f,f,f,f,f,f,x,p,p,p,p,p,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,p,p,p,p,p,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,p,p,p,p,k,k,k,k,k,k,b,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,x,p,G,G,G,G,p,p,p,p,h,p,p,k,p,p,G,G,f,f,p,h,p,p,p,f,h,p,p,p,p,p],D=[y,y,y,y,y,y,y,y,y,y,y,k,k,k,h,A,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,y,b,w,S,X,Z,N,x,G,G,G,G,G,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,x,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,y];t.L=h,t.R=A,t.EN=f,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xb7",t.doBidiReorder=function(e,n,r){if(e.length<2)return{};var a=e.split(""),g=new Array(a.length),l=new Array(a.length),c=[];s=r?C:0,i(a,c,a.length,n);for(var u=0;u<g.length;g[u]=u,u++);for(o(2,c,g),o(1,c,g),u=0;u<g.length-1;u++)n[u]===m?c[u]=t.AN:c[u]===A&&(n[u]>v&&n[u]<w||n[u]===p||n[u]===k)?c[u]=t.ON_R:u>0&&"\u0644"===a[u-1]&&/\u0622|\u0623|\u0625|\u0627/.test(a[u])&&(c[u-1]=c[u]=t.R_H,u++);for(a[a.length-1]===t.DOT&&(c[a.length-1]=t.B),"\u202b"===a[0]&&(c[0]=t.RLE),u=0;u<g.length;u++)l[u]=c[g[u]];return{logicalFromVisual:g,bidiLevels:l}},t.hasBidiCharacters=function(e,t){for(var n=!1,i=0;i<e.length;i++)t[i]=a(e.charAt(i)),!n&&(t[i]==A||t[i]==v||t[i]==m)&&(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var i=e("./lib/bidiutil"),o=e("./lib/lang"),r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=r.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&r.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,i=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===i;)i=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var r=this.session.$wrapData[e];r&&(void 0===t&&(t=this.getSplitIndex()),t>0&&r.length?(this.wrapIndent=r.indent,this.wrapOffset=this.wrapIndent*this.charWidths[i.L],this.line=t<r.length?this.line.substring(r[t-1],r[t]):this.line.substring(r[r.length-1])):this.line=this.line.substring(0,r[t])),t==r.length&&(this.line+=this.showInvisibles?n:i.DOT)}else this.line+=this.showInvisibles?n:i.DOT;var a,s=this.session,g=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return"\t"===e||s.isFullWidth(e.charCodeAt(0))?(a="\t"===e?s.getScreenTabSize(t+g):2,g+=a-1,o.stringRepeat(i.DOT,a)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==i.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];this.bidiMap=i.hasBidiCharacters(this.line,e)||this.isRtlDir?i.doBidiReorder(this.line,e,this.isRtlDir):{}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=t,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=.45*n,this.charWidths[i.B]=this.charWidths[i.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),i=e.selection.getSelectionAnchor().row;i<=n.row;i++)t||e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:i},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(i,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,o=i.getVisualFromLogicalIdx(n,this.bidiMap),r=this.bidiMap.bidiLevels,a=0;!this.session.getOverwrite()&&e<=t&&r[o]%2!=0&&o++;for(var s=0;s<o;s++)a+=this.charWidths[r[s]];return!this.session.getOverwrite()&&e>t&&r[o]%2==0&&(a+=this.charWidths[r[o]]),this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(a+=this.rtlLineOffset),a},this.getSelections=function(e,t){var n,i=this.bidiMap,o=i.bidiLevels,r=[],a=0,s=Math.min(e,t)-this.wrapIndent,g=Math.max(e,t)-this.wrapIndent,l=!1,c=!1,u=0;this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var I,d=0;d<o.length;d++)n=o[d],(l=(I=i.logicalFromVisual[d])>=s&&I<g)&&!c?u=a:!l&&c&&r.push({left:u,width:a-u}),a+=this.charWidths[n],c=l;if(l&&d===o.length&&r.push({left:u,width:a-u}),this.isRtlDir)for(var C=0;C<r.length;C++)r[C].left+=this.rtlLineOffset;return r},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),i=0,o=this.bidiMap.bidiLevels,r=this.charWidths[o[i]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+r/2;){if(n+=r,i===o.length-1){r=0;break}r=this.charWidths[o[++i]]}return i>0&&o[i-1]%2!=0&&o[i]%2==0?(e<n&&i--,t=this.bidiMap.logicalFromVisual[i]):i>0&&o[i-1]%2==0&&o[i]%2!=0?t=1+(e>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===o.length-1&&0===r&&o[i-1]%2==0||!this.isRtlDir&&0===i&&o[i]%2!=0?t=1+this.bidiMap.logicalFromVisual[i]:(i>0&&o[i-1]%2!=0&&0!==r&&i--,t=this.bidiMap.logicalFromVisual[i]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(a.prototype),t.BidiHandler=a}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/lang"),r=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,s=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),!t.$isEmpty&&!t.$silent&&t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit("changeSelection")})};(function(){i.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?a.fromPoints(t,t):this.isBackwards()?a.fromPoints(t,e):a.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,i=t?e.start:e.end;this.$setSelection(n.row,n.column,i.row,i.column)},this.$setSelection=function(e,t,n,i){var o=this.$isEmpty,r=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,i),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||o!=this.$isEmpty||r)&&this._emit("changeSelection")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,o=this.session.getFoldLine(i);return o?(i=o.start.row,n=o.end.row):n=i,!0===t?new a(i,0,n,this.session.getLine(n).length):new a(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var i=e.column,o=e.column+t;return n<0&&(i=e.column-t,o=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(i,o).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t=this.lead,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),o=this.session.getDisplayLine(e,null,i.row,i.column).match(/^\s*/);o[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(e,t,1);if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(i)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var i=this.session.getFoldStringAt(t,n,-1);null==i&&(i=this.doc.getLine(t).substring(0,n));var r=o.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(r)&&(n-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(r)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},this.$shortWordEndIndex=function(e){var t,n=0,i=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&i.test(t);)n++;if(n<1)for(o.lastIndex=0;(t=e[n])&&!o.test(t);)if(o.lastIndex=0,n++,i.test(t)){if(n>2){n--;break}for(;(t=e[n])&&i.test(t);)n++;if(n>2)break}}return o.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),o=this.session.getFoldAt(e,t,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(t==n.length){var r=this.doc.getLength();do{i=this.doc.getLine(++e)}while(e<r&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var a=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+a)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getLine(t).substring(0,n);if(0===n){do{i=this.doc.getLine(--t)}while(t>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var r=o.stringReverse(i),a=this.$shortWordEndIndex(r);return this.moveCursorTo(t,n-a)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var o=this.session.screenToDocumentPosition(i.row+e,i.column,n);0!==e&&0===t&&o.row===this.lead.row&&o.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[o.row]&&(o.row>0||e>0)&&o.row++,this.moveCursorTo(o.row,o.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0;var o=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(o.charAt(t))&&o.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return a.fromPoints(t,n)}catch(i){return a.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=a.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(s.prototype),t.Selection=s}),define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var i=e("./config"),o=2e3,r=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],i=[],o=0,r=this.matchMappings[t]={defaultToken:"text"},a="g",s=[],g=0;g<n.length;g++){var l=n[g];if(l.defaultToken&&(r.defaultToken=l.defaultToken),l.caseInsensitive&&(a="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var c=l.regex,u=new RegExp("(?:("+c+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==u?l.token=l.token[0]:u-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:u-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"==typeof l.token&&!l.onMatch&&(l.onMatch=u>1?this.$applyToken:l.token),u>1&&(/\\\d/.test(l.regex)?c=l.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+o+1)}):(u=1,c=this.removeCapturingGroups(l.regex)),!l.splitRegex&&"string"!=typeof l.token&&s.push(l)),r[o]=g,o+=u,i.push(c),l.onMatch||(l.onMatch=null)}}i.length||(r[0]=0,i.push("$")),s.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,a)},this),this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",a)}};(function(){this.$setMaxTokenCount=function(e){o=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var i=[],o=0,r=n.length;o<r;o++)t[o]&&(i[i.length]={type:n[o],value:t[o]});return i},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],i=this.tokenArray,o=0,r=i.length;o<r;o++)t[o+1]&&(n[n.length]={type:i[o],value:t[o+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,i=!1,o={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,r,a,s,g){return i?i="]"!=s:s?i=!0:a?(n==o.stack&&(o.end=g+1,o.stack=-1),n--):r&&(n++,1!=r.length&&(o.stack=n,o.start=g)),e}),null!=o.end&&/^\)*$/.test(e.substr(o.end))&&(e=e.substring(0,o.start)+e.substr(o.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var i=t||"start",r=this.states[i];r||(r=this.states[i="start"]);var a=this.matchMappings[i],s=this.regExps[i];s.lastIndex=0;for(var g,l=[],c=0,u=0,I={type:null,value:""};g=s.exec(e);){var d=a.defaultToken,C=null,h=g[0],A=s.lastIndex;if(A-h.length>c){var f=e.substring(c,A-h.length);I.type==d?I.value+=f:(I.type&&l.push(I),I={type:d,value:f})}for(var m=0;m<g.length-2;m++)if(void 0!==g[m+1]){d=(C=r[a[m]]).onMatch?C.onMatch(h,i,n,e):C.token,C.next&&(i="string"==typeof C.next?C.next:C.next(i,n),(r=this.states[i])||(this.reportError("state doesn't exist",i),r=this.states[i="start"]),a=this.matchMappings[i],c=A,(s=this.regExps[i]).lastIndex=A),C.consumeLineEnd&&(c=A);break}if(h)if("string"==typeof d)C&&!1===C.merge||I.type!==d?(I.type&&l.push(I),I={type:d,value:h}):I.value+=h;else if(d)for(I.type&&l.push(I),I={type:null,value:""},m=0;m<d.length;m++)l.push(d[m]);if(c==e.length)break;if(c=A,u++>o){for(u>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});c<e.length;)I.type&&l.push(I),I={value:e.substring(c,c+=2e3),type:"overflow"};i="start",n=[];break}}return I.type&&l.push(I),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:l,state:n.length?n:i}},this.reportError=i.reportError}).call(r.prototype),t.Tokenizer=r}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var i=e("../lib/lang"),o=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var i=e[n],o=0;o<i.length;o++){var r=i[o];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(t)&&(r.next=t+r.next),r.nextState&&0!==r.nextState.indexOf(t)&&(r.nextState=t+r.nextState))}this.$rules[t+n]=i}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,o,r){var a="function"==typeof e?(new e).getRules():e;if(o)for(var s=0;s<o.length;s++)o[s]=t+o[s];else for(var g in o=[],a)o.push(t+g);if(this.addRules(a,t),n){var l=Array.prototype[r?"push":"unshift"];for(s=0;s<o.length;s++)l.apply(this.$rules[o[s]],i.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach(function o(r){var a=i[r];a.processed=!0;for(var s=0;s<a.length;s++){var g=a[s],l=null;Array.isArray(g)&&(l=g,g={}),!g.regex&&g.start&&(g.regex=g.start,g.next||(g.next=[]),g.next.push({defaultToken:g.token},{token:g.token+".end",regex:g.end||g.start,next:"pop"}),g.token=g.token+".start",g.push=!0);var c=g.next||g.push;if(c&&Array.isArray(c)){var u=g.stateName;u||("string"!=typeof(u=g.token)&&(u=u[0]||""),i[u]&&(u+=n++)),i[u]=c,g.next=u,o(u)}else"pop"==c&&(g.next=t);if(g.push&&(g.nextState=g.next||g.push,g.next=e,delete g.push),g.rules)for(var I in g.rules)i[I]?i[I].push&&i[I].push.apply(i[I],g.rules[I]):i[I]=g.rules[I];var d="string"==typeof g?g:g.include;if(d&&(l=Array.isArray(d)?d.map(function(e){return i[e]}):i[d]),l){var C=[s,1].concat(l);g.noEscape&&(C=C.filter(function(e){return!e.next})),a.splice.apply(a,C),s--}g.keywordMap&&(g.token=this.createKeywordMapper(g.keywordMap,g.defaultToken||"text",g.caseInsensitive),delete g.defaultToken)}},this)},this.createKeywordMapper=function(e,t,n,i){var o=Object.create(null);return Object.keys(e).forEach(function(t){var r=e[t];n&&(r=r.toLowerCase());for(var a=r.split(i||"|"),s=a.length;s--;)o[a[s]]=t}),Object.getPrototypeOf(o)&&(o.__proto__=null),this.$keywordList=Object.keys(o),e=null,n?function(e){return o[e.toLowerCase()]||t}:function(e){return o[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(o.prototype),t.TextHighlightRules=o}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(i.prototype),t.Behaviour=i}),define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("./range").Range,o=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new i(this.$row,t,this.$row,t+e.value.length)}}).call(o.prototype),t.TokenIterator=o}),define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var i,o=e("../../lib/oop"),r=e("../behaviour").Behaviour,a=e("../../token_iterator").TokenIterator,s=e("../../lib/lang"),g=["text","paren.rparen","punctuation.operator"],l=["text","paren.rparen","punctuation.operator","comment"],c={},u={'"':'"',"'":"'"},I=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,c.rangeCount!=e.multiSelect.rangeCount&&(c={rangeCount:e.multiSelect.rangeCount})),c[t])return i=c[t];i=c[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(e,t,n,i){var o=e.end.row-e.start.row;return{text:n+t+i,selection:[0,e.start.column+1,o,e.end.column+(o?0:1)]}},C=function(e){this.add("braces","insertion",function(t,n,o,r,a){var g=o.getCursorPosition(),l=r.doc.getLine(g.row);if("{"==a){I(o);var c=o.getSelectionRange(),u=r.doc.getTextRange(c);if(""!==u&&"{"!==u&&o.getWrapBehavioursEnabled())return d(c,u,"{","}");if(C.isSaneInsertion(o,r))return/[\]\}\)]/.test(l[g.column])||o.inMultiSelectMode||e&&e.braces?(C.recordAutoInsert(o,r,"}"),{text:"{}",selection:[1,1]}):(C.recordMaybeInsert(o,r,"{"),{text:"{",selection:[1,1]})}else if("}"==a){if(I(o),"}"==l.substring(g.column,g.column+1)&&null!==r.$findOpeningBracket("}",{column:g.column+1,row:g.row})&&C.isAutoInsertedClosing(g,l,a))return C.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==a||"\r\n"==a){I(o);var h="";if(C.isMaybeInsertedClosing(g,l)&&(h=s.stringRepeat("}",i.maybeInsertedBrackets),C.clearMaybeInsertedClosing()),"}"===l.substring(g.column,g.column+1)){var A=r.findMatchingBracket({row:g.row,column:g.column+1},"}");if(!A)return null;var f=this.$getIndent(r.getLine(A.row))}else{if(!h)return void C.clearMaybeInsertedClosing();f=this.$getIndent(l)}var m=f+r.getTabString();return{text:"\n"+m+"\n"+f+h,selection:[1,m.length,1,m.length]}}C.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,o,r){var a=o.doc.getTextRange(r);if(!r.isMultiLine()&&"{"==a){if(I(n),"}"==o.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,i,o){if("("==o){I(n);var r=n.getSelectionRange(),a=i.doc.getTextRange(r);if(""!==a&&n.getWrapBehavioursEnabled())return d(r,a,"(",")");if(C.isSaneInsertion(n,i))return C.recordAutoInsert(n,i,")"),{text:"()",selection:[1,1]}}else if(")"==o){I(n);var s=n.getCursorPosition(),g=i.doc.getLine(s.row);if(")"==g.substring(s.column,s.column+1)&&null!==i.$findOpeningBracket(")",{column:s.column+1,row:s.row})&&C.isAutoInsertedClosing(s,g,o))return C.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(e,t,n,i,o){var r=i.doc.getTextRange(o);if(!o.isMultiLine()&&"("==r&&(I(n),")"==i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o}),this.add("brackets","insertion",function(e,t,n,i,o){if("["==o){I(n);var r=n.getSelectionRange(),a=i.doc.getTextRange(r);if(""!==a&&n.getWrapBehavioursEnabled())return d(r,a,"[","]");if(C.isSaneInsertion(n,i))return C.recordAutoInsert(n,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){I(n);var s=n.getCursorPosition(),g=i.doc.getLine(s.row);if("]"==g.substring(s.column,s.column+1)&&null!==i.$findOpeningBracket("]",{column:s.column+1,row:s.row})&&C.isAutoInsertedClosing(s,g,o))return C.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(e,t,n,i,o){var r=i.doc.getTextRange(o);if(!o.isMultiLine()&&"["==r&&(I(n),"]"==i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o}),this.add("string_dquotes","insertion",function(e,t,n,i,o){var r=i.$mode.$quotes||u;if(1==o.length&&r[o]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(o))return;I(n);var a=o,s=n.getSelectionRange(),g=i.doc.getTextRange(s);if(""!==g&&(1!=g.length||!r[g])&&n.getWrapBehavioursEnabled())return d(s,g,a,a);if(!g){var l=n.getCursorPosition(),c=i.doc.getLine(l.row),C=c.substring(l.column-1,l.column),h=c.substring(l.column,l.column+1),A=i.getTokenAt(l.row,l.column),f=i.getTokenAt(l.row,l.column+1);if("\\"==C&&A&&/escape/.test(A.type))return null;var m,p=A&&/string|escape/.test(A.type),b=!f||/string|escape/.test(f.type);if(h==a)(m=p!==b)&&/string\.end/.test(f.type)&&(m=!1);else{if(p&&!b)return null;if(p&&b)return null;var B=i.$mode.tokenRe;B.lastIndex=0;var v=B.test(C);B.lastIndex=0;var y=B.test(C);if(v||y)return null;if(h&&!/[\s;,.})\]\\]/.test(h))return null;m=!0}return{text:m?a+a:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,i,o){var r=i.$mode.$quotes||u,a=i.doc.getTextRange(o);if(!o.isMultiLine()&&r.hasOwnProperty(a)&&(I(n),i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)==a))return o.end.column++,o})};C.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),i=new a(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",g)){var o=new a(t,n.row,n.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",g))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",l)},C.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},C.recordAutoInsert=function(e,t,n){var o=e.getCursorPosition(),r=t.doc.getLine(o.row);this.isAutoInsertedClosing(o,r,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=o.row,i.autoInsertedLineEnd=n+r.substr(o.column),i.autoInsertedBrackets++},C.recordMaybeInsert=function(e,t,n){var o=e.getCursorPosition(),r=t.doc.getLine(o.row);this.isMaybeInsertedClosing(o,r)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=o.row,i.maybeInsertedLineStart=r.substr(0,o.column)+n,i.maybeInsertedLineEnd=r.substr(o.column),i.maybeInsertedBrackets++},C.isAutoInsertedClosing=function(e,t,n){return i.autoInsertedBrackets>0&&e.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&t.substr(e.column)===i.autoInsertedLineEnd},C.isMaybeInsertedClosing=function(e,t){return i.maybeInsertedBrackets>0&&e.row===i.maybeInsertedRow&&t.substr(e.column)===i.maybeInsertedLineEnd&&t.substr(0,e.column)==i.maybeInsertedLineStart},C.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},C.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},o.inherits(C,r),t.CstyleBehaviour=C}),define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],o=0,r=[],a=0;a<i.length;a+=2)r.push(o+=i[a]),i[a+1]&&r.push(45,o+=i[a+1]);t.wordChars=String.fromCharCode.apply(null,r)}),define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var i=e("../config"),o=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,s=e("../unicode"),g=e("../lib/lang"),l=e("../token_iterator").TokenIterator,c=e("../range").Range,u=function(){this.HighlightRules=r};(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+s.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,i){function o(e){for(var t=n;t<=i;t++)e(r.getLine(t),t)}var r=t.doc,a=!0,s=!0,l=1/0,c=t.getTabSize(),u=!1;if(this.lineCommentStart){Array.isArray(this.lineCommentStart)?(A=this.lineCommentStart.map(g.escapeRegExp).join("|"),C=this.lineCommentStart[0]):(A=g.escapeRegExp(this.lineCommentStart),C=this.lineCommentStart),A=new RegExp("^(\\s*)(?:"+A+") ?"),u=t.getUseSoftTabs(),p=function(e,t){var n=e.match(A);if(n){var i=n[1].length,o=n[0].length;!d(e,i,o)&&" "==n[0][o-1]&&o--,r.removeInLine(t,i,o)}};var I=C+" ",d=(m=function(e,t){a&&!/\S/.test(e)||(d(e,l,l)?r.insertInLine({row:t,column:l},I):r.insertInLine({row:t,column:l},C))},b=function(e,t){return A.test(e)},function(e,t,n){for(var i=0;t--&&" "==e.charAt(t);)i++;if(i%c!=0)return!1;for(i=0;" "==e.charAt(n++);)i++;return c>2?i%c!=c-1:i%c==0})}else{if(!this.blockComment)return!1;var C=this.blockComment.start,h=this.blockComment.end,A=new RegExp("^(\\s*)(?:"+g.escapeRegExp(C)+")"),f=new RegExp("(?:"+g.escapeRegExp(h)+")\\s*$"),m=function(e,t){b(e,t)||a&&!/\S/.test(e)||(r.insertInLine({row:t,column:e.length},h),r.insertInLine({row:t,column:l},C))},p=function(e,t){var n;(n=e.match(f))&&r.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(A))&&r.removeInLine(t,n[1].length,n[0].length)},b=function(e,n){if(A.test(e))return!0;for(var i=t.getTokens(n),o=0;o<i.length;o++)if("comment"===i[o].type)return!0}}var B=1/0;o(function(e,t){var n=e.search(/\S/);-1!==n?(n<l&&(l=n),s&&!b(e,t)&&(s=!1)):B>e.length&&(B=e.length)}),l==1/0&&(l=B,a=!1,s=!1),u&&l%c!=0&&(l=Math.floor(l/c)*c),o(s?p:m)},this.toggleBlockComment=function(e,t,n,i){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var r,a,s=(h=new l(t,i.row,i.column)).getCurrentToken(),g=t.selection.toOrientedRange();if(s&&/comment/.test(s.type)){for(var u,I;s&&/comment/.test(s.type);){if(-1!=(A=s.value.indexOf(o.start))){var d=h.getCurrentTokenRow(),C=h.getCurrentTokenColumn()+A;u=new c(d,C,d,C+o.start.length);break}s=h.stepBackward()}var h;for(s=(h=new l(t,i.row,i.column)).getCurrentToken();s&&/comment/.test(s.type);){var A;if(-1!=(A=s.value.indexOf(o.end))){d=h.getCurrentTokenRow(),C=h.getCurrentTokenColumn()+A,I=new c(d,C,d,C+o.end.length);break}s=h.stepForward()}I&&t.remove(I),u&&(t.remove(u),r=u.start.row,a=-o.start.length)}else a=o.start.length,r=n.start.row,t.insert(n.end,o.end),t.insert(n.start,o.start);g.start.row==r&&(g.start.column+=a),g.end.row==r&&(g.end.column+=a),t.selection.fromOrientedRange(g)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],o=n.prototype.$id,r=i.$modes[o];r||(i.$modes[o]=r=new n),i.$modes[t]||(i.$modes[t]=r),this.$embeds.push(t),this.$modes[t]=r}var a=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<a.length;t++)!function(e){var n=a[t],i=e[n];e[a[t]]=function(){return this.$delegator(n,arguments,i)}}(this)},this.$delegator=function(e,t,n){var i=t[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])&&(r=this.$modes[i[2][i[2].length-1]]))return r[e].apply(r,[i[1]].concat([].slice.call(t,1)));i=i[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var r,a=i.split(this.$embeds[o]);if(!a[0]&&a[1])return t[0]=a[1],(r=this.$modes[this.$embeds[o]])[e].apply(r,t)}var s=n.apply(this,t);return n?s:void 0},this.transformAction=function(e,t,n,i,o){if(this.$behaviour){var r=this.$behaviour.getBehaviours();for(var a in r)if(r[a][t]){var s=r[a][t].apply(this,arguments);if(s)return s}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var i in t)for(var o=t[i],r=0,a=o.length;r<a;r++)if("string"==typeof o[r].token)/keyword|support|storage/.test(o[r].token)&&n.push(o[r].regex);else if("object"==typeof o[r].token)for(var s=0,g=o[r].token.length;s<g;s++)/keyword|support|storage/.test(o[r].token[s])&&(i=o[r].regex.match(/\(.+?\)/g)[s],n.push(i.substr(1,i.length-2)));this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,i){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(u.prototype),t.Mode=u}),define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var i=t.start.row,o=t.start.column,r=e[i]||"";switch(t.action){case"insert":if(1===t.lines.length)e[i]=r.substring(0,o)+t.lines[0]+r.substring(o);else{var a=[i,1].concat(t.lines);e.splice.apply(e,a),e[i]=r.substring(0,o)+e[i],e[i+t.lines.length-1]+=r.substring(o)}break;case"remove":var s=t.end.column,g=t.end.row;i===g?e[i]=r.substring(0,o)+r.substring(s):e.splice(i,g-i+1,r.substring(0,o)+e[g].substring(s))}}}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,r=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){return e.row<t.row||e.row==t.row&&(n?e.column<=t.column:e.column<t.column)}function t(t,n,i){var o="insert"==t.action,r=(o?1:-1)*(t.end.row-t.start.row),a=(o?1:-1)*(t.end.column-t.start.column),s=t.start,g=o?s:t.end;return e(n,s,i)?{row:n.row,column:n.column}:e(g,n,!i)?{row:n.row+r,column:n.column+(n.row==g.row?a:0)}:{row:s.row,column:s.column}}i.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(!(e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row)){var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var o={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:o,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(r.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./apply_delta").applyDelta,r=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,s=e("./anchor").Anchor,g=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){i.implement(this,r),this.setValue=function(e){var t=this.getLength()-1;this.remove(new a(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new s(this,e,t)},this.$split=0==="aaa".split(/a/).length?function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[t]},!0),this.clonePos(i)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var i=this.getLine(e);return null==t&&(t=i.length),{row:e,column:t=Math.min(Math.max(t,0),i.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),n=this.$lines[--e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),i={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:t}),this.clonePos(i)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var i=this.clippedPos(e,t),o=this.clippedPos(e,n);return this.applyDelta({start:i,end:o,action:"remove",lines:this.getLinesForRange({start:i,end:o})},!0),this.clonePos(i)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,i=t<this.getLength()-1,o=n?e-1:e,r=n?this.getLine(o).length:0,s=i?t+1:t,g=i?0:this.getLine(s).length,l=new a(o,r,s,g),c=this.$lines.slice(e,t+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),c},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof a||(e=a.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!a.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(o(this.$lines,e,t),this._signal("change",e)))},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,i=n.length-t+1,o=e.start.row,r=e.start.column,a=0,s=0;a<i;a=s){var g=n.slice(a,s+=t-1);g.push(""),this.applyDelta({start:this.pos(o+a,r),end:this.pos(o+s,r=0),action:e.action,lines:g},!0)}e.lines=n.slice(a),e.start.row=o+a,e.start.column=r,this.applyDelta(e,!0)},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=t||0,r=n.length;o<r;o++)if((e-=n[o].length+i)<0)return{row:o,column:e+n[o].length+i};return{row:r-1,column:e+n[r-1].length+i}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=0,r=Math.min(e.row,n.length),a=t||0;a<r;++a)o+=n[a].length+i;return o+e.column}}).call(g.prototype),t.Document=g}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,r=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,i=-1,o=n.doc,r=t;n.lines[t];)t++;var a=o.getLength(),s=0;for(n.running=!1;t<a;){n.$tokenizeRow(t),i=t;do{t++}while(n.lines[t]);if(++s%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==i&&(i=t),r<=i&&n.fireUpdateEvent(r,i)}}};(function(){i.implement(this,o),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){this._signal("update",{data:{first:e,last:t}})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.tokenizer.getLineTokens(t,this.states[e-1],e);return this.states[e]+""!=n.state+""?(this.states[e]=n.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=n.tokens}}).call(r.prototype),t.BackgroundTokenizer=r}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var i=e("./lib/lang"),o=(e("./lib/oop"),e("./range").Range),r=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,r){if(this.regExp)for(var a=r.lastRow,s=r.firstRow;s<=a;s++){var g=this.cache[s];null==g&&((g=i.getMatchOffsets(n.getLine(s),this.regExp)).length>this.MAX_RANGES&&(g=g.slice(0,this.MAX_RANGES)),g=g.map(function(e){return new o(s,e.offset,s,e.offset+e.length)}),this.cache[s]=g.length?g:"");for(var l=g.length;l--;)t.drawSingleLineMarker(e,g[l].toScreenRange(n),this.clazz,r)}}}).call(r.prototype),t.SearchHighlight=r}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new o(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var o=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var i,o,r=0,a=this.folds,s=!0;null==t&&(t=this.end.row,n=this.end.column);for(var g=0;g<a.length;g++){if(-1==(o=(i=a[g]).range.compareStart(t,n)))return void e(null,t,n,r,s);if(!e(null,i.start.row,i.start.column,r,s)&&e(i.placeholder,i.start.row,i.start.column,r)||0===o)return;s=!i.sameRow,r=i.end.column}e(null,t,n,r,s)},this.getNextFoldTo=function(e,t){for(var n,i,o=0;o<this.folds.length;o++){if(-1==(i=(n=this.folds[o]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,o,r=this.getNextFoldTo(e,t);if(r)if(i=r.fold,"inside"==r.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){var a=(o=this.folds).indexOf(i);for(0===a&&(this.start.column+=n);a<o.length;a++){if((i=o[a]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var o=this.folds,r=this.foldData,a=o.indexOf(n.fold),s=o[a-1];this.end.row=s.end.row,this.end.column=s.end.column;var g=new i(r,o=o.splice(a,o.length-a));return r.splice(r.indexOf(this)+1,0,g),g},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((e-=i.start.column-t)<0)return{row:i.start.row,column:i.start.column+e};if((e-=i.placeholder.length)<0)return i.start;t=i.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("./range").Range.comparePoints,o=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){for(var o=this.ranges,r=n||0;r<o.length;r++){var a=o[r],s=i(e,a.end);if(!(s>0)){var g=i(e,a.start);return 0===s?t&&0!==g?-r-2:r:g>0||0===g&&!t?r:-r-1}}return-r-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var i=this.pointIndex(e.end,t,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],n=this.ranges,o=(n=n.sort(function(e,t){return i(e.start,t.start)}))[0],r=1;r<n.length;r++){var a=i((e=o).end,(o=n[r]).start);a<0||(0!=a||e.isEmpty()||o.isEmpty())&&(i(e.end,o.end)<0&&(e.end.row=o.end.row,e.end.column=o.end.column),n.splice(r,1),t.push(o),o=e,r--)}return this.ranges=n,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});i<0&&(i=-i-1);var o=this.pointIndex({row:t,column:0},i);o<0&&(o=-o-1);for(var r=[],a=i;a<o;a++)r.push(n[a]);return r},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,i=t.row,o=n.row,r=this.ranges,a=0,s=r.length;a<s&&!((c=r[a]).end.row>=i);a++);if("insert"==e.action){for(var g=o-i,l=-t.column+n.column;a<s&&!((c=r[a]).start.row>i);a++)if(c.start.row==i&&c.start.column>=t.column&&(c.start.column!=t.column||!this.$insertRight)&&(c.start.column+=l,c.start.row+=g),c.end.row==i&&c.end.column>=t.column){if(c.end.column==t.column&&this.$insertRight)continue;c.end.column==t.column&&l>0&&a<s-1&&c.end.column>c.start.column&&c.end.column==r[a+1].start.column&&(c.end.column-=l),c.end.column+=l,c.end.row+=g}}else for(g=i-o,l=t.column-n.column;a<s&&!((c=r[a]).start.row>o);a++)c.end.row<o&&(i<c.end.row||i==c.end.row&&t.column<c.end.column)?(c.end.row=i,c.end.column=t.column):c.end.row==o?c.end.column<=n.column?(g||c.end.column>t.column)&&(c.end.column=t.column,c.end.row=t.row):(c.end.column+=l,c.end.row+=g):c.end.row>o&&(c.end.row+=g),c.start.row<o&&(i<c.start.row||i==c.start.row&&t.column<c.start.column)?(c.start.row=i,c.start.column=t.column):c.start.row==o?c.start.column<=n.column?(g||c.start.column>t.column)&&(c.start.column=t.column,c.start.row=t.row):(c.start.column+=l,c.start.row+=g):c.start.row>o&&(c.start.row+=g);if(0!=g&&a<s)for(;a<s;a++){var c;(c=r[a]).start.row+=g,c.end.row+=g}}}).call(o.prototype),t.RangeList=o}),define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function i(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function o(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}e("../range");var r=e("../range_list").RangeList,a=e("../lib/oop"),s=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};a.inherits(s,r),(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new s(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);!function(e,t){i(e.start,t),i(e.end,t)}(e,this.start);for(var t=e.start.row,n=e.start.column,o=0,r=-1;o<this.subFolds.length&&1==(r=this.subFolds[o].range.compare(t,n));o++);if(0==r)return this.subFolds[o].addSubFold(e);t=e.range.end.row,n=e.range.end.column;var a=o;for(r=-1;a<this.subFolds.length&&1==(r=this.subFolds[a].range.compare(t,n));a++);if(0==r)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);return this.subFolds.splice(o,a-o,e),e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){o(e.start,t),o(e.end,t)}(e,this.start)}}).call(s.prototype)}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";var i=e("../range").Range,o=e("./fold_line").FoldLine,r=e("./fold").Fold,a=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var o=i.folds,r=0;r<o.length;r++){var a=o[r];if(a.range.contains(e,t)){if(1==n&&a.range.isEnd(e,t))continue;if(-1==n&&a.range.isStart(e,t))continue;return a}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,i=this.$foldData,o=[];t.column+=1,n.column-=1;for(var r=0;r<i.length;r++){var a=i[r].range.compareRange(e);if(2!=a){if(-2==a)break;for(var s=i[r].folds,g=0;g<s.length;g++){var l=s[g];if(-2==(a=l.range.compareRange(e)))break;if(2!=a){if(42==a)break;o.push(l)}}}}return t.column-=1,n.column+=1,o},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e},this.getFoldStringAt=function(e,t,n,i){if(!(i=i||this.getFoldLine(e)))return null;for(var o,r,a={end:{column:0}},s=0;s<i.folds.length;s++){var g=(r=i.folds[s]).range.compareEnd(e,t);if(-1==g){o=this.getLine(r.start.row).substring(a.end.column,r.start.column);break}if(0===g)return null;a=r}return o||(o=this.getLine(r.start.row).substring(a.end.column)),-1==n?o.substring(0,t-a.end.column):1==n?o.substring(t-a.end.column):o},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var o=n[i];if(o.start.row<=e&&o.end.row>=e)return o;if(o.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var o=n[i];if(o.end.row>=e)return o}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,o=0;o<n.length;o++){var r=n[o],a=r.end.row,s=r.start.row;if(a>=t){s<t&&(s>=e?i-=t-s:i=0);break}a>=e&&(i-=s>=e?a-s:a-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n,i=this.$foldData,a=!1;e instanceof r?n=e:(n=new r(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var s=n.start.row,g=n.start.column,l=n.end.row,c=n.end.column;if(s<l||s==l&&g<=c-2){var u=this.getFoldAt(s,g,1),I=this.getFoldAt(l,c,-1);if(u&&I==u)return u.addSubFold(n);u&&!u.range.isStart(s,g)&&this.removeFold(u),I&&!I.range.isEnd(l,c)&&this.removeFold(I);var d=this.getFoldsInRange(n.range);d.length>0&&(this.removeFolds(d),d.forEach(function(e){n.addSubFold(e)}));for(var C=0;C<i.length;C++){var h=i[C];if(l==h.start.row){h.addFold(n),a=!0;break}if(s==h.end.row){if(h.addFold(n),a=!0,!n.sameRow){var A=i[C+1];if(A&&A.start.row==l){h.merge(A);break}}break}if(l<=h.start.row)break}return a||(h=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(h.start.row,h.start.row):this.$updateRowLengthCache(h.start.row,h.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,o=this.$foldData,r=t.folds;if(1==r.length)o.splice(o.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))r.pop(),t.end.row=r[r.length-1].end.row,t.end.column=r[r.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))r.shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column;else if(e.sameRow)r.splice(r.indexOf(e),1);else{var a=t.split(e.start.row,e.start.column);(r=a.folds).shift(),a.start.row=r[0].start.row,a.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,o;if(null==e?(n=new i(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new i(e,0,e,this.getLine(e).length):"row"in e?i.fromPoints(e,e):e,o=this.getFoldsInRangeList(n),t)this.removeFolds(o);else for(var r=o;r.length;)this.expandFolds(r),r=this.getFoldsInRangeList(n);if(o.length)return o},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,o){null==i&&(i=e.start.row),null==o&&(o=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var r=this.doc,a="";return e.walk(function(e,t,n,s){if(!(t<i)){if(t==i){if(n<o)return;s=Math.max(o,s)}a+=null!=e?e:r.getLine(t).substring(s,n)}},t,n),a},this.getDisplayLine=function(e,t,n,i){var o,r=this.getFoldLine(e);return r?this.getFoldDisplayLine(r,e,t,n,i):(o=this.doc.getLine(e)).substring(i||0,t||o.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new o(e,n)})},this.toggleFold=function(e){var t,n,i=this.selection.getRange();if(i.isEmpty()){var o=i.start;if(t=this.getFoldAt(o.row,o.column))return void this.expandFold(t);(n=this.findMatchingBracket(o))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(o.row,o.column)||i}else{var r=this.getFoldsInRange(i);if(e&&r.length)return void this.expandFolds(r);1==r.length&&(t=r[0])}if(t||(t=this.getFoldAt(i.start.row,i.start.column)),t&&t.range.toString()==i.toString())this.expandFold(t);else{var a="...";if(!i.isMultiLine()){if((a=this.getTextRange(i)).length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,i)}},this.getCommentFoldRange=function(e,t,n){var o=new a(this,e,t),r=o.getCurrentToken(),s=r.type;if(r&&/^comment|string/.test(s)){"comment"==(s=s.match(/comment|string/)[0])&&(s+="|doc-start");var g=new RegExp(s),l=new i;if(1!=n){do{r=o.stepBackward()}while(r&&g.test(r.type));o.stepForward()}if(l.start.row=o.getCurrentTokenRow(),l.start.column=o.getCurrentTokenColumn()+2,o=new a(this,e,t),-1!=n){var c=-1;do{if(r=o.stepForward(),-1==c){var u=this.getState(o.$row);g.test(u)||(c=o.$row)}else if(o.$row>c)break}while(r&&g.test(r.type));r=o.stepBackward()}else r=o.getCurrentToken();return l.end.row=o.getCurrentTokenRow(),l.end.column=o.getCurrentTokenColumn()+r.value.length-2,l}},this.foldAll=function(e,t,n){null==n&&(n=1e5);var i=this.foldWidgets;if(i){t=t||this.getLength();for(var o=e=e||0;o<t;o++)if(null==i[o]&&(i[o]=this.getFoldWidget(o)),"start"==i[o]){var r=this.getFoldWidgetRange(o);if(r&&r.isMultiLine()&&r.end.row<=t&&r.start.row>=e){o=r.end.row;try{var a=this.addFold("...",r);a&&(a.collapseChildren=n)}catch(s){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,o=e-1;o>=0;){var r=n[o];if(null==r&&(r=n[o]=this.getFoldWidget(o)),"start"==r){var a=this.getFoldWidgetRange(o);if(i||(i=a),a&&a.end.row>=e)break}o--}return{range:-1!==o&&a,firstRange:i}},this.onFoldWidgetClick=function(e,t){if(!this.$toggleFoldWidget(e,{children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey})){var n=t.target||t.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),i=this.getLine(e),o="end"===n?-1:1,r=this.getFoldAt(e,-1===o?0:i.length,o);if(r)return t.children||t.all?this.removeFold(r):this.expandFold(r),r;var a=this.getFoldWidgetRange(e,!0);if(a&&!a.isMultiLine()&&(r=this.getFoldAt(a.start.row,a.start.column,1))&&a.isEqual(r.range))return this.removeFold(r),r;if(t.siblings){var s=this.getParentFoldRangeData(e);if(s.range)var g=s.range.start.row+1,l=s.range.end.row;this.foldAll(g,l,t.all?1e4:0)}else t.children?(l=a?a.end.row:this.getLength(),this.foldAll(e+1,l,t.all?1e4:0)):a&&(t.all&&(a.collapseChildren=1e4),this.addFold("...",a));return a}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var i=this.getParentFoldRangeData(t,!0);if(n=i.range||i.firstRange){var o=this.getFoldAt(t=n.start.row,this.getLine(t).length,1);o?this.removeFold(o):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var i=e("../token_iterator").TokenIterator,o=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,r=n.charAt(e.column-1),a=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(a||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},a=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!a)return null;if(a[1]){if(!(s=this.$findClosingBracket(a[1],e)))return null;t=o.fromPoints(e,s),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var s;if(!(s=this.$findOpeningBracket(a[2],e)))return null;t=o.fromPoints(s,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var o=this.$brackets[e],r=1,a=new i(this,t.row,t.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var g=t.column-a.getCurrentTokenColumn()-2,l=s.value;;){for(;g>=0;){var c=l.charAt(g);if(c==o){if(0==(r-=1))return{row:a.getCurrentTokenRow(),column:g+a.getCurrentTokenColumn()}}else c==e&&(r+=1);g-=1}do{s=a.stepBackward()}while(s&&!n.test(s.type));if(null==s)break;g=(l=s.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var o=this.$brackets[e],r=1,a=new i(this,t.row,t.column),s=a.getCurrentToken();if(s||(s=a.stepForward()),s){n||(n=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var g=t.column-a.getCurrentTokenColumn();;){for(var l=s.value,c=l.length;g<c;){var u=l.charAt(g);if(u==o){if(0==(r-=1))return{row:a.getCurrentTokenRow(),column:g+a.getCurrentTokenColumn()}}else u==e&&(r+=1);g+=1}do{s=a.stepForward()}while(s&&!n.test(s.type));if(null==s)break;g=0}return null}}}}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/lang"),r=e("./bidihandler").BidiHandler,a=e("./config"),s=e("./lib/event_emitter").EventEmitter,g=e("./selection").Selection,l=e("./mode/text").Mode,c=e("./range").Range,u=e("./document").Document,I=e("./background_tokenizer").BackgroundTokenizer,d=e("./search_highlight").SearchHighlight,C=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++C.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new u(e)),this.setDocument(e),this.selection=new g(this),this.$bidiHandler=new r(this),a.resetOptions(this),this.setMode(t),a._signal("session",this)};C.$uid=0,(function(){function t(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}i.implement(this,s),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;n<=i;){var o=n+i>>1,r=e[o];if(t>r)n=o+1;else{if(!(t<r))return o;i=o-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){this.$resetRowCache(e.data.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),o=0;if(null==t){var r=i.length-1;o=this.getLine(e).length}else for(r=0;r<i.length&&!((o+=i[r].value.length)>=t);r++);return(n=i[r])?(n.index=r,n.start=o-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,i){var o=this.$markerId++,r={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:o};return i?(this.$frontMarkers[o]=r,this._signal("changeFrontMarker")):(this.$backMarkers[o]=r,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new d(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,i){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var o=new c(e,0,t,1/0);return o.id=this.addMarker(o,n,"fullLine",i),o},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var o=this.tokenRe;else o=/^\s+$/.test(n.slice(t-1,t+1))?/\s/:this.nonTokenRe;var r=t;if(r>0){do{r--}while(r>=0&&n.charAt(r).match(o));r++}for(var a=t;a<n.length&&n.charAt(a).match(o);)a++;return new c(e,r,e,a)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){this.bgTokenizer.start(e.data.first),this._signal("tokenizerUpdate",e)},this.$modes=a.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,i=e.path}else i=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new l),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(t&&t());this.$modeId=i,a.loadModule(["mode",i],(function(e){if(this.$modeId!==i)return t&&t();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[i]=e,e.$id=i),this.$onChangeMode(e)),t&&t()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new I(n);var o=this;this.bgTokenizer.addEventListener("update",function(e){o._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){a.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,o=0,r=this.$foldData[o],a=r?r.start.row:1/0,s=t.length,g=0;g<s;g++){if(g>a){if((g=r.end.row+1)>=s)break;a=(r=this.$foldData[o++])?r.start.row:1/0}null==n[g]&&(n[g]=this.$getStringScreenWidth(t[g])[0]),n[g]>i&&(i=n[g])}this.screenWidth=i}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var i=e[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var i=e[n];("insert"==i.action||"remove"==i.action)&&this.doc.applyDelta(i)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var i,o,r=0;r<e.length;r++){var a=e[r];a.start&&(i?n(a)?(-1==i.compare((o=a.start).row,o.column)&&i.setStart(o),1==i.compare((o=a.end).row,o.column)&&i.setEnd(o)):-1==i.compare((o=a.start).row,o.column)&&(i=c.fromPoints(a.start,a.start)):i=n(a)?c.fromPoints(a.start,a.end):c.fromPoints(a.start,a.start))}return i},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var i=this.getTextRange(e),o=this.getFoldsInRange(e),r=c.fromPoints(t,t);if(n||(this.remove(e),(l=(g=e.start.row-e.end.row)?-e.end.column:e.start.column-e.end.column)&&(r.start.row==e.end.row&&r.start.column>e.end.column&&(r.start.column+=l),r.end.row==e.end.row&&r.end.column>e.end.column&&(r.end.column+=l)),g&&r.start.row>=e.end.row&&(r.start.row+=g,r.end.row+=g)),r.end=this.insert(r.start,i),o.length){var a=e.start,s=r.start,g=s.row-a.row,l=s.column-a.column;this.addFolds(o.map(function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=l),e.end.row==a.row&&(e.end.column+=l),e.start.row+=g,e.end.row+=g,e}))}return r},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;i<=t;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new c(0,0,0,0),i=this.getTabSize(),o=t.start.row;o<=t.end.row;++o){var r=this.getLine(o);n.start.row=o,n.end.row=o;for(var a=0;a<i&&" "==r.charAt(a);++a);a<i&&"\t"==r.charAt(a)?(n.start.column=a,n.end.column=a+1):(n.start.column=0,n.end.column=a),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((o=this.getRowFoldStart(e+n))<0)return 0;var i=o-e}else if(n>0){var o;if((o=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;i=o-t}else e=this.$clipRowToDocument(e),i=(t=this.$clipRowToDocument(t))-e+1;var r=new c(e,0,t,Number.MAX_VALUE),a=this.getFoldsInRange(r).map(function(e){return(e=e.clone()).start.row+=i,e.end.row+=i,e}),s=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,s),a.length&&this.addFolds(a),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var i=this.$constrainWrapLimit(e,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,i=e.start,o=e.end,r=i.row,a=o.row,s=a-r,g=null;if(this.$updating=!0,0!=s)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(r,s);var l=this.$foldData;g=this.getFoldsInRange(e),this.removeFolds(g);var c=0;if(h=this.getFoldLine(o.row)){h.addRemoveChars(o.row,o.column,i.column-o.column),h.shiftRow(-s);var u=this.getFoldLine(r);u&&u!==h&&(u.merge(h),h=u),c=l.indexOf(h)+1}for(;c<l.length;c++)(h=l[c]).start.row>=o.row&&h.shiftRow(-s);a=r}else{var I=Array(s);I.unshift(r,0);var d=t?this.$wrapData:this.$rowLengthCache;if(d.splice.apply(d,I),l=this.$foldData,c=0,h=this.getFoldLine(r)){var C=h.range.compareInside(i.row,i.column);0==C?(h=h.split(i.row,i.column))&&(h.shiftRow(s),h.addRemoveChars(a,0,o.column-i.column)):-1==C&&(h.addRemoveChars(r,0,o.column-i.column),h.shiftRow(s)),c=l.indexOf(h)+1}for(;c<l.length;c++){var h;(h=l[c]).start.row>=r&&h.shiftRow(s)}}else s=Math.abs(e.start.column-e.end.column),"remove"===n&&(g=this.getFoldsInRange(e),this.removeFolds(g),s=-s),(h=this.getFoldLine(r))&&h.addRemoveChars(r,i.column,s);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(r,a):this.$updateRowLengthCache(r,a),g},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var i,o,a=this.doc.getAllLines(),s=this.getTabSize(),g=this.$wrapData,l=this.$wrapLimit,c=e;for(t=Math.min(t,a.length-1);c<=t;)(o=this.getFoldLine(c,o))?(i=[],o.walk((function(e,t,o,s){var g;if(null!=e){(g=this.$getDisplayTokens(e,i.length))[0]=n;for(var l=1;l<g.length;l++)g[l]=r}else g=this.$getDisplayTokens(a[t].substring(s,o),i.length);i=i.concat(g)}).bind(this),o.end.row,a[o.end.row].length+1),g[o.start.row]=this.$computeWrapSplits(i,l,s),c=o.end.row+1):(i=this.$getDisplayTokens(a[c]),g[c]=this.$computeWrapSplits(i,l,s),c++)};var n=3,r=4,g=10,u=11,C=12;this.$computeWrapSplits=function(e,t,i){function o(){var t=0;if(0===A)return t;if(h)for(var n=0;n<e.length;n++){var o=e[n];if(o==g)t+=1;else{if(o!=u){if(o==C)continue;break}t+=i}}return d&&!1!==h&&(t+=i),Math.min(t,A)}function a(t){for(var n=t-c,i=c;i<t;i++){var r=e[i];12!==r&&2!==r||(n-=1)}s.length||(f=o(),s.indent=f),s.push(I+=n),c=t}if(0==e.length)return[];for(var s=[],l=e.length,c=0,I=0,d=this.$wrapAsCode,h=this.$indentedSoftWrap,A=t<=Math.max(2*i,8)||!1===h?0:Math.floor(t/2),f=0;l-c>t-f;){var m=c+t-f;if(e[m-1]>=g&&e[m]>=g)a(m);else if(e[m]!=n&&e[m]!=r){for(var p=Math.max(m-(t-(t>>2)),c-1);m>p&&e[m]<n;)m--;if(d){for(;m>p&&e[m]<n;)m--;for(;m>p&&9==e[m];)m--}else for(;m>p&&e[m]<g;)m--;m>p?a(++m):(2==e[m=c+t]&&m--,a(m-f))}else{for(;m!=c-1&&e[m]!=n;m--);if(m>c){a(m);continue}for(m=c+t;m<e.length&&e[m]==r;m++);if(m==e.length)break;a(m)}}return s},this.$getDisplayTokens=function(e,n){var i,o=[];n=n||0;for(var r=0;r<e.length;r++){var a=e.charCodeAt(r);if(9==a){i=this.getScreenTabSize(o.length+n),o.push(u);for(var s=1;s<i;s++)o.push(C)}else 32==a?o.push(g):a>39&&a<48||a>57&&a<64?o.push(9):a>=4352&&t(a)?o.push(1,2):o.push(1)}return o},this.$getStringScreenWidth=function(e,n,i){if(0==n)return[0,0];var o,r;for(null==n&&(n=1/0),i=i||0,r=0;r<e.length&&(9==(o=e.charCodeAt(r))?i+=this.getScreenTabSize(i):o>=4352&&t(o)?i+=2:i+=1,!(i>n));r++);return[i,r]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var i,o,r=0,a=0,s=0,g=0,l=this.$screenRowCache,c=this.$getRowCacheIndex(l,e),u=l.length;if(u&&c>=0){s=l[c],r=this.$docRowCache[c];var I=e>l[u-1]}else I=!u;for(var d=this.getLength()-1,C=this.getNextFoldLine(r),h=C?C.start.row:1/0;s<=e&&!(s+(g=this.getRowLength(r))>e||r>=d);)s+=g,++r>h&&(h=(C=this.getNextFoldLine(r=C.end.row+1,C))?C.start.row:1/0),I&&(this.$docRowCache.push(r),this.$screenRowCache.push(s));if(C&&C.start.row<=r)i=this.getFoldDisplayLine(C),r=C.start.row;else{if(s+g<=e||r>d)return{row:d,column:this.getLine(d).length};i=this.getLine(r),C=null}var A=0,f=Math.floor(e-s);if(this.$useWrapMode){var m=this.$wrapData[r];m&&(o=m[f],f>0&&m.length&&(A=m.indent,i=i.substring(a=m[f-1]||m[m.length-1])))}return void 0!==n&&this.$bidiHandler.isBidiRow(s+f,r,f)&&(t=this.$bidiHandler.offsetToCol(n)),a+=this.$getStringScreenWidth(i,t-A)[1],this.$useWrapMode&&a>=o&&(a=o-1),C?C.idxToPosition(a):{row:r,column:a}},this.documentToScreenPosition=function(e,t){if(void 0===t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);var i,o=0,r=null;(i=this.getFoldAt(e=n.row,t=n.column,1))&&(e=i.start.row,t=i.start.column);var a,s=0,g=this.$docRowCache,l=this.$getRowCacheIndex(g,e),c=g.length;if(c&&l>=0){s=g[l],o=this.$screenRowCache[l];var u=e>g[c-1]}else u=!c;for(var I=this.getNextFoldLine(s),d=I?I.start.row:1/0;s<e;){if(s>=d){if((a=I.end.row+1)>e)break;d=(I=this.getNextFoldLine(a,I))?I.start.row:1/0}else a=s+1;o+=this.getRowLength(s),s=a,u&&(this.$docRowCache.push(s),this.$screenRowCache.push(o))}var C="";I&&s>=d?(C=this.getFoldDisplayLine(I,e,t),r=I.start.row):(C=this.getLine(e).substring(0,t),r=e);var h=0;if(this.$useWrapMode){var A=this.$wrapData[r];if(A){for(var f=0;C.length>=A[f];)o++,f++;C=C.substring(A[f-1]||0,C.length),h=f>0?A.indent:0}}return{row:o,column:h+this.$getStringScreenWidth(C)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,o=(s=0,(t=this.$foldData[s++])?t.start.row:1/0);i<n;){var r=this.$wrapData[i];e+=r?r.length+1:1,++i>o&&(i=t.end.row+1,o=(t=this.$foldData[s++])?t.start.row:1/0)}else{e=this.getLength();for(var a=this.$foldData,s=0;s<a.length;s++)e-=(t=a[s]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,i){if(0===n)return[0,0];var o,r;for(n||(n=1/0),i=i||0,r=0;r<t.length&&!((i+="\t"===(o=t.charAt(r))?this.getScreenTabSize(i):e.getCharacterWidth(o))>n);r++);return[i,r]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=t}).call(C.prototype),e("./edit_session/folding").Folding.call(C.prototype),e("./edit_session/bracket_match").BracketMatch.call(C.prototype),a.defineOptions(C.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){e=parseInt(e),isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=C}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var i=e("./lib/lang"),o=e("./lib/oop"),r=e("./range").Range,a=function(){this.$options={}};(function(){this.set=function(e){return o.mixin(this.$options,e),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var i=null;return n.forEach(function(e,n,o,a){return i=new r(e,n,o,a),!(n==a&&t.start&&t.start.start&&0!=t.skipCurrent&&i.isEqual(t.start)&&(i=null,1))}),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,o=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),a=[],s=t.re;if(t.$isMultiLine){var g,l=s.length,c=o.length-l;e:for(var u=s.offset||0;u<=c;u++){for(var I=0;I<l;I++)if(-1==o[u+I].search(s[I]))continue e;var d=o[u],C=o[u+l-1],h=d.length-d.match(s[0])[0].length,A=C.match(s[l-1])[0].length;g&&g.end.row===u&&g.end.column>h||(a.push(g=new r(u,h,u+l-1,A)),l>2&&(u=u+l-2))}}else for(var f=0;f<o.length;f++){var m=i.getMatchOffsets(o[f],s);for(I=0;I<m.length;I++){var p=m[I];a.push(new r(f,p.offset,f,p.offset+p.length))}}if(n){var b=n.start.column,B=n.start.column;for(f=0,I=a.length-1;f<I&&a[f].start.column<b&&a[f].start.row==n.start.row;)f++;for(;f<I&&a[I].end.column>B&&a[I].end.row==n.end.row;)I--;for(a=a.slice(f,I+1),f=0,I=a.length;f<I;f++)a[f].start.row+=n.start.row,a[f].end.row+=n.start.row}return a},this.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var o=i.exec(e);if(!o||o[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var r=Math.min(e.length,e.length);r--;){var a=e[r];t[r]=a&&a.toLowerCase()!=a?t[r].toUpperCase():t[r].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=i.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var o=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,o);try{var r=new RegExp(n,o)}catch(a){r=!1}return e.re=r},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],o=0;o<n.length;o++)try{i.push(new RegExp(n[o],t))}catch(r){return!1}return i},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=1==t.backwards,o=0!=t.skipCurrent,r=t.range,a=t.start;a||(a=r?r[i?"end":"start"]:e.selection.getRange()),a.start&&(a=a[o!=i?"end":"start"]);var s=r?r.start.row:0,g=r?r.end.row:e.getLength()-1;if(i)var l=function(e){var n=a.row;if(!u(n,a.column,e)){for(n--;n>=s;n--)if(u(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=g,s=a.row;n>=s;n--)if(u(n,Number.MAX_VALUE,e))return}};else l=function(e){var n=a.row;if(!u(n,a.column,e)){for(n+=1;n<=g;n++)if(u(n,0,e))return;if(0!=t.wrap)for(n=s,g=a.row;n<=g;n++)if(u(n,0,e))return}};if(t.$isMultiLine)var c=n.length,u=function(t,o,r){var a=i?t-c+1:t;if(!(a<0)){var s=e.getLine(a),g=s.search(n[0]);if(!(!i&&g<o||-1===g)){for(var l=1;l<c;l++)if(-1==(s=e.getLine(a+l)).search(n[l]))return;var u=s.match(n[c-1])[0].length;if(!(i&&u>o))return!!r(a,g,a+c-1,u)||void 0}}};else u=i?function(t,i,o){var r,a=e.getLine(t),s=[],g=0;for(n.lastIndex=0;r=n.exec(a);){if(g=r.index,!(c=r[0].length)){if(g>=a.length)break;n.lastIndex=g+=1}if(r.index+c>i)break;s.push(r.index,c)}for(var l=s.length-1;l>=0;l-=2){var c,u=s[l-1];if(o(t,u,t,u+(c=s[l])))return!0}}:function(t,i,o){var r,a,s=e.getLine(t);for(n.lastIndex=i;a=n.exec(s);){var g=a[0].length;if(o(t,r=a.index,t,r+g))return!0;if(!g&&(n.lastIndex=r+=1,r>=s.length))return!1}};return{forEach:l}}}).call(a.prototype),t.Search=a}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function i(e,t){this.platform=t||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function o(e,t){i.call(this,e,t),this.$singleCommand=!1}var r=e("../lib/keys"),a=e("../lib/useragent"),s=r.KEY_MODS;o.prototype=i.prototype,(function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var i=this.commandKeyBinding;for(var o in i){var r=i[o];if(r==e)delete i[o];else if(Array.isArray(r)){var a=r.indexOf(e);-1!=a&&(r.splice(a,1),1==r.length&&(i[o]=r[0]))}}},this.bindKey=function(e,t,n){if("object"==typeof e&&e&&(null==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach(function(e){var i="";if(-1!=e.indexOf(" ")){var o=e.split(/\s+/);e=o.pop(),o.forEach(function(e){var t=this.parseKeys(e);this._addCommandToBinding(i+=(i?" ":"")+(s[t.hashId]+t.key),"chainKeys")},this),i+=" "}var r=this.parseKeys(e);this._addCommandToBinding(i+(s[r.hashId]+r.key),t,n)},this)},this._addCommandToBinding=function(t,n,i){var o,r=this.commandKeyBinding;if(n)if(!r[t]||this.$singleCommand)r[t]=n;else{Array.isArray(r[t])?-1!=(o=r[t].indexOf(n))&&r[t].splice(o,1):r[t]=[r[t]],"number"!=typeof i&&(i=e(n));var a=r[t];for(o=0;o<a.length&&!(e(a[o])>i);o++);a.splice(o,0,n)}else delete r[t]},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,a=t.length;a--;){var s=r.KEY_MODS[t[a]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+t[a]+" in "+e),!1;o|=s}return{key:n,hashId:o}},this.findKeyCommand=function(e,t){return this.commandKeyBinding[s[e]+t]},this.handleKeyboard=function(e,t,n,i){if(!(i<0)){var o=s[t]+n,r=this.commandKeyBinding[o];return e.$keyChain&&(e.$keyChain+=" "+o,r=this.commandKeyBinding[e.$keyChain]||r),!r||"chainKeys"!=r&&"chainKeys"!=r[r.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||i>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-o.length-1)),{command:r}):(e.$keyChain=e.$keyChain||o,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}).call(i.prototype),t.HashHandler=i,t.MultiHashHandler=o}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../keyboard/hash_handler").MultiHashHandler,r=e("../lib/event_emitter").EventEmitter,a=function(e,t){o.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};i.inherits(a,o),(function(){i.implement(this,r),this.exec=function(e,t,n){if(Array.isArray(e)){for(var i=e.length;i--;)if(this.exec(e[i],t,n))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var o={editor:t,command:e,args:n};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),!1!==o.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(e){this.macro.push([e.command,e.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}).call(a.prototype),t.CommandManager=a}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function i(e,t){return{win:e,mac:t}}var o=e("../lib/lang"),r=e("../config"),a=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(e){r.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","F4"),exec:function(e){r.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Shift-F4"),exec:function(e){r.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t&&(t=parseInt(prompt("Enter line number:"),10)),isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:i("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(e){r.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:i("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(e){},readOnly:!0},{name:"cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(e){r.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",bindKey:i("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",bindKey:i("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(o.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:i("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:i(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),r=e.session.doc.getLine(n.row).length,s=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,g=e.session.doc.getLine(n.row),l=n.row+1;l<=i.row+1;l++){var c=o.stringTrimLeft(o.stringTrimRight(e.session.doc.getLine(l)));0!==c.length&&(c=" "+c),g+=c}i.row+1<e.session.doc.getLength()-1&&(g+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new a(n.row,0,i.row+2,0),g),s>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+s)):(r=e.session.doc.getLine(n.row).length>r?r+1:r,e.selection.moveCursorTo(n.row,r))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:i(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,i=e.selection.rangeList.ranges,o=[];i.length<1&&(i=[e.selection.getRange()]);for(var r=0;r<i.length;r++)r==i.length-1&&(i[r].end.row!==t||i[r].end.column!==n)&&o.push(new a(i[r].end.row,i[r].end.column,t,n)),0===r?(0!==i[r].start.row||0!==i[r].start.column)&&o.push(new a(0,0,i[r].start.row,i[r].start.column)):o.push(new a(i[r-1].end.row,i[r-1].end.column,i[r].start.row,i[r].start.column));for(e.exitMultiSelectMode(),e.clearSelection(),r=0;r<o.length;r++)e.selection.addRange(o[r],!1)},readOnly:!0,scrollIntoView:"none"}]}),define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";n.exports={lineMode:!1}}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/lang"),a=e("./lib/useragent"),s=e("./keyboard/textinput").TextInput,g=e("./mouse/mouse_handler").MouseHandler,l=e("./mouse/fold_handler").FoldHandler,c=e("./keyboard/keybinding").KeyBinding,u=e("./edit_session").EditSession,I=e("./search").Search,d=e("./range").Range,C=e("./lib/event_emitter").EventEmitter,h=e("./commands/command_manager").CommandManager,A=e("./commands/default_commands").commands,f=e("./config"),m=e("./token_iterator").TokenIterator,p=e("./clipboard"),b=function(e,t,n){var i=e.getContainerElement();this.container=i,this.renderer=e,this.id="editor"+ ++b.$uid,this.commands=new h(a.isMac?"mac":"win",A),"object"==typeof document&&(this.textInput=new s(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new g(this),new l(this)),this.keyBinding=new c(this),this.$search=(new I).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall((function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||n&&n.session||new u("")),f.resetOptions(this),n&&this.setOptions(n),f._signal("editor",this)};b.$uid=0,(function(){i.implement(this,C),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),o=this.renderer.layerConfig;(i.start.row>=o.lastRow||i.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var r=this.selection.toJSON();this.curOp.selectionAfter=r,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(r),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,i=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var o=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(t.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;f.loadModule(["keybinding",e],function(i){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(i&&i.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=t.findMatchingBracket(e.getCursorPosition());if(n)var i=new d(n.row,n.column,n.row,n.column+1);else t.$mode.getMatching&&(i=t.$mode.getMatching(e.session));i&&(t.$bracketHighlight=t.addMarker(i,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),i=new m(e.session,n.row,n.column),o=i.getCurrentToken();if(!o||!/\b(?:tag-open|tag-name)/.test(o.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1==o.type.indexOf("tag-open")||(o=i.stepForward())){var r=o.value,a=0,s=i.stepBackward();if("<"==s.value)do{s=o,(o=i.stepForward())&&o.value===r&&-1!==o.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(o&&a>=0);else{do{o=s,s=i.stepBackward(),o&&o.value===r&&-1!==o.type.indexOf("tag-name")&&("<"===s.value?a++:"</"===s.value&&a--)}while(s&&a<=0);i.stepForward()}if(!o)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var g=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),c=new d(g,l,g,l+o.value.length),u=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&null!=u&&0!==c.compareRange(u.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(c,"ace_bracket","text"))}}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.isFocused()||e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){this.renderer.updateLines(e.start.row,e.start.row==e.end.row?e.end.row:1/0,this.session.$useWrapMode),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new d(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}var o=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(o),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,i=t.end.column,o=e.getLine(t.start.row),r=o.substring(n,i);if(!(r.length>5e3)&&/[\w\d]/.test(r)){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r}),s=o.substring(n-1,i+1);if(a.test(s))return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),o=0;o<i.length;o++){var r=i[o];o&&i[o-1].start.row==r.start.row||(e+=this.session.getLine(r.start.row)+t)}}var a={text:e};return this._signal("copy",a),p.lineMode=n?a.text:"",a.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){this.commands.exec("paste",this,{text:e,event:t})},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t==p.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach(function(e){i.insert({row:e.start.row,column:0},t)});else{var o=t.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(o.length>r.length||o.length<2||!o[1])return this.commands.exec("insertstring",this,t);for(var a=r.length;a--;){var s=r[a];s.isEmpty()||i.remove(s),i.insert(s.start,o[a])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,i=n.getMode(),o=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var r=i.transformAction(n.getState(o.row),"insertion",this,n,e);r&&(e!==r.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=r.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty())this.session.getOverwrite()&&-1==e.indexOf("\n")&&((a=new d.fromPoints(o,o)).end.column+=e.length,this.session.remove(a));else{var a=this.getSelectionRange();o=this.session.remove(a),this.clearSelection()}if("\n"==e||"\r\n"==e){var s=n.getLine(o.row);if(o.column>s.search(/\S|$/)){var g=s.substr(o.column).search(/\S|$/);n.doc.removeInLine(o.row,o.column,o.column+g)}}this.clearSelection();var l=o.column,c=n.getState(o.row),u=(s=n.getLine(o.row),i.checkOutdent(c,s,e));if(n.insert(o,e),r&&r.selection&&this.selection.setSelectionRange(2==r.selection.length?new d(o.row,l+r.selection[0],o.row,l+r.selection[1]):new d(o.row+r.selection[0],r.selection[1],o.row+r.selection[2],r.selection[3])),n.getDocument().isNewLine(e)){var I=i.getNextLineIndent(c,s.slice(0,o.column),n.getTabString());n.insert({row:o.row+1,column:0},I)}u&&i.autoOutdent(c,n,o.row)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,this.selection.setRange(n),!e&&!n.isEmpty()&&this.remove()),(e||!this.selection.isEmpty())&&this.insert(e,!0),(t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),o=n.getMode().transformAction(i,"deletion",this,n,t);if(0===t.end.column){var r=n.getTextRange(t);if("\n"==r[r.length-1]){var a=n.getLine(t.end.row);/^\s+$/.test(a)&&(t.end.column=a.length)}}o&&(t=o)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,o=this.session.getLine(e.row);t<o.length?(n=o.charAt(t)+o.charAt(t-1),i=new d(e.row,t-1,e.row,t+1)):(n=o.charAt(t-1)+o.charAt(t-2),i=new d(e.row,t-2,e.row,t)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n))return c=this.$getSelectedRows(),void e.indentRows(c.first,c.last,"\t")}var i=e.getLine(t.start.row),o=t.start,a=e.getTabSize(),s=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var g=r.stringRepeat(" ",l=a-s%a);else{for(var l=s%a;" "==i[t.start.column-1]&&l;)t.start.column--,l--;this.selection.setSelectionRange(t),g="\t"}return this.insert(g)}var c=this.$getSelectedRows();e.indentRows(c.first,c.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var o=new d(0,0,0,0);for(i=e.first;i<=e.last;i++){var r=t.getLine(i);o.start.row=i,o.end.row=i,o.end.column=r.length,t.replace(o,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(e);n.lastIndex<t;){var o=n.exec(i);if(o.index<=t&&o.index+o[0].length>=t)return{value:o[0],start:o.index,end:o.index+o[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new d(t,n-1,t,n),o=this.session.getTextRange(i);if(!isNaN(parseFloat(o))&&isFinite(o)){var r=this.getNumberAt(t,n);if(r){var a=r.value.indexOf(".")>=0?r.start+r.value.indexOf(".")+1:r.end,s=r.start+r.value.length-a,g=parseFloat(r.value);g*=Math.pow(10,s),g+=e*=a!==r.end&&n<a?Math.pow(10,r.end-n-1):Math.pow(10,r.end-n);var l=(g/=Math.pow(10,s)).toFixed(s),c=new d(t,r.start,t,r.end);this.session.replace(c,l),this.moveCursorTo(t,Math.max(r.start+1,n+l.length-r.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,o=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),a=t-i-1;a<0&&(a=0);var s=0,g=0,l=this;n.match(/[A-Za-z0-9_]+/)&&o.forEach(function(t,o){g=s+t.length,a>=s&&a<=g&&(n=t,l.selection.clearSelection(),l.moveCursorTo(e,s+i),l.selection.selectTo(e,g+i)),s=g});for(var c,u=this.$toggleWordPairs,I=0;I<u.length;I++)for(var d=u[I],C=0;C<=1;C++){var h=+!C,A=n.match(new RegExp("^\\s?_?("+r.escapeRegExp(d[C])+")\\s?$","i"));A&&n.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(A[1])+")($|\\s)","g"))&&(c=n.replace(new RegExp(r.escapeRegExp(d[C]),"i"),function(e){var t=d[h];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+d[h].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(c),c="")}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),i=e.isBackwards();if(n.isEmpty()){var o=n.start.row;t.duplicateLines(o,o)}else{var r=i?n.start:n.end,a=t.insert(r,t.getTextRange(n),!1);n.start=r,n.end=a,e.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,i,o=this.selection;if(!o.inMultiSelectMode||this.inVirtualSelectionMode){var r=o.toOrientedRange();n=this.$getSelectedRows(r),i=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(i=0),r.moveBy(i,0),o.fromOrientedRange(r)}else{var a=o.rangeList.ranges;o.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,g=0,l=a.length,c=0;c<l;c++){var u=c;a[c].moveBy(s,0);for(var I=(n=this.$getSelectedRows(a[c])).first,d=n.last;++c<l;){g&&a[c].moveBy(g,0);var C=this.$getSelectedRows(a[c]);if(t&&C.first!=d)break;if(!t&&C.first>d+1)break;d=C.last}for(c--,s=this.session.$moveLines(I,d,t?0:e),t&&-1==e&&(u=c+1);u<=c;)a[u].moveBy(s,0),u++;t||(s=0),g+=s}o.fromOrientedRange(o.ranges[0]),o.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,o=e*Math.floor(i.height/i.lineHeight);!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(o,0)}):!1===t&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection());var r=n.scrollTop;n.scrollBy(0,o*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(r)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),i=new m(this.session,n.row,n.column),o=i.getCurrentToken(),r=o||i.stepForward();if(r){var a,s,g=!1,l={},c=n.column-r.start,u={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;c<r.value.length&&!g;c++)if(u[r.value[c]])switch(s=u[r.value[c]]+"."+r.type.replace("rparen","lparen"),isNaN(l[s])&&(l[s]=0),r.value[c]){case"(":case"[":case"{":l[s]++;break;case")":case"]":case"}":l[s]--,-1===l[s]&&(a="bracket",g=!0)}}else-1!==r.type.indexOf("tag-name")&&(isNaN(l[r.value])&&(l[r.value]=0),"<"===o.value?l[r.value]++:"</"===o.value&&l[r.value]--,-1===l[r.value]&&(a="tag",g=!0));g||(o=r,r=i.stepForward(),c=0)}while(r&&!g);if(a){var I,C;if("bracket"===a)(I=this.session.getBracketRange(n))||(C=(I=new d(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+c-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+c-1)).start,(t||C.row===n.row&&Math.abs(C.column-n.column)<2)&&(I=this.session.getBracketRange(C)));else if("tag"===a){if(!r||-1===r.type.indexOf("tag-name"))return;var h=r.value;if(0===(I=new d(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column)){g=!1;do{r=o,(o=i.stepBackward())&&(-1!==o.type.indexOf("tag-close")&&I.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),r.value===h&&-1!==r.type.indexOf("tag-name")&&("<"===o.value?l[h]++:"</"===o.value&&l[h]--,0===l[h]&&(g=!0)))}while(o&&!g)}r&&r.type.indexOf("tag-name")&&(C=I.start).row==n.row&&Math.abs(C.column-n.column)<2&&(C=I.end)}(C=I&&I.cursor||C)&&(e?I&&t?this.selection.setRange(I):I&&I.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(C.row,C.column):this.selection.moveTo(C.row,C.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),i):i},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var o=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=n.length-1;r>=0;--r)this.$tryReplace(n[r],e)&&i++;return this.selection.setSelectionRange(o),i},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var o=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(o)||this.$search.$options.needle)||(o=this.session.getWordRange(o.start.row,o.start.column),e=this.session.getTextRange(o)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:o});var r=this.$search.find(this.session);return t.preventScroll?r:r?(this.revealRange(r,n),r):(t.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var o=this.$scrollAnchor;o.style.cssText="position:absolute",this.container.insertBefore(o,this.container.firstChild);var r=this.on("changeSelection",function(){i=!0}),a=this.renderer.on("beforeRender",function(){i&&(t=n.renderer.container.getBoundingClientRect())}),s=this.renderer.on("afterRender",function(){if(i&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,r=e.$cursorLayer.$pixelPos,a=e.layerConfig,s=r.top-a.offset;null!=(i=r.top>=0&&s+t.top<0||!(r.top<a.height&&r.top+t.top+a.lineHeight>window.innerHeight)&&null)&&(o.style.top=s+"px",o.style.left=r.left+"px",o.style.height=a.lineHeight+"px",o.scrollIntoView(i)),i=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",r),this.renderer.off("afterRender",s),this.renderer.off("beforeRender",a))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,o.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}}).call(b.prototype),f.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?B.attach(this):B.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?B.attach(this):B.detach(this)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var B={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"\xb7":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=b}),define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e){return{row:e.row,column:e.column}}function o(e){if(e=e||this,Array.isArray(e))return e.map(o).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(r).join("\n"):r(e.value)),e.start&&(t+=r(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function r(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function a(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)if(h(t.start,e.end)>=0)l(t,e,-1);else{if(!(h(t.start,e.start)<=0))return null;l(e,t,1)}else if(n&&!i)if(h(t.start,e.end)>=0)l(t,e,-1);else{if(!(h(t.end,e.start)<=0))return null;l(e,t,-1)}else if(!n&&i)if(h(t.start,e.start)>=0)l(t,e,1);else{if(!(h(t.start,e.start)<=0))return null;l(e,t,1)}else if(!n&&!i)if(h(t.start,e.start)>=0)l(t,e,1);else{if(!(h(t.end,e.start)<=0))return null;l(e,t,-1)}return[t,e]}function s(e,t){for(var n=e.length;n--;)for(var i=0;i<t.length;i++)if(!a(e[n],t[i])){for(;n<e.length;){for(;i--;)a(t[i],e[n]);i=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function g(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)h(e.start,t.start)<0?l(t,e,1):l(e,t,1);else if(n&&!i)h(e.start,t.end)>=0?l(e,t,-1):h(e.start,t.start)<=0?l(t,e,1):(l(e,C.fromPoints(t.start,e.start),-1),l(t,e,1));else if(!n&&i)h(t.start,e.end)>=0?l(t,e,-1):h(t.start,e.start)<=0?l(e,t,1):(l(t,C.fromPoints(e.start,t.start),-1),l(e,t,1));else if(!n&&!i)if(h(t.start,e.end)>=0)l(t,e,-1);else{var o,r;if(!(h(t.end,e.start)<=0))return h(e.start,t.start)<0&&(o=e,e=u(e,t.start)),h(e.end,t.end)>0&&(r=u(e,t.end)),c(t.end,e.start,e.end,-1),r&&!o&&(e.lines=r.lines,e.start=r.start,e.end=r.end,r=e),[t,o,r].filter(Boolean);l(e,t,-1)}return[t,e]}function l(e,t,n){c(e.start,t.start,t.end,n),c(e.end,t.start,t.end,n)}function c(e,t,n,i){e.row==(1==i?t:n).row&&(e.column+=i*(n.column-t.column)),e.row+=i*(n.row-t.row)}function u(e,t){var n=e.lines,o=e.end;e.end=i(t);var r=e.end.row-e.start.row,a=n.splice(r,n.length),s=r?t.column:t.column-e.start.column;return n.push(a[0].substring(0,s)),a[0]=a[0].substr(s),{start:i(t),end:o,lines:a,action:e.action}}function I(e,t){t=function(e){return{start:i(e.start),end:i(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var o=e[n],r=0;r<o.length;r++){var a=g(o[r],t);t=a[0],2!=a.length&&(a[2]?(o.splice(r+1,1,a[1],a[2]),r++):a[1]||(o.splice(r,1),r--))}o.length||e.splice(n,1)}return e}var d=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){this.$fromUndo||e!=this.$lastDelta&&(!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var o=n[i][0];if(o.id<=e)break;o.id<t&&(o.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,i=n.length;i--;){var o=n[i];if(o.rev<e)return t&&(o=n[i+1]),o}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=null,o=0,r=n.length;r--;){var a=n[r][0];if(a.id<t&&!i&&(i=r+1),a.id<=e){o=r+1;break}}return n.slice(o,i)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var i=e[n];if(i&&!i[0].ignore){for(;n<t-1;){var o=s(e[n],e[n+1]);e[n]=o[0],e[n+1]=o[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),o=null;return i&&i.length&&(o=e.undoChanges(i,t),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,o}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);(function(e,t){for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<i.length;o++)I(e,i[o])})(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var i=this.$redoStack.pop(),o=null;return i&&(o=e.redoChanges(i,t),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,o},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?o(e):o(this.$undoStack)+"\n---\n"+o(this.$redoStack)}}).call(d.prototype);var C=e("./range").Range,h=C.comparePoints;t.UndoManager=d}),define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../lib/dom"),o=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){i.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var i=Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLength(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,o){var r=this.cellCache.pop();if(!r){var a=i.createElement("div");o&&o(a),this.element.appendChild(a),r={element:a,text:"",row:e}}return r.row=e,r}}).call(o.prototype),t.Lines=o}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,t,n){"use strict";function i(e){var t=document.createTextNode("");e.appendChild(t);var n=o.createElement("span");return e.appendChild(n),e}var o=e("../lib/dom"),r=e("../lib/oop"),a=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,g=e("./lines").Lines,l=function(e){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new g(this.element),this.$lines.$offsetCoefficient=1};(function(){r.implement(this,s),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.row,o=this.$annotations[i];o||(o=this.$annotations[i]={text:[]});var r=n.text;r=r?a.escapeHTML(r):n.html||"",-1===o.text.indexOf(r)&&o.text.push(r);var s=n.type;"error"==s?o.className=" ace_error":"warning"==s&&" ace_error"!=o.className?o.className=" ace_warning":"info"==s&&!o.className&&(o.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0!==n)if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var i=new Array(n+1);i.unshift(t,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,o=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=o,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var r=t.getNextFoldLine(n),a=r?r.start.row:1/0,s=null,g=-1,l=n;;){if(l>a&&(a=(r=t.getNextFoldLine(l=r.end.row+1,r))?r.start.row:1/0),l>o){for(;this.$lines.getLength()>g+1;)this.$lines.pop();break}(s=this.$lines.get(++g))?s.row=l:(s=this.$lines.createCell(l,e,this.session,i),this.$lines.push(s)),this.$renderCell(s,e,r,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,i=t.$firstLineNumber,o=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(o=t.getLength()+i-1);var r=n?n.getWidth(t,o,e):o.toString().length*e.characterWidth,a=this.$padding||this.$computePadding();(r+=a.left+a.right)!==this.gutterWidth&&!isNaN(r)&&(this.gutterWidth=r,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",r))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var i=t[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var o=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&o&&o.start.row==t[n-1].row))break;i=t[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);o>0;o--)this.$lines.shift();if(i>n)for(o=this.session.getFoldedRowCount(n+1,i);o>0;o--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(e,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var o=[],r=t,a=this.session.getNextFoldLine(r),s=a?a.start.row:1/0;r>s&&(s=(a=this.session.getNextFoldLine(r=a.end.row+1,a))?a.start.row:1/0),!(r>n);){var g=this.$lines.createCell(r,e,this.session,i);this.$renderCell(g,e,a,r),o.push(g),r++}return o},this.$renderCell=function(e,t,n,i){var r=e.element,a=this.session,s=r.childNodes[0],g=r.childNodes[1],l=a.$firstLineNumber,c=a.$breakpoints,u=a.$decorations,I=a.gutterRenderer||this.$renderer,d=this.$showFoldWidgets&&a.foldWidgets,C=n?n.start.row:Number.MAX_VALUE,h="ace_gutter-cell ";if(this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=C&&this.$cursorRow<=n.end.row)&&(h+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),c[i]&&(h+=c[i]),u[i]&&(h+=u[i]),this.$annotations[i]&&(h+=this.$annotations[i].className),r.className!=h&&(r.className=h),d){var A=d[i];null==A&&(A=d[i]=a.getFoldWidget(i))}A?(h="ace_fold-widget ace_"+A,g.className!=(h+="start"==A&&i==C&&i<n.end.row?" ace_closed":" ace_open")&&(g.className=h),o.setStyle(g.style,"height",t.lineHeight+"px"),o.setStyle(g.style,"display","inline-block")):g&&o.setStyle(g.style,"display","none");var f=(I?I.getText(a,i):i+l).toString();return f!==s.data&&(s.data=f),o.setStyle(e.element.style,"height",this.$lines.computeLineHeight(i,t,a)+"px"),o.setStyle(e.element.style,"top",this.$lines.computeLineTop(i,t,a)+"px"),e.text=f,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(l.prototype),t.Gutter=l}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../range").Range,o=e("../lib/dom"),r=function(e){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,i){return(e?1:0)|(t?2:0)|(n?4:0)|(i?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var i=this.markers[n];if(i.range){var o=i.range.clipRows(e.firstRow,e.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),i.renderer){var r=this.$getTop(o.start.row,e);i.renderer(t,o,this.$padding+o.start.column*e.characterWidth,r,e)}else"fullLine"==i.type?this.drawFullLineMarker(t,o,i.clazz,e):"screenLine"==i.type?this.drawScreenLineMarker(t,o,i.clazz,e):o.isMultiLine()?"text"==i.type?this.drawTextMarker(t,o,i.clazz,e):this.drawMultiLineMarker(t,o,i.clazz,e):this.drawSingleLineMarker(t,o,i.clazz+" ace_start ace_br15",e)}else i.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,o,r,a){for(var s=this.session,g=n.start.row,l=n.end.row,c=g,u=0,I=0,d=s.getScreenLastRowColumn(c),C=new i(c,n.start.column,c,I);c<=l;c++)C.start.row=C.end.row=c,C.start.column=c==g?n.start.column:s.getRowWrapIndent(c),C.end.column=d,u=I,I=d,d=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:n.end.column,this.drawSingleLineMarker(t,C,o+(c==g?" ace_start":"")+" ace_br"+e(c==g||c==g+1&&n.start.column,u<I,I>d,c==l),r,c==l?0:1,a)},this.drawMultiLineMarker=function(e,t,n,i,o){var r,a=this.$padding,s=i.lineHeight,g=this.$getTop(t.start.row,i),l=a+t.start.column*i.characterWidth;if(o=o||"",this.session.$bidiHandler.isBidiRow(t.start.row)?((r=t.clone()).end.row=r.start.row,r.end.column=this.session.getLine(r.start.row).length,this.drawBidiSingleLineMarker(e,r,n+" ace_br1 ace_start",i,null,o)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+g+"px;left:"+l+"px;"+(o||"")),this.session.$bidiHandler.isBidiRow(t.end.row)?((r=t.clone()).start.row=r.end.row,r.start.column=0,this.drawBidiSingleLineMarker(e,r,n+" ace_br12",i,null,o)):(g=this.$getTop(t.end.row,i),this.elt(n+" ace_br12","height:"+s+"px;width:"+t.end.column*i.characterWidth+"px;top:"+g+"px;left:"+a+"px;"+(o||""))),!((s=(t.end.row-t.start.row-1)*i.lineHeight)<=0)){g=this.$getTop(t.start.row+1,i);var c=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(c?" ace_br"+c:""),"height:"+s+"px;right:0;top:"+g+"px;left:"+a+"px;"+(o||""))}},this.drawSingleLineMarker=function(e,t,n,i,o,r){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,i,o,r);var a=i.lineHeight,s=(t.end.column+(o||0)-t.start.column)*i.characterWidth,g=this.$getTop(t.start.row,i);this.elt(n,"height:"+a+"px;width:"+s+"px;top:"+g+"px;left:"+(this.$padding+t.start.column*i.characterWidth)+"px;"+(r||""))},this.drawBidiSingleLineMarker=function(e,t,n,i,o,r){var a=i.lineHeight,s=this.$getTop(t.start.row,i),g=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach(function(e){this.elt(n,"height:"+a+"px;width:"+e.width+(o||0)+"px;top:"+s+"px;left:"+(g+e.left)+"px;"+(r||""))},this)},this.drawFullLineMarker=function(e,t,n,i,o){var r=this.$getTop(t.start.row,i),a=i.lineHeight;t.start.row!=t.end.row&&(a+=this.$getTop(t.end.row,i)-r),this.elt(n,"height:"+a+"px;top:"+r+"px;left:0;right:0;"+(o||""))},this.drawScreenLineMarker=function(e,t,n,i,o){var r=this.$getTop(t.start.row,i);this.elt(n,"height:"+i.lineHeight+"px;top:"+r+"px;left:0;right:0;"+(o||""))}}).call(r.prototype),t.Marker=r}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../lib/dom"),r=e("../lib/lang"),a=e("./lines").Lines,s=e("../lib/event_emitter").EventEmitter,g=function(e){this.dom=o,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)};(function(){i.implement(this,s),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",(function(e){this._signal("changeCharacterSize",e)}).bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++)this.showInvisibles?((i=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",i.textContent=r.stringRepeat(this.TAB_CHAR,n),t.push(i)):t.push(this.dom.createTextNode(r.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i,o="ace_indent-guide",a="",s="";if(this.showInvisibles){o+=" ace_invisible",a=" ace_invisible_space",s=" ace_invisible_tab";var g=r.stringRepeat(this.SPACE_CHAR,this.tabSize),l=r.stringRepeat(this.TAB_CHAR,this.tabSize)}else l=g=r.stringRepeat(" ",this.tabSize);(i=this.dom.createElement("span")).className=o+a,i.textContent=g,this.$tabStrings[" "]=i,(i=this.dom.createElement("span")).className=o+s,i.textContent=l,this.$tabStrings["\t"]=i}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var i=Math.max(t,e.firstRow),o=Math.min(n,e.lastRow),r=this.element.childNodes,a=0,s=e.firstRow;s<i;s++){if(g=this.session.getFoldLine(s)){if(g.containsRow(i)){i=g.start.row;break}s=g.end.row}a++}for(var g,l=!1,c=(g=this.session.getNextFoldLine(s=i))?g.start.row:1/0;s>c&&(c=(g=this.session.getNextFoldLine(s=g.end.row+1,g))?g.start.row:1/0),!(s>o);){var u=r[a++];if(u){this.dom.removeChildren(u),this.$renderLine(u,s,s==c&&g);var I=e.lineHeight*this.session.getRowLength(s)+"px";u.style.height!=I&&(l=!0,u.style.height=I)}s++}if(l)for(;a<this.$lines.cells.length;){var d=this.$lines.cells[a++];d.element.style.top=this.$lines.computeLineTop(d.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow;if(!t||(t?t.lastRow:-1)<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var i=[],r=t,a=this.session.getNextFoldLine(r),s=a?a.start.row:1/0;r>s&&(s=(a=this.session.getNextFoldLine(r=a.end.row+1,a))?a.start.row:1/0),!(r>n);){var g=this.$lines.createCell(r,e,this.session),l=g.element;this.dom.removeChildren(l),o.setStyle(l.style,"height",this.$lines.computeLineHeight(r,e,this.session)+"px"),o.setStyle(l.style,"top",this.$lines.computeLineTop(r,e,this.session)+"px"),this.$renderLine(l,r,r==s&&a),l.className=this.$useLineGroups()?"ace_line_group":"ace_line",i.push(g),r++}return i},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,i){for(var a,s=this,g=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),c=0;a=g.exec(i);){var u=a[1],I=a[2],d=a[3],C=a[4],h=a[5];if(s.showInvisibles||!I){var A=c!=a.index?i.slice(c,a.index):"";if(c=a.index+a[0].length,A&&l.appendChild(this.dom.createTextNode(A,this.element)),u){var f=s.session.getScreenTabSize(t+a.index);l.appendChild(s.$tabStrings[f].cloneNode(!0)),t+=f-1}else I?s.showInvisibles?((p=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",p.textContent=r.stringRepeat(s.SPACE_CHAR,I.length),l.appendChild(p)):l.appendChild(this.com.createTextNode(I,this.element)):d?((p=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",p.textContent=r.stringRepeat(s.SPACE_CHAR,d.length),l.appendChild(p)):C?(t+=1,(p=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",p.className=s.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",p.textContent=s.showInvisibles?s.SPACE_CHAR:"",l.appendChild(p)):h&&(t+=1,(p=o.createElement("span")).style.width=2*s.config.characterWidth+"px",p.className="ace_cjk",p.textContent=h,l.appendChild(p))}}if(l.appendChild(this.dom.createTextNode(c?i.slice(c):i,this.element)),this.$textToken[n.type])e.appendChild(l);else{var m="ace_"+n.type.replace(/\./g," ace_"),p=this.dom.createElement("span");"fold"==n.type&&(p.style.width=n.value.length*this.config.characterWidth+"px"),p.className=m,p.appendChild(l),e.appendChild(p)}return t+i.length},this.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);if(i<=0||i>=n)return t;if(" "==t[0]){for(var o=(i-=i%this.tabSize)/this.tabSize,r=0;r<o;r++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(i)}if("\t"==t[0]){for(r=0;r<i;r++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(i)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var i=0,o=0,a=n[0],s=0,g=this.$createLineElement();e.appendChild(g);for(var l=0;l<t.length;l++){var c=t[l],u=c.value;if(0==l&&this.displayIndentGuides){if(i=u.length,!(u=this.renderIndentGuide(g,u,a)))continue;i-=u.length}if(i+u.length<a)s=this.$renderToken(g,s,c,u),i+=u.length;else{for(;i+u.length>=a;)s=this.$renderToken(g,s,c,u.substring(0,a-i)),u=u.substring(a-i),i=a,g=this.$createLineElement(),e.appendChild(g),g.appendChild(this.dom.createTextNode(r.stringRepeat("\xa0",n.indent),this.element)),s=0,a=n[++o]||Number.MAX_VALUE;0!=u.length&&(i+=u.length,s=this.$renderToken(g,s,c,u))}}},this.$renderSimpleLine=function(e,t){var n=0,i=t[0],o=i.value;this.displayIndentGuides&&(o=this.renderIndentGuide(e,o)),o&&(n=this.$renderToken(e,n,i,o));for(var r=1;r<t.length;r++){if(n+(o=(i=t[r]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,i,o);n=this.$renderToken(e,n,i,o)}},this.$renderOverflowMessage=function(e,t,n,i){this.$renderToken(e,t,n,i.slice(0,this.MAX_LINE_LENGTH-t));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.style.position="absolute",o.style.right="0",o.textContent="<click to see more...>",e.appendChild(o)},this.$renderLine=function(e,t,n){if(!n&&0!=n&&(n=this.session.getFoldLine(t)),n)var i=this.$getFoldLineTokens(t,n);else i=this.session.getTokens(t);var o=e;if(i.length){var r=this.session.getRowSplitData(t);r&&r.length?(this.$renderWrappedLine(e,i,r),o=e.lastChild):(o=e,this.$useLineGroups()&&(o=this.$createLineElement(),e.appendChild(o)),this.$renderSimpleLine(o,i))}else this.$useLineGroups()&&(o=this.$createLineElement(),e.appendChild(o));if(this.showInvisibles&&o){n&&(t=n.end.row);var a=this.dom.createElement("span");a.className="ace_invisible ace_invisible_eol",a.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,o.appendChild(a)}},this.$getFoldLineTokens=function(e,t){var n=this.session,i=[],o=n.getTokens(e);return t.walk(function(e,t,r,a,s){null!=e?i.push({type:"fold",value:e}):(s&&(o=n.getTokens(t)),o.length&&function(e,t,n){for(var o=0,r=0;r+e[o].value.length<t;)if(r+=e[o].value.length,++o==e.length)return;for(r!=t&&((a=e[o].value.substring(t-r)).length>n-t&&(a=a.substring(0,n-t)),i.push({type:e[o].type,value:a}),r=t+a.length,o+=1);r<n&&o<e.length;){var a;i.push((a=e[o].value).length+r>n?{type:e[o].type,value:a.substring(0,n-r)}:e[o]),r+=a.length,o+=1}}(o,a,r))},t.end.row,this.session.getLine(t.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(g.prototype),t.Text=g}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../lib/dom"),o=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)i.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout((function(){i.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},this.$stopCssAnimation=function(){i.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,i.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=i.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&i.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout((function(){i.addCssClass(this.element,"ace_smooth-blinking")}).bind(this)),i.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=(function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,o=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]),n=0;for(var r=t.length;n<r;n++){var a=this.getPixelPosition(t[n].cursor,!0);if(!((a.top>e.height+e.offset||a.top<0)&&n>1)){var s=this.cursors[o++]||this.addCursor(),g=s.style;this.drawCursor?this.drawCursor(s,a,e,t[n],this.session):this.isCursorInView(a,e)?(i.setStyle(g,"display","block"),i.translate(s,a.left,a.top),i.setStyle(g,"width",Math.round(e.characterWidth)+"px"),i.setStyle(g,"height",e.lineHeight+"px")):i.setStyle(g,"display","none")}}for(;this.cursors.length>o;)this.removeCursor();var l=this.session.getOverwrite();this.$setOverwrite(l),this.$pixelPos=a,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),t.Cursor=o}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/event"),a=e("./lib/event_emitter").EventEmitter,s=32768,g=function(e){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,"scroll",this.onScroll.bind(this)),r.addListener(this.element,"mousedown",r.preventDefault)};(function(){i.implement(this,a),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(g.prototype);var l=function(e,t){g.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=o.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(l,g),(function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>s?(this.coeff=s/e,e=s):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}).call(l.prototype);var c=function(e,t){g.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(c,g),(function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}).call(c.prototype),t.ScrollBar=l,t.ScrollBarV=l,t.ScrollBarH=c,t.VScrollBar=l,t.HScrollBar=c}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var i=e("./lib/event"),o=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(i.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(i.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(o.prototype),t.RenderLoop=o}),define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var i=e("../lib/oop"),o=e("../lib/dom"),r=e("../lib/lang"),a=e("../lib/event"),s=e("../lib/useragent"),g=e("../lib/event_emitter").EventEmitter,l=256,c="function"==typeof ResizeObserver,u=200,I=t.FontMetrics=function(e){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.innerHTML=r.stringRepeat("X",l),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){i.implement(this,g),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",s.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver(function(t){var n=t[0].contentRect;e.checkForSizeChanges({height:n.height,width:n.width/l})}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=a.onIdle(function t(){e.checkForSizeChanges(),a.onIdle(t,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/l};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=r.stringRepeat(e,l),this.$main.getBoundingClientRect().width/l},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=o.buildDom([e(0,0),e(u,0),e(0,u),e(u,u)],this.el)},this.transformCoordinates=function(e,t){function n(e,t,n){var i=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/i,(+e[1]*n[0]-e[0]*n[1])/i]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function o(e,t){return[e[0]+t[0],e[1]+t[1]]}function r(e,t){return[e*t[0],e*t[1]]}function a(e){var t=e.getBoundingClientRect();return[t.left,t.top]}e&&(e=r(1/this.$getZoom(this.el),e)),this.els||this.$initTransformMeasureNodes();var s=a(this.els[0]),g=a(this.els[1]),l=a(this.els[2]),c=a(this.els[3]),I=n(i(c,g),i(c,l),i(o(g,l),o(c,s))),d=r(1+I[0],i(g,s)),C=r(1+I[1],i(l,s));if(t){var h=t,A=I[0]*h[0]/u+I[1]*h[1]/u+1,f=o(r(h[0],d),r(h[1],C));return o(r(1/A/u,f),s)}var m=i(e,s),p=n(i(d,r(I[0],m)),i(C,r(I[1],m)),m);return r(u,p)}}).call(I.prototype)}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/dom"),r=e("./config"),a=e("./layer/gutter").Gutter,s=e("./layer/marker").Marker,g=e("./layer/text").Text,l=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,u=e("./scrollbar").VScrollBar,I=e("./renderloop").RenderLoop,d=e("./layer/font_metrics").FontMetrics,C=e("./lib/event_emitter").EventEmitter,h='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}',A=e("./lib/useragent"),f=A.isIE;o.importCssString(h,"ace_editor.css");var m=function(e,t){var n=this;this.container=e||o.createElement("div"),o.addCssClass(this.container,"ace_editor"),o.HI_DPI&&o.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=o.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=o.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=o.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var i=this.$textLayer=new g(this.content);this.canvas=i.element,this.$markerFront=new s(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new u(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new d(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!A.isIOS,this.$loop=new I(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,C),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var o=this.container;i||(i=o.clientHeight||o.scrollHeight),n||(n=o.clientWidth||o.scrollWidth);var r=this.$updateCachedSize(e,t,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,i){var r=0,a=this.$size,s={width:a.width,height:a.height,scrollerHeight:a.scrollerHeight,scrollerWidth:a.scrollerWidth};if((i-=this.$extraHeight||0)&&(e||a.height!=i)&&(a.height=i,r|=this.CHANGE_SIZE,a.scrollerHeight=a.height,this.$horizScroll&&(a.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),n&&(e||a.width!=n)){r|=this.CHANGE_SIZE,a.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,o.setStyle(this.scrollBarH.element.style,"left",t+"px"),o.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),a.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),o.setStyle(this.$gutter.style,"left",this.margin.left+"px");var g=this.scrollBarV.getWidth()+"px";o.setStyle(this.scrollBarH.element.style,"right",g),o.setStyle(this.scroller.style,"right",g),o.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(r|=this.CHANGE_FULL)}return a.$dirty=!n||!i,r&&this._signal("resize",s),r},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=Math.floor((this.$size.scrollerWidth-2*this.$padding)/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=o.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=o.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){var e=this.textarea.style;if(this.$keepTextAreaAtCursor){var t=this.$cursorLayer.$pixelPos;if(t){var n=this.$composition;n&&n.markerRange&&(t=this.$cursorLayer.getPixelPosition(n.markerRange.start,!0));var i=this.layerConfig,r=t.top,a=t.left,s=n&&n.useTextareaForIME?this.lineHeight:f?0:1;if((r-=i.offset)<0||r>i.height-s)o.translate(this.textarea,0,0);else{var g=1;n?n.useTextareaForIME?(g=this.characterWidth*this.session.$getStringScreenWidth(this.textarea.value)[0],s+=2):r+=this.lineHeight+2:r+=this.lineHeight,(a-=this.scrollLeft)>this.$size.scrollerWidth-g&&(a=this.$size.scrollerWidth-g),a+=this.gutterWidth+this.margin.left,o.setStyle(e,"height",s+"px"),o.setStyle(e,"width",g+"px"),o.translate(this.textarea,Math.min(a,this.$size.scrollerWidth-g),Math.min(r,this.$size.height-s))}}}else o.translate(this.textarea,-100,0)},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,i){var o=this.scrollMargin;o.top=0|e,o.bottom=0|t,o.right=0|i,o.left=0|n,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.setMargin=function(e,t,n,i){var o=this.margin;o.top=0|e,o.bottom=0|t,o.right=0|i,o.left=0|n,o.v=o.top+o.bottom,o.h=o.left+o.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>(e-=(t-this.lineHeight)*this.$scrollPastEnd)-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),o.translate(this.content,-this.scrollLeft,-n.offset);var r=n.minHeight+"px";o.setStyle(this.content.style,"width",n.width+2*this.$padding+"px"),o.setStyle(this.content.style,"height",r)}return e&this.CHANGE_H_SCROLL&&(o.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender")):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),void this._signal("afterRender"))}this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var o=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,o,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,o=this.$getLongestLine(),r=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==r;a&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var s=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var g=t.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=l;var c=this.scrollMargin;this.session.setScrollTop(Math.max(-c.top,Math.min(this.scrollTop,i-t.scrollerHeight+c.bottom))),this.session.setScrollLeft(Math.max(-c.left,Math.min(this.scrollLeft,o+2*this.$padding-t.scrollerWidth+c.right)));var u=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+l<0||this.scrollTop>c.top),I=s!==u;I&&(this.$vScroll=u,this.scrollBarV.setVisible(u));var d,C,h=this.scrollTop%this.lineHeight,A=Math.ceil(g/this.lineHeight)-1,f=Math.max(0,Math.round((this.scrollTop-h)/this.lineHeight)),m=f+A,p=this.lineHeight;f=e.screenToDocumentRow(f,0);var b=e.getFoldLine(f);b&&(f=b.start.row),d=e.documentToScreenRow(f,0),C=e.getRowLength(f)*p,m=Math.min(e.screenToDocumentRow(m,0),e.getLength()-1),g=t.scrollerHeight+e.getRowLength(m)*p+C,h=this.scrollTop-d*p;var B=0;return(this.layerConfig.width!=o||a)&&(B=this.CHANGE_H_SCROLL),(a||I)&&(B=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),I&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:f,firstRowScreen:d,lastRow:m,lineHeight:p,characterWidth:this.characterWidth,minHeight:g,maxHeight:i,offset:h,gutterOffset:p?Math.max(0,Math.ceil((h+t.height-t.scrollerHeight)/p)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(o-this.$padding),B},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),o=i.left,r=i.top,a=n&&n.top||0,s=n&&n.bottom||0,g=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;g+a>r?(t&&g+a>r+this.lineHeight&&(r-=t*this.$size.scrollerHeight),0===r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):g+this.$size.scrollerHeight-s<r+this.lineHeight&&(t&&g+this.$size.scrollerHeight-s<r-this.lineHeight&&(r+=t*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight+s-this.$size.scrollerHeight));var l=this.scrollLeft;l>o?(o<this.$padding+2*this.layerConfig.characterWidth&&(o=-this.scrollMargin.left),this.session.setScrollLeft(o)):l+this.$size.scrollerWidth<o+this.characterWidth?this.session.setScrollLeft(Math.round(o+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&o-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e).top-(this.$size.scrollerHeight-this.lineHeight)*(t||0);return this.session.setScrollTop(n),n},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,i=this.STEPS,o=[],r=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<i;++n)o.push(r(n/this.STEPS,e,t-e));return o},this.scrollToLine=function(e,t,n,i){var o=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(o-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(o),!1!==n&&this.animateScrolling(r,i)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(e!=n){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(e=o[0])==n)return}var r=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:r},clearInterval(this.$timer),i.session.setScrollTop(r.shift()),i.session.$scrollTop=n,this.$timer=setInterval(function(){r.length?(i.session.setScrollTop(r.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var o=e+this.scrollLeft-n.left-this.$padding,r=o/this.characterWidth,a=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=this.$blockCursor?Math.floor(r):Math.round(r);return{row:a,column:s,side:r-s>0?1:-1,offsetX:o}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var o=e+this.scrollLeft-n.left-this.$padding,r=o/this.characterWidth,a=this.$blockCursor?Math.floor(r):Math.round(r),s=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(s,Math.max(a,0),o)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),o=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth));return{pageX:n.left+o-this.scrollLeft,pageY:n.top+i.row*this.lineHeight-this.scrollTop}},this.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText,e.keepTextAreaAtCursor=this.$keepTextAreaAtCursor),e.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(this.$keepTextAreaAtCursor=!0,o.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),o.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(e,t,n,i){var o=this.session;o.bgTokenizer.lines[n]=null;var r={type:t,value:e},a=o.getTokens(n);if(null==i)a.push(r);else for(var s=0,g=0;g<a.length;g++){var l=a[g];if(i<=(s+=l.value.length)){var c=l.value.length-(s-i),u=l.value.slice(0,c),I=l.value.slice(c);a.splice(g,1,{type:l.type,value:u},r,{type:l.type,value:I});break}}this.updateLines(n,n)},this.setTheme=function(e,t){function n(n){if(i.$themeId!=e)return t&&t();if(!n||!n.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");n.$id&&(i.$themeId=n.$id),o.importCssString(n.cssText,n.cssClass,i.container),i.theme&&o.removeCssClass(i.container,i.theme.cssClass);var r="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&r!=i.$padding&&i.setPadding(r),i.$theme=n.cssClass,i.theme=n,o.addCssClass(i.container,n.cssClass),o.setCssClass(i.container,"ace_dark",n.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:n}),t&&t()}var i=this;this.$themeId=e,i._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e?n(e):r.loadModule(["theme",e||this.$options.theme.initialValue],n)},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){o.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){o.removeCssClass(this.container,e)},this.setCursorStyle=function(e){o.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){o.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){o.importCssString(h,"ace_editor.css",this.container)},this.destroy=function(){this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),r.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){this.$scrollPastEnd!=(e=+e||0)&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!A.isMobile&&!A.isIE}}),t.VirtualRenderer=m}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";function i(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+r.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return i.append(t),i.getBlob("application/javascript")}}(e),i=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(i)}return new Worker(e)}var o=e("../lib/oop"),r=e("../lib/net"),a=e("../lib/event_emitter").EventEmitter,s=e("../config"),g=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,a),this.$createWorkerFromOldConfig=function(t,n,o,r,a){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)r=r||s.moduleUrl(n,"worker");else{var g=this.$normalizePath;r=r||g(e.toUrl("ace/worker/worker.js",null,"_"));var l={};t.forEach(function(t){l[t]=g(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=i(r),a&&this.send("importScripts",a),this.$worker.postMessage({init:!0,tlns:l,module:n,classname:o}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return r.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),this.deltaQueue.push(e.start,"insert"==e.action?e.lines:e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(g.prototype),t.UIWorkerClient=function(e,t,n){var i=null,o=!1,r=Object.create(a),l=[],c=new g({messageBuffer:l,terminate:function(){},postMessage:function(e){l.push(e),i&&(o?setTimeout(u):u())}});c.setEmitSync=function(e){o=e};var u=function(){var e=l.shift();e.command?i[e.command].apply(i,e.args):e.event&&r._signal(e.event,e.data)};return r.postMessage=function(e){c.onMessage({data:e})},r.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},r.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],function(e){for(i=new e[n](r);l.length;)u()}),c},t.WorkerClient=g,t.createWorker=i}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var i=e("./range").Range,o=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop"),a=function(e,t,n,i,o,r){var a=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=o,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout(function(){a.onCursorChange()})},this.$pos=n;var s=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){r.implement(this,o),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var o=this.pos;o.$insertRight=!0,o.detach(),o.markerId=n.addMarker(new i(o.row,o.column,o.row,o.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),e.others.push(i)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,o=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,r=t.start.column-this.pos.column;if(this.updateAnchors(e),o&&(this.length+=n),o&&!this.session.$fromUndo)if("insert"===e.action)for(var a=this.others.length-1;a>=0;a--)this.doc.insertMergedLines(g={row:(s=this.others[a]).row,column:s.column+r},e.lines);else if("remove"===e.action)for(a=this.others.length-1;a>=0;a--){var s,g;this.doc.remove(new i((g={row:(s=this.others[a]).row,column:s.column+r}).row,g.column,g.row,g.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,o){t.removeMarker(n.markerId),n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),o,null,!1)};n(this.pos,this.mainClass);for(var o=this.others.length;o--;)n(this.others[o],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(a.prototype),t.PlaceHolder=a}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}var o=e("../lib/event"),r=e("../lib/useragent");t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,a=t.shiftKey,s=t.ctrlKey,g=e.getAccelKey(),l=e.getButton();if(s&&r.isMac&&(l=t.button),e.editor.inMultiSelectMode&&2==l)e.editor.textInput.onContextMenu(e.domEvent);else if(s||n||g){if(0===l){var c,u=e.editor,I=u.selection,d=u.inMultiSelectMode,C=e.getDocumentPosition(),h=I.getCursor(),A=e.inSelection()||I.isEmpty()&&i(C,h),f=e.x,m=e.y,p=u.session,b=u.renderer.pixelToScreenCoordinates(f,m),B=b;if(u.$mouseHandler.$enableJumpToDef)s&&n||g&&n?c=a?"block":"add":n&&u.$blockSelectEnabled&&(c="block");else if(g&&!n){if(c="add",!d&&a)return}else n&&u.$blockSelectEnabled&&(c="block");if(c&&r.isMac&&t.ctrlKey&&u.$mouseHandler.cancelContextMenu(),"add"==c){if(!d&&A)return;if(!d){var v=I.toOrientedRange();u.addSelectionMarker(v)}var y=I.rangeList.rangeAtPoint(C);u.inVirtualSelectionMode=!0,a&&(y=null,u.removeSelectionMarker(v=I.ranges[0]||v)),u.once("mouseup",function(){var e=I.toOrientedRange();y&&e.isEmpty()&&i(y.cursor,e.cursor)?I.substractPoint(e.cursor):(a?I.substractPoint(v.cursor):v&&(u.removeSelectionMarker(v),I.addRange(v)),I.addRange(e)),u.inVirtualSelectionMode=!1})}else if("block"==c){e.stop(),u.inVirtualSelectionMode=!0;var x,F=[],G=function(){var e=u.renderer.pixelToScreenCoordinates(f,m),t=p.screenToDocumentPosition(e.row,e.column,e.offsetX);i(B,e)&&i(t,I.lead)||(B=e,u.selection.moveToPosition(t),u.renderer.scrollCursorIntoView(),u.removeSelectionMarkers(F),F=I.rectangularRangeBlock(B,b),u.$mouseHandler.$clickSelection&&1==F.length&&F[0].isEmpty()&&(F[0]=u.$mouseHandler.$clickSelection.clone()),F.forEach(u.addSelectionMarker,u),u.updateSelectionMarkers())};d&&!g?I.toSingleRange():!d&&g&&(x=I.toOrientedRange(),u.addSelectionMarker(x)),a?b=p.documentToScreenPosition(I.lead):I.moveToPosition(C),B={row:-1,column:-1};var Q=G;o.capture(u.container,function(e){f=e.clientX,m=e.clientY},function(e){G(),clearInterval(w),u.removeSelectionMarkers(F),F.length||(F=[I.toOrientedRange()]),x&&(u.removeSelectionMarker(x),I.toSingleRange(x));for(var t=0;t<F.length;t++)I.addRange(F[t]);u.inVirtualSelectionMode=!1,u.$mouseHandler.$clickSelection=null});var w=setInterval(function(){Q()},20);return e.preventDefault()}}}else 0===l&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function o(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",g),e.commands.addCommands(u.defaultCommands),function(e){function t(t){i&&(e.renderer.setMouseCursor(""),i=!1)}var n=e.textInput.getElement(),i=!1;l.addListener(n,"keydown",function(n){e.$blockSelectEnabled&&18==n.keyCode&&!(n.ctrlKey||n.shiftKey||n.metaKey)?i||(e.renderer.setMouseCursor("crosshair"),i=!0):i&&t()}),l.addListener(n,"keyup",t),l.addListener(n,"blur",t)}(e))}var r=e("./range_list").RangeList,a=e("./range").Range,s=e("./selection").Selection,g=e("./mouse/multi_select_handler").onMouseDown,l=e("./lib/event"),c=e("./lib/lang"),u=e("./commands/multi_select_commands");t.commands=u.defaultCommands.concat(u.multiSelectCommands);var I=new(0,e("./search").Search),d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{n=this.getRange();var i=this.isBackwards(),o=n.start.row,r=n.end.row;if(o==r){if(i)var s=n.end,g=n.start;else s=n.start,g=n.end;return this.addRange(a.fromPoints(g,g)),void this.addRange(a.fromPoints(s,s))}var l=[],c=this.getLineRange(o,!0);c.start.column=n.start.column,l.push(c);for(var u=o+1;u<r;u++)l.push(this.getLineRange(u,!0));(c=this.getLineRange(r,!0)).end.column=n.end.column,l.push(c),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(i,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var o=[],r=e.column<t.column;if(r)var s=e.column,g=t.column,l=e.offsetX,c=t.offsetX;else s=t.column,g=e.column,l=t.offsetX,c=e.offsetX;var u,I=e.row<t.row;if(I)var d=e.row,C=t.row;else d=t.row,C=e.row;s<0&&(s=0),d<0&&(d=0),d==C&&(n=!0);for(var h=d;h<=C;h++){var A=a.fromPoints(this.session.screenToDocumentPosition(h,s,l),this.session.screenToDocumentPosition(h,g,c));if(A.isEmpty()){if(u&&i(A.end,u))break;u=A.end}A.cursor=r?A.start:A.end,o.push(A)}if(I&&o.reverse(),!n){for(var f=o.length-1;o[f].isEmpty()&&f>0;)f--;if(f>0)for(var m=0;o[m].isEmpty();)m++;for(var p=f;p>=m;p--)o[p].isEmpty()&&o.splice(p,1)}return o}}).call(s.prototype);var C=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var o=t.indexOf(i);-1!=o&&t.splice(o,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(u.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(u.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?i=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?i=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),i=t.exec(n,e.args||{})):i=t.multiSelectAction(n,e.args||{});else{var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var i,o=1==n||n&&n.$byLines,r=this.session,a=this.selection,g=(n&&n.keepOrder?a:a.rangeList).ranges;if(!g.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var l=a._eventRegistry;a._eventRegistry={};var c=new s(r);this.inVirtualSelectionMode=!0;for(var u=g.length;u--;){if(o)for(;u>0&&g[u].start.row==g[u-1].end.row;)u--;c.fromOrientedRange(g[u]),c.index=u,this.selection=r.selection=c;var I=e.exec?e.exec(this,t||{}):e(this,t||{});!i&&void 0!==I&&(i=I),c.toOrientedRange(g[u])}c.detach(),this.selection=r.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=l,a.mergeOverlappingRanges(),a.ranges[0]&&a.fromOrientedRange(a.ranges[0]);var d=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),d&&d.from==d.to&&this.renderer.animateScrolling(d.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],i=0;i<t.length;i++)n.push(this.session.getTextRange(t[i]));var o=this.session.getDocument().getNewLineCharacter();(e=n.join(o)).length==(n.length-1)*o.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=t.row||this.session.$clipPositionToDocument(i.row,i.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,null==t.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var o=this.$search.findAll(this.session);if(!o.length)return 0;var r=this.multiSelect;n||r.toSingleRange(o[0]);for(var a=o.length;a--;)r.addRange(o[a],!0);return i&&r.rangeList.rangeAtPoint(i.start)&&r.addRange(i,!0),o.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,o=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var r,s=this.session.screenToDocumentPosition(o.row+e,o.column);if(n.isEmpty())l=s;else var g=this.session.documentToScreenPosition(i?n.end:n.start),l=this.session.screenToDocumentPosition(g.row+e,g.column);if(i?(r=a.fromPoints(s,l)).cursor=r.start:(r=a.fromPoints(l,s)).cursor=r.end,r.desiredColumn=o.column,this.selection.inMultiSelectMode){if(t)var c=n.cursor}else this.selection.addRange(n);this.selection.addRange(r),c&&this.selection.substractPoint(c)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,o=i.length;o--;)if((s=i[o]).isEmpty()){var r=t.getWordRange(s.start.row,s.start.column);s.start.row=r.start.row,s.start.column=r.start.column,s.end.row=r.end.row,s.end.column=r.end.column}n.mergeOverlappingRanges();var a=[];for(o=i.length;o--;)a.unshift(t.getTextRange(s=i[o]));for(e<0?a.unshift(a.pop()):a.push(a.shift()),o=i.length;o--;){var s;r=(s=i[o]).clone(),t.replace(s,a[o]),s.start.row=r.start.row,s.start.column=r.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var i=this.session,o=i.multiSelect.toOrientedRange();if(!o.isEmpty()||((o=i.getWordRange(o.start.row,o.start.column)).cursor=-1==e?o.start:o.end,this.multiSelect.addRange(o),!n)){var r=i.getTextRange(o),a=function(e,t,n){return I.$options.wrap=!0,I.$options.needle=t,I.$options.backwards=-1==n,I.find(e)}(i,r,e);a&&(a.cursor=-1==e?a.start:a.end,this.session.unfold(a),this.multiSelect.addRange(a),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(o.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,i=-1,o=n.filter(function(e){if(e.cursor.row==i)return!0;i=e.cursor.row});if(n.length&&o.length!=n.length-1){o.forEach(function(e){t.substractPoint(e.cursor)});var r=0,s=1/0,g=n.map(function(t){var n=t.cursor,i=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>r&&(r=n.column),i<s&&(s=i),i});n.forEach(function(t,n){var i=t.cursor,o=r-i.column,l=g[n]-s;o>l?e.insert(i,c.stringRepeat(" ",o-l)):e.remove(new a(i.row,i.column,i.row,i.column-o+l)),t.start.column=t.end.column=r,t.start.row=t.end.row=i.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),u=l.start.row,I=l.end.row,d=u==I;if(d){var C,h=this.session.getLength();do{C=this.session.getLine(I)}while(/[=:]/.test(C)&&++I<h);do{C=this.session.getLine(u)}while(/[=:]/.test(C)&&--u>0);u<0&&(u=0),I>=h&&(I=h-1)}var A=this.session.removeFullLines(u,I);A=this.$reAlignText(A,d),this.session.insert({row:u,column:0},A.join("\n")+"\n"),d||(l.start.column=0,l.end.column=A[A.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(e,t){function n(e){return c.stringRepeat(" ",e)}function i(e){return e[2]?n(o)+e[2]+n(r-e[2].length+a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var o,r,a,s=!0,g=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==o?(o=t[1].length,r=t[2].length,a=t[3].length,t):(o+r+a!=t[1].length+t[2].length+t[3].length&&(g=!1),o!=t[1].length&&(s=!1),o>t[1].length&&(o=t[1].length),r<t[2].length&&(r=t[2].length),a>t[3].length&&(a=t[3].length),t):[e]}).map(t?i:s?g?function(e){return e[2]?n(o+r-e[2].length)+e[2]+n(a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:i:function(e){return e[2]?n(o)+e[2]+n(a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]})}}).call(C.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=o,e("./config").defineOptions(C.prototype,"editor",{enableMultiselect:{set:function(e){o(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",g)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",g))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../../range").Range,o=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var o=/\S/,r=e.getLine(t),a=r.search(o);if(-1!=a){for(var s=n||r.length,g=e.getLength(),l=t,c=t;++t<g;){var u=e.getLine(t).search(o);if(-1!=u){if(u<=a)break;c=t}}if(c>l){var I=e.getLine(c).length;return new i(l,s,c,I)}}},this.openingBracketBlock=function(e,t,n,o,r){var a={row:n,column:o+1},s=e.$findClosingBracket(t,a,r);if(s){var g=e.foldWidgets[s.row];return null==g&&(g=e.getFoldWidget(s.row)),"start"==g&&s.row>a.row&&(s.row--,s.column=e.getLine(s.row).length),i.fromPoints(a,s)}},this.closingBracketBlock=function(e,t,n,o,r){var a={row:n,column:o},s=e.$findOpeningBracket(t,a);if(s)return s.column++,a.column--,i.fromPoints(s,a)}}).call(o.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass)}),define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}e("./lib/oop");var o=e("./lib/dom");e("./range"),(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var i=e.data,o=i.start.row,r=i.end.row,a="add"==e.action,s=o+1;s<r;s++)n[s]&&(n[s].hidden=a);n[r]&&(a?n[o]?n[r].hidden=a:n[o]=n[r]:(n[o]==n[r]&&(n[o]=void 0),n[r].hidden=a))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,i=e.end.row-n;if(0!==i)if("remove"==e.action)t.splice(n+1,i).forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows();else{var o=new Array(i);o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var n=this.editor.renderer;e.html&&!e.el&&(e.el=o.createElement("div"),e.el.innerHTML=e.html),e.el&&(o.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,n.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/n.layerConfig.lineHeight);var i=this.session.getFoldAt(e.row,0);if(e.$fold=i,i){var r=this.session.lineWidgets;e.row!=i.end.row||r[i.start.row]?e.hidden=!0:r[i.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;n;){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,i=t.layerConfig;if(n&&n.length){for(var o=1/0,r=0;r<n.length;r++){var a=n[r];if(a&&a.el&&a.session==this.session){if(!a._inDocument){if(this.session.lineWidgets[a.row]!=a)continue;a._inDocument=!0,t.container.appendChild(a.el)}a.h=a.el.offsetHeight,a.fixedWidth||(a.w=a.el.offsetWidth,a.screenWidth=Math.ceil(a.w/i.characterWidth));var s=a.h/i.lineHeight;a.coverLine&&(s-=this.session.getRowLineCount(a.row))<0&&(s=0),a.rowCount!=s&&(a.rowCount=s,a.row<o&&(o=a.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,i=this.session.lineWidgets;if(i){for(var o=Math.min(this.firstRow,n.firstRow),r=Math.max(this.lastRow,n.lastRow,i.length);o>0&&!i[o];)o--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var a=o;a<=r;a++){var s=i[a];if(s&&s.el)if(s.hidden)s.el.style.top=-100-(s.pixelHeight||0)+"px";else{s._inDocument||(s._inDocument=!0,t.container.appendChild(s.el));var g=t.$cursorLayer.getPixelPosition({row:a,column:0},!0).top;s.coverLine||(g+=n.lineHeight*this.session.getRowLineCount(s.row)),s.el.style.top=g-n.offset+"px";var l=s.coverGutter?0:t.gutterWidth;s.fixedWidth||(l-=t.scrollLeft),s.el.style.left=l+"px",s.fullWidth&&s.screenWidth&&(s.el.style.minWidth=n.width+2*n.padding+"px"),s.el.style.right=s.fixedWidth?t.scrollBar.getWidth()+"px":""}}}}}).call(i.prototype),t.LineWidgets=i}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function i(e,t,n){var i=e.getAnnotations().sort(a.comparePoints);if(i.length){var o=function(e,t,n){for(var i=0,o=e.length-1;i<=o;){var r=i+o>>1,a=n(t,e[r]);if(a>0)i=r+1;else{if(!(a<0))return r;o=r-1}}return-(i+1)}(i,{row:t,column:-1},a.comparePoints);o<0&&(o=-o-1),o>=i.length?o=n>0?0:i.length-1:0===o&&n<0&&(o=i.length-1);var r=i[o];if(r&&n){if(r.row===t){do{r=i[o+=n]}while(r&&r.row===t);if(!r)return i.slice()}var s=[];t=r.row;do{s[n<0?"unshift":"push"](r),r=i[o+=n]}while(r&&r.row==t);return s.length&&s}}}var o=e("../line_widgets").LineWidgets,r=e("../lib/dom"),a=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new o(n),n.widgetManager.attach(e));var a=e.getCursorPosition(),s=a.row,g=n.widgetManager.getWidgetsAtRow(s).filter(function(e){return"errorMarker"==e.type})[0];g?g.destroy():s-=t;var l,c=i(n,s,t);if(c){var u=c[0];a.column=(u.pos&&"number"!=typeof u.column?u.pos.sc:u.column)||0,a.row=u.row,l=e.renderer.$gutterLayer.$annotations[a.row]}else{if(g)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(a.row),e.selection.moveToPosition(a);var I={row:a.row,fixedWidth:!0,coverGutter:!0,el:r.createElement("div"),type:"errorMarker"},d=I.el.appendChild(r.createElement("div")),C=I.el.appendChild(r.createElement("div"));C.className="error_widget_arrow "+l.className;var h=e.renderer.$cursorLayer.getPixelPosition(a).left;C.style.left=h+e.renderer.gutterWidth-5+"px",I.el.className="error_widget_wrapper",d.className="error_widget "+l.className,d.innerHTML=l.text.join("<br>"),d.appendChild(r.createElement("div"));var A=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return I.destroy(),{command:"null"}};I.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(A),n.widgetManager.removeLineWidget(I),e.off("changeSelection",I.destroy),e.off("changeSession",I.destroy),e.off("mouseup",I.destroy),e.off("change",I.destroy))},e.keyBinding.addKeyboardHandler(A),e.on("changeSelection",I.destroy),e.on("changeSession",I.destroy),e.on("mouseup",I.destroy),e.on("change",I.destroy),e.session.widgetManager.addLineWidget(I),I.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:I.el.offsetHeight})},r.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/dom"),o=e("./lib/event"),r=e("./range").Range,a=e("./editor").Editor,s=e("./edit_session").EditSession,g=e("./undomanager").UndoManager,l=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,"function"==typeof define&&(t.define=define),t.edit=function(e,n){if("string"==typeof e){var r=e;if(!(e=document.getElementById(r)))throw new Error("ace.edit can't find div #"+r)}if(e&&e.env&&e.env.editor instanceof a)return e.env.editor;var s="";if(e&&/input|textarea/i.test(e.tagName)){var g=e;s=g.value,e=i.createElement("pre"),g.parentNode.replaceChild(e,g)}else e&&(s=e.textContent,e.innerHTML="");var c=t.createEditSession(s),u=new a(new l(e),c,n),I={document:c,editor:u,onResize:u.resize.bind(u,null)};return g&&(I.textarea=g),o.addListener(window,"resize",I.onResize),u.on("destroy",function(){o.removeListener(window,"resize",I.onResize),I.editor.container.env=null}),u.container.env=u.env=I,u},t.createEditSession=function(e,t){var n=new s(e,t);return n.setUndoManager(new g),n},t.Range=r,t.Editor=a,t.EditSession=s,t.UndoManager=g,t.VirtualRenderer=l,t.version="1.4.3"}),window.require(["ace/ace"],function(e){for(var t in e&&(e.config.init(!0),e.define=window.define),window.ace||(window.ace=e),e)e.hasOwnProperty(t)&&(window.ace[t]=e[t]);window.ace.default=window.ace,"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=window.ace)}),define("ace/theme/eclipse",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssText='.ace-eclipse .ace_gutter {background: #ebebeb;border-right: 1px solid rgb(159, 159, 159);color: rgb(136, 136, 136);}.ace-eclipse .ace_print-margin {width: 1px;background: #ebebeb;}.ace-eclipse {background-color: #FFFFFF;color: black;}.ace-eclipse .ace_fold {background-color: rgb(60, 76, 114);}.ace-eclipse .ace_cursor {color: black;}.ace-eclipse .ace_storage,.ace-eclipse .ace_keyword,.ace-eclipse .ace_variable {color: rgb(127, 0, 85);}.ace-eclipse .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-eclipse .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-eclipse .ace_function {color: rgb(60, 76, 114);}.ace-eclipse .ace_string {color: rgb(42, 0, 255);}.ace-eclipse .ace_comment {color: rgb(113, 150, 130);}.ace-eclipse .ace_comment.ace_doc {color: rgb(63, 95, 191);}.ace-eclipse .ace_comment.ace_doc.ace_tag {color: rgb(127, 159, 191);}.ace-eclipse .ace_constant.ace_numeric {color: darkblue;}.ace-eclipse .ace_tag {color: rgb(25, 118, 116);}.ace-eclipse .ace_type {color: rgb(127, 0, 127);}.ace-eclipse .ace_xml-pe {color: rgb(104, 104, 91);}.ace-eclipse .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-eclipse .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-eclipse .ace_meta.ace_tag {color:rgb(25, 118, 116);}.ace-eclipse .ace_invisible {color: #ddd;}.ace-eclipse .ace_entity.ace_other.ace_attribute-name {color:rgb(127, 0, 127);}.ace-eclipse .ace_marker-layer .ace_step {background: rgb(255, 255, 0);}.ace-eclipse .ace_active-line {background: rgb(232, 242, 254);}.ace-eclipse .ace_gutter-active-line {background-color : #DADADA;}.ace-eclipse .ace_marker-layer .ace_selected-word {border: 1px solid rgb(181, 213, 255);}.ace-eclipse .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.cssClass="ace-eclipse",e("../lib/dom").importCssString(t.cssText,t.cssClass)}),window.require(["ace/theme/eclipse"],function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,r=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},r.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(r,o),r.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},r.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},r.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=r}),define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";function i(e){return[{token:"comment",regex:/\/\*/,next:[r.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[r.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}var o=e("../lib/oop"),r=e("./doc_comment_highlight_rules").DocCommentHighlightRules,a=e("./text_highlight_rules").TextHighlightRules,s="[a-zA-Z\\$_\xa1-\uffff][a-zA-Z\\d\\$_\xa1-\uffff]*",g=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[r.getStartRule("doc-start"),i("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+s+")(\\.)(prototype)(\\.)("+s+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+s+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:s},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:s},{regex:"",token:"empty",next:"no_regex"}],start:[r.getStartRule("doc-start"),i("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:s},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){if(this.next="{"==e?this.nextState:"","{"==e&&n.length)n.unshift("start",t);else if("}"==e&&n.length&&(n.shift(),this.next=n.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:n},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!e||0!=e.jsx)&&(function(){var e=s.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var i="/"==e.charAt(1)?2:1;return 1==i?(t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++):2==i&&t==this.nextState&&(n[1]--,(!n[1]||n[1]<0)&&(n.shift(),n.shift())),[{type:"meta.tag.punctuation."+(1==i?"":"end-")+"tag-open.xml",value:e.slice(0,i)},{type:"meta.tag.tag-name.xml",value:e.substr(i)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),2==e.length&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,i("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}).call(this)),this.embedRules(r,"doc-",[r.getEndRule("no_regex")]),this.normalizeRules()};o.inherits(g,a),t.JavaScriptHighlightRules=g}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../range").Range,o=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var o=n[1].length,r=e.findMatchingBracket({row:t,column:o});if(!r||r.row==t)return 0;var a=this.$getIndent(e.getLine(r.row));e.replace(new i(t,0,t,o-1),a)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(o.prototype),t.MatchingBraceOutdent=o}),define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop"),o=e("../../range").Range,r=e("./fold_mode").FoldMode,a=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(a,r),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var o=this._getFoldWidgetBase(e,t,n);return!o&&this.startRegionRe.test(i)?"start":o},this.getFoldWidgetRange=function(e,t,n,i){var o,r=e.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,n);if(o=r.match(this.foldingStartMarker)){var a=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,a);var s=e.getCommentFoldRange(n,a+o[0].length,1);return s&&!s.isMultiLine()&&(i?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}return"markbegin"!==t&&(o=r.match(this.foldingStopMarker))?(a=o.index+o[0].length,o[1]?this.closingBracketBlock(e,o[1],n,a):e.getCommentFoldRange(n,a,-1)):void 0},this.getSectionRange=function(e,t){for(var n=e.getLine(t),i=n.search(/\S/),r=t,a=n.length,s=t+=1,g=e.getLength();++t<g;){var l=(n=e.getLine(t)).search(/\S/);if(-1!==l){if(i>l)break;var c=this.getFoldWidgetRange(e,"all",t);if(c){if(c.start.row<=r)break;if(c.isMultiLine())t=c.end.row;else if(i==l)break}s=t}}return new o(r,a,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),r=e.getLength(),a=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,g=1;++n<r;){t=e.getLine(n);var l=s.exec(t);if(l&&(l[1]?g--:g++,!g))break}if(n>a)return new o(a,i,n,t.length)}}).call(a.prototype)}),define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text").Mode,r=e("./javascript_highlight_rules").JavaScriptHighlightRules,a=e("./matching_brace_outdent").MatchingBraceOutdent,s=e("../worker/worker_client").WorkerClient,g=e("./behaviour/cstyle").CstyleBehaviour,l=e("./folding/cstyle").FoldMode,c=function(){this.HighlightRules=r,this.$outdent=new a,this.$behaviour=new g,this.foldingRules=new l};i.inherits(c,o),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),o=this.getTokenizer().getLineTokens(t,e),r=o.tokens,a=o.state;if(r.length&&"comment"==r[r.length-1].type)return i;if("start"==e||"no_regex"==e)(s=t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/))&&(i+=n);else if("doc-start"==e){if("start"==a||"no_regex"==a)return"";var s;(s=t.match(/^\s*(\/?)\*/))&&(s[1]&&(i+=" "),i+="* ")}return i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new s(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/javascript"}).call(c.prototype),t.Mode=c}),define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=(e("../lib/lang"),e("./text_highlight_rules").TextHighlightRules),r=t.supportType="align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|max-zoom|min-height|min-width|min-zoom|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|user-select|user-zoom|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index",a=t.supportFunction="rgb|rgba|url|attr|counter|counters",s=t.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero|zoom",g=t.supportConstantColor="aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen",l=t.supportConstantFonts="arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace",c=t.numRe="\\-?(?:(?:[0-9]+(?:\\.[0-9]+)?)|(?:\\.[0-9]+))",u=t.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b",I=t.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b",d=function(){var e=this.createKeywordMapper({"support.function":a,"support.constant":s,"support.type":r,"support.constant.color":g,"support.constant.fonts":l},"text",!0);this.$rules={start:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"ruleset"},{token:"paren.rparen",regex:"\\}"},{token:"string",regex:"@(?!viewport)",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"keyword",regex:"%"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant.numeric",regex:c},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],media:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"start"},{token:"paren.rparen",regex:"\\}",next:"start"},{token:"string",regex:";",next:"start"},{token:"keyword",regex:"(?:media|supports|document|charset|import|namespace|media|supports|document|page|font|keyframes|viewport|counter-style|font-feature-values|swash|ornaments|annotation|stylistic|styleset|character-variant)"}],comments:[{token:"comment",regex:"\\/\\*",push:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}]}],ruleset:[{regex:"-(webkit|ms|moz|o)-",token:"text"},{token:"punctuation.operator",regex:"[:;]"},{token:"paren.rparen",regex:"\\}",next:"start"},{include:["strings","url","comments"]},{token:["constant.numeric","keyword"],regex:"("+c+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vmax|vmin|vm|vw|%)"},{token:"constant.numeric",regex:c},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:u},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:I},{include:"url"},{token:e,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:!0}],url:[{token:"support.function",regex:"(?:url(:?-prefix)?|domain|regexp)\\(",push:[{token:"support.function",regex:"\\)",next:"pop"},{defaultToken:"string"}]}],strings:[{token:"string.start",regex:"'",push:[{token:"string.end",regex:"'|$",next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]},{token:"string.start",regex:'"',push:[{token:"string.end",regex:'"|$',next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]}],escapes:[{token:"constant.language.escape",regex:/\\([a-fA-F\d]{1,6}|[^a-fA-F\d])/}]},this.normalizeRules()};i.inherits(d,o),t.CssHighlightRules=d}),define("ace/mode/css_completions",["require","exports","module"],function(e,t,n){"use strict";var i={background:{"#$0":1},"background-color":{"#$0":1,transparent:1,fixed:1},"background-image":{"url('/$0')":1},"background-repeat":{repeat:1,"repeat-x":1,"repeat-y":1,"no-repeat":1,inherit:1},"background-position":{bottom:2,center:2,left:2,right:2,top:2,inherit:2},"background-attachment":{scroll:1,fixed:1},"background-size":{cover:1,contain:1},"background-clip":{"border-box":1,"padding-box":1,"content-box":1},"background-origin":{"border-box":1,"padding-box":1,"content-box":1},border:{"solid $0":1,"dashed $0":1,"dotted $0":1,"#$0":1},"border-color":{"#$0":1},"border-style":{solid:2,dashed:2,dotted:2,double:2,groove:2,hidden:2,inherit:2,inset:2,none:2,outset:2,ridged:2},"border-collapse":{collapse:1,separate:1},bottom:{px:1,em:1,"%":1},clear:{left:1,right:1,both:1,none:1},color:{"#$0":1,"rgb(#$00,0,0)":1},cursor:{default:1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,"n-resize":1,"ne-resize":1,"e-resize":1,"se-resize":1,"s-resize":1,"sw-resize":1,"w-resize":1,"nw-resize":1},display:{none:1,block:1,inline:1,"inline-block":1,"table-cell":1},"empty-cells":{show:1,hide:1},float:{left:1,right:1,none:1},"font-family":{Arial:2,"Comic Sans MS":2,Consolas:2,"Courier New":2,Courier:2,Georgia:2,Monospace:2,"Sans-Serif":2,"Segoe UI":2,Tahoma:2,"Times New Roman":2,"Trebuchet MS":2,Verdana:1},"font-size":{px:1,em:1,"%":1},"font-weight":{bold:1,normal:1},"font-style":{italic:1,normal:1},"font-variant":{normal:1,"small-caps":1},height:{px:1,em:1,"%":1},left:{px:1,em:1,"%":1},"letter-spacing":{normal:1},"line-height":{normal:1},"list-style-type":{none:1,disc:1,circle:1,square:1,decimal:1,"decimal-leading-zero":1,"lower-roman":1,"upper-roman":1,"lower-greek":1,"lower-latin":1,"upper-latin":1,georgian:1,"lower-alpha":1,"upper-alpha":1},margin:{px:1,em:1,"%":1},"margin-right":{px:1,em:1,"%":1},"margin-left":{px:1,em:1,"%":1},"margin-top":{px:1,em:1,"%":1},"margin-bottom":{px:1,em:1,"%":1},"max-height":{px:1,em:1,"%":1},"max-width":{px:1,em:1,"%":1},"min-height":{px:1,em:1,"%":1},"min-width":{px:1,em:1,"%":1},overflow:{hidden:1,visible:1,auto:1,scroll:1},"overflow-x":{hidden:1,visible:1,auto:1,scroll:1},"overflow-y":{hidden:1,visible:1,auto:1,scroll:1},padding:{px:1,em:1,"%":1},"padding-top":{px:1,em:1,"%":1},"padding-right":{px:1,em:1,"%":1},"padding-bottom":{px:1,em:1,"%":1},"padding-left":{px:1,em:1,"%":1},"page-break-after":{auto:1,always:1,avoid:1,left:1,right:1},"page-break-before":{auto:1,always:1,avoid:1,left:1,right:1},position:{absolute:1,relative:1,fixed:1,static:1},right:{px:1,em:1,"%":1},"table-layout":{fixed:1,auto:1},"text-decoration":{none:1,underline:1,"line-through":1,blink:1},"text-align":{left:1,right:1,center:1,justify:1},"text-transform":{capitalize:1,uppercase:1,lowercase:1,none:1},top:{px:1,em:1,"%":1},"vertical-align":{top:1,bottom:1},visibility:{hidden:1,visible:1},"white-space":{nowrap:1,normal:1,pre:1,"pre-line":1,"pre-wrap":1},width:{px:1,em:1,"%":1},"word-spacing":{normal:1},filter:{"alpha(opacity=$0100)":1},"text-shadow":{"$02px 2px 2px #777":1},"text-overflow":{"ellipsis-word":1,clip:1,ellipsis:1},"-moz-border-radius":1,"-moz-border-radius-topright":1,"-moz-border-radius-bottomright":1,"-moz-border-radius-topleft":1,"-moz-border-radius-bottomleft":1,"-webkit-border-radius":1,"-webkit-border-top-right-radius":1,"-webkit-border-top-left-radius":1,"-webkit-border-bottom-right-radius":1,"-webkit-border-bottom-left-radius":1,"-moz-box-shadow":1,"-webkit-box-shadow":1,transform:{"rotate($00deg)":1,"skew($00deg)":1},"-moz-transform":{"rotate($00deg)":1,"skew($00deg)":1},"-webkit-transform":{"rotate($00deg)":1,"skew($00deg)":1}},o=function(){};(function(){this.completionsDefined=!1,this.defineCompletions=function(){if(document){var e=document.createElement("c").style;for(var t in e)if("string"==typeof e[t]){var n=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});i.hasOwnProperty(n)||(i[n]=1)}}this.completionsDefined=!0},this.getCompletions=function(e,t,n,i){if(this.completionsDefined||this.defineCompletions(),"ruleset"===e||"ace/mode/scss"==t.$mode.$id){var o=t.getLine(n.row).substr(0,n.column);return/:[^;]+$/.test(o)?(/([\w\-]+):[^:]*$/.test(o),this.getPropertyValueCompletions(e,t,n,i)):this.getPropertyCompletions(e,t,n,i)}return[]},this.getPropertyCompletions=function(e,t,n,o){return Object.keys(i).map(function(e){return{caption:e,snippet:e+": $0;",meta:"property",score:1e6}})},this.getPropertyValueCompletions=function(e,t,n,o){var r=t.getLine(n.row).substr(0,n.column),a=(/([\w\-]+):[^:]*$/.exec(r)||{})[1];if(!a)return[];var s=[];return a in i&&"object"==typeof i[a]&&(s=Object.keys(i[a])),s.map(function(e){return{caption:e,snippet:e,meta:"property value",score:1e6}})}}).call(o.prototype),t.CssCompletions=o}),define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(e,t,n){"use strict";var i=e("../../lib/oop"),o=(e("../behaviour"),e("./cstyle").CstyleBehaviour),r=e("../../token_iterator").TokenIterator,a=function(){this.inherit(o),this.add("colon","insertion",function(e,t,n,i,o){if(":"===o&&n.selection.isEmpty()){var a=n.getCursorPosition(),s=new r(i,a.row,a.column),g=s.getCurrentToken();if(g&&g.value.match(/\s+/)&&(g=s.stepBackward()),g&&"support.type"===g.type){var l=i.doc.getLine(a.row);if(":"===l.substring(a.column,a.column+1))return{text:"",selection:[1,1]};if(/^(\s+[^;]|\s*$)/.test(l.substring(a.column)))return{text:":;",selection:[1,1]}}}}),this.add("colon","deletion",function(e,t,n,i,o){var a=i.doc.getTextRange(o);if(!o.isMultiLine()&&":"===a){var s=n.getCursorPosition(),g=new r(i,s.row,s.column),l=g.getCurrentToken();if(l&&l.value.match(/\s+/)&&(l=g.stepBackward()),l&&"support.type"===l.type&&";"===i.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o}}),this.add("semicolon","insertion",function(e,t,n,i,o){if(";"===o&&n.selection.isEmpty()){var r=n.getCursorPosition();if(";"===i.doc.getLine(r.row).substring(r.column,r.column+1))return{text:"",selection:[1,1]}}}),this.add("!important","insertion",function(e,t,n,i,o){if("!"===o&&n.selection.isEmpty()){var r=n.getCursorPosition(),a=i.doc.getLine(r.row);if(/^\s*(;|}|$)/.test(a.substring(r.column)))return{text:"!important",selection:[10,10]}}})};i.inherits(a,o),t.CssBehaviour=a}),define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/css_completions","ace/mode/behaviour/css","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text").Mode,r=e("./css_highlight_rules").CssHighlightRules,a=e("./matching_brace_outdent").MatchingBraceOutdent,s=e("../worker/worker_client").WorkerClient,g=e("./css_completions").CssCompletions,l=e("./behaviour/css").CssBehaviour,c=e("./folding/cstyle").FoldMode,u=function(){this.HighlightRules=r,this.$outdent=new a,this.$behaviour=new l,this.$completer=new g,this.foldingRules=new c};i.inherits(u,o),(function(){this.foldingRules="cStyle",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),o=this.getTokenizer().getLineTokens(t,e).tokens;return o.length&&"comment"==o[o.length-1].type?i:(t.match(/^.*\{\s*$/)&&(i+=n),i)},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.getCompletions=function(e,t,n,i){return this.$completer.getCompletions(e,t,n,i)},this.createWorker=function(e){var t=new s(["ace"],"ace/mode/css_worker","Worker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/css"}).call(u.prototype),t.Mode=u}),define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,r=function(e){var t="[_:a-zA-Z\xc0-\uffff][-_:.a-zA-Z0-9\xc0-\uffff]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+t+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:t},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+t+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"--\x3e",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+t+":)?"+t+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:t},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===r&&this.normalizeRules()};(function(){this.embedTagRules=function(e,t,n){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(<)("+n+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:t+"start"}]}),this.$rules[n+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(e,t,n){return n.splice(0),this.token}}],this.embedRules(e,t,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(</)("+n+"(?=\\s|>|$))",next:n+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(o.prototype),i.inherits(r,o),t.XmlHighlightRules=r}),define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../lib/lang"),r=e("./css_highlight_rules").CssHighlightRules,a=e("./javascript_highlight_rules").JavaScriptHighlightRules,s=e("./xml_highlight_rules").XmlHighlightRules,g=o.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"}),l=function(){s.call(this),this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:.]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(e,t){var n=g[t];return["meta.tag.punctuation."+("<"==e?"":"end-")+"tag-open.xml","meta.tag"+(n?"."+n:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:.]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}),this.embedTagRules(r,"css-","style"),this.embedTagRules(new a({jsx:!1}).getRules(),"js-","script"),this.constructor===l&&this.normalizeRules()};i.inherits(l,s),t.HtmlHighlightRules=l}),define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";function i(e,t){return e&&e.type.lastIndexOf(t+".xml")>-1}var o=e("../../lib/oop"),r=e("../behaviour").Behaviour,a=e("../../token_iterator").TokenIterator,s=(e("../../lib/lang"),function(){this.add("string_dquotes","insertion",function(e,t,n,o,r){if('"'==r||"'"==r){var s=r,g=o.doc.getTextRange(n.getSelectionRange());if(""!==g&&"'"!==g&&'"'!=g&&n.getWrapBehavioursEnabled())return{text:s+g+s,selection:!1};var l=n.getCursorPosition(),c=o.doc.getLine(l.row).substring(l.column,l.column+1),u=new a(o,l.row,l.column),I=u.getCurrentToken();if(c==s&&(i(I,"attribute-value")||i(I,"string")))return{text:"",selection:[1,1]};if(I||(I=u.stepBackward()),!I)return;for(;i(I,"tag-whitespace")||i(I,"whitespace");)I=u.stepBackward();var d=!c||c.match(/\s/);if(i(I,"attribute-equals")&&(d||">"==c)||i(I,"decl-attribute-equals")&&(d||"?"==c))return{text:s+s,selection:[1,1]}}}),this.add("string_dquotes","deletion",function(e,t,n,i,o){var r=i.doc.getTextRange(o);if(!o.isMultiLine()&&('"'==r||"'"==r)&&i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)==r)return o.end.column++,o}),this.add("autoclosing","insertion",function(e,t,n,o,r){if(">"==r){var s=n.getSelectionRange().start,g=new a(o,s.row,s.column),l=g.getCurrentToken()||g.stepBackward();if(!l||!(i(l,"tag-name")||i(l,"tag-whitespace")||i(l,"attribute-name")||i(l,"attribute-equals")||i(l,"attribute-value")))return;if(i(l,"reference.attribute-value"))return;if(i(l,"attribute-value")){var c=g.getCurrentTokenColumn()+l.value.length;if(s.column<c)return;if(s.column==c){var u=g.stepForward();if(u&&i(u,"attribute-value"))return;g.stepBackward()}}if(/^\s*>/.test(o.getLine(s.row).slice(s.column)))return;for(;!i(l,"tag-name");)if("<"==(l=g.stepBackward()).value){l=g.stepForward();break}var I=g.getCurrentTokenRow(),d=g.getCurrentTokenColumn();if(i(g.stepBackward(),"end-tag-open"))return;var C=l.value;if(I==s.row&&(C=C.substring(0,s.column-d)),this.voidElements.hasOwnProperty(C.toLowerCase()))return;return{text:"></"+C+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(e,t,n,i,o){if("\n"==o){var r=n.getCursorPosition(),s=i.getLine(r.row),g=new a(i,r.row,r.column),l=g.getCurrentToken();if(l&&-1!==l.type.indexOf("tag-close")){if("/>"==l.value)return;for(;l&&-1===l.type.indexOf("tag-name");)l=g.stepBackward();if(!l)return;var c=l.value,u=g.getCurrentTokenRow();if(!(l=g.stepBackward())||-1!==l.type.indexOf("end-tag"))return;if(this.voidElements&&!this.voidElements[c]){var I=i.getTokenAt(r.row,r.column+1),d=(s=i.getLine(u),this.$getIndent(s)),C=d+i.getTabString();return I&&"</"===I.value?{text:"\n"+C+"\n"+d,selection:[1,C.length,1,C.length]}:{text:"\n"+C}}}}})});o.inherits(s,r),t.XmlBehaviour=s}),define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop"),o=e("./fold_mode").FoldMode,r=t.FoldMode=function(e,t){this.defaultMode=e,this.subModes=t};i.inherits(r,o),(function(){this.$getMode=function(e){for(var t in"string"!=typeof e&&(e=e[0]),this.subModes)if(0===e.indexOf(t))return this.subModes[t];return null},this.$tryMode=function(e,t,n,i){var o=this.$getMode(e);return o?o.getFoldWidget(t,n,i):""},this.getFoldWidget=function(e,t,n){return this.$tryMode(e.getState(n-1),e,t,n)||this.$tryMode(e.getState(n),e,t,n)||this.defaultMode.getFoldWidget(e,t,n)},this.getFoldWidgetRange=function(e,t,n){var i=this.$getMode(e.getState(n-1));return i&&i.getFoldWidget(e,t,n)||(i=this.$getMode(e.getState(n))),i&&i.getFoldWidget(e,t,n)||(i=this.defaultMode),i.getFoldWidgetRange(e,t,n)}}).call(r.prototype)}),define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(e,t,n){"use strict";function i(e,t){return e.type.lastIndexOf(t+".xml")>-1}var o=e("../../lib/oop"),r=(e("../../lib/lang"),e("../../range").Range),a=e("./fold_mode").FoldMode,s=e("../../token_iterator").TokenIterator,g=t.FoldMode=function(e,t){a.call(this),this.voidElements=e||{},this.optionalEndTags=o.mixin({},this.voidElements),t&&o.mixin(this.optionalEndTags,t)};o.inherits(g,a);var l=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};(function(){this.getFoldWidget=function(e,t,n){var i=this._getFirstTagInLine(e,n);return i?i.closing||!i.tagName&&i.selfClosing?"markbeginend"==t?"end":"":!i.tagName||i.selfClosing||this.voidElements.hasOwnProperty(i.tagName.toLowerCase())?"":this._findEndTagInLine(e,n,i.tagName,i.end.column)?"":"start":this.getCommentFoldWidget(e,n)},this.getCommentFoldWidget=function(e,t){return/comment/.test(e.getState(t))&&/<!-/.test(e.getLine(t))?"start":""},this._getFirstTagInLine=function(e,t){for(var n=e.getTokens(t),o=new l,r=0;r<n.length;r++){var a=n[r];if(i(a,"tag-open")){if(o.end.column=o.start.column+a.value.length,o.closing=i(a,"end-tag-open"),!(a=n[++r]))return null;for(o.tagName=a.value,o.end.column+=a.value.length,r++;r<n.length;r++)if(o.end.column+=(a=n[r]).value.length,i(a,"tag-close")){o.selfClosing="/>"==a.value;break}return o}if(i(a,"tag-close"))return o.selfClosing="/>"==a.value,o;o.start.column+=a.value.length}return null},this._findEndTagInLine=function(e,t,n,o){for(var r=e.getTokens(t),a=0,s=0;s<r.length;s++){var g=r[s];if(!((a+=g.value.length)<o)&&i(g,"end-tag-open")&&(g=r[s+1])&&g.value==n)return!0}return!1},this._readTagForward=function(e){var t=e.getCurrentToken();if(!t)return null;var n=new l;do{if(i(t,"tag-open"))n.closing=i(t,"end-tag-open"),n.start.row=e.getCurrentTokenRow(),n.start.column=e.getCurrentTokenColumn();else if(i(t,"tag-name"))n.tagName=t.value;else if(i(t,"tag-close"))return n.selfClosing="/>"==t.value,n.end.row=e.getCurrentTokenRow(),n.end.column=e.getCurrentTokenColumn()+t.value.length,e.stepForward(),n}while(t=e.stepForward());return null},this._readTagBackward=function(e){var t=e.getCurrentToken();if(!t)return null;var n=new l;do{if(i(t,"tag-open"))return n.closing=i(t,"end-tag-open"),n.start.row=e.getCurrentTokenRow(),n.start.column=e.getCurrentTokenColumn(),e.stepBackward(),n;i(t,"tag-name")?n.tagName=t.value:i(t,"tag-close")&&(n.selfClosing="/>"==t.value,n.end.row=e.getCurrentTokenRow(),n.end.column=e.getCurrentTokenColumn()+t.value.length)}while(t=e.stepBackward());return null},this._pop=function(e,t){for(;e.length;){var n=e[e.length-1];if(!t||n.tagName==t.tagName)return e.pop();if(!this.optionalEndTags.hasOwnProperty(n.tagName))return null;e.pop()}},this.getFoldWidgetRange=function(e,t,n){var i=this._getFirstTagInLine(e,n);if(!i)return this.getCommentFoldWidget(e,n)&&e.getCommentFoldRange(n,e.getLine(n).length);var o,a=[];if(i.closing||i.selfClosing){l=new s(e,n,i.end.column);for(var g={row:n,column:i.start.column};o=this._readTagBackward(l);)if(o.selfClosing){if(!a.length)return o.start.column+=o.tagName.length+2,o.end.column-=2,r.fromPoints(o.start,o.end)}else if(o.closing)a.push(o);else if(this._pop(a,o),0==a.length)return o.start.column+=o.tagName.length+2,o.start.row==o.end.row&&o.start.column<o.end.column&&(o.start.column=o.end.column),r.fromPoints(o.start,g)}else{var l=new s(e,n,i.start.column),c={row:n,column:i.start.column+i.tagName.length+2};for(i.start.row==i.end.row&&(c.column=i.end.column);o=this._readTagForward(l);)if(o.selfClosing){if(!a.length)return o.start.column+=o.tagName.length+2,o.end.column-=2,r.fromPoints(o.start,o.end)}else if(o.closing){if(this._pop(a,o),0==a.length)return r.fromPoints(c,o.start)}else a.push(o)}}}).call(g.prototype)}),define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../../lib/oop"),o=e("./mixed").FoldMode,r=e("./xml").FoldMode,a=e("./cstyle").FoldMode,s=t.FoldMode=function(e,t){o.call(this,new r(e,t),{"js-":new a,"css-":new a})};i.inherits(s,o)}),define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"],function(e,t,n){"use strict";function i(e,t){return e.type.lastIndexOf(t+".xml")>-1}function o(e,t){for(var n=new a(e,t.row,t.column),o=n.getCurrentToken();o&&!i(o,"tag-name");)o=n.stepBackward();if(o)return o.value}function r(e,t){for(var n=new a(e,t.row,t.column),o=n.getCurrentToken();o&&!i(o,"attribute-name");)o=n.stepBackward();if(o)return o.value}var a=e("../token_iterator").TokenIterator,s=["accesskey","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","inert","itemid","itemprop","itemref","itemscope","itemtype","lang","spellcheck","style","tabindex","title","translate"].concat(["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"]),g={a:{href:1,target:{_blank:1,top:1},ping:1,rel:{nofollow:1,alternate:1,author:1,bookmark:1,help:1,license:1,next:1,noreferrer:1,prefetch:1,prev:1,search:1,tag:1},media:1,hreflang:1,type:1},abbr:{},address:{},area:{shape:1,coords:1,href:1,hreflang:1,alt:1,target:1,media:1,rel:1,ping:1,type:1},article:{pubdate:1},aside:{},audio:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},muted:{muted:1},preload:{auto:1,metadata:1,none:1}},b:{},base:{href:1,target:1},bdi:{},bdo:{},blockquote:{cite:1},body:{onafterprint:1,onbeforeprint:1,onbeforeunload:1,onhashchange:1,onmessage:1,onoffline:1,onpopstate:1,onredo:1,onresize:1,onstorage:1,onundo:1,onunload:1},br:{},button:{autofocus:1,disabled:{disabled:1},form:1,formaction:1,formenctype:1,formmethod:1,formnovalidate:1,formtarget:1,name:1,value:1,type:{button:1,submit:1}},canvas:{width:1,height:1},caption:{},cite:{},code:{},col:{span:1},colgroup:{span:1},command:{type:1,label:1,icon:1,disabled:1,checked:1,radiogroup:1,command:1},data:{},datalist:{},dd:{},del:{cite:1,datetime:1},details:{open:1},dfn:{},dialog:{open:1},div:{},dl:{},dt:{},em:{},embed:{src:1,height:1,width:1,type:1},fieldset:{disabled:1,form:1,name:1},figcaption:{},figure:{},footer:{},form:{"accept-charset":1,action:1,autocomplete:1,enctype:{"multipart/form-data":1,"application/x-www-form-urlencoded":1},method:{get:1,post:1},name:1,novalidate:1,target:{_blank:1,top:1}},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},head:{},header:{},hr:{},html:{manifest:1},i:{},iframe:{name:1,src:1,height:1,width:1,sandbox:{"allow-same-origin":1,"allow-top-navigation":1,"allow-forms":1,"allow-scripts":1},seamless:{seamless:1}},img:{alt:1,src:1,height:1,width:1,usemap:1,ismap:1},input:{type:{text:1,password:1,hidden:1,checkbox:1,submit:1,radio:1,file:1,button:1,reset:1,image:31,color:1,date:1,datetime:1,"datetime-local":1,email:1,month:1,number:1,range:1,search:1,tel:1,time:1,url:1,week:1},accept:1,alt:1,autocomplete:{on:1,off:1},autofocus:{autofocus:1},checked:{checked:1},disabled:{disabled:1},form:1,formaction:1,formenctype:{"application/x-www-form-urlencoded":1,"multipart/form-data":1,"text/plain":1},formmethod:{get:1,post:1},formnovalidate:{formnovalidate:1},formtarget:{_blank:1,_self:1,_parent:1,_top:1},height:1,list:1,max:1,maxlength:1,min:1,multiple:{multiple:1},name:1,pattern:1,placeholder:1,readonly:{readonly:1},required:{required:1},size:1,src:1,step:1,width:1,files:1,value:1},ins:{cite:1,datetime:1},kbd:{},keygen:{autofocus:1,challenge:{challenge:1},disabled:{disabled:1},form:1,keytype:{rsa:1,dsa:1,ec:1},name:1},label:{form:1,for:1},legend:{},li:{value:1},link:{href:1,hreflang:1,rel:{stylesheet:1,icon:1},media:{all:1,screen:1,print:1},type:{"text/css":1,"image/png":1,"image/jpeg":1,"image/gif":1},sizes:1},main:{},map:{name:1},mark:{},math:{},menu:{type:1,label:1},meta:{"http-equiv":{"content-type":1},name:{description:1,keywords:1},content:{"text/html; charset=UTF-8":1},charset:1},meter:{value:1,min:1,max:1,low:1,high:1,optimum:1},nav:{},noscript:{href:1},object:{param:1,data:1,type:1,height:1,width:1,usemap:1,name:1,form:1,classid:1},ol:{start:1,reversed:1},optgroup:{disabled:1,label:1},option:{disabled:1,selected:1,label:1,value:1},output:{for:1,form:1,name:1},p:{},param:{name:1,value:1},pre:{},progress:{value:1,max:1},q:{cite:1},rp:{},rt:{},ruby:{},s:{},samp:{},script:{charset:1,type:{"text/javascript":1},src:1,defer:1,async:1},select:{autofocus:1,disabled:1,form:1,multiple:{multiple:1},name:1,size:1,readonly:{readonly:1}},small:{},source:{src:1,type:1,media:1},span:{},strong:{},style:{type:1,media:{all:1,screen:1,print:1},scoped:1},sub:{},sup:{},svg:{},table:{summary:1},tbody:{},td:{headers:1,rowspan:1,colspan:1},textarea:{autofocus:{autofocus:1},disabled:{disabled:1},form:1,maxlength:1,name:1,placeholder:1,readonly:{readonly:1},required:{required:1},rows:1,cols:1,wrap:{on:1,off:1,hard:1,soft:1}},tfoot:{},th:{headers:1,rowspan:1,colspan:1,scope:1},thead:{},time:{datetime:1},title:{},tr:{},track:{kind:1,src:1,srclang:1,label:1,default:1},section:{},summary:{},u:{},ul:{},var:{},video:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},width:1,height:1,poster:1,muted:{muted:1},preload:{auto:1,metadata:1,none:1}},wbr:{}},l=Object.keys(g),c=function(){};(function(){this.getCompletions=function(e,t,n,o){var r=t.getTokenAt(n.row,n.column);if(!r)return[];if(i(r,"tag-name")||i(r,"tag-open")||i(r,"end-tag-open"))return this.getTagCompletions(e,t,n,o);if(i(r,"tag-whitespace")||i(r,"attribute-name"))return this.getAttributeCompletions(e,t,n,o);if(i(r,"attribute-value"))return this.getAttributeValueCompletions(e,t,n,o);var a=t.getLine(n.row).substr(0,n.column);return/&[a-z]*$/i.test(a)?this.getHTMLEntityCompletions(e,t,n,o):[]},this.getTagCompletions=function(e,t,n,i){return l.map(function(e){return{value:e,meta:"tag",score:1e6}})},this.getAttributeCompletions=function(e,t,n,i){var r=o(t,n);if(!r)return[];var a=s;return r in g&&(a=a.concat(Object.keys(g[r]))),a.map(function(e){return{caption:e,snippet:e+'="$0"',meta:"attribute",score:1e6}})},this.getAttributeValueCompletions=function(e,t,n,i){var a=o(t,n),s=r(t,n);if(!a)return[];var l=[];return a in g&&s in g[a]&&"object"==typeof g[a][s]&&(l=Object.keys(g[a][s])),l.map(function(e){return{caption:e,snippet:e,meta:"attribute value",score:1e6}})},this.getHTMLEntityCompletions=function(e,t,n,i){return["Aacute;","aacute;","Acirc;","acirc;","acute;","AElig;","aelig;","Agrave;","agrave;","alefsym;","Alpha;","alpha;","amp;","and;","ang;","Aring;","aring;","asymp;","Atilde;","atilde;","Auml;","auml;","bdquo;","Beta;","beta;","brvbar;","bull;","cap;","Ccedil;","ccedil;","cedil;","cent;","Chi;","chi;","circ;","clubs;","cong;","copy;","crarr;","cup;","curren;","Dagger;","dagger;","dArr;","darr;","deg;","Delta;","delta;","diams;","divide;","Eacute;","eacute;","Ecirc;","ecirc;","Egrave;","egrave;","empty;","emsp;","ensp;","Epsilon;","epsilon;","equiv;","Eta;","eta;","ETH;","eth;","Euml;","euml;","euro;","exist;","fnof;","forall;","frac12;","frac14;","frac34;","frasl;","Gamma;","gamma;","ge;","gt;","hArr;","harr;","hearts;","hellip;","Iacute;","iacute;","Icirc;","icirc;","iexcl;","Igrave;","igrave;","image;","infin;","int;","Iota;","iota;","iquest;","isin;","Iuml;","iuml;","Kappa;","kappa;","Lambda;","lambda;","lang;","laquo;","lArr;","larr;","lceil;","ldquo;","le;","lfloor;","lowast;","loz;","lrm;","lsaquo;","lsquo;","lt;","macr;","mdash;","micro;","middot;","minus;","Mu;","mu;","nabla;","nbsp;","ndash;","ne;","ni;","not;","notin;","nsub;","Ntilde;","ntilde;","Nu;","nu;","Oacute;","oacute;","Ocirc;","ocirc;","OElig;","oelig;","Ograve;","ograve;","oline;","Omega;","omega;","Omicron;","omicron;","oplus;","or;","ordf;","ordm;","Oslash;","oslash;","Otilde;","otilde;","otimes;","Ouml;","ouml;","para;","part;","permil;","perp;","Phi;","phi;","Pi;","pi;","piv;","plusmn;","pound;","Prime;","prime;","prod;","prop;","Psi;","psi;","quot;","radic;","rang;","raquo;","rArr;","rarr;","rceil;","rdquo;","real;","reg;","rfloor;","Rho;","rho;","rlm;","rsaquo;","rsquo;","sbquo;","Scaron;","scaron;","sdot;","sect;","shy;","Sigma;","sigma;","sigmaf;","sim;","spades;","sub;","sube;","sum;","sup;","sup1;","sup2;","sup3;","supe;","szlig;","Tau;","tau;","there4;","Theta;","theta;","thetasym;","thinsp;","THORN;","thorn;","tilde;","times;","trade;","Uacute;","uacute;","uArr;","uarr;","Ucirc;","ucirc;","Ugrave;","ugrave;","uml;","upsih;","Upsilon;","upsilon;","Uuml;","uuml;","weierp;","Xi;","xi;","Yacute;","yacute;","yen;","Yuml;","yuml;","Zeta;","zeta;","zwj;","zwnj;"].map(function(e){return{caption:e,snippet:e,meta:"html entity",score:1e6}})}}).call(c.prototype),t.HtmlCompletions=c}),define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../lib/lang"),r=e("./text").Mode,a=e("./javascript").Mode,s=e("./css").Mode,g=e("./html_highlight_rules").HtmlHighlightRules,l=e("./behaviour/xml").XmlBehaviour,c=e("./folding/html").FoldMode,u=e("./html_completions").HtmlCompletions,I=e("../worker/worker_client").WorkerClient,d=["area","base","br","col","embed","hr","img","input","keygen","link","meta","menuitem","param","source","track","wbr"],C=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"],h=function(e){this.fragmentContext=e&&e.fragmentContext,this.HighlightRules=g,this.$behaviour=new l,this.$completer=new u,this.createModeDelegates({"js-":a,"css-":s}),this.foldingRules=new c(this.voidElements,o.arrayToMap(C))};i.inherits(h,r),(function(){this.blockComment={start:"\x3c!--",end:"--\x3e"},this.voidElements=o.arrayToMap(d),this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.getCompletions=function(e,t,n,i){return this.$completer.getCompletions(e,t,n,i)},this.createWorker=function(e){if(this.constructor==h){var t=new I(["ace"],"ace/mode/html_worker","Worker");return t.attachToDocument(e.getDocument()),this.fragmentContext&&t.call("setOptions",[{context:this.fragmentContext}]),t.on("error",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t}},this.$id="ace/mode/html"}).call(h.prototype),t.Mode=h}),window.require(["ace/mode/html"],function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}),function(e){"use strict";var t=function(){},n=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(null,n))}},i=function(e){return function(){return e}},o=function(e){return e};function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=t.concat(n);return e.apply(null,o)}}var a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B,v,y=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},x=i(!1),F=i(!0),G=x,Q=F,w=function(){return S},S=(l={fold:function(e,t){return e()},is:G,isSome:G,isNone:Q,getOr:g=function(e){return e},getOrThunk:s=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:g,orThunk:s,map:w,ap:w,each:function(){},bind:w,flatten:w,exists:G,forall:Q,filter:w,equals:a=function(e){return e.isNone()},equals_:a,toArray:function(){return[]},toString:i("none()")},Object.freeze&&Object.freeze(l),l),X=function(e){var t=function(){return e},n=function(){return o},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Q,isNone:G,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return X(t(e))},ap:function(t){return t.fold(w,function(t){return X(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:S},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(G,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Z={some:X,none:w,from:function(e){return null==e?S:X(e)}},N=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},k=N("string"),R=N("object"),D=N("array"),U=N("null"),T=N("boolean"),W=N("function"),E=N("number"),H=Array.prototype.slice,O=void 0===(c=Array.prototype.indexOf)?function(e,t){return j(e,t)}:function(e,t){return c.call(e,t)},L=function(e,t){return-1<O(e,t)},V=function(e,t){return P(e,t).isSome()},Y=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o,e);return i},M=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n,e)},_=function(e,t){for(var n=[],i=[],o=0,r=e.length;o<r;o++){var a=e[o];(t(a,o,e)?n:i).push(a)}return{pass:n,fail:i}},K=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r,i,e)&&n.push(r)}return n},z=function(e,t,n){return M(e,function(e){n=t(n,e)}),n},J=function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o,n,e))return Z.some(o)}return Z.none()},P=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n,e))return Z.some(n);return Z.none()},j=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return n;return-1},$=Array.prototype.push,q=function(e,t){return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!D(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);$.apply(t,e[n])}return t}(Y(e,t))},ee=function(e,t){for(var n=0,i=e.length;n<i;++n)if(!0!==t(e[n],n,e))return!1;return!0},te=function(e,t){return K(e,function(e){return!L(t,e)})},ne=function(e){return 0===e.length?Z.none():Z.some(e[0])},ie=function(e){return 0===e.length?Z.none():Z.some(e[e.length-1])},oe=W(Array.from)?Array.from:function(e){return H.call(e)},re=void 0!==e.window?e.window:Function("return this;")(),ae={getOrDie:function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:re,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n}},se=function(){return ae.getOrDie("URL")},ge={createObjectURL:function(e){return se().createObjectURL(e)},revokeObjectURL:function(e){se().revokeObjectURL(e)}},le=e.navigator,ce=le.userAgent,ue=function(t){return"matchMedia"in e.window&&e.matchMedia(t).matches};m=/Android/.test(ce),I=(I=!(u=/WebKit/.test(ce))&&/MSIE/gi.test(ce)&&/Explorer/gi.test(le.appName))&&/MSIE (\w+)\./.exec(ce)[1],d=-1!==ce.indexOf("Trident/")&&(-1!==ce.indexOf("rv:")||-1!==le.appName.indexOf("Netscape"))&&11,C=-1!==ce.indexOf("Edge/")&&!I&&!d&&12,I=I||d||C,h=!u&&!d&&/Gecko/.test(ce),A=-1!==ce.indexOf("Mac"),f=/(iPad|iPhone)/.test(ce),p="FormData"in e.window&&"FileReader"in e.window&&"URL"in e.window&&!!ge.createObjectURL,b=ue("only screen and (max-device-width: 480px)")&&(m||f),B=ue("only screen and (min-width: 800px)")&&(m||f),v=-1!==ce.indexOf("Windows Phone"),C&&(u=!1);var Ie,de={opera:!1,webkit:u,ie:I,gecko:h,mac:A,iOS:f,android:m,contentEditable:!f||p||534<=parseInt(ce.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==I,range:e.window.getSelection&&"Range"in e.window,documentMode:I&&!C?e.document.documentMode||7:10,fileApi:p,ceFalse:!1===I||8<I,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===I||11<I,desktop:!b&&!B,windowsPhone:v},Ce=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(r,this),e(a,this))},i=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e){var t=this;null!==this._state?i(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(g){return void e.reject(g)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void c(e(n,t),e(r,this),e(a,this))}this._state=!0,this._value=t,s.call(this)}catch(g){a.call(this,g)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function c(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(r){if(i)return;i=!0,n(r)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var i=this;return new n(function(n,r){o.call(i,new l(e,t,n,r))})},n.all=function(){var i=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(0===i.length)return t([]);var o=i.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var g=s.then;if("function"==typeof g)return void g.call(s,function(e){r(a,e)},n)}i[a]=s,0==--o&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)r(a,i[a])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},n}(),he=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Ae=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},fe=function(e,t){var n,i;return(i=function(){var i=arguments;clearTimeout(n),n=he(function(){e.apply(this,i)},t)}).stop=function(){clearTimeout(n)},i},me={requestAnimationFrame:function(t,n){Ie?Ie.then(t):Ie=new Ce(function(t){n||(n=e.document.body),function(t,n){var i,o=e.window.requestAnimationFrame,r=["ms","moz","webkit"];for(i=0;i<r.length&&!o;i++)o=e.window[r[i]+"RequestAnimationFrame"];o||(o=function(t){e.window.setTimeout(t,0)}),o(t,n)}(t,n)}).then(t)},setTimeout:he,setInterval:Ae,setEditorTimeout:function(e,t,n){return he(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var i;return i=Ae(function(){e.removed?clearInterval(i):t()},n)},debounce:fe,throttle:fe,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},pe=/^(?:mouse|contextmenu)|click/,be={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Be=function(){return!1},ve=function(){return!0},ye=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},xe=function(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Fe=function(t,n){var i,o,r=n||{};for(i in t)be[i]||(r[i]=t[i]);if(r.target||(r.target=r.srcElement||e.document),de.experimentalShadowDom&&(r.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t}(t,r.target)),t&&pe.test(t.type)&&void 0===t.pageX&&void 0!==t.clientX){var a=r.target.ownerDocument||e.document,s=a.documentElement,g=a.body;r.pageX=t.clientX+(s&&s.scrollLeft||g&&g.scrollLeft||0)-(s&&s.clientLeft||g&&g.clientLeft||0),r.pageY=t.clientY+(s&&s.scrollTop||g&&g.scrollTop||0)-(s&&s.clientTop||g&&g.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=ve,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=ve,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},!(r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=ve,r.stopPropagation()})==((o=r).isDefaultPrevented===ve||o.isDefaultPrevented===Be)&&(r.isDefaultPrevented=Be,r.isPropagationStopped=Be,r.isImmediatePropagationStopped=Be),void 0===r.metaKey&&(r.metaKey=!1),r},Ge=function(e,t,n){var i=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var r=function(){return"complete"===i.readyState||"interactive"===i.readyState&&i.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(o))},s=function(){r()&&(xe(i,"readystatechange",s),a())},g=function(){try{i.documentElement.doScroll("left")}catch(e){return void me.setTimeout(g)}a()};!i.addEventListener||de.ie&&de.ie<11?(ye(i,"readystatechange",s),i.documentElement.doScroll&&e.self===e.top&&g()):r()?a():ye(e,"DOMContentLoaded",a),ye(e,"load",a)}},Qe=function(){var t,n,i,o,a,s=this,g={};n="mce-data-"+(+new Date).toString(32),o="onmouseenter"in e.document.documentElement,i="onfocusin"in e.document.documentElement,a={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,s.domLoaded=!1,s.events=g;var l=function(e,t){var n,i,o,r,a=g[t];if(n=a&&a[e.type])for(i=0,o=n.length;i<o;i++)if((r=n[i])&&!1===r.func.call(r.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};s.bind=function(r,c,u,I){var d,C,h,A,f,m,p,b=e.window,B=function(e){l(Fe(e||b.event),d)};if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[n]?d=r[n]:(d=t++,r[n]=d,g[d]={}),I=I||r,h=(c=c.split(" ")).length;h--;)m=B,f=p=!1,"DOMContentLoaded"===(A=c[h])&&(A="ready"),s.domLoaded&&"ready"===A&&"complete"===r.readyState?u.call(I,Fe({type:A})):(o||(f=a[A])&&(m=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Fe(e||b.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,l(e,d))}),i||"focusin"!==A&&"focusout"!==A||(p=!0,f="focusin"===A?"focus":"blur",m=function(e){(e=Fe(e||b.event)).type="focus"===e.type?"focusin":"focusout",l(e,d)}),(C=g[d][A])?"ready"===A&&s.domLoaded?u({type:A}):C.push({func:u,scope:I}):(g[d][A]=C=[{func:u,scope:I}],C.fakeName=f,C.capture=p,C.nativeHandler=m,"ready"===A?Ge(r,m,s):ye(r,f||A,m,p)));return r=C=0,u}},s.unbind=function(e,t,i){var o,a,l,c,u,I;if(!e||3===e.nodeType||8===e.nodeType)return s;if(o=e[n]){if(I=g[o],t){for(l=(t=t.split(" ")).length;l--;)if(a=I[u=t[l]]){if(i)for(c=a.length;c--;)if(a[c].func===i){var d=a.nativeHandler,C=a.fakeName,h=a.capture;(a=a.slice(0,c).concat(a.slice(c+1))).nativeHandler=d,a.fakeName=C,a.capture=h,I[u]=a}i&&0!==a.length||(delete I[u],xe(e,a.fakeName||u,a.nativeHandler,a.capture))}}else{for(u in I)xe(e,(a=I[u]).fakeName||u,a.nativeHandler,a.capture);I={}}for(u in I)return s;delete g[o];try{delete e[n]}catch(r){e[n]=null}}return s},s.fire=function(e,t,i){var o;if(!e||3===e.nodeType||8===e.nodeType)return s;for((i=Fe(null,i)).type=t,i.target=e;(o=e[n])&&l(i,o),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!i.isPropagationStopped(););return s},s.clean=function(e){var t,i,o=s.unbind;if(!e||3===e.nodeType||8===e.nodeType)return s;if(e[n]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),t=(i=e.getElementsByTagName("*")).length;t--;)(e=i[t])[n]&&o(e);return s},s.destroy=function(){g={}},s.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Qe.Event=new Qe,Qe.Event.bind(e.window,"ready",function(){});var we,Se,Xe,Ze,Ne,ke,Re,De,Ue,Te,We,Ee,He,Oe,Le,Ve,Ye,Me,_e="sizzle"+-new Date,Ke=e.window.document,ze=0,Je=0,Pe=wt(),je=wt(),$e=wt(),qe=function(e,t){return e===t&&(We=!0),0},et="undefined",tt={}.hasOwnProperty,nt=[],it=nt.pop,ot=nt.push,rt=nt.push,at=nt.slice,st=nt.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},gt="[\\x20\\t\\r\\n\\f]",lt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ct="\\["+gt+"*("+lt+")(?:"+gt+"*([*^$|!~]?=)"+gt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+lt+"))|)"+gt+"*\\]",ut=":("+lt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ct+")*)|.*)\\)|)",It=new RegExp("^"+gt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+gt+"+$","g"),dt=new RegExp("^"+gt+"*,"+gt+"*"),Ct=new RegExp("^"+gt+"*([>+~]|"+gt+")"+gt+"*"),ht=new RegExp("="+gt+"*([^\\]'\"]*?)"+gt+"*\\]","g"),At=new RegExp(ut),ft=new RegExp("^"+lt+"$"),mt={ID:new RegExp("^#("+lt+")"),CLASS:new RegExp("^\\.("+lt+")"),TAG:new RegExp("^("+lt+"|[*])"),ATTR:new RegExp("^"+ct),PSEUDO:new RegExp("^"+ut),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+gt+"*(even|odd|(([+-]|)(\\d*)n|)"+gt+"*(?:([+-]|)"+gt+"*(\\d+)|))"+gt+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+gt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+gt+"*((?:-\\d)?\\d*)"+gt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,Bt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,xt=/'|\\/g,Ft=new RegExp("\\\\([\\da-f]{1,6}"+gt+"?|("+gt+")|.)","ig"),Gt=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{rt.apply(nt=at.call(Ke.childNodes),Ke.childNodes)}catch(Db){rt={apply:nt.length?function(e,t){ot.apply(e,at.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}var Qt=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d;if((t?t.ownerDocument||t:Ke)!==He&&Ee(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||He).nodeType)&&9!==s)return[];if(Le&&!i){if(o=vt.exec(e))if(a=o[1]){if(9===s){if(!(r=t.getElementById(a))||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&Me(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return rt.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&Se.getElementsByClassName)return rt.apply(n,t.getElementsByClassName(a)),n}if(Se.qsa&&(!Ve||!Ve.test(e))){if(u=c=_e,I=t,d=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=ke(e),(c=t.getAttribute("id"))?u=c.replace(xt,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",g=l.length;g--;)l[g]=u+Ut(l[g]);I=yt.test(e)&&Rt(t.parentNode)||t,d=l.join(",")}if(d)try{return rt.apply(n,I.querySelectorAll(d)),n}catch(m){}finally{c||t.removeAttribute("id")}}}return De(e.replace(It,"$1"),t,n,i)};function wt(){var e=[];return function t(n,i){return e.push(n+" ")>Xe.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function St(e){return e[_e]=!0,e}function Xt(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Zt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Nt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function kt(e){return St(function(t){return t=+t,St(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function Rt(e){return e&&typeof e.getElementsByTagName!==et&&e}for(we in Se=Qt.support={},Ne=Qt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Ee=Qt.setDocument=function(e){var t,n=e?e.ownerDocument||e:Ke,i=n.defaultView;return n!==He&&9===n.nodeType&&n.documentElement?(Oe=(He=n).documentElement,Le=!Ne(n),i&&i!==function(e){try{return e.top}catch(t){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",function(){Ee()},!1):i.attachEvent&&i.attachEvent("onunload",function(){Ee()})),Se.attributes=!0,Se.getElementsByTagName=!0,Se.getElementsByClassName=Bt.test(n.getElementsByClassName),Se.getById=!0,Xe.find.ID=function(e,t){if(typeof t.getElementById!==et&&Le){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Xe.filter.ID=function(e){var t=e.replace(Ft,Gt);return function(e){return e.getAttribute("id")===t}},Xe.find.TAG=Se.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==et)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},Xe.find.CLASS=Se.getElementsByClassName&&function(e,t){if(Le)return t.getElementsByClassName(e)},Ye=[],Ve=[],Se.disconnectedMatch=!0,Ve=Ve.length&&new RegExp(Ve.join("|")),Ye=Ye.length&&new RegExp(Ye.join("|")),t=Bt.test(Oe.compareDocumentPosition),Me=t||Bt.test(Oe.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},qe=t?function(e,t){if(e===t)return We=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Se.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===Ke&&Me(Ke,e)?-1:t===n||t.ownerDocument===Ke&&Me(Ke,t)?1:Te?st.call(Te,e)-st.call(Te,t):0:4&i?-1:1)}:function(e,t){if(e===t)return We=!0,0;var i,o=0,r=e.parentNode,a=t.parentNode,s=[e],g=[t];if(!r||!a)return e===n?-1:t===n?1:r?-1:a?1:Te?st.call(Te,e)-st.call(Te,t):0;if(r===a)return Xt(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)g.unshift(i);for(;s[o]===g[o];)o++;return o?Xt(s[o],g[o]):s[o]===Ke?-1:g[o]===Ke?1:0},n):He},Qt.matches=function(e,t){return Qt(e,null,null,t)},Qt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==He&&Ee(e),t=t.replace(ht,"='$1']"),Se.matchesSelector&&Le&&(!Ye||!Ye.test(t))&&(!Ve||!Ve.test(t)))try{var n=(void 0).call(e,t);if(n||Se.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Db){}return 0<Qt(t,He,null,[e]).length},Qt.contains=function(e,t){return(e.ownerDocument||e)!==He&&Ee(e),Me(e,t)},Qt.attr=function(e,t){(e.ownerDocument||e)!==He&&Ee(e);var n=Xe.attrHandle[t.toLowerCase()],i=n&&tt.call(Xe.attrHandle,t.toLowerCase())?n(e,t,!Le):void 0;return void 0!==i?i:Se.attributes||!Le?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},Qt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Qt.uniqueSort=function(e){var t,n=[],i=0,o=0;if(We=!Se.detectDuplicates,Te=!Se.sortStable&&e.slice(0),e.sort(qe),We){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return Te=null,e},Ze=Qt.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Ze(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=Ze(t);return n},(Xe=Qt.selectors={cacheLength:50,createPseudo:St,match:mt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ft,Gt),e[3]=(e[3]||e[4]||e[5]||"").replace(Ft,Gt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Qt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Qt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return mt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&At.test(n)&&(t=ke(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ft,Gt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Pe[e+" "];return t||(t=new RegExp("(^|"+gt+")"+e+"("+gt+"|$)"))&&Pe(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==et&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=Qt.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&-1<o.indexOf(n):"$="===t?n&&o.slice(-n.length)===n:"~="===t?-1<(" "+o+" ").indexOf(n):"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,g){var l,c,u,I,d,C,h=r!==a?"nextSibling":"previousSibling",A=t.parentNode,f=s&&t.nodeName.toLowerCase(),m=!g&&!s;if(A){if(r){for(;h;){for(u=t;u=u[h];)if(s?u.nodeName.toLowerCase()===f:1===u.nodeType)return!1;C=h="only"===e&&!C&&"nextSibling"}return!0}if(C=[a?A.firstChild:A.lastChild],a&&m){for(d=(l=(c=A[_e]||(A[_e]={}))[e]||[])[0]===ze&&l[1],I=l[0]===ze&&l[2],u=d&&A.childNodes[d];u=++d&&u&&u[h]||(I=d=0)||C.pop();)if(1===u.nodeType&&++I&&u===t){c[e]=[ze,d,I];break}}else if(m&&(l=(t[_e]||(t[_e]={}))[e])&&l[0]===ze)I=l[1];else for(;(u=++d&&u&&u[h]||(I=d=0)||C.pop())&&((s?u.nodeName.toLowerCase()!==f:1!==u.nodeType)||!++I||(m&&((u[_e]||(u[_e]={}))[e]=[ze,I]),u!==t)););return(I-=o)===i||I%i==0&&0<=I/i}}},PSEUDO:function(e,t){var n,i=Xe.pseudos[e]||Xe.setFilters[e.toLowerCase()]||Qt.error("unsupported pseudo: "+e);return i[_e]?i(t):1<i.length?(n=[e,e,"",t],Xe.setFilters.hasOwnProperty(e.toLowerCase())?St(function(e,n){for(var o,r=i(e,t),a=r.length;a--;)e[o=st.call(e,r[a])]=!(n[o]=r[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:St(function(e){var t=[],n=[],i=Re(e.replace(It,"$1"));return i[_e]?St(function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:St(function(e){return function(t){return 0<Qt(e,t).length}}),contains:St(function(e){return e=e.replace(Ft,Gt),function(t){return-1<(t.textContent||t.innerText||Ze(t)).indexOf(e)}}),lang:St(function(e){return ft.test(e||"")||Qt.error("unsupported lang: "+e),e=e.replace(Ft,Gt).toLowerCase(),function(t){var n;do{if(n=Le?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.window.location&&e.window.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===Oe},focus:function(e){return e===He.activeElement&&(!He.hasFocus||He.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Xe.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return pt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:kt(function(){return[0]}),last:kt(function(e,t){return[t-1]}),eq:kt(function(e,t,n){return[n<0?n+t:n]}),even:kt(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:kt(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:kt(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:kt(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=Xe.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Xe.pseudos[we]=Zt(we);for(we in{submit:!0,reset:!0})Xe.pseudos[we]=Nt(we);function Dt(){}function Ut(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function Tt(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=Je++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,g,l=[ze,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((s=(g=t[_e]||(t[_e]={}))[i])&&s[0]===ze&&s[1]===r)return l[2]=s[2];if((g[i]=l)[2]=e(t,n,a))return!0}}}function Wt(e){return 1<e.length?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Et(e,t,n,i,o){for(var r,a=[],s=0,g=e.length,l=null!=t;s<g;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),l&&t.push(s)));return a}function Ht(e,t,n,i,o,r){return i&&!i[_e]&&(i=Ht(i)),o&&!o[_e]&&(o=Ht(o,r)),St(function(r,a,s,g){var l,c,u,I=[],d=[],C=a.length,h=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)Qt(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),A=!e||!r&&t?h:Et(h,I,e,s,g),f=n?o||(r?e:C||i)?[]:a:A;if(n&&n(A,f,s,g),i)for(l=Et(f,d),i(l,[],s,g),c=l.length;c--;)(u=l[c])&&(f[d[c]]=!(A[d[c]]=u));if(r){if(o||e){if(o){for(l=[],c=f.length;c--;)(u=f[c])&&l.push(A[c]=u);o(null,f=[],l,g)}for(c=f.length;c--;)(u=f[c])&&-1<(l=o?st.call(r,u):I[c])&&(r[l]=!(a[l]=u))}}else f=Et(f===a?f.splice(C,f.length):f),o?o(null,a,f,g):rt.apply(a,f)})}function Ot(e){for(var t,n,i,o=e.length,r=Xe.relative[e[0].type],a=r||Xe.relative[" "],s=r?1:0,g=Tt(function(e){return e===t},a,!0),l=Tt(function(e){return-1<st.call(t,e)},a,!0),c=[function(e,n,i){return!r&&(i||n!==Ue)||((t=n).nodeType?g(e,n,i):l(e,n,i))}];s<o;s++)if(n=Xe.relative[e[s].type])c=[Tt(Wt(c),n)];else{if((n=Xe.filter[e[s].type].apply(null,e[s].matches))[_e]){for(i=++s;i<o&&!Xe.relative[e[i].type];i++);return Ht(1<s&&Wt(c),1<s&&Ut(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(It,"$1"),n,s<i&&Ot(e.slice(s,i)),i<o&&Ot(e=e.slice(i)),i<o&&Ut(e))}c.push(n)}return Wt(c)}Dt.prototype=Xe.filters=Xe.pseudos,Xe.setFilters=new Dt,ke=Qt.tokenize=function(e,t){var n,i,o,r,a,s,g,l=je[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],g=Xe.preFilter;a;){for(r in n&&!(i=dt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=Ct.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(It," ")}),a=a.slice(n.length)),Xe.filter)!(i=mt[r].exec(a))||g[r]&&!(i=g[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Qt.error(e):je(e,s).slice(0)},Re=Qt.compile=function(e,t){var n,i,o,r,a,s,g=[],l=[],c=$e[e+" "];if(!c){for(t||(t=ke(e)),n=t.length;n--;)(c=Ot(t[n]))[_e]?g.push(c):l.push(c);(c=$e(e,(i=l,r=0<(o=g).length,a=0<i.length,s=function(e,t,n,s,g){var l,c,u,I=0,d="0",C=e&&[],h=[],A=Ue,f=e||a&&Xe.find.TAG("*",g),m=ze+=null==A?1:Math.random()||.1,p=f.length;for(g&&(Ue=t!==He&&t);d!==p&&null!=(l=f[d]);d++){if(a&&l){for(c=0;u=i[c++];)if(u(l,t,n)){s.push(l);break}g&&(ze=m)}r&&((l=!u&&l)&&I--,e&&C.push(l))}if(I+=d,r&&d!==I){for(c=0;u=o[c++];)u(C,h,t,n);if(e){if(0<I)for(;d--;)C[d]||h[d]||(h[d]=it.call(s));h=Et(h)}rt.apply(s,h),g&&!e&&0<h.length&&1<I+o.length&&Qt.uniqueSort(s)}return g&&(ze=m,Ue=A),C},r?St(s):s))).selector=e}return c},De=Qt.select=function(e,t,n,i){var o,r,a,s,g,l="function"==typeof e&&e,c=!i&&ke(e=l.selector||e);if(n=n||[],1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(a=r[0]).type&&Se.getById&&9===t.nodeType&&Le&&Xe.relative[r[1].type]){if(!(t=(Xe.find.ID(a.matches[0].replace(Ft,Gt),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=mt.needsContext.test(e)?0:r.length;o--&&!Xe.relative[s=(a=r[o]).type];)if((g=Xe.find[s])&&(i=g(a.matches[0].replace(Ft,Gt),yt.test(r[0].type)&&Rt(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&Ut(r)))return rt.apply(n,i),n;break}}return(l||Re(e,c))(i,t,!Le,n,yt.test(e)&&Rt(t.parentNode)||t),n},Se.sortStable=_e.split("").sort(qe).join("")===_e,Se.detectDuplicates=!!We,Ee(),Se.sortDetached=!0;var Lt=Array.isArray,Vt=function(e,t,n){var i,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(i=0,o=e.length;i<o;i++)if(!1===t.call(n,e[i],i,e))return 0}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return 0;return 1},Yt=function(e,t,n){var i,o;for(i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return i;return-1},Mt={isArray:Lt,toArray:function(e){var t,n,i=e;if(!Lt(e))for(i=[],t=0,n=e.length;t<n;t++)i[t]=e[t];return i},each:Vt,map:function(e,t){var n=[];return Vt(e,function(i,o){n.push(t(i,o,e))}),n},filter:function(e,t){var n=[];return Vt(e,function(i,o){t&&!t(i,o,e)||n.push(i)}),n},indexOf:function(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,i){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(i,n,e[o],o);return n},findIndex:Yt,find:function(e,t,n){var i=Yt(e,t,n);return-1!==i?e[i]:void 0},last:function(e){return e[e.length-1]}},_t=/^\s*|\s*$/g,Kt=function(e){return null==e?"":(""+e).replace(_t,"")},zt=function(e,t){return t?!("array"!==t||!Mt.isArray(e))||typeof e===t:void 0!==e},Jt=function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),Mt.each(e,function(e,o){if(!1===t.call(i,e,o,n))return!1;Jt(e,t,n,i)}))},Pt={trim:Kt,isArray:Mt.isArray,is:zt,toArray:Mt.toArray,makeMap:function(e,t,n){var i;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n},each:Mt.each,map:Mt.map,grep:Mt.filter,inArray:Mt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,i,o,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s,g=arguments;for(n=1,i=g.length;n<i;n++)for(o in t=g[n])t.hasOwnProperty(o)&&void 0!==(s=t[o])&&(e[o]=s);return e},create:function(e,t,n){var i,o,r,a,s,g=this,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=g.createNS(e[3].replace(/\.\w+$/,""),n))[r]){if("static"===e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},l=1),o[r]=t[r],g.extend(o[r].prototype,t),e[5]&&(i=g.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[r],o[r]=l?function(){return i[a].apply(this,arguments)}:function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],g.each(i,function(e,t){o[r].prototype[t]=i[t]}),g.each(t,function(e,t){i[t]?o[r].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!==r&&(o[r].prototype[t]=e)})),g.each(t.static,function(e,t){o[r][t]=e})}},walk:Jt,createNS:function(t,n){var i,o;for(n=n||e.window,t=t.split("."),i=0;i<t.length;i++)n[o=t[i]]||(n[o]={}),n=n[o];return n},resolve:function(t,n){var i,o;for(n=n||e.window,i=0,o=(t=t.split(".")).length;i<o&&(n=n[t[i]]);i++);return n},explode:function(e,t){return!e||zt(e,"array")?e:Mt.map(e.split(t||","),Kt)},_addCacheSuffix:function(e){var t=de.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},jt=e.document,$t=Array.prototype.push,qt=Array.prototype.slice,en=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,tn=Qe.Event,nn=Pt.makeMap("children,contents,next,prev"),on=function(e){return void 0!==e},rn=function(e){return"string"==typeof e},an=function(e,t){var n,i,o;for(o=(t=t||jt).createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;i=o.firstChild;)n.appendChild(i);return n},sn=function(e,t,n,i){var o;if(rn(t))t=an(t,Bn(e[0]));else if(t.length&&!t.nodeType){if(t=An.makeArray(t),i)for(o=t.length-1;0<=o;o--)sn(e,t[o],n,i);else for(o=0;o<t.length;o++)sn(e,t[o],n,i);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},gn=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},ln=function(e,t,n){var i,o;return t=An(t)[0],e.each(function(){var e=this;n&&i===e.parentNode||(i=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)}),e},cn=Pt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),un=Pt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),In={for:"htmlFor",class:"className",readonly:"readOnly"},dn={float:"cssFloat"},Cn={},hn={},An=function(e,t){return new An.fn.init(e,t)},fn=/^\s*|\s*$/g,mn=function(e){return null==e?"":(""+e).replace(fn,"")},pn=function(e,t){var n,i,o,r;if(e)if(void 0===(n=e.length)){for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(r=e[i],i,r))break}else for(o=0;o<n&&!1!==t.call(r=e[o],o,r);o++);return e},bn=function(e,t){var n=[];return pn(e,function(e,i){t(i,e)&&n.push(i)}),n},Bn=function(e){return e?9===e.nodeType?e:e.ownerDocument:jt};An.fn=An.prototype={constructor:An,selector:"",context:null,length:0,init:function(t,n){var i,o,r=this;if(!t)return r;if(t.nodeType)return r.context=r[0]=t,r.length=1,r;if(n&&n.nodeType)r.context=n;else{if(n)return An(t).attr(n);r.context=n=e.document}if(rn(t)){if(!(i="<"===(r.selector=t).charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:en.exec(t)))return An(n).find(t);if(i[1])for(o=an(t,Bn(n)).firstChild;o;)$t.call(r,o),o=o.nextSibling;else{if(!(o=Bn(n).getElementById(i[2])))return r;if(o.id!==i[2])return r.find(t);r.length=1,r[0]=o}}else this.add(t,!1);return r},toArray:function(){return Pt.toArray(this)},add:function(e,t){var n,i,o=this;if(rn(e))return o.add(An(e));if(!1!==t)for(n=An.unique(o.toArray().concat(An.makeArray(e))),o.length=n.length,i=0;i<n.length;i++)o[i]=n[i];else $t.apply(o,An.makeArray(e));return o},attr:function(e,t){var n,i=this;if("object"==typeof e)pn(e,function(e,t){i.attr(e,t)});else{if(!on(t)){if(i[0]&&1===i[0].nodeType){if((n=Cn[e])&&n.get)return n.get(i[0],e);if(un[e])return i.prop(e)?e:void 0;null===(t=i[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=Cn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=In[e]||e))pn(e,function(e,t){n.prop(e,t)});else{if(!on(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,i,o=this,r=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)pn(e,function(e,t){o.css(e,t)});else if(on(t))e=r(e),"number"!=typeof t||cn[e]||(t=t.toString()+"px"),o.each(function(){var n=this.style;if((i=hn[e])&&i.set)i.set(this,t);else{try{this.style[dn[e]||e]=t}catch(r){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}});else{if(n=o[0],(i=hn[e])&&i.get)return i.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[r(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(I){return}}return o},remove:function(){for(var e,t=this.length;t--;)tn.clean(e=this[t]),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(on(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(l){An(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(on(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return sn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return sn(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?sn(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?sn(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return An(e).append(this),this},prependTo:function(e){return An(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return ln(this,e)},wrapAll:function(e){return ln(this,e,!0)},wrapInner:function(e){return this.each(function(){An(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){An(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),An(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?pn(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,i){var o,r;(r=gn(i,e))!==t&&(o=i.className,r?i.className=mn((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e)})),n},hasClass:function(e){return gn(this[0],e)},each:function(e){return pn(this,e)},on:function(e,t){return this.each(function(){tn.bind(this,e,t)})},off:function(e,t){return this.each(function(){tn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?tn.fire(this,e.type,e):tn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new An(qt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)An.find(e,this[t],i);return An(i)},filter:function(e){return An("function"==typeof e?bn(this.toArray(),function(t,n){return e(n,t)}):An.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof An&&(e=e[0]),this.each(function(n,i){for(;i;){if("string"==typeof e&&An(i).is(e)){t.push(i);break}if(i===e){t.push(i);break}i=i.parentNode}}),An(t)},offset:function(e){var t,n,i,o,r=0,a=0;return e?this.css(e):((t=this[0])&&(i=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(r=(o=t.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:a})},push:$t,sort:[].sort,splice:[].splice},Pt.extend(An,{extend:Pt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Pt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Pt.isArray,each:pn,trim:mn,grep:bn,find:Qt,expr:Qt.selectors,unique:Qt.uniqueSort,text:Qt.getText,contains:Qt.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!==t[i].nodeType&&t.splice(i,1);return 1===t.length?An.find.matchesSelector(t[0],e)?[t[0]]:[]:An.find.matches(e,t)}});var vn=function(e,t,n){var i=[],o=e[t];for("string"!=typeof n&&n instanceof An&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&An(o).is(n))break}1===o.nodeType&&i.push(o),o=o[t]}return i},yn=function(e,t,n,i){var o=[];for(i instanceof An&&(i=i[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==i){if(e===i)break;if("string"==typeof i&&An(e).is(i))break}o.push(e)}return o},xn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};pn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return vn(e,"parentNode")},next:function(e){return xn(e,"nextSibling",1)},prev:function(e){return xn(e,"previousSibling",1)},children:function(e){return yn(e.firstChild,"nextSibling",1)},contents:function(e){return Pt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){An.fn[e]=function(n){var i=[];return this.each(function(){var e=t.call(i,this,n,i);e&&(An.isArray(e)?i.push.apply(i,e):i.push(e))}),1<this.length&&(nn[e]||(i=An.unique(i)),0===e.indexOf("parents")&&(i=i.reverse())),i=An(i),n?i.filter(n):i}}),pn({parentsUntil:function(e,t){return vn(e,"parentNode",t)},nextUntil:function(e,t){return yn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return yn(e,"previousSibling",1,t).slice(1)}},function(e,t){An.fn[e]=function(n,i){var o=[];return this.each(function(){var e=t.call(o,this,n,o);e&&(An.isArray(e)?o.push.apply(o,e):o.push(e))}),1<this.length&&(o=An.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=An(o),i?o.filter(i):o}}),An.fn.is=function(e){return!!e&&0<this.filter(e).length},An.fn.init.prototype=An.fn,An.overrideDefaults=function(e){var t,n=function(i,o){return t=t||e(),0===arguments.length&&(i=t.element),o||(o=t.context),new n.fn.init(i,o)};return An.extend(n,this),n};var Fn=function(e,t,n){pn(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})};de.ie&&de.ie<8&&(Fn(Cn,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?void 0:t},size:function(e){var t=e.size;return 20===t?void 0:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?void 0:t}}),Fn(Cn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),de.ie&&de.ie<9&&(dn.float="styleFloat",Fn(hn,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),An.attrHooks=Cn,An.cssHooks=hn;var Gn,Qn,wn,Sn,Xn,Zn,Nn=function(){return kn(0,0)},kn=function(e,t){return{major:e,minor:t}},Rn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Nn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return kn(i(1),i(2))}(e,n)},Dn=Nn,Un="Firefox",Tn=function(e,t){return function(){return t===e}},Wn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Tn("Edge",t),isChrome:Tn("Chrome",t),isIE:Tn("IE",t),isOpera:Tn("Opera",t),isFirefox:Tn(Un,t),isSafari:Tn("Safari",t)}},En=function(){return Wn({current:void 0,version:Dn()})},Hn=Wn,On=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i(Un),i("Safari"),"Windows"),Ln="Android",Vn="Solaris",Yn="FreeBSD",Mn=function(e,t){return function(){return t===e}},_n=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Mn(On,t),isiOS:Mn("iOS",t),isAndroid:Mn(Ln,t),isOSX:Mn("OSX",t),isLinux:Mn("Linux",t),isSolaris:Mn(Vn,t),isFreeBSD:Mn(Yn,t)}},Kn=function(){return _n({current:void 0,version:Dn()})},zn=_n,Jn=(i(On),i("iOS"),i(Ln),i("Linux"),i("OSX"),i(Vn),i(Yn),function(e,t){var n=String(t).toLowerCase();return J(e,function(e){return e.search(n)})}),Pn=function(e,t){return-1!==e.indexOf(t)},jn=function(e){return e.replace(/^\s+|\s+$/g,"")},$n=function(e){return e.replace(/\s+$/g,"")},qn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ei=function(e){return function(t){return Pn(t,e)}},ti=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Pn(e,"edge/")&&Pn(e,"chrome")&&Pn(e,"safari")&&Pn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,qn],search:function(e){return Pn(e,"chrome")&&!Pn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Pn(e,"msie")||Pn(e,"trident")}},{name:"Opera",versionRegexes:[qn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ei("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ei("firefox")},{name:"Safari",versionRegexes:[qn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Pn(e,"safari")||Pn(e,"mobile/"))&&Pn(e,"applewebkit")}}],ni=[{name:"Windows",search:ei("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Pn(e,"iphone")||Pn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ei("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ei("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ei("linux"),versionRegexes:[]},{name:"Solaris",search:ei("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ei("freebsd"),versionRegexes:[]}],ii={browsers:i(ti),oses:i(ni)},oi={detect:(Gn=function(){return t=e.navigator.userAgent,C=ii.browsers(),h=ii.oses(),{browser:A=function(e,t){return Jn(C,t).map(function(e){var n=Rn(e.versionRegexes,t);return{current:e.name,version:n}})}(0,t).fold(En,Hn),os:f=function(e,t){return Jn(h,t).map(function(e){var n=Rn(e.versionRegexes,t);return{current:e.name,version:n}})}(0,t).fold(Kn,zn),deviceType:(o=A,r=t,a=(n=f).isiOS()&&!0===/ipad/i.test(r),s=n.isiOS()&&!a,g=n.isAndroid()&&3===n.version.major,l=n.isAndroid()&&4===n.version.major,c=a||g||l&&!0===/mobile/i.test(r),u=n.isiOS()||n.isAndroid(),I=u&&!c,d=o.isSafari()&&n.isiOS()&&!1===/safari/i.test(r),{isiPad:i(a),isiPhone:i(s),isTablet:i(c),isPhone:i(I),isTouch:i(u),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:i(d)})};var t,n,o,r,a,s,g,l,c,u,I,d,C,h,A,f},wn=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wn||(wn=!0,Qn=Gn.apply(null,e)),Qn})},ri=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:i(e)}},ai={fromHtml:function(t,n){var i=(n||e.document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||1<i.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return ri(i.childNodes[0])},fromTag:function(t,n){var i=(n||e.document).createElement(t);return ri(i)},fromText:function(t,n){var i=(n||e.document).createTextNode(t);return ri(i)},fromDom:ri,fromPoint:function(e,t,n){var i=e.dom();return Z.from(i.elementFromPoint(t,n)).map(ri)}},si=e.Node.DOCUMENT_NODE,gi=e.Node.ELEMENT_NODE,li=e.Node.TEXT_NODE,ci=function(e){return e.dom().nodeName.toLowerCase()},ui=function(e){return function(t){return t.dom().nodeType===e}},Ii=ui(gi),di=ui(li),Ci=Object.keys,hi=Object.hasOwnProperty,Ai=function(e,t){for(var n=Ci(e),i=0,o=n.length;i<o;i++){var r=n[i];t(e[r],r,e)}},fi=function(e,t){var n={};return Ai(e,function(i,o){var r=t(i,o,e);n[r.k]=r.v}),n},mi=function(e){return void 0!==e.style&&W(e.style.getPropertyValue)},pi=function(t,n,i){if(!(k(i)||T(i)||E(i)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,i+"")},bi=function(e,t,n){pi(e.dom(),t,n)},Bi=function(e,t){var n=e.dom();Ai(t,function(e,t){pi(n,t,e)})},vi=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},yi=function(e,t){e.dom().removeAttribute(t)},xi=function(t,n){var i,o,r=t.dom(),a=e.window.getComputedStyle(r).getPropertyValue(n),s=""!==a||void 0!==(o=di(i=t)?i.dom().parentNode:i.dom())&&null!==o&&o.ownerDocument.body.contains(o)?a:Fi(r,n);return null===s?void 0:s},Fi=function(e,t){return mi(e)?e.style.getPropertyValue(t):""},Gi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var o={};return M(e,function(e,n){o[e]=i(t[n])}),o}},Qi=function(e,t){for(var n=[],i=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(i)).isSome(););return n},wi=gi,Si=si,Xi=function(e,t){var n=e.dom();if(n.nodeType!==wi)return!1;var i=n;if(void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Zi=function(e){return e.nodeType!==wi&&e.nodeType!==Si||0===e.childElementCount},Ni=function(e,t){return e.dom()===t.dom()},ki=oi.detect().browser.isIE()?function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ae.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),t.dom())}:function(e,t){var n=e.dom(),i=t.dom();return n!==i&&n.contains(i)},Ri=function(e){return ai.fromDom(e.dom().ownerDocument)},Di=function(e){return ai.fromDom(e.dom().ownerDocument.defaultView)},Ui=function(e){return Z.from(e.dom().parentNode).map(ai.fromDom)},Ti=function(e){return Z.from(e.dom().previousSibling).map(ai.fromDom)},Wi=function(e){return Z.from(e.dom().nextSibling).map(ai.fromDom)},Ei=function(e){return t=Qi(e,Ti),(n=H.call(t,0)).reverse(),n;var t,n},Hi=function(e){return Qi(e,Wi)},Oi=function(e){return Y(e.dom().childNodes,ai.fromDom)},Li=function(e,t){var n=e.dom().childNodes;return Z.from(n[t]).map(ai.fromDom)},Vi=function(e){return Li(e,0)},Yi=function(e){return Li(e,e.dom().childNodes.length-1)},Mi=(Gi("element","offset"),oi.detect().browser),_i=function(e){return J(e,Ii)},Ki={getPos:function(e,t,n){var i,o,r,a=0,s=0,g=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===xi(ai.fromDom(e),"position"))return{x:a=(o=t.getBoundingClientRect()).left+(g.documentElement.scrollLeft||e.scrollLeft)-g.documentElement.clientLeft,y:s=o.top+(g.documentElement.scrollTop||e.scrollTop)-g.documentElement.clientTop};for(i=t;i&&i!==n&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!==n&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode;s+=(r=ai.fromDom(t),Mi.isFirefox()&&"table"===ci(r)?_i(Oi(r)).filter(function(e){return"caption"===ci(e)}).bind(function(e){return _i(Hi(e)).map(function(t){var n=t.dom().offsetTop,i=e.dom().offsetTop,o=e.dom().offsetHeight;return n<=i?-o:0})}).getOr(0):0)}return{x:a,y:s}}},zi={},Ji={exports:zi};Sn=zi,Xn=Ji,Zn=void 0,function(e){"object"==typeof Sn&&void 0!==Xn?Xn.exports=e():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}(function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var g="function"==typeof Zn&&Zn;if(!s&&g)return g(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof Zn&&Zn,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i,o,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function g(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(Db){try{return i.call(null,e,0)}catch(Db){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(Db){i=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(Db){o=s}}();var l,c=[],u=!1,I=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):I=-1,c.length&&C())}function C(){if(!u){var e=g(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++I<t;)l&&l[I].run();I=-1,t=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(Db){try{return o.call(null,e)}catch(Db){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function A(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||g(C)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=A,r.addListener=A,r.once=A,r.off=A,r.removeListener=A,r.removeAllListeners=A,r.emit=A,r.prependListener=A,r.prependOnceListener=A,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var i=setTimeout;function o(){}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(Db){return void g(t.promise,Db)}s(t.promise,i)}else(1===e._state?s:g)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(Db){g(e,Db)}var i,o}function g(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,g(t,e))})}catch(o){if(n)return;n=!0,g(t,o)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new c(e,t,n)),n},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){if(0===t.length)return e([]);var i=t.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var g=s.then;if("function"==typeof g)return void g.call(s,function(e){r(a,e)},n)}t[a]=s,0==--i&&e(t)}catch(o){n(o)}}for(var a=0;a<t.length;a++)r(a,t[a])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},r._immediateFn="function"==typeof e?function(t){e(t)}:function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=r:n.Promise||(n.Promise=r)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,i){var o=e("process/browser.js").nextTick,r=Function.prototype.apply,a=Array.prototype.slice,s={},g=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=g++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,o(function(){s[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var i=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)});var Pi=Ji.exports.boltExport,ji=function(t){var n=Z.none(),i=[],o=function(e){r()?a(e):i.push(e)},r=function(){return n.isSome()},a=function(t){n.each(function(n){e.setTimeout(function(){t(n)},0)})};return t(function(e){n=Z.some(e),M(i,a),i=[]}),{get:o,map:function(e){return ji(function(t){o(function(n){t(e(n))})})},isReady:r}},$i={nu:ji,pure:function(e){return ji(function(t){t(e)})}},qi=function(t){e.setTimeout(function(){throw t},0)},eo=function(e){var t=function(t){e().then(t,qi)};return{map:function(t){return eo(function(){return e().then(t)})},bind:function(t){return eo(function(){return e().then(function(e){return t(e).toPromise()})})},anonBind:function(t){return eo(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return $i.nu(t)},toCached:function(){var t=null;return eo(function(){return null===t&&(t=e()),t})},toPromise:e,get:t}},to={nu:function(e){return eo(function(){return new Pi(e)})},pure:function(e){return eo(function(){return Pi.resolve(e)})}},no=function(e){return t=e,(0,to.nu)(function(e){var n=[],i=0;0===t.length?e([]):M(t,function(o,r){var a;o.get((a=r,function(o){n[a]=o,++i>=t.length&&e(n)}))})});var t},io=function(e){return{is:function(t){return e===t},isValue:F,isError:x,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:function(t){return io(e)},orThunk:function(t){return io(e)},fold:function(t,n){return n(e)},map:function(t){return io(t(e))},mapError:function(t){return io(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return Z.some(e)}}},oo=function(e){return{is:x,isValue:x,isError:F,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return oo(e)},mapError:function(t){return oo(t(e))},each:t,bind:function(t){return oo(e)},exists:x,forall:F,toOption:Z.none}},ro={value:io,error:oo,fromOption:function(e,t){return e.fold(function(){return oo(t)},io)}};function ao(e,t){var n=e,i=function(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!==t){if(r=e[i])return r;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(r=a[i])return r}}};this.current=function(){return n},this.next=function(e){return n=i(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=i(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,i,o){var r,a,s;if(e){if(r=e.previousSibling,t&&r===t)return;if(r){if(!o)for(s=r[n];s;s=s[n])if(!s[n])return s;return r}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var so,go,lo,co=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},i=0,o=e.length;i<o;i++){var r=e[i];n[String(r)]=t(r,i)}return n}(e,i(!0))).hasOwnProperty(ci(n))}},uo=co(["h1","h2","h3","h4","h5","h6"]),Io=co(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Co=function(e){return Ii(e)&&!Io(e)},ho=function(e){return Ii(e)&&"br"===ci(e)},Ao=co(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),fo=co(["ul","ol","dl"]),mo=co(["li","dd","dt"]),po=co(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),bo=co(["thead","tbody","tfoot"]),Bo=co(["td","th"]),vo=co(["pre","script","textarea","style"]),yo=function(e){return function(t){return!!t&&t.nodeType===e}},xo=yo(1),Fo=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,i;if(e&&e.nodeType)for(i=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(i===t[n])return!0;return!1}},Go=function(e){return function(t){if(xo(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Qo=yo(3),wo=yo(8),So=yo(9),Xo=yo(11),Zo=Fo("br"),No=Go("true"),ko=Go("false"),Ro={isText:Qo,isElement:xo,isComment:wo,isDocument:So,isDocumentFragment:Xo,isBr:Zo,isContentEditableTrue:No,isContentEditableFalse:ko,isRestrictedNode:function(e){return!!e&&!Object.getPrototypeOf(e)},matchNodeNames:Fo,hasPropValue:function(e,t){return function(n){return xo(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return xo(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return xo(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var i;if(xo(t))for(i=0;i<n.length;i++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[i])return!0}return!1}},isBogus:function(e){return xo(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return xo(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return xo(e)&&"TABLE"===e.tagName}},Do=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Uo=function(e,t){var n,i=t.childNodes;if(!Ro.isElement(t)||!Do(t)){for(n=i.length-1;0<=n;n--)Uo(e,i[n]);if(!1===Ro.isDocument(t)){if(Ro.isText(t)&&0<t.nodeValue.length){var o=Pt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<o)return;if(0===o&&(r=t).previousSibling&&"SPAN"===r.previousSibling.nodeName&&r.nextSibling&&"SPAN"===r.nextSibling.nodeName)return}else if(Ro.isElement(t)&&(1===(i=t.childNodes).length&&Do(i[0])&&t.parentNode.insertBefore(i[0],t),i.length||po(ai.fromDom(t))))return;e.remove(t)}var r;return t}},To={trimNode:Uo},Wo=Pt.makeMap,Eo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ho=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oo=/[<>&\"\']/g,Lo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Vo={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};go={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},lo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Yo=function(e,t){var n,i,o,r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),go[i]||(r[i]=o="&"+e[n+1]+";",r[o]=i);return r}};so=Yo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Mo=function(e,t){return e.replace(t?Eo:Ho,function(e){return go[e]||e})},_o=function(e,t){return e.replace(t?Eo:Ho,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":go[e]||"&#"+e.charCodeAt(0)+";"})},Ko=function(e,t,n){return n=n||so,e.replace(t?Eo:Ho,function(e){return go[e]||n[e]||e})},zo={encodeRaw:Mo,encodeAllRaw:function(e){return(""+e).replace(Oo,function(e){return go[e]||e})},encodeNumeric:_o,encodeNamed:Ko,getEncodeFunc:function(e,t){var n=Yo(t)||so,i=Wo(e.replace(/\+/g,","));return i.named&&i.numeric?function(e,t){return e.replace(t?Eo:Ho,function(e){return void 0!==go[e]?go[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:i.named?t?function(e,t){return Ko(e,t,n)}:Ko:i.numeric?_o:Mo},decode:function(e){return e.replace(Lo,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Vo[t]||String.fromCharCode(t):lo[e]||so[e]||(n=e,(i=ai.fromTag("div").dom()).innerHTML=n,i.textContent||i.innerText||n);var n,i})}},Jo={},Po={},jo=Pt.makeMap,$o=Pt.each,qo=Pt.extend,er=Pt.explode,tr=Pt.inArray,nr=function(e,t){return(e=Pt.trim(e))?e.split(t||" "):[]},ir=function(e){var t,n,i,o,r,a,s={},g=function(e,n,i){var o,r,a,g=function(e,t){var n,i,o={};for(n=0,i=e.length;n<i;n++)o[e[n]]=t||{};return o};for(n=n||"","string"==typeof(i=i||[])&&(i=nr(i)),o=(e=nr(e)).length;o--;)a={attributes:g(r=nr([t,n].join(" "))),attributesOrder:r,children:g(i,Po)},s[e[o]]=a},l=function(e,t){var n,i,o,r;for(n=(e=nr(e)).length,t=nr(t);n--;)for(i=s[e[n]],o=0,r=t.length;o<r;o++)i.attributes[t[o]]={},i.attributesOrder.push(t[o])};return Jo[e]?Jo[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",i=[i,a="acronym applet basefont big font strike tt"].join(" "),$o(nr(a),function(e){g(e,"",i)}),n=[n,r="center dir isindex noframes"].join(" "),o=[n,i].join(" "),$o(nr(r),function(e){g(e,"",o)})),o=o||[n,i].join(" "),g("html","manifest","head body"),g("head","","base command link meta noscript script style title"),g("title hr noscript br"),g("base","href target"),g("link","href rel media hreflang type sizes hreflang"),g("meta","name http-equiv content charset"),g("style","media type scoped"),g("script","src async defer type charset"),g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),g("address dt dd div caption","",o),g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),g("blockquote","cite",o),g("ol","reversed start type","li"),g("ul","","li"),g("li","value",o),g("dl","","dt dd"),g("a","href target rel media hreflang type",i),g("q","cite",i),g("ins del","cite datetime",o),g("img","src sizes srcset alt usemap ismap width height"),g("iframe","src name width height",o),g("embed","src type width height"),g("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),g("param","name value"),g("map","name",[o,"area"].join(" ")),g("area","alt coords shape href target rel media hreflang type"),g("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),g("colgroup","span","col"),g("col","span"),g("tbody thead tfoot","","tr"),g("tr","","td th"),g("td","colspan rowspan headers",o),g("th","colspan rowspan headers scope abbr",o),g("form","accept-charset action autocomplete enctype method name novalidate target",o),g("fieldset","disabled form name",[o,"legend"].join(" ")),g("label","form for",i),g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:i),g("select","disabled form multiple name required size","option optgroup"),g("optgroup","disabled label","option"),g("option","disabled label selected value"),g("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),g("menu","type label",[o,"li"].join(" ")),g("noscript","",o),"html4"!==e&&(g("wbr"),g("ruby","",[i,"rt rp"].join(" ")),g("figcaption","",o),g("mark rt rp summary bdi","",i),g("canvas","width height",o),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[i,"option"].join(" ")),g("article section nav aside main header footer","",o),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[o,"figcaption"].join(" ")),g("time","datetime",i),g("dialog","open",o),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",i),g("progress","value max",i),g("meter","value min max low high optimum",i),g("details","open",[o,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen")),$o(nr("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Jo[e]=s)},or=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),$o(e,function(e,i){n[i]=n[i.toUpperCase()]="map"===t?jo(e,/[, ]/):er(e,/[, ]/)})),n};function rr(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,C={},h={},A=[],f={},m={},p=function(t,n,i){var o=e[t];return o?o=jo(o,/[, ]/,jo(o.toUpperCase(),/[, ]/)):(o=Jo[t])||(o=jo(n," ",jo(n.toUpperCase()," ")),o=qo(o,i),Jo[t]=o),o};i=ir((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=or(e.valid_styles),n=or(e.invalid_styles,"map"),g=or(e.valid_classes,"map"),o=p("whitespace_elements","pre script noscript style textarea video audio iframe object code"),r=p("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=p("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=p("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=p("non_empty_elements","td th iframe video audio object script pre code",a),u=p("move_caret_before_on_enter_elements","table",c),I=p("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),l=p("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",I),d=p("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),$o((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){m[e]=new RegExp("</"+e+"[^>]*>","gi")});var b=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},B=function(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,h,f,m,p,B,v,y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(e)for(e=nr(e,","),C["@"]&&(m=C["@"].attributes,p=C["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(r=y.exec(e[t])){if(l=r[2],f=r[3],g=r[5],a={attributes:I={},attributesOrder:d=[]},"#"===(h=r[1])&&(a.paddEmpty=!0),"-"===h&&(a.removeEmpty=!0),"!"===r[4]&&(a.removeEmptyAttrs=!0),m){for(B in m)I[B]=m[B];d.push.apply(d,p)}if(g)for(i=0,o=(g=nr(g,"|")).length;i<o;i++)if(r=x.exec(g[i])){if(s={},u=r[1],c=r[2].replace(/[\\:]:/g,":"),h=r[3],v=r[4],"!"===u&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===u){delete I[c],d.splice(tr(d,c),1);continue}h&&("="===h&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:v}),s.defaultValue=v),":"===h&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:v}),s.forcedValue=v),"<"===h&&(s.validValues=jo(v,"?"))),F.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=b(c),a.attributePatterns.push(s)):(I[c]||d.push(c),I[c]=s)}m||"@"!==l||(m=I,p=d),f&&(a.outputName=l,C[f]=a),F.test(l)?(a.pattern=b(l),A.push(a)):C[l]=a}},v=function(e){C={},A=[],B(e),$o(i,function(e,t){h[t]=e.children})},y=function(e){var t=/^(~)?(.+)$/;e&&(Jo.text_block_elements=Jo.block_elements=null,$o(nr(e,","),function(e){var n=t.exec(e),i="~"===n[1],o=i?"span":"div",r=n[2];if(h[r]=h[o],f[r]=o,i||(l[r.toUpperCase()]={},l[r]={}),!C[r]){var a=C[o];delete(a=qo({},a)).removeEmptyAttrs,delete a.removeEmpty,C[r]=a}$o(h,function(e,t){e[o]&&(h[t]=e=qo({},h[t]),e[r]=e[o])})}))},x=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Jo[e.schema]=null,t&&$o(nr(t,","),function(e){var t,i,o=n.exec(e);o&&(t=(i=o[1])?h[o[2]]:h[o[2]]={"#comment":{}},t=h[o[2]],$o(nr(o[3],"|"),function(e){"-"===i?delete t[e]:t[e]={}}))})},F=function(e){var t,n=C[e];if(n)return n;for(t=A.length;t--;)if((n=A[t]).pattern.test(e))return n};return e.valid_elements?v(e.valid_elements):($o(i,function(e,t){C[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},h[t]=e.children}),"html5"!==e.schema&&$o(nr("strong/b em/i"),function(e){e=nr(e,"/"),C[e[1]].outputName=e[0]}),$o(nr("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){C[e]&&(C[e].removeEmpty=!0)}),$o(nr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){C[e].paddEmpty=!0}),$o(nr("span"),function(e){C[e].removeEmptyAttrs=!0})),y(e.custom_elements),x(e.valid_children),B(e.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),$o({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){C[t]&&(C[t].parentsRequired=nr(e))}),e.invalid_elements&&$o(er(e.invalid_elements),function(e){C[e]&&delete C[e]}),F("span")||B("span[!data-mce-type|*]"),{children:h,elements:C,getValidStyles:function(){return t},getValidClasses:function(){return g},getBlockElements:function(){return l},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return I},getTextInlineElements:function(){return d},getBoolAttrs:function(){return s},getElementRule:F,getSelfClosingElements:function(){return r},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return u},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return m},isValidChild:function(e,t){var n=h[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,i,o=F(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},getCustomElements:function(){return f},addValidElements:B,setValidElements:v,addCustomElements:y,addValidChildren:x}}var ar=function(e,t,n,i){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(i)};function sr(e,t){var n,i,o,r,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,g=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,c={},u="\ufeff";for(e=e||{},t&&(o=t.getValidStyles(),r=t.getInvalidStyles()),i=("\\\" \\' \\; \\: ; : "+u).split(" "),n=0;n<i.length;n++)c[i[n]]=u+n,c[u+n]=i[n];return{toHex:function(e){return e.replace(a,ar)},parse:function(t){var i,o,r,I,d,C,h,A={},f=e.url_converter,m=e.url_converter_scope||this,p=function(e,t,i){var o,r,a,s;if((o=A[e+"-top"+t])&&(r=A[e+"-right"+t])&&(a=A[e+"-bottom"+t])&&(s=A[e+"-left"+t])){var g=[o,r,a,s];for(n=g.length-1;n--&&g[n]===g[n+1];);-1<n&&i||(A[e+t]=-1===n?g[0]:g.join(" "),delete A[e+"-top"+t],delete A[e+"-right"+t],delete A[e+"-bottom"+t],delete A[e+"-left"+t])}},b=function(e){var t,n=A[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return A[e]=n[0],!0}},B=function(e){return I=!0,c[e]},v=function(e,t){return I&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},y=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},x=function(e){return e.replace(/\\[0-9a-f]+/gi,y)},F=function(t,n,i,o,r,a){if(r=r||a)return"'"+(r=v(r)).replace(/\'/g,"\\'")+"'";if(n=v(n||i||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return f&&(n=f.call(m,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,B).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,B)});i=g.exec(t);)if(g.lastIndex=i.index+i[0].length,o=i[1].replace(l,"").toLowerCase(),r=i[2].replace(l,""),o&&r){if(o=x(o),r=x(r),-1!==o.indexOf(u)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===o&&"700"===r?r="bold":"color"!==o&&"background-color"!==o||(r=r.toLowerCase()),r=(r=r.replace(a,ar)).replace(s,F),A[o]=I?v(r,!0):r}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),C="border-style",h="border-color",b(d="border-width")&&b(C)&&b(h)&&(A.border=A[d]+" "+A[C]+" "+A[h],delete A[d],delete A[C],delete A[h]),"medium none"===A.border&&delete A.border,"none"===A["border-image"]&&delete A["border-image"]}return A},serialize:function(e,t){var n,i,a,s,g="",l=function(t){var n,i,r,a;if(n=o[t])for(i=0,r=n.length;i<r;i++)(a=e[t=n[i]])&&(g+=(0<g.length?" ":"")+t+": "+a+";")};if(t&&o)l("*"),l(t);else for(n in e)!(i=e[n])||r&&(a=n,s=void 0,(s=r["*"])&&s[a]||(s=r[t])&&s[a])||(g+=(0<g.length?" ":"")+n+": "+i+";");return g}}}var gr,lr=Pt.each,cr=Pt.grep,ur=de.ie,Ir=/^([a-z0-9],?)+$/i,dr=/^[ \t\r\n]*$/,Cr=function(e,t,n){var i={},o=t.keep_values,r={set:function(e,i,o){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||n(),i,o,e[0])),e.attr("data-mce-"+o,i).attr(o,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return i={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},o&&(i.href=i.src=r),i},hr=function(e,t){var n=t.attr("style"),i=e.serialize(e.parse(n),t[0].nodeName);i||(i=null),t.attr("data-mce-style",i)},Ar=function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!==i||i!==n&&e.nodeValue.length)&&(o++,n=i);return o};function fr(t,r){var a,s=this;void 0===r&&(r={});var g={},l=e.window,c={},u=0,I=function(t,r){void 0===r&&(r={});var a,s=0,g={};a=r.maxLoadTime||5e3;var l=function(e){t.getElementsByTagName("head")[0].appendChild(e)},c=function(n,i,o){var c,u,I,d,C=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},h=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},A=function(e,t){e()||((new Date).getTime()-I<a?me.setTimeout(t):h())},f=function(){A(function(){for(var e,n,i=t.styleSheets,o=i.length;o--;)if((n=(e=i[o]).ownerNode?e.ownerNode:e.owningElement)&&n.id===c.id)return C(),!0},f)},m=function(){A(function(){try{var e=u.sheet.cssRules;return C(),!!e}catch(i){}},m)};if(n=Pt._addCacheSuffix(n),g[n]?d=g[n]:g[n]=d={passed:[],failed:[]},i&&d.passed.push(i),o&&d.failed.push(o),1!==d.status)if(2!==d.status)if(3!==d.status){if(d.status=1,(c=t.createElement("link")).rel="stylesheet",c.type="text/css",c.id="u"+s++,c.async=!1,c.defer=!1,I=(new Date).getTime(),r.contentCssCors&&(c.crossOrigin="anonymous"),"onload"in c&&!((p=e.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(p[1],10)<536))c.onload=f,c.onerror=h;else{if(0<e.navigator.userAgent.indexOf("Firefox"))return(u=t.createElement("style")).textContent='@import "'+n+'"',m(),void l(u);f()}var p;l(c),c.href=n}else h();else C()},u=function(e){return to.nu(function(t){c(e,n(t,i(ro.value(e))),n(t,i(ro.error(e))))})},I=function(e){return e.fold(o,o)};return{load:c,loadAll:function(e,t,n){no(Y(e,u)).get(function(e){var i=_(e,function(e){return e.isValue()});0<i.fail.length?n(i.fail.map(I)):t(i.pass.map(I))})}}}(t,{contentCssCors:r.contentCssCors}),d=[],C=r.schema?r.schema:rr({}),h=sr({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),A=r.ownEvents?new Qe(r.proxy):Qe.Event,f=C.getBlockElements(),m=An.overrideDefaults(function(){return{context:t,element:M.getRoot()}}),p=function(e){if(e&&t&&"string"==typeof e){var n=t.getElementById(e);return n&&n.id!==e?t.getElementsByName(e)[1]:n}return e},b=function(e){return"string"==typeof e&&(e=p(e)),m(e)},B=function(e,t,n){var i,o,r=b(e);return r.length&&(o=(i=a[t])&&i.get?i.get(r,t):r.attr(t)),void 0===o&&(o=n||""),o},v=function(e){var t=p(e);return t?t.attributes:[]},y=function(e,t,n){var i,o;""===n&&(n=null);var s=b(e);i=s.attr(t),s.length&&((o=a[t])&&o.set?o.set(s,n,t):s.attr(t,n),i!==n&&r.onSetAttrib&&r.onSetAttrib({attrElm:s,attrName:t,attrValue:n}))},x=function(){return r.root_element||t.body},F=function(e,n){return Ki.getPos(t.body,p(e),n)},G=function(e,t,n){var i=b(e);return n?i.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=de.ie&&de.ie<12?"styleFloat":"cssFloat"),i[0]&&i[0].style?i[0].style[t]:void 0)},Q=function(e){var t,n;return e=p(e),t=G(e,"width"),n=G(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},w=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Ir.test(t)){var i=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase();for(n=i.length-1;0<=n;n--)if(i[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var r=Array.isArray(e)?e:[e];return 0<Qt(t,r[0].ownerDocument||r[0],null,r).length},S=function(e,t,n,i){var o,r=[],a=p(e);for(i=void 0===i,n=n||("BODY"!==x().nodeName?x().parentNode:null),Pt.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return w(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!i)return[a];r.push(a)}a=a.parentNode}return i?r:null},X=function(e,t,n){var i=t;if(e)for("string"==typeof t&&(i=function(e){return w(e,t)}),e=e[n];e;e=e[n])if("function"==typeof i&&i(e))return e;return null},Z=function(e,t,n){var i,o="string"==typeof e?p(e):e;return!!o&&(Pt.isArray(o)&&(o.length||0===o.length)?(i=[],lr(o,function(e,o){e&&("string"==typeof e&&(e=p(e)),i.push(t.call(n,e,o)))}),i):t.call(n||s,o))},N=function(e,t){b(e).each(function(e,n){lr(t,function(e,t){y(n,t,e)})})},k=function(e,t){var n=b(e);ur?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(f){An("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},R=function(e,n,i,o,r){return Z(e,function(e){var a="string"==typeof n?t.createElement(n):n;return N(a,i),o&&("string"!=typeof o&&o.nodeType?a.appendChild(o):"string"==typeof o&&k(a,o)),r?a:e.appendChild(a)})},D=function(e,n,i){return R(t.createElement(e),e,n,i,!0)},U=zo.encodeAllRaw,T=function(e,t){var n=b(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},W=function(e,t,n){b(e).toggleClass(t,n).each(function(){""===this.className&&An(this).attr("class",null)})},E=function(e,t,n){return Z(t,function(t){return Pt.is(t,"array")&&(e=e.cloneNode(!0)),n&&lr(cr(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},H=function(){return t.createRange()},O=function(e,n,i,o){if(Pt.isArray(e)){for(var a=e.length;a--;)e[a]=O(e[a],n,i,o);return e}return!r.collect||e!==t&&e!==l||d.push([e,n,i,o]),A.bind(e,n,i,o||M)},L=function(e,n,i){var o;if(Pt.isArray(e)){for(o=e.length;o--;)e[o]=L(e[o],n,i);return e}if(d&&(e===t||e===l))for(o=d.length;o--;){var r=d[o];e!==r[0]||n&&n!==r[1]||i&&i!==r[2]||A.unbind(r[0],r[1],r[2])}return A.unbind(e,n,i)},V=function(e){if(e&&Ro.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},M={doc:t,settings:r,win:l,files:c,stdMode:!0,boxModel:!0,styleSheetLoader:I,boundEvents:d,styles:h,schema:C,events:A,isBlock:function(e){if("string"==typeof e)return!!f[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!f[e.nodeName])}return!1},$:m,$$:b,root:null,clone:function(e,n){if(!ur||1!==e.nodeType||n)return e.cloneNode(n);if(!n){var i=t.createElement(e.nodeName);return lr(v(e),function(t){y(i,t.nodeName,B(e,t.nodeName))}),i}return null},getRoot:x,getViewPort:function(e){var t=e||l,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=p(e),t=F(e),n=Q(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:Q,getParent:function(e,t,n){var i=S(e,t,n,!1);return i&&0<i.length?i[0]:null},getParents:S,get:p,getNext:function(e,t){return X(e,t,"nextSibling")},getPrev:function(e,t){return X(e,t,"previousSibling")},select:function(e,n){return Qt(e,p(n)||r.root_element||t,[])},is:w,add:R,create:D,createHTML:function(e,t,n){var i,o="";for(i in o+="<"+e,t)t.hasOwnProperty(i)&&null!=t[i]&&(o+=" "+i+'="'+U(t[i])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var n,i=t.createElement("div"),o=t.createDocumentFragment();for(e&&(i.innerHTML=e);n=i.firstChild;)o.appendChild(n);return o},remove:T,setStyle:function(e,t,n){var i=b(e).css(t,n);r.update_styles&&hr(h,i)},getStyle:G,setStyles:function(e,t){var n=b(e).css(t);r.update_styles&&hr(h,n)},removeAllAttribs:function(e){return Z(e,function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))})},setAttrib:y,setAttribs:N,getAttrib:B,getPos:F,parseStyle:function(e){return h.parse(e)},serializeStyle:function(e,t){return h.serialize(e,t)},addStyle:function(n){var i,o;if(M!==fr.DOM&&t===e.document){if(g[n])return;g[n]=!0}(o=t.getElementById("mceDefaultStyles"))||((o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css",(i=t.getElementsByTagName("head")[0]).firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(t.createTextNode(n))},loadCSS:function(n){var i;M===fr.DOM||t!==e.document?(n||(n=""),i=t.getElementsByTagName("head")[0],lr(n.split(","),function(e){var t;e=Pt._addCacheSuffix(e),c[e]||(c[e]=!0,t=D("link",{rel:"stylesheet",href:e}),i.appendChild(t))})):fr.DOM.loadCSS(n)},addClass:function(e,t){b(e).addClass(t)},removeClass:function(e,t){W(e,t,!1)},hasClass:function(e,t){return b(e).hasClass(t)},toggleClass:W,show:function(e){b(e).show()},hide:function(e){b(e).hide()},isHidden:function(e){return"none"===b(e).css("display")},uniqueId:function(e){return(e||"mce_")+u++},setHTML:k,getOuterHTML:function(e){var t="string"==typeof e?p(e):e;return Ro.isElement(t)?t.outerHTML:An("<div></div>").append(An(t).clone()).html()},setOuterHTML:function(e,t){b(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}T(An(this).html(t),!0)})},decode:zo.decode,encode:U,insertAfter:function(e,t){var n=p(t);return Z(e,function(e){var t,i;return t=n.parentNode,(i=n.nextSibling)?t.insertBefore(e,i):t.appendChild(e),e})},replace:E,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=D(t),lr(v(e),function(t){y(n,t.nodeName,B(e,t.nodeName))}),E(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!==n;)n=n.parentNode;if(i===n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return h.toHex(Pt.trim(e))},run:Z,getAttribs:v,isEmpty:function(e,t){var n,i,o,r,a,s,g=0;if(e=e.firstChild){a=new ao(e,e.parentNode),t=t||(C?C.getNonEmptyElements():null),r=C?C.getWhiteSpaceElements():{};do{if(o=e.nodeType,Ro.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=a.next("all"===l);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){g++,e=a.next();continue}return!1}for(n=(i=v(e)).length;n--;)if("name"===(s=i[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===o)return!1;if(3===o&&!dr.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&r[e.parentNode.nodeName]&&dr.test(e.nodeValue))return!1;e=a.next()}while(e)}return g<=1},createRng:H,nodeIndex:Ar,split:function(e,t,n){var i,o,r,a=H();if(e&&t)return a.setStart(e.parentNode,Ar(e)),a.setEnd(t.parentNode,Ar(t)),i=a.extractContents(),(a=H()).setStart(t.parentNode,Ar(t)+1),a.setEnd(e.parentNode,Ar(e)+1),o=a.extractContents(),(r=e.parentNode).insertBefore(To.trimNode(M,i),e),r.insertBefore(n||t,e),r.insertBefore(To.trimNode(M,o),e),T(e),n||t},bind:O,unbind:L,fire:function(e,t,n){return A.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=x(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(d)for(var e=d.length;e--;){var t=d[e];A.unbind(t[0],t[1],t[2])}Qt.setDocument&&Qt.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return a=Cr(h,r,function(){return M}),M}(gr=fr||(fr={})).DOM=gr(e.document),gr.nodeIndex=Ar;var mr=fr,pr=mr.DOM,br=Pt.each,Br=Pt.grep,vr=function(e){return"function"==typeof e},yr=function(){var t={},n=[],i={},o=[],r=0;this.isDone=function(e){return 2===t[e]},this.markDone=function(e){t[e]=2},this.add=this.load=function(e,o,r,a){void 0===t[e]&&(n.push(e),t[e]=0),o&&(i[e]||(i[e]=[]),i[e].push({success:o,failure:a,scope:r||this}))},this.remove=function(e){delete t[e],delete i[e]},this.loadQueue=function(e,t,i){this.loadScripts(n,e,t,i)},this.loadScripts=function(n,a,s,g){var l,c=[],u=function(e,t){br(i[t],function(t){vr(t[e])&&t[e].call(t.scope)}),i[t]=void 0};o.push({success:a,failure:g,scope:s||this}),(l=function(){var i=Br(n);if(n.length=0,br(i,function(n){var i,o,a,s,g,I;2!==t[n]?3!==t[n]?1!==t[n]&&(t[n]=1,r++,i=n,o=function(){t[n]=2,r--,u("success",n),l()},a=function(){t[n]=3,r--,c.push(n),u("failure",n),l()},g=(I=pr).uniqueId(),(s=e.document.createElement("script")).id=g,s.type="text/javascript",s.src=Pt._addCacheSuffix(i),s.onload=function(){I.remove(g),s&&(s.onreadystatechange=s.onload=s=null),o()},s.onerror=function(){vr(a)?a():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+i)},(e.document.getElementsByTagName("head")[0]||e.document.body).appendChild(s)):u("failure",n):u("success",n)}),!r){var a=o.slice(0);o.length=0,br(a,function(e){0===c.length?vr(e.success)&&e.success.call(e.scope):vr(e.failure)&&e.failure.call(e.scope,c)})}})()}};yr.ScriptLoader=new yr;var xr,Fr=Pt.each;function Gr(){var e=this,t=[],n={},i={},o=[],r=function(e){var t;return i[e]&&(t=i[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},s=function(e,t,n,i){var o=r(e);Fr(o,function(e){var n=a(t,e);g(n.resource,n,void 0,void 0)}),n&&n.call(i||yr)},g=function(e,t,o,r,a){if(!n[e]){var g="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==g.indexOf("/")&&-1===g.indexOf("://")&&(g=Gr.baseURL+"/"+g),n[e]=g.substring(0,g.lastIndexOf("/")),i[e]?s(e,t,o,r):yr.ScriptLoader.add(g,function(){return s(e,t,o,r)},r,a)}};return{items:t,urls:n,lookup:i,_listeners:o,get:function(e){return i[e]?i[e].instance:void 0},dependencies:r,requireLangPack:function(e,t){var i=Gr.language;if(i&&!1!==Gr.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1===t.indexOf(","+i+","))return;yr.ScriptLoader.add(n[e]+"/langs/"+i+".js")}},add:function(e,n,r){t.push(n),i[e]={instance:n,dependencies:r};var a=_(o,function(t){return t.name===e});return o=a.fail,Fr(a.pass,function(e){e.callback()}),n},remove:function(e){delete n[e],delete i[e]},createUrl:a,addComponents:function(t,n){var i=e.urls[t];Fr(n,function(e){yr.ScriptLoader.add(i+"/"+e)})},load:g,waitFor:function(e,t){i.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}(xr=Gr||(Gr={})).PluginManager=xr(),xr.ThemeManager=xr();var Qr=function(e,t){Ui(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},wr=function(e,t){Wi(e).fold(function(){Ui(e).each(function(e){Xr(e,t)})},function(e){Qr(e,t)})},Sr=function(e,t){Vi(e).fold(function(){Xr(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},Xr=function(e,t){e.dom().appendChild(t.dom())},Zr=function(e,t){M(t,function(t){Xr(e,t)})},Nr=function(e){e.dom().textContent="",M(Oi(e),function(e){kr(e)})},kr=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Rr=function(e){var t,n=Oi(e);0<n.length&&(t=e,M(n,function(e){Qr(t,e)})),kr(e)},Dr=function(t,n){var i=null;return{cancel:function(){null!==i&&(e.clearTimeout(i),i=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null===i&&(i=e.setTimeout(function(){t.apply(null,o),i=null},n))}}},Ur=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ur(n())}}},Tr=function(e,t){var n=vi(e,t);return void 0===n||""===n?[]:n.split(" ")},Wr=function(e){return void 0!==e.dom().classList},Er=function(e,t){Wr(e)?e.dom().classList.add(t):function(e,t){return i=t,o=Tr(n=e,"class").concat([i]),bi(n,"class",o.join(" ")),!0;var n,i,o}(e,t)},Hr=function(e,t){return Wr(e)&&e.dom().classList.contains(t)},Or=function(e,t){var n=[];return M(Oi(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Or(e,t))}),n},Lr=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),Zi(r)?[]:Y(r.querySelectorAll(i),ai.fromDom);var i,o,r};function Vr(e,t,n,i,o){return e(n,i)?Z.some(n):W(o)&&o(n)?Z.none():t(n,i,o)}var Yr,Mr=function(e,t,n){for(var o=e.dom(),r=W(n)?n:i(!1);o.parentNode;){var a=ai.fromDom(o=o.parentNode);if(t(a))return Z.some(a);if(r(a))break}return Z.none()},_r=function(e,t,n){return Vr(function(e,t){return t(e)},Mr,e,t,n)},Kr=function(e,t,n){return Mr(e,function(e){return Xi(e,t)},n)},zr=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),Zi(r)?Z.none():Z.from(r.querySelector(i)).map(ai.fromDom);var i,o,r},Jr=function(e,t,n){return Vr(Xi,Kr,e,t,n)},Pr=i("mce-annotation"),jr=i("data-mce-annotation"),$r=i("data-mce-annotation-uid"),qr=function(e,t){var n=e.selection.getRng(),i=ai.fromDom(n.startContainer),o=ai.fromDom(e.getBody()),r=t.fold(function(){return"."+Pr()},function(e){return"["+jr()+'="'+e+'"]'}),a=Li(i,n.startOffset).getOr(i),s=Jr(a,r,function(e){return Ni(e,o)}),g=function(e,t){return n=t,(i=e.dom())&&i.hasAttribute&&i.hasAttribute(n)?Z.some(vi(e,t)):Z.none();var n,i};return s.bind(function(t){return g(t,""+$r()).bind(function(n){return g(t,""+jr()).map(function(t){var i=ea(e,n);return{uid:n,name:t,elements:i}})})})},ea=function(e,t){var n=ai.fromDom(e.getBody());return Lr(n,"["+$r()+'="'+t+'"]')},ta=function(t,n){var i,o,r=Ur({}),a=function(e,t){s(e,function(e){return t(e),e})},s=function(e,t){var n=r.get(),i=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Ur(Z.none())});n[e]=i,r.set(n)},g=(i=function(){var e,n,i=r.get(),o=(e=Ci(i),(n=H.call(e,0)).sort(void 0),n);M(o,function(e){s(e,function(n){var i=n.previous.get();return qr(t,Z.some(e)).fold(function(){var t;i.isSome()&&(a(t=e,function(e){M(e.listeners,function(e){return e(!1,t)})}),n.previous.set(Z.none()))},function(e){var t,o,r,s=e.uid,g=e.name,l=e.elements;i.is(s)||(o=s,r=l,a(t=g,function(e){M(e.listeners,function(e){return e(!0,t,{uid:o,nodes:Y(r,function(e){return e.dom()})})})}),n.previous.set(Z.some(s)))}),{previous:n.previous,listeners:n.listeners}})})},o=null,{cancel:function(){null!==o&&(e.clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==o&&e.clearTimeout(o),o=e.setTimeout(function(){i.apply(null,t),o=null},30)}});return t.on("remove",function(){g.cancel()}),t.on("nodeChange",function(){g.throttle()}),{addListener:function(e,t){s(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},na=function(e,t){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){M(e,function(e){var n;(n=e,Z.from(n.attributes.map[jr()]).bind(t.lookup)).each(function(t){!1===t.persistent&&e.unwrap()})})})})},ia=0,oa=function(e,t){return ai.fromDom(e.dom().cloneNode(t))},ra=function(e){return oa(e,!1)},aa=function(e){return oa(e,!0)},sa=function(t,n){var i,o,r=Ri(t).dom(),a=ai.fromDom(r.createDocumentFragment()),s=(i=n,(o=(r||e.document).createElement("div")).innerHTML=i,Oi(ai.fromDom(o)));Zr(a,s),Nr(t),Xr(t,a)},ga="\ufeff",la=function(e){return e===ga},ca=ga,ua=function(e){return e.replace(new RegExp(ga,"g"),"")},Ia=Ro.isElement,da=Ro.isText,Ca=function(e){return da(e)&&(e=e.parentNode),Ia(e)&&e.hasAttribute("data-mce-caret")},ha=function(e){return da(e)&&la(e.data)},Aa=function(e){return Ca(e)||ha(e)},fa=function(e){return e.firstChild!==e.lastChild||!Ro.isBr(e.firstChild)},ma=function(e){var t=e.container();return!(!e||!Ro.isText(t))&&(t.data.charAt(e.offset())===ca||e.isAtStart()&&ha(t.previousSibling))},pa=function(e){var t=e.container();return!(!e||!Ro.isText(t))&&(t.data.charAt(e.offset()-1)===ca||e.isAtEnd()&&ha(t.nextSibling))},ba=function(e){return da(e)&&e.data[0]===ca},Ba=function(e){return da(e)&&e.data[e.data.length-1]===ca},va=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),Ro.isBogus(n=t[t.length-1])&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},ya=Ro.isContentEditableTrue,xa=Ro.isContentEditableFalse,Fa=Ro.isBr,Ga=Ro.isText,Qa=Ro.matchNodeNames("script style textarea"),wa=Ro.matchNodeNames("img input textarea hr iframe video audio object"),Sa=Ro.matchNodeNames("table"),Xa=Aa,Za=function(e){return!Xa(e)&&(Ga(e)?!Qa(e.parentNode):wa(e)||Fa(e)||Sa(e)||Na(e))},Na=function(e){return!1===(Ro.isElement(t=e)&&"true"===t.getAttribute("unselectable"))&&xa(e);var t},ka=function(e,t){return Za(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Na(e))return!1;if(ya(e))return!0}return!0}(e,t)},Ra=Math.round,Da=function(e){return e?{left:Ra(e.left),top:Ra(e.top),bottom:Ra(e.bottom),right:Ra(e.right),width:Ra(e.width),height:Ra(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ua=function(e,t){return e=Da(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Ta=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Wa=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Ta(t.top-e.bottom,e,t)},Ea=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Ta(t.bottom-e.top,e,t)},Ha=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Oa=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},La=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Va=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Ya=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Va.test(e)},Ma=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(!o.isSome())return Z.none();n.push(o.getOrDie())}return Z.some(t.apply(null,n))},_a=[].slice,Ka=Ro.isElement,za=Za,Ja=Ro.matchStyleValues("display","block table"),Pa=Ro.matchStyleValues("float","left right"),ja=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_a.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(Ka,za,y(Pa)),$a=y(Ro.matchStyleValues("white-space","pre pre-line pre-wrap")),qa=Ro.isText,es=Ro.isBr,ts=mr.nodeIndex,ns=La,is=function(e){return"createRange"in e?e.createRange():mr.DOM.createRng()},os=function(e){return e&&/[\r\n\t ]/.test(e)},rs=function(e){return!!e.setStart&&!!e.setEnd},as=function(e){var t,n=e.startContainer,i=e.startOffset;return!!(os(e.toString())&&$a(n.parentNode)&&Ro.isText(n)&&(t=n.data,os(t[i-1])||os(t[i+1])))},ss=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},gs=function(e){var t,n,i,o,r,a,s,g;return t=0<(n=e.getClientRects()).length?Da(n[0]):Da(e.getBoundingClientRect()),!rs(e)&&es(e)&&ss(t)?(r=(i=e).ownerDocument,a=is(r),s=r.createTextNode("\xa0"),(g=i.parentNode).insertBefore(s,i),a.setStart(s,0),a.setEnd(s,1),o=Da(a.getBoundingClientRect()),g.removeChild(s),o):ss(t)&&rs(e)?function(e){var t=e.endContainer,n=e.startOffset,i=e.endOffset;if(e.startContainer===t&&Ro.isText(t)&&0===n&&1===i){var o=e.cloneRange();return o.setEndAfter(t),gs(o)}return null}(e):t},ls=function(e,t){var n=Ua(e,t);return n.width=1,n.right=n.left+1,n},cs=function(e){var t,n,i=[],o=function(e){var t,n;0!==e.height&&(0<i.length&&(t=e).left===(n=i[i.length-1]).left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right||i.push(e))},r=function(e,t){var n=is(e.ownerDocument);if(t<e.data.length){if(Ya(e.data[t]))return i;if(Ya(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!as(n)))return o(ls(gs(n),!1)),i}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),as(n)||o(ls(gs(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),as(n)||o(ls(gs(n),!0)))};if(qa(e.container()))return r(e.container(),e.offset()),i;if(Ka(e.container()))if(e.isAtEnd())n=ns(e.container(),e.offset()),qa(n)&&r(n,n.data.length),ja(n)&&!es(n)&&o(ls(gs(n),!1));else{if(n=ns(e.container(),e.offset()),qa(n)&&r(n,0),ja(n)&&e.isAtEnd())return o(ls(gs(n),!1)),i;t=ns(e.container(),e.offset()-1),ja(t)&&!es(t)&&(Ja(t)||Ja(n)||!ja(n))&&o(ls(gs(t),!1)),ja(n)&&o(ls(gs(n),!0))}return i};function us(e,t,n){var o=function(){return n||(n=cs(us(e,t))),n};return{container:i(e),offset:i(t),toRange:function(){var n;return(n=is(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:function(){return 0<o().length},isAtStart:function(){return qa(e),0===t},isAtEnd:function(){return qa(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return ns(e,n?t-1:t)}}}(Yr=us||(us={})).fromRangeStart=function(e){return Yr(e.startContainer,e.startOffset)},Yr.fromRangeEnd=function(e){return Yr(e.endContainer,e.endOffset)},Yr.after=function(e){return Yr(e.parentNode,ts(e)+1)},Yr.before=function(e){return Yr(e.parentNode,ts(e))},Yr.isAbove=function(e,t){return Ma([ne(t.getClientRects()),ie(e.getClientRects())],Wa).getOr(!1)},Yr.isBelow=function(e,t){return Ma([ie(t.getClientRects()),ne(e.getClientRects())],Ea).getOr(!1)},Yr.isAtStart=function(e){return!!e&&e.isAtStart()},Yr.isAtEnd=function(e){return!!e&&e.isAtEnd()},Yr.isTextPosition=function(e){return!!e&&Ro.isText(e.container())},Yr.isElementPosition=function(e){return!1===Yr.isTextPosition(e)};var Is,ds,Cs=us,hs=Ro.isText,As=Ro.isBogus,fs=mr.nodeIndex,ms=function(e){var t=e.parentNode;return As(t)?ms(t):t},ps=function(e){return e?Mt.reduce(e.childNodes,function(e,t){return As(t)&&"BR"!==t.nodeName?e=e.concat(ps(t)):e.push(t),e},[]):[]},bs=function(e){return function(t){return e===t}},Bs=function(e){var t,n,i,o;return(hs(e)?"text()":e.nodeName.toLowerCase())+"["+(n=ps(ms(t=e)),i=Mt.findIndex(n,bs(t),t),n=n.slice(0,i+1),o=Mt.reduce(n,function(e,t,i){return hs(t)&&hs(n[i-1])&&e++,e},0),n=Mt.filter(n,Ro.matchNodeNames(t.nodeName)),(i=Mt.findIndex(n,bs(t),t))-o)+"]"},vs=function(e,t){var n,i,o,r,a,s=[];return n=t.container(),i=t.offset(),hs(n)?o=function(e,t){for(;(e=e.previousSibling)&&hs(e);)t+=e.data.length;return t}(n,i):(i>=(r=n.childNodes).length?(o="after",i=r.length-1):o="before",n=r[i]),s.push(Bs(n)),a=function(e,t,n){var i=[];for(t=t.parentNode;t!==e;t=t.parentNode)i.push(t);return i}(e,n),a=Mt.filter(a,y(Ro.isBogus)),(s=s.concat(Mt.map(a,function(e){return Bs(e)}))).reverse().join("/")+","+o},ys=function(e,t){var n,i,o;return t?(t=(n=t.split(","))[0].split("/"),o=1<n.length?n[1]:"before",(i=Mt.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,i=t[1],o=parseInt(t[2],10),r=ps(n),r=Mt.filter(r,function(e,t){return!hs(e)||!hs(r[t-1])}),(r=Mt.filter(r,Ro.matchNodeNames(i)))[o]):null;var n,i,o,r},e))?hs(i)?function(e,t){for(var n,i=e,o=0;hs(i);){if(n=i.data.length,o<=t&&t<=o+n){e=i,t-=o;break}if(!hs(i.nextSibling)){e=i,t=n;break}o+=n,i=i.nextSibling}return hs(e)&&t>e.data.length&&(t=e.data.length),Cs(e,t)}(i,parseInt(o,10)):(o="after"===o?fs(i)+1:fs(i),Cs(i.parentNode,o)):null):null},xs=function(e,t){Ro.isText(t)&&0===t.data.length&&e.remove(t)},Fs=function(e,t,n){var i,o,r,a,s,g,l;Ro.isDocumentFragment(n)?(r=e,a=t,g=Z.from((s=n).firstChild),l=Z.from(s.lastChild),a.insertNode(s),g.each(function(e){return xs(r,e.previousSibling)}),l.each(function(e){return xs(r,e.nextSibling)})):(i=e,t.insertNode(o=n),xs(i,o.previousSibling),xs(i,o.nextSibling))},Gs=Ro.isContentEditableFalse,Qs=function(e,t,n,i,o){var r,a=i[o?"startContainer":"endContainer"],s=i[o?"startOffset":"endOffset"],g=[],l=0,c=e.getRoot();for(Ro.isText(a)?g.push(n?function(e,t,n){var i,o;for(o=e(t.data.slice(0,s)).length,i=t.previousSibling;i&&Ro.isText(i);i=i.previousSibling)o+=e(i.data).length;return o}(t,a):s):(s>=(r=a.childNodes).length&&r.length&&(l=1,s=Math.max(0,r.length-1)),g.push(e.nodeIndex(r[s],n)+l));a&&a!==c;a=a.parentNode)g.push(e.nodeIndex(a,n));return g},ws=function(e,t,n){var i=0;return Pt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void i++}),i},Ss=function(e,t){var n,i,o,r=t?"start":"end";i=e[r+"Offset"],Ro.isElement(n=e[r+"Container"])&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?i:i-1,o.length-1)])&&e["set"+(t?"Start":"End")](n,i=t?0:n.childNodes.length)},Xs=function(e){return Ss(e,!0),Ss(e,!1),e},Zs=function(e,t){var n;if(Ro.isElement(e)&&(e=La(e,t),Gs(e)))return e;if(Aa(e)){if(Ro.isText(e)&&Ca(e)&&(e=e.parentNode),Gs(n=e.previousSibling))return n;if(Gs(n=e.nextSibling))return n}},Ns=function(e,t,n){var i=n.getNode(),o=i?i.nodeName:null,r=n.getRng();if(Gs(i)||"IMG"===o)return{name:o,index:ws(n.dom,o,i)};var a,s,g,l,c,u,I,d=Zs((a=r).startContainer,a.startOffset)||Zs(a.endContainer,a.endOffset);return d?{name:o=d.tagName,index:ws(n.dom,o,d)}:(u=(g=n).dom,(I={}).start=Qs(u,s=e,l=t,c=r,!0),g.isCollapsed()||(I.end=Qs(u,s,l,c,!1)),I)},ks=function(e,t,n){var i={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Rs=function(e,t){var n=e.dom,i=e.getRng(),o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:ws(n,s,a)};var g=Xs(i.cloneRange());if(!r){g.collapse(!1);var l=ks(n,o+"_end",t);Fs(n,g,l)}(i=Xs(i)).collapse(!0);var c=ks(n,o+"_start",t);return Fs(n,i,c),e.moveToBookmark({id:o,keep:1}),{id:o}},Ds={getBookmark:function(e,t,n){return 2===t?Ns(ua,n,e):3===t?(o=(i=e).getRng(),{start:vs(i.dom.getRoot(),Cs.fromRangeStart(o)),end:vs(i.dom.getRoot(),Cs.fromRangeEnd(o))}):t?{rng:e.getRng()}:Rs(e,!1);var i,o},getUndoBookmark:r(Ns,o,!0),getPersistentBookmark:Rs},Us="_mce_caret",Ts=function(e){return Ro.isElement(e)&&e.id===Us},Ws=function(e,t){for(;t&&t!==e;){if(t.id===Us)return t;t=t.parentNode}return null},Es=Ro.isElement,Hs=Ro.isText,Os=function(e){var t=e.parentNode;t&&t.removeChild(e)},Ls=function(e,t){0===t.length?Os(e):e.nodeValue=t},Vs=function(e){var t=ua(e);return{count:e.length-t.length,text:t}},Ys=function(e,t){return Ms(e),t},Ms=function(e){if(Es(e)&&Aa(e)&&(fa(e)?e.removeAttribute("data-mce-caret"):Os(e)),Hs(e)){var t=ua(function(e){try{return e.nodeValue}catch(t){return""}}(e));Ls(e,t)}},_s={removeAndReposition:function(e,t){return Cs.isTextPosition(t)?function(e,t){return Hs(e)&&t.container()===e?(o=Vs((n=e).data.substr(0,(i=t).offset())),r=Vs(n.data.substr(i.offset())),0<(a=o.text+r.text).length?(Ls(n,a),Cs(n,i.offset()-o.count)):i):Ys(e,t);var n,i,o,r,a}(e,t):(n=e,(i=t).container()===n.parentNode?function(e,t){var n,i,o,r=t.container(),a=(n=oe(r.childNodes),i=e,o=O(n,i),-1===o?Z.none():Z.some(o)).map(function(e){return e<t.offset()?Cs(r,t.offset()-1):t}).getOr(t);return Ms(e),a}(n,i):Ys(n,i));var n,i},remove:Ms},Ks=oi.detect().browser,zs=Ro.isContentEditableFalse,Js=function(e,t,n){var i,o,r,a,s,g=Ua(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(i=e.ownerDocument.documentElement,o=e.scrollLeft||i.scrollLeft,r=e.scrollTop||i.scrollTop):(s=e.getBoundingClientRect(),o=e.scrollLeft-s.left,r=e.scrollTop-s.top),g.left+=o,g.right+=o,g.top+=r,g.bottom+=r,g.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),g.left+=a,g.right+=a),g},Ps=function(){return Ks.isIE()||Ks.isEdge()||Ks.isFirefox()},js=function(e){return zs(e)||Ro.isTable(e)&&Ps()},$s=Ro.isContentEditableFalse,qs=Ro.matchStyleValues("display","block table table-cell table-caption list-item"),eg=Aa,tg=Ca,ng=Ro.isElement,ig=Za,og=function(e){return 0<e},rg=function(e){return e<0},ag=function(e,t){for(var n;n=e(t);)if(!tg(n))return n;return null},sg=function(e,t,n,i,o){var r=new ao(e,i);if(rg(t)){if(($s(e)||tg(e))&&n(e=ag(r.prev,!0)))return e;for(;e=ag(r.prev,o);)if(n(e))return e}if(og(t)){if(($s(e)||tg(e))&&n(e=ag(r.next,!0)))return e;for(;e=ag(r.next,o);)if(n(e))return e}return null},gg=function(e,t){for(;e&&e!==t;){if(qs(e))return e;e=e.parentNode}return null},lg=function(e,t,n){return gg(e.container(),n)===gg(t.container(),n)},cg=function(e,t){var n,i;return t?(n=t.container(),i=t.offset(),ng(n)?n.childNodes[i+e]:null):null},ug=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Ig=function(e,t,n){var i,o,r,a;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(eg(i=n[o])&&(i=i[o]),$s(i)){if(a=n,gg(i,r=t)===gg(a,r))return i;break}if(ig(i))break;n=n.parentNode}return null},dg=r(ug,!0),Cg=r(ug,!1),hg=function(e,t,n){var i,o,a,s,g=r(Ig,!0,t),l=r(Ig,!1,t);if(a=n.startOffset,Ca(o=n.startContainer)){if(ng(o)||(o=o.parentNode),"before"===(s=o.getAttribute("data-mce-caret"))&&js(i=o.nextSibling))return dg(i);if("after"===s&&js(i=o.previousSibling))return Cg(i)}if(!n.collapsed)return n;if(Ro.isText(o)){if(eg(o)){if(1===e){if(i=l(o))return dg(i);if(i=g(o))return Cg(i)}if(-1===e){if(i=g(o))return Cg(i);if(i=l(o))return dg(i)}return n}if(Ba(o)&&a>=o.data.length-1)return 1===e&&(i=l(o))?dg(i):n;if(ba(o)&&a<=1)return-1===e&&(i=g(o))?Cg(i):n;if(a===o.data.length)return(i=l(o))?dg(i):n;if(0===a)return(i=g(o))?Cg(i):n}return n},Ag=function(e,t){return Z.from(cg(e?0:-1,t)).filter($s)},fg=function(e,t,n){var i=hg(e,t,n);return-1===e?us.fromRangeStart(i):us.fromRangeEnd(i)},mg=function(e){return Z.from(e.getNode()).map(ai.fromDom)},pg=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},bg=function(e,t){var n=lg(e,t);return!(n||!Ro.isBr(e.getNode()))||n};(ds=Is||(Is={}))[ds.Backwards=-1]="Backwards",ds[ds.Forwards=1]="Forwards";var Bg,vg,yg=Ro.isContentEditableFalse,xg=Ro.isText,Fg=Ro.isElement,Gg=Ro.isBr,Qg=Za,wg=function(e){return wa(e)||!!Na(t=e)&&!0!==z(oe(t.getElementsByTagName("*")),function(e,t){return e||ya(t)},!1);var t},Sg=ka,Xg=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Zg=function(e,t){if(og(e)){if(Qg(t.previousSibling)&&!xg(t.previousSibling))return Cs.before(t);if(xg(t))return Cs(t,0)}if(rg(e)){if(Qg(t.nextSibling)&&!xg(t.nextSibling))return Cs.after(t);if(xg(t))return Cs(t,t.data.length)}return rg(e)?Gg(t)?Cs.before(t):Cs.after(t):Cs.before(t)},Ng=function(e,t,n){var o,r,a,s,g;if(!Fg(n)||!t)return null;if(t.isEqual(Cs.after(n))&&n.lastChild){if(g=Cs.after(n.lastChild),rg(e)&&Qg(n.lastChild)&&Fg(n.lastChild))return Gg(n.lastChild)?Cs.before(n.lastChild):g}else g=t;var l,c,u,I=g.container(),d=g.offset();if(xg(I)){if(rg(e)&&0<d)return Cs(I,--d);if(og(e)&&d<I.length)return Cs(I,++d);o=I}else{if(rg(e)&&0<d&&(r=Xg(I,d-1),Qg(r)))return!wg(r)&&(a=sg(r,e,Sg,r))?xg(a)?Cs(a,a.data.length):Cs.after(a):xg(r)?Cs(r,r.data.length):Cs.before(r);if(og(e)&&d<I.childNodes.length&&(r=Xg(I,d),Qg(r)))return Gg(r)?(l=n,(u=(c=r).nextSibling)&&Qg(u)?xg(u)?Cs(u,0):Cs.before(u):Ng(Is.Forwards,Cs.after(c),l)):!wg(r)&&(a=sg(r,e,Sg,r))?xg(a)?Cs(a,0):Cs.before(a):xg(r)?Cs(r,0):Cs.after(r);o=r||g.getNode()}return(og(e)&&g.isAtEnd()||rg(e)&&g.isAtStart())&&(o=sg(o,e,i(!0),n,!0),Sg(o,n))?Zg(e,o):(r=sg(o,e,Sg,n),!(s=Mt.last(K(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(I,n),yg)))||r&&s.contains(r)?r?Zg(e,r):null:g=og(e)?Cs.after(s):Cs.before(s))},kg=function(e){return{next:function(t){return Ng(Is.Forwards,t,e)},prev:function(t){return Ng(Is.Backwards,t,e)}}},Rg=function(e){return Cs.isTextPosition(e)?0===e.offset():Za(e.getNode())},Dg=function(e){if(Cs.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Za(e.getNode(!0))},Ug=function(e,t){return!Cs.isTextPosition(e)&&!Cs.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Tg=function(e,t,n){var i=kg(t);return Z.from(e?i.next(n):i.prev(n))},Wg=function(e,t,n){return Tg(e,t,n).bind(function(i){return lg(n,i,t)&&function(e,t,n){return e?!Ug(t,n)&&!(!Cs.isTextPosition(i=t)&&Ro.isBr(i.getNode()))&&Dg(t)&&Rg(n):!Ug(n,t)&&Rg(t)&&Dg(n);var i}(e,n,i)?Tg(e,t,i):Z.some(i)})},Eg=function(e,t,n,i){return Wg(e,t,n).bind(function(n){return i(n)?Eg(e,t,n,i):Z.some(n)})},Hg=function(e,t){var n,i,o,r,a,s=e?t.firstChild:t.lastChild;return Ro.isText(s)?Z.some(Cs(s,e?0:s.data.length)):s?Za(s)?Z.some(e?Cs.before(s):Ro.isBr(a=s)?Cs.before(a):Cs.after(a)):(i=t,o=s,r=(n=e)?Cs.before(o):Cs.after(o),Tg(n,i,r)):Z.none()},Og=r(Tg,!0),Lg=r(Tg,!1),Vg={fromPosition:Tg,nextPosition:Og,prevPosition:Lg,navigate:Wg,navigateIgnore:Eg,positionIn:Hg,firstPositionIn:r(Hg,!0),lastPositionIn:r(Hg,!1)},Yg=function(e,t){return!e.isBlock(t)||t.innerHTML||de.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Mg=function(e,t){return Vg.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},_g=function(e,t,n){return!(!1!==t.hasChildNodes()||!Ws(e,t)||(o=n,r=(i=t).ownerDocument.createTextNode(ca),i.appendChild(r),o.setStart(r,0),o.setEnd(r,0),0));var i,o,r},Kg=function(e,t,n,i){var o,r,a,s,g=n[t?"start":"end"],l=e.getRoot();if(g){for(a=g[0],r=l,o=g.length-1;1<=o;o--){if(s=r.childNodes,_g(l,r,i))return!0;if(g[o]>s.length-1)return!!_g(l,r,i)||Mg(r,i);r=s[g[o]]}3===r.nodeType&&(a=Math.min(g[0],r.nodeValue.length)),1===r.nodeType&&(a=Math.min(g[0],r.childNodes.length)),t?i.setStart(r,a):i.setEnd(r,a)}return!0},zg=function(e){return Ro.isText(e)&&0<e.data.length},Jg=function(e,t,n){var i,o,r,a,s,g,l=e.get(n.id+"_"+t),c=n.keep;if(l){if(i=l.parentNode,"start"===t?c?l.hasChildNodes()?(i=l.firstChild,o=1):zg(l.nextSibling)?(i=l.nextSibling,o=0):zg(l.previousSibling)?(i=l.previousSibling,o=l.previousSibling.data.length):(i=l.parentNode,o=e.nodeIndex(l)+1):o=e.nodeIndex(l):c?l.hasChildNodes()?(i=l.firstChild,o=1):zg(l.previousSibling)?(i=l.previousSibling,o=l.previousSibling.data.length):(i=l.parentNode,o=e.nodeIndex(l)):o=e.nodeIndex(l),s=i,g=o,!c){for(a=l.previousSibling,r=l.nextSibling,Pt.each(Pt.grep(l.childNodes),function(e){Ro.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);a&&r&&a.nodeType===r.nodeType&&Ro.isText(a)&&!de.opera&&(o=a.nodeValue.length,a.appendData(r.nodeValue),e.remove(r),s=a,g=o)}return Z.some(Cs(s,g))}return Z.none()},Pg=function(e,t,n){return Ds.getBookmark(e,t,n)},jg=function(e,t){(function(e,t){var n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f=e.dom;if(t){if(Pt.isArray(t.start))return h=t,A=(C=f).createRng(),Kg(C,!0,h,A)&&Kg(C,!1,h,A)?Z.some(A):Z.none();if("string"==typeof t.start)return Z.some((u=t,I=(c=f).createRng(),d=ys(c.getRoot(),u.start),I.setStart(d.container(),d.offset()),d=ys(c.getRoot(),u.end),I.setEnd(d.container(),d.offset()),I));if(t.hasOwnProperty("id"))return g=Jg(o=f,"start",r=t),l=Jg(o,"end",r),Ma([g,(a=l,s=g,a.isSome()?a:s)],function(e,t){var n=o.createRng();return n.setStart(Yg(o,e.container()),e.offset()),n.setEnd(Yg(o,t.container()),t.offset()),n});if(t.hasOwnProperty("name"))return Z.from((n=f).select((i=t).name)[i.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(t.hasOwnProperty("rng"))return Z.some(t.rng)}return Z.none()})(e,t).each(function(t){e.setRng(t)})},$g=function(e){return Ro.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},qg=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},el=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},tl=function(e,t,n){var i,o,r,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(r=s.childNodes).length?i=new ao(s=r[a],e.getParent(s,e.isBlock)):(i=new ao(s=r[r.length-1],e.getParent(s,e.isBlock))).next(!0),o=i.current();o;o=i.next())if(3===o.nodeType&&!qg(o))return n.setStart(o,0),void t.setRng(n)},nl=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!qg(e))return e},il=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},ol=function(e,t,n){return e.schema.isValidChild(t,n)},rl=qg,al=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},sl=function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},gl=el,ll=function(e,t,n){return el(e,e.getStyle(t,n),n)},cl=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},ul=function(e,t,n){return e.getParents(t,n,e.getRoot())},Il=$g,dl=ul,Cl=rl,hl=il,Al=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},fl=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ml=function(e,t,n,i){var o,r,a=n.nodeValue;return void 0===i&&(i=e?a.length:0),e?(o=a.lastIndexOf(" ",i),-1!==(o=(r=a.lastIndexOf("\xa0",i))<o?o:r)&&!t&&(o<i||!e)&&o<=a.length&&o++):(o=a.indexOf(" ",i),r=a.indexOf("\xa0",i),o=-1!==o&&(-1===r||o<r)?o:r),o},pl=function(e,t,n,i,o,r){var a,s,g,l;if(3===n.nodeType){if(-1!==(g=ml(o,r,n,i)))return{container:n,offset:g};l=n}for(a=new ao(n,e.getParent(n,e.isBlock)||t);s=a[o?"prev":"next"]();)if(3!==s.nodeType||Il(s.parentNode)){if(e.isBlock(s)||sl(s,"BR"))break}else if(-1!==(g=ml(o,r,l=s)))return{container:s,offset:g};if(l)return{container:l,offset:i=o?0:l.length}},bl=function(e,t,n,i,o){var r,a,s,g;for(3===i.nodeType&&0===i.nodeValue.length&&i[o]&&(i=i[o]),r=dl(e,i),a=0;a<r.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(g=t[s])&&g.collapsed!==n.collapsed)&&e.is(r[a],g.selector))return r[a];return i},Bl=function(e,t,n,i){var o,r=e.dom,a=r.getRoot();if(t[0].wrapper||(o=r.getParent(n,t[0].block,a)),!o){var s=r.getParent(n,"LI,TD,TH");o=r.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&hl(e,t)},s)}if(o&&t[0].wrapper&&(o=dl(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[i]&&!r.isBlock(o[i])&&!sl(o=o[i],"br"););return o||n},vl=function(e,t,n,i,o,r,a){var s,g,l,c,u,I;if(s=g=a?n:o,c=a?"previousSibling":"nextSibling",u=e.getRoot(),3===s.nodeType&&!Cl(s)&&(a?0<i:r<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(g))return g;for(l=g[c];l;l=l[c])if(!Il(l)&&!Cl(l)&&("BR"!==(I=l).nodeName||!I.getAttribute("data-mce-bogus")||I.nextSibling))return g;if(g===u||g.parentNode===u){s=g;break}g=g.parentNode}return s},yl=function(e,t,n,i){var o,r=t.startContainer,a=t.startOffset,s=t.endContainer,g=t.endOffset,l=e.dom;return 1===r.nodeType&&r.hasChildNodes()&&3===(r=La(r,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=La(s,t.collapsed?g:g-1)).nodeType&&(g=s.nodeValue.length),r=fl(l,r),s=fl(l,s),(Il(r.parentNode)||Il(r))&&(r=Il(r)?r:r.parentNode,3===(r=t.collapsed?r.previousSibling||r:r.nextSibling||r).nodeType&&(a=t.collapsed?r.length:0)),(Il(s.parentNode)||Il(s))&&(s=Il(s)?s:s.parentNode,3===(s=t.collapsed?s.nextSibling||s:s.previousSibling||s).nodeType&&(g=t.collapsed?0:s.length)),t.collapsed&&((o=pl(l,e.getBody(),r,a,!0,i))&&(r=o.container,a=o.offset),(o=pl(l,e.getBody(),s,g,!1,i))&&(s=o.container,g=o.offset)),n[0].inline&&(s=i?s:function(e,t){var n=Al(e,g);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Al(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e}(s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===r.nodeType&&0!==a||(r=vl(l,n,r,a,s,g,!0)),n[0].inline&&3===s.nodeType&&g!==s.nodeValue.length||(s=vl(l,n,r,a,s,g,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(r=bl(l,n,t,r,"previousSibling"),s=bl(l,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(r=Bl(e,n,r,"previousSibling"),s=Bl(e,n,s,"nextSibling"),n[0].block&&(l.isBlock(r)||(r=vl(l,n,r,a,s,g,!0)),l.isBlock(s)||(s=vl(l,n,r,a,s,g,!1)))),1===r.nodeType&&(a=l.nodeIndex(r),r=r.parentNode),1===s.nodeType&&(g=l.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:a,endContainer:s,endOffset:g}},xl=Pt.each,Fl=function(e,t,n){var i,o,r,a,s,g,l,c=t.startContainer,u=t.startOffset,I=t.endContainer,d=t.endOffset;if(0<(l=e.select("td[data-mce-selected],th[data-mce-selected]")).length)xl(l,function(e){n([e])});else{var C,h,A,f=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&u>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===d&&0<e.length&&t===I&&3===t.nodeType&&e.splice(e.length-1,1),e},m=function(e,t,n){for(var i=[];e&&e!==n;e=e[t])i.push(e);return i},p=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},b=function(e,t,i){var o=i?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(g=m(a===e?a:a[o],o)).length&&(i||g.reverse(),n(f(g)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[u]),1===I.nodeType&&I.hasChildNodes()&&(h=d,--h>(A=(C=I).childNodes).length-1?h=A.length-1:h<0&&(h=0),I=A[h]||C),c===I)return n(f([c]));for(i=e.findCommonAncestor(c,I),a=c;a;a=a.parentNode){if(a===I)return b(c,i,!0);if(a===i)break}for(a=I;a;a=a.parentNode){if(a===c)return b(I,i);if(a===i)break}o=p(c,i)||c,r=p(I,i)||I,b(c,o,!0),(g=m(o===c?o:o.nextSibling,"nextSibling",r===I?r.nextSibling:r)).length&&n(f(g)),b(I,r)}},Gl=(Bg=di,{get:function(e){if(!Bg(e))throw new Error("Can only get text value of a text node");return vg(e).getOr("")},getOption:vg=function(e){return Bg(e)?Z.from(e.dom().nodeValue):Z.none()},set:function(e,t){if(!Bg(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),Ql=function(e){return Gl.get(e)},wl=function(e,t,n,i){var o,r=t.uid,a=void 0===r?(o=(new Date).getTime(),"mce-annotation_"+Math.floor(1e9*Math.random())+ ++ia+String(o)):r,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(t,["uid"]),g=ai.fromTag("span",e);Er(g,Pr()),bi(g,""+$r(),a),bi(g,""+jr(),n);var l,c=i(a,s),u=c.attributes,I=c.classes,d=void 0===I?[]:I;return Bi(g,void 0===u?{}:u),l=g,M(d,function(e){Er(l,e)}),g},Sl=function(e,t,n,i){e.undoManager.transact(function(){var o,r,a,s,g=e.selection.getRng();if(g.collapsed&&(s=yl(o=e,r=g,[{inline:!0}],3===(a=r).startContainer.nodeType&&a.startContainer.nodeValue.length>=a.startOffset&&"\xa0"===a.startContainer.nodeValue[a.startOffset]),r.setStart(s.startContainer,s.startOffset),r.setEnd(s.endContainer,s.endOffset),o.selection.setRng(r)),e.selection.getRng().collapsed){var l=wl(e.getDoc(),i,t,n.decorate);sa(l,"\xa0"),e.selection.getRng().insertNode(l.dom()),e.selection.select(l.dom())}else{var c=Ds.getPersistentBookmark(e.selection,!1),u=e.selection.getRng();(function(e,t,n,i,o){var r=[],a=wl(e.getDoc(),o,n,i),s=Ur(Z.none()),g=function(){s.set(Z.none())},l=function(e){M(e,c)},c=function(t){var n,i;switch(function(e,t,n,i){return Ui(t).fold(function(){return"skipping"},function(o){return"br"===i||di(a=t)&&"\ufeff"===Ql(a)?"valid":Ii(r=t)&&Hr(r,Pr())?"existing":Ts(t)?"caret":ol(e,n,i)&&ol(e,ci(o),n)?"valid":"invalid-child";var r,a})}(e,t,"span",ci(t))){case"invalid-child":g();var o=Oi(t);l(o),g();break;case"valid":var c=s.get().getOrThunk(function(){var e=ra(a);return r.push(e),s.set(Z.some(e)),e});Qr(n=t,i=c),Xr(i,n)}};Fl(e.dom,t,function(e){var t;g(),t=Y(e,ai.fromDom),l(t)})})(e,u,t,n.decorate,i),e.selection.moveToBookmark(c)}})};function Xl(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?Z.from(t[e]).map(function(e){return e.settings}):Z.none()}});na(e,n);var i=ta(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,i){n.lookup(t).each(function(n){Sl(e,t,n,i)})},annotationChanged:function(e,t){i.addListener(e,t)},remove:function(t){qr(e,Z.some(t)).each(function(e){M(e.elements,Rr)})},getAll:function(t){var n,i,o,r,a,s=(n=t,i=ai.fromDom(e.getBody()),o=Lr(i,"["+jr()+'="'+n+'"]'),r={},M(o,function(e){var t=vi(e,$r()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])}),r);return a=function(e){return Y(e,function(e){return e.dom()})},fi(s,function(e,t,n){return{k:t,v:a(e)}})}}}var Zl=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Nl=function(e,t){var n=Cs.after(e),i=kg(t).prev(n);return i?i.toRange():null},kl=Pt.each,Rl=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var i=function(t){var n={};return kl(e.getAttribs(t),function(i){var o=i.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))}),n},o=function(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(void 0===(n=t[i]))return!1;if(e[i]!==n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0};return!(!o(i(t),i(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||$g(t)||$g(n))}},Dl=function(e){Nr(e),Xr(e,ai.fromHtml('<br data-mce-bogus="1">'))},Ul=function(e){Yi(e).each(function(t){Ti(t).each(function(n){Io(e)&&ho(t)&&Io(n)&&kr(t)})})},Tl=Pt.makeMap;function Wl(e){var t,n,i,o,r,a=[];return t=(e=e||{}).indent,n=Tl(e.indent_before||""),i=Tl(e.indent_after||""),o=zo.getEncodeFunc(e.entity_encoding||"raw",e.entities),r="html"===e.element_format,{start:function(e,s,g){var l,c,u,I;if(t&&n[e]&&0<a.length&&0<(I=a[a.length-1]).length&&"\n"!==I&&a.push("\n"),a.push("<",e),s)for(l=0,c=s.length;l<c;l++)a.push(" ",(u=s[l]).name,'="',o(u.value,!0),'"');a[a.length]=!g||r?">":" />",g&&t&&i[e]&&0<a.length&&0<(I=a[a.length-1]).length&&"\n"!==I&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&i[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n")},text:function(e,t){0<e.length&&(a[a.length]=t?e:o(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",o(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function El(e,t){void 0===t&&(t=rr());var n=Wl(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(i){var o,r;r=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;a(e),e=e.next;);}},n.reset();var a=function(e){var i,s,g,l,c,u,I,d,C,h=o[e.type];if(h)h(e);else{if(i=e.name,s=e.shortEnded,g=e.attributes,r&&g&&1<g.length&&((u=[]).map={},C=t.getElementRule(e.name))){for(I=0,d=C.attributesOrder.length;I<d;I++)(l=C.attributesOrder[I])in g.map&&(u.map[l]=c=g.map[l],u.push({name:l,value:c}));for(I=0,d=g.length;I<d;I++)(l=g[I].name)in u.map||(u.map[l]=c=g.map[l],u.push({name:l,value:c}));g=u}if(n.start(e.name,g,s),!s){if(e=e.firstChild)for(;a(e),e=e.next;);n.end(i)}}};return 1!==i.type||e.inner?o[11](i):a(i),n.getContent()}}}var Hl=function(t){return t.collapsed?t:(i=Cs.fromRangeStart(n=t),o=Cs.fromRangeEnd(n),Vg.fromPosition(!1,r=n.commonAncestorContainer,o).map(function(t){return!lg(i,o,r)&&lg(i,t,r)?(a=i.container(),s=i.offset(),g=t.container(),l=t.offset(),(c=e.document.createRange()).setStart(a,s),c.setEnd(g,l),c):n;var a,s,g,l,c}).getOr(n));var n,i,o,r},Ol=Ro.matchNodeNames("td th"),Ll=function(e,t){var n,i,o=e.selection.getRng(),r=o.startContainer,a=o.startOffset;o.collapsed&&(i=a,Ro.isText(n=r)&&"\xa0"===n.nodeValue[i-1])&&Ro.isText(r)&&(r.insertData(a-1," "),r.deleteData(a,1),o.setStart(r,a),o.setEnd(r,a),e.selection.setRng(o)),e.selection.setContent(t)},Vl=function(e,t){var n,i,o="string"!=typeof(n=t)?(i=Pt.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:i}):{content:n,details:{}};!function(e,t,n){var i,o,r,a,s,g,l,c,u,I,d,C=e.selection,h=e.dom;if(/^ | $/.test(t)&&(t=function(e,t){var n,i;i=e.startOffset;var o=function(e){return n[e]&&3===n[e].nodeType};return 3===(n=e.startContainer).nodeType&&(0<i?t=t.replace(/^&nbsp;/," "):o("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),i<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(C.getRng(),t)),i=e.parser,d=n.merge,o=El({validate:e.settings.validate},e.schema),I='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',(g=e.fire("BeforeSetContent",g={content:t,format:"html",selection:!0,paste:n.paste})).isDefaultPrevented())e.fire("SetContent",{content:g.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=g.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,I);var A,f,m,p,b,B=(c=C.getRng()).startContainer||(c.parentElement?c.parentElement():null),v=e.getBody();B===v&&C.isCollapsed()&&h.isBlock(v.firstChild)&&(A=v.firstChild)&&!e.schema.getShortEndedElements()[A.nodeName]&&h.isEmpty(v.firstChild)&&((c=h.createRng()).setStart(v.firstChild,0),c.setEnd(v.firstChild,0),C.setRng(c)),C.isCollapsed()||(e.selection.setRng(Hl(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),m=t,b=(f=e.selection.getRng()).startOffset,3===(p=f.startContainer).nodeType&&f.collapsed&&("\xa0"===p.data[b]?(p.deleteData(b,1),/[\u00a0| ]$/.test(m)||(m+=" ")):"\xa0"===p.data[b-1]&&(p.deleteData(b-1,1),/[\u00a0| ]$/.test(m)||(m=" "+m))),t=m);var y,x,F,G={context:(r=C.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=i.parse(t,G),!0===n.paste&&function(e,t){var n,i,o,r,a,s,g=t.firstChild,l=t.lastChild;return g&&"meta"===g.name&&(g=g.next),l&&"mce_marker"===l.attr("id")&&(l=l.prev),i=l,s=(n=e).getNonEmptyElements(),i&&(i.isEmpty(s)||(o=i,n.getBlockElements()[o.name]&&(a=o).firstChild&&a.firstChild===a.lastChild&&("br"===(r=o.firstChild).name||"\xa0"===r.value)))&&(l=l.prev),!(!g||g!==l||"ul"!==g.name&&"ol"!==g.name)}(e.schema,s)&&Zl(h,r))return c=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B=(o=t,g=e.serialize(i),a=(r=o.createFragment(g)).firstChild,s=r.lastChild,a&&"META"===a.nodeName&&a.parentNode.removeChild(a),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),r),v=Zl(t,n.startContainer),y=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&("\xa0"===(t=e.firstChild).data||Ro.isBr(t));var t}(t))?e.slice(0,-1):e;var t}(Pt.grep(B.firstChild.childNodes,function(e){return"LI"===e.nodeName})),x=t.getRoot(),F=function(e){var i=Cs.fromRangeStart(n),o=kg(t.getRoot()),r=1===e?o.prev(i):o.next(i);return!r||Zl(t,r.getNode())!==v};return F(1)?function(e,t,n){var i,o,r,a=e.parentNode;return Pt.each(y,function(t){a.insertBefore(t,e)}),i=n,o=Cs.before(e),(r=kg(i).next(o))?r.toRange():null}(v,0,x):F(2)?(l=v,u=x,t.insertAfter((c=y).reverse(),l),Nl(c[0],u)):(d=y,C=x,h=I=v,f=(A=n).cloneRange(),m=A.cloneRange(),f.setStartBefore(h),m.setEndAfter(h),p=[f.cloneContents(),m.cloneContents()],(b=I.parentNode).insertBefore(p[0],I),Pt.each(d,function(e){b.insertBefore(e,I)}),b.insertBefore(p[1],I),b.removeChild(I),Nl(d[d.length-1],C))}(o,h,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",g);if(function(e){for(var t=s;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(),"mce_marker"===(u=s.lastChild).attr("id"))for(u=(l=u).prev;u;u=u.walk(!0))if(3===u.type||!h.isBlock(u.name)){e.schema.isValidChild(u.parent.name,"span")&&u.parent.insert(l,u,"br"===u.name);break}if(e._selectionOverrides.showBlockCaretContainer(r),G.invalid){for(Ll(e,I),r=C.getNode(),a=e.getBody(),9===r.nodeType?r=u=a:u=r;u!==a;)u=(r=u).parentNode;t=r===a?a.innerHTML:h.getOuterHTML(r),t=o.serialize(i.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return o.serialize(s)}))),r===a?h.setHTML(a,t):h.setOuterHTML(r,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var i=n.firstChild;!i||i===n.lastChild&&"BR"===i.nodeName?e.dom.setHTML(n,t):Ll(e,t)}}(e,t=o.serialize(s),r);!function(e,t){var n=e.schema.getTextInlineElements(),i=e.dom;if(t){var o=e.getBody(),r=new Rl(i);Pt.each(i.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==o;t=t.parentNode)n[e.nodeName.toLowerCase()]&&r.compare(t,e)&&i.remove(e,!0)})}}(e,d),function(e,t){var n,i,o,r,a,s=e.dom,g=e.selection;if(t){if(e.selection.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return s.remove(t),g.select(n);var l=s.createRng();(r=t.previousSibling)&&3===r.nodeType?(l.setStart(r,r.nodeValue.length),de.ie||(a=t.nextSibling)&&3===a.nodeType&&(r.appendData(a.data),a.parentNode.removeChild(a))):(l.setStartBefore(t),l.setEndBefore(t)),i=s.getParent(t,s.isBlock),s.remove(t),i&&s.isEmpty(i)&&(e.$(i).empty(),l.setStart(i,0),l.setEnd(i,0),Ol(i)||i.getAttribute("data-mce-fragment")||!(o=function(t){var n=Cs.fromRangeStart(l);if(n=kg(e.getBody()).next(n))return n.toRange()}())?s.add(i,s.create("br",{"data-mce-bogus":"1"})):(l=o,s.remove(i))),g.setRng(l)}}(e,h.get("mce_marker")),y=e.getBody(),Pt.each(y.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),x=e.dom,F=e.selection.getStart(),Z.from(x.getParent(F,"td,th")).map(ai.fromDom).each(Ul),e.fire("SetContent",g),e.addVisual()}}(e,o.content,o.details)},Yl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ml=function(e,t,n){var i=e.getParam(t,n);if(-1!==i.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return i},_l=function(e){return e.getParam("content_security_policy","")},Kl=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},zl=function(e){return e.getParam("forced_root_block_attrs",{})},Jl=function(e){return e.getParam("images_dataimg_filter",i(!0),"function")},Pl=function(e){return e.getParam("automatic_uploads",!0,"boolean")},jl=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},$l=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},ql=function(e){return e.getParam("images_upload_url","","string")},ec=function(e){return e.getParam("images_upload_base_path","","string")},tc=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},nc=function(e){return e.getParam("images_upload_handler",null,"function")},ic=function(e){return e.getParam("content_css_cors",!1,"boolean")},oc=function(e,t){if(!t)return t;var n=t.container(),i=t.offset();return e?ha(n)?Ro.isText(n.nextSibling)?Cs(n.nextSibling,0):Cs.after(n):ma(t)?Cs(n,i+1):t:ha(n)?Ro.isText(n.previousSibling)?Cs(n.previousSibling,n.previousSibling.data.length):Cs.before(n):pa(t)?Cs(n,i-1):t},rc={isInlineTarget:function(e,t){return Xi(ai.fromDom(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},findRootInline:function(e,t,n){var i,o,r=(i=e,o=t,K(mr.DOM.getParents(n.container(),"*",o),i));return Z.from(r[r.length-1])},isRtl:function(e){return"rtl"===mr.DOM.getStyle(e,"direction",!0)||Yl.test(e.textContent)},isAtZwsp:function(e){return ma(e)||pa(e)},normalizePosition:oc,normalizeForwards:r(oc,!0),normalizeBackwards:r(oc,!1),hasSameParentBlock:function(e,t,n){var i=gg(t,e),o=gg(n,e);return i&&i===o}},ac=function(e,t){return ki(e,t)?_r(t,function(e){return Ao(e)||mo(e)},(n=e,function(e){return Ni(n,ai.fromDom(e.dom().parentNode))})):Z.none();var n},sc=function(e){var t,n,i;e.dom.isEmpty(e.getBody())&&(e.setContent(""),i=(n=(t=e).getBody()).firstChild&&t.dom.isBlock(n.firstChild)?n.firstChild:n,t.selection.setCursorLocation(i,0))},gc=function(e,t){return Za(t)&&!1===(i=e,Ro.isText(o=t)&&/^[ \t\r\n]*$/.test(o.data)&&!1===function(e,t){var n,o,a=ai.fromDom(i);return n=ai.fromDom(t),o=r(Ni,a),Kr(n,"pre,code",o).isSome()}(0,o))||Ro.isElement(n=t)&&"A"===n.nodeName&&n.hasAttribute("name")||lc(t);var n,i,o},lc=Ro.hasAttribute("data-mce-bookmark"),cc=Ro.hasAttribute("data-mce-bogus"),uc=Ro.hasAttributeValue("data-mce-bogus","all"),Ic=function(e){return function(e){var t,n,i=0;if(gc(e,e))return!1;if(!(n=e.firstChild))return!0;t=new ao(n,e);do{if(uc(n))n=t.next(!0);else if(cc(n))n=t.next();else if(Ro.isBr(n))i++,n=t.next();else{if(gc(e,n))return!1;n=t.next()}}while(n);return i<=1}(e.dom())},dc=Gi("block","position"),Cc=Gi("from","to"),hc=function(e,t){var n=ai.fromDom(e),i=ai.fromDom(t.container());return ac(n,i).map(function(e){return dc(e,t)})},Ac=function(e,t){return function(e,t,n){return ki(t,e)?function(e,t){for(var n=W(t)?t:x,i=e.dom(),o=[];null!=i.parentNode;){var r=i.parentNode,a=ai.fromDom(r);if(o.push(a),!0===n(a))break;i=r}return o}(e,function(e){return n(e)||Ni(e,t)}).slice(0,-1):[]}(e,t,i(!1))},fc=Ac,mc=function(e,t){return[e].concat(Ac(e,t))},pc=function(e){var t,n=(t=Oi(e),P(t,Io).fold(function(){return t},function(e){return t.slice(0,e)}));return M(n,kr),n},bc=function(e,t){var n=mc(t,e);return J(n.reverse(),Ic).each(kr)},Bc=function(e,t,n,i){if(Ic(n))return Dl(n),Vg.firstPositionIn(n.dom());0===K(Ei(i),function(e){return!Ic(e)}).length&&Ic(t)&&Qr(i,ai.fromTag("br"));var o=Vg.prevPosition(n.dom(),Cs.before(i.dom()));return M(pc(t),function(e){Qr(i,e)}),bc(e,t),o},vc=function(e,t,n){if(Ic(n))return kr(n),Ic(t)&&Dl(t),Vg.firstPositionIn(t.dom());var i=Vg.lastPositionIn(n.dom());return M(pc(t),function(e){Xr(n,e)}),bc(e,t),i},yc=function(e,t){Vg.positionIn(e,t.dom()).map(function(e){return e.getNode()}).map(ai.fromDom).filter(ho).each(kr)},xc=function(e,t,n){return yc(!0,t),yc(!1,n),function(e,t){return ki(t,e)?(n=mc(e,t),Z.from(n[n.length-1])):Z.none();var n}(t,n).fold(r(vc,e,t,n),r(Bc,e,t,n))},Fc=function(e,t,n,i){return t?xc(e,i,n):xc(e,n,i)},Gc=function(e,t){var n,i=ai.fromDom(e.getBody());return(n=function(e,t,n){return n.collapsed?function(e,t,n){var i=hc(e,Cs.fromRangeStart(n)),o=i.bind(function(n){return Vg.fromPosition(t,e,n.position()).bind(function(n){return hc(e,n).map(function(n){return i=e,o=t,Ro.isBr((r=n).position().getNode())&&!1===Ic(r.block())?Vg.positionIn(!1,r.block().dom()).bind(function(e){return e.isEqual(r.position())?Vg.fromPosition(o,i,e).bind(function(e){return hc(i,e)}):Z.some(r)}).getOr(r):r;var i,o,r})})});return Ma([i,o],Cc).filter(function(e){return!1===Ni((i=e).from().block(),i.to().block())&&Ui((n=e).from().block()).bind(function(e){return Ui(n.to().block()).filter(function(t){return Ni(e,t)})}).isSome()&&!1===Ro.isContentEditableFalse((t=e).from().block())&&!1===Ro.isContentEditableFalse(t.to().block());var t,n,i})}(e,t,n):Z.none()}(i.dom(),t,e.selection.getRng()).bind(function(e){return Fc(i,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},Qc=function(e,t){var n=ai.fromDom(t),i=r(Ni,e);return Mr(n,Bo,i).isSome()},wc=function(e,t){return!e.selection.isCollapsed()&&function(e){var t,n,i,o,r=ai.fromDom(e.getBody());return function(e,t){var n,i,o=Vg.prevPosition(e.dom(),Cs.fromRangeStart(t)).isNone(),r=Vg.nextPosition(e.dom(),Cs.fromRangeEnd(t)).isNone();return!(Qc(n=e,(i=t).startContainer)||Qc(n,i.endContainer))&&o&&r}(r,e.selection.getRng())?((o=e).setContent(""),o.selection.setCursorLocation(),!0):(t=r,i=(n=e.selection).getRng(),Ma([ac(t,ai.fromDom(i.startContainer)),ac(t,ai.fromDom(i.endContainer))],function(e,o){return!1===Ni(e,o)&&(i.deleteContents(),Fc(t,!0,e,o).each(function(e){n.setRng(e.toRange())}),!0)}).getOr(!1))}(e)},Sc=function(t){if(!D(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],i={};return M(t,function(o,r){var a=Ci(o);if(1!==a.length)throw new Error("one and only one name per case");var s=a[0],g=o[s];if(void 0!==i[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!D(g))throw new Error("case arguments must be an array");n.push(s),i[s]=function(){var i=arguments.length;if(i!==g.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+g.length+" ("+g+"), got "+i);for(var o=new Array(i),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[r].apply(null,o)},match:function(e){var t=Ci(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!ee(n,function(e){return L(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[s].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:s,params:o})}}}}),i},Xc=function(e){return mg(e).exists(ho)},Zc=function(e,t,n){var i=K(mc(ai.fromDom(n.container()),t),Io),o=ne(i).getOr(t);return Vg.fromPosition(e,o.dom(),n).filter(Xc)},Nc=function(e,t){return mg(t).exists(ho)||Zc(!0,e,t).isSome()},kc=function(e,t){return(n=t,Z.from(n.getNode(!0)).map(ai.fromDom)).exists(ho)||Zc(!1,e,t).isSome();var n},Rc=r(Zc,!1),Dc=r(Zc,!0),Uc=function(e){return"\xa0"===e},Tc=function(e){return/^[\r\n\t ]$/.test(e)},Wc=function(e){return!Tc(e)&&!Uc(e)},Ec=function(e,t,n){return Z.from(n.container()).filter(Ro.isText).exists(function(i){var o=e?0:-1;return t(i.data.charAt(n.offset()+o))})},Hc=r(Ec,!0,Tc),Oc=r(Ec,!1,Tc),Lc=function(e){var t=e.container();return Ro.isText(t)&&0===t.data.length},Vc=function(e,t){var n=cg(e,t);return Ro.isContentEditableFalse(n)&&!Ro.isBogusAll(n)},Yc=r(Vc,0),Mc=r(Vc,-1),_c=function(e,t){return Ro.isTable(cg(e,t))},Kc=r(_c,0),zc=r(_c,-1),Jc=Sc([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Pc=function(e,t,n,i){var o=i.getNode(!1===t);return ac(ai.fromDom(e),ai.fromDom(n.getNode())).map(function(e){return Ic(e)?Jc.remove(e.dom()):Jc.moveToElement(o)}).orThunk(function(){return Z.some(Jc.moveToElement(o))})},jc=function(e,t,n){return Vg.fromPosition(t,e,n).bind(function(o){return c=o.getNode(),Bo(ai.fromDom(c))||mo(ai.fromDom(c))?Z.none():(r=e,g=o,l=function(e){return Co(ai.fromDom(e))&&!lg(s,g,r)},Ag(!(a=t),s=n).fold(function(){return Ag(a,g).fold(i(!1),l)},l)?Z.none():t&&Ro.isContentEditableFalse(o.getNode())?Pc(e,t,n,o):!1===t&&Ro.isContentEditableFalse(o.getNode(!0))?Pc(e,t,n,o):t&&Mc(n)?Z.some(Jc.moveToPosition(o)):!1===t&&Yc(n)?Z.some(Jc.moveToPosition(o)):Z.none());var r,a,s,g,l,c})},$c=function(e,t,n){if(0!==n){var i,o,r,a=e.data.slice(t,t+n);e.replaceData(t,n,(o=0===t,r=t+n>=e.data.length,z((i=a).split(""),function(e,t){return-1!==" \f\n\r\t\v".indexOf(t)||"\xa0"===t?e.previousCharIsSpace||""===e.str&&o||e.str.length===i.length-1&&r?{previousCharIsSpace:!1,str:e.str+"\xa0"}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str))}},qc=function(e,t){var n,i=e.data.slice(t),o=i.length-(n=i,n.replace(/^\s+/g,"")).length;return $c(e,t,o)},eu=function(e,t){return i=e,o=(n=t).container(),r=n.offset(),!1===Cs.isTextPosition(n)&&o===i.parentNode&&r>Cs.before(i).offset()?Cs(t.container(),t.offset()-1):t;var n,i,o,r},tu=function(e){return Za(e.previousSibling)?Z.some(Ro.isText(t=e.previousSibling)?Cs(t,t.data.length):Cs.after(t)):e.previousSibling?Vg.lastPositionIn(e.previousSibling):Z.none();var t},nu=function(e){return Za(e.nextSibling)?Z.some(Ro.isText(t=e.nextSibling)?Cs(t,0):Cs.before(t)):e.nextSibling?Vg.firstPositionIn(e.nextSibling):Z.none();var t},iu=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},ou=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(ci(t))},ru=function(e){if(Ic(e)){var t=ai.fromHtml('<br data-mce-bogus="1">');return Nr(e),Xr(e,t),Z.some(Cs.before(t.dom()))}return Z.none()},au=function(e,t,n,i){void 0===i&&(i=!0);var o,a=function(e,t,n){return(i=e,o=t,a=n,i?function(e,t){return nu(t).orThunk(function(){return tu(t)}).orThunk(function(){return Vg.nextPosition(n=e,Cs.after(i=t)).fold(function(){return Vg.prevPosition(n,Cs.before(i))},Z.some);var n,i})}(o,a):function(e,t){return tu(t).orThunk(function(){return nu(t)}).orThunk(function(){return n=e,o=Cs.before((i=t).previousSibling?i.previousSibling:i.parentNode),Vg.prevPosition(n,o).fold(function(){return Vg.nextPosition(n,Cs.after(i))},Z.some);var n,i,o})}(o,a)).map(r(eu,n));var i,o,a}(t,e.getBody(),n.dom()),s=Mr(n,r(ou,e),(o=e.getBody(),function(e){return e.dom()===o})),g=function(e,t,n){var i=Ti(e).filter(di),o=Wi(e).filter(di);return kr(e),Ma([i,o,t],function(e,t,i){var o,r,a,s,g=e.dom(),l=t.dom(),c=g.data.length;return r=l,a=n,s=$n((o=g).data).length,o.appendData(r.data),kr(ai.fromDom(r)),a&&qc(o,s),i.container()===l?Cs(g,c):i}).orThunk(function(){return n&&(i.each(function(e){return t=e.dom(),n=e.dom().length,o=(i=t.data.slice(0,n)).length-$n(i).length,$c(t,n-o,o);var t,n,i,o}),o.each(function(e){return qc(e.dom(),0)})),t})}(n,a,function(e,t){return n=e.schema.getTextInlineElements(),i=ci(t),hi.call(n,i);var n,i}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(ru).fold(function(){i&&iu(e,t,g)},function(n){i&&iu(e,t,Z.some(n))})},su=function(e,t){return e.selection.isCollapsed()?function(e,t){var n,i,o,r,a,s;return(n=e.getBody(),i=t,o=e.selection.getRng(),r=hg(i?1:-1,n,o),a=Cs.fromRangeStart(r),s=ai.fromDom(n),!1===i&&Mc(a)?Z.some(Jc.remove(a.getNode(!0))):i&&Yc(a)?Z.some(Jc.remove(a.getNode())):!1===i&&Yc(a)&&kc(s,a)?Rc(s,a).map(function(e){return Jc.remove(e.getNode())}):i&&Mc(a)&&Nc(s,a)?Dc(s,a).map(function(e){return Jc.remove(e.getNode())}):function(e,t,n){return a=n.getNode(!1===(r=t)),s=r?"after":"before",Ro.isElement(a)&&a.getAttribute("data-mce-caret")===s?(i=t,o=n.getNode(!1===t),i&&Ro.isContentEditableFalse(o.nextSibling)?Z.some(Jc.moveToElement(o.nextSibling)):!1===i&&Ro.isContentEditableFalse(o.previousSibling)?Z.some(Jc.moveToElement(o.previousSibling)):Z.none()).fold(function(){return jc(e,t,n)},Z.some):jc(e,t,n).bind(function(t){return i=e,o=n,t.fold(function(e){return Z.some(Jc.remove(e))},function(e){return Z.some(Jc.moveToElement(e))},function(e){return lg(o,e,i)?Z.none():Z.some(Jc.moveToPosition(e))});var i,o});var i,o,r,a,s}(n,i,a)).map(function(n){return n.fold((a=e,s=t,function(e){return a._selectionOverrides.hideFakeCaret(),au(a,s,ai.fromDom(e)),!0}),(o=e,r=t,function(e){var t=r?Cs.before(e):Cs.after(e);return o.selection.setRng(t.toRange()),!0}),(i=e,function(e){return i.selection.setRng(e.toRange()),!0}));var i,o,r,a,s}).getOr(!1)}(e,t):function(e,t){var n,i=e.selection.getNode();return!!Ro.isContentEditableFalse(i)&&(n=ai.fromDom(e.getBody()),M(Lr(n,".mce-offscreen-selection"),kr),au(e,t,ai.fromDom(e.selection.getNode())),sc(e),!0)}(e,t)},gu=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(Ro.isContentEditableTrue(t)||Ro.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Ro.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(Cs.before(t).toRange())),!0},lu=Ro.isText,cu=function(e){return lu(e)&&e.data[0]===ca},uu=function(e){return lu(e)&&e.data[e.data.length-1]===ca},Iu=function(e){return e.ownerDocument.createTextNode(ca)},du=function(e,t){return e?function(e){if(lu(e.previousSibling))return uu(e.previousSibling)||e.previousSibling.appendData(ca),e.previousSibling;if(lu(e))return cu(e)||e.insertData(0,ca),e;var t=Iu(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(lu(e.nextSibling))return cu(e.nextSibling)||e.nextSibling.insertData(0,ca),e.nextSibling;if(lu(e))return uu(e)||e.appendData(ca),e;var t=Iu(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},Cu=r(du,!0),hu=r(du,!1),Au=function(e,t){return Ro.isText(e.container())?du(t,e.container()):du(t,e.getNode())},fu=function(e,t){var n=t.get();return n&&e.container()===n&&ha(n)},mu=function(e,t){return t.fold(function(t){_s.remove(e.get());var n=Cu(t);return e.set(n),Z.some(Cs(n,n.length-1))},function(t){return Vg.firstPositionIn(t).map(function(t){if(fu(t,e))return Cs(e.get(),1);_s.remove(e.get());var n=Au(t,!0);return e.set(n),Cs(n,1)})},function(t){return Vg.lastPositionIn(t).map(function(t){if(fu(t,e))return Cs(e.get(),e.get().length-1);_s.remove(e.get());var n=Au(t,!1);return e.set(n),Cs(n,n.length-1)})},function(t){_s.remove(e.get());var n=hu(t);return e.set(n),Z.some(Cs(n,1))})},pu=function(e,t){for(var n=0;n<e.length;n++){var i=e[n].apply(null,t);if(i.isSome())return i}return Z.none()},bu=Sc([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Bu=function(e,t){return gg(t,e)||e},vu=function(e,t,n){var i=rc.normalizeForwards(n),o=Bu(t,i.container());return rc.findRootInline(e,o,i).fold(function(){return Vg.nextPosition(o,i).bind(r(rc.findRootInline,e,o)).map(function(e){return bu.before(e)})},Z.none)},yu=function(e,t){return null===Ws(e,t)},xu=function(e,t,n){return rc.findRootInline(e,t,n).filter(r(yu,t))},Fu=function(e,t,n){var i=rc.normalizeBackwards(n);return xu(e,t,i).bind(function(e){return Vg.prevPosition(e,i).isNone()?Z.some(bu.start(e)):Z.none()})},Gu=function(e,t,n){var i=rc.normalizeForwards(n);return xu(e,t,i).bind(function(e){return Vg.nextPosition(e,i).isNone()?Z.some(bu.end(e)):Z.none()})},Qu=function(e,t,n){var i=rc.normalizeBackwards(n),o=Bu(t,i.container());return rc.findRootInline(e,o,i).fold(function(){return Vg.prevPosition(o,i).bind(r(rc.findRootInline,e,o)).map(function(e){return bu.after(e)})},Z.none)},wu=function(e){return!1===rc.isRtl(Xu(e))},Su=function(e,t,n){return pu([vu,Fu,Gu,Qu],[e,t,n]).filter(wu)},Xu=function(e){return e.fold(o,o,o,o)},Zu=function(e){return e.fold(i("before"),i("start"),i("end"),i("after"))},Nu=function(e){return e.fold(bu.before,bu.before,bu.after,bu.after)},ku=function(e,t,n,i,o,r){return Ma([rc.findRootInline(t,n,i),rc.findRootInline(t,n,o)],function(t,i){return t!==i&&rc.hasSameParentBlock(n,t,i)?bu.after(e?t:i):r}).getOr(r)},Ru=function(e,t){return e.fold(i(!0),function(e){return i=t,!(Zu(n=e)===Zu(i)&&Xu(n)===Xu(i));var n,i})},Du=function(e,t){return e?t.fold(n(Z.some,bu.start),Z.none,n(Z.some,bu.after),Z.none):t.fold(Z.none,n(Z.some,bu.before),Z.none,n(Z.some,bu.end))},Uu=function(e,t,n,i){var o=rc.normalizePosition(e,i),a=Su(t,n,o);return Su(t,n,o).bind(r(Du,e)).orThunk(function(){return s=t,g=n,l=a,c=rc.normalizePosition(o=e,i),Vg.fromPosition(o,g,c).map(r(rc.normalizePosition,o)).fold(function(){return l.map(Nu)},function(e){return Su(s,g,e).map(r(ku,o,s,g,c,e)).filter(r(Ru,l))}).filter(wu);var o,s,g,l,c})},Tu=Su,Wu=Uu,Eu=(r(Uu,!1),r(Uu,!0),Nu),Hu=function(e){return e.fold(bu.start,bu.start,bu.end,bu.end)},Ou=function(e,t,n){var i=e?1:-1;return t.setRng(Cs(n.container(),n.offset()+i).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Lu=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Vu=function(e){return!1!==e.settings.inline_boundaries},Yu=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Mu=function(e,t,n){return mu(t,n).map(function(t){return Lu(e,t),n})},_u=function(e,t,n){return function(){return!!Vu(t)&&function(e,t){var n=t.selection.getRng(),i=e?Cs.fromRangeEnd(n):Cs.fromRangeStart(n);return!!W(t.selection.getSel().modify)&&(e&&ma(i)?Ou(!0,t.selection,i):!(e||!pa(i))&&Ou(!1,t.selection,i))}(e,t)}},Ku={move:function(e,t,n){return function(){return!!Vu(e)&&(i=e,o=t,a=n,s=i.getBody(),g=Cs.fromRangeStart(i.selection.getRng()),l=r(rc.isInlineTarget,i),Wu(a,l,s,g).bind(function(e){return Mu(i,o,e)})).isSome();var i,o,a,s,g,l}},moveNextWord:r(_u,!0),movePrevWord:r(_u,!1),setupSelectedState:function(e){var t=Ur(null),n=r(rc.isInlineTarget,e);return e.on("NodeChange",function(i){var o,a,s,g;Vu(e)&&(o=n,a=i.parents,s=K(e.dom.select('*[data-mce-selected="inline-boundary"]'),o),g=K(a,o),M(te(s,g),r(Yu,!1)),M(te(g,s),r(Yu,!0)),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Cs.fromRangeStart(e.selection.getRng());Cs.isTextPosition(n)&&!1===rc.isAtZwsp(n)&&(Lu(e,_s.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,i){if(t.selection.isCollapsed()){var o=K(i,e);M(o,function(i){var o=Cs.fromRangeStart(t.selection.getRng());Tu(e,t.getBody(),o).bind(function(e){return Mu(t,n,e)})})}}(n,e,t,i.parents))}),t},setCaretPosition:Lu},zu=function(e,t){return function(n){return mu(t,n).map(function(t){return Ku.setCaretPosition(e,t),!0}).getOr(!1)}},Ju=function(t,n,i,o){var a=t.getBody(),s=r(rc.isInlineTarget,t);t.undoManager.ignore(function(){var r,g,l;t.selection.setRng((r=i,g=o,(l=e.document.createRange()).setStart(r.container(),r.offset()),l.setEnd(g.container(),g.offset()),l)),t.execCommand("Delete"),Tu(s,a,Cs.fromRangeStart(t.selection.getRng())).map(Hu).map(zu(t,n))}),t.nodeChanged()},Pu=function(e,t,n){if(e.selection.isCollapsed()&&!1!==e.settings.inline_boundaries){var o=Cs.fromRangeStart(e.selection.getRng());return function(e,t,n,o){var a,s,g=(a=e.getBody(),s=o.container(),gg(s,a)||a),l=r(rc.isInlineTarget,e),c=Tu(l,g,o);return c.bind(function(e){return n?e.fold(i(Z.some(Hu(e))),Z.none,i(Z.some(Eu(e))),Z.none):e.fold(Z.none,i(Z.some(Eu(e))),Z.none,i(Z.some(Hu(e))))}).map(zu(e,t)).getOrThunk(function(){var i=Vg.navigate(n,g,o),r=i.bind(function(e){return Tu(l,g,e)});return c.isSome()&&r.isSome()?rc.findRootInline(l,g,o).map(function(t){return!!Ma([Vg.firstPositionIn(i=t),Vg.lastPositionIn(i)],function(e,t){var n=rc.normalizePosition(!0,e),o=rc.normalizePosition(!1,t);return Vg.nextPosition(i,n).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)&&(au(e,n,ai.fromDom(t)),!0);var i}).getOr(!1):r.bind(function(r){return i.map(function(i){return n?Ju(e,t,o,i):Ju(e,t,i,o),!0})}).getOr(!1)})}(e,t,n,o)}return!1},ju=Gi("start","end"),$u=Gi("rng","table","cells"),qu=Sc([{removeTable:["element"]},{emptyCells:["cells"]}]),eI=function(e,t){return Jr(ai.fromDom(e),"td,th",t)},tI=function(e,t){return Kr(e,"table",t)},nI=function(e){return!1===Ni(e.start(),e.end())},iI=function(e,t){return tI(e.start(),t).bind(function(n){return tI(e.end(),t).bind(function(e){return Ni(n,e)?Z.some(n):Z.none()})})},oI=function(e){return Lr(e,"td,th")},rI=function(e,t){return iI(t,e).isSome()},aI=function(e,t){return P(e,function(e){return Ni(e,t)})},sI=function(e){return(t=e,Ma([aI(t.cells(),t.rng().start()),aI(t.cells(),t.rng().end())],function(e,n){return t.cells().slice(e,n+1)})).map(function(t){var n=e.cells();return t.length===n.length?qu.removeTable(e.table()):qu.emptyCells(t)});var t},gI=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},lI=gI,cI=function(e,t){var n=Lr(t,"td[data-mce-selected],th[data-mce-selected]"),i=function(e){return K(function(e){return q(e,function(e){var t=Oa(e);return t?[ai.fromDom(t)]:[]})}(e),Bo)}(e);return 0<n.length?n:i},uI=cI,II=function(e){return cI(lI(e.selection.getSel()),ai.fromDom(e.getBody()))},dI=function(e,t){return M(t,Dl),e.selection.setCursorLocation(t[0].dom(),0),!0},CI=function(e,t){return au(e,!1,t),!0},hI=function(e,t){return J(mc(t,e),Bo)},AI=function(e,t){return J(mc(t,e),function(e){return"caption"===ci(e)})},fI=function(e,t){return Dl(t),e.selection.setCursorLocation(t.dom(),0),Z.some(!0)},mI=function(e,t){var n,i,o,a,s,g=ai.fromDom(e.selection.getStart(!0)),l=II(e);return e.selection.isCollapsed()&&0===l.length?function(e,t,n){var i=ai.fromDom(e.getBody());return AI(i,n).fold(function(){return function(e,t,n,i){var o=Cs.fromRangeStart(e.selection.getRng());return hI(n,i).bind(function(i){return Ic(i)?fI(e,i):(r=n,a=i,s=o,Vg.navigate(t,e.getBody(),s).bind(function(e){return hI(r,ai.fromDom(e.getNode())).map(function(e){return!1===Ni(e,a)})}));var r,a,s})}(e,t,i,n)},function(n){return r=t,a=i,s=n,g=Cs.fromRangeStart((o=e).selection.getRng()),Ic(s)?fI(o,s):function(e,t,n,i,o){return Vg.navigate(n,e.getBody(),o).bind(function(r){return g=n,l=o,c=r,Vg.firstPositionIn((s=i).dom()).bind(function(e){return Vg.lastPositionIn(s.dom()).map(function(t){return g?l.isEqual(e)&&c.isEqual(t):l.isEqual(t)&&c.isEqual(e)})}).getOr(!0)?fI(e,i):(a=i,AI(t,ai.fromDom(r.getNode())).map(function(e){return!1===Ni(e,a)}));var a,s,g,l,c}).or(Z.some(!0))}(o,a,r,s,g);var o,r,a,s,g}).getOr(!1)}(e,t,g):(i=g,o=ai.fromDom((n=e).getBody()),a=n.selection.getRng(),0!==(s=II(n)).length?dI(n,s):function(e,t,n,i){return AI(t,i).fold(function(){return i=e,function(e,t){return function(e,t){var n,i,o,a,s=r(Ni,e);return(n=t,i=s,o=eI(n.startContainer,i),a=eI(n.endContainer,i),Ma([o,a],ju).filter(nI).filter(function(e){return rI(i,e)}).orThunk(function(){return function(e,t){var n=eI(t.startContainer,e),i=eI(t.endContainer,e);return t.collapsed?Z.none():Ma([n,i],ju).fold(function(){return n.fold(function(){return i.bind(function(t){return tI(t,e).bind(function(e){return ne(oI(e)).map(function(e){return ju(e,t)})})})},function(t){return tI(t,e).bind(function(e){return ie(oI(e)).map(function(e){return ju(t,e)})})})},function(t){return rI(e,t)?Z.none():(i=e,tI((n=t).start(),i).bind(function(e){return ie(oI(e)).map(function(e){return ju(n.start(),e)})}));var n,i})}(i,n)})).bind(function(e){return iI(t=e,s).map(function(e){return $u(t,e,oI(e))});var t})}(e,n).bind(sI)}(t).map(function(e){return e.fold(r(CI,i),r(dI,i))});var i},function(t){return fI(e,t)}).getOr(!1)}(n,o,a,i))},pI=sl,bI=function(e,t,n){var i=e.formatter.get(n);if(i)for(var o=0;o<i.length;o++)if(!1===i[o].inherit&&e.dom.is(t,i[o].selector))return!0;return!1},BI=function(e,t,n,i){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,function(t){return!!bI(e,t,n)||t.parentNode===o||!!xI(e,t,n,i,!0)}),xI(e,t,n,i))},vI=function(e,t,n){return!!pI(t,n.inline)||!!pI(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},yI=function(e,t,n,i,o,r){var a,s,g,l=n[i];if(n.onmatch)return n.onmatch(t,n,i);if(l)if(void 0===l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===i?e.getAttrib(t,a):ll(e,t,a),o&&!s&&!n.exact)return;if((!o||n.exact)&&!pI(s,gl(e,al(l[a],r),a)))return}}else for(g=0;g<l.length;g++)if("attributes"===i?e.getAttrib(t,l[g]):ll(e,t,l[g]))return n;return n},xI=function(e,t,n,i,o){var r,a,s,g,l=e.formatter.get(n),c=e.dom;if(l&&t)for(a=0;a<l.length;a++)if(vI(e.dom,t,r=l[a])&&yI(c,t,r,"attributes",o,i)&&yI(c,t,r,"styles",o,i)){if(g=r.classes)for(s=0;s<g.length;s++)if(!e.dom.hasClass(t,g[s]))return;return r}},FI={matchNode:xI,matchName:vI,match:function(e,t,n,i){var o;return i?BI(e,i,t,n):(i=e.selection.getNode(),!!BI(e,i,t,n)||!((o=e.selection.getStart())===i||!BI(e,o,t,n)))},matchAll:function(e,t,n){var i,o=[],r={};return i=e.selection.getStart(),e.dom.getParent(i,function(i){var a,s;for(a=0;a<t.length;a++)!r[s=t[a]]&&xI(e,i,s,n)&&(r[s]=!0,o.push(s))},e.dom.getRoot()),o},canApply:function(e,t){var n,i,o,r,a,s=e.formatter.get(t),g=e.dom;if(s)for(n=e.selection.getStart(),i=ul(g,n),r=s.length-1;0<=r;r--){if(!(a=s[r].selector)||s[r].defaultBlock)return!0;for(o=i.length-1;0<=o;o--)if(g.is(i[o],a))return!0}return!1},matchesUnInheritedFormatSelector:bI},GI=function(e,t){return e.splitText(t)},QI=function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset;return t===i&&Ro.isText(t)?0<n&&n<t.nodeValue.length&&(t=(i=GI(t,n)).previousSibling,n<o?(t=i=GI(i,o-=n).previousSibling,o=i.nodeValue.length,n=0):o=0):(Ro.isText(t)&&0<n&&n<t.nodeValue.length&&(t=GI(t,n),n=0),Ro.isText(i)&&0<o&&o<i.nodeValue.length&&(o=(i=GI(i,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:i,endOffset:o}},wI=ca,SI="_mce_caret",XI=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==wI||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},ZI=function(e){var t;if(e)for(e=(t=new ao(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},NI=function(e){var t=ai.fromTag("span");return Bi(t,{id:SI,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Xr(t,ai.fromText(wI)),t},kI=function(e,t,n){void 0===n&&(n=!0);var i,o=e.dom,r=e.selection;if(XI(t))au(e,!1,ai.fromDom(t),n);else{var a=r.getRng(),s=o.getParent(t,o.isBlock),g=((i=ZI(t))&&i.nodeValue.charAt(0)===wI&&i.deleteData(0,1),i);a.startContainer===g&&0<a.startOffset&&a.setStart(g,a.startOffset-1),a.endContainer===g&&0<a.endOffset&&a.setEnd(g,a.endOffset-1),o.remove(t,!0),s&&o.isEmpty(s)&&Dl(ai.fromDom(s)),r.setRng(a)}},RI=function(e,t,n){void 0===n&&(n=!0);var i=e.dom,o=e.selection;if(t)kI(e,t,n);else if(!(t=Ws(e.getBody(),o.getStart())))for(;t=i.get(SI);)kI(e,t,!1)},DI=function(e,t,n){var i=e.dom,o=i.getParent(n,r(il,e));o&&i.isEmpty(o)?n.parentNode.replaceChild(t,n):(function(e){var t=Lr(e,"br"),n=K(function(e){for(var t=[],n=e.dom();n;)t.push(ai.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),ho);t.length===n.length&&M(n,kr)}(ai.fromDom(n)),i.isEmpty(n)?n.parentNode.replaceChild(t,n):i.insertAfter(t,n))},UI=function(e,t){return e.appendChild(t),t},TI=function(e,t){var n,i,o=(n=function(e,t){return UI(e,t.cloneNode(!1))},i=t,function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,function(e){i=n(i,e)}),i);return UI(o,o.ownerDocument.createTextNode(wI))},WI=function(e){e.on("mouseup keydown",function(t){var n,i,o,r;i=t.keyCode,o=(n=e).selection,r=n.getBody(),RI(n,null,!1),8!==i&&46!==i||!o.isCollapsed()||o.getStart().innerHTML!==wI||RI(n,Ws(r,o.getStart())),37!==i&&39!==i||RI(n,Ws(r,o.getStart()))})},EI=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(ci(t))&&!Ts(t.dom())&&!Ro.isBogus(t.dom())},HI=function(e){return 1===Oi(e).length},OI=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n,o=ai.fromDom(e.getBody()),a=ai.fromDom(e.selection.getStart()),s=K((n=mc(a,o),P(n,Io).fold(i(n),function(e){return n.slice(0,e)})),HI);return ie(s).map(function(n){var i,o=Cs.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Ma([Vg.firstPositionIn(n),Vg.lastPositionIn(n)],function(i,o){var r=rc.normalizePosition(!0,i),a=rc.normalizePosition(!1,o),s=rc.normalizePosition(!1,t);return e?Vg.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(r)}).getOr(!1):Vg.prevPosition(n,s).map(function(e){return e.isEqual(r)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)}(t,o,n.dom())||Ts((i=n).dom())&&XI(i.dom())||(function(e,t,n,i){var o,a,s,g,l=r(EI,t),c=Y(K(i,l),function(e){return e.dom()});if(0===c.length)au(t,e,n);else{var u=(o=n.dom(),a=c,s=NI(!1),g=TI(a,s.dom()),Qr(ai.fromDom(o),s),kr(ai.fromDom(o)),Cs(g,0));t.selection.setRng(u.toRange())}}(t,e,n,s),0))}).getOr(!1)}(e,t)},LI=Ro.isContentEditableTrue,VI=Ro.isContentEditableFalse,YI=function(e,t,n,i,o){return t._selectionOverrides.showCaret(e,n,i,o)},MI=function(e,t){var n,i;return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((i=(n=t).ownerDocument.createRange()).selectNode(n),i)},_I=function(e,t,n){var i=hg(1,e.getBody(),t),o=Cs.fromRangeStart(i),r=o.getNode();if(VI(r))return YI(1,e,r,!o.isAtEnd(),!1);var a=o.getNode(!0);if(VI(a))return YI(1,e,a,!1,!1);var s=e.dom.getParent(o.getNode(),function(e){return VI(e)||LI(e)});return VI(s)?YI(1,e,s,!1,n):null},KI=function(e,t,n){return t&&t.collapsed&&_I(e,t,n)||t},zI=function(e,t,n,i,o,r){var a,s,g=YI(i,e,r.getNode(!o),o,!0);if(t.collapsed){var l=t.cloneRange();o?l.setEnd(g.startContainer,g.startOffset):l.setStart(g.endContainer,g.endOffset),l.deleteContents()}else t.deleteContents();return e.selection.setRng(g),a=e.dom,Ro.isText(s=n)&&0===s.data.length&&a.remove(s),!0},JI=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Ro.isText(n.commonAncestorContainer))return!1;var i=t?Is.Forwards:Is.Backwards,o=kg(e.getBody()),a=r(pg,o.next),s=r(pg,o.prev),g=t?a:s,l=t?Yc:Mc,c=fg(i,e.getBody(),n),u=rc.normalizePosition(t,g(c));if(!u)return!1;if(l(u))return zI(e,n,c.getNode(),i,t,u);var I=g(u);return!!(I&&l(I)&&bg(u,I))&&zI(e,n,c.getNode(),i,t,I)}(e,t)},PI=function(e,t){e.getDoc().execCommand(t,!1,null)},jI=function(e){su(e,!1)||JI(e,!1)||Pu(e,!1)||Gc(e,!1)||mI(e)||wc(e)||OI(e,!1)||(PI(e,"Delete"),sc(e))},$I=function(e){su(e,!0)||JI(e,!0)||Pu(e,!0)||Gc(e,!0)||mI(e)||wc(e)||OI(e,!0)||PI(e,"ForwardDelete")},qI=function(e){return function(t,n){return Z.from(n).map(ai.fromDom).filter(Ii).bind(function(n){return function(e,t,n){var i=function(t){return n=e,i=t.dom(),o=Fi(i,n),Z.from(o).filter(function(e){return 0<e.length});var n,i,o};return _r(ai.fromDom(n),function(e){return i(e).isSome()},function(e){return Ni(ai.fromDom(t),e)}).bind(i)}(e,t,n.dom()).or((i=e,o=n.dom(),Z.from(mr.DOM.getStyle(o,i,!0))));var i,o}).getOr("")}},ed={getFontSize:qI("font-size"),getFontFamily:n(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},qI("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,i=Math.pow(10,t||0),Math.round(n*i)/i+"pt"):e;var n,i}},td=function(e){return Vg.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return Ro.isText(t)?t.parentNode:t})},nd=function(e){return Z.from(e.selection.getRng()).bind(function(t){var n,i=e.getBody();return(n=t).startContainer===i&&0===n.startOffset?Z.none():Z.from(e.selection.getStart(!0))})},id=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var i=function(e){return Pt.explode(e.getParam("font_size_style_values",""))}(e),o=function(e){return Pt.explode(e.getParam("font_size_classes",""))}(e);return o?o[n-1]||t:i[n-1]||t}return t}return t},od=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},rd=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},ad=function(e,t,n){return rd(e,t,function(e){return e.nodeName===n})},sd=function(e){return e&&"TABLE"===e.nodeName},gd=function(e,t,n){for(var i=new ao(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=i[n?"prev":"next"]();)if(Ro.isBr(t))return!0},ld=function(e,t,n,i,o){var r,a,s,g,l,c,u=e.getRoot(),I=e.schema.getNonEmptyElements();if(s=e.getParent(o.parentNode,e.isBlock)||u,i&&Ro.isBr(o)&&t&&e.isEmpty(s))return Z.some(us(o.parentNode,e.nodeIndex(o)));for(r=new ao(o,s);g=r[i?"prev":"next"]();){if("false"===e.getContentEditableParent(g)||(c=u,Aa(l=g)&&!1===rd(l,c,Ts)))return Z.none();if(Ro.isText(g)&&0<g.nodeValue.length)return!1===ad(g,u,"A")?Z.some(us(g,i?g.nodeValue.length:0)):Z.none();if(e.isBlock(g)||I[g.nodeName.toLowerCase()])return Z.none();a=g}return n&&a?Z.some(us(a,0)):Z.none()},cd=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d=e.getRoot(),C=!1;if(r=i[(n?"start":"end")+"Offset"],c=Ro.isElement(o=i[(n?"start":"end")+"Container"])&&r===o.childNodes.length,g=e.schema.getNonEmptyElements(),l=n,Aa(o))return Z.none();if(Ro.isElement(o)&&r>o.childNodes.length-1&&(l=!1),Ro.isDocument(o)&&(o=d,r=0),o===d){if(l&&(s=o.childNodes[0<r?r-1:0])){if(Aa(s))return Z.none();if(g[s.nodeName]||sd(s))return Z.none()}if(o.hasChildNodes()){if(r=Math.min(!l&&0<r?r-1:r,o.childNodes.length-1),r=Ro.isText(o=o.childNodes[r])&&c?o.data.length:0,!t&&o===d.lastChild&&sd(o))return Z.none();if(function(e,t){for(;t&&t!==e;){if(Ro.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(d,o)||Aa(o))return Z.none();if(o.hasChildNodes()&&!1===sd(o)){a=new ao(s=o,d);do{if(Ro.isContentEditableFalse(s)||Aa(s)){C=!1;break}if(Ro.isText(s)&&0<s.nodeValue.length){r=l?0:s.nodeValue.length,o=s,C=!0;break}if(g[s.nodeName.toLowerCase()]&&(!(u=s)||!/^(TD|TH|CAPTION)$/.test(u.nodeName))){r=e.nodeIndex(s),o=s.parentNode,l||r++,C=!0;break}}while(s=l?a.next():a.prev())}}}return t&&(Ro.isText(o)&&0===r&&ld(e,c,t,!0,o).each(function(e){o=e.container(),r=e.offset(),C=!0}),Ro.isElement(o)&&((s=o.childNodes[r])||(s=o.childNodes[r-1]),!s||!Ro.isBr(s)||(I=s).previousSibling&&"A"===I.previousSibling.nodeName||gd(e,s,!1)||gd(e,s,!0)||ld(e,c,t,!0,s).each(function(e){o=e.container(),r=e.offset(),C=!0}))),l&&!t&&Ro.isText(o)&&r===o.nodeValue.length&&ld(e,c,t,!1,o).each(function(e){o=e.container(),r=e.offset(),C=!0}),C?Z.some(us(o,r)):Z.none()},ud=function(e,t){var n=t.collapsed,i=t.cloneRange(),o=us.fromRangeStart(t);return cd(e,n,!0,i).each(function(e){n&&us.isAbove(o,e)||i.setStart(e.container(),e.offset())}),n||cd(e,n,!1,i).each(function(e){i.setEnd(e.container(),e.offset())}),n&&i.collapse(!0),od(t,i)?Z.none():Z.some(i)},Id=function(e,t,n){var i=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(i,n),t.scrollIntoView(i),e.remove(i)},dd=function(e,t,n,i){var o=e.createRng();i?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Cd=function(e,t){var n=ai.fromTag("br");Qr(ai.fromDom(t),n),e.undoManager.add()},hd=function(e,t){Ad(e.getBody(),t)||wr(ai.fromDom(t),ai.fromTag("br"));var n=ai.fromTag("br");wr(ai.fromDom(t),n),Id(e.dom,e.selection,n.dom()),dd(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Ad=function(e,t){return n=Cs.after(t),!!Ro.isBr(n.getNode())||Vg.nextPosition(e,Cs.after(t)).map(function(e){return Ro.isBr(e.getNode())}).getOr(!1);var n},fd=function(e){return e&&"A"===e.nodeName&&"href"in e},md=function(e){return e.fold(i(!1),fd,fd,i(!1))},pd=function(e,n){n.fold(t,r(Cd,e),r(hd,e),t)},bd=function(e,t){var n,i,o,a=(i=r(rc.isInlineTarget,n=e),o=Cs.fromRangeStart(n.selection.getRng()),Tu(i,n.getBody(),o).filter(md));a.isSome()?a.each(r(pd,e)):function(e,t){var n,i,o=e.selection,r=e.dom,a=o.getRng();ud(r,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,g=a.startContainer;if(1===g.nodeType&&g.hasChildNodes()){var l=s>g.childNodes.length-1;g=g.childNodes[Math.min(s,g.childNodes.length-1)]||g,s=l&&3===g.nodeType?g.nodeValue.length:0}var c=r.getParent(g,r.isBlock),u=c?r.getParent(c.parentNode,r.isBlock):null;"LI"!==(u?u.nodeName.toUpperCase():"")||t&&t.ctrlKey||(c=u),g&&3===g.nodeType&&s>=g.nodeValue.length&&(function(e,t,n){for(var i,o=new ao(g,c),r=e.getNonEmptyElements();i=o.next();)if(r[i.nodeName.toLowerCase()]||0<i.length)return!0}(e.schema)||(n=r.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),i=!0)),n=r.create("br"),Fs(r,a,n),Id(r,o,n),dd(r,o,n,i),e.undoManager.add()}(e,t)},Bd={create:Gi("start","soffset","finish","foffset")},vd=(Sc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(e){return e.fold(o,o,o)}),yd=Sc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xd={domRange:yd.domRange,relative:yd.relative,exact:yd.exact,exactFromRange:function(e){return yd.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return ai.fromDom(e.startContainer)},relative:function(e,t){return vd(e)},exact:function(e,t,n,i){return e}});return Di(t)},range:Bd.create},Fd=oi.detect().browser,Gd=function(e,t){var n=di(t)?Ql(t).length:Oi(t).length+1;return n<e?n:e<0?0:e},Qd=function(e){return xd.range(e.start(),Gd(e.soffset(),e.start()),e.finish(),Gd(e.foffset(),e.finish()))},wd=function(e,t){return!Ro.isRestrictedNode(t.dom())&&(ki(e,t)||Ni(e,t))},Sd=function(e){return function(t){return wd(e,t.start())&&wd(e,t.finish())}},Xd=function(e){return xd.range(ai.fromDom(e.startContainer),e.startOffset,ai.fromDom(e.endContainer),e.endOffset)},Zd=function(e,t){return Z.from(t).filter(Sd(e)).map(Qd)},Nd=function(t){var n=e.document.createRange();try{return n.setStart(t.start().dom(),t.soffset()),n.setEnd(t.finish().dom(),t.foffset()),Z.some(n)}catch(g){return Z.none()}},kd=function(e){return(e.bookmark?e.bookmark:Z.none()).bind(r(Zd,ai.fromDom(e.getBody()))).bind(Nd)},Rd=function(e){var t=function(e){return!0===e.inline||Fd.isIE()}(e)?function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?Z.from(t.getRangeAt(0)):Z.none()).map(Xd)}(Di(e).dom()).filter(Sd(e))}(ai.fromDom(e.getBody())):Z.none();e.bookmark=t.isSome()?t:e.bookmark},Dd=function(e){kd(e).each(function(t){e.selection.setRng(t)})},Ud=kd,Td=function(e){return fo(e)||mo(e)},Wd=function(e,t){var n=e.settings,i=e.dom,o=e.selection,r=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),g=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||i.getParent(o.getNode(),i.isBlock)||r.apply("div"),M(function(e){return K(Y(e.selection.getSelectedBlocks(),ai.fromDom),function(e){return!Td(e)&&!Ui(e).map(Td).getOr(!1)})}(e),function(e){!function(e,t,n,i,o,r){if("false"!==e.getContentEditable(r)){var a=n?"margin":"padding";if(a="TABLE"===r.nodeName?"margin":a,a+="rtl"===e.getStyle(r,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(r.style[a]||0,10)-i);e.setStyle(r,a,s?s+o:"")}else s=parseInt(r.style[a]||0,10)+i+o,e.setStyle(r,a,s)}}(i,t,g,s,a,e.dom())})},Ed=Pt.each,Hd=Pt.extend,Od=Pt.map,Ld=Pt.inArray;function Vd(e){var t,n,i,o,r={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,i=e.formatter});var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=r.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(a){}return!1}},g=function(e,t){t=t||"exec",Ed(e,function(e,n){Ed(n.toLowerCase().split(","),function(n){r[t][n]=e})})},l=function(t,n,i){t=t.toLowerCase(),r.value[t]=function(){return n.call(i||e)}};Hd(this,{execCommand:function(t,n,i,o){var a,s,g=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?Dd(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:i})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=r.exec[s])return a(s,n,i),e.fire("ExecCommand",{command:t,ui:n,value:i}),!0;if(Ed(e.plugins,function(o){if(o.execCommand&&o.execCommand(t,n,i))return e.fire("ExecCommand",{command:t,ui:n,value:i}),!(g=!0)}),g)return g;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,i))return e.fire("ExecCommand",{command:t,ui:n,value:i}),!0;try{g=e.getDoc().execCommand(t,n,i)}catch(l){}return!!g&&(e.fire("ExecCommand",{command:t,ui:n,value:i}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=r.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(a){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),r.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(o){}return!1},addCommands:g,addCommand:function(t,n,i){t=t.toLowerCase(),r.exec[t]=function(t,o,r,a){return n.call(i||e,o,r,a)}},addQueryStateHandler:function(t,n,i){t=t.toLowerCase(),r.state[t]=function(){return n.call(i||e)}},addQueryValueHandler:l,hasCustomCommand:function(e){return e=e.toLowerCase(),!!r.exec[e]}});var c=function(t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=null),e.getDoc().execCommand(t,n,i)},u=function(e){return i.match(e)},I=function(t,n){i.toggle(t,n?{value:n}:void 0),e.nodeChanged()},d=function(e){o=n.getBookmark(e)},C=function(){n.moveToBookmark(o)};g({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var i,o=e.getDoc();try{c(n)}catch(t){i=!0}if("paste"!==n||o.queryCommandEnabled(n)||(i=!0),i||!o.queryCommandSupported(n)){var r=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");de.mac&&(r=r.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else i.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Ed("left,center,right,justify".split(","),function(e){t!==e&&i.remove("align"+e)}),"none"!==t&&I("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var i,o;c(e),(i=t.getParent(n.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((o=i.parentNode).nodeName)&&(d(),t.split(o,i),C())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){I(e)},"ForeColor,HiliteColor":function(e,t,n){I(e,n)},FontName:function(t,n,i){var o;(o=e).formatter.toggle("fontname",{value:id(o,i)}),o.nodeChanged()},FontSize:function(t,n,i){var o;(o=e).formatter.toggle("fontsize",{value:id(o,i)}),o.nodeChanged()},RemoveFormat:function(e){i.remove(e)},mceBlockQuote:function(){I("blockquote")},FormatBlock:function(e,t,n){return I(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,i,o){var r=o||n.getNode();r!==e.getBody()&&(d(),e.dom.remove(r,!0),C())},mceSelectNodeDepth:function(i,o,r){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===r)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,i){n.select(i)},mceInsertContent:function(t,n,i){Vl(e,i)},mceInsertRawHTML:function(t,i,o){n.setContent("tiny_mce_marker");var r=e.getContent();e.setContent(r.replace(/tiny_mce_marker/g,function(){return o}))},mceToggleFormat:function(e,t,n){I(n)},mceSetContent:function(t,n,i){e.setContent(i)},"Indent,Outdent":function(t){Wd(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,i,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,r){var a;"string"==typeof r&&(r={href:r}),a=t.getParent(n.getNode(),"a"),r.href=r.href.replace(" ","%20"),a&&r.href||i.remove("link"),r.href&&i.apply("link",r,a)},selectAll:function(){var e=t.getParent(n.getStart(),Ro.isContentEditableTrue);if(e){var i=t.createRng();i.selectNodeContents(e),n.setRng(i)}},delete:function(){jI(e)},forwardDelete:function(){$I(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,i){return bd(e,i),!0}});var h=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),r=Od(o,function(t){return!!i.matchNode(t,e)});return-1!==Ld(r,!0)}};g({JustifyLeft:h("alignleft"),JustifyCenter:h("aligncenter"),JustifyRight:h("alignright"),JustifyFull:h("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return u(e)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var i=t.getParent(n.getNode(),"ul,ol");return i&&("insertunorderedlist"===e&&"UL"===i.tagName||"insertorderedlist"===e&&"OL"===i.tagName)}},"state"),g({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),l("FontName",function(){return nd(t=e).fold(function(){return td(t).map(function(e){return ed.getFontFamily(t.getBody(),e)}).getOr("")},function(e){return ed.getFontFamily(t.getBody(),e)});var t},this),l("FontSize",function(){return nd(t=e).fold(function(){return td(t).map(function(e){return ed.getFontSize(t.getBody(),e)}).getOr("")},function(e){return ed.getFontSize(t.getBody(),e)});var t},this)}var Yd=Pt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Md=function(e){var t,n,i=this,o={},r=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||i,n=e.toggleEvent||r;var s=function(e,t,a,s){var g,l,c;if(!1===t&&(t=r),t)for(t={func:t},s&&Pt.extend(t,s),c=(l=e.toLowerCase().split(" ")).length;c--;)(g=o[e=l[c]])||(g=o[e]=[],n(e,!0)),a?g.unshift(t):g.push(t);return i},g=function(e,t){var r,a,s,g,l;if(e)for(r=(g=e.toLowerCase().split(" ")).length;r--;){if(a=o[e=g[r]],!e){for(s in o)n(s,!1),delete o[s];return i}if(a){if(t)for(l=a.length;l--;)a[l].func===t&&(a=a.slice(0,l).concat(a.slice(l+1)),o[e]=a);else a.length=0;a.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return i};i.fire=function(n,i){var s,l,c,u;if(n=n.toLowerCase(),(i=i||{}).type=n,i.target||(i.target=t),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=a},i.stopPropagation=function(){i.isPropagationStopped=a},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=a},i.isDefaultPrevented=r,i.isPropagationStopped=r,i.isImmediatePropagationStopped=r),e.beforeFire&&e.beforeFire(i),s=o[n])for(l=0,c=s.length;l<c;l++){if((u=s[l]).once&&g(n,u.func),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(!1===u.func.call(t,i))return i.preventDefault(),i}return i},i.on=s,i.off=g,i.once=function(e,t,n){return s(e,t,n,{once:!0})},i.has=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)}};Md.isNative=function(e){return!!Yd[e.toLowerCase()]};var _d,Kd=function(e){return e._eventDispatcher||(e._eventDispatcher=new Md({scope:e,toggleEvent:function(t,n){Md.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},zd={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;if(t=Kd(this).fire(e,t,n),!1!==n&&this.parent)for(var i=this.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return Kd(this).on(e,t,n)},off:function(e,t){return Kd(this).off(e,t)},once:function(e,t){return Kd(this).once(e,t)},hasEventListeners:function(e){return Kd(this).has(e)}},Jd=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(l){}},Pd=function(e,t){(function(e,t,n){var i,o;Hr(e,t)&&!1===n?(o=t,Wr(i=e)?i.dom().classList.remove(o):function(e,t){return"mce-content-readonly",0<(o=K(Tr(n=e,i="class"),function(e){return"mce-content-readonly"!==e})).length?bi(n,i,o.join(" ")):yi(n,i),!1;var n,i,o}(i),function(e){0===(Wr(e)?e.dom().classList:Tr(e,"class")).length&&yi(e,"class")}(i)):n&&Er(e,t)})(ai.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Jd(e,"StyleWithCSS",!1),Jd(e,"enableInlineTableEditing",!1),Jd(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},jd=mr.DOM,$d=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=jd.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},qd=function(e,t,n){var i;(i=e).hidden||i.readonly?!0===e.readonly&&n.preventDefault():e.fire(t,n)},eC=function(e,t){var n,i;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=$d(e,t),e.settings.event_root){if(_d||(_d={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&_d){for(t in _d)e.dom.unbind($d(e,t));_d=null}})),_d[t])return;_d[t]=i=function(n){for(var i=n.target,o=e.editorManager.get(),r=o.length;r--;){var a=o[r].getBody();(a===i||jd.isChildOf(i,a))&&qd(o[r],t,n)}},jd.bind(n,t,i)}else jd.bind(n,t,i=function(n){qd(e,t,n)}),e.delegates[t]=i},tC={bindPendingEventDelegates:function(){var e=this;Pt.each(e._pendingNativeEvents,function(t){eC(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?eC(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind($d(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),i=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind($d(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&i&&(n.onload=null,i.unbind(t.getWin()),i.unbind(t.getDoc())),i&&(i.unbind(n),i.unbind(t.getContainer()))}},nC=tC=Pt.extend({},zd,tC),iC=Gi("sections","settings"),oC=oi.detect().deviceType.isTouch(),rC=["lists","autolink","autosave"],aC={theme:"mobile"},sC=function(e){var t=D(e)?e.join(" "):e,n=Y(k(t)?t.split(" "):[],jn);return K(n,function(e){return 0<e.length})},gC=function(e,t){return e.sections().hasOwnProperty(t)},lC=function(e,t,n,i){var o,a=sC(n.forced_plugins),s=sC(i.plugins),g=(o=e&&gC(t,"mobile")?K(s,r(L,rC)):s,[].concat(sC(a)).concat(sC(o)));return Pt.extend(i,{plugins:g.join(" ")})},cC=function(e,t,n){return Z.from(t.settings[n]).filter(e)},uC=Pt.each,IC=Pt.explode,dC={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},CC=Pt.makeMap("alt,ctrl,shift,meta,access");function hC(e){var t={},n=[],i=function(e){var t,n,i={};for(n in uC(IC(e,"+"),function(e){e in CC?i[e]=!0:/^[0-9]{2,}$/.test(e)?i.keyCode=parseInt(e,10):(i.charCode=e.charCodeAt(0),i.keyCode=dC[e]||e.toUpperCase().charCodeAt(0))}),t=[i.keyCode],CC)i[n]?t.push(n):i[n]=!1;return i.id=t.join(","),i.access&&(i.alt=!0,de.mac?i.ctrl=!0:i.shift=!0),i.meta&&(de.mac?i.meta=!0:(i.ctrl=!0,i.meta=!1)),i},o=function(t,n,o,r){var a;return(a=Pt.map(IC(t,">"),i))[a.length-1]=Pt.extend(a[a.length-1],{func:o,scope:r||e}),Pt.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},r=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){var i,o;((o=e).altKey||o.ctrlKey||o.metaKey||"keydown"===(i=e).type&&112<=i.keyCode&&i.keyCode<=123)&&!e.isDefaultPrevented()&&(uC(t,function(t){if(r(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0}),r(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))}),this.add=function(n,i,r,a){var s;return"string"==typeof(s=r)?r=function(){e.execCommand(s,!1,null)}:Pt.isArray(s)&&(r=function(){e.execCommand(s[0],s[1],s[2])}),uC(IC(Pt.trim(n.toLowerCase())),function(e){var n=o(e,i,r,a);t[n.id]=n}),!0},this.remove=function(e){var n=o(e);return!!t[n.id]&&(delete t[n.id],!0)}}var AC=function(e){var t=Ri(e).dom();return e.dom()===t.activeElement},fC=function(e,t){(function(e,t){return(n=t,n.collapsed?Z.from(La(n.startContainer,n.startOffset)).map(ai.fromDom):Z.none()).bind(function(t){return bo(t)?Z.some(t):!1===ki(e,t)?Z.some(e):Z.none()});var n})(ai.fromDom(e.getBody()),t).bind(function(e){return Vg.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},mC=function(e){if(e.setActive)try{e.setActive()}catch(s){e.focus()}else e.focus()},pC=function(t){return t.inline?function(t){var n,i=t.getBody();return i&&(n=ai.fromDom(i),AC(n)||function(t){return(n=Ri(t),i=void 0!==n?n.dom():e.document,Z.from(i.activeElement).map(ai.fromDom)).filter(function(e){return t.dom().contains(e.dom())});var n,i}(n).isSome())}(t):(n=t).iframeElement&&AC(ai.fromDom(n.iframeElement));var n},bC=function(e){return e.editorManager.setActive(e)},BC=pC,vC=function(e,t){return t.dom()[e]},yC=function(e,t){return parseInt(xi(t,e),10)},xC=r(vC,"clientWidth"),FC=r(vC,"clientHeight"),GC=r(yC,"margin-top"),QC=r(yC,"margin-left"),wC=function(e,t,n){var i,o,r,a,s,g,l,c,u,I,d=ai.fromDom(e.getBody()),C=e.inline?d:ai.fromDom(d.dom().ownerDocument.documentElement),h=(i=e.inline,r=t,a=n,s=(o=C).dom().getBoundingClientRect(),{x:r-(i?s.left+o.dom().clientLeft+QC(o):0),y:a-(i?s.top+o.dom().clientTop+GC(o):0)});return l=h.x,c=h.y,u=xC(g=C),I=FC(g),0<=l&&0<=c&&l<=u&&c<=I},SC=function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),Z.from(t).map(ai.fromDom)).map(function(e){return ki(Ri(e),e)}).getOr(!1)};function XC(e){var t,n=[],i=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},o=function(){0<n.length&&i().reposition(n)},r=function(e){P(n,function(t){return t===e}).each(function(e){n.splice(e,1)})},a=function(t){if(!e.removed&&SC(e))return J(n,function(e){return!((n=i().getArgs(e)).type!==(o=t).type||n.text!==o.text||n.progressBar||n.timeout||o.progressBar||o.timeout);var n,o}).getOrThunk(function(){e.editorManager.setActive(e);var a=i().open(t,function(){r(a),o()});return n.push(a),o(),a})};return(t=e).on("SkinLoaded",function(){var e=t.settings.service_message;e&&a({text:e,type:"warning",timeout:0,icon:""})}),t.on("ResizeEditor ResizeWindow",function(){me.requestAnimationFrame(o)}),t.on("remove",function(){M(n.slice(),function(e){i().close(e)})}),{open:a,close:function(){Z.from(n[0]).each(function(e){i().close(e),r(e),o()})},getNotifications:function(){return n}}}function ZC(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},i=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(n){t.push(n),e.fire("OpenWindow",{win:n})},r=function(n){P(t,function(e){return e===n}).each(function(i){t.splice(i,1),e.fire("CloseWindow",{win:n}),0===t.length&&e.focus()})},a=function(){return Z.from(t[t.length-1])};return e.on("remove",function(){M(t.slice(0),function(e){n().close(e)})}),{windows:t,open:function(t,i){e.editorManager.setActive(e),Rd(e);var a=n().open(t,i,r);return o(a),a},alert:function(e,t,a){var s=n().alert(e,i(a||this,t),r);o(s)},confirm:function(e,t,a){var s=n().confirm(e,i(a||this,t),r);o(s)},close:function(){a().each(function(e){n().close(e),r(e)})},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each(function(t){n().setParams(t,e)})},getWindows:function(){return t}}}var NC={},kC="en",RC={setCode:function(e){e&&(kC=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return kC},rtl:!1,add:function(e,t){var n=NC[e];for(var i in n||(NC[e]=n={}),t)n[i]=t[i];this.setCode(e)},translate:function(e){var t=NC[kC]||{},n=function(e){return Pt.is(e,"function")?Object.prototype.toString.call(e):i(e)?"":""+e},i=function(e){return""===e||null===e||Pt.is(e,"undefined")},o=function(e){return e=n(e),Pt.hasOwn(t,e)?n(t[e]):e};if(i(e))return"";if(Pt.is(e,"object")&&Pt.hasOwn(e,"raw"))return n(e.raw);if(Pt.is(e,"array")){var r=e.slice(1);e=o(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Pt.hasOwn(r,t)?n(r[t]):e})}return o(e).replace(/{context:\w+}$/,"")},data:NC},DC=Gr.PluginManager,UC=function(e,t){e.notificationManager.open({type:"error",text:t})},TC=function(e,t){e._skinLoaded?UC(e,t):e.on("SkinLoaded",function(){UC(e,t)})},WC=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e.window.console;o&&(o.error?o.error.apply(o,arguments):o.log.apply(o,arguments))},EC={pluginLoadError:function(e,t){TC(e,function(e,t){var n=function(e,t){for(var n in DC.urls)if(DC.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return RC.translate(n?["Failed to load plugin: {0} from url {1}",n,t]:["Failed to load plugin url: {0}",t])}(e,t))},pluginInitError:function(e,t,n){var i=RC.translate(["Failed to initialize plugin: {0}",t]);WC(i,n),TC(e,i)},uploadError:function(e,t){TC(e,RC.translate(["Failed to upload image: {0}",t]))},displayError:TC,initError:WC},HC=Gr.PluginManager,OC=Gr.ThemeManager;function LC(){return new(ae.getOrDie("XMLHttpRequest"))}var VC=function(e){var t,n,i=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(i[0]))&&(t=n[1]),{type:t,data:i[1]}},YC=function(n){return 0===n.indexOf("blob:")?(o=n,new Ce(function(e,n){var i=function(){n("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")};try{var r=LC();r.open("GET",o,!0),r.responseType="blob",r.onload=function(){200===this.status?e(this.response):i()},r.onerror=i,r.send()}catch(t){i()}})):0===n.indexOf("data:")?(i=n,new Ce(function(t){var n,o,r,a,s=VC(i);try{n=function(e){return ae.getOrDie("atob")(e)}(s.data)}catch(Db){return void t(new e.Blob([]))}for(a=n.length,o=new(ae.getOrDie("Uint8Array"))(a),r=0;r<o.length;r++)o[r]=n.charCodeAt(r);t(new e.Blob([o],{type:s.type}))})):null;var i,o},MC=VC,_C=0,KC=function(e){return(e||"blobid")+_C++},zC=function(e,t,n,i){var o,r;0!==t.src.indexOf("blob:")?(o=MC(t.src).data,(r=e.findFirst(function(e){return e.base64()===o}))?n({image:t,blobInfo:r}):YC(t.src).then(function(i){r=e.create(KC(),i,o),e.add(r),n({image:t,blobInfo:r})},function(e){i(e)})):(r=e.getByUri(t.src))?n({image:t,blobInfo:r}):YC(t.src).then(function(i){(function(e){return new Ce(function(t){var n=new(ae.getOrDie("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})})(i).then(function(a){o=MC(a).data,r=e.create(KC(),i,o),e.add(r),n({image:t,blobInfo:r})})},function(e){i(e)})},JC=function(e){return e?oe(e.getElementsByTagName("img")):[]},PC=0,jC={uuid:function(e){return e+PC+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};var $C=function(e,t){return e.hasOwnProperty(t.nodeName)},qC=function(e,t){if(Ro.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||$C(e,t.nextSibling)))return!0}return!1},eh=function(e){var t,n,i,o,r,a,s,g,l,c,u,I=e.settings,d=e.dom,C=e.selection,h=e.schema,A=h.getBlockElements(),f=C.getStart(),m=e.getBody();if(u=I.forced_root_block,f&&Ro.isElement(f)&&u&&(c=m.nodeName.toLowerCase(),h.isValidChild(c,u.toLowerCase())&&(p=A,b=m,!V(fc(ai.fromDom(f),ai.fromDom(b)),function(e){return $C(p,e.dom())})))){var p,b,B,v;for(n=(t=C.getRng()).startContainer,i=t.startOffset,o=t.endContainer,r=t.endOffset,l=BC(e),f=m.firstChild;f;)if(B=A,Ro.isText(v=f)||Ro.isElement(v)&&!$C(B,v)&&!$g(v)){if(qC(A,f)){f=(s=f).nextSibling,d.remove(s);continue}a||(a=d.create(u,e.settings.forced_root_block_attrs),f.parentNode.insertBefore(a,f),g=!0),f=(s=f).nextSibling,a.appendChild(s)}else a=null,f=f.nextSibling;g&&l&&(t.setStart(n,i),t.setEnd(o,r),C.setRng(t),e.nodeChanged())}},th=function(e){e.settings.forced_root_block&&e.on("NodeChange",r(eh,e))},nh=function(e){return Vi(e).fold(i([e]),function(t){return[e].concat(nh(t))})},ih=function(e){return Yi(e).fold(i([e]),function(t){return"br"===ci(t)?Ti(t).map(function(t){return[e].concat(ih(t))}).getOr([]):[e].concat(ih(t))})},oh=function(e,t,n,i){var o=n,r=new ao(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Pt.trim(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(de.ie&&de.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"===o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},rh=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount};function ah(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var i,o;o={startContainer:(i=e.selection.getRng()).startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},"nodechange"!==n.type&&od(o,t)||e.fire("SelectionChange"),t=o}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!de.range&&e.selection.isCollapsed()||rh(e)&&!function(t){var i,o;if((o=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(i=o.length;0<=i&&o[i]===n[i];i--);if(-1===i)return n=o,!0}return n=o,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&rh(e)&&("IMG"===e.selection.getNode().nodeName?me.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,i,o,r=e.selection;e.initialized&&r&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=r.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),i=[],e.dom.getParent(n,function(e){if(e===o)return!0;i.push(e)}),(t=t||{}).element=n,t.parents=i,e.fire("NodeChange",t))}}var sh,gh,lh=function(e){var t,n,i,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,{top:o.top+(i=t.defaultView).pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}},ch=function(e,t){return n=(s=e).inline?lh(s.getBody()):{left:0,top:0},a=(r=e).getBody(),i=r.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:0,top:0},{pageX:(o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=lh(e.getContentAreaContainer()),i=(r=(o=e).getBody(),a=o.getDoc().documentElement,o.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:r.scrollLeft||a.scrollLeft,top:r.scrollTop||a.scrollTop});return{left:t.pageX-n.left+i.left,top:t.pageY-n.top+i.top}}var o,r,a;return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+i.left,pageY:o.top-n.top+i.top};var n,i,o,r,a,s},uh=Ro.isContentEditableFalse,Ih=Ro.isContentEditableTrue,dh=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Ch=function(e){e.dragging=!1,e.element=null,dh(e.ghost)},hh=function(e){return z(e,function(e,t){return e.concat(function(e){var t=function(t){return Y(t,function(t){return(t=Da(t)).node=e,t})};if(Ro.isElement(e))return t(e.getClientRects());if(Ro.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))},[])};(gh=sh||(sh={}))[gh.Up=-1]="Up",gh[gh.Down=1]="Down";var Ah=function(e,t,n,i,o,r){var a,s,g=0,l=[],c=function(i){var r,a,c;for(c=hh([i]),-1===e&&(c=c.reverse()),r=0;r<c.length;r++)if(!n(a=c[r],s)){if(0<l.length&&t(a,Mt.last(l))&&g++,a.line=g,o(a))return!0;l.push(a)}};return(s=Mt.last(r.getClientRects()))&&(c(a=r.getNode()),function(e,t,n,i){for(;i=sg(i,e,ka,t);)if(n(i))return}(e,i,c,a)),l},fh=r(Ah,sh.Up,Wa,Ea),mh=r(Ah,sh.Down,Ea,Wa),ph=function(e){return function(t){return t.line>e}},bh=function(e){return function(t){return t.line===e}},Bh=Ro.isContentEditableFalse,vh=sg,yh=function(e,t){return Math.abs(e.left-t)},xh=function(e,t){return Math.abs(e.right-t)},Fh=function(e,t){return e>=t.left&&e<=t.right},Gh=function(e,t){return Mt.reduce(e,function(e,n){var i,o;return i=Math.min(yh(e,t),xh(e,t)),o=Math.min(yh(n,t),xh(n,t)),Fh(t,n)?n:Fh(t,e)?e:o===i&&Bh(n.node)?n:o<i?n:e})},Qh=function(e,t,n,i){for(;i=vh(i,e,ka,t);)if(n(i))return},wh=function(e,t,n){if(n.collapsed)return!1;if(de.ie&&de.ie<=11&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var i=n.startContainer.childNodes[n.startOffset];if(Ro.isElement(i))return V(i.getClientRects(),function(n){return Ha(n,e,t)})}return V(n.getClientRects(),function(n){return Ha(n,e,t)})},Sh={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return de.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Xh=Ro.isContentEditableTrue,Zh=Ro.isContentEditableFalse,Nh=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Xh(t)||Zh(t))return t;t=t.parentNode}return null},kh=function(t){var n,i,o,a=t.getBody(),s=function(n,i,o){var r,a,s=Ur(Z.none()),g=function(){!function(e){var t,i,o,r,a;for(t=An("*[contentEditable=false]",n),r=0;r<t.length;r++)o=(i=t[r]).previousSibling,Ba(o)&&(1===(a=o.data).length?o.parentNode.removeChild(o):o.deleteData(a.length-1,1)),ba(o=i.nextSibling)&&(1===(a=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1))}(),a&&(_s.remove(a),a=null),s.get().each(function(e){An(e.caret).remove(),s.set(Z.none())}),clearInterval(r)},l=function(){r=me.setInterval(function(){BC(t)?An("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden"):An("div.mce-visual-caret",n).addClass("mce-visual-caret-hidden")},500)};return{show:function(i,o){var r,c,u;if(g(),Ro.isElement(u=o)&&/^(TD|TH)$/i.test(u.tagName))return null;if(!function(e){return t.dom.isBlock(e)}(o))return a=function(e,t){var n,i,o;if(i=e.ownerDocument.createTextNode(ca),o=e.parentNode,t){if(da(n=e.previousSibling)){if(Aa(n))return n;if(Ba(n))return n.splitText(n.data.length-1)}o.insertBefore(i,e)}else{if(da(n=e.nextSibling)){if(Aa(n))return n;if(ba(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i)}return i}(o,i),c=o.ownerDocument.createRange(),zs(a.nextSibling)?(c.setStart(a,0),c.setEnd(a,0)):(c.setStart(a,1),c.setEnd(a,1)),c;a=function(t,n,i){var o,r,a;return(o=n.ownerDocument.createElement("p")).setAttribute("data-mce-caret",i?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((a=e.document.createElement("br")).setAttribute("data-mce-bogus","1"),a)),r=n.parentNode,i?r.insertBefore(o,n):n.nextSibling?r.insertBefore(o,n.nextSibling):r.appendChild(o),o}(0,o,i),r=Js(n,o,i),An(a).css("top",r.top);var I=An('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(n)[0];return s.set(Z.some({caret:I,element:o,before:i})),s.get().each(function(e){i&&An(e.caret).addClass("mce-visual-caret-before")}),l(),(c=o.ownerDocument.createRange()).setStart(a,0),c.setEnd(a,0),c},hide:g,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){s.get().each(function(e){var t=Js(n,e.element,e.before);An(e.caret).css(t)})},destroy:function(){return me.clearInterval(r)}}}(t.getBody()),g="sel-"+t.dom.uniqueId(),l=function(e){e&&t.selection.setRng(e)},c=function(){return t.selection.getRng()},u=function(e,n,i,o){return void 0===o&&(o=!0),t.fire("ShowCaret",{target:n,direction:e,before:i}).isDefaultPrevented()?null:(o&&t.selection.scrollIntoView(n,-1===e),s.show(i,n))},I=function(e,t){return t=hg(e,a,t),-1===e?Cs.fromRangeStart(t):Cs.fromRangeEnd(t)},d=function(e){return Aa(e)||ba(e)||Ba(e)},C=function(e){return d(e.startContainer)||d(e.endContainer)},h=function(e,i){var o,r,a,s,l,c,d,h,A,m,p=t.$,b=t.dom;if(!e)return null;if(e.collapsed){if(!C(e))if(!1===i){if(h=I(-1,e),js(h.getNode(!0)))return u(-1,h.getNode(!0),!1,!1);if(js(h.getNode()))return u(-1,h.getNode(),!h.isAtEnd(),!1)}else{if(h=I(1,e),js(h.getNode()))return u(1,h.getNode(),!h.isAtEnd(),!1);if(js(h.getNode(!0)))return u(1,h.getNode(!0),!1,!1)}return null}return l=e.startOffset,c=e.endOffset,3===(s=e.startContainer).nodeType&&0===l&&Zh(s.parentNode)&&(l=b.nodeIndex(s=s.parentNode),s=s.parentNode),1!==s.nodeType?null:(c===l+1&&s===e.endContainer&&(o=s.childNodes[l]),Zh(o)?(A=m=o.cloneNode(!0),(d=t.fire("ObjectSelected",{target:o,targetClone:A})).isDefaultPrevented()?null:(r=zr(ai.fromDom(t.getBody()),"#"+g).fold(function(){return p([])},function(e){return p([e.dom()])}),A=d.targetClone,0===r.length&&(r=p('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",g)).appendTo(t.getBody()),e=t.dom.createRng(),A===m&&de.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(A),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(A)):(r.empty().append("\xa0").append(A).append("\xa0"),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:b.getPos(o,t.getBody()).y}),r[0].focus(),(a=t.selection.getSel()).removeAllRanges(),a.addRange(e),M(Lr(ai.fromDom(t.getBody()),"*[data-mce-selected]"),function(e){yi(e,"data-mce-selected")}),o.setAttribute("data-mce-selected","1"),n=o,f(),e)):null)},A=function(){n&&(n.removeAttribute("data-mce-selected"),zr(ai.fromDom(t.getBody()),"#"+g).each(kr),n=null),zr(ai.fromDom(t.getBody()),"#"+g).each(kr),n=null},f=function(){s.hide()};return de.ceFalse&&(function(){var i,o,I,d;t.on("mouseup",function(e){var n=c();n.collapsed&&wC(t,e.clientX,e.clientY)&&l(_I(t,n,!1))}),t.on("click",function(e){var n;(n=Nh(t,e.target))&&(Zh(n)&&(e.preventDefault(),t.focus()),Xh(n)&&t.dom.isChildOf(n,t.selection.getNode())&&A())}),t.on("blur NewBlock",function(){A()}),t.on("ResizeWindow FullscreenStateChanged",function(){return s.reposition()}),o=!1,(i=t).on("touchstart",function(){o=!1}),i.on("touchmove",function(){o=!0}),i.on("touchend",function(e){var t=Nh(i,e.target);Zh(t)&&(o||(e.preventDefault(),h(MI(i,t))))}),t.on("mousedown",function(e){var n,i=e.target;if((i===a||"HTML"===i.nodeName||t.dom.isChildOf(i,a))&&!1!==wC(t,e.clientX,e.clientY))if(n=Nh(t,i))Zh(n)?(e.preventDefault(),h(MI(t,n))):(A(),Xh(n)&&e.shiftKey||wh(e.clientX,e.clientY,t.selection.getRng())||(f(),t.selection.placeCaretAt(e.clientX,e.clientY)));else if(!1===js(i)){A(),f();var o=function(e,t,n){var i,o,a,s,g,l,c,u=hh(K(oe(e.getElementsByTagName("*")),js)),I=K(u,function(e){return n>=e.top&&n<=e.bottom});return(i=Gh(I,t))&&(i=Gh((s=e,c=function(e,t){var n;return n=K(hh([t]),function(t){return!e(t,g)}),l=l.concat(n),0===n.length},(l=[]).push(g=i),Qh(sh.Up,s,r(c,Wa),g.node),Qh(sh.Down,s,r(c,Ea),g.node),l),t))&&js(i.node)?{node:(o=i).node,before:yh(o,a=t)<xh(o,a)}:null}(a,e.clientX,e.clientY);if(o&&!function(e,n){var i,o=t.dom.getParent(e,t.dom.isBlock),r=t.dom.getParent(n,t.dom.isBlock);return!(!o||!t.dom.isChildOf(o,r)||!1!==Zh(Nh(t,o)))||o&&(i=r,!(t.dom.getParent(o,t.dom.isBlock)===t.dom.getParent(i,t.dom.isBlock)))&&function(e){var t=kg(e);if(!e.firstChild)return!1;var n=Cs.before(e.firstChild),i=t.next(n);return i&&!Yc(i)&&!Mc(i)}(o)}(e.target,o.node)){e.preventDefault();var s=u(1,o.node,o.before,!1);t.getBody().focus(),l(s)}}}),t.on("keypress",function(e){Sh.modifierPressed(e)||Zh(t.selection.getNode())&&e.preventDefault()}),t.on("getSelectionRange",function(e){var t=e.range;if(n){if(!n.parentNode)return void(n=null);(t=t.cloneRange()).selectNode(n),e.range=t}}),t.on("setSelectionRange",function(e){var t;(t=h(e.range,e.forward))&&(e.range=t)}),t.on("AfterSetSelectionRange",function(e){var n=e.range;C(n)||"mcepastebin"===n.startContainer.parentNode.id||f(),t.dom.hasClass(n.startContainer.parentNode,"mce-offscreen-selection")||A()}),t.on("copy",function(e){var n,i=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!de.ie){var o=(n=t.dom.get(g))?n.getElementsByTagName("*")[0]:n;o&&(e.preventDefault(),i.clearData(),i.setData("text/html",o.outerHTML),i.setData("text/plain",o.outerText))}}),function(t){var n;(function(t){var n,i,o,r,a,s,g,l,c,u,I,d,C,h={};n=mr.DOM,s=e.document,i=function(e,t){return function(n){if(0===n.button){var i=J(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_a.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(uh,Ih)).getOr(null);if(s=t.getBody(),uh(g=i)&&g!==s){var o=t.dom.getPos(i),r=t.getBody(),a=t.getDoc().documentElement;e.element=i,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?r.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?r.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=i.offsetWidth,e.height=i.offsetHeight,e.ghost=function(e,t,n,i){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:i}),e.dom.setAttrib(o,"data-mce-selected",null);var r=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(r,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),r.appendChild(o),r}(t,i,e.width,e.height)}}var s,g}}(h,t),g=h,l=t,c=me.throttle(function(e,t){l._selectionOverrides.hideFakeCaret(),l.selection.placeCaretAt(e,t)},0),o=function(e){var t,n,i,o,r,a,s,u,I,d,C,h,A=Math.max(Math.abs(e.screenX-g.screenX),Math.abs(e.screenY-g.screenY));if(g.element&&!g.dragging&&10<A){if(l.fire("dragstart",{target:g.element}).isDefaultPrevented())return;g.dragging=!0,l.focus()}if(g.dragging){var f=(C=g,{pageX:(h=ch(l,e)).pageX-C.relX,pageY:h.pageY+5});I=g.ghost,d=l.getBody(),I.parentNode!==d&&d.appendChild(I),i=g.width,o=g.height,r=g.maxX,a=g.maxY,u=s=0,(t=g.ghost).style.left=(n=f).pageX+"px",t.style.top=n.pageY+"px",n.pageX+i>r&&(s=n.pageX+i-r),n.pageY+o>a&&(u=n.pageY+o-a),t.style.width=i-s+"px",t.style.height=o-u+"px",c(e.clientX,e.clientY)}},d=h,C=t,r=function(e){if(d.dragging&&(r=3===(s=(o=C).selection.getSel().getRangeAt(0).startContainer).nodeType?s.parentNode:s)!==(a=d.element)&&!o.dom.isChildOf(r,a)&&!uh(r)){var t=((i=d.element.cloneNode(!0)).removeAttribute("data-mce-selected"),i),n=C.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY});n.isDefaultPrevented()||(t=n.targetClone,C.undoManager.transact(function(){dh(d.element),C.insertContent(C.dom.getOuterHTML(t)),C._selectionOverrides.hideFakeCaret()}))}var i,o,r,a,s;Ch(d)},u=h,a=function(){u.dragging&&I.fire("dragend"),Ch(u)},(I=t).on("mousedown",i),t.on("mousemove",o),t.on("mouseup",r),n.bind(s,"mousemove",o),n.bind(s,"mouseup",a),t.on("remove",function(){n.unbind(s,"mousemove",o),n.unbind(s,"mouseup",a)})})(t),(n=t).on("drop",function(e){var t=void 0!==e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(uh(t)||uh(n.dom.getContentEditableParent(t)))&&e.preventDefault()})}(t),I=t,d=Dr(function(){if(!I.removed&&I.selection.getRng().collapsed){var e=KI(I,I.selection.getRng(),!1);I.selection.setRng(e)}},0),I.on("focus",function(){d.throttle()}),I.on("blur",function(){d.cancel()})}(),o=".mce-content-body",(i=t.contentStyles).push(s.getCss()),i.push(o+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+o+" *[contentEditable=false] {cursor: default;}"+o+" *[contentEditable=true] {cursor: text;}")),{showCaret:u,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(va(e),l(c()),t.selection.scrollIntoView(e[0]))},hideFakeCaret:f,destroy:function(){s.destroy(),n=null}}},Rh=function(e,t,n){var i,o,r,a,s=1;for(a=e.getShortEndedElements(),(r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;o=r.exec(t);){if(i=r.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i},Dh=function(e,t){var n=e.exec(t);if(n){var i=n[1],o=n[2];return"string"==typeof i&&"data-mce-bogus"===i.toLowerCase()?o:null}return null};function Uh(e,t){void 0===t&&(t=rr());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var i=e.comment?e.comment:n,o=e.cdata?e.cdata:n,r=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,g=e.pi?e.pi:n,l=e.doctype?e.doctype:n;return{parse:function(n){var c,u,I,d,C,h,A,f,m,p,b,B,v,y,x,F,G,Q,w,S,X,Z,N,k,R,D,U,T,W,E=0,H=[],O=0,L=zo.decode,V=Pt.makeMap("src,href,data,background,formaction,poster,xlink:href"),Y=/((java|vb)script|mhtml):/i,M=function(e){var t,n;for(t=H.length;t--&&H[t].name!==e;);if(0<=t){for(n=H.length-1;t<=n;n--)(e=H[n]).valid&&s(e.name);H.length=t}},_=function(t,n,i,o,r){var a,s,g,l,c;if(i=(n=n.toLowerCase())in b?n:L(i||o||r||""),v&&!f&&0==(0===(g=n).indexOf("data-")||0===g.indexOf("aria-"))){if(!(a=Q[n])&&w){for(s=w.length;s--&&!(a=w[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(i in a.validValues))return}if(V[n]&&!e.allow_script_urls){var u=i.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(x){u=unescape(u)}if(Y.test(u))return;if(c=u,!(l=e).allow_html_data_urls&&(/^data:image\//i.test(c)?!1===l.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(c):/^data:/i.test(c)))return}f&&(n in V||0===n.indexOf("on"))||(d.map[n]=i,d.push({name:n,value:i}))};for(R=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,p=t.getShortEndedElements(),k=e.self_closing_elements||t.getSelfClosingElements(),b=t.getBoolAttrs(),v=e.validate,m=e.remove_internals,W=e.fix_self_closing,U=t.getSpecialElements(),N=n+">";c=R.exec(N);){if(E<c.index&&r(L(n.substr(E,c.index-E))),u=c[6])":"===(u=u.toLowerCase()).charAt(0)&&(u=u.substr(1)),M(u);else if(u=c[7]){if(c.index+c[0].length>n.length){r(L(n.substr(c.index))),E=c.index+c[0].length;continue}":"===(u=u.toLowerCase()).charAt(0)&&(u=u.substr(1)),B=u in p,W&&k[u]&&0<H.length&&H[H.length-1].name===u&&M(u);var K=Dh(D,c[8]);if(null!==K){if("all"===K){E=Rh(t,n,R.lastIndex),R.lastIndex=E;continue}x=!1}if(!v||(y=t.getElementRule(u))){if(x=!0,v&&(Q=y.attributes,w=y.attributePatterns),(G=c[8])?((f=-1!==G.indexOf("data-mce-type"))&&m&&(x=!1),(d=[]).map={},G.replace(D,_)):(d=[]).map={},v&&!f){if(S=y.attributesRequired,X=y.attributesDefault,y.removeEmptyAttrs&&!d.length&&(x=!1),Z=y.attributesForced)for(C=Z.length;C--;)A=(F=Z[C]).name,"{$uid}"===(T=F.value)&&(T="mce_"+O++),d.map[A]=T,d.push({name:A,value:T});if(X)for(C=X.length;C--;)(A=(F=X[C]).name)in d.map||("{$uid}"===(T=F.value)&&(T="mce_"+O++),d.map[A]=T,d.push({name:A,value:T}));if(S){for(C=S.length;C--&&!(S[C]in d.map););-1===C&&(x=!1)}if(F=d.map["data-mce-bogus"]){if("all"===F){E=Rh(t,n,R.lastIndex),R.lastIndex=E;continue}x=!1}}x&&a(u,d,B)}else x=!1;if(I=U[u]){I.lastIndex=E=c.index+c[0].length,(c=I.exec(n))?(x&&(h=n.substr(E,c.index-E)),E=c.index+c[0].length):(h=n.substr(E),E=n.length),x&&(0<h.length&&r(h,!0),s(u)),R.lastIndex=E;continue}B||(G&&G.indexOf("/")===G.length-1?x&&s(u):H.push({name:u,valid:x}))}else(u=c[1])?(">"===u.charAt(0)&&(u=" "+u),e.allow_conditional_comments||"[if"!==u.substr(0,3).toLowerCase()||(u=" "+u),i(u)):(u=c[2])?o(u.replace(/<!--|-->/g,"")):(u=c[3])?l(u):(u=c[4])&&g(u,c[5]);E=c.index+c[0].length}for(E<n.length&&r(L(n.substr(E))),C=H.length-1;0<=C;C--)(u=H[C]).valid&&s(u.name)}}}(Uh||(Uh={})).findEndTag=Rh;var Th=Uh,Wh=function(e,t){var n,i,o,r,a,s,g,l,c=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,I=e.schema;for(s=e.getTempAttrs(),g=c,l=new RegExp(["\\s?("+s.join("|")+')="[^"]+"'].join("|"),"gi"),c=g.replace(l,""),a=I.getShortEndedElements();r=u.exec(c);)i=u.lastIndex,o=r[0].length,n=a[r[1]]?i:Th.findEndTag(I,c,i),c=c.substring(0,i-o)+c.substring(n),u.lastIndex=i-o;return ua(c)},Eh=Wh,Hh=Wh,Oh=function(e){return Ro.isElement(e)?e.outerHTML:Ro.isText(e)?zo.encodeRaw(e.data,!1):Ro.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},Lh=Ur(Z.none()),Vh=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},Yh=function(t){var n=ai.fromTag("body",Lh.get().getOrThunk(function(){var t=e.document.implementation.createHTMLDocument("undo");return Lh.set(Z.some(t)),t}));return sa(n,Vh(t)),M(Lr(n,"*[data-mce-bogus]"),Rr),n.dom().innerHTML},Mh=function(e){var t,n,i;return t=function(e){return K(Y(oe(e.childNodes),Oh),function(e){return 0<e.length})}(e.getBody()),-1!==(n=(i=q(t,function(t){var n=Hh(e.serializer,t);return 0<n.length?[n]:[]})).join("")).indexOf("</iframe>")?{type:"fragmented",fragments:i,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},_h=function(t,n,i){"fragmented"===n.type?function(t,n){var i,o,r;i=function(e,t){var n=e.length+t.length+2,i=new Array(n),o=new Array(n),r=function(n,i,o,a,g){var l=s(n,i,o,a);if(null===l||l.start===i&&l.diag===i-a||l.end===n&&l.diag===n-o)for(var c=n,u=o;c<i||u<a;)c<i&&u<a&&e[c]===t[u]?(g.push([0,e[c]]),++c,++u):a-o<i-n?(g.push([2,e[c]]),++c):(g.push([1,t[u]]),++u);else{r(n,l.start,o,l.start-l.diag,g);for(var I=l.start;I<l.end;++I)g.push([0,e[I]]);r(l.end,i,l.end-l.diag,a,g)}},a=function(n,i,o,r){for(var a=n;a-i<r&&a<o&&e[a]===t[a-i];)++a;return{start:n,end:a,diag:i}},s=function(n,r,s,g){var l=r-n,c=g-s;if(0===l||0===c)return null;var u,I,d,C,h,A=l-c,f=c+l,m=(f%2==0?f:f+1)/2;for(i[1+m]=n,o[1+m]=r+1,u=0;u<=m;++u){for(I=-u;I<=u;I+=2){for(i[d=I+m]=I===-u||I!==u&&i[d-1]<i[d+1]?i[d+1]:i[d-1]+1,h=(C=i[d])-n+s-I;C<r&&h<g&&e[C]===t[h];)i[d]=++C,++h;if(A%2!=0&&A-u<=I&&I<=A+u&&o[d-A]<=i[d])return a(o[d-A],I+n-s,r,g)}for(I=A-u;I<=A+u;I+=2){for(o[d=I+m-A]=I===A-u||I!==A+u&&o[d+1]<=o[d-1]?o[d+1]-1:o[d-1],h=(C=o[d]-1)-n+s-I;n<=C&&s<=h&&e[C]===t[h];)o[d]=C--,h--;if(A%2==0&&-u<=I&&I<=u&&o[d]<=i[d+A])return a(o[d],I+n-s,r,g)}}},g=[];return r(0,e.length,0,t.length,g),g}(Y(oe(n.childNodes),Oh),t),o=n,r=0,M(i,function(t){0===t[0]?r++:1===t[0]?(function(t,n,i){var o=function(t){var n,i,o;for(o=e.document.createElement("div"),n=e.document.createDocumentFragment(),t&&(o.innerHTML=t);i=o.firstChild;)n.appendChild(i);return n}(n);if(t.hasChildNodes()&&i<t.childNodes.length){var r=t.childNodes[i];r.parentNode.insertBefore(o,r)}else t.appendChild(o)}(o,t[1],r),r++):2===t[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(o,r)})}(n.fragments,t.getBody()):t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(i?n.beforeBookmark:n.bookmark)},Kh=function(e,t){return!(!e||!t)&&(i=t,Vh(e)===Vh(i)||(n=t,Yh(e)===Yh(n)));var n,i};function zh(e){var t,n,i=this,o=0,r=[],a=0,s=function(){return 0===a},g=function(e){s()&&(i.typing=e)},l=function(t){e.setDirty(t)},c=function(e){g(!1),i.add({},e)},u=function(){i.typing&&(g(!1),i.add())};return e.on("init",function(){i.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(u(),i.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){i.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var o=t.keyCode;t.isDefaultPrevented()||((33<=o&&o<=36||37<=o&&o<=40||45===o||t.ctrlKey)&&(c(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&i.typing&&!1===Kh(Mh(e),r[0])&&(!1===e.isDirty()&&(l(!0),e.fire("change",{level:r[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;e.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?i.typing&&c(e):!(t<16||20<t)||224===t||91===t||i.typing||e.ctrlKey&&!e.altKey||e.metaKey||(i.beforeChange(),g(!0),i.add({},e),n=!0))}),e.on("MouseDown",function(e){i.typing&&c(e)}),e.on("input",function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data)&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),i={data:r,typing:!1,beforeChange:function(){s()&&(t=Ds.getUndoBookmark(e.selection))},add:function(n,i){var a,g,c,u=e.settings;if(c=Mh(e),n=Pt.extend(n=n||{},c),!1===s()||e.removed)return null;if(e.fire("BeforeAddUndo",{level:n,lastLevel:g=r[o],originalEvent:i}).isDefaultPrevented())return null;if(g&&Kh(g,n))return null;if(r[o]&&(r[o].beforeBookmark=t),u.custom_undo_redo_levels&&r.length>u.custom_undo_redo_levels){for(a=0;a<r.length-1;a++)r[a]=r[a+1];r.length--,o=r.length}n.bookmark=Ds.getUndoBookmark(e.selection),o<r.length-1&&(r.length=o+1),r.push(n),o=r.length-1;var I={level:n,lastLevel:g,originalEvent:i};return e.fire("AddUndo",I),0<o&&(l(!0),e.fire("change",I)),n},undo:function(){var t;return i.typing&&(i.add(),i.typing=!1,g(!1)),0<o&&(t=r[--o],_h(e,t,!0),l(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<r.length-1&&(t=r[++o],_h(e,t,!1),l(!0),e.fire("redo",{level:t})),t},clear:function(){r=[],o=0,i.typing=!1,i.data=r,e.fire("ClearUndos")},hasUndo:function(){return 0<o||i.typing&&r[0]&&!Kh(Mh(e),r[0])},hasRedo:function(){return o<r.length-1&&!i.typing},transact:function(e){return u(),i.beforeChange(),i.ignore(e),i.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a;i.transact(t)&&(a=r[o].bookmark,_h(e,r[o-1],!0),i.transact(n)&&(r[o-1].beforeBookmark=a))}}}var Jh,Ph={},jh=Mt.filter,$h=Mt.each;Jh=function(e){var t,n,i=e.selection.getRng();t=Ro.matchNodeNames("pre"),i.collapsed||(n=e.selection.getSelectedBlocks(),$h(jh(jh(n,t),function(e){return t(e.previousSibling)&&-1!==Mt.indexOf(n,e.previousSibling)}),function(e){var t,n;t=e.previousSibling,An(n=e).remove(),An(t).append("<br><br>").append(n.childNodes)}))},Ph.pre||(Ph.pre=[]),Ph.pre.push(Jh);var qh=/^(src|href|style)$/,eA=Pt.each,tA=sl,nA=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},iA=function(e,t,n){var i,o,r;return o=t[n?"startOffset":"endOffset"],Ro.isElement(i=t[n?"startContainer":"endContainer"])&&(!n&&o&&o--,i=i.childNodes[(r=i.childNodes.length-1)<o?r:o]),Ro.isText(i)&&n&&o>=i.nodeValue.length&&(i=new ao(i,e.getBody()).next()||i),Ro.isText(i)&&!n&&0===o&&(i=new ao(i,e.getBody()).prev()||i),i},oA=function(e,t,n,i){var o=e.create(n,i);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},rA=function(e,t,n,i,o){var r=ai.fromDom(t),a=ai.fromDom(e.create(i,o)),s=n?Hi(r):Ei(r);return Zr(a,s),n?(Qr(r,a),Sr(a,r)):(wr(r,a),Xr(a,r)),a.dom()},aA=function(e,t,n,i){return!(t=nl(t,n,i))||"BR"===t.nodeName||e.isBlock(t)},sA=function(e,t,n,i,o){var r,a,s,g,l,c,u,I,d,C,h,A,f,m,p=e.dom;if(l=p,!(tA(c=i,(u=t).inline)||tA(c,u.block)||(u.selector?Ro.isElement(c)&&l.is(c,u.selector):void 0)||(g=i,t.links&&"A"===g.tagName)))return!1;if("all"!==t.remove)for(eA(t.styles,function(e,r){e=gl(p,al(e,n),r),"number"==typeof r&&(r=e,o=0),(t.remove_similar||!o||tA(ll(p,o,r),e))&&p.setStyle(i,r,""),s=1}),s&&""===p.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),eA(t.attributes,function(e,t){var r;if(e=al(e,n),"number"==typeof t&&(t=e,o=0),!o||tA(p.getAttrib(o,t),e)){if("class"===t&&(e=p.getAttrib(i,t))&&(r="",eA(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(r+=(r?" ":"")+e)}),r))return void p.setAttrib(i,t,r);"class"===t&&i.removeAttribute("className"),qh.test(t)&&i.removeAttribute("data-mce-"+t),i.removeAttribute(t)}}),eA(t.classes,function(e){e=al(e,n),o&&!p.hasClass(o,e)||p.removeClass(i,e)}),a=p.getAttribs(i),r=0;r<a.length;r++){var b=a[r].nodeName;if(0!==b.indexOf("_")&&0!==b.indexOf("data-"))return!1}return"none"!==t.remove?(A=(d=i).parentNode,f=(I=e).dom,m=I.settings.forced_root_block,(C=t).block&&(m?A===f.getRoot()&&(C.list_block&&tA(d,C.list_block)||eA(Pt.grep(d.childNodes),function(e){ol(I,m,e.nodeName.toLowerCase())?h?h.appendChild(e):(h=oA(f,e,m),f.setAttribs(h,I.settings.forced_root_block_attrs)):h=0})):f.isBlock(d)&&!f.isBlock(A)&&(aA(f,d,!1)||aA(f,d.firstChild,!0,1)||d.insertBefore(f.create("br"),d.firstChild),aA(f,d,!0)||aA(f,d.lastChild,!1,1)||d.appendChild(f.create("br")))),C.selector&&C.inline&&!tA(C.inline,d)||f.remove(d,1),!0):void 0},gA=sA,lA=function(e,t,n,i,o){var r,a,s=e.formatter.get(t),g=s[0],l=!0,c=e.dom,u=e.selection,I=function(i){var r,a,l,c,u,I=(a=t,l=n,c=o,eA(ul((r=e).dom,i.parentNode).reverse(),function(e){var t;u||"_start"===e.id||"_end"===e.id||(t=FI.matchNode(r,e,a,l,c))&&!1!==t.split&&(u=e)}),u);return function(e,t,n,i,o,r,a,s){var g,l,c,u,I,d,C=e.dom;if(n){for(d=n.parentNode,g=i.parentNode;g&&g!==d;g=g.parentNode){for(l=C.clone(g,!1),I=0;I<t.length;I++)if(sA(e,t[I],s,l,l)){l=0;break}l&&(c&&l.appendChild(c),u||(u=l),c=l)}a.mixed&&C.isBlock(n)||(i=C.split(n,i)),c&&(o.parentNode.insertBefore(c,o),u.appendChild(o))}return i}(e,s,I,i,i,0,g,n)},d=function(t){var i,o,r,a,u;if(Ro.isElement(t)&&c.getContentEditable(t)&&(a=l,l="true"===c.getContentEditable(t),u=!0),i=Pt.grep(t.childNodes),l&&!u)for(o=0,r=s.length;o<r&&!sA(e,s[o],n,t,t);o++);if(g.deep&&i.length){for(o=0,r=i.length;o<r;o++)d(i[o]);u&&(l=a)}},C=function(e){var t,n=c.get(e?"_start":"_end"),i=n[e?"firstChild":"lastChild"];return $g(t=i)&&Ro.isElement(t)&&("_start"===t.id||"_end"===t.id)&&(i=i[e?"firstChild":"lastChild"]),Ro.isText(i)&&0===i.data.length&&(i=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),c.remove(n,!0),i},h=function(t){var n,i,o=t.commonAncestorContainer;if(t=yl(e,t,s,!0),g.split){if(t=QI(t),(n=iA(e,t,!0))!==(i=iA(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(i.nodeName)&&i.firstChild&&(i=i.firstChild||i),nA(c,n,i)){var r=Z.from(n.firstChild).getOr(n);return I(rA(c,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(nA(c,i,n))return r=Z.from(i.lastChild).getOr(i),I(rA(c,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1);n=oA(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=oA(c,i,"span",{id:"_end","data-mce-type":"bookmark"}),I(n),I(i),n=C(!0),i=C()}else n=i=I(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=i.parentNode?i.parentNode:i,t.endOffset=c.nodeIndex(i)+1}Fl(c,t,function(t){eA(t,function(t){d(t),Ro.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===cl(c,t.parentNode)&&sA(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(i)i.nodeType?((a=c.createRng()).setStartBefore(i),a.setEndAfter(i),h(a)):h(i);else if("false"!==c.getContentEditable(u.getNode()))u.isCollapsed()&&g.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,i){var o,r,a,s,g,l,c=e.dom,u=e.selection,I=[],d=u.getRng();for(3===(s=o=d.startContainer).nodeType&&(d.startOffset!==o.nodeValue.length&&(a=!0),s=s.parentNode);s;){if(FI.matchNode(e,s,t,n,i)){g=s;break}s.nextSibling&&(a=!0),I.push(s),s=s.parentNode}if(g)if(a){r=u.getBookmark(),d.collapse(!0);var C=yl(e,d,e.formatter.get(t),!0);C=QI(C),e.formatter.remove(t,n,C),u.moveToBookmark(r)}else{l=Ws(e.getBody(),g);var h=NI(!1).dom(),A=TI(I,h);DI(e,h,l||g),kI(e,l,!1),u.setCursorLocation(A,1),c.isEmpty(g)&&c.remove(g)}}(e,t,n,o):(r=Ds.getPersistentBookmark(e.selection,!0),h(u.getRng()),u.moveToBookmark(r),g.inline&&FI.match(e,t,n,u.getStart())&&tl(c,u,u.getRng()),e.nodeChanged());else{i=u.getNode();for(var A=0,f=s.length;A<f&&(!s[A].ceFalseOverride||!sA(e,s[A],n,i,i));A++);}},cA=Pt.each,uA=function(e){return e&&1===e.nodeType&&!$g(e)&&!Ts(e)&&!Ro.isBogus(e)},IA=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!$g(n))return n}return e},dA=function(e,t,n){var i,o,r=new Rl(e);if(t&&n&&(t=IA(t,"previousSibling"),n=IA(n,"nextSibling"),r.compare(t,n))){for(i=t.nextSibling;i&&i!==n;)i=(o=i).nextSibling,t.appendChild(o);return e.remove(n),Pt.each(Pt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},CA=function(e,t,n){cA(e.childNodes,function(e){uA(e)&&(t(e)&&n(e),e.hasChildNodes()&&CA(e,t,n))})},hA=function(e,t){return r(function(t,n){return!(!n||!ll(e,n,t))},t)},AA=function(e,t,n){return r(function(t,n,i){e.setStyle(i,t,n),""===i.getAttribute("style")&&i.removeAttribute("style"),fA(e,i)},t,n)},fA=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},mA=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=cl(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},pA=Pt.each,bA=function(e,t,n,i){var o,a,s=e.formatter.get(t),g=s[0],l=!i&&e.selection.isCollapsed(),c=e.dom,u=e.selection,I=function(e,t){if(t=t||g,e){if(t.onformat&&t.onformat(e,t,n,i),pA(t.styles,function(t,i){c.setStyle(e,i,al(t,n))}),t.styles){var o=c.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}pA(t.attributes,function(t,i){c.setAttrib(e,i,al(t,n))}),pA(t.classes,function(t){t=al(t,n),c.hasClass(e,t)||c.addClass(e,t)})}},d=function(e,t){var n=!1;return!!g.selector&&(pA(e,function(e){if(!("collapsed"in e&&e.collapsed!==l))return c.is(t,e.selector)&&!Ts(t)?(I(t,e),!(n=!0)):void 0}),n)},C=function(i,o,r,a){var l,c,u=[],C=!0;c=i.create(l=g.inline||g.block),I(c),Fl(i,o,function(o){var r,h=function(o){var A,f,m,p;if(p=C,A=o.nodeName.toLowerCase(),f=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&i.getContentEditable(o)&&(p=C,C="true"===i.getContentEditable(o),m=!0),sl(A,"br"))return r=0,void(g.block&&i.remove(o));if(g.wrapper&&FI.matchNode(e,o,t,n))r=0;else{if(C&&!m&&g.block&&!g.wrapper&&il(e,A)&&ol(e,f,l))return o=i.rename(o,l),I(o),u.push(o),void(r=0);if(g.selector){var b=d(s,o);if(!g.inline||b)return void(r=0)}!C||m||!ol(e,l,A)||!ol(e,f,l)||!a&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||Ts(o)||g.inline&&i.isBlock(o)?(r=0,pA(Pt.grep(o.childNodes),h),m&&(C=p),r=0):(r||(r=i.clone(c,!1),o.parentNode.insertBefore(r,o),u.push(r)),r.appendChild(o))}};pA(o,h)}),!0===g.links&&pA(u,function(e){var t=function(e){"A"===e.nodeName&&I(e,g),pA(Pt.grep(e.childNodes),t)};t(e)}),pA(u,function(o){var r,a,l,c,d;a=0,pA(o.childNodes,function(e){rl(e)||$g(e)||a++}),r=a,!(1<u.length)&&i.isBlock(o)||0!==r?(g.inline||g.wrapper)&&(g.exact||1!==r||((c=function(e){var t=!1;return pA(e.childNodes,function(e){if((n=e)&&1===n.nodeType&&!$g(n)&&!Ts(n)&&!Ro.isBogus(n))return t=e,!1;var n}),t}(l=o))&&!$g(c)&&FI.matchName(i,c,g)&&(d=i.clone(c,!1),I(d),i.replace(d,l,!0),i.remove(c,1)),o=d||l),function(e,t,n,i){cA(s,function(t){cA(e.dom.select(t.inline,i),function(i){uA(i)&&gA(e,t,n,i,t.exact?i:null)}),function(e,t,n){t.clear_child_styles&&cA(e.select(t.links?"*:not(a)":"*",i),function(n){uA(n)&&cA(t.styles,function(t,i){e.setStyle(n,i,"")})})}(e.dom,t)})}(e,0,n,o),function(e,t,n,i,o){FI.matchNode(e,o.parentNode,n,i)&&gA(e,t,i,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,function(r){if(FI.matchNode(e,r,n,i))return gA(e,t,i,o),!0})}(e,g,t,n,o),function(e,t,n,i){t.styles&&t.styles.backgroundColor&&CA(i,hA(e,"fontSize"),AA(e,"backgroundColor",al(t.styles.backgroundColor,n)))}(i,g,n,o),function(e,t,n,i){"sub"!==t.inline&&"sup"!==t.inline||(CA(i,hA(e,"fontSize"),AA(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",i),!0))}(i,g,0,o),function(e,t,n,i){i&&!1!==g.merge_siblings&&(i=dA(e,nl(i),i),i=dA(e,i,nl(i,!0)))}(i,0,0,o)):i.remove(o,1)})};if("false"!==c.getContentEditable(u.getNode())){if(g){if(i)i.nodeType?d(s,i)||((a=c.createRng()).setStartBefore(i),a.setEndAfter(i),C(c,yl(e,a,s),0,!0)):C(c,i,0,!0);else if(l&&g.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var i,o,r,a,s,g,l=e.selection;a=(i=l.getRng(!0)).startOffset,g=i.startContainer.nodeValue,(o=Ws(e.getBody(),l.getStart()))&&(r=ZI(o));var c,u,I=/[^\s\u00a0\u00ad\u200b\ufeff]/;g&&0<a&&a<g.length&&I.test(g.charAt(a))&&I.test(g.charAt(a-1))?(s=l.getBookmark(),i.collapse(!0),i=yl(e,i,e.formatter.get(t)),i=QI(i),e.formatter.apply(t,n,i),l.moveToBookmark(s)):(o&&r.nodeValue===wI||(c=e.getDoc(),u=NI(!0).dom(),r=(o=c.importNode(u,!0)).firstChild,i.insertNode(o),a=1),e.formatter.apply(t,n,o),l.setCursorLocation(r,a))}(e,t,n);else{var h=e.selection.getNode();e.settings.forced_root_block||!s[0].defaultBlock||c.getParent(h,c.isBlock)||bA(e,s[0].defaultBlock),e.selection.setRng(Hl(e.selection.getRng())),o=Ds.getPersistentBookmark(e.selection,!0),C(c,yl(e,u.getRng(),s)),g.styles&&function(e,t,n,i){(g.styles.color||g.styles.textDecoration)&&(Pt.walk(i,r(mA,e),"childNodes"),mA(e,i))}(c,0,0,h),u.moveToBookmark(o),tl(c,u,u.getRng()),e.nodeChanged()}!function(e,n){$h(Ph[t],function(e){e(n)})}(0,e)}}else{i=u.getNode();for(var A=0,f=s.length;A<f;A++)if(s[A].ceFalseOverride&&c.is(i,s[A].selector))return void I(i,s[A])}},BA={applyFormat:bA},vA=Pt.each,yA=function(e,t,n,i,o){var r,a,s,g,l,c,u,I;null===t.get()&&(a=e,s={},(r=t).set({}),a.on("NodeChange",function(e){var t=ul(a.dom,e.element),n={};t=Pt.grep(t,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),vA(r.get(),function(e,i){vA(t,function(o){return a.formatter.matchNode(o,i,{},e.similar)?(s[i]||(vA(e,function(e){e(!0,{node:o,format:i,parents:t})}),s[i]=e),n[i]=e,!1):!FI.matchesUnInheritedFormatSelector(a,o,i)&&void 0})}),vA(s,function(i,o){n[o]||(delete s[o],vA(i,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),l=n,c=i,u=o,I=(g=t).get(),vA(l.split(","),function(e){I[e]||(I[e]=[],I[e].similar=u),I[e].push(c)}),g.set(I)},xA={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,i){Pt.each(i,function(n,i){e.setAttrib(t,i,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Pt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},FA=Pt.each,GA=mr.DOM,QA=function(e,t){var n,i,o,r=t&&t.schema||rr({}),a=function(e){var t,n,o;return n=t=GA.create((i="string"==typeof e?{name:e,classes:[],attrs:{}}:e).name),(o=i).classes.length&&GA.addClass(n,o.classes.join(" ")),GA.setAttribs(n,o.attrs),t},s=function(e,t,n){var i,o,g,l,c,u,I,d,C=0<t.length&&t[0],h=C&&C.name;if(c=h,u="string"!=typeof(l=e)?l.nodeName.toLowerCase():l,g=!(!(d=(I=r.getElementRule(u))&&I.parentsRequired)||!d.length)&&(c&&-1!==Pt.inArray(d,c)?c:d[0]))h===g?(o=t[0],t=t.slice(1)):o=g;else if(C)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(i=a(o)).appendChild(e),n&&(i||(i=GA.create("div")).appendChild(e),Pt.each(n,function(t){var n=a(t);i.insertBefore(n,e)})),s(i,t,o&&o.siblings)};return e&&e.length?(n=a(i=e[0]),(o=GA.create("div")).appendChild(s(n,e.slice(1),i.siblings)),o):""},wA=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Pt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,i,o,r){switch(t){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Pt.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===o){var a=r.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},SA=function(e,t){var n,i,o,r,a,s,g="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(r=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Pt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Pt.map(e.split(/(?:~\+|~|\+)/),wA),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]}(t.selector)).length?(r[0].name||(r[0].name=n),n=t.selector,i=QA(r,e)):i=QA([n],e),o=GA.select(n,i)[0]||i.firstChild,FA(t.styles,function(e,t){(e=l(e))&&GA.setStyle(o,t,e)}),FA(t.attributes,function(e,t){(e=l(e))&&GA.setAttrib(o,t,e)}),FA(t.classes,function(e){e=l(e),GA.hasClass(o,e)||GA.addClass(o,e)}),e.fire("PreviewFormats"),GA.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),a=GA.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,FA(s.split(" "),function(t){var n=GA.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=GA.getStyle(e.getBody(),t,!0),"#ffffff"===GA.toHex(n).toLowerCase())||"color"===t&&"#000000"===GA.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(g+="padding:0 2px;"),g+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),GA.remove(i),g)},XA=function(e,t,n,i,o){var r=t.get(n);!FI.match(e,n,i,o)||"toggle"in r[0]&&!r[0].toggle?BA.applyFormat(e,n,i,o):lA(e,n,i,o)},ZA=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])};function NA(e){var t,n,i,o=(n={},(i=function(e,t){e&&("string"!=typeof e?Pt.each(e,function(e,t){i(t,e)}):(Pt.each(t=t.length?t:[t],function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))})(xA.get((t=e).dom)),i(t.settings.formats),{get:function(e){return e?n[e]:n},register:i,unregister:function(e){return e&&n[e]&&delete n[e],n}}),a=Ur(null);return ZA(e),WI(e),{get:o.get,register:o.register,unregister:o.unregister,apply:r(BA.applyFormat,e),remove:r(lA,e),toggle:r(XA,e,o),match:r(FI.match,e),matchAll:r(FI.matchAll,e),matchNode:r(FI.matchNode,e),canApply:r(FI.canApply,e),formatChanged:r(yA,e,a),getCssText:r(SA,e)}}var kA,RA=Object.prototype.hasOwnProperty,DA=(kA=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<e.length;i++){var o=e[i];for(var r in o)RA.call(o,r)&&(n[r]=kA(0,o[r]))}return n}),UA={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)(n=e[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,i){for(var o,r,a=e.length,s="data-mce-"+i,g=t.url_converter,l=t.url_converter_scope;a--;)void 0!==(r=(o=e[a]).attributes.map[s])?(o.attr(i,0<r.length?r:null),o.attr(s,null)):(r=o.attributes.map[i],"style"===i?r=n.serializeStyle(n.parseStyle(r),o.name):g&&(r=g.call(l,r,i,o.name)),o.attr(i,0<r.length?r:null))}),e.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,o=e.length;o--;)"bookmark"!==(i=e[o]).attributes.map["data-mce-type"]||n.cleanup||(Z.from(i.firstChild).exists(function(e){return!la(e.value)})?i.unwrap():i.remove())}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=zo.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var i,o,r,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)o=(i=e[a]).firstChild?i.firstChild.value:"","script"===n?((r=i.attr("type"))&&i.attr("type","mce-no/type"===r?null:r.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<o.length&&(i.firstChild.value="// <![CDATA[\n"+s(o)+"\n// ]]>")):"xhtml"===t.element_format&&0<o.length&&(i.firstChild.value="\x3c!--\n"+s(o)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){M(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,i=function(e){return e&&"br"===e.name};i(t=e.lastChild)&&i(n=t.prev)&&(t.remove(),n.remove())}},TA={process:function(t,n,i){return I=i,(u=t)&&u.hasEventListeners("PreProcess")&&!I.no_events?(a=i,c=(o=t).dom,r=(r=n).cloneNode(!0),(s=e.document.implementation).createHTMLDocument&&(g=s.createHTMLDocument(""),Pt.each("BODY"===r.nodeName?r.childNodes:[r],function(e){g.body.appendChild(g.importNode(e,!0))}),r="BODY"!==r.nodeName?g.body.firstChild:g.body,l=c.doc,c.doc=g),function(e,t){e.fire("PreProcess",t)}(o,DA(a,{node:r})),l&&(c.doc=l),r):n;var o,r,a,s,g,l,c,u,I}},WA={register:function(e,t){t.inline_styles&&function(e,t){var n,i=sr();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",function(e){M(e,function(e){var i,o=t.parse(e.attr("style")),r=e.attr("color"),a=e.attr("face"),s=e.attr("size");r&&(o.color=r),a&&(o["font-family"]=a),s&&(o["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(o)),i=e,M(["color","face","size"],function(e){i.attr(e,null)})})})}(e,i,Pt.explode(t.font_size_legacy_values)),n=i,e.addNodeFilter("strike",function(e){M(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})}(e,t)}},EA=/^[ \t\r\n]*$/,HA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},OA=function(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}},LA=function(){function e(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var i,o;if(i=new e(t,HA[t]||1),n)for(o in n)i.attr(o,n[o]);return i},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,i;if("string"!=typeof e){for(i in e)this.attr(i,e[i]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),this;return this}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,i,o,r,a=new e(this.name,this.type);if(i=this.attributes){for((r=[]).map={},t=0,n=i.length;t<n;t++)"id"!==(o=i[t]).name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);a.attributes=r}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=i,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=OA(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=OA(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var i,o,r=this.firstChild;if(t=t||{},r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(e[r.name])return!1;for(i=r.attributes.length;i--;)if("name"===(o=r.attributes[i].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===r.type)return!1;if(3===r.type&&!EA.test(r.value))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&EA.test(r.value))return!1;if(n&&n(r))return!1}while(r=OA(r,this));return!0},e.prototype.walk=function(e){return OA(this,null,e)},e}(),VA=function(e,t,n,i){(e.padd_empty_with_br||t.insert)&&n[i.name]?i.empty().append(new LA("br",1)).shortEnded=!0:i.empty().append(new LA("#text",3)).value="\xa0"},YA=function(e){return MA(e,"#text")&&"\xa0"===e.firstChild.value},MA=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},_A=function(e,t,n,i){return i.isEmpty(t,n,function(t){return(n=e.getElementRule(t.name))&&n.paddEmpty;var n})},KA=function(e,t){return e&&(t[e.name]||"br"===e.name)},zA=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,i,o){var r,a,s,g,l,c,u,I,d=e.length,C=Pt.extend({},n.getBlockElements()),h=n.getNonEmptyElements(),A=n.getNonEmptyElements();for(C.body=1,r=0;r<d;r++)if(s=(a=e[r]).parent,C[a.parent.name]&&a===s.lastChild){for(l=a.prev;l;){if("span"!==(c=l.name)||"bookmark"!==l.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}l=l.prev}a&&(a.remove(),_A(n,h,A,s)&&(u=n.getElementRule(s.name))&&(u.removeEmpty?s.remove():u.paddEmpty&&VA(t,o,C,s)))}else{for(g=a;s&&s.firstChild===g&&s.lastChild===g&&!C[(g=s).name];)s=s.parent;g===s&&!0!==t.padd_empty_with_br&&((I=new LA("#text",3)).value="\xa0",a.replace(I))}}),e.addAttributeFilter("href",function(e){var n,i,o,r=e.length;if(!t.allow_unsafe_link_target)for(;r--;)"a"===(n=e[r]).name&&"_blank"===n.attr("target")&&n.attr("rel",(o=(i=n.attr("rel"))?Pt.trim(i):"",/\b(noopener)\b/g.test(o)?o:o.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,i,o,r=e.length;r--;)if("a"===(o=e[r]).name&&o.firstChild&&!o.attr("href"))for(i=o.parent,t=o.lastChild;n=t.prev,i.insert(t,o),t=n;);}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)if("ul"===(n=(t=e[i]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new LA("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,i,o,r,a,s,g,l=e.length,c=n.getValidClasses();l--;){for(i=(t=e[l]).attr("class").split(" "),a="",o=0;o<i.length;o++)r=i[o],g=!1,(s=c["*"])&&s[r]&&(g=!0),s=c[t.name],!g&&s&&s[r]&&(g=!0),g&&(a&&(a+=" "),a+=r);a.length||(a=null),t.attr("class",a)}})},JA=Pt.makeMap,PA=Pt.each,jA=Pt.explode,$A=Pt.extend;function qA(e,t){void 0===t&&(t=rr());var n={},i=[],o={},r={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;(a=e.name)in n&&((s=o[a])?s.push(e):o[a]=[e]),t=i.length;for(;t--;)(a=i[t].name)in e.attributes.map&&((s=r[a])?s.push(e):r[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){PA(jA(e),function(e){var n;for(n=0;n<i.length;n++)if(i[n].name===e)return void i[n].callbacks.push(t);i.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(e,t){PA(jA(e),function(e){var i=n[e];i||(n[e]=i=[]),i.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,g){var l,c,u,I,d,C,h,A,f,m,p,b=[];g=g||{},o={},r={},f=$A(JA("script,style,head,html,body,title,meta,param"),t.getBlockElements());var B=t.getNonEmptyElements(),v=t.children,y=e.validate,x="forced_root_block"in g?g.forced_root_block:e.forced_root_block,F=t.getWhiteSpaceElements(),G=/^[ \t\r\n]+/,Q=/[ \t\r\n]+$/,w=/[ \t\r\n]+/g,S=/^[ \t\r\n]+$/;m=F.hasOwnProperty(g.context)||F.hasOwnProperty(e.root_name);var X=function(e,t){var i,r=new LA(e,t);return e in n&&((i=o[e])?i.push(r):o[e]=[r]),r},Z=function(e){var n,i,o,r,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(0<(o=n.value.replace(Q,"")).length)return void(n.value=o);if(i=n.next){if(3===i.type&&i.value.length){n=n.prev;continue}if(!a[i.name]&&"script"!==i.name&&"style"!==i.name){n=n.prev;continue}}r=n.prev,n.remove(),n=r}};l=Th({validate:y,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){p.append(X("#cdata",4)).value=e},text:function(e,t){var n;m||(e=e.replace(w," "),KA(p.lastChild,f)&&(e=e.replace(G,""))),0!==e.length&&((n=X("#text",3)).raw=!!t,p.append(n).value=e)},comment:function(e){p.append(X("#comment",8)).value=e},pi:function(e,t){p.append(X(e,7)).value=t,Z(p)},doctype:function(e){p.append(X("#doctype",10)).value=e,Z(p)},start:function(e,n,o){var a,s,g,l,c;if(g=y?t.getElementRule(e):{}){for((a=X(g.outputName||e,1)).attributes=n,a.shortEnded=o,p.append(a),(c=v[p.name])&&v[a.name]&&!c[a.name]&&b.push(a),s=i.length;s--;)(l=i[s].name)in n.map&&((h=r[l])?h.push(a):r[l]=[a]);f[e]&&Z(a),o||(p=a),!m&&F[e]&&(m=!0)}},end:function(n){var i,o,r,a,s;if(o=y?t.getElementRule(n):{}){if(f[n]&&!m){if((i=p.firstChild)&&3===i.type)if(0<(r=i.value.replace(G,"")).length)i.value=r,i=i.next;else for(a=i.next,i.remove(),i=a;i&&3===i.type;)a=i.next,(0===(r=i.value).length||S.test(r))&&(i.remove(),i=a),i=a;if((i=p.lastChild)&&3===i.type)if(0<(r=i.value.replace(Q,"")).length)i.value=r,i=i.prev;else for(a=i.prev,i.remove(),i=a;i&&3===i.type;)a=i.prev,(0===(r=i.value).length||S.test(r))&&(i.remove(),i=a),i=a}if(m&&F[n]&&(m=!1),o.removeEmpty&&_A(t,B,F,p)&&!p.attributes.map.name&&!p.attr("id"))return s=p.parent,f[p.name]?p.empty().remove():p.unwrap(),void(p=s);o.paddEmpty&&(YA(p)||_A(t,B,F,p))&&VA(e,g,f,p),p=p.parent}}},t);var N=p=new LA(g.context||e.root_name,11);if(l.parse(s),y&&b.length&&(g.context?g.invalid=!0:function(e){var n,i,o,r,s,g,l,c,u,I,d,C,h,A,f,m;for(C=JA("tr,td,th,tbody,thead,tfoot,table"),I=t.getNonEmptyElements(),d=t.getWhiteSpaceElements(),h=t.getTextBlockElements(),A=t.getSpecialElements(),n=0;n<e.length;n++)if((i=e[n]).parent&&!i.fixed)if(h[i.name]&&"li"===i.parent.name){for(f=i.next;f&&h[f.name];)f.name="li",f.fixed=!0,i.parent.insert(f,i.parent),f=f.next;i.unwrap(i)}else{for(r=[i],o=i.parent;o&&!t.isValidChild(o.name,i.name)&&!C[o.name];o=o.parent)r.push(o);if(o&&1<r.length){for(r.reverse(),s=g=a(r[0].clone()),u=0;u<r.length-1;u++){for(t.isValidChild(g.name,r[u].name)?(l=a(r[u].clone()),g.append(l)):l=g,c=r[u].firstChild;c&&c!==r[u+1];)m=c.next,l.append(c),c=m;g=l}_A(t,I,d,s)?o.insert(i,r[0],!0):(o.insert(s,r[0],!0),o.insert(i,s)),(_A(t,I,d,o=r[0])||MA(o,"br"))&&o.empty().remove()}else if(i.parent){if("li"===i.name){if((f=i.prev)&&("ul"===f.name||"ul"===f.name)){f.append(i);continue}if((f=i.next)&&("ul"===f.name||"ul"===f.name)){f.insert(i,f.firstChild,!0);continue}i.wrap(a(new LA("ul",1)));continue}t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(a(new LA("div",1))):A[i.name]?i.empty().remove():i.unwrap()}}}(b)),x&&("body"===N.name||g.isRootContent)&&function(){var n,i,o=N.firstChild,r=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(G,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(Q,"")))};if(t.isValidChild(N.name,x.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!f[o.name]&&!o.attr("data-mce-type")?(i||((i=X(x,1)).attr(e.forced_root_block_attrs),N.insert(i,o)),i.append(o)):(r(i),i=null),o=n;r(i)}}(),!g.invalid){for(A in o){for(h=n[A],d=(c=o[A]).length;d--;)c[d].parent||c.splice(d,1);for(u=0,I=h.length;u<I;u++)h[u](c,A,g)}for(u=0,I=i.length;u<I;u++)if((h=i[u]).name in r){for(d=(c=r[h.name]).length;d--;)c[d].parent||c.splice(d,1);for(d=0,C=h.callbacks.length;d<C;d++)h.callbacks[d](c,h.name,g)}}return N}};return zA(s,e),WA.register(s,e),s}var ef=function(e,t,n){-1===Pt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},tf=function(e,t,n){var i=ua(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||vo(ai.fromDom(t))?i:Pt.trim(i)},nf=function(e,t,n){var i=n.selection?DA({forced_root_block:!1},n):n,o=e.parse(t,i);return UA.trimTrailingBr(o),o},of=function(e,t,n,i,o){var r,a,s,g;return a=e,r=i,g=El(t,n).serialize(r),!(s=o).no_events&&a?function(e,t){return e.fire("PostProcess",t)}(a,DA(s,{content:g})).content:g};function rf(e,t){var n,i,o,a,s,g,l=(n=e,g=["data-mce-selected"],o=(i=t)&&i.dom?i.dom:mr.DOM,a=i&&i.schema?i.schema:rr(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs,s=qA(n,a),UA.register(s,n,o),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:function(e,t){var r=DA({format:"html"},t||{}),g=TA.process(i,e,r),l=tf(o,g,r),c=nf(s,l,r);return"tree"===r.format?c:of(i,n,a,c,r)},addRules:function(e){a.addValidElements(e)},setRules:function(e){a.setValidElements(e)},addTempAttr:r(ef,s,g),getTempAttrs:function(){return g}});return{schema:l.schema,addNodeFilter:l.addNodeFilter,addAttributeFilter:l.addAttributeFilter,serialize:l.serialize,addRules:l.addRules,setRules:l.setRules,addTempAttr:l.addTempAttr,getTempAttrs:l.getTempAttrs}}function af(e){return{getBookmark:r(Pg,e),moveToBookmark:r(jg,e)}}(af||(af={})).isBookmarkNode=$g;var sf,gf,lf=af,cf=Ro.isContentEditableFalse,uf=Ro.isContentEditableTrue,If=function(t,n){var i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b=n.dom,B=Pt.each,v=n.getDoc(),y=e.document,x=Math.abs,F=Math.round,G=n.getBody();a={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Q=".mce-content-body";n.contentStyles.push(Q+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Q+" .mce-resizehandle:hover {background: #000}"+Q+" img[data-mce-selected],"+Q+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Q+" .mce-clonedresizable {position: absolute;"+(de.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Q+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var w=function(e){return e&&("IMG"===e.nodeName||n.dom.is(e,"figure.image"))},S=function(e){var t,i,o=e.target;t=e,i=n.selection.getRng(),!w(t.target)||wh(t.clientX,t.clientY,i)||e.isDefaultPrevented()||n.selection.select(o)},X=function(e){return n.dom.is(e,"figure.image")?e.querySelector("img"):e},Z=function(e){var t=n.settings.object_resizing;return!1!==t&&!de.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==n.getBody()&&Xi(ai.fromDom(e),t))},N=function(e){var t,a,B,v;A=(A=(t=e.screenX-g)*s[2]+I)<5?5:A,f=(f=(a=e.screenY-l)*s[3]+d)<5?5:f,(w(i)&&!1!==n.settings.resize_img_proportional?!Sh.modifierPressed(e):Sh.modifierPressed(e)||w(i)&&s[2]*s[3]!=0)&&(x(t)>x(a)?(f=F(A*C),A=F(f/C)):(A=F(f/C),f=F(A*C))),b.setStyles(X(o),{width:A,height:f}),B=0<(B=s.startPos.x+t)?B:0,v=0<(v=s.startPos.y+a)?v:0,b.setStyles(r,{left:B,top:v,display:"block"}),r.innerHTML=A+" &times; "+f,s[2]<0&&o.clientWidth<=A&&b.setStyle(o,"left",c+(I-A)),s[3]<0&&o.clientHeight<=f&&b.setStyle(o,"top",u+(d-f)),(t=G.scrollWidth-m)+(a=G.scrollHeight-p)!=0&&b.setStyles(r,{left:B-t,top:v-a}),h||(n.fire("ObjectResizeStart",{target:i,width:I,height:d}),h=!0)},k=function(){h=!1;var e=function(e,t){t&&(i.style[e]||!n.schema.isValid(i.nodeName.toLowerCase(),e)?b.setStyle(X(i),e,t):b.setAttrib(X(i),e,t))};e("width",A),e("height",f),b.unbind(v,"mousemove",N),b.unbind(v,"mouseup",k),y!==v&&(b.unbind(y,"mousemove",N),b.unbind(y,"mouseup",k)),b.remove(o),b.remove(r),R(i),n.fire("ObjectResized",{target:i,width:A,height:f}),b.setAttrib(i,"style",b.getAttrib(i,"style")),n.nodeChanged()},R=function(e){var t,h,x,F,Q;D(),W(),t=b.getPos(e,G),c=t.x,u=t.y,Q=e.getBoundingClientRect(),h=Q.width||Q.right-Q.left,x=Q.height||Q.bottom-Q.top,i!==e&&(i=e,A=f=0),F=n.fire("ObjectSelected",{target:e}),Z(e)&&!F.isDefaultPrevented()?B(a,function(e,t){var n;(n=b.get("mceResizeHandle"+t))&&b.remove(n),n=b.add(G,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===de.ie&&(n.contentEditable=!1),b.bind(n,"mousedown",function(t){var n;t.stopImmediatePropagation(),t.preventDefault(),g=(n=t).screenX,l=n.screenY,I=X(i).clientWidth,d=X(i).clientHeight,C=d/I,(s=e).startPos={x:h*e[0]+c,y:x*e[1]+u},m=G.scrollWidth,p=G.scrollHeight,o=i.cloneNode(!0),b.addClass(o,"mce-clonedresizable"),b.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,b.setStyles(o,{left:c,top:u,margin:0}),o.removeAttribute("data-mce-selected"),G.appendChild(o),b.bind(v,"mousemove",N),b.bind(v,"mouseup",k),y!==v&&(b.bind(y,"mousemove",N),b.bind(y,"mouseup",k)),r=b.add(G,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},I+" &times; "+d)}),e.elm=n,b.setStyles(n,{left:h*e[0]+c-n.offsetWidth/2,top:x*e[1]+u-n.offsetHeight/2})}):D(),i.setAttribute("data-mce-selected","1")},D=function(){var e,t;for(e in W(),i&&i.removeAttribute("data-mce-selected"),a)(t=b.get("mceResizeHandle"+e))&&(b.unbind(t),b.remove(t))},U=function(e){var i,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};h||n.removed||(B(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"===e.type?e.target:t.getNode(),o(i=b.$(i).closest("table,img,figure.image,hr")[0],G)&&(E(),o(t.getStart(!0),i)&&o(t.getEnd(!0),i))?R(i):D())},T=function(e){return cf(function(e,t){for(;t&&t!==e;){if(uf(t)||cf(t))return t;t=t.parentNode}return null}(n.getBody(),e))},W=function(){for(var e in a){var t=a[e];t.elm&&(b.unbind(t.elm),delete t.elm)}},E=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(Q){}};return n.on("init",function(){E(),de.ie&&11<=de.ie&&(n.on("mousedown click",function(e){var t=e.target,i=t.nodeName;h||!/^(TABLE|IMG|HR)$/.test(i)||T(t)||(2!==e.button&&n.selection.select(t,"TABLE"===i),"mousedown"===e.type&&n.nodeChanged())}),n.dom.bind(G,"mscontrolselect",function(e){var t=function(e){me.setEditorTimeout(n,function(){n.selection.select(e)})};if(T(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}));var e=me.throttle(function(e){n.composing||U(e)});n.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),n.on("keyup compositionend",function(t){i&&"TABLE"===i.nodeName&&e(t)}),n.on("hide blur",D),n.on("contextmenu",S)}),n.on("remove",W),{isResizable:Z,showResizeRect:R,hideResizeRect:D,updateResizeRect:U,destroy:function(){i=o=null}}},df=function(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}},Cf=function(e){return Ro.isContentEditableTrue(e)||Ro.isContentEditableFalse(e)},hf=function(e,t,n){var i,o,r,a,s,g=n;if(g.caretPositionFromPoint)(o=g.caretPositionFromPoint(e,t))&&((i=n.createRange()).setStart(o.offsetNode,o.offset),i.collapse(!0));else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(g.body.createTextRange){i=g.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(C){i=function(e,t,n){var i,o,r;if(i=n.elementFromPoint(e,t),o=n.body.createTextRange(),i&&"HTML"!==i.tagName||(i=n.body),o.moveToElementText(i),0<(r=(r=Pt.toArray(o.getClientRects())).sort(function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))})).length){t=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(a){}}return null}(e,t,n)}return a=n.body,s=(r=i)&&r.parentElement?r.parentElement():null,Ro.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(s,a,Cf))?null:r}return i},Af=function(e,t){return Y(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},ff=function(t,n){var i=(n||e.document).createDocumentFragment();return M(t,function(e){i.appendChild(e.dom())}),ai.fromDom(i)},mf=Gi("element","width","rows"),pf=Gi("element","cells"),bf=Gi("x","y"),Bf=function(e,t){var n=parseInt(vi(e,t),10);return isNaN(n)?1:n},vf=function(e){return z(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},yf=function(e,t){for(var n=e.rows(),i=0;i<n.length;i++)for(var o=n[i].cells(),r=0;r<o.length;r++)if(Ni(o[r],t))return Z.some(bf(r,i));return Z.none()},xf=function(e,t,n,i,o){for(var r=[],a=e.rows(),s=n;s<=o;s++){var g=a[s].cells(),l=t<i?g.slice(t,i+1):g.slice(i,t+1);r.push(pf(a[s].element(),l))}return r},Ff=function(e){return n=Y((t=e).rows(),function(e){var t=Y(e.cells(),function(e){var t=aa(e);return yi(t,"colspan"),yi(t,"rowspan"),t}),n=ra(e.element());return Zr(n,t),n}),i=ra(t.element()),o=ai.fromTag("tbody"),Zr(o,n),Xr(i,o),i;var t,n,i,o},Gf=function(){return ff([])},Qf=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return Z.from((u=e).selection.getRng()).map(function(e){var t=u.dom.add(u.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),n=ua(t.innerText);return u.dom.remove(t),n}).getOr("");t.getInner=!0;var n,o,a,s,g,l,c,u,I=(o=t,s=(n=e).selection.getRng(),g=n.dom.create("body"),l=n.selection.getSel(),c=Af(n,lI(l)),(a=o.contextual?function(e,t){var n,o,a=uI(t,e);return 0<a.length?function(e,t){return(n=e,i=t[0],Kr(i,"table",r(Ni,n))).bind(function(e){var n=t[0],i=t[t.length-1];return function(e,t,n){return yf(e,t).bind(function(t){return yf(e,n).map(function(n){return i=e,r=n,a=(o=t).x(),s=o.y(),g=r.x(),c=s<(l=r.y())?xf(i,a,s,g,l):xf(i,a,l,g,s),mf(i.element(),vf(c),c);var i,o,r,a,s,g,l,c})})}(function(e){var t=mf(ra(e),0,[]);return M(Lr(e,"tr"),function(e,n){M(Lr(e,"td,th"),function(i,o){!function(e,t,n,i,o){for(var r=Bf(o,"rowspan"),a=Bf(o,"colspan"),s=e.rows(),g=n;g<n+r;g++){s[g]||(s[g]=pf(aa(i),[]));for(var l=t;l<t+a;l++)s[g].cells()[l]=g===n&&l===t?o:ra(o)}}(t,function(e,t,n){for(;i=t,o=n,r=void 0,((r=e.rows())[o]?r[o].cells():[])[i];)t++;var i,o,r;return t}(t,o,n),n,e,i)})}),mf(t.element(),vf(t.rows()),t.rows())}(e),n,i).map(function(e){return ff([Ff(e)])})}).getOrThunk(Gf);var n,i}(e,a):(n=e,0<(o=t).length&&o[0].collapsed?Gf():function(e,t){return n=ai.fromDom(t.cloneContents()),o=function(e,t){var n,o=ai.fromDom(t.commonAncestorContainer),a=mc(o,e),s=K(a,function(e){return Co(e)||uo(e)}),g=function(e,t){return J(e,function(e){return"li"===ci(e)&&function(e,t){return Ma([(a=t,s=a.startContainer,g=a.startOffset,Ro.isText(s)?0===g?Z.some(ai.fromDom(s)):Z.none():Z.from(s.childNodes[g]).map(ai.fromDom)),(n=t,i=n.endContainer,o=n.endOffset,Ro.isText(i)?o===i.data.length?Z.some(ai.fromDom(i)):Z.none():Z.from(i.childNodes[o-1]).map(ai.fromDom))],function(t,n){var i=J(nh(e),r(Ni,t)),o=J(ih(e),r(Ni,n));return i.isSome()&&o.isSome()}).getOr(!1);var n,i,o,a,s,g}(e,t)}).fold(i([]),function(t){return(n=e,J(n,function(e){return"ul"===ci(e)||"ol"===ci(e)})).map(function(e){return[ai.fromTag("li"),ai.fromTag(ci(e))]}).getOr([]);var n})}(a,t),l=s.concat(g.length?g:mo(n=o)?Ui(n).filter(fo).fold(i([]),function(e){return[n,e]}):fo(n)?[n]:[]);return Y(l,ra)}(e,t),a=z(o,function(e,t){return Xr(t,e),t},n),0<o.length?ff([a]):a;var n,o,a}(n,o[0]))}(ai.fromDom(n.getBody()),c).dom():s.cloneContents())&&g.appendChild(a),n.selection.serializer.serialize(g,o));return"tree"===t.format?I:(t.content=e.selection.isCollapsed()?"":I,e.fire("GetContent",t),t.content)},wf=function(e,t,n,i,o){var r=n?t.startOffset:t.endOffset;return Z.from(n?t.startContainer:t.endContainer).map(ai.fromDom).map(function(e){return i&&t.collapsed?e:Li(e,o(e,r)).getOr(e)}).bind(function(e){return Ii(e)?Z.some(e):Ui(e)}).map(function(e){return e.dom()}).getOr(e)},Sf=function(e,t,n){return wf(e,t,!0,n,function(e,t){return Math.min(e.dom().childNodes.length,t)})},Xf=function(e,t,n){return wf(e,t,!1,n,function(e,t){return 0<t?t-1:t})},Zf=function(e,t){for(var n=e;e&&Ro.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Nf=Pt.each,kf=function(e){return!!e.select},Rf=function(e){return!(!e||!e.ownerDocument)&&ki(ai.fromDom(e.ownerDocument),ai.fromDom(e))},Df=function(e,t,n,i){var o,r,a,s,g,l=function(e,n){return function(e,n,i){var o,r,a,s=e.selection.getRng(),g=e.getDoc();if((i=i||{format:"html"}).set=!0,i.selection=!0,i.content=n,i.no_events||!(i=e.fire("BeforeSetContent",i)).isDefaultPrevented()){if(n=i.content,s.insertNode){n+='<span id="__caret">_</span>',s.startContainer===g&&s.endContainer===g?g.body.innerHTML=n:(s.deleteContents(),0===g.body.childNodes.length?g.body.innerHTML=n:s.createContextualFragment?s.insertNode(s.createContextualFragment(n)):(r=g.createDocumentFragment(),a=g.createElement("div"),r.appendChild(a),a.outerHTML=n,s.insertNode(r))),o=e.dom.get("__caret"),(s=g.createRange()).setStartBefore(o),s.setEndBefore(o),e.selection.setRng(s),e.dom.remove("__caret");try{e.selection.setRng(s)}catch(t){}}else s.item&&(g.execCommand("Delete",!1,null),s=e.getRng()),/^\s+/.test(n)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+n),e.dom.remove("__mce_tmp")):s.pasteHTML(n);i.no_events||e.fire("SetContent",i)}else e.fire("SetContent",i)}(i,e,n)},c=function(e){var t=I();t.collapse(!!e),d(t)},u=function(){return t.getSelection?t.getSelection():t.document.selection},I=function(){var n,o,r,l,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(l){return-1}};if(!t)return null;if(null==(l=t.document))return null;if(void 0!==i.bookmark&&!1===BC(i)){var I=Ud(i);if(I.isSome())return I.map(function(e){return Af(i,[e])[0]}).getOr(l.createRange())}try{(n=u())&&!Ro.isRestrictedNode(n.anchorNode)&&(o=0<n.rangeCount?n.getRangeAt(0):n.createRange?n.createRange():l.createRange())}catch(g){}return(o=Af(i,[o])[0])||(o=l.createRange?l.createRange():l.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(r=e.getRoot(),o.setStart(r,0),o.setEnd(r,0)),a&&s&&(0===c(o.START_TO_START,o,a)&&0===c(o.END_TO_END,o,a)?o=s:s=a=null),o},d=function(e,t){var n,o;if((r=e)&&(kf(r)||Rf(r.startContainer)&&Rf(r.endContainer))){var r,l=kf(e)?e:null;if(l){s=null;try{l.select()}catch(g){}}else{if(n=u(),e=i.fire("SetSelectionRange",{range:e,forward:t}).range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(g){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||de.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),i.fire("AfterSetSelectionRange",{range:e,forward:t})}}},C=function(){var t,n,i=u();return!(i&&i.anchorNode&&i.focusNode)||((t=e.createRng()).setStart(i.anchorNode,i.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(i.focusNode,i.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},h={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:i,collapse:c,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),d(o),c(!1)):(oh(e,o,i.getBody(),!0),d(o))},getContent:function(e){return Qf(i,e)},setContent:l,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,n){var i,o,r;return(i=e,o=t,r=n,Z.from(o).map(function(e){var t=i.nodeIndex(e),n=i.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),r&&(oh(i,n,e,!0),oh(i,n,e,!1)),n})).each(d),t},isCollapsed:function(){var e=I(),t=u();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:C,setNode:function(t){return l(e.getOuterHTML(t)),t},getNode:function(){return e=i.getBody(),(t=I())?(o=t.startContainer,r=t.endContainer,a=t.startOffset,s=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(o===r&&s-a<2&&o.hasChildNodes()&&(n=o.childNodes[a]),3===o.nodeType&&3===r.nodeType&&(o=o.length===a?Zf(o.nextSibling,!0):o.parentNode,r=0===s?Zf(r.previousSibling,!1):r.parentNode,o&&o===r))?o:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,o,r,a,s},getSel:u,setRng:d,getRng:I,getStart:function(e){return Sf(i.getBody(),I(),e)},getEnd:function(e){return Xf(i.getBody(),I(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,i){var o,r,a=[];if(r=e.getRoot(),n=e.getParent(n||Sf(r,t,t.collapsed),e.isBlock),i=e.getParent(i||Xf(r,t,t.collapsed),e.isBlock),n&&n!==r&&a.push(n),n&&i&&n!==i)for(var s=new ao(o=n,r);(o=s.next())&&o!==i;)e.isBlock(o)&&a.push(o);return i&&n!==i&&i!==r&&a.push(i),a}(e,I(),t,n)},normalize:function(){var t=I();if(!function(e){return 1<gI(e).length}(u())&&rh(i)){var n=ud(e,t);return n.each(function(e){d(e,C())}),n.getOr(t)}return t},selectorChanged:function(t,n){var o;return g||(g={},o={},i.on("NodeChange",function(t){var n=t.element,i=e.getParents(n,null,e.getRoot()),r={};Nf(g,function(t,n){Nf(i,function(a){if(e.is(a,n))return o[n]||(Nf(t,function(e){e(!0,{node:a,selector:n,parents:i})}),o[n]=t),r[n]=t,!1})}),Nf(o,function(e,t){r[t]||(delete o[t],Nf(e,function(e){e(!1,{node:n,selector:t,parents:i})}))})})),g[t]||(g[t]=[]),g[t].push(n),h},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var i,o,r,a,s,g=e.dom,l=g.getRoot(),c=0;if(e.fire("scrollIntoView",s={elm:t,alignToTop:n}),!s.isDefaultPrevented()&&Ro.isElement(t)){if(!1===n&&(c=t.offsetHeight),"BODY"!==l.nodeName){var u=e.selection.getScrollContainer();if(u)return i=df(t).y-df(u).y+c,a=u.clientHeight,void((i<(r=u.scrollTop)||r+a<i+25)&&(u.scrollTop=i<r?i:i-a+25))}o=g.getViewPort(e.getWin()),i=g.getPos(t).y+c,r=o.y,a=o.h,(i<o.y||r+a<i+25)&&e.getWin().scrollTo(0,i<r?i:i-a+25)}}(i,e,t)},placeCaretAt:function(e,t){return d(hf(e,t,i.getDoc()))},getBoundingClientRect:function(){var e=I();return e.collapsed?Cs.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=s=null,r.destroy()}};return o=lf(h),r=If(h,i),h.bookmarkManager=o,h.controlSelection=r,h};(gf=sf||(sf={}))[gf.Br=0]="Br",gf[gf.Block=1]="Block",gf[gf.Wrap=2]="Wrap",gf[gf.Eol=3]="Eol";var Uf=function(e,t){return e===Is.Backwards?t.reverse():t},Tf=function(e,t,n,i){for(var o,r,a,s,g,l=kg(n),c=i,u=[];c&&(s=l,g=c,o=t===Is.Forwards?s.next(g):s.prev(g));){if(Ro.isBr(o.getNode(!1)))return t===Is.Forwards?{positions:Uf(t,u).concat([o]),breakType:sf.Br,breakAt:Z.some(o)}:{positions:Uf(t,u),breakType:sf.Br,breakAt:Z.some(o)};if(o.isVisible()){if(e(c,o)){var I=(r=c,Ro.isBr((a=o).getNode(t===Is.Forwards))?sf.Br:!1===lg(r,a)?sf.Block:sf.Wrap);return{positions:Uf(t,u),breakType:I,breakAt:Z.some(o)}}u.push(o),c=o}else c=o}return{positions:Uf(t,u),breakType:sf.Eol,breakAt:Z.none()}},Wf=function(e,t,n,i){return t(n,i).breakAt.map(function(i){var o=t(n,i).positions;return e===Is.Backwards?o.concat(i):[i].concat(o)}).getOr([])},Ef=function(e,t){return z(e,function(e,n){return e.fold(function(){return Z.some(n)},function(i){return Ma([ne(i.getClientRects()),ne(n.getClientRects())],function(e,o){var r=Math.abs(t-e.left);return Math.abs(t-o.left)<=r?n:i}).or(e)})},Z.none())},Hf=function(e,t){return ne(t.getClientRects()).bind(function(t){return Ef(e,t.left)})},Of=r(Tf,us.isAbove,-1),Lf=r(Tf,us.isBelow,1),Vf=r(Wf,-1,Of),Yf=r(Wf,1,Lf),Mf=Ro.isContentEditableFalse,_f=Oa,Kf=function(e,t,n){var i,o,a,s,g=kg(e.getBody()),l=r(pg,g.next),c=r(pg,g.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(i=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?l(Cs.fromRangeStart(n)):c(Cs.fromRangeStart(n)))||(s=(a=e).dom.create(Kl(a)),(!de.ie||11<=de.ie)&&(s.innerHTML='<br data-mce-bogus="1">'),o=s,1===t?e.$(i).after(o):e.$(i).before(o),e.selection.select(o,!0),e.selection.collapse())}},zf=function(e,t){return function(){var n,i,o,a,s,g,l,c,u,I=(i=t,a=kg((n=e).getBody()),s=r(pg,a.next),g=r(pg,a.prev),l=i?Is.Forwards:Is.Backwards,c=i?s:g,u=n.selection.getRng(),(o=function(e,t,n,i){var o=e===Is.Forwards,r=o?Yc:Mc;if(!i.collapsed){var a=_f(i);if(Mf(a))return YI(e,t,a,e===Is.Backwards,!0)}var s=Ca(i.startContainer),g=fg(e,t.getBody(),i);if(r(g))return MI(t,g.getNode(!o));var l=rc.normalizePosition(o,n(g));if(!l)return s?i:null;if(r(l))return YI(e,t,l.getNode(!o),o,!0);var c=n(l);return c&&r(c)&&bg(l,c)?YI(e,t,c.getNode(!o),o,!0):s?KI(t,l.toRange(),!0):null}(l,n,c,u))?o:(o=Kf(n,l,u))||null);return!!I&&(e.selection.setRng(I),!0)}},Jf=function(e,t){return function(){var n,i,o,r,a,s,g=(r=(i=t)?1:-1,a=i?mh:fh,s=(n=e).selection.getRng(),(o=function(e,t,n,i){var o,r,a,s,g,l,c,u,I;if(I=_f(i),o=fg(e,t.getBody(),i),r=n(t.getBody(),ph(1),o),a=K(r,bh(1)),g=Mt.last(o.getClientRects()),(Yc(o)||Kc(o))&&(I=o.getNode()),(Mc(o)||zc(o))&&(I=o.getNode(!0)),!g)return null;if((s=Gh(a,l=g.left))&&Mf(s.node))return c=Math.abs(l-s.left),u=Math.abs(l-s.right),YI(e,t,s.node,c<u,!0);if(I){var d=function(e,t,n,i){var o,r,a,s,g,l,c=kg(t),u=[],I=0,d=function(e){return Mt.last(e.getClientRects())};1===e?(o=c.next,r=Ea,a=Wa,s=Cs.after(i)):(o=c.prev,r=Wa,a=Ea,s=Cs.before(i)),l=d(s);do{if(s.isVisible()&&!a(g=d(s),l)){if(0<u.length&&r(g,Mt.last(u))&&I++,(g=Da(g)).position=s,g.line=I,n(g))return u;u.push(g)}}while(s=o(s));return u}(e,t.getBody(),ph(1),I);if(s=Gh(K(d,bh(1)),l))return KI(t,s.position.toRange(),!0);if(s=Mt.last(K(d,bh(0))))return KI(t,s.position.toRange(),!0)}}(r,n,a,s))?o:(o=Kf(n,r,s))||null);return!!g&&(e.selection.setRng(g),!0)}},Pf=function(e,t){return function(){var n,o=t?Cs.fromRangeEnd(e.selection.getRng()):Cs.fromRangeStart(e.selection.getRng()),r=t?Lf(e.getBody(),o):Of(e.getBody(),o);return(t?ie(r.positions):ne(r.positions)).filter((n=t,function(e){return n?Mc(e):Yc(e)})).fold(i(!1),function(t){return e.selection.setRng(t.toRange()),!0})}},jf=function(e,t,n,i,o){var r,a,s,g,l=Lr(ai.fromDom(n),"td,th,caption").map(function(e){return e.dom()});return(a=K((r=e,q(l,function(e){var t,n={left:(t=Da(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:n.left,y:r(n),cell:e},{x:n.right,y:r(n),cell:e}]})),function(e){return t(e,o)}),s=i,g=o,z(a,function(e,t){return e.fold(function(){return Z.some(t)},function(e){var n=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-g)),i=Math.sqrt(Math.abs(t.x-s)+Math.abs(t.y-g));return Z.some(i<n?t:e)})},Z.none())).map(function(e){return e.cell})},$f=r(jf,function(e){return e.bottom},function(e,t){return e.y<t}),qf=r(jf,function(e){return e.top},function(e,t){return e.y>t}),em=function(e,t){var n;e.selection.setRng(t),n=e,ne(us.fromRangeStart(t).getClientRects()).each(function(e){var t,i,o,r,a,s,g,l,c,u=(a=t=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(n),(s=i=e).left>a.left&&s.right<a.right?0:s.left<a.left?s.left-a.left:s.right-a.right),I=(r=i).top>(o=t).top&&r.bottom<o.bottom?0:r.top<o.top?r.top-o.top:r.bottom-o.bottom;l=0!==u?0<u?u+4:u-4:0,c=0!==I?0<I?I+4:I-4:0,(g=n).inline?(g.getBody().scrollLeft+=l,g.getBody().scrollTop+=c):g.getWin().scrollBy(l,c)})},tm=function(e,t,n){var i,o,r,a,s=e(t,n);return(a=s).breakType===sf.Wrap&&0===a.positions.length||!Ro.isBr(n.getNode())&&(r=s).breakType===sf.Br&&1===r.positions.length?(i=e,o=t,!s.breakAt.map(function(e){return i(o,e).breakAt.isSome()}).getOr(!1)):s.breakAt.isNone()},nm=r(tm,Of),im=r(tm,Lf),om=function(e,t,n){var i,o=(i=n.getNode(!!t),Ro.isElement(i)&&"TABLE"===i.nodeName?Z.some(i):Z.none()),r=!1===t;o.fold(function(){return em(e,n.toRange())},function(i){return Vg.positionIn(r,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return em(e,n.toRange())},function(o){return r=t,s=i,g=n,void((l=Kl(a=e))?a.undoManager.transact(function(){var e=ai.fromTag(l);Bi(e,zl(a)),Xr(e,ai.fromTag("br")),r?wr(ai.fromDom(s),e):Qr(ai.fromDom(s),e);var t=a.dom.createRng();t.setStart(e.dom(),0),t.setEnd(e.dom(),0),em(a,t)}):em(a,g.toRange()));var r,a,s,g,l})})},rm=function(e,t){return function(){return Z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Z.from(e.dom.getParent(n,"table")).map(function(n){return function(e,t,n,i){var o,r,a,s=e.selection.getRng(),g=t?1:-1;if(Ps()&&(o=t,r=n,a=Cs.fromRangeStart(s),Vg.positionIn(!o,r).map(function(e){return e.isEqual(a)}).getOr(!1))){var l=YI(g,e,n,!t,!0);return em(e,l),!0}return!1}(e,t,n)})}).getOr(!1)}},am=function(e,t){return function(){return Z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Z.from(e.dom.getParent(n,"table")).map(function(i){return function(e,t,n,i){var o,r,a,s,g,l,c=e.selection.getRng(),u=Cs.fromRangeStart(c),I=e.getBody();if(!t&&nm(i,u)){var d=(s=I,function(e,t){return ne(t.getClientRects()).bind(function(t){return $f(e,t.left,t.top)}).bind(function(e){return Hf(Vg.lastPositionIn(n=e).map(function(e){return Of(n,e).positions.concat(e)}).getOr([]),t);var n})}(g=n,l=u).orThunk(function(){return ne(l.getClientRects()).bind(function(e){return Ef(Vf(s,Cs.before(g)),e.left)})}).getOr(Cs.before(g)));return om(e,t,d),!0}return!(!t||!im(i,u)||(o=I,d=function(e,t){return ie(t.getClientRects()).bind(function(t){return qf(e,t.left,t.top)}).bind(function(e){return Hf(Vg.firstPositionIn(n=e).map(function(e){return[e].concat(Lf(n,e).positions)}).getOr([]),t);var n})}(r=n,a=u).orThunk(function(){return ne(a.getClientRects()).bind(function(e){return Ef(Yf(o,Cs.after(r)),e.left)})}).getOr(Cs.after(r)),om(e,t,d),0))}(e,t,i,n)})}).getOr(!1)}},sm=function(e){return L(["figcaption"],ci(e))},gm=function(t){var n=e.document.createRange();return n.setStartBefore(t.dom()),n.setEndBefore(t.dom()),n},lm=function(e,t,n){n?Xr(e,t):Sr(e,t)},cm=function(e,t){return function(){return!!e.selection.isCollapsed()&&function(e,t){var n,i,o,a=ai.fromDom(e.getBody()),s=Cs.fromRangeStart(e.selection.getRng()),g=Kl(e),l=zl(e);return(n=s,i=a,o=r(Ni,i),_r(ai.fromDom(n.container()),Io,o).filter(sm)).exists(function(){if(function(e,t,n){return t?(o=e.dom(),Lf(o,n).breakAt.isNone()):(i=e.dom(),Of(i,n).breakAt.isNone());var i,o}(a,t,s)){var n=function(e,t,n,i){return""===t?(l=e,c=i,u=ai.fromTag("br"),lm(l,u,c),gm(u)):(o=e,r=i,a=n,s=ai.fromTag(t),g=ai.fromTag("br"),Bi(s,a),Xr(s,g),lm(o,s,r),gm(g));var o,r,a,s,g,l,c,u}(a,g,l,t);return e.selection.setRng(n),!0}return!1})}(e,t)}},um=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,i)}},Im=function(e,n){return J(function(e,n){return q(Y(e,function(e){return DA({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t},e)}),function(e){return(i=n).keyCode===(t=e).keyCode&&i.shiftKey===t.shiftKey&&i.altKey===t.altKey&&i.ctrlKey===t.ctrlKey&&i.metaKey===t.metaKey?[e]:[];var t,i})}(e,n),function(e){return e.action()})},dm=function(e){return Z.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Cm=function(e,t){var n,i,o,r=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var g=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&t.insertBefore(a.doc.createTextNode("\xa0"),t.firstChild)}if(o=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new ao(t,t);i=n.current();){if(Ro.isText(i)){o.setStart(i,0),o.setEnd(i,0);break}if(s[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}r=i,i=n.next()}i||(o.setStart(r,0),o.setEnd(r,0))}else Ro.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),a.remove(void 0),e.selection.scrollIntoView(t)}},hm=dm,Am=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},fm=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},mm=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},pm=function(e,t,n){for(var i=e[n?"firstChild":"lastChild"];i&&!Ro.isElement(i);)i=i[n?"nextSibling":"previousSibling"];return i===t},bm=function(e){e.innerHTML='<br data-mce-bogus="1">'},Bm=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},vm=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},ym=function(e,t,n){return!1===Ro.isText(t)?n:e?1===n&&t.data.charAt(n-1)===ca?0:n:n===t.data.length-1&&t.data.charAt(n)===ca?t.data.length:n},xm=function(e,t){var n,i,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==o?i:o},Fm=function(e,t){var n=Kl(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,zl(e))},Gm=function(e,t){return hm(e).filter(function(e){return 0<t.length&&Xi(ai.fromDom(e),t)}).isSome()},Qm=Sc([{br:[]},{block:[]},{none:[]}]),wm=function(e,t){return function(e){return Gm(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},Sm=function(e){return function(t,n){return""===Kl(t)===e}},Xm=function(e){return function(t,n){return function(e){return dm(e).filter(function(e){return mo(ai.fromDom(e))}).isSome()}(t)===e}},Zm=function(e,t){return function(n,o){return function(e){return dm(e).fold(i(""),function(e){return e.nodeName.toUpperCase()})}(n)===e.toUpperCase()===t}},Nm=function(e){return Zm("pre",e)},km=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},Rm=function(e,t){return function(e){return Gm(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},Dm=function(e,t){return t},Um=function(e){var t=Kl(e),n=function(e,t){var n,i,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==o?i:o}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},Tm=function(e,t){return function(n,i){return z(e,function(e,t){return e&&t(n,i)},!0)?Z.some(t):Z.none()}},Wm=function(e,n){(function(e,t){return pu([Tm([wm],Qm.none()),Tm([Zm("summary",!0)],Qm.br()),Tm([Nm(!0),km(!1),Dm],Qm.br()),Tm([Nm(!0),km(!1)],Qm.block()),Tm([Nm(!0),km(!0),Dm],Qm.block()),Tm([Nm(!0),km(!0)],Qm.br()),Tm([Xm(!0),Dm],Qm.br()),Tm([Xm(!0)],Qm.block()),Tm([Sm(!0),Dm,Um],Qm.block()),Tm([Sm(!0)],Qm.br()),Tm([Rm],Qm.br()),Tm([Sm(!1),Dm],Qm.br()),Tm([Um],Qm.block())],[e,t.shiftKey]).getOr(Qm.none())})(e,n).fold(function(){bd(e,n)},function(){!function(e,t){var n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b=e.dom,B=e.schema,v=B.getNonEmptyElements(),y=e.selection.getRng(),x=function(t){var n,r,s,g=o,l=B.getTextInlineElements();if(t||"TABLE"===u||"HR"===u?(n=b.create(t||d),Fm(e,n)):n=a.cloneNode(!1),s=n,!1===e.getParam("keep_styles",!0))b.setAttrib(n,"style",null),b.setAttrib(n,"class",null);else do{if(l[g.nodeName]){if(Ts(g)||$g(g))continue;r=g.cloneNode(!1),b.setAttrib(r,"id",""),n.hasChildNodes()?r.appendChild(n.firstChild):s=r,n.appendChild(r)}}while((g=g.parentNode)&&g!==i);return bm(s),n},F=function(e){var t,n,i,s;if(s=ym(e,o,r),Ro.isText(o)&&(e?0<s:s<o.nodeValue.length))return!1;if(o.parentNode===a&&C&&!e)return!0;if(e&&Ro.isElement(o)&&o===a.firstChild)return!0;if(Bm(o,"TABLE")||Bm(o,"HR"))return C&&!e||!C&&e;for(t=new ao(o,a),Ro.isText(o)&&(e&&0===s?t.prev():e||s!==o.nodeValue.length||t.next());n=t.current();){if(Ro.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(i=n.nodeName.toLowerCase(),v[i]&&"br"!==i))return!1}else if(Ro.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},G=function(){g=/^(H[1-6]|PRE|FIGURE)$/.test(u)&&"HGROUP"!==I?x(d):x(),e.getParam("end_container_on_empty_block",!1)&&vm(b,c)&&b.isEmpty(a)?g=b.split(c,a):b.insertAfter(g,a),Cm(e,g)};ud(b,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),o=y.startContainer,r=y.startOffset,d=Kl(e),s=t.shiftKey,Ro.isElement(o)&&o.hasChildNodes()&&(C=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,r=C&&Ro.isText(o)?o.nodeValue.length:0),(i=xm(b,o))&&((d&&!s||!d&&s)&&(o=function(e,t,n,i,o){var r,a,s,g,l,c,u,I=t||"P",d=e.dom,C=xm(d,i);if(!(a=d.getParent(i,d.isBlock))||!vm(d,a)){if(c=(a=a||C)===e.getBody()||(u=a)&&/^(TD|TH|CAPTION)$/.test(u.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return r=d.create(I),Fm(e,r),a.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(g=i;g.parentNode!==a;)g=g.parentNode;for(;g&&!d.isBlock(g);)g=(s=g).previousSibling;if(s&&e.schema.isValidChild(c,I.toLowerCase())){for(r=d.create(I),Fm(e,r),s.parentNode.insertBefore(r,s),g=s;g&&!d.isBlock(g);)l=g.nextSibling,r.appendChild(g),g=l;n.setStart(i,o),n.setEnd(i,o)}}return i}(e,d,y,o,r)),a=b.getParent(o,b.isBlock),c=a?b.getParent(a.parentNode,b.isBlock):null,u=a?a.nodeName.toUpperCase():"","LI"!==(I=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(c=(a=c).parentNode,u=I),/^(LI|DT|DD)$/.test(u)&&b.isEmpty(a)?function(e,t,n,i,o){var r=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;fm(s=n)&&fm(s.parentNode)&&(o="LI");var g,l=o?t(o):r.create("BR");if(pm(n,i,!0)&&pm(n,i,!1))Am(n,"LI")?r.insertAfter(l,mm(n)):r.replace(l,n);else if(pm(n,i,!0))Am(n,"LI")?(r.insertAfter(l,mm(n)),l.appendChild(r.doc.createTextNode(" ")),l.appendChild(n)):n.parentNode.insertBefore(l,n);else if(pm(n,i,!1))r.insertAfter(l,mm(n));else{n=mm(n);var c=a.cloneRange();c.setStartAfter(i),c.setEndAfter(n);var u=c.extractContents();"LI"===o&&(g=u).firstChild&&"LI"===g.firstChild.nodeName?(l=u.firstChild,r.insertAfter(u,n)):(r.insertAfter(u,n),r.insertAfter(l,n))}r.remove(i),Cm(e,l)}}(e,x,c,a,d):d&&a===e.getBody()||(d=d||"P",Ca(a)?(g=va(a),b.isEmpty(a)&&bm(a),Cm(e,g)):F()?G():F(!0)?(g=a.parentNode.insertBefore(x(),a),Cm(e,Bm(a,"HR")?g:a)):((n=(m=y,p=m.cloneRange(),p.setStart(m.startContainer,ym(!0,m.startContainer,m.startOffset)),p.setEnd(m.endContainer,ym(!1,m.endContainer,m.endOffset)),p).cloneRange()).setEndAfter(a),l=n.extractContents(),M(Or(ai.fromDom(l),di),function(e){var t=e.dom();t.nodeValue=ua(t.nodeValue)}),function(e){for(;Ro.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(l),g=l.firstChild,b.insertAfter(l,a),function(e,t,n){var i,o=n,r=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Ro.isElement(o)&&!t[o.nodeName.toLowerCase()]&&r.push(o)}for(i=r.length;i--;)!(o=r[i]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue?e.remove(o):(a=o)&&"A"===a.nodeName&&e.isEmpty(a)&&e.remove(o);var a}}(b,v,g),h=b,(A=a).normalize(),(f=A.lastChild)&&!/^(left|right)$/gi.test(h.getStyle(f,"float",!0))||h.add(A,"br"),b.isEmpty(a)&&bm(a),g.normalize(),b.isEmpty(g)?(b.remove(g),G()):Cm(e,g)),b.setAttrib(g,"id",""),e.fire("NewBlock",{newBlock:g})))}(e,n)},t)},Em=function(e,t){var n=t.container(),i=t.offset();return Ro.isText(n)?(n.insertData(i,e),Z.some(us(n,i+e.length))):mg(t).map(function(n){var i=ai.fromText(e);return t.isAtEnd()?wr(n,i):Qr(n,i),us(i.dom(),e.length)})},Hm=r(Em,"\xa0"),Om=r(Em," "),Lm=function(e,t,n){return Vg.navigateIgnore(e,t,n,Lc)},Vm=function(e,t){return J(mc(ai.fromDom(t.container()),e),Io)},Ym=function(e,t,n){return Lm(e,t.dom(),n).forall(function(e){return Vm(t,n).fold(function(){return!1===lg(e,n,t.dom())},function(i){return!1===lg(e,n,t.dom())&&ki(i,ai.fromDom(e.container()))})})},Mm=function(e,t,n){return Vm(t,n).fold(function(){return Lm(e,t.dom(),n).forall(function(e){return!1===lg(e,n,t.dom())})},function(t){return Lm(e,t.dom(),n).isNone()})},_m=r(Mm,!1),Km=r(Mm,!0),zm=r(Ym,!1),Jm=r(Ym,!0),Pm=function(e){return us.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},jm=function(e,t){var n=K(mc(ai.fromDom(t.container()),e),Io);return ne(n).getOr(e)},$m=function(e,t){return Pm(t)?Oc(t):Oc(t)||Vg.prevPosition(jm(e,t).dom(),t).exists(Oc)},qm=function(e,t){return Pm(t)?Hc(t):Hc(t)||Vg.nextPosition(jm(e,t).dom(),t).exists(Hc)},ep=function(e){return mg(e).bind(function(e){return _r(e,Ii)}).exists(function(e){return t=xi(e,"white-space"),L(["pre","pre-wrap"],t);var t})},tp=function(e,t){return n=e,!ep(i=t)&&(_m(n,i)||zm(n,i)||kc(n,i)||$m(n,i))||function(e,t){var n,i,o,r=(i=(n=t).container(),o=n.offset(),Ro.isText(i)&&o<i.data.length?us(i,o+1):n);return!ep(r)&&(Km(e,r)||Jm(e,r)||Nc(e,r)||qm(e,r))}(e,t);var n,i},np=function(e,t){return Uc(e.charAt(t))},ip=function(e){var t=e.container();return Ro.isText(t)&&Pn(t.data,"\xa0")},op=function(e){var t=ai.fromDom(e.getBody());e.selection.isCollapsed()&&function(e,t){return Z.some(t).filter(ip).bind(function(t){var n,i,o,r,a,s,g,l,c=t.container();return a=e,g=(s=c).data,l=us(s,0),np(g,0)&&!tp(a,l)&&(s.data=" "+g.slice(1),1)||function(e){var t=e.data,n=Y(t.split(""),function(e,t,n){return Uc(e)&&0<t&&t<n.length-1&&Wc(n[t-1])&&Wc(n[t+1])?" ":e}).join("");return n!==t&&(e.data=n,!0)}(c)||(n=e,o=(i=c).data,r=us(i,o.length-1),np(o,o.length-1)&&!tp(n,r)&&(i.data=o.slice(0,-1)+" ",1))?Z.some(t):Z.none()})}(t,us.fromRangeStart(e.selection.getRng())).each(function(t){e.selection.setRng(t.toRange())})},rp=function(e){var t,n,i=Cs.fromRangeStart(e.selection.getRng()),o=ai.fromDom(e.getBody());if(e.selection.isCollapsed()){var a=r(rc.isInlineTarget,e),s=Cs.fromRangeStart(e.selection.getRng());return Tu(a,e.getBody(),s).bind((n=o,function(e){return e.fold(function(e){return Vg.prevPosition(n.dom(),Cs.before(e))},function(e){return Vg.firstPositionIn(e)},function(e){return Vg.lastPositionIn(e)},function(e){return Vg.nextPosition(n.dom(),Cs.after(e))})})).bind(function(e,t){return function(n){return i=e,!ep(o=n)&&(function(e,t){return i=t,Vg.prevPosition(e.dom(),i).isNone()||(n=t,Vg.nextPosition(e.dom(),n).isNone())||_m(e,t)||Km(e,t)||kc(e,t)||Nc(e,t);var n,i}(i,o)||$m(i,o)||qm(i,o))?Hm(t):Om(t);var i,o}}(o,i)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},ap=function(e,t){var n;t.hasAttribute("data-mce-caret")&&(va(t),(n=e).selection.setRng(n.selection.getRng()),e.selection.scrollIntoView(t))},sp=function(e,t){var n=zr(ai.fromDom(e.getBody()),"*[data-mce-caret]").fold(i(null),function(e){return e.dom()});if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void ap(e,n)):void(fa(n)&&(ap(e,n),e.undoManager.add()))},gp=oi.detect().browser,lp=function(e){var t,n,i,o,a=Ku.setupSelectedState(e);(function(e){e.on("keyup compositionstart",r(sp,e))})(e),o=a,(i=e).on("keydown",function(e){var t,n,r,a;!1===e.isDefaultPrevented()&&(t=i,n=o,r=e,a=oi.detect().os,Im([{keyCode:Sh.RIGHT,action:zf(t,!0)},{keyCode:Sh.LEFT,action:zf(t,!1)},{keyCode:Sh.UP,action:Jf(t,!1)},{keyCode:Sh.DOWN,action:Jf(t,!0)},{keyCode:Sh.RIGHT,action:rm(t,!0)},{keyCode:Sh.LEFT,action:rm(t,!1)},{keyCode:Sh.UP,action:am(t,!1)},{keyCode:Sh.DOWN,action:am(t,!0)},{keyCode:Sh.RIGHT,action:Ku.move(t,n,!0)},{keyCode:Sh.LEFT,action:Ku.move(t,n,!1)},{keyCode:Sh.RIGHT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:Ku.moveNextWord(t,n)},{keyCode:Sh.LEFT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:Ku.movePrevWord(t,n)},{keyCode:Sh.UP,action:cm(t,!1)},{keyCode:Sh.DOWN,action:cm(t,!0)}],r).each(function(e){r.preventDefault()}))}),function(e,t){e.on("keydown",function(n){var i,o,r;!1===n.isDefaultPrevented()&&(o=t,r=n,Im([{keyCode:Sh.BACKSPACE,action:um(su,i=e,!1)},{keyCode:Sh.DELETE,action:um(su,i,!0)},{keyCode:Sh.BACKSPACE,action:um(JI,i,!1)},{keyCode:Sh.DELETE,action:um(JI,i,!0)},{keyCode:Sh.BACKSPACE,action:um(Pu,i,o,!1)},{keyCode:Sh.DELETE,action:um(Pu,i,o,!0)},{keyCode:Sh.BACKSPACE,action:um(mI,i,!1)},{keyCode:Sh.DELETE,action:um(mI,i,!0)},{keyCode:Sh.BACKSPACE,action:um(wc,i,!1)},{keyCode:Sh.DELETE,action:um(wc,i,!0)},{keyCode:Sh.BACKSPACE,action:um(Gc,i,!1)},{keyCode:Sh.DELETE,action:um(Gc,i,!0)},{keyCode:Sh.BACKSPACE,action:um(OI,i,!1)},{keyCode:Sh.DELETE,action:um(OI,i,!0)}],r).each(function(e){r.preventDefault()}))}),e.on("keyup",function(t){var n,i;!1===t.isDefaultPrevented()&&(i=t,Im([{keyCode:Sh.BACKSPACE,action:um(gu,n=e)},{keyCode:Sh.DELETE,action:um(gu,n)}],i))})}(e,a),(n=e).on("keydown",function(e){var t,i,o;e.keyCode===Sh.ENTER&&(t=n,(i=e).isDefaultPrevented()||(i.preventDefault(),(o=t.undoManager).typing&&(o.typing=!1,o.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),Wm(t,i)})))}),(t=e).on("keydown",function(e){var n;!1===e.isDefaultPrevented()&&(n=e,Im([{keyCode:Sh.SPACEBAR,action:um(rp,t)}],n).each(function(e){n.preventDefault()}))}),function(e){var t,n;t=e,n=Dr(function(){t.composing||op(t)},0),gp.isIE()&&(t.on("keypress",function(e){n.throttle()}),t.on("remove",function(e){n.cancel()})),e.on("input",function(t){!1===t.isComposing&&op(e)})}(e),function(e){e.on("keydown",function(t){var n,i;!1===t.isDefaultPrevented()&&(i=t,Im([{keyCode:Sh.END,action:Pf(n=e,!0)},{keyCode:Sh.HOME,action:Pf(n,!1)}],i).each(function(e){i.preventDefault()}))})}(e)},cp=function(e){return Ro.isElement(e)&&Ao(ai.fromDom(e))},up=mr.DOM,Ip=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&me.setEditorTimeout(t,function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()},100)},dp=function(t,n){var o,r,a,s,g,l,c,u,I=t.settings,d=t.getElement(),C=t.getDoc();I.inline||(t.getElement().style.visibility=t.orgVisibility),n||I.content_editable||(C.open(),C.write(t.iframeHTML),C.close()),I.content_editable&&(t.on("remove",function(){var e=this.getBody();up.removeClass(e,"mce-content-body"),up.removeClass(e,"mce-edit-focus"),up.setAttrib(e,"contentEditable",null)}),up.addClass(d,"mce-content-body"),t.contentDocument=C=I.content_document||e.document,t.contentWindow=I.content_window||e.window,t.bodyElement=d,I.content_document=I.content_window=null,I.root_name=d.nodeName.toLowerCase()),(o=t.getBody()).disabled=!0,t.readonly=I.readonly,t.readonly||(t.inline&&"static"===up.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=t.getParam("content_editable_state",!0)),o.disabled=!1,t.editorUpload=function(t){var n,o,r,a,s,g,l,c,u,I=(n=[],o=function(e){var t,n,o;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||jC.uuid("blobid"),n=e.name||t,{id:i(t),name:i(n),filename:i(n+"."+(o=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[o.toLowerCase()]||"dat")),blob:i(e.blob),base64:i(e.base64),blobUri:i(e.blobUri||ge.createObjectURL(e.blob)),uri:i(e.uri)}},{create:function(e,t,n,i){if(k(e))return o({id:e,name:i,blob:t,base64:n});if(R(e))return o(e);throw new Error("Unknown input type")},add:function(e){r(e.id())||n.push(e)},get:r=function(e){return a(function(t){return t.id()===e})},getByUri:function(e){return a(function(t){return t.blobUri()===e})},findFirst:a=function(e){return K(n,e)[0]},removeByUri:function(e){n=K(n,function(t){return t.blobUri()!==e||(ge.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){M(n,function(e){ge.revokeObjectURL(e.blobUri())}),n=[]}}),d=(l={},c=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:u=function(e){return e in l},getResultUri:function(e){var t=l[e];return t?t.resultUri:null},isPending:function(e){return!!u(e)&&1===l[e].status},isUploaded:function(e){return!!u(e)&&2===l[e].status},markPending:function(e){l[e]=c(1,null)},markUploaded:function(e,t){l[e]=c(2,t)},removeFailed:function(e){delete l[e]},destroy:function(){l={}}}),C=[],h=function(e){return function(n){return t.selection?e(n):[]}},A=function(e,t,n){for(var i=0;-1!==(i=e.indexOf(t,i))&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1),-1!==i;);return e},f=function(e,t,n){return e=A(e,'src="'+t+'"','src="'+n+'"'),A(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},m=function(e,n){M(t.undoManager.data,function(t){"fragmented"===t.type?t.fragments=Y(t.fragments,function(t){return f(t,e,n)}):t.content=f(t.content,e,n)})},p=function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},b=function(n){return s||(s=function(t,n){var i={},o=function(t,i,o,r){var a,s;(a=LC()).open("POST",n.url),a.withCredentials=n.credentials,a.upload.onprogress=function(e){r(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e,t,r;a.status<200||300<=a.status?o("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?i((r=e.location,(t=n.basePath)?t.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r)):o("Invalid JSON: "+a.responseText)},(s=new e.FormData).append("file",t.blob(),t.filename()),a.send(s)},r=function(e,t){return{url:t,blobInfo:e,status:!0}},a=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},s=function(e,t){Pt.each(i[e],function(e){e(t)}),delete i[e]};return!1===W(n.handler)&&(n.handler=o),{upload:function(e,g){return n.url||n.handler!==o?function(e,o){return e=Pt.grep(e,function(e){return!t.isUploaded(e.blobUri())}),Ce.all(Pt.map(e,function(e){return t.isPending(e.blobUri())?(u=e.blobUri(),new Ce(function(e){i[u]=i[u]||[],i[u].push(e)})):(l=n.handler,c=o,t.markPending((g=e).blobUri()),new Ce(function(n){var i;try{var o=function(){i&&i.close()};l(g,function(e){o(),t.markUploaded(g.blobUri(),e),s(g.blobUri(),r(g,e)),n(r(g,e))},function(e){o(),t.removeFailed(g.blobUri()),s(g.blobUri(),a(g,e)),n(a(g,e))},function(e){e<0||100<e||(i||(i=c()),i.progressBar.value(e))})}catch(e){n(a(g,e.message))}}));var g,l,c,u}))}(e,g):new Ce(function(e){e([])})}}}(d,{url:ql(t),basePath:ec(t),credentials:tc(t),handler:nc(t)})),y().then(h(function(e){var i;return i=Y(e,function(e){return e.blobInfo}),s.upload(i,p).then(h(function(i){var o=Y(i,function(n,i){var o=e[i].image;return n.status&&$l(t)?function(e,n){I.removeByUri(e.src),m(e.src,n),t.$(e).attr({src:jl(t)?n+"?"+(new Date).getTime():n,"data-mce-src":t.convertURL(n,"src")})}(o,n.url):n.error&&EC.uploadError(t,n.error),{element:o,status:n.status}});return n&&n(o),o}))}))},B=function(e){if(Pl(t))return b(e)},v=function(e){return!1!==ee(C,function(t){return t(e)})&&(0!==e.getAttribute("src").indexOf("data:")||Jl(t)(e))},y=function(){var e,n,o;return g||(e=d,n=I,o={},g={findAll:function(t,r){var a;r||(r=i(!0)),a=K(JC(t),function(t){var n=t.src;return!!de.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===de.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&r(t):0===n.indexOf("data:")&&r(t))});var s=Y(a,function(e){if(o[e.src])return new Ce(function(t){o[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var t=new Ce(function(t,i){zC(n,e,t,i)}).then(function(e){return delete o[e.image.src],e}).catch(function(t){return delete o[e.src],t});return o[e.src]=t});return Ce.all(s)}}),g.findAll(t.getBody(),v).then(h(function(e){return e=K(e,function(e){return"string"!=typeof e||(EC.displayError(t,e),!1)}),M(e,function(e){m(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},x=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var i=d.getResultUri(n);if(i)return'src="'+i+'"';var o=I.getByUri(n);return o||(o=z(t.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':e})};return t.on("setContent",function(){Pl(t)?B():y()}),t.on("RawSaveContent",function(e){e.content=x(e.content)}),t.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=x(e.content))}),t.on("PostRender",function(){t.parser.addNodeFilter("img",function(e){M(e,function(e){var t=e.attr("src");if(!I.getByUri(t)){var n=d.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:I,addFilter:function(e){C.push(e)},uploadImages:b,uploadImagesAuto:B,scanForImages:y,destroy:function(){I.destroy(),d.destroy(),g=s=null}}}(t),t.schema=rr(I),t.dom=mr(C,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:I.force_hex_style_colors,class_filter:I.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:I.content_editable,schema:t.schema,contentCssCors:ic(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((s=qA((a=t).settings,a.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,i,o,r=e.length,s=a.dom;r--;)if(i=(n=e[r]).attr(t),!n.attributes.map[o="data-mce-"+t]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===t?((i=s.serializeStyle(s.parseStyle(i),n.name)).length||(i=null),n.attr(o,i),n.attr(t,i)):"tabindex"===t?(n.attr(o,i),n.attr(t,null)):n.attr(o,a.convertURL(i,t,n.name))}}),s.addNodeFilter("script",function(e){for(var t,n,i=e.length;i--;)0!==(n=(t=e[i]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),s.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=a.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(i)&&0===t.getAll("br").length&&(t.append(new LA("br",1)).shortEnded=!0)}),s),t.serializer=rf(I,t),t.selection=Df(t.dom,t.getWin(),t.serializer,t),t.annotator=Xl(t),t.formatter=NA(t),t.undoManager=zh(t),t._nodeChangeDispatcher=new ah(t),t._selectionOverrides=kh(t),function(e){var t,n;(t=e).on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}),(n=e).parser.addNodeFilter("details",function(e){M(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),n.serializer.addNodeFilter("details",function(e){M(e,function(e){var t=e.attr("data-mce-open");e.attr("open",k(t)?t:null),e.attr("data-mce-open",null)})})}(t),function(e){e.on("click",function(t){3<=t.detail&&function(e){var t=e.selection.getRng(),n=us.fromRangeStart(t),i=us.fromRangeEnd(t);if(us.isElementPosition(n)){var o=n.container();cp(o)&&Vg.firstPositionIn(o).each(function(e){return t.setStart(e.container(),e.offset())})}us.isElementPosition(i)&&(o=n.container(),cp(o)&&Vg.lastPositionIn(o).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Hl(t))}(e)})}(t),lp(t),th(t),t.fire("PreInit"),I.browser_spellcheck||I.gecko_spellcheck||(C.body.spellcheck=!1,up.setAttrib(o,"spellcheck","false")),t.quirks=function(t){var n,i,o,r=Pt.each,a=Sh.BACKSPACE,s=Sh.DELETE,g=t.dom,l=t.selection,c=t.settings,u=t.parser,I=de.gecko,d=de.webkit,C="data:text/mce-internal,",h=de.ie?"Text":"URL",A=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(i){}},f=function(e){return e.isDefaultPrevented()},m=function(){t.shortcuts.add("meta+a",null,"SelectAll")},p=function(){t.on("keydown",function(e){if(!f(e)&&e.keyCode===a&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},b=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",function(e){var n;if("HTML"===e.target.nodeName){if(11<de.ie)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}}))};return t.on("keydown",function(e){var n,i,o,r,a;if(!f(e)&&e.keyCode===Sh.BACKSPACE&&(i=(n=l.getRng()).startContainer,o=n.startOffset,r=g.getRoot(),a=i,n.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(t.formatter.toggle("blockquote",null,a),(n=g.createRng()).setStart(i,0),n.setEnd(i,0),l.setRng(n))}}),n=function(e){var t=g.create("body"),n=e.cloneContents();return t.appendChild(n),l.serializer.serialize(t,{format:"html"})},t.on("keydown",function(e){var i,o,r,l,c,u=e.keyCode;if(!f(e)&&(u===s||u===a)){if(i=t.selection.isCollapsed(),o=t.getBody(),i&&!g.isEmpty(o))return;if(!i&&(r=t.selection.getRng(),l=n(r),(c=g.createRng()).selectNode(t.getBody()),l!==n(c)))return;e.preventDefault(),t.setContent(""),o.firstChild&&g.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}}),de.windowsPhone||t.on("keyup focusin mouseup",function(e){Sh.modifierPressed(e)||l.normalize()},!0),d&&(t.settings.content_editable||g.bind(t.getDoc(),"mousedown mouseup",function(e){var n;if(e.target===t.getDoc().documentElement)if(n=l.getRng(),t.getBody().focus(),"mousedown"===e.type){if(Aa(n.startContainer))return;l.placeCaretAt(e.clientX,e.clientY)}else l.setRng(n)}),t.on("click",function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==g.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&g.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),l.select(n))}),c.forced_root_block&&t.on("init",function(){A("DefaultParagraphSeparator",c.forced_root_block)}),t.on("init",function(){t.dom.bind(t.getBody(),"submit",function(e){e.preventDefault()})}),p(),u.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),de.iOS?(t.inline||t.on("keydown",function(){e.document.activeElement===e.document.body&&t.getWin().focus()}),b(),t.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):m()),11<=de.ie&&(b(),p()),de.ie&&(m(),A("AutoUrlDetect",!1),t.on("dragstart",function(e){var n,i,o;(n=e).dataTransfer&&(t.selection.isCollapsed()&&"IMG"===n.target.tagName&&l.select(n.target),0<(i=t.selection.getContent()).length&&(o=C+escape(t.id)+","+escape(i),n.dataTransfer.setData(h,o)))}),t.on("drop",function(e){if(!f(e)){var n=(r=e).dataTransfer&&(a=r.dataTransfer.getData(h))&&0<=a.indexOf(C)?(a=a.substr(C.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null;if(n&&n.id!==t.id){e.preventDefault();var i=hf(e.x,e.y,t.getDoc());l.setRng(i),o=n.html,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:o,internal:!0}):t.execCommand("mceInsertContent",!1,o)}}var o,r,a})),I&&(t.on("keydown",function(e){if(!f(e)&&e.keyCode===a){if(!t.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var n=l.getNode(),i=n.previousSibling;if("HR"===n.nodeName)return g.remove(n),void e.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(g.remove(i),e.preventDefault())}}}),e.Range.prototype.getClientRects||t.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),me.setEditorTimeout(t,function(){n.focus()})}}),i=function(){var e=g.getAttribs(l.getStart().cloneNode(!1));return function(){var n=l.getStart();n!==t.getBody()&&(g.setAttrib(n,"style",null),r(e,function(e){n.setAttributeNode(e.cloneNode(!0))}))}},o=function(){return!l.isCollapsed()&&g.getParent(l.getStart(),g.isBlock)!==g.getParent(l.getEnd(),g.isBlock)},t.on("keypress",function(e){var n;if(!f(e)&&(8===e.keyCode||46===e.keyCode)&&o())return n=i(),t.getDoc().execCommand("delete",!1,null),n(),e.preventDefault(),!1}),g.bind(t.getDoc(),"cut",function(e){var n;!f(e)&&o()&&(n=i(),me.setEditorTimeout(t,function(){n()}))}),c.readonly||t.on("BeforeExecCommand MouseDown",function(){A("StyleWithCSS",!1),A("enableInlineTableEditing",!1),c.object_resizing||A("enableObjectResizing",!1)}),t.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(g.select("a"),function(e){var t=e.parentNode,n=g.getRoot();if(t.lastChild===e){for(;t&&!g.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}g.add(t,"br",{"data-mce-bogus":1})}})}),t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),de.mac&&t.on("keydown",function(e){!Sh.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}),p()),{refreshContentEditable:function(){},isHidden:function(){var e;return!I||t.removed?0:!(e=t.selection.getSel())||!e.rangeCount||0===e.rangeCount}}}(t),t.fire("PostRender"),I.directionality&&(o.dir=I.directionality),I.nowrap&&(o.style.whiteSpace="nowrap"),I.protect&&t.on("BeforeSetContent",function(e){Pt.each(I.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(r="",Pt.each(t.contentStyles,function(e){r+=e+"\r\n"}),t.dom.addStyle(r)),(g=t,g.inline?up.styleSheetLoader:g.dom.styleSheetLoader).loadAll(t.contentCSS,function(e){Ip(t)},function(e){Ip(t)}),I.content_style&&(l=I.content_style,c=ai.fromDom(t.getDoc().head),u=ai.fromTag("style"),bi(u,"type","text/css"),Xr(u,ai.fromText(l)),Xr(c,u))},Cp=mr.DOM,hp=mr.DOM,Ap=function(e,t,n){var i=HC.get(n),o=HC.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Pt.trim(n),i&&-1===Pt.inArray(t,n)){if(Pt.each(HC.dependencies(n),function(n){Ap(e,t,n)}),e.plugins[n])return;try{var r=new i(e,o,e.$);(e.plugins[n]=r).init&&(r.init(e,o),t.push(n))}catch(Db){EC.pluginInitError(e,n,Db)}}},fp=function(e){return e.replace(/^\-/,"")},mp=function(e){return{editorContainer:e,iframeContainer:e}},pp=function(t){var n,i,o,r,a,s,g=t.settings,l=t.getElement();return t.rtl=g.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(g.language),g.aria_label=g.aria_label||hp.getAttrib(l,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),r=(i=t).settings.theme,k(r)?(i.settings.theme=fp(r),o=OC.get(r),i.theme=new o(i,OC.urls[r]),i.theme.init&&i.theme.init(i,OC.urls[r]||i.documentBaseUrl.replace(/\/$/,""),i.$)):i.theme={},s=[],Pt.each((a=t).settings.plugins.split(/[ ,]/),function(e){Ap(a,s,fp(e))}),n=function(e){var t,n,i,o,r,a,s,g,l,c,u,I=e.settings,d=e.getElement();return e.orgDisplay=d.style.display,k(I.theme)?(c=(o=e).settings,u=o.getElement(),r=c.width||hp.getStyle(u,"width")||"100%",a=c.height||hp.getStyle(u,"height")||u.offsetHeight,s=c.min_height||100,(g=/^[0-9\.]+(|px)$/i).test(""+r)&&(r=Math.max(parseInt(r,10),100)),g.test(""+a)&&(a=Math.max(parseInt(a,10),s)),l=o.theme.renderUI({targetNode:u,width:r,height:a,deltaWidth:c.delta_width,deltaHeight:c.delta_height}),c.content_editable||(a=(l.iframeHeight||a)+("number"==typeof a?l.deltaHeight||0:""))<s&&(a=s),l.height=a,l):W(I.theme)?(i=(t=e).getElement(),(n=t.settings.theme(t,i)).editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:i.offsetHeight,n):function(e){var t,n,i=e.getElement();return e.inline?mp(null):(t=i,n=hp.create("div"),hp.insertAfter(n,t),mp(n))}(e)}(t),t.editorContainer=n.editorContainer?n.editorContainer:null,g.content_css&&Pt.each(Pt.explode(g.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),g.content_editable?dp(t):function(t,n){var i=function(t,n){var i,o,r,a,s,g,l,c=t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),u=(i=t.id,o=c,r=n.height,a=function(e){return e.getParam("iframe_attrs",{})}(t),l=ai.fromTag("iframe"),Bi(l,a),Bi(l,{id:i+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),function(t,n){var i=l.dom();Ai(n,function(t,n){!function(t,n,i){if(!k(i))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",i,":: Element ",t),new Error("CSS value must be a string: "+i);mi(t)&&t.style.setProperty(n,i)}(i,n,t)})}(0,{width:"100%",height:(s=r,g="number"==typeof s?s+"px":s,g||""),display:"block"}),l).dom();u.onload=function(){u.onload=null,t.fire("load")};var I,d,C,h,A=function(t,n){if(e.document.domain!==e.window.location.hostname&&de.ie&&de.ie<12){var i=jC.uuid("mce");return t[i]=function(){dp(t)},Cp.setAttrib(n,"src",'javascript:(function(){document.open();document.domain="'+e.document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()"),!0}return!1}(t,u);return t.contentAreaContainer=n.iframeContainer,t.iframeElement=u,t.iframeHTML=(h=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(I=t)+"<html><head>",I.getParam("document_base_url","")!==I.documentBaseUrl&&(h+='<base href="'+I.documentBaseURI.getURI()+'" />'),h+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',d=Ml(I,"body_id","tinymce"),C=Ml(I,"body_class",""),_l(I)&&(h+='<meta http-equiv="Content-Security-Policy" content="'+_l(I)+'" />'),h+='</head><body id="'+d+'" class="mce-content-body '+C+'" data-id="'+I.id+'"><br></body></html>'),Cp.add(n.iframeContainer,u),A}(t,n);n.editorContainer&&(Cp.get(n.editorContainer).style.display=t.orgDisplay,t.hidden=Cp.isHidden(n.editorContainer)),t.getElement().style.display="none",Cp.setAttrib(t.id,"aria-hidden","true"),i||dp(t)}(t,n)},bp=mr.DOM,Bp=function(e){return"-"===e.charAt(0)},vp=Pt.each,yp=Pt.trim,xp="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Fp={ftp:21,http:80,https:443,mailto:25},Gp=function(t,n){var i,o,r=this;if(t=yp(t),i=(n=r.settings=n||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))r.source=t;else{var a=0===t.indexOf("//");0!==t.indexOf("/")||a||(t=(i&&i.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(o=n.base_uri?n.base_uri.path:new Gp(e.document.location.href).directory,""==n.base_uri.protocol?t="//mce_host"+r.toAbsPath(o,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(i&&i.protocol||"http")+"://mce_host"+r.toAbsPath(o,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),vp(xp,function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),r[e]=i}),i&&(r.protocol||(r.protocol=i.protocol),r.userInfo||(r.userInfo=i.userInfo),r.port||"mce_host"!==r.host||(r.port=i.port),r.host&&"mce_host"!==r.host||(r.host=i.host),r.source=""),a&&(r.protocol="")}};Gp.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new Gp(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),i=e.getURI();return n===i||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===i?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new Gp(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=Fp[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;i<o;i++)if(i>=n.length||e[i]!==n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;i<o;i++)if(i>=e.length||e[i]!==n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);i<o;i++)a+="../";for(i=r-1,o=n.length;i<o;i++)a+=i!==r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var n,i,o,r=0,a=[];for(i=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),vp(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<r?r--:a.push(t[n]):r++);return 0!==(o=(n=e.length-r)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},Gp.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},Gp.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var Qp=function(e,t){t(e),e.firstChild&&Qp(e.firstChild,t),e.next&&Qp(e.next,t)},wp=function(e){return e instanceof LA},Sp=function(e,t){var n;e.dom.setHTML(e.getBody(),t),BC(n=e)&&Vg.firstPositionIn(n.getBody()).each(function(e){var t=e.getNode(),i=Ro.isTable(t)?Vg.firstPositionIn(t).getOr(e):e;n.selection.setRng(i.toRange())})},Xp=mr.DOM,Zp=function(e){return Z.from(e).each(function(e){return e.destroy()})},Np=mr.DOM,kp=Pt.extend,Rp=Pt.each,Dp=Pt.resolve,Up=de.ie,Tp=function(e,t,n){var i,o,r=this,a=r.documentBaseUrl=n.documentBaseURL,s=n.baseURI;o={id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(i=r).convertURL,url_converter_scope:i,ie7_compat:!0},t=function(e,t,n,i){var o,r,a,s,g,l,c,u,I,d,C=function(e,t){var n,i,o,r=(n=function(t,n){return L(e,n)},i={},o={},Ai(t,function(e,t){(n(0,t)?i:o)[t]=e}),{t:i,f:o});return iC(r.t,r.f)}(["mobile"],i),h=Pt.extend(t,n,C.settings(),(u=e,d=(I=C).settings().inline,u&&gC(I,"mobile")&&!d?(s="mobile",g=aC,c=(l=C.sections()).hasOwnProperty(s)?l[s]:{},Pt.extend({},g,c)):{}),{validate:!0,content_editable:C.settings().inline,external_plugins:(o=n,r=C.settings(),a=r.external_plugins?r.external_plugins:{},o&&o.external_plugins?Pt.extend({},o.external_plugins,a):a)});return lC(e,C,n,h)}(oC,o,n.defaultSettings,t),r.settings=t,Gr.language=t.language||"en",Gr.languageLoad=t.language_load,Gr.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new Gp(t.document_base_url,{base_uri:s}),r.baseURI=s,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new hC(r),r.loadedCSS={},r.editorCommands=new Vd(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(de.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(de.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=An.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};kp(Tp.prototype={render:function(){!function(t){var n,i,o,r=t.settings,a=t.id,s=function(){bp.unbind(e.window,"ready",s),t.render()};if(Qe.Event.domLoaded){if(t.getElement()&&de.contentEditable){r.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var g=t.getElement().form||bp.getParent(a,"form");g&&(t.formElement=g,r.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(bp.insertAfter(bp.create("input",{type:"hidden",name:a}),a),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},bp.bind(g,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!r.submit_patch||g.submit.nodeType||g.submit.length||g._mceOldSubmit||(g._mceOldSubmit=g.submit,g.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),g._mceOldSubmit(g)})),t.windowManager=ZC(t),t.notificationManager=XC(t),"xml"===r.encoding&&t.on("GetContent",function(e){e.save&&(e.content=bp.encode(e.content))}),r.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),r.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),function(e,t,n,i){var o=t.settings,r=o.theme;if(k(r)){if(!Bp(r)&&!OC.urls.hasOwnProperty(r)){var a=o.theme_url;OC.load(r,a?t.documentBaseURI.toAbsolute(a):"themes/"+r+"/theme"+n+".js")}e.loadQueue(function(){OC.waitFor(r,i)})}else i()}(o=yr.ScriptLoader,n=t,i=t.suffix,function(){var e,t,r,a,s;e=o,(r=(t=n).settings).language&&"en"!==r.language&&!r.language_url&&(r.language_url=t.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&!t.editorManager.i18n.data[r.language]&&e.add(r.language_url),s=i,Pt.isArray((a=n.settings).plugins)&&(a.plugins=a.plugins.join(" ")),Pt.each(a.external_plugins,function(e,t){HC.load(t,e),a.plugins+=" "+t}),Pt.each(a.plugins.split(/[ ,]/),function(e){if((e=Pt.trim(e))&&!HC.urls[e])if(Bp(e)){e=e.substr(1,e.length);var t=HC.dependencies(e);Pt.each(t,function(e){e=HC.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"},e),HC.load(e.resource,e)})}else HC.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"})}),o.loadQueue(function(){n.removed||pp(n)},n,function(e){EC.pluginLoadError(n,e[0]),n.removed||pp(n)})})}}else bp.bind(e.window,"ready",s)}(this)},focus:function(e){!function(e,t){e.removed||(t?bC(e):function(e){var t=e.selection,n=e.settings.content_editable,i=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable();var r,a,s=(r=e,a=t.getNode(),r.dom.getParent(a,function(e){return"true"===r.dom.getContentEditable(e)}));if(e.$.contains(i,s))return mC(s),fC(e,o),bC(e);void 0!==e.bookmark&&!1===pC(e)&&Ud(e).each(function(t){e.selection.setRng(t),o=t}),n||(de.opera||mC(i),e.getWin().focus()),(de.gecko||n)&&(mC(i),fC(e,o)),bC(e)}(e))}(this,e)},hasFocus:function(){return BC(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=this.settings[e];if(o)return this.callbackLookup&&(i=this.callbackLookup[e])&&(o=i.func,i=i.scope),"string"==typeof o&&(i=(i=o.replace(/\.\w+$/,""))?Dp(i):0,o=Dp(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:i}),o.apply(i||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Pt.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,i){var o,r,a,s=t in e.settings?e.settings[t]:n;return"hash"===i?(a={},"string"==typeof(r=s)?M(0<r.indexOf("=")?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){var t=e.split("=");a[Pt.trim(t[0])]=Pt.trim(1<t.length?t[1]:t)}):a=r,a):"string"===i?cC(k,e,t).getOr(n):"number"===i?cC(E,e,t).getOr(n):"boolean"===i?cC(T,e,t).getOr(n):"object"===i?cC(R,e,t).getOr(n):"array"===i?cC(D,e,t).getOr(n):"string[]"===i?cC((o=k,function(e){return D(e)&&ee(e,o)}),e,t).getOr(n):"function"===i?cC(W,e,t).getOr(n):s}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var i=e.sidebars?e.sidebars:[];i.push({name:t,settings:n}),e.sidebars=i}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,i=this;i.contextToolbars=i.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return i.dom.is(e,n)}),i.contextToolbars.push({id:jC.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(Np.show(this.getContainer()),Np.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(Up&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Np.hide(e.getContainer()),Np.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,i=this,o=i.getElement();if(o&&i.initialized&&!i.removed)return(e=e||{}).save=!0,e.element=o,e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),"raw"===e.format&&i.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&i.inline||(o.innerHTML=t),(n=Np.getParent(i.id,"form"))&&Rp(n.elements,function(e){if(e.name===i.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&i.setDirty(!1),t},setContent:function(e,t){return n=this,o=e,void 0===(r=t)&&(r={}),r.format=r.format?r.format:"html",r.set=!0,r.content=wp(o)?"":o,wp(o)||r.no_events||(n.fire("BeforeSetContent",r),o=r.content),Z.from(n.getBody()).fold(i(o),function(e){return wp(o)?function(e,t,n,i){!function(e,t,n){var i=function(e,t,n){var i={},o={},r=[];for(var a in n.firstChild&&Qp(n.firstChild,function(n){M(e,function(e){e.name===n.name&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})}),M(t,function(e){"string"==typeof n.attr(e.name)&&(o[e.name]?o[e.name].nodes.push(n):o[e.name]={filter:e,nodes:[n]})})}),i)i.hasOwnProperty(a)&&r.push(i[a]);for(var a in o)o.hasOwnProperty(a)&&r.push(o[a]);return r}(e,t,n);M(i,function(e){M(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=El({validate:e.validate},e.schema).serialize(n);return i.content=vo(ai.fromDom(t))?o:Pt.trim(o),Sp(e,i.content),i.no_events||e.fire("SetContent",i),n}(n,e,o,r):(t=n,i=e,s=r,0===(a=o).length||/^\s+$/.test(a)?(l='<br data-mce-bogus="1">',"TABLE"===i.nodeName?a="<tr><td>"+l+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(a="<li>"+l+"</li>"),(g=Kl(t))&&t.schema.isValidChild(i.nodeName.toLowerCase(),g.toLowerCase())?a=t.dom.createHTML(g,t.settings.forced_root_block_attrs,a=l):a||(a='<br data-mce-bogus="1">'),Sp(t,a),t.fire("SetContent",s)):("raw"!==s.format&&(a=El({validate:t.validate},t.schema).serialize(t.parser.parse(a,{isRootContent:!0,insert:!0}))),s.content=vo(ai.fromDom(i))?a:Pt.trim(a),Sp(t,s.content),s.no_events||t.fire("SetContent",s)),s.content);var t,i,a,s,g,l});var n,o,r},getContent:function(e){return void 0===(n=e)&&(n={}),Z.from((t=this).getBody()).fold(i("tree"===n.format?new LA("body",11):""),function(e){return function(e,t,n){var i,o,r,a,s;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)i=Pt.trim(Eh(e.serializer,n.innerHTML));else if("text"===t.format)i=ua(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=(o=e).serializer.serialize(n,t),a=Kl(o),s=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+a+">[\r\n]*|<br \\/>[\r\n]*)$"),i=r.replace(s,"")}return t.content="text"===t.format||vo(ai.fromDom(n))?i:Pt.trim(i),t.no_events||e.fire("GetContent",t),t.content}(t,n,e)});var t,n},insertContent:function(e,t){t&&(e=kp({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){var t,n;(n=e)!==function(e){return e.readonly?"readonly":"design"}(t=this)&&(t.initialized?Pd(t,"readonly"===n):t.on("init",function(){Pd(t,"readonly"===n)}),function(e,t){e.fire("SwitchMode",{mode:n})}(t))},getContainer:function(){return this.container||(this.container=Np.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=Np.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var i=this.settings;return i.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,i=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=i.visual),Rp(o.select("table,a",e),function(e){var r;switch(e.nodeName){case"TABLE":return t=i.visual_table_class||"mce-item-table",void((r=o.getAttrib(e,"border"))&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=i.visual_anchor_class||"mce-item-anchor",r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,i=e.getBody(),o=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Xp.remove(o.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&i&&Xp.setStyle((r=e).id,"display",r.orgDisplay),function(e){e.fire("detach")}(e),Xp.remove(e.getContainer()),Zp(t),Zp(n),e.destroy()}var r}(this)},destroy:function(e){!function(e,t){var n,i,o,r=e.selection,a=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Zp(r),Zp(a)),(i=(n=e).formElement)&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,i._mceOldSubmit=null),Xp.unbind(i,"submit reset",n.formEventDelegate)),(o=e).contentAreaContainer=o.formElement=o.container=o.editorContainer=null,o.bodyElement=o.contentDocument=o.contentWindow=null,o.iframeElement=o.targetElm=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},nC);var Wp,Ep,Hp,Op={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},Lp=mr.DOM,Vp=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==Lp.getParent(t,function(t){return function(e){return Op.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)})},Yp=function(t,n){var i=n.editor;(function(t){var n,i,o,r=Dr(function(){Rd(t)},0);t.inline&&(n=t,i=r,mr.DOM.bind(e.document,"mouseup",o=function(){i.throttle()}),n.on("remove",function(){mr.DOM.unbind(e.document,"mouseup",o)})),t.on("init",function(){!function(e,t){var n,i;oi.detect().browser.isIE()?(i=e).on("focusout",function(){Rd(i)}):(n=t,e.on("mouseup touchend",function(e){n.throttle()})),e.on("keyup nodechange",function(t){var n;"nodechange"===(n=t).type&&n.selectionChange||Rd(e)})}(t,r)}),t.on("remove",function(){r.cancel()})})(i),i.on("focusin",function(){var e=t.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),t.setActive(this),(t.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))}),i.on("focusout",function(){var n=this;me.setEditorTimeout(n,function(){var i=t.focusedEditor;Vp(n,function(){try{return e.document.activeElement}catch(i){return e.document.body}}())||i!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Wp||Lp.bind(e.document,"focusin",Wp=function(n){var i,o=t.activeEditor;i=n.target,o&&i.ownerDocument===e.document&&(i===e.document.body||Vp(o,i)||t.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),t.focusedEditor=null))})},Mp=function(t,n){t.focusedEditor===n.editor&&(t.focusedEditor=null),t.activeEditor||(Lp.unbind(e.document,"focusin",Wp),Wp=null)},_p=mr.DOM,Kp=Pt.explode,zp=Pt.each,Jp=Pt.extend,Pp=0,jp=!1,$p=[],qp=[],eb=function(e){var t=e.type;zp(Hp.get(),function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}})},tb=function(e){e!==jp&&(e?An(window).on("resize scroll",eb):An(window).off("resize scroll",eb),jp=e)},nb=function(e){var t=qp;delete $p[e.id];for(var n=0;n<$p.length;n++)if($p[n]===e){$p.splice(n,1);break}return qp=K(qp,function(t){return e!==t}),Hp.activeEditor===e&&(Hp.activeEditor=0<qp.length?qp[0]:null),Hp.focusedEditor===e&&(Hp.focusedEditor=null),t.length!==qp.length};Jp(Hp={defaultSettings:{},$:An,majorVersion:"4",minorVersion:"9.6",releaseDate:"2019-09-02",editors:$p,i18n:RC,activeEditor:null,settings:{},setup:function(){var t,n,i,o,a="";if(n=Gp.getDocumentBaseUrl(e.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),i=window.tinymce||window.tinyMCEPreInit)t=i.base||i.baseURL,a=i.suffix;else{for(var s=e.document.getElementsByTagName("script"),g=0;g<s.length;g++){var l=(o=s[g].src).substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==l.indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}!t&&e.document.currentScript&&(-1!==(o=e.document.currentScript.src).indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new Gp(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new Gp(this.baseURL),this.suffix=a,function(e){e.on("AddEditor",r(Yp,e)),e.on("RemoveEditor",r(Mp,e))}(this)},overrideDefaults:function(e){var t;(t=e.base_url)&&(this.baseURL=new Gp(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Gp(this.baseURL)),e.suffix&&(this.suffix=e.suffix);var n=(this.defaultSettings=e).plugin_base_urls;for(var i in n)Gr.PluginManager.urls[i]=n[i]},init:function(t){var n,i,o=this;i=Pt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var r=function(e){var t=e.id;return t||(t=(t=e.name)&&!_p.get(t)?e.name:_p.uniqueId(),e.setAttribute("id",t)),t},a=function(e,t){return t.constructor===RegExp?t.test(e.className):_p.hasClass(e,t)},s=function(e){n=e},g=function(){var n,l=0,c=[],u=function(e,t,i){var r=new Tp(e,t,o);c.push(r),r.on("init",function(){++l===n.length&&s(c)}),r.targetElm=r.targetElm||i,r.render()};_p.unbind(window,"ready",g),function(e){var n=t.onpageload;n&&n.apply(o,Array.prototype.slice.call(arguments,2))}("onpageload"),n=An.unique(function(t){var n,i=[];if(de.ie&&de.ie<11)return EC.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return zp(t.types,function(e){i=i.concat(_p.select(e.selector))}),i;if(t.selector)return _p.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(n=t.elements||"").length&&zp(Kp(n),function(t){var n;(n=_p.get(t))?i.push(n):zp(e.document.forms,function(e){zp(e.elements,function(e){e.name===t&&(t="mce_editor_"+Pp++,_p.setAttrib(e,"id",t),i.push(e))})})});break;case"textareas":case"specific_textareas":zp(_p.select("textarea"),function(e){t.editor_deselector&&a(e,t.editor_deselector)||t.editor_selector&&!a(e,t.editor_selector)||i.push(e)})}return i}(t)),t.types?zp(t.types,function(e){Pt.each(n,function(n){return!_p.is(n,e.selector)||(u(r(n),Jp({},t,e),n),!1)})}):(Pt.each(n,function(e){var t;(t=o.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(nb(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(n=Pt.grep(n,function(e){return!o.get(e.id)})).length?s([]):zp(n,function(e){t.inline&&e.tagName.toLowerCase()in i?EC.initError("Could not initialize inline editor on invalid inline target element",e):u(r(e),t,e)}))};return o.settings=t,_p.bind(window,"ready",g),new Ce(function(e){n?e(n):s=function(t){e(t)}})},get:function(e){return 0===arguments.length?qp.slice(0):k(e)?J(qp,function(t){return t.id===e}).getOr(null):E(e)&&qp[e]?qp[e]:null},add:function(e){var t=this;return $p[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&($p[e.id]=e),$p.push(e),qp.push(e)),tb(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),Ep||(Ep=function(){t.fire("BeforeUnload")},_p.bind(window,"beforeunload",Ep))),e},createEditor:function(e,t){return this.add(new Tp(e,t,this))},remove:function(e){var t,n,i=this;if(e){if(!k(e))return U(i.get((n=e).id))?null:(nb(n)&&i.fire("RemoveEditor",{editor:n}),0===qp.length&&_p.unbind(window,"beforeunload",Ep),n.remove(),tb(0<qp.length),n);zp(_p.select(e),function(e){(n=i.get(e.id))&&i.remove(n)})}else for(t=qp.length-1;0<=t;t--)i.remove(qp[t])},execCommand:function(e,t,n){var i=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new Tp(n,this.settings,this).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?i.isHidden()?i.show():i.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){zp(qp,function(e){e.save()})},addI18n:function(e,t){RC.add(e,t)},translate:function(e){return RC.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},zd),Hp.setup();var ib,ob=Hp;function rb(e){return{walk:function(t,n){return Fl(e,t,n)},split:QI,normalize:function(t){return ud(e,t).fold(i(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}(ib=rb||(rb={})).compareRanges=od,ib.getCaretRangeFromPoint=hf,ib.getSelectedNode=Oa,ib.getNode=La;var ab,sb,gb=rb,lb=Math.min,cb=Math.max,ub=Math.round,Ib=function(e,t,n){var i,o,r,a,s,g;return i=t.x,o=t.y,r=e.w,a=e.h,s=t.w,g=t.h,"b"===(n=(n||"").split(""))[0]&&(o+=g),"r"===n[1]&&(i+=s),"c"===n[0]&&(o+=ub(g/2)),"c"===n[1]&&(i+=ub(s/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(i-=r),"c"===n[3]&&(o-=ub(a/2)),"c"===n[4]&&(i-=ub(r/2)),db(i,o,r,a)},db=function(e,t,n,i){return{x:e,y:t,w:n,h:i}},Cb={inflate:function(e,t,n){return db(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Ib,findBestRelativePosition:function(e,t,n,i){var o,r;for(r=0;r<i.length;r++)if((o=Ib(e,t,i[r])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return i[r];return null},intersect:function(e,t){var n,i,o,r;return n=cb(e.x,t.x),i=cb(e.y,t.y),o=lb(e.x+e.w,t.x+t.w),r=lb(e.y+e.h,t.y+t.h),o-n<0||r-i<0?null:db(n,i,o-n,r-i)},clamp:function(e,t,n){var i,o,r,a,s,g,l,c,u,I;return g=e.y,l=e.x+e.w,c=e.y+e.h,u=t.x+t.w,I=t.y+t.h,i=cb(0,t.x-(s=e.x)),o=cb(0,t.y-g),r=cb(0,l-u),a=cb(0,c-I),s+=i,g+=o,n&&(l+=i,c+=o,s-=r,g-=a),db(s,g,(l-=r)-s,(c-=a)-g)},create:db,fromClientRect:function(e){return db(e.left,e.top,e.width,e.height)}},hb={},Ab={add:function(e,t){hb[e.toLowerCase()]=t},has:function(e){return!!hb[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=hb.hasOwnProperty(t)?hb[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=hb[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},fb=Pt.each,mb=Pt.extend,pb=function(){};pb.extend=ab=function(e){var t,n,i,o=this.prototype,r=function(){var e,t,n;if(!sb&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},s=function(e,t){return function(){var n,i=this._super;return this._super=o[e],n=t.apply(this,arguments),this._super=i,n}};for(n in sb=!0,t=new this,sb=!1,e.Mixins&&(fb(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&fb(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&fb(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&fb(e.Statics,function(e,t){r[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=mb({},o.Defaults,e.Defaults)),e)t[n]="function"==typeof(i=e[n])&&o[n]?s(n,i):i;return r.prototype=t,(r.constructor=r).extend=ab,r};var bb=Math.min,Bb=Math.max,vb=Math.round,yb=function(e,t){var n,i,o,r;if(t=t||'"',null===e)return"null";if("string"==(o=typeof e))return i="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,o){return'"'===t&&"'"===e?e:(n=i.indexOf(o))+1?"\\"+i.charAt(n+1):(e=o.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===o){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,i="[";n<e.length;n++)i+=(0<n?",":"")+yb(e[n],t);return i+"]"}for(r in i="{",e)e.hasOwnProperty(r)&&(i+="function"!=typeof e[r]?(1<i.length?","+t:t)+r+t+":"+yb(e[r],t):"");return i+"}"}return""+e},xb={serialize:yb,parse:function(e){try{return JSON.parse(e)}catch(s){}}},Fb={callbacks:{},count:0,send:function(e){var t=this,n=mr.DOM,i=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+i;t.callbacks[i]=function(r){n.remove(o),delete t.callbacks[i],e.callback(r)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},Gb={send:function(e){var t,n=0,i=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",Gb.fire("beforeInitialize",{settings:e}),t=LC()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Pt.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Gb.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return i();setTimeout(i,10)}}};Pt.extend(Gb,zd);var Qb,wb,Sb,Xb,Zb=Pt.extend,Nb=function(e){this.settings=Zb({},e),this.count=0};Nb.sendRPC=function(e){return(new Nb).send(e)},Nb.prototype={send:function(e){var t=e.error,n=e.success;(e=Zb(this.settings,e)).success=function(i,o){void 0===(i=xb.parse(i))&&(i={error:"JSON Parse error."}),i.error?t.call(e.error_scope||e.scope,i.error,o):n.call(e.success_scope||e.scope,i.result)},e.error=function(n,i){t&&t.call(e.error_scope||e.scope,n,i)},e.data=xb.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",Gb.send(e)}};try{Qb=e.window.localStorage}catch(Db){wb={},Sb=[],Xb={getItem:function(e){return wb[e]||null},setItem:function(e,t){Sb.push(e),wb[e]=String(t)},key:function(e){return Sb[e]},removeItem:function(e){Sb=Sb.filter(function(t){return t===e}),delete wb[e]},clear:function(){Sb=[],wb={}},length:0},Object.defineProperty(Xb,"length",{get:function(){return Sb.length},configurable:!1,enumerable:!1}),Qb=Xb}var kb,Rb=Pt.extend(ob,{geom:{Rect:Cb},util:{Promise:Ce,Delay:me,Tools:Pt,VK:Sh,URI:Gp,Class:pb,EventDispatcher:Md,Observable:zd,I18n:RC,XHR:Gb,JSON:xb,JSONRequest:Nb,JSONP:Fb,LocalStorage:Qb,Color:function(e){var t={},n=0,i=0,o=0,r=function(e){var r;return"object"==typeof e?"r"in e?(n=e.r,i=e.g,o=e.b):"v"in e&&function(e,t,r){var a,s,g,l;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,r=parseInt(r,10)/100,t=Bb(0,bb(t,1)),r=Bb(0,bb(r,1)),0!==t){switch(a=e/60,g=(s=r*t)*(1-Math.abs(a%2-1)),l=r-s,Math.floor(a)){case 0:n=s,i=g,o=0;break;case 1:n=g,i=s,o=0;break;case 2:n=0,i=s,o=g;break;case 3:n=0,i=g,o=s;break;case 4:n=g,i=0,o=s;break;case 5:n=s,i=0,o=g;break;default:n=i=o=0}n=vb(255*(n+l)),i=vb(255*(i+l)),o=vb(255*(o+l))}else n=i=o=vb(255*r)}(e.h,e.s,e.v):(r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(r[1],10),i=parseInt(r[2],10),o=parseInt(r[3],10)):(r=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(r[1],16),i=parseInt(r[2],16),o=parseInt(r[3],16)):(r=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(r[1]+r[1],16),i=parseInt(r[2]+r[2],16),o=parseInt(r[3]+r[3],16)),n=n<0?0:255<n?255:n,i=i<0?0:255<i?255:i,o=o<0?0:255<o?255:o,t};return e&&r(e),t.toRgb=function(){return{r:n,g:i,b:o}},t.toHsv=function(){return e=n,t=i,r=o,s=0,(g=bb(e/=255,bb(t/=255,r/=255)))===(l=Bb(e,Bb(t,r)))?{h:0,s:0,v:100*(s=g)}:(a=(l-g)/l,{h:vb(60*((e===g?3:r===g?1:5)-(e===g?t-r:r===g?e-t:r-e)/((s=l)-g))),s:vb(100*a),v:vb(100*s)});var e,t,r,a,s,g,l},t.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(n)+e(i)+e(o)},t.parse=r,t}},dom:{EventUtils:Qe,Sizzle:Qt,DomQuery:An,TreeWalker:ao,DOMUtils:mr,ScriptLoader:yr,RangeUtils:gb,Serializer:rf,ControlSelection:If,BookmarkManager:lf,Selection:Df,Event:Qe.Event},html:{Styles:sr,Entities:zo,Node:LA,Schema:rr,SaxParser:Th,DomParser:qA,Writer:Wl,Serializer:El},ui:{Factory:Ab},Env:de,AddOnManager:Gr,Annotator:Xl,Formatter:NA,UndoManager:zh,EditorCommands:Vd,WindowManager:ZC,NotificationManager:XC,EditorObservable:nC,Shortcuts:hC,Editor:Tp,FocusManager:Op,EditorManager:ob,DOM:mr.DOM,ScriptLoader:yr.ScriptLoader,PluginManager:Gr.PluginManager,ThemeManager:Gr.ThemeManager,trim:Pt.trim,isArray:Pt.isArray,is:Pt.is,toArray:Pt.toArray,makeMap:Pt.makeMap,each:Pt.each,map:Pt.map,grep:Pt.grep,inArray:Pt.inArray,extend:Pt.extend,create:Pt.create,walk:Pt.walk,createNS:Pt.createNS,resolve:Pt.resolve,explode:Pt.explode,_addCacheSuffix:Pt._addCacheSuffix,isOpera:de.opera,isWebKit:de.webkit,isIE:de.ie,isGecko:de.gecko,isMac:de.mac});kb=Rb,window.tinymce=kb,window.tinyMCE=kb,function(e){if("object"==typeof module)try{module.exports=e}catch(s){}}(Rb)}(window),function(e){"use strict";var t,n,i,o,r,a=tinymce.util.Tools.resolve("tinymce.ThemeManager"),s=tinymce.util.Tools.resolve("tinymce.EditorManager"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e){return!1!==c(e)},c=function(e){return e.getParam("menubar")},u=function(e){return e.getParam("toolbar_items_size")},I=function(e){return e.getParam("menu")},d=function(e){return!1===e.settings.skin},C=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.ui.Factory"),f=tinymce.util.Tools.resolve("tinymce.util.I18n"),m=function(e){return e.fire("ResizeEditor")},p=function(e){return e.fire("BeforeRenderUI")},b=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},B=function(e,t){e.shortcuts.add("Alt+F9","",b(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",b(t,"toolbar")),e.shortcuts.add("Alt+F11","",b(t,"elementpath")),t.on("cancel",function(){e.focus()})},v=tinymce.util.Tools.resolve("tinymce.geom.Rect"),y=tinymce.util.Tools.resolve("tinymce.util.Delay"),x=function(){},F=function(e){return function(){return e}},G=F(!1),Q=F(!0),w=G,S=Q,X=function(){return Z},Z=(o={fold:function(e,t){return e()},is:w,isSome:w,isNone:S,getOr:i=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:i,orThunk:n,map:X,ap:X,each:function(){},bind:X,flatten:X,exists:w,forall:S,filter:X,equals:t=function(e){return e.isNone()},equals_:t,toArray:function(){return[]},toString:F("none()")},Object.freeze&&Object.freeze(o),o),N=function(e){var t=function(){return e},n=function(){return o},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:S,isNone:w,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return N(t(e))},ap:function(t){return t.fold(X,function(t){return N(t(e))})},each:function(t){t(e)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(e)?o:Z},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(w,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},k={some:N,none:X,from:function(e){return null==e?Z:N(e)}},R=function(e){return e?e.getRoot().uiContainer:null},D={getUiContainerDelta:function(e){var t=R(e);if(t&&"static"!==h.DOM.getStyle(t,"position",!0)){var n=h.DOM.getPos(t);return k.some({x:t.scrollLeft-n.x,y:t.scrollTop-n.y})}return k.none()},setUiContainer:function(e,t){var n=h.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},getUiContainer:R,inheritUiContainer:function(e,t){return t.uiContainer=R(e)}},U=function(e,t,n){var i,o=[];if(t)return g.each(t.split(/[ ,]/),function(t){var r=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||o.push(i={type:"buttongroup",items:[]}),e.buttons[t]&&("function"==typeof(t=e.buttons[t])&&(t=t()),t.type=t.type||"button",t.size=n,t=A.create(t),i.items.push(t),e.initialized?r():e.on("init",r)))}),{type:"toolbar",layout:"flow",items:o}},T=U,W=function(e,t){var n=[];if(g.each(function(e){var t=e.getParam("toolbar");return!1===t?[]:g.isArray(t)?g.grep(t,function(e){return e.length>0}):function(e,t){for(var n=[],i=1;i<10;i++){var o=e["toolbar"+i];if(!o)break;n.push(o)}return n.length>0?n:e.toolbar?[e.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"]}(e.settings)}(e),function(i){var o;(o=i)&&n.push(U(e,o,t))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},E=h.DOM,H=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},O=function(e,t){e.moveTo(t.left,t.top)},L=function(e,t,n,i,o,r){return r=H({x:t,y:n,w:r.w,h:r.h}),e&&(r=e({elementRect:H(i),contentAreaRect:H(o),panelRect:r})),r},V=function(e){var t,n=function(){return e.contextToolbars||[]},i=function(t,n){var i,o,r,a,s,l,c,u=function(e){return e.getParam("inline_toolbar_position_handler")}(e);if(!e.removed)if(t&&t.toolbar.panel){var I,d,C,h;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],s=t.toolbar.panel,n&&s.show(),I=t.element,d=E.getPos(e.getContentAreaContainer()),C=e.dom.getRect(I),"BODY"===(h=e.dom.getRoot()).nodeName&&(C.x-=h.ownerDocument.documentElement.scrollLeft||h.scrollLeft,C.y-=h.ownerDocument.documentElement.scrollTop||h.scrollTop),C.x+=d.x,C.y+=d.y,r=C,o=E.getRect(s.getEl()),a=E.getRect(e.getContentAreaContainer()||e.getBody());var A=D.getUiContainerDelta(s).getOr({x:0,y:0});if(r.x+=A.x,r.y+=A.y,o.x+=A.x,o.y+=A.y,a.x+=A.x,a.y+=A.y,"inline"!==E.getStyle(t.element,"display",!0)){var f=t.element.getBoundingClientRect();r.w=f.width,r.h=f.height}e.inline||(a.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&r.w<25&&(r=v.inflate(r,0,8)),i=v.findBestRelativePosition(o,r,a,c),r=v.clamp(r,a),i?(l=v.relativePosition(o,r,i),O(s,L(u,l.x,l.y,r,a,o))):(a.h+=o.h,(r=v.intersect(a,r))?(i=v.findBestRelativePosition(o,r,a,["bc-tc","bl-tl","br-tr"]))?(l=v.relativePosition(o,r,i),O(s,L(u,l.x,l.y,r,a,o))):O(s,L(u,r.x,r.y,r,a,o)):s.hide()),function(e,t,n){t=t?t.substr(0,2):"",g.each({t:"down",b:"up"},function(i,o){e.classes.toggle("arrow-"+i,n(o,t.substr(0,1)))}),g.each({l:"left",r:"right"},function(i,o){e.classes.toggle("arrow-"+i,n(o,t.substr(1,1)))})}(s,i,function(e,t){return e===t})}else!function(e){g.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})}(e)},o=function(t){return function(){y.requestAnimationFrame(function(){e.selection&&i(a(e.selection.getNode()),t)})}},r=function(){g.each(n(),function(e){e.panel&&e.panel.hide()})},a=function(t){var i,o,r,a=n();for(i=(r=e.$(t).parents().add(t)).length-1;i>=0;i--)for(o=a.length-1;o>=0;o--)if(a[o].predicate(r[i]))return{toolbar:a[o],element:r[i]};return null};e.on("click keyup setContent ObjectResized",function(n){("setcontent"!==n.type||n.selection)&&y.setEditorTimeout(e,function(){var n;(n=a(e.selection.getNode()))?(r(),function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void i(n);r=A.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:T(e,n.toolbar.items),oncancel:function(){e.focus()}}),D.setUiContainer(e,r),function(n){if(!t){var i=o(!0),r=D.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),E.bind(t,"scroll",i),E.bind(r,"scroll",i),e.on("remove",function(){E.unbind(t,"scroll",i),E.unbind(r,"scroll",i)})}}(r),n.toolbar.panel=r,r.renderTo().reflow(),i(n)}(n)):r()})}),e.on("blur hide contextmenu",r),e.on("ObjectResizeStart",function(){var t=a(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",function(){g.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+F9","",function(){var t=a(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},Y=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},M=Y("array"),_=Y("function"),K=Y("number"),z=(Array,void 0===(r=Array.prototype.indexOf)?function(e,t){return ee(e,t)}:function(e,t){return r.call(e,t)}),J=function(e,t){return q(e,t).isSome()},P=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o,e);return i},j=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n,e)},$=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r,i,e)&&n.push(r)}return n},q=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n,e))return k.some(n);return k.none()},ee=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return n;return-1},te=Array.prototype.push,ne=(_(Array.from)&&Array,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ie=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},oe=function(e){return e&&"|"===e.item.text},re=function(e,t,n,i){var o,r,a,s;return t?(r=t[i],s=!0):r=ne[i],r&&(o={text:r.title},a=[],g.each((r.items||"").split(/[ ,]/),function(t){var n=ie(t,e[t]);n&&a.push(n)}),s||g.each(e,function(e,t){e.context!==i||function(e,t){return q(e,function(e){return e.name===t}).isSome()}(a,t)||("before"===e.separator&&a.push({name:"|",item:{text:"|"}}),e.prependToContext?a.unshift(ie(t,e)):a.push(ie(t,e)),"after"===e.separator&&a.push({name:"|",item:{text:"|"}}))}),o.menu=P(function(e,t){var n=$(e,function(e){return!1===t.hasOwnProperty(e.name)}),i=$(n,function(e,t,n){return!oe(e)||!oe(n[t-1])});return $(i,function(e,t,n){return!oe(e)||t>0&&t<n.length-1})}(a,n),function(e){return e.item}),!o.menu.length)?null:o},ae=function(e){for(var t=[],n=function(e){var t,n=[],i=I(e);if(i)for(t in i)n.push(t);else for(t in ne)n.push(t);return n}(e),i=g.makeMap(function(e){return e.getParam("removed_menuitems","")}(e).split(/[ ,]/)),o=c(e),r="string"==typeof o?o.split(/[ ,]/):n,a=0;a<r.length;a++){var s=r[a],l=re(e.menuItems,I(e),i,s);l&&t.push(l)}return t},se=h.DOM,ge=function(e){return{width:e.clientWidth,height:e.clientHeight}},le=function(e,t,n){var i,o,r,a;i=e.getContainer(),o=e.getContentAreaContainer().firstChild,r=ge(i),a=ge(o),null!==t&&(t=Math.max(function(e){return e.getParam("min_width",100,"number")}(e),t),t=Math.min(function(e){return e.getParam("max_width",65535,"number")}(e),t),se.setStyle(i,"width",t+(r.width-a.width)),se.setStyle(o,"width",t)),n=Math.max(function(e){return e.getParam("min_height",100,"number")}(e),n),n=Math.min(function(e){return e.getParam("max_height",65535,"number")}(e),n),se.setStyle(o,"height",n),m(e)},ce=le,ue=tinymce.util.Tools.resolve("tinymce.Env"),Ie=function(e,t,n){var i,o=e.settings[n];o&&o((i=t.getEl("body"),{element:function(){return i}}))},de=function(e,t,n){return function(i){var o=i.control,r=o.parents().filter("panel")[0],a=r.find("#"+t)[0],s=function(e,t){return g.grep(e,function(e){return e.name===t})[0]}(n,t);!function(e,t,n){g.each(n,function(n){var i=t.items().filter("#"+n.name)[0];i&&i.visible()&&n.name!==e&&(Ie(n,i,"onhide"),i.visible(!1))})}(t,r,n),o.parent().items().each(function(e){e.active(!1)}),a&&a.visible()?(Ie(s,a,"onhide"),a.hide(),o.active(!1)):(a?(a.show(),Ie(s,a,"onshow")):(a=A.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),r.prepend(a),Ie(s,a,"onrender"),Ie(s,a,"onshow")),o.active(!0)),m(e)}},Ce=function(e){return!(ue.ie&&!(ue.ie>=11)||!e.sidebars)&&e.sidebars.length>0},he=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:g.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:de(e,t.name,e.sidebars)}})}]}},Ae=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},fe=h.DOM,me=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},pe=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[me("0"),he(e)]}},be=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Be=0,ve={id:function(){return"mceu_"+Be++},create:function(t,n,i){var o=e.document.createElement(t);return h.DOM.setAttribs(o,n),"string"==typeof i?o.innerHTML=i:g.each(i,function(e){e.nodeType&&o.appendChild(e)}),o},createFragment:function(e){return h.DOM.createFragment(e)},getWindowSize:function(){return h.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return h.DOM.getPos(e,t||ve.getContainer())},getContainer:function(){return ue.container?ue.container:e.document.body},getViewPort:function(e){return h.DOM.getViewPort(e)},get:function(t){return e.document.getElementById(t)},addClass:function(e,t){return h.DOM.addClass(e,t)},removeClass:function(e,t){return h.DOM.removeClass(e,t)},hasClass:function(e,t){return h.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return h.DOM.toggleClass(e,t,n)},css:function(e,t,n){return h.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return h.DOM.getStyle(e,t,!0)},on:function(e,t,n,i){return h.DOM.bind(e,t,n,i)},off:function(e,t,n){return h.DOM.unbind(e,t,n)},fire:function(e,t,n){return h.DOM.fire(e,t,n)},innerHtml:function(e,t){h.DOM.setHTML(e,t)}},ye=function(e){return"static"===ve.getRuntimeStyle(e,"position")},xe=function(e){return e.state.get("fixed")};function Fe(t,n,i){var o,r,a,s,g,l,c,u,I,d;return I=Ge(),a=(r=ve.getPos(n,D.getUiContainer(t))).x,s=r.y,xe(t)&&ye(e.document.body)&&(a-=I.x,s-=I.y),o=t.getEl(),g=(d=ve.getSize(o)).width,l=d.height,c=(d=ve.getSize(n)).width,u=d.height,"b"===(i=(i||"").split(""))[0]&&(s+=u),"r"===i[1]&&(a+=c),"c"===i[0]&&(s+=Math.round(u/2)),"c"===i[1]&&(a+=Math.round(c/2)),"b"===i[3]&&(s-=l),"r"===i[4]&&(a-=g),"c"===i[3]&&(s-=Math.round(l/2)),"c"===i[4]&&(a-=Math.round(g/2)),{x:a,y:s,w:g,h:l}}var Ge=function(){var t=e.window;return{x:Math.max(t.pageXOffset,e.document.body.scrollLeft,e.document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,e.document.body.scrollTop,e.document.documentElement.scrollTop),w:t.innerWidth||e.document.documentElement.clientWidth,h:t.innerHeight||e.document.documentElement.clientHeight}},Qe=function(e){var t=D.getUiContainer(e);return t&&!xe(e)?function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}}(t):Ge()},we={testMoveRel:function(e,t){for(var n=Qe(this),i=0;i<t.length;i++){var o=Fe(this,e,t[i]);if(xe(this)){if(o.x>0&&o.x+o.w<n.w&&o.y>0&&o.y+o.h<n.h)return t[i]}else if(o.x>n.x&&o.x+o.w<n.w+n.x&&o.y>n.y&&o.y+o.h<n.h+n.y)return t[i]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=Fe(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t&&(e=t-n)<0?0:e}if(this.settings.constrainToViewport){var i=Qe(this),o=this.layoutRect();e=n(e,i.w+i.x,o.w),t=n(t,i.h+i.y,o.h)}var r=D.getUiContainer(this);return r&&ye(r)&&!xe(this)&&(e-=r.scrollLeft,t-=r.scrollTop),r&&(e+=1,t+=1),this.state.get("rendered")?this.layoutRect({x:e,y:t}).repaint():(this.settings.x=e,this.settings.y=t),this.fire("move",{x:e,y:t}),this}},Se=tinymce.util.Tools.resolve("tinymce.util.Class"),Xe=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Ze=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Ne=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var i=n.getComputedStyle(e,null);return i?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),i.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function ke(){}function Re(e){this.cls=[],this.cls._map={},this.onchange=e||ke,this.prefix=""}g.extend(Re.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Re.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var De,Ue,Te,We=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Ee=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,He=/^\s*|\s*$/g,Oe=Se.extend({init:function(e){var t=this.match;function n(e,n,o){var r;function a(e){e&&n.push(e)}return a(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((r=We.exec(e.replace(He,"")))[1])),a(function(e){if(e)return function(t){return t._name===e}}(r[2])),a(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(r[3])),a(function(e,t,n){if(e)return function(i){var o=i[e]?i[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(r[4],r[5],r[6])),a(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=i(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(r[7])),n.pseudo=!!r[7],n.direct=o,n}function i(e,t){var o,r,a,s=[];do{if(Ee.exec(""),(r=Ee.exec(e))&&(e=r[3],s.push(r[1]),r[2])){o=r[3];break}}while(r);for(o&&i(o,t),e=[],a=0;a<s.length;a++)">"!==s[a]&&e.push(n(s[a],[],">"===s[a-1]));return t.push(e),t}this._selectors=i(e,[])},match:function(e,t){var n,i,o,r,a,s,g,l,c,u,I,d,C;for(n=0,i=(t=t||this._selectors).length;n<i;n++){for(C=e,d=0,o=(r=(a=t[n]).length)-1;o>=0;o--)for(l=a[o];C;){if(l.pseudo)for(c=u=(I=C.parent().items()).length;c--&&I[c]!==C;);for(s=0,g=l.length;s<g;s++)if(!l[s](C,c,u)){s=g+1;break}if(s===g){d++;break}if(o===r-1)break;C=C.parent()}if(d===r)return!0}return!1},find:function(e){var t,n,i=[],o=this._selectors;function r(e,t,n){var o,a,s,g,l,c=t[n];for(o=0,a=e.length;o<a;o++){for(l=e[o],s=0,g=c.length;s<g;s++)if(!c[s](l,o,a)){s=g+1;break}if(s===g)n===t.length-1?i.push(l):l.items&&r(l.items(),t,n+1);else if(c.direct)return;l.items&&r(l.items(),t,n)}}if(e.items){for(t=0,n=o.length;t<n;t++)r(e.items(),o[t],0);n>1&&(i=function(e){for(var t,n=[],i=e.length;i--;)(t=e[i]).__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(i))}return De||(De=Oe.Collection),new De(i)}}),Le=Array.prototype.push,Ve=Array.prototype.slice;Te={length:0,init:function(e){e&&this.add(e)},add:function(e){return g.isArray(e)?Le.apply(this,e):e instanceof Ue?this.add(e.toArray()):Le.call(this,e),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(e){var t,n,i,o,r=[];for("string"==typeof e?(e=new Oe(e),o=function(t){return e.match(t)}):o=e,t=0,n=this.length;t<n;t++)o(i=this[t])&&r.push(i);return new Ue(r)},slice:function(){return new Ue(Ve.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return g.each(this,e),this},toArray:function(){return g.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new Ue(g.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each(function(n){n[e]&&n[e](t)}),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(e){var t=g.toArray(arguments).slice(1);return this.each(function(n){n[e]&&n[e].apply(n,t)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},g.each("fire on off show hide append prepend before after reflow".split(" "),function(e){Te[e]=function(){var t=g.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),g.each("text name disabled active selected checked visible parent value data".split(" "),function(e){Te[e]=function(t){return this.prop(e,t)}}),Ue=Se.extend(Te),Oe.Collection=Ue;var Ye=Ue,Me=function(e){this.create=e.create};Me.create=function(e,t){return new Me({create:function(n,i){var o,r=function(e){n.set(i,e.value)};return n.on("change:"+i,function(n){e.set(t,n.value)}),e.on("change:"+t,r),(o=n._bindings)||(o=n._bindings=[],n.on("destroy",function(){for(var e=o.length;e--;)o[e]()})),o.push(function(){e.off("change:"+t,r)}),e.get(t)}})};var _e=tinymce.util.Tools.resolve("tinymce.util.Observable");function Ke(e){return e.nodeType>0}var ze,Je,Pe=Se.extend({Mixins:[_e],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof Me&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,i,o=this.data[e];if(t instanceof Me&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return function e(t,n){var i,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(g.isArray(n)){if(t.length!==n.length)return!1;for(i=t.length;i--;)if(!e(t[i],n[i]))return!1}if(Ke(t)||Ke(n))return t===n;for(i in o={},n){if(!e(t[i],n[i]))return!1;o[i]=!0}for(i in t)if(!o[i]&&!e(t[i],n[i]))return!1;return!0}(o,t)||(this.data[e]=t,this.fire("change:"+e,i={target:this,name:e,value:t,oldValue:o}),this.fire("change",i)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return Me.create(this,e)},destroy:function(){this.fire("destroy")}}),je={},$e={add:function(t){var n=t.parent();if(n){if(!n._layout||n._layout.isNative())return;je[n._id]||(je[n._id]=n),ze||(ze=!0,y.requestAnimationFrame(function(){var e,t;for(e in ze=!1,je)(t=je[e]).state.get("rendered")&&t.reflow();je={}},e.document.body))}},remove:function(e){je[e._id]&&delete je[e._id]}},qe="onmousewheel"in e.document,et=!1,tt=0,nt={Statics:{classPrefix:"mce-"},isRtl:function(){return Je.rtl},classPrefix:"mce-",init:function(e){var t,n,i=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}i.settings=e=g.extend({},i.Defaults,e),i._id=e.id||"mceu_"+tt++,i._aria={role:e.role},i._elmCache={},i.$=be,i.state=new Pe({visible:!0,active:!1,disabled:!1,value:""}),i.data=new Pe(e.data),i.classes=new Re(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(t=e.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&t!==n&&o(n),o(t)),g.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=e,i.borderBox=Ze(e.border),i.paddingBox=Ze(e.padding),i.marginBox=Ze(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){return D.getUiContainer(this)||ve.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,i,o,r,a,s,g,l,c=this.settings,u=this.getEl();e=this.borderBox=this.borderBox||Ne(u,"border"),this.paddingBox=this.paddingBox||Ne(u,"padding"),this.marginBox=this.marginBox||Ne(u,"margin"),l=ve.getSize(u),o=(s=c.minWidth)||l.width,r=(g=c.minHeight)||l.height,n=c.width,i=c.height,a=void 0!==(a=c.autoResize)?a:!n&&!i;var I=e.left+e.right,d=e.top+e.bottom,C=c.maxWidth||65535,h=c.maxHeight||65535;return this._layoutRect=t={x:c.x||0,y:c.y||0,w:n=n||o,h:i=i||r,deltaW:I,deltaH:d,contentW:n-I,contentH:i-d,innerW:n-I,innerH:i-d,startMinWidth:s||0,startMinHeight:g||0,minW:Math.min(o,C),minH:Math.min(r,h),maxW:C,maxH:h,autoResize:a,scrollW:0},this._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,o,r,a=this._layoutRect;return a||(a=this.initLayoutRect()),e?(i=a.deltaW,o=a.deltaH,void 0!==e.x&&(a.x=e.x),void 0!==e.y&&(a.y=e.y),void 0!==e.minW&&(a.minW=e.minW),void 0!==e.minH&&(a.minH=e.minH),void 0!==(n=e.w)&&(a.w=n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.innerW=n-i),void 0!==(n=e.h)&&(a.h=n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.innerH=n-o),void 0!==(n=e.innerW)&&(a.innerW=n=(n=n<a.minW-i?a.minW-i:n)>a.maxW-i?a.maxW-i:n,a.w=n+i),void 0!==(n=e.innerH)&&(a.innerH=n=(n=n<a.minH-o?a.minH-o:n)>a.maxH-o?a.maxH-o:n,a.h=n+o),void 0!==e.contentW&&(a.contentW=e.contentW),void 0!==e.contentH&&(a.contentH=e.contentH),(t=this._lastLayoutRect).x===a.x&&t.y===a.y&&t.w===a.w&&t.h===a.h||((r=Je.repaintControls)&&r.map&&!r.map[this._id]&&(r.push(this),r.map[this._id]=!0),t.x=a.x,t.y=a.y,t.w=a.w,t.h=a.h),this):a},repaint:function(){var t,n,i,o,r,a,s,g,l,c;l=e.document.createRange?function(e){return e}:Math.round,t=this.getEl().style,a=(r=this.borderBox).left+r.right,s=r.top+r.bottom,(o=this._layoutRect).x!==(g=this._lastRepaintRect||{}).x&&(t.left=l(o.x)+"px",g.x=o.x),o.y!==g.y&&(t.top=l(o.y)+"px",g.y=o.y),o.w!==g.w&&(c=l(o.w-a),t.width=(c>=0?c:0)+"px",g.w=o.w),o.h!==g.h&&(c=l(o.h-s),t.height=(c>=0?c:0)+"px",g.h=o.h),this._hasBody&&o.innerW!==g.innerW&&(c=l(o.innerW),(i=this.getEl("body"))&&((n=i.style).width=(c>=0?c:0)+"px"),g.innerW=o.innerW),this._hasBody&&o.innerH!==g.innerH&&(c=l(o.innerH),(i=i||this.getEl("body"))&&((n=n||i.style).height=(c>=0?c:0)+"px"),g.innerH=o.innerH),this._lastRepaintRect=g,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,ve.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n=this;return it(n).on(e,function(e){var t,i;return"string"!=typeof e?e:function(o){return t||n.parentsAndSelf().each(function(n){var o=n.settings.callbacks;if(o&&(t=o[e]))return i=n,!1}),t?t.call(i,o):(o.action=e,void this.fire("execute",o))}}(t)),n},off:function(e,t){return it(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=it(this).fire(e,t),!1!==n&&this.parent)for(var i=this.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return it(this).has(e)},parents:function(e){var t,n=new Ye;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new Ye(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=be("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"===e?e:"aria-"+e,t),this)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return Je.translate?Je.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,t,n=this,i=n.getEl(),o=n.parent();if(n.items){var r=n.items().toArray();for(t=r.length;t--;)r[t].remove()}o&&o.items&&(e=[],o.items().each(function(t){t!==n&&e.push(t)}),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&be(i).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return be(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return be(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,i,o,r=this,a=r.settings;for(i in r.$el=be(r.getEl()),r.state.set("rendered",!0),a)0===i.indexOf("on")&&r.on(i.substr(2),a[i]);if(r._eventsRoot){for(n=r.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(i in o._nativeEvents)r._nativeEvents[i]=!0}ot(r),a.style&&(e=r.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),r.settings.border&&r.$el.css({"border-top-width":(t=r.borderBox).top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left});var s=r.getRoot();for(var g in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[r._id]=r,r._aria)r.aria(g,r._aria[g]);!1===r.state.get("visible")&&(r.getEl().style.display="none"),r.bindStates(),r.state.on("change:visible",function(e){var t,n=e.value;r.state.get("rendered")&&(r.getEl().style.display=!1===n?"none":"",r.getEl().getBoundingClientRect()),(t=r.parent())&&(t._lastRect=null),r.fire(n?"show":"hide"),$e.add(r)}),r.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,i,o,r,a,s=this.getEl(),g=s.parentNode,l=function(e,t){var n,i,o=e;for(n=i=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:i}}(s,g);return t=l.x,n=l.y,i=s.offsetWidth,o=s.offsetHeight,r=g.clientWidth,a=g.clientHeight,"end"===e?(t-=r-i,n-=a-o):"center"===e&&(t-=r/2-i/2,n-=a/2-o/2),g.scrollLeft=t,g.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){$e.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function it(e){return e._eventDispatcher||(e._eventDispatcher=new Xe({scope:e,toggleEvent:function(t,n){n&&Xe.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&ot(e))}})),e._eventDispatcher}function ot(e){var t,n,i,o,r,a;function s(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function g(){var e=o._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),o._lastHoverCtrl=null)}function l(t){var n,i,r,a=e.getParentCtrl(t.target),s=o._lastHoverCtrl,g=0;if(a!==s){if(o._lastHoverCtrl=a,(i=a.parents().toArray().reverse()).push(a),s){for((r=s.parents().toArray().reverse()).push(s),g=0;g<r.length&&i[g]===r[g];g++);for(n=r.length-1;n>=g;n--)(s=r[n]).fire("mouseleave",{target:s.getEl()})}for(n=g;n<i.length;n++)(a=i[n]).fire("mouseenter",{target:a.getEl()})}}function c(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(r=e._nativeEvents){for((i=e.parents().toArray()).unshift(e),t=0,n=i.length;!o&&t<n;t++)o=i[t]._eventsRoot;for(o||(o=i[i.length-1]||e),e._eventsRoot=o,n=t,t=0;t<n;t++)i[t]._eventsRoot=o;var u=o._delegates;for(a in u||(u=o._delegates={}),r){if(!r)return!1;"wheel"!==a||et?("mouseenter"===a||"mouseleave"===a?o._hasMouseEnter||(be(o.getEl()).on("mouseleave",g).on("mouseover",l),o._hasMouseEnter=1):u[a]||(be(o.getEl()).on(a,s),u[a]=!0),r[a]=!1):qe?be(e.getEl()).on("mousewheel",c):be(e.getEl()).on("DOMMouseScroll",c)}}}g.each("text title visible disabled active value".split(" "),function(e){nt[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}});var rt=Je=Se.extend(nt),at=function(e){return!!e.getAttribute("data-mce-tabstop")};function st(t){var n,i,o=t.root;function r(e){return e&&1===e.nodeType}try{n=e.document.activeElement}catch(b){n=e.document.body}function a(e){return r(e=e||n)?e.getAttribute("role"):null}function s(e){for(var t,i=e||n;i=i.parentNode;)if(t=a(i))return t}function g(e){var t=n;if(r(t))return t.getAttribute("aria-"+e)}function l(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function c(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(e){return!(!l(e)||e.hidden)||!!at(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(e))})(n)&&t.push(n);for(var i=0;i<n.childNodes.length;i++)e(n.childNodes[i])}}(e||o.getEl()),t}function u(e){var t,n;(n=(e=e||i).parents().toArray()).unshift(e);for(var o=0;o<n.length&&!(t=n[o]).settings.ariaRoot;o++);return t}function I(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var i=-1,o=u();t=t||c(o.getEl());for(var r=0;r<t.length;r++)t[r]===n&&(i=r);o.lastAriaIndex=I(i+=e,t)}function C(){"tablist"===s()?d(-1,c(n.parentNode)):i.parent().submenu?m():d(-1)}function h(){var e=a(),t=s();"tablist"===t?d(1,c(n.parentNode)):"menuitem"===e&&"menu"===t&&g("haspopup")?p():d(1)}function A(){d(-1)}function f(){var e=a(),t=s();"menuitem"===e&&"menubar"===t?p():"button"===e&&g("haspopup")?p({key:"down"}):d(1)}function m(){i.fire("cancel")}function p(e){i.fire("click",{target:n,aria:e=e||{}})}return i=o.getParentCtrl(n),o.on("keydown",function(e){function t(e,t){l(n)||at(n)||"slider"!==a(n)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,C);break;case 39:t(e,h);break;case 38:t(e,A);break;case 40:t(e,f);break;case 27:m();break;case 14:case 13:case 32:t(e,p);break;case 9:!function(e){if("tablist"===s()){var t=c(i.getEl("body"))[0];t&&t.focus()}else d(e.shiftKey?-1:1)}(e),e.preventDefault()}}),o.on("focusin",function(e){n=e.target,i=e.control}),{focusFirst:function(e){var t=u(e),n=c(t.getEl());I(t.settings.ariaRemember&&"lastAriaIndex"in t?t.lastAriaIndex:0,n)}}}var gt={},lt=rt.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Ye,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Re(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=A.create((e.layout||"")+"layout"),t.add(t.settings.items?t.settings.items:t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=gt[e]=gt[e]||new Oe(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,i;if(!e||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return i=this.find("*"),this.statusbar&&i.add(this.statusbar.items()),i.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),this;n.focusFirst(this)},replace:function(e,t){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===e){i[o]=t;break}o>=0&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,i=[];return g.isArray(e)||(e=[e]),g.each(e,function(e){e&&(e instanceof rt||("string"==typeof e&&(e={type:e}),t=g.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=A.create(t)),i.push(e))}),i},renderNew:function(){var e=this;return e.items().each(function(t,n){var i;t.parent(e),t.state.get("rendered")||((i=e.getEl("body")).hasChildNodes()&&n<=i.childNodes.length-1?be(i.childNodes[n]).before(t.renderHtml()):be(i).append(t.renderHtml()),t.postRender(),$e.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var i,o,r;return e=this.create(e),i=this.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(o=i.slice(0,t).toArray(),r=i.slice(t).toArray(),i.set(o.concat(e,r))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each(function(t){var n=t.name(),i=t.value();n&&void 0!==i&&(e[n]=i)}),e},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&this.$el.css({"border-top-width":(e=this.borderBox).top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}),this.parent()||(this.keyboardNav=st({root:this})),this},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;if(!t||t.w!==e.w||t.h!==e.h)return this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if($e.remove(this),this.visible()){for(rt.repaintControls=[],rt.repaintControls.map={},this.recalc(),e=rt.repaintControls.length;e--;)rt.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),rt.repaintControls=[]}return this}});function ct(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function ut(t,n){var i,o,r,a,s,g,l,c=n.document||e.document,u=c.getElementById((n=n||{}).handle||t);r=function(t){var r,I,d=function(e){var t,n,i,o,r,a,s,g=Math.max;return i=g((t=e.documentElement).scrollWidth,(n=e.body).scrollWidth),o=g(t.clientWidth,n.clientWidth),r=g(t.offsetWidth,n.offsetWidth),a=g(t.scrollHeight,n.scrollHeight),s=g(t.clientHeight,n.clientHeight),{width:i<r?o:i,height:a<g(t.offsetHeight,n.offsetHeight)?s:a}}(c);ct(t),t.preventDefault(),o=t.button,r=u,g=t.screenX,l=t.screenY,I=e.window.getComputedStyle?e.window.getComputedStyle(r,null).getPropertyValue("cursor"):r.runtimeStyle.cursor,i=be("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:I}).appendTo(c.body),be(c).on("mousemove touchmove",s).on("mouseup touchend",a),n.start(t)},s=function(e){if(ct(e),e.button!==o)return a(e);e.deltaX=e.screenX-g,e.deltaY=e.screenY-l,e.preventDefault(),n.drag(e)},a=function(e){ct(e),be(c).off("mousemove touchmove",s).off("mouseup touchend",a),i.remove(),n.stop&&n.stop(e)},this.destroy=function(){be(u).off()},be(u).on("mousedown touchstart",r)}var It,dt,Ct,ht,At={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this,t=2;function n(){var n,i,o;function r(o,r,a,s,g,l){var c,u,I,d,C,h,A,f;if(u=e.getEl("scroll"+o)){if(A=r.toLowerCase(),f=a.toLowerCase(),be(e.getEl("absend")).css(A,e.layoutRect()[s]-1),!g)return void be(u).css("display","none");be(u).css("display","block"),c=e.getEl("body"),I=e.getEl("scroll"+o+"t"),d=c["client"+a]-2*t,C=(d-=n&&i?u["client"+l]:0)/c["scroll"+a],(h={})[A]=c["offset"+r]+t,h[f]=d,be(u).css(h),(h={})[A]=c["scroll"+r]*C,h[f]=d*C,be(I).css(h)}}o=e.getEl("body"),i=o.scrollHeight>o.clientHeight,r("h","Left","Width","contentW",n=o.scrollWidth>o.clientWidth,"Height"),r("v","Top","Height","contentH",i,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function n(n,i,o,r,a){var s,g=e._id+"-scroll"+n,l=e.classPrefix;be(e.getEl()).append('<div id="'+g+'" class="'+l+"scrollbar "+l+"scrollbar-"+n+'"><div id="'+g+'t" class="'+l+'scrollbar-thumb"></div></div>'),e.draghelper=new ut(g+"t",{start:function(){s=e.getEl("body")["scroll"+i],be("#"+g).addClass(l+"active")},drag:function(g){var l,c,u,I,d=e.layoutRect();c=d.contentW>d.innerW,u=d.contentH>d.innerH,I=e.getEl("body")["client"+o]-2*t,l=(I-=c&&u?e.getEl("scroll"+n)["client"+a]:0)/e.getEl("body")["scroll"+o],e.getEl("body")["scroll"+i]=s+g["delta"+r]/l},stop:function(){be("#"+g).removeClass(l+"active")}})}e.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),e.on("wheel",function(t){var i=e.getEl("body");i.scrollLeft+=10*(t.deltaX||0),i.scrollTop+=10*t.deltaY,n()}),be(e.getEl("body")).on("scroll",n)),n())}},ft=lt.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[At],renderHtml:function(){var e=this._layout,t=this.settings.html;return this.preRender(),e.preRender(this),void 0===t?t='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+e.renderHtml(this)+"</div>":("function"==typeof t&&(t=t.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+t+"</div>"}}),mt={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=ve.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},pt=[],bt=[];function Bt(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function vt(e){var t=ve.getViewPort().y;function n(t,n){for(var i,o=0;o<pt.length;o++)if(pt[o]!==e)for(i=pt[o].parent();i&&(i=i.parent());)i===e&&pt[o].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function yt(e,t){var n,i,o=xt.zIndex||65535;if(e)bt.push(t);else for(n=bt.length;n--;)bt[n]===t&&bt.splice(n,1);if(bt.length)for(n=0;n<bt.length;n++)bt[n].modal&&(o++,i=bt[n]),bt[n].getEl().style.zIndex=o,bt[n].zIndex=o,o++;var r=be("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];i?be(r).css("z-index",i.zIndex-1):r&&(r.parentNode.removeChild(r),ht=!1),xt.currentZIndex=o}var xt=ft.extend({Mixins:[we,mt],init:function(t){var n=this;n._super(t),n._eventsRoot=n,n.classes.add("floatpanel"),t.autohide&&(It||(It=function(e){2!==e.button&&function(e){for(var t=pt.length;t--;){var n=pt[t],i=n.getParentCtrl(e.target);if(n.settings.autohide){if(i&&(Bt(i,n)||n.parent()===i))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},be(e.document).on("click touchstart",It)),function(){if(!Ct){var t=e.document.documentElement,n=t.clientWidth,i=t.clientHeight;Ct=function(){e.document.all&&n===t.clientWidth&&i===t.clientHeight||(n=t.clientWidth,i=t.clientHeight,xt.hideAll())},be(e.window).on("resize",Ct)}}(),pt.push(n)),t.autofix&&(dt||(dt=function(){var e;for(e=pt.length;e--;)vt(pt[e])},be(e.window).on("scroll",dt)),n.on("move",function(){vt(this)})),n.on("postrender show",function(e){if(e.control===n){var t,i=n.classPrefix;n.modal&&!ht&&((t=be("#"+i+"modal-block",n.getContainerElm()))[0]||(t=be('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(n.getContainerElm())),y.setTimeout(function(){t.addClass(i+"in"),be(n.getEl()).addClass(i+"in")}),ht=!0),yt(!0,n)}}),n.on("show",function(){n.parents().each(function(e){if(e.state.get("fixed"))return n.fixed(!0),!1})}),t.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.classes.add("popover").add("bottom").add(n.isRtl()?"end":"start")),n.aria("label",t.ariaLabel),n.aria("labelledby",n._id),n.aria("describedby",n.describedBy||n._id+"-none")},fixed:function(e){if(this.state.get("fixed")!==e){if(this.state.get("rendered")){var t=ve.getViewPort();e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y}this.classes.toggle("fixed",e),this.state.set("fixed",e)}return this},show:function(){var e,t=this._super();for(e=pt.length;e--&&pt[e]!==this;);return-1===e&&pt.push(this),t},hide:function(){return Ft(this),yt(!1,this),this._super()},hideAll:function(){xt.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),yt(!1,this)),this},remove:function(){Ft(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function Ft(e){var t;for(t=pt.length;t--;)pt[t]===e&&pt.splice(t,1);for(t=bt.length;t--;)bt[t]===e&&bt.splice(t,1)}xt.hideAll=function(){for(var e=pt.length;e--;){var t=pt[e];t&&t.settings.autohide&&(t.hide(),pt.splice(e,1))}};var Gt=function(e,t){return!(!e||t.settings.ui_container)};function Qt(e,t){var n,i,o=this,r=rt.classPrefix;o.show=function(a,s){function g(){n&&(be(e).append('<div class="'+r+"throbber"+(t?" "+r+"throbber-inline":"")+'"></div>'),s&&s())}return o.hide(),n=!0,a?i=y.setTimeout(g,a):g(),o},o.hide=function(){var t=e.lastChild;return y.clearTimeout(i),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}var wt=rt.extend({Mixins:[we],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t;(e=this.getEl().style).left=(t=this._layoutRect).x+"px",e.top=t.y+"px",e.zIndex=131070}}),St=rt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==St.tooltips&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control===t){var o=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"===o),i.classes.toggle("tooltip-nw","bc-tl"===o),i.classes.toggle("tooltip-ne","bc-tr"===o),i.moveRel(t.getEl(),o)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new wt({type:"tooltip"}),D.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",function(e){t(e.value)}),e.state.on("change:active",function(e){n(e.value)}),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Xt=St.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",function(e){t(e.value)}),t(e.state.get("value")),e._super()}}),Zt=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Nt=rt.extend({Mixins:[we],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Xt),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this.classPrefix,n="",i="",o="";return this.icon&&(n='<i class="'+t+"ico "+t+"i-"+this.icon+'"></i>'),e=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(i='<button type="button" class="'+t+'close" aria-hidden="true">\xd7</button>'),this.progressBar&&(o=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+e+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+this.state.get("text")+"</div>"+o+i+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return y.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Zt(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,Zt(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){Zt(e,e.state.get("text"))})),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;(e=this.getEl().style).left=(t=this._layoutRect).x+"px",e.top=t.y+"px",e.zIndex=65534}}),kt=[],Rt="";function Dt(t){var n,i=be("meta[name=viewport]")[0];!1!==ue.overrideViewPort&&(i||((i=e.document.createElement("meta")).setAttribute("name","viewport"),e.document.getElementsByTagName("head")[0].appendChild(i)),(n=i.getAttribute("content"))&&void 0!==Rt&&(Rt=n),i.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Rt))}var Ut=xt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new ft({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(ve.hasClass(e.target,n)||ve.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&xt.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,i,o=this.statusbar;this._fullscreen&&(this.layoutRect(ve.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),e=this.layoutRect(),this.settings.title&&!this._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),this.layoutRect({w:t,x:n}),i=!0),o&&(o.layoutRect({w:this.layoutRect().innerW}).recalc(),(t=o.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),this.layoutRect({w:t,x:n}),i=!0)),i&&this.recalc()},initLayoutRect:function(){var e,t=this._super(),n=0;if(this.settings.title&&!this._fullscreen){e=this.getEl("head");var i=ve.getSize(e);t.headerW=i.width,t.headerH=i.height,n+=t.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n;var o=ve.getWindowSize();return t.x=this.settings.x||Math.max(0,o.w/2-t.w/2),t.y=this.settings.y||Math.max(0,o.h/2-t.h/2),t},renderHtml:function(){var e=this._layout,t=this._id,n=this.classPrefix,i=this.settings,o="",r="",a=i.html;return this.preRender(),e.preRender(this),i.title&&(o='<div id="'+t+'-head" class="'+n+'window-head"><div id="'+t+'-title" class="'+n+'title">'+this.encode(i.title)+'</div><div id="'+t+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),i.url&&(a='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=e.renderHtml(this)),this.statusbar&&(r=this.statusbar.renderHtml()),'<div id="'+t+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+o+'<div id="'+t+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+r+"</div></div>"},fullscreen:function(t){var n,i,o=this,r=e.document.documentElement,a=o.classPrefix;if(t!==o._fullscreen)if(be(e.window).on("resize",function(){var e;if(o._fullscreen)if(n)o._timer||(o._timer=y.setTimeout(function(){var e=ve.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0},50));else{e=(new Date).getTime();var t=ve.getWindowSize();o.moveTo(0,0).resizeTo(t.w,t.h),(new Date).getTime()-e>50&&(n=!0)}}),i=o.layoutRect(),o._fullscreen=t,t){o._initial={x:i.x,y:i.y,w:i.w,h:i.h},o.borderBox=Ze("0"),o.getEl("head").style.display="none",i.deltaH-=i.headerH+2,be([r,e.document.body]).addClass(a+"fullscreen"),o.classes.add("fullscreen");var s=ve.getWindowSize();o.moveTo(0,0).resizeTo(s.w,s.h)}else o.borderBox=Ze(o.settings.border),o.getEl("head").style.display="",i.deltaH+=i.headerH,be([r,e.document.body]).removeClass(a+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new ut(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),kt.push(t),Dt(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),n=this.classPrefix,!1,function(){for(var e=0;e<kt.length;e++)if(kt[e]._fullscreen)return!0;return!1}()&&be([e.document.documentElement,e.document.body]).removeClass(n+"fullscreen"),t=kt.length;t--;)kt[t]===this&&kt.splice(t,1);Dt(kt.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!ue.desktop){var t={w:e.window.innerWidth,h:e.window.innerHeight};y.setInterval(function(){var n=e.window.innerWidth,i=e.window.innerHeight;t.w===n&&t.h===i||(t={w:n,h:i},be(e.window).trigger("resize"))},100)}be(e.window).on("resize",function(){var e,t,n=ve.getWindowSize();for(e=0;e<kt.length;e++)t=kt[e].layoutRect(),kt[e].moveTo(kt[e].settings.x||Math.max(0,n.w/2-t.w/2),kt[e].settings.y||Math.max(0,n.h/2-t.h/2))})}();var Tt,Wt,Et,Ht=Ut.extend({init:function(e){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var n,i=t.callback||function(){};function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}switch(t.buttons){case Ht.OK_CANCEL:n=[o("Ok",!0,!0),o("Cancel",!1)];break;case Ht.YES_NO:case Ht.YES_NO_CANCEL:n=[o("Yes",1,!0),o("No",0)],t.buttons===Ht.YES_NO_CANCEL&&n.push(o("Cancel",-1));break;default:n=[o("Ok",!0,!0)]}return new Ut({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){i(!1)}}).renderTo(e.document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Ht.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Ht.OK_CANCEL,Ht.msgBox(e)}}}),Ot=function(t){return{renderUI:function(e){return function(e,t,n){var i=function(e){var t=e.settings,n=t.skin,i=t.skin_url;if(!1!==n){var o=n||"lightgray";i=i?e.documentBaseURI.toAbsolute(i):s.baseURL+"/skins/"+o}return i}(e);return i&&(n.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")),function(e,t){var n;e.on("ProgressState",function(e){n=n||new Qt(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})}(e,t),function(e){return e.getParam("inline",!1,"boolean")}(e)?function(e,t,n){var i,o,r=h.DOM,a=function(e){return e.getParam("fixed_toolbar_container")}(e);a&&(o=r.select(a)[0]);var s=function(){if(i&&i.moveRel&&i.visible()&&!i._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,a=0;if(t){var s=r.getPos(n),g=r.getPos(t);o=Math.max(0,g.x-s.x),a=Math.max(0,g.y-s.y)}i.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,a)}},g=function(){i&&(i.show(),s(),r.addClass(e.getBody(),"mce-edit-focus"))},c=function(){i&&(i.hide(),xt.hideAll(),r.removeClass(e.getBody(),"mce-edit-focus"))},I=function(){i?i.visible()||g():(i=t.panel=A.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:Gt(o,e),border:1,items:[!1===l(e)?null:{type:"menubar",border:"0 0 1 0",items:ae(e)},W(e,u(e))]}),D.setUiContainer(e,i),p(e),o?i.renderTo(o).reflow():i.renderTo().reflow(),B(e,i),g(),V(e),e.on("nodeChange",s),e.on("ResizeWindow",s),e.on("activate",g),e.on("deactivate",c),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",function(){!1===d(e)&&n.skinUiCss?r.styleSheetLoader.load(n.skinUiCss,I,I):I()}),e.on("blur hide",c),e.on("remove",function(){i&&(i.remove(),i=null)}),!1===d(e)&&n.skinUiCss?r.styleSheetLoader.load(n.skinUiCss,Ae(e)):Ae(e)(),{}}(e,t,n):function(e,t,n){var i,o,r;if(!1===d(e)&&n.skinUiCss?fe.styleSheetLoader.load(n.skinUiCss,Ae(e)):Ae(e)(),i=t.panel=A.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===l(e)?null:{type:"menubar",border:"0 0 1 0",items:ae(e)},W(e,u(e))]},Ce(e)?pe(e):me("1 0 0 0")]}),D.setUiContainer(e,i),"none"!==C(e)&&(o={type:"resizehandle",direction:C(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;r={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===C(e)?ce(e,r.width+t.deltaX,r.height+t.deltaY):ce(e,null,r.height+t.deltaY)}}),function(e){return e.getParam("statusbar",!0,"boolean")}(e)){var a=f.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),s=function(e){return e.getParam("branding",!0,"boolean")}(e)?{type:"label",classes:"branding",html:" "+a}:null;i.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,s]})}return p(e),e.on("SwitchMode",function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}}(i)),i.renderBefore(n.targetNode).reflow(),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly"),n.width&&fe.setStyle(i.getEl(),"width",n.width),e.on("remove",function(){i.remove(),i=null}),B(e,i),V(e),{iframeContainer:i.find("#iframe")[0].getEl(),editorContainer:i.getEl()}}(e,t,n)}(t,this,e)},resizeTo:function(e,n){return ce(t,e,n)},resizeBy:function(e,n){return function(e,t,n){var i=e.getContentAreaContainer();le(e,i.clientWidth+t,i.clientHeight+n)}(t,e,n)},getNotificationManagerImpl:function(){return function(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,i){var o,r=g.extend(n,{maxWidth:(o=t(e),ve.getSize(o).width)}),a=new Nt(r);return a.args=r,r.timeout>0&&(a.timer=setTimeout(function(){a.close(),i()},r.timeout)),a.on("close",function(){i()}),a.renderTo(),a},close:function(e){e.close()},reposition:function(n){!function(e){j(e,function(e){e.moveTo(0,0)})}(n),function(n){if(n.length>0){var i=n.slice(0,1)[0],o=t(e);i.moveRel(o,"tc-tc"),j(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}}(n)},getArgs:function(e){return e.args}}}(t)},getWindowManagerImpl:function(){return{open:function(t,n,i){var o;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),(o=new Ut(t)).on("close",function(){i(o)}),t.data&&o.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),o.features=t||{},o.params=n||{},o=o.renderTo(e.document.body).reflow()},alert:function(e,t,n){var i;return(i=Ht.alert(e,function(){t()})).on("close",function(){n(i)}),i},confirm:function(e,t,n){var i;return(i=Ht.confirm(e,function(e){t(e)})).on("close",function(){n(i)}),i},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},Lt=Se.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=g.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,i,o,r=this.settings;t=r.firstControlClass,n=r.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(r.controlClass),e.visible()&&(i||(i=e),o=e)}),i&&i.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Vt=Lt.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),Yt=St.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var t,n=this._id,i=this.classPrefix,o=this.state.get("icon"),r=this.state.get("text"),a="",s=this.settings;return(t=s.image)?(o="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r&&(this.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+this.encode(r)+"</span>"),'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+("boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"")+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+((o=o?i+"ico "+i+"i-"+o:"")?'<i class="'+o+'"'+t+"></i>":"")+a+"</button></div>"},bindStates:function(){var t=this,n=t.$,i=t.classPrefix+"txt";function o(e){var o=n("span."+i,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+i+'"></span>'),o=n("span."+i,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}return t.state.on("change:text",function(e){o(e.value)}),t.state.on("change:icon",function(n){var i=n.value,r=t.classPrefix;t.settings.icon=i,i=i?r+"ico "+r+"i-"+t.settings.icon:"";var a=t.getEl().firstChild,s=a.getElementsByTagName("i")[0];i?(s&&s===a.firstChild||(s=e.document.createElement("i"),a.insertBefore(s,a.firstChild)),s.className=i):s&&a.removeChild(s),o(t.state.get("text"))}),t._super()}}),Mt=Yt.extend({init:function(e){e=g.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=ve.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),be(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),be(t).on("click",function(e){e.stopPropagation()}),be(e.getEl("button")).on("click touchstart",function(e){e.stopPropagation(),t.click(),e.preventDefault()}),e.getEl().appendChild(t)},remove:function(){be(this.getEl("button")).off(),be(this.getEl("input")).off(),this._super()}}),_t=lt.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),Kt=St.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(e){t.fire("change"),n(e.value)}),t.state.on("change:icon",function(n){var i=n.value,o=t.classPrefix;if(void 0===i)return t.settings.icon;t.settings.icon=i,i=i?o+"ico "+o+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,a=r.getElementsByTagName("i")[0];i?(a&&a===r.firstChild||(a=e.document.createElement("i"),r.insertBefore(a,r.firstChild)),a.className=i):a&&r.removeChild(a)}),t.state.get("checked")&&n(!0),t._super()}}),zt=tinymce.util.Tools.resolve("tinymce.util.VK"),Jt=St.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var i=n.target,o=t.getEl();if(be.contains(o,i)||i===o)for(;i&&i!==o;)i.id&&-1!==i.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),i=e.target.value;i!==n&&(t.state.set("value",i),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var i=t.statusMessage()||"Ok",o=n.text(i).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this;t.menu||((e=t.settings.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=A.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,n,i=this.getEl(),o=this.getEl("open"),r=this.layoutRect(),a=0,s=i.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(a=parseInt(ve.getRuntimeStyle(s,"padding-right"),10)-parseInt(ve.getRuntimeStyle(s,"padding-left"),10)),t=o?r.w-ve.getSize(o).width-10:r.w-10;var g=e.document;return g.all&&(!g.documentMode||g.documentMode<=8)&&(n=this.layoutRect().h-2+"px"),be(s).css({width:t-a,lineHeight:n}),this._super(),this},postRender:function(){var e=this;return be(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n,i=this._id,o=this.settings,r=this.classPrefix,a=this.state.get("value")||"",s="",g="";return"spellcheck"in o&&(g+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(g+=' maxlength="'+o.maxLength+'"'),o.size&&(g+=' size="'+o.size+'"'),o.subtype&&(g+=' type="'+o.subtype+'"'),n='<i id="'+i+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(g+=' disabled="disabled"'),(e=o.icon)&&"caret"!==e&&(e=r+"ico "+r+"i-"+o.icon),t=this.state.get("text"),(e||t)&&(s='<div id="'+i+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+r+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+i+'" class="'+this.classes+'"><input id="'+i+'-inp" class="'+r+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+g+' placeholder="'+this.encode(o.placeholder)+'" />'+n+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=A.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),g.each(e,function(e){var i,o;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(i=e.value,o=e.title,function(){n.fire("selectitem",{title:o,value:i})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),i=e.classPrefix,o=t.value;ve.css(n,"display","none"===o?"none":""),ve.toggleClass(n,i+"i-checkmark","ok"===o),ve.toggleClass(n,i+"i-warning","warn"===o),ve.toggleClass(n,i+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()}),ve.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var i=n.keyCode;"INPUT"===n.target.nodeName&&(i===zt.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):i===zt.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){be(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Pt=Jt.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(i){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),jt=Yt.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new xt(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var i=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===i.substr(-1)),e.panel.classes.toggle("end","r"===i.substr(-1));var o="t"===i.substr(0,1);e.panel.classes.toggle("bottom",!o),e.panel.classes.toggle("top",o),e.panel.moveRel(e.getEl(),i)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),$t=h.DOM,qt=jt.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this._id,t=this.classPrefix,n=this.state.get("text"),i=this.settings.icon?t+"ico "+t+"i-"+this.settings.icon:"",o=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",r="";return n&&(this.classes.add("btn-has-text"),r='<span class="'+t+'txt">'+this.encode(n)+"</span>"),'<div id="'+e+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+e+'-preview" class="'+t+'preview"></span>'+r+'</button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||$t.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),en=tinymce.util.Tools.resolve("tinymce.util.Color"),tn=St.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,i,o,r=this,a=r.color();function s(e,t){var n,i,o=ve.getPos(e);return n=t.pageX-o.x,i=t.pageY-o.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:i=Math.max(0,Math.min(i/e.clientHeight,1))}}function g(e,t){ve.css(n,{top:(360-e.h)/360*100+"%"}),t||ve.css(o,{left:e.s+"%",top:100-e.v+"%"}),i.style.background=en({s:100,v:100,h:e.h}).toHex(),r.color().parse({s:e.s,v:e.v,h:e.h})}function l(t){var n;n=s(i,t),e.s=100*n.x,e.v=100*(1-n.y),g(e),r.fire("change")}function c(n){var i;i=s(t,n),(e=a.toHsv()).h=360*(1-i.y),g(e,!0),r.fire("change")}t=r.getEl("h"),n=r.getEl("hp"),i=r.getEl("sv"),o=r.getEl("svp"),r._repaint=function(){g(e=a.toHsv())},r._super(),r._svdraghelper=new ut(r._id+"-sv",{start:l,drag:l}),r._hdraghelper=new ut(r._id+"-h",{start:c,drag:c}),r._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=en()),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+i+");background: linear-gradient(to bottom,"+i+');">'+function(){var e,t,o,r,a="";for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(r=i.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+o+r[e]+",endColorstr="+r[e+1]+");-ms-"+o+r[e]+",endColorstr="+r[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),nn=St.extend({init:function(e){e=g.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t=this.settings;return e=ve.create("div",{id:this._id,hidefocus:"1"},"<span>"+this.translate(t.text)+"</span>"),t.height&&ve.css(e,"height",t.height+"px"),t.width&&ve.css(e,"width",t.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return g.grep(t,function(e){return i.test(e.name)})}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),on=St.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,i=e||[],o="",r=this.classPrefix;for(t=0,n=i.length;t<n;t++)o+=(t>0?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(t===n-1?" "+r+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+i[t].name+"</div>";return o||(o='<div class="'+r+'path-item">\xa0</div>'),o}}),rn=on.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()}),t.on("nodeChange",function(i){for(var o=[],r=i.parents,a=r.length;a--;)if(1===r[a].nodeType&&!n(r[a])){var s=t.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:r[a]}),s.isPropagationStopped())break}e.row(o)})),e._super()}}),an=lt.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this._layout,t=this.classPrefix;return this.classes.add("formitem"),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+t+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),sn=lt.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,i=t.settings.label;i&&((n=new an(g.extend({items:{type:"label",id:t._id+"-l",text:i,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,i=0,o=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;i=n>i?n:i,o.push(t)}),n=e.settings.labelGap||0,t=o.length;t--;)o[t].settings.minWidth=i+n}e._super(),e.on("show",t),t()}}),gn=sn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this._layout,t=this.classPrefix;return this.preRender(),e.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+t+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></fieldset>"}}),ln=0,cn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:F(e)}},un=e.Node.DOCUMENT_NODE,In=e.Node.ELEMENT_NODE,dn=(void 0!==e.window||Function("return this;")(),function(){return Cn(0,0)}),Cn=function(e,t){return{major:e,minor:t}},hn={nu:Cn,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?dn():function(t,n){var i=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,n);if(!i)return{major:0,minor:0};var o=function(e){return Number(n.replace(i,"$"+e))};return Cn(o(1),o(2))}(0,n)},unknown:dn},An=function(e,t){return function(){return t===e}},fn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:An("Edge",t),isChrome:An("Chrome",t),isIE:An("IE",t),isOpera:An("Opera",t),isFirefox:An("Firefox",t),isSafari:An("Safari",t)}},mn=function(){return fn({current:void 0,version:hn.unknown()})},pn=fn,bn=(F("Edge"),F("Chrome"),F("IE"),F("Opera"),F("Firefox"),F("Safari"),function(e,t){return function(){return t===e}}),Bn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:bn("Windows",t),isiOS:bn("iOS",t),isAndroid:bn("Android",t),isOSX:bn("OSX",t),isLinux:bn("Linux",t),isSolaris:bn("Solaris",t),isFreeBSD:bn("FreeBSD",t)}},vn=function(){return Bn({current:void 0,version:hn.unknown()})},yn=Bn,xn=(F("Windows"),F("iOS"),F("Android"),F("Linux"),F("OSX"),F("Solaris"),F("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var i=0,o=e.length;i<o;i++){var r=e[i];if(r.search(n))return k.some(r)}return k.none()}(e)}),Fn=function(e,t){return-1!==e.indexOf(t)},Gn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qn=function(e){return function(t){return Fn(t,e)}},wn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Fn(e,"edge/")&&Fn(e,"chrome")&&Fn(e,"safari")&&Fn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Gn],search:function(e){return Fn(e,"chrome")&&!Fn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Fn(e,"msie")||Fn(e,"trident")}},{name:"Opera",versionRegexes:[Gn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qn("firefox")},{name:"Safari",versionRegexes:[Gn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Fn(e,"safari")||Fn(e,"mobile/"))&&Fn(e,"applewebkit")}}],Sn=[{name:"Windows",search:Qn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Fn(e,"iphone")||Fn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Qn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qn("linux"),versionRegexes:[]},{name:"Solaris",search:Qn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qn("freebsd"),versionRegexes:[]}],Xn={browsers:F(wn),oses:F(Sn)},Zn=(Tt=function(){return t=e.navigator.userAgent,n=Xn.browsers(),i=Xn.oses(),o=function(e,t){return xn(e,t).map(function(e){var n=hn.detect(e.versionRegexes,t);return{current:e.name,version:n}})}(n,t).fold(mn,pn),r=function(e,t){return xn(e,t).map(function(e){var n=hn.detect(e.versionRegexes,t);return{current:e.name,version:n}})}(i,t).fold(vn,yn),a=function(e,t,n){var i=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!i,r=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=i||r||a&&!0===/mobile/i.test(n),g=e.isiOS()||e.isAndroid(),l=g&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:F(i),isiPhone:F(o),isTablet:F(s),isPhone:F(l),isTouch:F(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:F(c)}}(r,o,t),{browser:o,os:r,deviceType:a};var t,n,i,o,r,a},Et=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Et||(Et=!0,Wt=Tt.apply(null,e)),Wt}),Nn=In,kn=un,Rn=function(e){return e.nodeType!==Nn&&e.nodeType!==kn||0===e.childElementCount},Dn=(Zn().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),g.trim),Un=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Tn=Un("true"),Wn=Un("false"),En=function(e,t,n,i,o){return{type:e,title:t,url:n,level:i,attach:o}},Hn=function(e){return e.innerText||e.textContent},On=function(e){return function(e){return e&&"A"===e.nodeName&&(e.id||e.name)}(e)&&Vn(e)},Ln=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Vn=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Tn(e)}return!1}(e)&&!Wn(e)},Yn=function(e){return Ln(e)&&Vn(e)},Mn=function(e){var t=function(e){return e.id?e.id:(t=(new Date).getTime(),"h_"+Math.floor(1e9*Math.random())+ ++ln+String(t));var t}(e);return En("header",Hn(e),"#"+t,function(e){return Ln(e)?parseInt(e.nodeName.substr(1),10):0}(e),function(){e.id=t})},_n=function(e){var t=e.id||e.name,n=Hn(e);return En("anchor",n||"#"+t,"#"+t,0,x)},Kn=function(e){return Dn(e.title).length>0},zn={},Jn=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Pn=function(e,t){return{title:e,value:{title:e,url:t,attach:x}}},jn=function(e,t,n){var i=t in e?e[t]:n;return!1===i?null:i},$n=function(e,t){var n=e.toLowerCase(),i=g.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===i.length&&i[0].title===e?[]:i},qn=Jt.extend({Statics:{clearHistory:function(){zn={}}},init:function(t){var n,i,o,r=this,a=window.tinymce?window.tinymce.activeEditor:s.activeEditor,l=a.settings,c=t.filetype;t.spellcheck=!1,(o=l.file_picker_types||l.file_browser_callback_types)&&(o=g.makeMap(o,/[, ]/)),o&&!o[c]||(!(i=l.file_picker_callback)||o&&!o[c]?!(i=l.file_browser_callback)||o&&!o[c]||(n=function(){i(r.getEl("inp").id,r.value(),c,window)}):n=function(){var e=r.fire("beforecall").meta;e=g.extend({filetype:c},e),i.call(a,function(e,t){r.value(e).fire("change",{meta:t})},r.value(),e)}),n&&(t.icon="browse",t.onaction=n),r._super(t),r.classes.add("filepicker"),function(t,n,i,o){var r=function(r){var a,s=function(e,t,n,i){var o,r,a,s,l,c,u={title:"-"},I=function(e){var i=e.hasOwnProperty(n)?e[n]:[],o=$(i,function(e){return function(e,t){return!J(t,function(t){return t.url===e})}(e,t)});return g.map(o,function(e){return{title:e,value:{title:e,url:e,attach:x}}})},d=function(e){return function(e){return g.map(e,Jn)}($(t,function(t){return t.type===e}))};return!1===i.typeahead_urls?[]:"file"===n?(o=[$n(e,I(zn)),$n(e,d("header")),$n(e,(s=d("anchor"),l=jn(i,"anchor_top","#top"),c=jn(i,"anchor_bottom","#bottom"),null!==l&&s.unshift(Pn("<top>",l)),null!==c&&s.push(Pn("<bottom>",c)),s))],r=function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(u,t)},a=[],j(o,function(e){a=r(a,e)}),a):$n(e,I(zn))}(r,(a=function(t){return P((Zn().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(t,n){return function(t,n){var i=void 0===n?e.document:n.dom();return Rn(i)?[]:P(i.querySelectorAll(t),cn)}(n,t)})(cn(t),"h1,h2,h3,h4,h5,h6,a:not([href])"),function(e){return e.dom()})}(i),$(function(e){return P($(e,Yn),Mn)}(a).concat(function(e){return P($(e,On),_n)}(a)),Kn)),o,n);t.showAutoComplete(s,r)};t.on("autocomplete",function(){r(t.value())}),t.on("selectitem",function(e){var n=e.value;t.value(n.url);var i=function(e){var t=e.title;return t.raw?t.raw:t}(n);t.fire("change","image"===o?{meta:{alt:i,attach:n.attach}}:{meta:{text:i,attach:n.attach}}),t.focus()}),t.on("click",function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&r("")}),t.on("PostRender",function(){t.getRoot().on("submit",function(e){e.isDefaultPrevented()||function(e,t){var n,i,o,r=zn[t];/^https?/.test(e)&&(r?(n=r,i=e,o=z(n,i),-1===o?k.none():k.some(o)).isNone()&&(zn[t]=r.slice(0,5).concat(e)):zn[t]=[e])}(t.value(),o)})})}(r,l,a.getBody(),c),function(e,t,n){var i=t.filepicker_validator_handler;i&&e.state.on("change:value",function(t){var o;0!==(o=t.value).length?i({url:o,type:n},function(t){var n=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}}(t);e.statusMessage(n.message),e.statusLevel(n.status)}):e.statusLevel("none")})}(r,l,c)}}),ei=Vt.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),ti=Vt.extend({recalc:function(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B,v,y,x,F,G,Q,w,S,X,Z,N,k,R,D,U,T,W=[],E=Math.max,H=Math.min;for(i=e.items().filter(":visible"),o=e.layoutRect(),r=e.paddingBox,a=e.settings,I=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,g=e.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"!==I&&"column-reverse"!==I||(i=i.set(i.toArray().reverse()),I=I.split("-")[0]),"column"===I?(x="y",v="h",y="minH",F="maxH",Q="innerH",G="top",w="deltaH",S="contentH",R="left",N="w",X="x",Z="innerW",k="minW",D="right",U="deltaW",T="contentW"):(x="x",v="w",y="minW",F="maxW",Q="innerW",G="left",w="deltaW",S="contentW",R="top",N="h",X="y",Z="innerH",k="minH",D="bottom",U="deltaH",T="contentH"),u=o[Q]-r[G]-r[G],B=c=0,t=0,n=i.length;t<n;t++)C=(d=i[t]).layoutRect(),u-=t<n-1?l:0,(h=d.settings.flex)>0&&(c+=h,C[F]&&W.push(d),C.flex=h),u-=C[y],(A=r[R]+C[k]+r[D])>B&&(B=A);if((p={})[y]=u<0?o[y]-u+o[w]:o[Q]-u+o[w],p[k]=B+o[U],p[S]=o[Q]-u,p[T]=B,p.minW=H(p.minW,o.maxW),p.minH=H(p.minH,o.maxH),p.minW=E(p.minW,o.startMinWidth),p.minH=E(p.minH,o.startMinHeight),!o.autoResize||p.minW===o.minW&&p.minH===o.minH){for(m=u/c,t=0,n=W.length;t<n;t++)(A=(C=(d=W[t]).layoutRect())[y]+C.flex*m)>(f=C[F])?(u-=C[F]-C[y],c-=C.flex,C.flex=0,C.maxFlexSize=f):C.maxFlexSize=0;for(m=u/c,b=r[G],p={},0===c&&("end"===g?b=u+r[G]:"center"===g?(b=Math.round(o[Q]/2-(o[Q]-u)/2)+r[G])<0&&(b=r[G]):"justify"===g&&(b=r[G],l=Math.floor(u/(i.length-1)))),p[X]=r[R],t=0,n=i.length;t<n;t++)A=(C=(d=i[t]).layoutRect()).maxFlexSize||C[y],"center"===s?p[X]=Math.round(o[Z]/2-C[N]/2):"stretch"===s?(p[N]=E(C[k]||0,o[Z]-r[R]-r[D]),p[X]=r[R]):"end"===s&&(p[X]=o[Z]-C[N]-r.top),C.flex>0&&(A+=C.flex*m),p[v]=A,p[x]=b,d.layoutRect(p),d.recalc&&d.recalc(),b+=A+l}else if(p.w=p.minW,p.h=p.minH,e.layoutRect(p),this.recalc(e),null===e._lastRect){var O=e.parent();O&&(O._lastRect=null,O.recalc())}}}),ni=Lt.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),ii=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},oi=function(e,t,n){var i=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,i):e.on("init",function(){e.formatter.formatChanged(t,i)})},ri=function(e,t){return function(n){oi(e,t,function(e){n.control.active(e)})}},ai=function(e){return e?e.split(",")[0]:""},si=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",function(i){var o=e.queryCommandValue("FontName"),r=function(e,t){var n,i=t?t.toLowerCase():"";return g.each(e,function(e){e.value.toLowerCase()===i&&(n=e.value)}),g.each(e,function(e){n||ai(e.value).toLowerCase()!==ai(i).toLowerCase()||(n=e.value)}),n}(t,o);n.value(r||null),!r&&o&&n.text(ai(o))})}},gi=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e},li=function(e,t,n){var i;return g.each(e,function(e){e.value===n?i=n:e.value===t&&(i=t)}),i},ci=function(e,t){return function(){var n=this;e.on("init nodeChange",function(i){var o,r,a,s;if(o=e.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)r=gi(o,a),s=li(t,r,o);n.value(s||null),s||n.text(r)})}},ui=function(e,t){var n=t.length;return g.each(t,function(t){t.menu&&(t.hidden=0===ui(e,t.menu));var i=t.format;i&&(t.hidden=!e.formatter.canApply(i)),t.hidden&&n--}),n},Ii=function(e,t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(Ii(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(ui(e,t.settings.menu)>0);var i=t.settings.format;i&&t.visible(e.formatter.canApply(i)),t.visible()||n--}),n},di=function(e,t,n){return function(){var i=this;e.on("nodeChange",function(o){var r=e.formatter,a=null;g.each(o.parents,function(e){if(g.each(t,function(t){if(n?r.matchNode(e,n,{value:t.value})&&(a=t.value):r.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),i.value(a)})}},Ci=function(e,t){return g.map(t,function(t){return{text:t[0],onclick:ii(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})},hi=function(e,t){var n,i;if("string"==typeof t)i=t.split(" ");else if(g.isArray(t))return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!M(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);te.apply(t,e[n])}return t}(g.map(t,function(t){return hi(e,t)}));return n=g.grep(i,function(t){return"|"===t||t in e.menuItems}),g.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},Ai=function(e){return e&&"-"===e.text},fi=function(e,t){return function(){var n=this,i=function(){return!!e.undoManager&&e.undoManager["redo"===t?"hasRedo":"hasUndo"]()};n.disabled(!i()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!i())})}},mi=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},pi={setup:function(t){!function(e){e.rtl&&(rt.rtl=!0)}(t),function(e){e.on("mousedown progressstate",function(){xt.hideAll()})}(t),function(t){var n,i;t.settings.ui_container&&(ue.container=(n=cn(e.document.body),i=t.settings.ui_container,function(t,n){var i=void 0===n?e.document:n.dom();return Rn(i)?k.none():k.from(i.querySelector(t)).map(cn)}(i,n)).fold(F(null),function(e){return e.dom()}))}(t),St.tooltips=!ue.iOS,rt.translate=function(e){return s.translate(e)},function(e){var t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:Ci(e,t)}),e.addButton("formatselect",function(e,t){return function(){var n=[];return g.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();ii(e,n)()}},onPostRender:di(e,n)}}}(e,t))}(t),function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:ii(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:ii(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:ii(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:ii(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:n}),e.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var i=n.control.menu;g.each(t,function(t,n){i.items().eq(n).each(function(n){return n.active(e.formatter.match(t))})})},onPostRender:function(n){var i=n.control;g.each(t,function(t,n){oi(e,t,function(e){i.icon("alignleft"),e&&i.icon(t)})})}}),g.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:ri(e,n)})})}(t),function(e){(function(e){!function(e){g.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:ri(e,n),onclick:ii(e,n)})})}(e),function(e){g.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})}(e),function(e){g.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:ri(e,n)})})}(e)})(e),function(e){g.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:ii(e,"code")})}(e)}(t),function(e){!function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:fi(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:fi(e,"redo"),cmd:"redo"})}(e),function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:fi(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:fi(e,"redo"),cmd:"redo"})}(e)}(t),function(e){!function(e){e.addButton("fontsizeselect",function(){var t=function(e){return g.map((e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),function(e){var t=e,n=e,i=e.split("=");return i.length>1&&(t=i[0],n=i[1]),{text:t,value:n}})}(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:ci(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})}(e)}(t),function(e){!function(e){e.addButton("fontselect",function(){var t=function(e){var t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return g.map(t,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})}(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:si(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})}(e)}(t),function(e){var t=function(e){var t=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function(e){var i=[];if(e)return g.each(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=o(e.items);else{var a=e.format||"custom"+t++;e.format||(e.name=a,n.push(e)),r.format=a,r.cmd=e.cmd}i.push(r)}),i};return e.on("init",function(){g.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:o(e.settings.style_formats_merge?e.settings.style_formats?i.concat(e.settings.style_formats):i:e.settings.style_formats||i),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;(n=t.settings.format)&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(i=t.settings.cmd)&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&ii(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}(e);!function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})}(e,t),function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&Ii(e,this.menu)}})}(e,t)}(t),function(e){!function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:mi(e),cmd:"mceToggleVisualAid"})}(e)}(t),function(e){!function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(function(e){var t,n,i=e.settings.insert_button_items;return t=i?hi(e,i):function(e,t){var n=[{text:"-"}],i=g.grep(e.menuItems,function(e){return"insert"===e.context});return g.each(i,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n}(e),n=$(t,function(e,t,n){return!Ai(e)||!Ai(n[t-1])}),$(n,function(e,t,n){return!Ai(e)||t>0&&t<n.length-1})}(e)),this.menu.renderNew()}})}(e)}(t)}},bi=Vt.extend({recalc:function(e){var t,n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B,v,y,x,F,G,Q,w,S=[],X=[];t=e.settings,o=e.items().filter(":visible"),r=e.layoutRect(),i=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/i),m=t.spacingH||t.spacing||0,p=t.spacingV||t.spacing||0,b=t.alignH||t.align,B=t.alignV||t.align,A=e.paddingBox,w="reverseRows"in t?t.reverseRows:e.isRtl(),b&&"string"==typeof b&&(b=[b]),B&&"string"==typeof B&&(B=[B]);for(u=0;u<i;u++)S.push(0);for(I=0;I<n;I++)X.push(0);for(I=0;I<n;I++)for(u=0;u<i&&(c=o[I*i+u]);u++)F=(l=c.layoutRect()).minH,S[u]=(x=l.minW)>S[u]?x:S[u],X[I]=F>X[I]?F:X[I];for(G=r.innerW-A.left-A.right,v=0,u=0;u<i;u++)v+=S[u]+(u>0?m:0),G-=(u>0?m:0)+S[u];for(Q=r.innerH-A.top-A.bottom,y=0,I=0;I<n;I++)y+=X[I]+(I>0?p:0),Q-=(I>0?p:0)+X[I];if(y+=A.top+A.bottom,(g={}).minW=(v+=A.left+A.right)+(r.w-r.innerW),g.minH=y+(r.h-r.innerH),g.contentW=g.minW-r.deltaW,g.contentH=g.minH-r.deltaH,g.minW=Math.min(g.minW,r.maxW),g.minH=Math.min(g.minH,r.maxH),g.minW=Math.max(g.minW,r.startMinWidth),g.minH=Math.max(g.minH,r.startMinHeight),!r.autoResize||g.minW===r.minW&&g.minH===r.minH){var Z;r.autoResize&&((g=e.layoutRect(g)).contentW=g.minW-r.deltaW,g.contentH=g.minH-r.deltaH),Z="start"===t.packV?0:Q>0?Math.floor(Q/n):0;var N=0,k=t.flexWidths;if(k)for(u=0;u<k.length;u++)N+=k[u];else N=i;var R=G/N;for(u=0;u<i;u++)S[u]+=k?k[u]*R:R;for(C=A.top,I=0;I<n;I++){for(d=A.left,s=X[I]+Z,u=0;u<i&&(c=o[w?I*i+i-1-u:I*i+u]);u++)h=c.settings,l=c.layoutRect(),a=Math.max(S[u],l.startMinWidth),l.x=d,l.y=C,"center"===(f=h.alignH||(b?b[u]||b[0]:null))?l.x=d+a/2-l.w/2:"right"===f?l.x=d+a-l.w:"stretch"===f&&(l.w=a),"center"===(f=h.alignV||(B?B[u]||B[0]:null))?l.y=C+s/2-l.h/2:"bottom"===f?l.y=C+s-l.h:"stretch"===f&&(l.h=s),c.layoutRect(l),d+=a+m,c.recalc&&c.recalc();C+=s+p}}else if(g.w=g.minW,g.h=g.minH,e.layoutRect(g),this.recalc(e),null===e._lastRect){var D=e.parent();D&&(D._lastRect=null,D.recalc())}}}),Bi=St.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):y.setTimeout(function(){n.html(e)}),this}}),vi=St.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),yi=St.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(ve.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,ve.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this.settings.forId,i=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(t=this.settings.forName)&&(e=this.getRoot().find("#"+t)[0])&&(n=e._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+i+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+i+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),xi=lt.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),Fi=xi.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Gi=Yt.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),n.menu=t.renderTo?t.parent(n).show().renderTo():A.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){"hide"===e.type&&e.control.parent()===n&&n.classes.remove("opened-under"),e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var i=n.menu.layoutRect(),o=n.$el.offset().top+n.layoutRect().h;o>i.y&&o<i.y+i.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var t,n=this._id,i=this.classPrefix,o=this.settings.icon,r=this.state.get("text"),a="";return(t=this.settings.image)?(o="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r&&(this.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+this.encode(r)+"</span>"),o=this.settings.icon?i+"ico "+i+"i-"+o:"",this.aria("role",this.parent()instanceof Fi?"menuitem":"button"),'<div id="'+n+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+t+"></i>":"")+a+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,i=t.control,o=e.parent();i&&o&&i instanceof Gi&&i.parent()===o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(i.focus(),i.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Qi=xt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=g.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==ue.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new Qt(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory(function(i){0!==i.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(i),t.renderNew(),t.fire("loaded")):t.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?y.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),wi=Gi.extend({init:function(e){var t,n,i,o,r=this;r._super(e),r._values=t=(e=r.settings).values,t&&(void 0!==e.value&&function t(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||e.value===o[a].value)return i=i||o[a].text,r.state.set("value",o[a].value),!0;if(o[a].menu&&t(o[a].menu))return!0}}(t),!n&&t.length>0&&(i=t[0].text,r.state.set("value",t[0].value)),r.state.set("menu",t)),r.state.set("text",e.text||i),r.classes.add("listbox"),r.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):r.value(t.control.value()),o=n})},value:function(e){return 0===arguments.length?this.state.get("value"):void 0===e?this:(this.settings.values&&!function t(n){return J(n,function(n){return n.menu?t(n.menu):n.value===e})}(this.settings.values)?null===e&&this.state.set("value",null):this.state.set("value",e),this)},bindStates:function(){var e=this;return e.on("show",function(t){var n,i;n=t.control,i=e.value(),n instanceof Qi&&n.items().each(function(e){e.hasMenus()||e.active(e.value()===i)})}),e.state.on("change:value",function(t){var n=function e(t,n){var i;if(t)for(var o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(i=e(t[o].menu,n)))return i}}(e.state.get("menu"),t.value);e.text(n?n.text:e.settings.text)}),e._super()}}),Si=St.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t;this._super(e),e=this.settings,this.classes.add("menu-item"),e.menu&&this.classes.add("menu-item-expand"),e.preview&&this.classes.add("menu-item-preview"),"-"!==(t=this.state.get("text"))&&"|"!==t||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),e.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,i=t.parent();if(i.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){(e=t.menu)?e.show():((e=n.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",i.settings.itemDefaults&&(e.itemDefaults=i.settings.itemDefaults),(e=t.menu=A.create(e).parent(t).renderTo()).reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=i,e.classes.add("menu-sub");var o=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),o),e.rel=o,o="menu-sub-"+o,e.classes.remove(e._lastRel).add(o),e._lastRel=o,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e,t=this._id,n=this.settings,i=this.classPrefix,o=this.state.get("text"),r=this.settings.icon,a="",s=n.shortcut,g=this.encode(n.url);function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){var t=n.match||"";return t?e.replace(new RegExp(l(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function u(e){return e.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return r&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(e){var t,n,i;for(i=ue.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=i[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(s)),r=i+"ico "+i+"i-"+(this.settings.icon||"none"),e="-"!==o?'<i class="'+r+'"'+a+"></i>\xa0":"",o=u(this.encode(c(o))),g=u(this.encode(c(g))),'<div id="'+t+'" class="'+this.classes+'" tabindex="-1">'+e+("-"!==o?'<span id="'+t+'-text" class="'+i+'text">'+o+"</span>":"")+(s?'<div id="'+t+'-shortcut" class="'+i+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+i+'caret"></div>':"")+(g?'<div class="'+i+'menu-item-link">'+g+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&(i.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),y.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var i=e.getEl("text");i.setAttribute("style",n),t&&(i.style.color="",i.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Xi=Kt.extend({Defaults:{classes:"radio",role:"radio"}}),Zi=St.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new ut(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Ni(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var ki=St.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t="";return e=Ni(this._options),this.size&&(t=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+t+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=Ni(t.value)}),e._super()}});function Ri(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function Di(e,t,n){e.setAttribute("aria-"+t,n)}function Ui(e,t){var n,i,o,r,a;"v"===e.settings.orientation?(r="top",o="height",i="h"):(r="left",o="width",i="w"),a=e.getEl("handle"),n=(e.layoutRect()[i]||100)-ve.getSize(a)[o],a.style[r]=n*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style.height=e.layoutRect().h+"px",Di(a,"valuenow",t),Di(a,"valuetext",""+e.settings.previewFilter(t)),Di(a,"valuemin",e._minValue),Di(a,"valuemax",e._maxValue)}var Ti,Wi=St.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"===e.orientation&&this.classes.add("vertical"),this._minValue=K(e.minValue)?e.minValue:0,this._maxValue=K(e.maxValue)?e.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+this.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,i,o,r,a=this;e=a._minValue,t=a._maxValue,"v"===a.settings.orientation?(n="screenY",i="top",o="height",r="h"):(n="screenX",i="left",o="width",r="w"),a._super(),function(e,t){function n(n){var i,o;i=a.value(),i=Ri(i=function(e,n,i){return i*(t-e)-e}(e,0,(i+(o=e))/(t-o)+.05*n),e,t),a.value(i),a.fire("dragstart",{value:i}),a.fire("drag",{value:i}),a.fire("dragend",{value:i})}a.on("keydown",function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(e,t),function(e,t,s){var g,l,c,u,I;a._dragHelper=new ut(a._id,{handle:a._id+"-handle",start:function(e){g=e[n],l=parseInt(a.getEl("handle").style[i],10),c=(a.layoutRect()[r]||100)-ve.getSize(s)[o],a.fire("dragstart",{value:I})},drag:function(o){u=Ri(l+(o[n]-g),0,c),s.style[i]=u+"px",a.value(I=e+u/c*(t-e)),a.tooltip().text(""+a.settings.previewFilter(I)).show().moveRel(s,"bc tc"),a.fire("drag",{value:I})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:I})}})}(e,t,a.getEl("handle"))},repaint:function(){this._super(),Ui(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){Ui(e,t.value)}),e._super()}}),Ei=St.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Hi=Gi.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t=this.getEl(),n=this.layoutRect();return this._super(),e=t.lastChild,be(t.firstChild).css({width:n.w-ve.getSize(e).width,height:n.h-2}),be(e).css({height:n.h-2}),this},activeMenu:function(e){be(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var t,n=this._id,i=this.classPrefix,o=this.state.get("icon"),r=this.state.get("text"),a=this.settings,s="";return(t=a.image)?(o="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o=a.icon?i+"ico "+i+"i-"+o:"",r&&(this.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+this.encode(r)+"</span>"),'<div id="'+n+'" class="'+this.classes+'" role="button"'+("boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"")+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+t+"></i>":"")+s+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(o?"\xa0":"")+this._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",function(t){var n=t.target;if(t.control===this)for(;n;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),Oi=ni.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Li=ft.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),be(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),be(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",r),n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]===t.target&&e.activateTab(i)})},initLayoutRect:function(){var e,t,n;t=(t=ve.getSize(this.getEl("head")).width)<0?0:t,n=0,this.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var i=ve.getSize(this.getEl("head")).height;return this.settings.minWidth=t,this.settings.minHeight=n+i,(e=this._super()).deltaH+=i,e.innerH=e.h-e.deltaH,e}}),Vi=St.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var t,n,i,o,r,a=0;t=this.getEl().style,n=this._layoutRect,r=this._lastRepaintRect||{};var s=e.document;return!this.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=n.h-a+"px"),o=(i=this.borderBox).left+i.right+8,a=i.top+i.bottom+(this.settings.multiline?8:0),n.x!==r.x&&(t.left=n.x+"px",r.x=n.x),n.y!==r.y&&(t.top=n.y+"px",r.y=n.y),n.w!==r.w&&(t.width=n.w-o+"px",r.w=n.w),n.h!==r.h&&(t.height=n.h-a+"px",r.h=n.h),this._lastRepaintRect=r,this.fire("repaint",{},!1),this},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},g.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=n[t]}),this.disabled()&&(e.disabled="disabled"),n.subtype&&(e.type=n.subtype),(t=ve.create(n.multiline?"textarea":"input",e)).value=this.state.get("value"),t.className=this.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),Yi=function(){return{Selector:Oe,Collection:Ye,ReflowQueue:$e,Control:rt,Factory:A,KeyboardNavigation:st,Container:lt,DragHelper:ut,Scrollable:At,Panel:ft,Movable:we,Resizable:mt,FloatPanel:xt,Window:Ut,MessageBox:Ht,Tooltip:wt,Widget:St,Progress:Xt,Notification:Nt,Layout:Lt,AbsoluteLayout:Vt,Button:Yt,ButtonGroup:_t,Checkbox:Kt,ComboBox:Jt,ColorBox:Pt,PanelButton:jt,ColorButton:qt,ColorPicker:tn,Path:on,ElementPath:rn,FormItem:an,Form:sn,FieldSet:gn,FilePicker:qn,FitLayout:ei,FlexLayout:ti,FlowLayout:ni,FormatControls:pi,GridLayout:bi,Iframe:Bi,InfoBox:vi,Label:yi,Toolbar:xi,MenuBar:Fi,MenuButton:Gi,MenuItem:Si,Throbber:Qt,Menu:Qi,ListBox:wi,Radio:Xi,ResizeHandle:Zi,SelectBox:ki,Slider:Wi,Spacer:Ei,SplitButton:Hi,StackLayout:Oi,TabPanel:Li,TextBox:Vi,DropZone:nn,BrowseButton:Mt}};g.each(Yi(),function(e,t){A.add(t,e)}),(Ti=window.tinymce?window.tinymce:{}).ui?g.each(Yi(),function(e,t){Ti.ui[t]=e}):Ti.ui=Yi(),a.add("modern",function(e){return pi.setup(e),Ot(e)})}(window),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,r=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},r.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(r,o),r.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},r.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},r.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=r}),define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";function i(e){return[{token:"comment",regex:/\/\*/,next:[r.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[r.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}var o=e("../lib/oop"),r=e("./doc_comment_highlight_rules").DocCommentHighlightRules,a=e("./text_highlight_rules").TextHighlightRules,s="[a-zA-Z\\$_\xa1-\uffff][a-zA-Z\\d\\$_\xa1-\uffff]*",g=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[r.getStartRule("doc-start"),i("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+s+")(\\.)(prototype)(\\.)("+s+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+s+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:s},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:s},{regex:"",token:"empty",next:"no_regex"}],start:[r.getStartRule("doc-start"),i("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:s},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){if(this.next="{"==e?this.nextState:"","{"==e&&n.length)n.unshift("start",t);else if("}"==e&&n.length&&(n.shift(),this.next=n.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:n},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!e||0!=e.jsx)&&(function(){var e=s.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var i="/"==e.charAt(1)?2:1;return 1==i?(t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++):2==i&&t==this.nextState&&(n[1]--,(!n[1]||n[1]<0)&&(n.shift(),n.shift())),[{type:"meta.tag.punctuation."+(1==i?"":"end-")+"tag-open.xml",value:e.slice(0,i)},{type:"meta.tag.tag-name.xml",value:e.substr(i)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),2==e.length&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,i("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}).call(this)),this.embedRules(r,"doc-",[r.getEndRule("no_regex")]),this.normalizeRules()};o.inherits(g,a),t.JavaScriptHighlightRules=g}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../range").Range,o=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var o=n[1].length,r=e.findMatchingBracket({row:t,column:o});if(!r||r.row==t)return 0;var a=this.$getIndent(e.getLine(r.row));e.replace(new i(t,0,t,o-1),a)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(o.prototype),t.MatchingBraceOutdent=o}),define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop"),o=e("../../range").Range,r=e("./fold_mode").FoldMode,a=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(a,r),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var o=this._getFoldWidgetBase(e,t,n);return!o&&this.startRegionRe.test(i)?"start":o},this.getFoldWidgetRange=function(e,t,n,i){var o,r=e.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,n);if(o=r.match(this.foldingStartMarker)){var a=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,a);var s=e.getCommentFoldRange(n,a+o[0].length,1);return s&&!s.isMultiLine()&&(i?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}return"markbegin"!==t&&(o=r.match(this.foldingStopMarker))?(a=o.index+o[0].length,o[1]?this.closingBracketBlock(e,o[1],n,a):e.getCommentFoldRange(n,a,-1)):void 0},this.getSectionRange=function(e,t){for(var n=e.getLine(t),i=n.search(/\S/),r=t,a=n.length,s=t+=1,g=e.getLength();++t<g;){var l=(n=e.getLine(t)).search(/\S/);if(-1!==l){if(i>l)break;var c=this.getFoldWidgetRange(e,"all",t);if(c){if(c.start.row<=r)break;if(c.isMultiLine())t=c.end.row;else if(i==l)break}s=t}}return new o(r,a,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),r=e.getLength(),a=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,g=1;++n<r;){t=e.getLine(n);var l=s.exec(t);if(l&&(l[1]?g--:g++,!g))break}if(n>a)return new o(a,i,n,t.length)}}).call(a.prototype)}),define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text").Mode,r=e("./javascript_highlight_rules").JavaScriptHighlightRules,a=e("./matching_brace_outdent").MatchingBraceOutdent,s=e("../worker/worker_client").WorkerClient,g=e("./behaviour/cstyle").CstyleBehaviour,l=e("./folding/cstyle").FoldMode,c=function(){this.HighlightRules=r,this.$outdent=new a,this.$behaviour=new g,this.foldingRules=new l};i.inherits(c,o),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),o=this.getTokenizer().getLineTokens(t,e),r=o.tokens,a=o.state;if(r.length&&"comment"==r[r.length-1].type)return i;if("start"==e||"no_regex"==e)(s=t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/))&&(i+=n);else if("doc-start"==e){if("start"==a||"no_regex"==a)return"";var s;(s=t.match(/^\s*(\/?)\*/))&&(s[1]&&(i+=" "),i+="* ")}return i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new s(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/javascript"}).call(c.prototype),t.Mode=c}),window.require(["ace/mode/javascript"],function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Raphael=t():e.Raphael=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,(function(t){return e[t]}).bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./dev/raphael.amd.js")}({"./dev/raphael.amd.js":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ "./dev/raphael.core.js"), __webpack_require__(/*! ./raphael.svg */ "./dev/raphael.svg.js"), __webpack_require__(/*! ./raphael.vml */ "./dev/raphael.vml.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n\n    return R;\n\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5hbWQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwuYW1kLmpzPzM1NjQiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCIsIFwiLi9yYXBoYWVsLnN2Z1wiLCBcIi4vcmFwaGFlbC52bWxcIl0sIGZ1bmN0aW9uKFIpIHtcblxuICAgIHJldHVybiBSO1xuXG59KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/raphael.amd.js\n')},"./dev/raphael.core.js":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! eve */ "./node_modules/eve-raphael/eve.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(eve) {\n\n    /*\\\n     * Raphael\n     [ method ]\n     **\n     * Creates a canvas object on which to draw.\n     * You must do this first, as all future calls to drawing methods\n     * from this instance will be bound to this canvas.\n     > Parameters\n     **\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - x (number)\n     - y (number)\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eve\u2019s \u201cDOMLoad\u201d event. In this case method returns `undefined`.\n     = (object) @Paper\n     > Usage\n     | // Each of the following examples create a canvas\n     | // that is 320px wide by 200px high.\n     | // Canvas is created at the viewport\u2019s 10,50 coordinate.\n     | var paper = Raphael(10, 50, 320, 200);\n     | // Canvas is created at the top left corner of the #notepad element\n     | // (or its top right corner in dir="rtl" elements)\n     | var paper = Raphael(document.getElementById("notepad"), 320, 200);\n     | // Same as above\n     | var paper = Raphael("notepad", 320, 200);\n     | // Image dump\n     | var set = Raphael(["notepad", 320, 200, {\n     |     type: "rect",\n     |     x: 10,\n     |     y: 10,\n     |     width: 25,\n     |     height: 25,\n     |     stroke: "#f00"\n     | }, {\n     |     type: "text",\n     |     x: 30,\n     |     y: 40,\n     |     text: "Dump"\n     | }]);\n    \\*/\n    function R(first) {\n        if (R.is(first, "function")) {\n            return loaded ? first() : eve.on("raphael.DOMload", first);\n        } else if (R.is(first, array)) {\n            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);\n        } else {\n            var args = Array.prototype.slice.call(arguments, 0);\n            if (R.is(args[args.length - 1], "function")) {\n                var f = args.pop();\n                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on("raphael.DOMload", function () {\n                    f.call(R._engine.create[apply](R, args));\n                });\n            } else {\n                return R._engine.create[apply](R, arguments);\n            }\n        }\n    }\n    R.version = "2.2.0";\n    R.eve = eve;\n    var loaded,\n        separator = /[, ]+/,\n        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},\n        formatrg = /\\{(\\d+)\\}/g,\n        proto = "prototype",\n        has = "hasOwnProperty",\n        g = {\n            doc: document,\n            win: window\n        },\n        oldRaphael = {\n            was: Object.prototype[has].call(g.win, "Raphael"),\n            is: g.win.Raphael\n        },\n        Paper = function () {\n            /*\\\n             * Paper.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Paper.customAttributes\n            \\*/\n            /*\\\n             * Paper.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number you can do it easily with custom attributes:\n             > Usage\n             | paper.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: "hsb(" + num + ", 0.75, 1)"};\n             | };\n             | // Custom attribute \u201chue\u201d will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | paper.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: "hsb(" + [h, s, b].join(",") + ")"};\n             | };\n             | c.attr({hsb: "0.5 .8 1"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n            this.ca = this.customAttributes = {};\n        },\n        paperproto,\n        appendChild = "appendChild",\n        apply = "apply",\n        concat = "concat",\n        //taken from Modernizr touch test: https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js#L40\n        supportsTouch = (\'ontouchstart\' in window) || window.TouchEvent || window.DocumentTouch && document instanceof DocumentTouch,\n        E = "",\n        S = " ",\n        Str = String,\n        split = "split",\n        events = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),\n        touchMap = {\n            mousedown: "touchstart",\n            mousemove: "touchmove",\n            mouseup: "touchend"\n        },\n        lowerCase = Str.prototype.toLowerCase,\n        math = Math,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        pow = math.pow,\n        PI = math.PI,\n        nu = "number",\n        string = "string",\n        array = "array",\n        toString = "toString",\n        fillString = "fill",\n        objectToString = Object.prototype.toString,\n        paper = {},\n        push = "push",\n        ISURL = R._ISURL = /^url\\([\'"]?(.+?)[\'"]?\\)$/i,\n        colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\))\\s*$/i,\n        isnan = {"NaN": 1, "Infinity": 1, "-Infinity": 1},\n        bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n        round = math.round,\n        setAttribute = "setAttribute",\n        toFloat = parseFloat,\n        toInt = parseInt,\n        upperCase = Str.prototype.toUpperCase,\n        availableAttrs = R._availableAttrs = {\n            "arrow-end": "none",\n            "arrow-start": "none",\n            blur: 0,\n            "clip-rect": "0 0 1e9 1e9",\n            cursor: "default",\n            cx: 0,\n            cy: 0,\n            fill: "#fff",\n            "fill-opacity": 1,\n            font: \'10px "Arial"\',\n            "font-family": \'"Arial"\',\n            "font-size": "10",\n            "font-style": "normal",\n            "font-weight": 400,\n            gradient: 0,\n            height: 0,\n            href: "http://raphaeljs.com/",\n            "letter-spacing": 0,\n            opacity: 1,\n            path: "M0,0",\n            r: 0,\n            rx: 0,\n            ry: 0,\n            src: "",\n            stroke: "#000",\n            "stroke-dasharray": "",\n            "stroke-linecap": "butt",\n            "stroke-linejoin": "butt",\n            "stroke-miterlimit": 0,\n            "stroke-opacity": 1,\n            "stroke-width": 1,\n            target: "_blank",\n            "text-anchor": "middle",\n            title: "Raphael",\n            transform: "",\n            width: 0,\n            x: 0,\n            y: 0,\n            "class": ""\n        },\n        availableAnimAttrs = R._availableAnimAttrs = {\n            blur: nu,\n            "clip-rect": "csv",\n            cx: nu,\n            cy: nu,\n            fill: "colour",\n            "fill-opacity": nu,\n            "font-size": nu,\n            height: nu,\n            opacity: nu,\n            path: "path",\n            r: nu,\n            rx: nu,\n            ry: nu,\n            stroke: "colour",\n            "stroke-opacity": nu,\n            "stroke-width": nu,\n            transform: "transform",\n            width: nu,\n            x: nu,\n            y: nu\n        },\n        whitespace = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]/g,\n        commaSpaces = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/,\n        hsrg = {hs: 1, rg: 1},\n        p2s = /,?([achlmqrstvxz]),?/gi,\n        pathCommand = /([achlmrqstvz])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        tCommand = /([rstm])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/ig,\n        radial_gradient = R._radial_gradient = /^r(?:\\(([^,]+?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*([^\\)]+?)\\))?/,\n        eldata = {},\n        sortByKey = function (a, b) {\n            return a.key - b.key;\n        },\n        sortByNumber = function (a, b) {\n            return toFloat(a) - toFloat(b);\n        },\n        fun = function () {},\n        pipe = function (x) {\n            return x;\n        },\n        rectPath = R._rectPath = function (x, y, w, h, r) {\n            if (r) {\n                return [["M", x + r, y], ["l", w - r * 2, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, h - r * 2], ["a", r, r, 0, 0, 1, -r, r], ["l", r * 2 - w, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, r * 2 - h], ["a", r, r, 0, 0, 1, r, -r], ["z"]];\n            }\n            return [["M", x, y], ["l", w, 0], ["l", 0, h], ["l", -w, 0], ["z"]];\n        },\n        ellipsePath = function (x, y, rx, ry) {\n            if (ry == null) {\n                ry = rx;\n            }\n            return [["M", x, y], ["m", 0, -ry], ["a", rx, ry, 0, 1, 1, 0, 2 * ry], ["a", rx, ry, 0, 1, 1, 0, -2 * ry], ["z"]];\n        },\n        getPath = R._getPath = {\n            path: function (el) {\n                return el.attr("path");\n            },\n            circle: function (el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.r);\n            },\n            ellipse: function (el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\n            },\n            rect: function (el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\n            },\n            image: function (el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height);\n            },\n            text: function (el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            },\n            set : function(el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            }\n        },\n        /*\\\n         * Raphael.mapPath\n         [ method ]\n         **\n         * Transform the path string with given matrix.\n         > Parameters\n         - path (string) path string\n         - matrix (object) see @Matrix\n         = (string) transformed path string\n        \\*/\n        mapPath = R.mapPath = function (path, matrix) {\n            if (!matrix) {\n                return path;\n            }\n            var x, y, i, j, ii, jj, pathi;\n            path = path2curve(path);\n            for (i = 0, ii = path.length; i < ii; i++) {\n                pathi = path[i];\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\n                    x = matrix.x(pathi[j], pathi[j + 1]);\n                    y = matrix.y(pathi[j], pathi[j + 1]);\n                    pathi[j] = x;\n                    pathi[j + 1] = y;\n                }\n            }\n            return path;\n        };\n\n    R._g = g;\n    /*\\\n     * Raphael.type\n     [ property (string) ]\n     **\n     * Can be \u201cSVG\u201d, \u201cVML\u201d or empty, depending on browser support.\n    \\*/\n    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML");\n    if (R.type == "VML") {\n        var d = g.doc.createElement("div"),\n            b;\n        d.innerHTML = \'<v:shape adj="1"/>\';\n        b = d.firstChild;\n        b.style.behavior = "url(#default#VML)";\n        if (!(b && typeof b.adj == "object")) {\n            return (R.type = E);\n        }\n        d = null;\n    }\n    /*\\\n     * Raphael.svg\n     [ property (boolean) ]\n     **\n     * `true` if browser supports SVG.\n    \\*/\n    /*\\\n     * Raphael.vml\n     [ property (boolean) ]\n     **\n     * `true` if browser supports VML.\n    \\*/\n    R.svg = !(R.vml = R.type == "VML");\n    R._Paper = Paper;\n    /*\\\n     * Raphael.fn\n     [ property (object) ]\n     **\n     * You can add your own method to the canvas. For example if you want to draw a pie chart,\n     * you can create your own pie chart function and ship it as a Rapha\xebl plugin. To do this\n     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\n     * Rapha\xebl instance is created, otherwise it will take no effect. Please note that the\n     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\n     * ensure any namespacing ensures proper context.\n     > Usage\n     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\n     |     return this.path( ... );\n     | };\n     | // or create namespace\n     | Raphael.fn.mystuff = {\n     |     arrow: function () {\u2026},\n     |     star: function () {\u2026},\n     |     // etc\u2026\n     | };\n     | var paper = Raphael(10, 10, 630, 480);\n     | // then use it\n     | paper.arrow(10, 10, 30, 30, 5).attr({fill: "#f00"});\n     | paper.mystuff.arrow();\n     | paper.mystuff.star();\n    \\*/\n    R.fn = paperproto = Paper.prototype = R.prototype;\n    R._id = 0;\n    /*\\\n     * Raphael.is\n     [ method ]\n     **\n     * Handful of replacements for `typeof` operator.\n     > Parameters\n     - o (\u2026) any object or primitive\n     - type (string) name of the type, i.e. \u201cstring\u201d, \u201cfunction\u201d, \u201cnumber\u201d, etc.\n     = (boolean) is given value is of given type\n    \\*/\n    R.is = function (o, type) {\n        type = lowerCase.call(type);\n        if (type == "finite") {\n            return !isnan[has](+o);\n        }\n        if (type == "array") {\n            return o instanceof Array;\n        }\n        return  (type == "null" && o === null) ||\n                (type == typeof o && o !== null) ||\n                (type == "object" && o === Object(o)) ||\n                (type == "array" && Array.isArray && Array.isArray(o)) ||\n                objectToString.call(o).slice(8, -1).toLowerCase() == type;\n    };\n\n    function clone(obj) {\n        if (typeof obj == "function" || Object(obj) !== obj) {\n            return obj;\n        }\n        var res = new obj.constructor;\n        for (var key in obj) if (obj[has](key)) {\n            res[key] = clone(obj[key]);\n        }\n        return res;\n    }\n\n    /*\\\n     * Raphael.angle\n     [ method ]\n     **\n     * Returns angle between two or three points\n     > Parameters\n     - x1 (number) x coord of first point\n     - y1 (number) y coord of first point\n     - x2 (number) x coord of second point\n     - y2 (number) y coord of second point\n     - x3 (number) #optional x coord of third point\n     - y3 (number) #optional y coord of third point\n     = (number) angle in degrees.\n    \\*/\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\n        if (x3 == null) {\n            var x = x1 - x2,\n                y = y1 - y2;\n            if (!x && !y) {\n                return 0;\n            }\n            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\n        } else {\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\n        }\n    };\n    /*\\\n     * Raphael.rad\n     [ method ]\n     **\n     * Transform angle to radians\n     > Parameters\n     - deg (number) angle in degrees\n     = (number) angle in radians.\n    \\*/\n    R.rad = function (deg) {\n        return deg % 360 * PI / 180;\n    };\n    /*\\\n     * Raphael.deg\n     [ method ]\n     **\n     * Transform angle to degrees\n     > Parameters\n     - rad (number) angle in radians\n     = (number) angle in degrees.\n    \\*/\n    R.deg = function (rad) {\n        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;\n    };\n    /*\\\n     * Raphael.snapTo\n     [ method ]\n     **\n     * Snaps given value to given grid.\n     > Parameters\n     - values (array|number) given array of values or step of the grid\n     - value (number) value to adjust\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\n     = (number) adjusted value.\n    \\*/\n    R.snapTo = function (values, value, tolerance) {\n        tolerance = R.is(tolerance, "finite") ? tolerance : 10;\n        if (R.is(values, array)) {\n            var i = values.length;\n            while (i--) if (abs(values[i] - value) <= tolerance) {\n                return values[i];\n            }\n        } else {\n            values = +values;\n            var rem = value % values;\n            if (rem < tolerance) {\n                return value - rem;\n            }\n            if (rem > values - tolerance) {\n                return value - rem + values;\n            }\n        }\n        return value;\n    };\n\n    /*\\\n     * Raphael.createUUID\n     [ method ]\n     **\n     * Returns RFC4122, version 4 ID\n    \\*/\n    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {\n        return function () {\n            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx, uuidReplacer).toUpperCase();\n        };\n    })(/[xy]/g, function (c) {\n        var r = math.random() * 16 | 0,\n            v = c == "x" ? r : (r & 3 | 8);\n        return v.toString(16);\n    });\n\n    /*\\\n     * Raphael.setWindow\n     [ method ]\n     **\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\n     > Parameters\n     - newwin (window) new window object\n    \\*/\n    R.setWindow = function (newwin) {\n        eve("raphael.setWindow", R, g.win, newwin);\n        g.win = newwin;\n        g.doc = g.win.document;\n        if (R._engine.initWin) {\n            R._engine.initWin(g.win);\n        }\n    };\n    var toHex = function (color) {\n        if (R.vml) {\n            // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\n            var trim = /^\\s+|\\s+$/g;\n            var bod;\n            try {\n                var docum = new ActiveXObject("htmlfile");\n                docum.write("<body>");\n                docum.close();\n                bod = docum.body;\n            } catch(e) {\n                bod = createPopup().document.body;\n            }\n            var range = bod.createTextRange();\n            toHex = cacher(function (color) {\n                try {\n                    bod.style.color = Str(color).replace(trim, E);\n                    var value = range.queryCommandValue("ForeColor");\n                    value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\n                    return "#" + ("000000" + value.toString(16)).slice(-6);\n                } catch(e) {\n                    return "none";\n                }\n            });\n        } else {\n            var i = g.doc.createElement("i");\n            i.title = "Rapha\\xebl Colour Picker";\n            i.style.display = "none";\n            g.doc.body.appendChild(i);\n            toHex = cacher(function (color) {\n                i.style.color = color;\n                return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue("color");\n            });\n        }\n        return toHex(color);\n    },\n    hsbtoString = function () {\n        return "hsb(" + [this.h, this.s, this.b] + ")";\n    },\n    hsltoString = function () {\n        return "hsl(" + [this.h, this.s, this.l] + ")";\n    },\n    rgbtoString = function () {\n        return this.hex;\n    },\n    prepareRGB = function (r, g, b) {\n        if (g == null && R.is(r, "object") && "r" in r && "g" in r && "b" in r) {\n            b = r.b;\n            g = r.g;\n            r = r.r;\n        }\n        if (g == null && R.is(r, string)) {\n            var clr = R.getRGB(r);\n            r = clr.r;\n            g = clr.g;\n            b = clr.b;\n        }\n        if (r > 1 || g > 1 || b > 1) {\n            r /= 255;\n            g /= 255;\n            b /= 255;\n        }\n\n        return [r, g, b];\n    },\n    packageRGB = function (r, g, b, o) {\n        r *= 255;\n        g *= 255;\n        b *= 255;\n        var rgb = {\n            r: r,\n            g: g,\n            b: b,\n            hex: R.rgb(r, g, b),\n            toString: rgbtoString\n        };\n        R.is(o, "finite") && (rgb.opacity = o);\n        return rgb;\n    };\n\n    /*\\\n     * Raphael.color\n     [ method ]\n     **\n     * Parses the color string and returns object with all values for the given color.\n     > Parameters\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\n     = (object) Combined RGB & HSB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022,\n     o     error (boolean) `true` if string can\u2019t be parsed,\n     o     h (number) hue,\n     o     s (number) saturation,\n     o     v (number) value (brightness),\n     o     l (number) lightness\n     o }\n    \\*/\n    R.color = function (clr) {\n        var rgb;\n        if (R.is(clr, "object") && "h" in clr && "s" in clr && "b" in clr) {\n            rgb = R.hsb2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else if (R.is(clr, "object") && "h" in clr && "s" in clr && "l" in clr) {\n            rgb = R.hsl2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else {\n            if (R.is(clr, "string")) {\n                clr = R.getRGB(clr);\n            }\n            if (R.is(clr, "object") && "r" in clr && "g" in clr && "b" in clr) {\n                rgb = R.rgb2hsl(clr);\n                clr.h = rgb.h;\n                clr.s = rgb.s;\n                clr.l = rgb.l;\n                rgb = R.rgb2hsb(clr);\n                clr.v = rgb.b;\n            } else {\n                clr = {hex: "none"};\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\n            }\n        }\n        clr.toString = rgbtoString;\n        return clr;\n    };\n    /*\\\n     * Raphael.hsb2rgb\n     [ method ]\n     **\n     * Converts HSB values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - v (number) value or brightness\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022\n     o }\n    \\*/\n    R.hsb2rgb = function (h, s, v, o) {\n        if (this.is(h, "object") && "h" in h && "s" in h && "b" in h) {\n            v = h.b;\n            s = h.s;\n            o = h.o;\n            h = h.h;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = v * s;\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = v - C;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n    /*\\\n     * Raphael.hsl2rgb\n     [ method ]\n     **\n     * Converts HSL values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022\n     o }\n    \\*/\n    R.hsl2rgb = function (h, s, l, o) {\n        if (this.is(h, "object") && "h" in h && "s" in h && "l" in h) {\n            l = h.l;\n            s = h.s;\n            h = h.h;\n        }\n        if (h > 1 || s > 1 || l > 1) {\n            h /= 360;\n            s /= 100;\n            l /= 100;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = 2 * s * (l < .5 ? l : 1 - l);\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = l - C / 2;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n    /*\\\n     * Raphael.rgb2hsb\n     [ method ]\n     **\n     * Converts RGB values to HSB object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSB object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     b (number) brightness\n     o }\n    \\*/\n    R.rgb2hsb = function (r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, V, C;\n        V = mmax(r, g, b);\n        C = V - mmin(r, g, b);\n        H = (C == 0 ? null :\n             V == r ? (g - b) / C :\n             V == g ? (b - r) / C + 2 :\n                      (r - g) / C + 4\n            );\n        H = ((H + 360) % 6) * 60 / 360;\n        S = C == 0 ? 0 : C / V;\n        return {h: H, s: S, b: V, toString: hsbtoString};\n    };\n    /*\\\n     * Raphael.rgb2hsl\n     [ method ]\n     **\n     * Converts RGB values to HSL object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSL object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     l (number) luminosity\n     o }\n    \\*/\n    R.rgb2hsl = function (r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, L, M, m, C;\n        M = mmax(r, g, b);\n        m = mmin(r, g, b);\n        C = M - m;\n        H = (C == 0 ? null :\n             M == r ? (g - b) / C :\n             M == g ? (b - r) / C + 2 :\n                      (r - g) / C + 4);\n        H = ((H + 360) % 6) * 60 / 360;\n        L = (M + m) / 2;\n        S = (C == 0 ? 0 :\n             L < .5 ? C / (2 * L) :\n                      C / (2 - 2 * L));\n        return {h: H, s: S, l: L, toString: hsltoString};\n    };\n    R._path2string = function () {\n        return this.join(",").replace(p2s, "$1");\n    };\n    function repush(array, item) {\n        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\n            return array.push(array.splice(i, 1)[0]);\n        }\n    }\n    function cacher(f, scope, postprocessor) {\n        function newf() {\n            var arg = Array.prototype.slice.call(arguments, 0),\n                args = arg.join("\\u2400"),\n                cache = newf.cache = newf.cache || {},\n                count = newf.count = newf.count || [];\n            if (cache[has](args)) {\n                repush(count, args);\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\n            }\n            count.length >= 1e3 && delete cache[count.shift()];\n            count.push(args);\n            cache[args] = f[apply](scope, arg);\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\n        }\n        return newf;\n    }\n\n    var preload = R._preload = function (src, f) {\n        var img = g.doc.createElement("img");\n        img.style.cssText = "position:absolute;left:-9999em;top:-9999em";\n        img.onload = function () {\n            f.call(this);\n            this.onload = null;\n            g.doc.body.removeChild(this);\n        };\n        img.onerror = function () {\n            g.doc.body.removeChild(this);\n        };\n        g.doc.body.appendChild(img);\n        img.src = src;\n    };\n\n    function clrToString() {\n        return this.hex;\n    }\n\n    /*\\\n     * Raphael.getRGB\n     [ method ]\n     **\n     * Parses colour string as RGB object\n     > Parameters\n     - colour (string) colour string in one of formats:\n     # <ul>\n     #     <li>Colour name (\u201c<code>red</code>\u201d, \u201c<code>green</code>\u201d, \u201c<code>cornflowerblue</code>\u201d, etc)</li>\n     #     <li>#\u2022\u2022\u2022 \u2014 shortened HTML colour: (\u201c<code>#000</code>\u201d, \u201c<code>#fc0</code>\u201d, etc)</li>\n     #     <li>#\u2022\u2022\u2022\u2022\u2022\u2022 \u2014 full length HTML colour: (\u201c<code>#000000</code>\u201d, \u201c<code>#bd2300</code>\u201d)</li>\n     #     <li>rgb(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 red, green and blue channels\u2019 values: (\u201c<code>rgb(200,&nbsp;100,&nbsp;0)</code>\u201d)</li>\n     #     <li>rgb(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %: (\u201c<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>\u201d)</li>\n     #     <li>hsb(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 hue, saturation and brightness values: (\u201c<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>\u201d)</li>\n     #     <li>hsb(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %</li>\n     #     <li>hsl(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 same as hsb</li>\n     #     <li>hsl(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as hsb</li>\n     # </ul>\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue\n     o     hex (string) color in HTML/CSS format: #\u2022\u2022\u2022\u2022\u2022\u2022,\n     o     error (boolean) true if string can\u2019t be parsed\n     o }\n    \\*/\n    R.getRGB = cacher(function (colour) {\n        if (!colour || !!((colour = Str(colour)).indexOf("-") + 1)) {\n            return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};\n        }\n        if (colour == "none") {\n            return {r: -1, g: -1, b: -1, hex: "none", toString: clrToString};\n        }\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == "#") && (colour = toHex(colour));\n        var res,\n            red,\n            green,\n            blue,\n            opacity,\n            t,\n            values,\n            rgb = colour.match(colourRegExp);\n        if (rgb) {\n            if (rgb[2]) {\n                blue = toInt(rgb[2].substring(5), 16);\n                green = toInt(rgb[2].substring(3, 5), 16);\n                red = toInt(rgb[2].substring(1, 3), 16);\n            }\n            if (rgb[3]) {\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\n            }\n            if (rgb[4]) {\n                values = rgb[4][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == "%" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == "%" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == "%" && (blue *= 2.55);\n                rgb[1].toLowerCase().slice(0, 4) == "rgba" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);\n            }\n            if (rgb[5]) {\n                values = rgb[5][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == "%" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == "%" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == "%" && (blue *= 2.55);\n                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\\xb0") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == "hsba" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);\n                return R.hsb2rgb(red, green, blue, opacity);\n            }\n            if (rgb[6]) {\n                values = rgb[6][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == "%" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == "%" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == "%" && (blue *= 2.55);\n                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\\xb0") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == "hsla" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);\n                return R.hsl2rgb(red, green, blue, opacity);\n            }\n            rgb = {r: red, g: green, b: blue, toString: clrToString};\n            rgb.hex = "#" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\n            R.is(opacity, "finite") && (rgb.opacity = opacity);\n            return rgb;\n        }\n        return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};\n    }, R);\n    /*\\\n     * Raphael.hsb\n     [ method ]\n     **\n     * Converts HSB values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - b (number) value or brightness\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsb = cacher(function (h, s, b) {\n        return R.hsb2rgb(h, s, b).hex;\n    });\n    /*\\\n     * Raphael.hsl\n     [ method ]\n     **\n     * Converts HSL values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsl = cacher(function (h, s, l) {\n        return R.hsl2rgb(h, s, l).hex;\n    });\n    /*\\\n     * Raphael.rgb\n     [ method ]\n     **\n     * Converts RGB values to hex representation of the colour.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (string) hex representation of the colour.\n    \\*/\n    R.rgb = cacher(function (r, g, b) {\n        function round(x) { return (x + 0.5) | 0; }\n        return "#" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);\n    });\n    /*\\\n     * Raphael.getColor\n     [ method ]\n     **\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\n     > Parameters\n     - value (number) #optional brightness, default is `0.75`\n     = (string) hex representation of the colour.\n    \\*/\n    R.getColor = function (value) {\n        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},\n            rgb = this.hsb2rgb(start.h, start.s, start.b);\n        start.h += .075;\n        if (start.h > 1) {\n            start.h = 0;\n            start.s -= .2;\n            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});\n        }\n        return rgb.hex;\n    };\n    /*\\\n     * Raphael.getColor.reset\n     [ method ]\n     **\n     * Resets spectrum position for @Raphael.getColor back to red.\n    \\*/\n    R.getColor.reset = function () {\n        delete this.start;\n    };\n\n    // http://schepers.cc/getting-to-the-point\n    function catmullRom2bezier(crp, z) {\n        var d = [];\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n            var p = [\n                        {x: +crp[i - 2], y: +crp[i - 1]},\n                        {x: +crp[i],     y: +crp[i + 1]},\n                        {x: +crp[i + 2], y: +crp[i + 3]},\n                        {x: +crp[i + 4], y: +crp[i + 5]}\n                    ];\n            if (z) {\n                if (!i) {\n                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};\n                } else if (iLen - 4 == i) {\n                    p[3] = {x: +crp[0], y: +crp[1]};\n                } else if (iLen - 2 == i) {\n                    p[2] = {x: +crp[0], y: +crp[1]};\n                    p[3] = {x: +crp[2], y: +crp[3]};\n                }\n            } else {\n                if (iLen - 4 == i) {\n                    p[3] = p[2];\n                } else if (!i) {\n                    p[0] = {x: +crp[i], y: +crp[i + 1]};\n                }\n            }\n            d.push(["C",\n                  (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n                  (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n                  (p[1].x + 6 * p[2].x - p[3].x) / 6,\n                  (p[1].y + 6*p[2].y - p[3].y) / 6,\n                  p[2].x,\n                  p[2].y\n            ]);\n        }\n\n        return d;\n    }\n    /*\\\n     * Raphael.parsePathString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of arrays of path segments.\n     > Parameters\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\n     = (array) array of segments.\n    \\*/\n    R.parsePathString = function (pathString) {\n        if (!pathString) {\n            return null;\n        }\n        var pth = paths(pathString);\n        if (pth.arr) {\n            return pathClone(pth.arr);\n        }\n\n        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},\n            data = [];\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\n            data = pathClone(pathString);\n        }\n        if (!data.length) {\n            Str(pathString).replace(pathCommand, function (a, b, c) {\n                var params = [],\n                    name = b.toLowerCase();\n                c.replace(pathValues, function (a, b) {\n                    b && params.push(+b);\n                });\n                if (name == "m" && params.length > 2) {\n                    data.push([b][concat](params.splice(0, 2)));\n                    name = "l";\n                    b = b == "m" ? "l" : "L";\n                }\n                if (name == "r") {\n                    data.push([b][concat](params));\n                } else while (params.length >= paramCounts[name]) {\n                    data.push([b][concat](params.splice(0, paramCounts[name])));\n                    if (!paramCounts[name]) {\n                        break;\n                    }\n                }\n            });\n        }\n        data.toString = R._path2string;\n        pth.arr = pathClone(data);\n        return data;\n    };\n    /*\\\n     * Raphael.parseTransformString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of transformations.\n     > Parameters\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\n     = (array) array of transformations.\n    \\*/\n    R.parseTransformString = cacher(function (TString) {\n        if (!TString) {\n            return null;\n        }\n        var paramCounts = {r: 3, s: 4, t: 2, m: 6},\n            data = [];\n        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption\n            data = pathClone(TString);\n        }\n        if (!data.length) {\n            Str(TString).replace(tCommand, function (a, b, c) {\n                var params = [],\n                    name = lowerCase.call(b);\n                c.replace(pathValues, function (a, b) {\n                    b && params.push(+b);\n                });\n                data.push([b][concat](params));\n            });\n        }\n        data.toString = R._path2string;\n        return data;\n    }, this, function(elem) {\n        if (!elem) return elem;\n        var newData = [];\n        for (var i = 0; i < elem.length; i++) {\n            var newLevel = [];\n            for (var j = 0; j < elem[i].length; j++) {\n                newLevel.push(elem[i][j]);\n            }\n            newData.push(newLevel);\n        }\n      return newData; } );\n    // PATHS\n    var paths = function (ps) {\n        var p = paths.ps = paths.ps || {};\n        if (p[ps]) {\n            p[ps].sleep = 100;\n        } else {\n            p[ps] = {\n                sleep: 100\n            };\n        }\n        setTimeout(function () {\n            for (var key in p) if (p[has](key) && key != ps) {\n                p[key].sleep--;\n                !p[key].sleep && delete p[key];\n            }\n        });\n        return p[ps];\n    };\n    /*\\\n     * Raphael.findDotsAtSegment\n     [ method ]\n     **\n     * Utility method\n     **\n     * Find dot coordinates on the given cubic bezier curve at the given t.\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     - t (number) position on the curve (0..1)\n     = (object) point information in format:\n     o {\n     o     x: (number) x coordinate of the point\n     o     y: (number) y coordinate of the point\n     o     m: {\n     o         x: (number) x coordinate of the left anchor\n     o         y: (number) y coordinate of the left anchor\n     o     }\n     o     n: {\n     o         x: (number) x coordinate of the right anchor\n     o         y: (number) y coordinate of the right anchor\n     o     }\n     o     start: {\n     o         x: (number) x coordinate of the start of the curve\n     o         y: (number) y coordinate of the start of the curve\n     o     }\n     o     end: {\n     o         x: (number) x coordinate of the end of the curve\n     o         y: (number) y coordinate of the end of the curve\n     o     }\n     o     alpha: (number) angle of the curve derivative at the point\n     o }\n    \\*/\n    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t,\n            t13 = pow(t1, 3),\n            t12 = pow(t1, 2),\n            t2 = t * t,\n            t3 = t2 * t,\n            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\n            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\n            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\n            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\n            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\n            ax = t1 * p1x + t * c1x,\n            ay = t1 * p1y + t * c1y,\n            cx = t1 * c2x + t * p2x,\n            cy = t1 * c2y + t * p2y,\n            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\n        (mx > nx || my < ny) && (alpha += 180);\n        return {\n            x: x,\n            y: y,\n            m: {x: mx, y: my},\n            n: {x: nx, y: ny},\n            start: {x: ax, y: ay},\n            end: {x: cx, y: cy},\n            alpha: alpha\n        };\n    };\n    /*\\\n     * Raphael.bezierBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given cubic bezier curve\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     * or\n     - bez (array) array of six points for bezier curve\n     = (object) point information in format:\n     o {\n     o     min: {\n     o         x: (number) x coordinate of the left point\n     o         y: (number) y coordinate of the top point\n     o     }\n     o     max: {\n     o         x: (number) x coordinate of the right point\n     o         y: (number) y coordinate of the bottom point\n     o     }\n     o }\n    \\*/\n    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        if (!R.is(p1x, "array")) {\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n        }\n        var bbox = curveDim.apply(null, p1x);\n        return {\n            x: bbox.min.x,\n            y: bbox.min.y,\n            x2: bbox.max.x,\n            y2: bbox.max.y,\n            width: bbox.max.x - bbox.min.x,\n            height: bbox.max.y - bbox.min.y\n        };\n    };\n    /*\\\n     * Raphael.isPointInsideBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside bounding boxes.\n     > Parameters\n     - bbox (string) bounding box\n     - x (string) x coordinate of the point\n     - y (string) y coordinate of the point\n     = (boolean) `true` if point inside\n    \\*/\n    R.isPointInsideBBox = function (bbox, x, y) {\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\n    };\n    /*\\\n     * Raphael.isBBoxIntersect\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if two bounding boxes intersect\n     > Parameters\n     - bbox1 (string) first bounding box\n     - bbox2 (string) second bounding box\n     = (boolean) `true` if they intersect\n    \\*/\n    R.isBBoxIntersect = function (bbox1, bbox2) {\n        var i = R.isPointInsideBBox;\n        return i(bbox2, bbox1.x, bbox1.y)\n            || i(bbox2, bbox1.x2, bbox1.y)\n            || i(bbox2, bbox1.x, bbox1.y2)\n            || i(bbox2, bbox1.x2, bbox1.y2)\n            || i(bbox1, bbox2.x, bbox2.y)\n            || i(bbox1, bbox2.x2, bbox2.y)\n            || i(bbox1, bbox2.x, bbox2.y2)\n            || i(bbox1, bbox2.x2, bbox2.y2)\n            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\n            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n    };\n    function base3(t, p1, p2, p3, p4) {\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n        return t * t2 - 3 * p1 + 3 * p2;\n    }\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n        if (z == null) {\n            z = 1;\n        }\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\n        var z2 = z / 2,\n            n = 12,\n            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],\n            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],\n            sum = 0;\n        for (var i = 0; i < n; i++) {\n            var ct = z2 * Tvalues[i] + z2,\n                xbase = base3(ct, x1, x2, x3, x4),\n                ybase = base3(ct, y1, y2, y3, y4),\n                comb = xbase * xbase + ybase * ybase;\n            sum += Cvalues[i] * math.sqrt(comb);\n        }\n        return z2 * sum;\n    }\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\n            return;\n        }\n        var t = 1,\n            step = t / 2,\n            t2 = t - step,\n            l,\n            e = .01;\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        while (abs(l - ll) > e) {\n            step /= 2;\n            t2 += (l < ll ? 1 : -1) * step;\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        }\n        return t2;\n    }\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n        if (\n            mmax(x1, x2) < mmin(x3, x4) ||\n            mmin(x1, x2) > mmax(x3, x4) ||\n            mmax(y1, y2) < mmin(y3, y4) ||\n            mmin(y1, y2) > mmax(y3, y4)\n        ) {\n            return;\n        }\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n        if (!denominator) {\n            return;\n        }\n        var px = nx / denominator,\n            py = ny / denominator,\n            px2 = +px.toFixed(2),\n            py2 = +py.toFixed(2);\n        if (\n            px2 < +mmin(x1, x2).toFixed(2) ||\n            px2 > +mmax(x1, x2).toFixed(2) ||\n            px2 < +mmin(x3, x4).toFixed(2) ||\n            px2 > +mmax(x3, x4).toFixed(2) ||\n            py2 < +mmin(y1, y2).toFixed(2) ||\n            py2 > +mmax(y1, y2).toFixed(2) ||\n            py2 < +mmin(y3, y4).toFixed(2) ||\n            py2 > +mmax(y3, y4).toFixed(2)\n        ) {\n            return;\n        }\n        return {x: px, y: py};\n    }\n    function inter(bez1, bez2) {\n        return interHelper(bez1, bez2);\n    }\n    function interCount(bez1, bez2) {\n        return interHelper(bez1, bez2, 1);\n    }\n    function interHelper(bez1, bez2, justCount) {\n        var bbox1 = R.bezierBBox(bez1),\n            bbox2 = R.bezierBBox(bez2);\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\n            return justCount ? 0 : [];\n        }\n        var l1 = bezlen.apply(0, bez1),\n            l2 = bezlen.apply(0, bez2),\n            n1 = mmax(~~(l1 / 5), 1),\n            n2 = mmax(~~(l2 / 5), 1),\n            dots1 = [],\n            dots2 = [],\n            xy = {},\n            res = justCount ? 0 : [];\n        for (var i = 0; i < n1 + 1; i++) {\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\n            dots1.push({x: p.x, y: p.y, t: i / n1});\n        }\n        for (i = 0; i < n2 + 1; i++) {\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\n            dots2.push({x: p.x, y: p.y, t: i / n2});\n        }\n        for (i = 0; i < n1; i++) {\n            for (var j = 0; j < n2; j++) {\n                var di = dots1[i],\n                    di1 = dots1[i + 1],\n                    dj = dots2[j],\n                    dj1 = dots2[j + 1],\n                    ci = abs(di1.x - di.x) < .001 ? "y" : "x",\n                    cj = abs(dj1.x - dj.x) < .001 ? "y" : "x",\n                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n                if (is) {\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\n                        continue;\n                    }\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\n                        if (justCount) {\n                            res++;\n                        } else {\n                            res.push({\n                                x: is.x,\n                                y: is.y,\n                                t1: mmin(t1, 1),\n                                t2: mmin(t2, 1)\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n    /*\\\n     * Raphael.pathIntersection\n     [ method ]\n     **\n     * Utility method\n     **\n     * Finds intersections of two paths\n     > Parameters\n     - path1 (string) path string\n     - path2 (string) path string\n     = (array) dots of intersection\n     o [\n     o     {\n     o         x: (number) x coordinate of the point\n     o         y: (number) y coordinate of the point\n     o         t1: (number) t value for segment of path1\n     o         t2: (number) t value for segment of path2\n     o         segment1: (number) order number for segment of path1\n     o         segment2: (number) order number for segment of path2\n     o         bez1: (array) eight coordinates representing bezi\xe9r curve for the segment of path1\n     o         bez2: (array) eight coordinates representing bezi\xe9r curve for the segment of path2\n     o     }\n     o ]\n    \\*/\n    R.pathIntersection = function (path1, path2) {\n        return interPathHelper(path1, path2);\n    };\n    R.pathIntersectionNumber = function (path1, path2) {\n        return interPathHelper(path1, path2, 1);\n    };\n    function interPathHelper(path1, path2, justCount) {\n        path1 = R._path2curve(path1);\n        path2 = R._path2curve(path2);\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\n            res = justCount ? 0 : [];\n        for (var i = 0, ii = path1.length; i < ii; i++) {\n            var pi = path1[i];\n            if (pi[0] == "M") {\n                x1 = x1m = pi[1];\n                y1 = y1m = pi[2];\n            } else {\n                if (pi[0] == "C") {\n                    bez1 = [x1, y1].concat(pi.slice(1));\n                    x1 = bez1[6];\n                    y1 = bez1[7];\n                } else {\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n                    x1 = x1m;\n                    y1 = y1m;\n                }\n                for (var j = 0, jj = path2.length; j < jj; j++) {\n                    var pj = path2[j];\n                    if (pj[0] == "M") {\n                        x2 = x2m = pj[1];\n                        y2 = y2m = pj[2];\n                    } else {\n                        if (pj[0] == "C") {\n                            bez2 = [x2, y2].concat(pj.slice(1));\n                            x2 = bez2[6];\n                            y2 = bez2[7];\n                        } else {\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n                            x2 = x2m;\n                            y2 = y2m;\n                        }\n                        var intr = interHelper(bez1, bez2, justCount);\n                        if (justCount) {\n                            res += intr;\n                        } else {\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\n                                intr[k].segment1 = i;\n                                intr[k].segment2 = j;\n                                intr[k].bez1 = bez1;\n                                intr[k].bez2 = bez2;\n                            }\n                            res = res.concat(intr);\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n    /*\\\n     * Raphael.isPointInsidePath\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside a given closed path.\n     > Parameters\n     - path (string) path string\n     - x (number) x of the point\n     - y (number) y of the point\n     = (boolean) true, if point is inside the path\n    \\*/\n    R.isPointInsidePath = function (path, x, y) {\n        var bbox = R.pathBBox(path);\n        return R.isPointInsideBBox(bbox, x, y) &&\n               interPathHelper(path, [["M", x, y], ["H", bbox.x2 + 10]], 1) % 2 == 1;\n    };\n    R._removedFactory = function (methodname) {\n        return function () {\n            eve("raphael.log", null, "Rapha\\xebl: you are calling to method \\u201c" + methodname + "\\u201d of removed object", methodname);\n        };\n    };\n    /*\\\n     * Raphael.pathBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given path\n     > Parameters\n     - path (string) path string\n     = (object) bounding box\n     o {\n     o     x: (number) x coordinate of the left top point of the box\n     o     y: (number) y coordinate of the left top point of the box\n     o     x2: (number) x coordinate of the right bottom point of the box\n     o     y2: (number) y coordinate of the right bottom point of the box\n     o     width: (number) width of the box\n     o     height: (number) height of the box\n     o     cx: (number) x coordinate of the center of the box\n     o     cy: (number) y coordinate of the center of the box\n     o }\n    \\*/\n    var pathDimensions = R.pathBBox = function (path) {\n        var pth = paths(path);\n        if (pth.bbox) {\n            return clone(pth.bbox);\n        }\n        if (!path) {\n            return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};\n        }\n        path = path2curve(path);\n        var x = 0,\n            y = 0,\n            X = [],\n            Y = [],\n            p;\n        for (var i = 0, ii = path.length; i < ii; i++) {\n            p = path[i];\n            if (p[0] == "M") {\n                x = p[1];\n                y = p[2];\n                X.push(x);\n                Y.push(y);\n            } else {\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                X = X[concat](dim.min.x, dim.max.x);\n                Y = Y[concat](dim.min.y, dim.max.y);\n                x = p[5];\n                y = p[6];\n            }\n        }\n        var xmin = mmin[apply](0, X),\n            ymin = mmin[apply](0, Y),\n            xmax = mmax[apply](0, X),\n            ymax = mmax[apply](0, Y),\n            width = xmax - xmin,\n            height = ymax - ymin,\n                bb = {\n                x: xmin,\n                y: ymin,\n                x2: xmax,\n                y2: ymax,\n                width: width,\n                height: height,\n                cx: xmin + width / 2,\n                cy: ymin + height / 2\n            };\n        pth.bbox = clone(bb);\n        return bb;\n    },\n        pathClone = function (pathArray) {\n            var res = clone(pathArray);\n            res.toString = R._path2string;\n            return res;\n        },\n        pathToRelative = R._pathToRelative = function (pathArray) {\n            var pth = paths(pathArray);\n            if (pth.rel) {\n                return pathClone(pth.rel);\n            }\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == "M") {\n                x = pathArray[0][1];\n                y = pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res.push(["M", x, y]);\n            }\n            for (var i = start, ii = pathArray.length; i < ii; i++) {\n                var r = res[i] = [],\n                    pa = pathArray[i];\n                if (pa[0] != lowerCase.call(pa[0])) {\n                    r[0] = lowerCase.call(pa[0]);\n                    switch (r[0]) {\n                        case "a":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] - x).toFixed(3);\n                            r[7] = +(pa[7] - y).toFixed(3);\n                            break;\n                        case "v":\n                            r[1] = +(pa[1] - y).toFixed(3);\n                            break;\n                        case "m":\n                            mx = pa[1];\n                            my = pa[2];\n                        default:\n                            for (var j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\n                            }\n                    }\n                } else {\n                    r = res[i] = [];\n                    if (pa[0] == "m") {\n                        mx = pa[1] + x;\n                        my = pa[2] + y;\n                    }\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        res[i][k] = pa[k];\n                    }\n                }\n                var len = res[i].length;\n                switch (res[i][0]) {\n                    case "z":\n                        x = mx;\n                        y = my;\n                        break;\n                    case "h":\n                        x += +res[i][len - 1];\n                        break;\n                    case "v":\n                        y += +res[i][len - 1];\n                        break;\n                    default:\n                        x += +res[i][len - 2];\n                        y += +res[i][len - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.rel = pathClone(res);\n            return res;\n        },\n        pathToAbsolute = R._pathToAbsolute = function (pathArray) {\n            var pth = paths(pathArray);\n            if (pth.abs) {\n                return pathClone(pth.abs);\n            }\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            if (!pathArray || !pathArray.length) {\n                return [["M", 0, 0]];\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == "M") {\n                x = +pathArray[0][1];\n                y = +pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res[0] = ["M", x, y];\n            }\n            var crz = pathArray.length == 3 && pathArray[0][0] == "M" && pathArray[1][0].toUpperCase() == "R" && pathArray[2][0].toUpperCase() == "Z";\n            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n                res.push(r = []);\n                pa = pathArray[i];\n                if (pa[0] != upperCase.call(pa[0])) {\n                    r[0] = upperCase.call(pa[0]);\n                    switch (r[0]) {\n                        case "A":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] + x);\n                            r[7] = +(pa[7] + y);\n                            break;\n                        case "V":\n                            r[1] = +pa[1] + y;\n                            break;\n                        case "H":\n                            r[1] = +pa[1] + x;\n                            break;\n                        case "R":\n                            var dots = [x, y][concat](pa.slice(1));\n                            for (var j = 2, jj = dots.length; j < jj; j++) {\n                                dots[j] = +dots[j] + x;\n                                dots[++j] = +dots[j] + y;\n                            }\n                            res.pop();\n                            res = res[concat](catmullRom2bezier(dots, crz));\n                            break;\n                        case "M":\n                            mx = +pa[1] + x;\n                            my = +pa[2] + y;\n                        default:\n                            for (j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                            }\n                    }\n                } else if (pa[0] == "R") {\n                    dots = [x, y][concat](pa.slice(1));\n                    res.pop();\n                    res = res[concat](catmullRom2bezier(dots, crz));\n                    r = ["R"][concat](pa.slice(-2));\n                } else {\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        r[k] = pa[k];\n                    }\n                }\n                switch (r[0]) {\n                    case "Z":\n                        x = mx;\n                        y = my;\n                        break;\n                    case "H":\n                        x = r[1];\n                        break;\n                    case "V":\n                        y = r[1];\n                        break;\n                    case "M":\n                        mx = r[r.length - 2];\n                        my = r[r.length - 1];\n                    default:\n                        x = r[r.length - 2];\n                        y = r[r.length - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.abs = pathClone(res);\n            return res;\n        },\n        l2c = function (x1, y1, x2, y2) {\n            return [x1, y1, x2, y2, x2, y2];\n        },\n        q2c = function (x1, y1, ax, ay, x2, y2) {\n            var _13 = 1 / 3,\n                _23 = 2 / 3;\n            return [\n                    _13 * x1 + _23 * ax,\n                    _13 * y1 + _23 * ay,\n                    _13 * x2 + _23 * ax,\n                    _13 * y2 + _23 * ay,\n                    x2,\n                    y2\n                ];\n        },\n        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n            // for more information of where this math came from visit:\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n            var _120 = PI * 120 / 180,\n                rad = PI / 180 * (+angle || 0),\n                res = [],\n                xy,\n                rotate = cacher(function (x, y, rad) {\n                    var X = x * math.cos(rad) - y * math.sin(rad),\n                        Y = x * math.sin(rad) + y * math.cos(rad);\n                    return {x: X, y: Y};\n                });\n            if (!recursive) {\n                xy = rotate(x1, y1, -rad);\n                x1 = xy.x;\n                y1 = xy.y;\n                xy = rotate(x2, y2, -rad);\n                x2 = xy.x;\n                y2 = xy.y;\n                var cos = math.cos(PI / 180 * angle),\n                    sin = math.sin(PI / 180 * angle),\n                    x = (x1 - x2) / 2,\n                    y = (y1 - y2) / 2;\n                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n                if (h > 1) {\n                    h = math.sqrt(h);\n                    rx = h * rx;\n                    ry = h * ry;\n                }\n                var rx2 = rx * rx,\n                    ry2 = ry * ry,\n                    k = (large_arc_flag == sweep_flag ? -1 : 1) *\n                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n                    cx = k * rx * y / ry + (x1 + x2) / 2,\n                    cy = k * -ry * x / rx + (y1 + y2) / 2,\n                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n                f1 = x1 < cx ? PI - f1 : f1;\n                f2 = x2 < cx ? PI - f2 : f2;\n                f1 < 0 && (f1 = PI * 2 + f1);\n                f2 < 0 && (f2 = PI * 2 + f2);\n                if (sweep_flag && f1 > f2) {\n                    f1 = f1 - PI * 2;\n                }\n                if (!sweep_flag && f2 > f1) {\n                    f2 = f2 - PI * 2;\n                }\n            } else {\n                f1 = recursive[0];\n                f2 = recursive[1];\n                cx = recursive[2];\n                cy = recursive[3];\n            }\n            var df = f2 - f1;\n            if (abs(df) > _120) {\n                var f2old = f2,\n                    x2old = x2,\n                    y2old = y2;\n                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n                x2 = cx + rx * math.cos(f2);\n                y2 = cy + ry * math.sin(f2);\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n            }\n            df = f2 - f1;\n            var c1 = math.cos(f1),\n                s1 = math.sin(f1),\n                c2 = math.cos(f2),\n                s2 = math.sin(f2),\n                t = math.tan(df / 4),\n                hx = 4 / 3 * rx * t,\n                hy = 4 / 3 * ry * t,\n                m1 = [x1, y1],\n                m2 = [x1 + hx * s1, y1 - hy * c1],\n                m3 = [x2 + hx * s2, y2 - hy * c2],\n                m4 = [x2, y2];\n            m2[0] = 2 * m1[0] - m2[0];\n            m2[1] = 2 * m1[1] - m2[1];\n            if (recursive) {\n                return [m2, m3, m4][concat](res);\n            } else {\n                res = [m2, m3, m4][concat](res).join()[split](",");\n                var newres = [];\n                for (var i = 0, ii = res.length; i < ii; i++) {\n                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n                }\n                return newres;\n            }\n        },\n        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n            var t1 = 1 - t;\n            return {\n                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n            };\n        },\n        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\n                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\n                c = p1x - c1x,\n                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                y = [p1y, p2y],\n                x = [p1x, p2x],\n                dot;\n            abs(t1) > "1e12" && (t1 = .5);\n            abs(t2) > "1e12" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\n            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\n            c = p1y - c1y;\n            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            abs(t1) > "1e12" && (t1 = .5);\n            abs(t2) > "1e12" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            return {\n                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},\n                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}\n            };\n        }),\n        path2curve = R._path2curve = cacher(function (path, path2) {\n            var pth = !path2 && paths(path);\n            if (!path2 && pth.curve) {\n                return pathClone(pth.curve);\n            }\n            var p = pathToAbsolute(path),\n                p2 = path2 && pathToAbsolute(path2),\n                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                processPath = function (path, d, pcom) {\n                    var nx, ny, tq = {T:1, Q:1};\n                    if (!path) {\n                        return ["C", d.x, d.y, d.x, d.y, d.x, d.y];\n                    }\n                    !(path[0] in tq) && (d.qx = d.qy = null);\n                    switch (path[0]) {\n                        case "M":\n                            d.X = path[1];\n                            d.Y = path[2];\n                            break;\n                        case "A":\n                            path = ["C"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\n                            break;\n                        case "S":\n                            if (pcom == "C" || pcom == "S") { // In "S" case we have to take into account, if the previous command is C/S.\n                                nx = d.x * 2 - d.bx;          // And reflect the previous\n                                ny = d.y * 2 - d.by;          // command\'s control point relative to the current point.\n                            }\n                            else {                            // or some else or nothing\n                                nx = d.x;\n                                ny = d.y;\n                            }\n                            path = ["C", nx, ny][concat](path.slice(1));\n                            break;\n                        case "T":\n                            if (pcom == "Q" || pcom == "T") { // In "T" case we have to take into account, if the previous command is Q/T.\n                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar\n                                d.qy = d.y * 2 - d.qy;        // to case "S".\n                            }\n                            else {                            // or something else or nothing\n                                d.qx = d.x;\n                                d.qy = d.y;\n                            }\n                            path = ["C"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                            break;\n                        case "Q":\n                            d.qx = path[1];\n                            d.qy = path[2];\n                            path = ["C"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                            break;\n                        case "L":\n                            path = ["C"][concat](l2c(d.x, d.y, path[1], path[2]));\n                            break;\n                        case "H":\n                            path = ["C"][concat](l2c(d.x, d.y, path[1], d.y));\n                            break;\n                        case "V":\n                            path = ["C"][concat](l2c(d.x, d.y, d.x, path[1]));\n                            break;\n                        case "Z":\n                            path = ["C"][concat](l2c(d.x, d.y, d.X, d.Y));\n                            break;\n                    }\n                    return path;\n                },\n                fixArc = function (pp, i) {\n                    if (pp[i].length > 7) {\n                        pp[i].shift();\n                        var pi = pp[i];\n                        while (pi.length) {\n                            pcoms1[i]="A"; // if created multiple C:s, their original seg is saved\n                            p2 && (pcoms2[i]="A"); // the same as above\n                            pp.splice(i++, 0, ["C"][concat](pi.splice(0, 6)));\n                        }\n                        pp.splice(i, 1);\n                        ii = mmax(p.length, p2 && p2.length || 0);\n                    }\n                },\n                fixM = function (path1, path2, a1, a2, i) {\n                    if (path1 && path2 && path1[i][0] == "M" && path2[i][0] != "M") {\n                        path2.splice(i, 0, ["M", a2.x, a2.y]);\n                        a1.bx = 0;\n                        a1.by = 0;\n                        a1.x = path1[i][1];\n                        a1.y = path1[i][2];\n                        ii = mmax(p.length, p2 && p2.length || 0);\n                    }\n                },\n                pcoms1 = [], // path commands of original path p\n                pcoms2 = [], // path commands of original path p2\n                pfirst = "", // temporary holder for original path command\n                pcom = ""; // holder for previous path command of original path\n            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\n                p[i] && (pfirst = p[i][0]); // save current path command\n\n                if (pfirst != "C") // C is not saved yet, because it may be result of conversion\n                {\n                    pcoms1[i] = pfirst; // Save current path command\n                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom\n                }\n                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n                if (pcoms1[i] != "A" && pfirst == "C") pcoms1[i] = "C"; // A is the only command\n                // which may produce multiple C:s\n                // so we have to make sure that C is also C in original path\n\n                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\n\n                if (p2) { // the same procedures is done to p2\n                    p2[i] && (pfirst = p2[i][0]);\n                    if (pfirst != "C")\n                    {\n                        pcoms2[i] = pfirst;\n                        i && (pcom = pcoms2[i-1]);\n                    }\n                    p2[i] = processPath(p2[i], attrs2, pcom);\n\n                    if (pcoms2[i]!="A" && pfirst=="C") pcoms2[i]="C";\n\n                    fixArc(p2, i);\n                }\n                fixM(p, p2, attrs, attrs2, i);\n                fixM(p2, p, attrs2, attrs, i);\n                var seg = p[i],\n                    seg2 = p2 && p2[i],\n                    seglen = seg.length,\n                    seg2len = p2 && seg2.length;\n                attrs.x = seg[seglen - 2];\n                attrs.y = seg[seglen - 1];\n                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n                attrs2.x = p2 && seg2[seg2len - 2];\n                attrs2.y = p2 && seg2[seg2len - 1];\n            }\n            if (!p2) {\n                pth.curve = pathClone(p);\n            }\n            return p2 ? [p, p2] : p;\n        }, null, pathClone),\n        parseDots = R._parseDots = cacher(function (gradient) {\n            var dots = [];\n            for (var i = 0, ii = gradient.length; i < ii; i++) {\n                var dot = {},\n                    par = gradient[i].match(/^([^:]*):?([\\d\\.]*)/);\n                dot.color = R.getRGB(par[1]);\n                if (dot.color.error) {\n                    return null;\n                }\n                dot.opacity = dot.color.opacity;\n                dot.color = dot.color.hex;\n                par[2] && (dot.offset = par[2] + "%");\n                dots.push(dot);\n            }\n            for (i = 1, ii = dots.length - 1; i < ii; i++) {\n                if (!dots[i].offset) {\n                    var start = toFloat(dots[i - 1].offset || 0),\n                        end = 0;\n                    for (var j = i + 1; j < ii; j++) {\n                        if (dots[j].offset) {\n                            end = dots[j].offset;\n                            break;\n                        }\n                    }\n                    if (!end) {\n                        end = 100;\n                        j = ii;\n                    }\n                    end = toFloat(end);\n                    var d = (end - start) / (j - i + 1);\n                    for (; i < j; i++) {\n                        start += d;\n                        dots[i].offset = start + "%";\n                    }\n                }\n            }\n            return dots;\n        }),\n        tear = R._tear = function (el, paper) {\n            el == paper.top && (paper.top = el.prev);\n            el == paper.bottom && (paper.bottom = el.next);\n            el.next && (el.next.prev = el.prev);\n            el.prev && (el.prev.next = el.next);\n        },\n        tofront = R._tofront = function (el, paper) {\n            if (paper.top === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = null;\n            el.prev = paper.top;\n            paper.top.next = el;\n            paper.top = el;\n        },\n        toback = R._toback = function (el, paper) {\n            if (paper.bottom === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = paper.bottom;\n            el.prev = null;\n            paper.bottom.prev = el;\n            paper.bottom = el;\n        },\n        insertafter = R._insertafter = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.top && (paper.top = el);\n            el2.next && (el2.next.prev = el);\n            el.next = el2.next;\n            el.prev = el2;\n            el2.next = el;\n        },\n        insertbefore = R._insertbefore = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.bottom && (paper.bottom = el);\n            el2.prev && (el2.prev.next = el);\n            el.prev = el2.prev;\n            el2.prev = el;\n            el.next = el2;\n        },\n        /*\\\n         * Raphael.toMatrix\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns matrix of transformations applied to a given path\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (object) @Matrix\n        \\*/\n        toMatrix = R.toMatrix = function (path, transform) {\n            var bb = pathDimensions(path),\n                el = {\n                    _: {\n                        transform: E\n                    },\n                    getBBox: function () {\n                        return bb;\n                    }\n                };\n            extractTransform(el, transform);\n            return el.matrix;\n        },\n        /*\\\n         * Raphael.transformPath\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns path transformed by a given transformation\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (string) path\n        \\*/\n        transformPath = R.transformPath = function (path, transform) {\n            return mapPath(path, toMatrix(path, transform));\n        },\n        extractTransform = R._extractTransform = function (el, tstr) {\n            if (tstr == null) {\n                return el._.transform;\n            }\n            tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || E);\n            var tdata = R.parseTransformString(tstr),\n                deg = 0,\n                dx = 0,\n                dy = 0,\n                sx = 1,\n                sy = 1,\n                _ = el._,\n                m = new Matrix;\n            _.transform = tdata || [];\n            if (tdata) {\n                for (var i = 0, ii = tdata.length; i < ii; i++) {\n                    var t = tdata[i],\n                        tlen = t.length,\n                        command = Str(t[0]).toLowerCase(),\n                        absolute = t[0] != command,\n                        inver = absolute ? m.invert() : 0,\n                        x1,\n                        y1,\n                        x2,\n                        y2,\n                        bb;\n                    if (command == "t" && tlen == 3) {\n                        if (absolute) {\n                            x1 = inver.x(0, 0);\n                            y1 = inver.y(0, 0);\n                            x2 = inver.x(t[1], t[2]);\n                            y2 = inver.y(t[1], t[2]);\n                            m.translate(x2 - x1, y2 - y1);\n                        } else {\n                            m.translate(t[1], t[2]);\n                        }\n                    } else if (command == "r") {\n                        if (tlen == 2) {\n                            bb = bb || el.getBBox(1);\n                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                            deg += t[1];\n                        } else if (tlen == 4) {\n                            if (absolute) {\n                                x2 = inver.x(t[2], t[3]);\n                                y2 = inver.y(t[2], t[3]);\n                                m.rotate(t[1], x2, y2);\n                            } else {\n                                m.rotate(t[1], t[2], t[3]);\n                            }\n                            deg += t[1];\n                        }\n                    } else if (command == "s") {\n                        if (tlen == 2 || tlen == 3) {\n                            bb = bb || el.getBBox(1);\n                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                            sx *= t[1];\n                            sy *= t[tlen - 1];\n                        } else if (tlen == 5) {\n                            if (absolute) {\n                                x2 = inver.x(t[3], t[4]);\n                                y2 = inver.y(t[3], t[4]);\n                                m.scale(t[1], t[2], x2, y2);\n                            } else {\n                                m.scale(t[1], t[2], t[3], t[4]);\n                            }\n                            sx *= t[1];\n                            sy *= t[2];\n                        }\n                    } else if (command == "m" && tlen == 7) {\n                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\n                    }\n                    _.dirtyT = 1;\n                    el.matrix = m;\n                }\n            }\n\n            /*\\\n             * Element.matrix\n             [ property (object) ]\n             **\n             * Keeps @Matrix object, which represents element transformation\n            \\*/\n            el.matrix = m;\n\n            _.sx = sx;\n            _.sy = sy;\n            _.deg = deg;\n            _.dx = dx = m.e;\n            _.dy = dy = m.f;\n\n            if (sx == 1 && sy == 1 && !deg && _.bbox) {\n                _.bbox.x += +dx;\n                _.bbox.y += +dy;\n            } else {\n                _.dirtyT = 1;\n            }\n        },\n        getEmpty = function (item) {\n            var l = item[0];\n            switch (l.toLowerCase()) {\n                case "t": return [l, 0, 0];\n                case "m": return [l, 1, 0, 0, 1, 0, 0];\n                case "r": if (item.length == 4) {\n                    return [l, 0, item[2], item[3]];\n                } else {\n                    return [l, 0];\n                }\n                case "s": if (item.length == 5) {\n                    return [l, 1, 1, item[3], item[4]];\n                } else if (item.length == 3) {\n                    return [l, 1, 1];\n                } else {\n                    return [l, 1];\n                }\n            }\n        },\n        equaliseTransform = R._equaliseTransform = function (t1, t2) {\n            t2 = Str(t2).replace(/\\.{3}|\\u2026/g, t1);\n            t1 = R.parseTransformString(t1) || [];\n            t2 = R.parseTransformString(t2) || [];\n            var maxlength = mmax(t1.length, t2.length),\n                from = [],\n                to = [],\n                i = 0, j, jj,\n                tt1, tt2;\n            for (; i < maxlength; i++) {\n                tt1 = t1[i] || getEmpty(t2[i]);\n                tt2 = t2[i] || getEmpty(tt1);\n                if ((tt1[0] != tt2[0]) ||\n                    (tt1[0].toLowerCase() == "r" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\n                    (tt1[0].toLowerCase() == "s" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\n                    ) {\n                    return;\n                }\n                from[i] = [];\n                to[i] = [];\n                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\n                    j in tt1 && (from[i][j] = tt1[j]);\n                    j in tt2 && (to[i][j] = tt2[j]);\n                }\n            }\n            return {\n                from: from,\n                to: to\n            };\n        };\n    R._getContainer = function (x, y, w, h) {\n        var container;\n        container = h == null && !R.is(x, "object") ? g.doc.getElementById(x) : x;\n        if (container == null) {\n            return;\n        }\n        if (container.tagName) {\n            if (y == null) {\n                return {\n                    container: container,\n                    width: container.style.pixelWidth || container.offsetWidth,\n                    height: container.style.pixelHeight || container.offsetHeight\n                };\n            } else {\n                return {\n                    container: container,\n                    width: y,\n                    height: w\n                };\n            }\n        }\n        return {\n            container: 1,\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        };\n    };\n    /*\\\n     * Raphael.pathToRelative\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to relative form\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.pathToRelative = pathToRelative;\n    R._engine = {};\n    /*\\\n     * Raphael.path2curve\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to a new path where all segments are cubic bezier curves.\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.path2curve = path2curve;\n    /*\\\n     * Raphael.matrix\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns matrix based on given parameters.\n     > Parameters\n     - a (number)\n     - b (number)\n     - c (number)\n     - d (number)\n     - e (number)\n     - f (number)\n     = (object) @Matrix\n    \\*/\n    R.matrix = function (a, b, c, d, e, f) {\n        return new Matrix(a, b, c, d, e, f);\n    };\n    function Matrix(a, b, c, d, e, f) {\n        if (a != null) {\n            this.a = +a;\n            this.b = +b;\n            this.c = +c;\n            this.d = +d;\n            this.e = +e;\n            this.f = +f;\n        } else {\n            this.a = 1;\n            this.b = 0;\n            this.c = 0;\n            this.d = 1;\n            this.e = 0;\n            this.f = 0;\n        }\n    }\n    (function (matrixproto) {\n        /*\\\n         * Matrix.add\n         [ method ]\n         **\n         * Adds given matrix to existing one.\n         > Parameters\n         - a (number)\n         - b (number)\n         - c (number)\n         - d (number)\n         - e (number)\n         - f (number)\n         or\n         - matrix (object) @Matrix\n        \\*/\n        matrixproto.add = function (a, b, c, d, e, f) {\n            var out = [[], [], []],\n                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\n                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\n                x, y, z, res;\n\n            if (a && a instanceof Matrix) {\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\n            }\n\n            for (x = 0; x < 3; x++) {\n                for (y = 0; y < 3; y++) {\n                    res = 0;\n                    for (z = 0; z < 3; z++) {\n                        res += m[x][z] * matrix[z][y];\n                    }\n                    out[x][y] = res;\n                }\n            }\n            this.a = out[0][0];\n            this.b = out[1][0];\n            this.c = out[0][1];\n            this.d = out[1][1];\n            this.e = out[0][2];\n            this.f = out[1][2];\n        };\n        /*\\\n         * Matrix.invert\n         [ method ]\n         **\n         * Returns inverted version of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.invert = function () {\n            var me = this,\n                x = me.a * me.d - me.b * me.c;\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\n        };\n        /*\\\n         * Matrix.clone\n         [ method ]\n         **\n         * Returns copy of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.clone = function () {\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n        };\n        /*\\\n         * Matrix.translate\n         [ method ]\n         **\n         * Translate the matrix\n         > Parameters\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.translate = function (x, y) {\n            this.add(1, 0, 0, 1, x, y);\n        };\n        /*\\\n         * Matrix.scale\n         [ method ]\n         **\n         * Scales the matrix\n         > Parameters\n         - x (number)\n         - y (number) #optional\n         - cx (number) #optional\n         - cy (number) #optional\n        \\*/\n        matrixproto.scale = function (x, y, cx, cy) {\n            y == null && (y = x);\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\n            this.add(x, 0, 0, y, 0, 0);\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\n        };\n        /*\\\n         * Matrix.rotate\n         [ method ]\n         **\n         * Rotates the matrix\n         > Parameters\n         - a (number)\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.rotate = function (a, x, y) {\n            a = R.rad(a);\n            x = x || 0;\n            y = y || 0;\n            var cos = +math.cos(a).toFixed(9),\n                sin = +math.sin(a).toFixed(9);\n            this.add(cos, sin, -sin, cos, x, y);\n            this.add(1, 0, 0, 1, -x, -y);\n        };\n        /*\\\n         * Matrix.x\n         [ method ]\n         **\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) x\n        \\*/\n        matrixproto.x = function (x, y) {\n            return x * this.a + y * this.c + this.e;\n        };\n        /*\\\n         * Matrix.y\n         [ method ]\n         **\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) y\n        \\*/\n        matrixproto.y = function (x, y) {\n            return x * this.b + y * this.d + this.f;\n        };\n        matrixproto.get = function (i) {\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\n        };\n        matrixproto.toString = function () {\n            return R.svg ?\n                "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" :\n                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\n        };\n        matrixproto.toFilter = function () {\n            return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) +\n                ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) +\n                ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod=\'auto expand\')";\n        };\n        matrixproto.offset = function () {\n            return [this.e.toFixed(4), this.f.toFixed(4)];\n        };\n        function norm(a) {\n            return a[0] * a[0] + a[1] * a[1];\n        }\n        function normalize(a) {\n            var mag = math.sqrt(norm(a));\n            a[0] && (a[0] /= mag);\n            a[1] && (a[1] /= mag);\n        }\n        /*\\\n         * Matrix.split\n         [ method ]\n         **\n         * Splits matrix into primitive transformations\n         = (object) in format:\n         o dx (number) translation by x\n         o dy (number) translation by y\n         o scalex (number) scale by x\n         o scaley (number) scale by y\n         o shear (number) shear\n         o rotate (number) rotation in deg\n         o isSimple (boolean) could it be represented via simple transformations\n        \\*/\n        matrixproto.split = function () {\n            var out = {};\n            // translation\n            out.dx = this.e;\n            out.dy = this.f;\n\n            // scale and shear\n            var row = [[this.a, this.c], [this.b, this.d]];\n            out.scalex = math.sqrt(norm(row[0]));\n            normalize(row[0]);\n\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\n\n            out.scaley = math.sqrt(norm(row[1]));\n            normalize(row[1]);\n            out.shear /= out.scaley;\n\n            // rotation\n            var sin = -row[0][1],\n                cos = row[1][1];\n            if (cos < 0) {\n                out.rotate = R.deg(math.acos(cos));\n                if (sin < 0) {\n                    out.rotate = 360 - out.rotate;\n                }\n            } else {\n                out.rotate = R.deg(math.asin(sin));\n            }\n\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\n            return out;\n        };\n        /*\\\n         * Matrix.toTransformString\n         [ method ]\n         **\n         * Return transform string that represents given matrix\n         = (string) transform string\n        \\*/\n        matrixproto.toTransformString = function (shorter) {\n            var s = shorter || this[split]();\n            if (s.isSimple) {\n                s.scalex = +s.scalex.toFixed(4);\n                s.scaley = +s.scaley.toFixed(4);\n                s.rotate = +s.rotate.toFixed(4);\n                return  (s.dx || s.dy ? "t" + [s.dx, s.dy] : E) +\n                        (s.scalex != 1 || s.scaley != 1 ? "s" + [s.scalex, s.scaley, 0, 0] : E) +\n                        (s.rotate ? "r" + [s.rotate, 0, 0] : E);\n            } else {\n                return "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\n            }\n        };\n    })(Matrix.prototype);\n\n    var preventDefault = function () {\n        this.returnValue = false;\n    },\n    preventTouch = function () {\n        return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function () {\n        this.cancelBubble = true;\n    },\n    stopTouch = function () {\n        return this.originalEvent.stopPropagation();\n    },\n    getEventPosition = function (e) {\n        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n\n        return {\n            x: e.clientX + scrollX,\n            y: e.clientY + scrollY\n        };\n    },\n    addEvent = (function () {\n        if (g.doc.addEventListener) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    var pos = getEventPosition(e);\n                    return fn.call(element, e, pos.x, pos.y);\n                };\n                obj.addEventListener(type, f, false);\n\n                if (supportsTouch && touchMap[type]) {\n                    var _f = function (e) {\n                        var pos = getEventPosition(e),\n                            olde = e;\n\n                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n                            if (e.targetTouches[i].target == obj) {\n                                e = e.targetTouches[i];\n                                e.originalEvent = olde;\n                                e.preventDefault = preventTouch;\n                                e.stopPropagation = stopTouch;\n                                break;\n                            }\n                        }\n\n                        return fn.call(element, e, pos.x, pos.y);\n                    };\n                    obj.addEventListener(touchMap[type], _f, false);\n                }\n\n                return function () {\n                    obj.removeEventListener(type, f, false);\n\n                    if (supportsTouch && touchMap[type])\n                        obj.removeEventListener(touchMap[type], _f, false);\n\n                    return true;\n                };\n            };\n        } else if (g.doc.attachEvent) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    e = e || g.win.event;\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                        scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                        x = e.clientX + scrollX,\n                        y = e.clientY + scrollY;\n                    e.preventDefault = e.preventDefault || preventDefault;\n                    e.stopPropagation = e.stopPropagation || stopPropagation;\n                    return fn.call(element, e, x, y);\n                };\n                obj.attachEvent("on" + type, f);\n                var detacher = function () {\n                    obj.detachEvent("on" + type, f);\n                    return true;\n                };\n                return detacher;\n            };\n        }\n    })(),\n    drag = [],\n    dragMove = function (e) {\n        var x = e.clientX,\n            y = e.clientY,\n            scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n            dragi,\n            j = drag.length;\n        while (j--) {\n            dragi = drag[j];\n            if (supportsTouch && e.touches) {\n                var i = e.touches.length,\n                    touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    if (touch.identifier == dragi.el._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        (e.originalEvent ? e.originalEvent : e).preventDefault();\n                        break;\n                    }\n                }\n            } else {\n                e.preventDefault();\n            }\n            var node = dragi.el.node,\n                o,\n                next = node.nextSibling,\n                parent = node.parentNode,\n                display = node.style.display;\n            g.win.opera && parent.removeChild(node);\n            node.style.display = "none";\n            o = dragi.el.paper.getElementByPoint(x, y);\n            node.style.display = display;\n            g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n            o && eve("raphael.drag.over." + dragi.el.id, dragi.el, o);\n            x += scrollX;\n            y += scrollY;\n            eve("raphael.drag.move." + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n        }\n    },\n    dragUp = function (e) {\n        R.unmousemove(dragMove).unmouseup(dragUp);\n        var i = drag.length,\n            dragi;\n        while (i--) {\n            dragi = drag[i];\n            dragi.el._drag = {};\n            eve("raphael.drag.end." + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n        }\n        drag = [];\n    },\n    /*\\\n     * Raphael.el\n     [ property (object) ]\n     **\n     * You can add your own method to elements. This is useful when you want to hack default functionality or\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\n     * you can redefine element method at any time. Expending element methods wouldn\u2019t affect set.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: "#f00"});\n     | };\n     | // then use it\n     | paper.circle(100, 100, 20).red();\n    \\*/\n    elproto = R.el = {};\n    /*\\\n     * Element.click\n     [ method ]\n     **\n     * Adds event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unclick\n     [ method ]\n     **\n     * Removes event handler for click for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.dblclick\n     [ method ]\n     **\n     * Adds event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.undblclick\n     [ method ]\n     **\n     * Removes event handler for double click for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousedown\n     [ method ]\n     **\n     * Adds event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousedown\n     [ method ]\n     **\n     * Removes event handler for mousedown for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousemove\n     [ method ]\n     **\n     * Adds event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousemove\n     [ method ]\n     **\n     * Removes event handler for mousemove for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseout\n     [ method ]\n     **\n     * Adds event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseout\n     [ method ]\n     **\n     * Removes event handler for mouseout for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseover\n     [ method ]\n     **\n     * Adds event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseover\n     [ method ]\n     **\n     * Removes event handler for mouseover for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseup\n     [ method ]\n     **\n     * Adds event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseup\n     [ method ]\n     **\n     * Removes event handler for mouseup for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchstart\n     [ method ]\n     **\n     * Adds event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchstart\n     [ method ]\n     **\n     * Removes event handler for touchstart for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchmove\n     [ method ]\n     **\n     * Adds event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchmove\n     [ method ]\n     **\n     * Removes event handler for touchmove for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchend\n     [ method ]\n     **\n     * Adds event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchend\n     [ method ]\n     **\n     * Removes event handler for touchend for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchcancel\n     [ method ]\n     **\n     * Adds event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchcancel\n     [ method ]\n     **\n     * Removes event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n    for (var i = events.length; i--;) {\n        (function (eventName) {\n            R[eventName] = elproto[eventName] = function (fn, scope) {\n                if (R.is(fn, "function")) {\n                    this.events = this.events || [];\n                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});\n                }\n                return this;\n            };\n            R["un" + eventName] = elproto["un" + eventName] = function (fn) {\n                var events = this.events || [],\n                    l = events.length;\n                while (l--){\n                    if (events[l].name == eventName && (R.is(fn, "undefined") || events[l].f == fn)) {\n                        events[l].unbind();\n                        events.splice(l, 1);\n                        !events.length && delete this.events;\n                    }\n                }\n                return this;\n            };\n        })(events[i]);\n    }\n\n    /*\\\n     * Element.data\n     [ method ]\n     **\n     * Adds or retrieves given value associated with given key.\n     **\n     * See also @Element.removeData\n     > Parameters\n     - key (string) key to store data\n     - value (any) #optional value to store\n     = (object) @Element\n     * or, if value is not specified:\n     = (any) value\n     * or, if key and value are not specified:\n     = (object) Key/value pairs for all the data associated with the element.\n     > Usage\n     | for (var i = 0, i < 5, i++) {\n     |     paper.circle(10 + 15 * i, 10, 10)\n     |          .attr({fill: "#000"})\n     |          .data("i", i)\n     |          .click(function () {\n     |             alert(this.data("i"));\n     |          });\n     | }\n    \\*/\n    elproto.data = function (key, value) {\n        var data = eldata[this.id] = eldata[this.id] || {};\n        if (arguments.length == 0) {\n            return data;\n        }\n        if (arguments.length == 1) {\n            if (R.is(key, "object")) {\n                for (var i in key) if (key[has](i)) {\n                    this.data(i, key[i]);\n                }\n                return this;\n            }\n            eve("raphael.data.get." + this.id, this, data[key], key);\n            return data[key];\n        }\n        data[key] = value;\n        eve("raphael.data.set." + this.id, this, value, key);\n        return this;\n    };\n    /*\\\n     * Element.removeData\n     [ method ]\n     **\n     * Removes value associated with an element by given key.\n     * If key is not provided, removes all the data of the element.\n     > Parameters\n     - key (string) #optional key\n     = (object) @Element\n    \\*/\n    elproto.removeData = function (key) {\n        if (key == null) {\n            delete eldata[this.id];\n        } else {\n            eldata[this.id] && delete eldata[this.id][key];\n        }\n        return this;\n    };\n     /*\\\n     * Element.getData\n     [ method ]\n     **\n     * Retrieves the element data\n     = (object) data\n    \\*/\n    elproto.getData = function () {\n        return clone(eldata[this.id] || {});\n    };\n    /*\\\n     * Element.hover\n     [ method ]\n     **\n     * Adds event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     - icontext (object) #optional context for hover in handler\n     - ocontext (object) #optional context for hover out handler\n     = (object) @Element\n    \\*/\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\n    };\n    /*\\\n     * Element.unhover\n     [ method ]\n     **\n     * Removes event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     = (object) @Element\n    \\*/\n    elproto.unhover = function (f_in, f_out) {\n        return this.unmouseover(f_in).unmouseout(f_out);\n    };\n    var draggable = [];\n    /*\\\n     * Element.drag\n     [ method ]\n     **\n     * Adds event handlers for drag of the element.\n     > Parameters\n     - onmove (function) handler for moving\n     - onstart (function) handler for drag start\n     - onend (function) handler for drag end\n     - mcontext (object) #optional context for moving handler\n     - scontext (object) #optional context for drag start handler\n     - econtext (object) #optional context for drag end handler\n     * Additionally following `drag` events will be triggered: `drag.start.<id>` on start,\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\n     * `drag.over.<id>` will be fired as well.\n     *\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\n     o dx (number) shift by x from the start point\n     o dy (number) shift by y from the start point\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\n     o event (object) DOM event object\n     = (object) @Element\n    \\*/\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n        function start(e) {\n            (e.originalEvent || e).preventDefault();\n            var x = e.clientX,\n                y = e.clientY,\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n            this._drag.id = e.identifier;\n            if (supportsTouch && e.touches) {\n                var i = e.touches.length, touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    this._drag.id = touch.identifier;\n                    if (touch.identifier == this._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        break;\n                    }\n                }\n            }\n            this._drag.x = x + scrollX;\n            this._drag.y = y + scrollY;\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\n            onstart && eve.on("raphael.drag.start." + this.id, onstart);\n            onmove && eve.on("raphael.drag.move." + this.id, onmove);\n            onend && eve.on("raphael.drag.end." + this.id, onend);\n            eve("raphael.drag.start." + this.id, start_scope || move_scope || this, this._drag.x, this._drag.y, e);\n        }\n        this._drag = {};\n        draggable.push({el: this, start: start});\n        this.mousedown(start);\n        return this;\n    };\n    /*\\\n     * Element.onDragOver\n     [ method ]\n     **\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\n     > Parameters\n     - f (function) handler for event, first argument would be the element you are dragging over\n    \\*/\n    elproto.onDragOver = function (f) {\n        f ? eve.on("raphael.drag.over." + this.id, f) : eve.unbind("raphael.drag.over." + this.id);\n    };\n    /*\\\n     * Element.undrag\n     [ method ]\n     **\n     * Removes all drag event handlers from given element.\n    \\*/\n    elproto.undrag = function () {\n        var i = draggable.length;\n        while (i--) if (draggable[i].el == this) {\n            this.unmousedown(draggable[i].start);\n            draggable.splice(i, 1);\n            eve.unbind("raphael.drag.*." + this.id);\n        }\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n        drag = [];\n    };\n    /*\\\n     * Paper.circle\n     [ method ]\n     **\n     * Draws a circle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - r (number) radius\n     = (object) Rapha\xebl element object with type \u201ccircle\u201d\n     **\n     > Usage\n     | var c = paper.circle(50, 50, 40);\n    \\*/\n    paperproto.circle = function (x, y, r) {\n        var out = R._engine.circle(this, x || 0, y || 0, r || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.rect\n     [ method ]\n     *\n     * Draws a rectangle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the top left corner\n     - y (number) y coordinate of the top left corner\n     - width (number) width\n     - height (number) height\n     - r (number) #optional radius for rounded corners, default is 0\n     = (object) Rapha\xebl element object with type \u201crect\u201d\n     **\n     > Usage\n     | // regular rectangle\n     | var c = paper.rect(10, 10, 50, 50);\n     | // rectangle with rounded corners\n     | var c = paper.rect(40, 40, 50, 50, 10);\n    \\*/\n    paperproto.rect = function (x, y, w, h, r) {\n        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.ellipse\n     [ method ]\n     **\n     * Draws an ellipse.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - rx (number) horizontal radius\n     - ry (number) vertical radius\n     = (object) Rapha\xebl element object with type \u201cellipse\u201d\n     **\n     > Usage\n     | var c = paper.ellipse(50, 50, 40, 20);\n    \\*/\n    paperproto.ellipse = function (x, y, rx, ry) {\n        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.path\n     [ method ]\n     **\n     * Creates a path element by given path data string.\n     > Parameters\n     - pathString (string) #optional path string in SVG format.\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\n     | "M10,20L30,40"\n     * Here we can see two commands: \u201cM\u201d, with arguments `(10, 20)` and \u201cL\u201d with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case\u2014relative.\n     *\n     # <p>Here is short list of commands available, for more details see <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a path\'s data attribute\'s format are described in the SVG specification.">SVG path string format</a>.</p>\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\n     # <tr><td>Q</td><td>quadratic B\xe9zier curveto</td><td>(x1 y1 x y)+</td></tr>\n     # <tr><td>T</td><td>smooth quadratic B\xe9zier curveto</td><td>(x y)+</td></tr>\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\n     # <tr><td>R</td><td><a href="http://en.wikipedia.org/wiki/Catmull\u2013Rom_spline#Catmull.E2.80.93Rom_spline">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\n     * * \u201cCatmull-Rom curveto\u201d is a not standard SVG command and added in 2.0 to make life easier.\n     * Note: there is a special case when path consist of just three commands: \u201cM10,10R\u2026z\u201d. In this case path will smoothly connects to its beginning.\n     > Usage\n     | var c = paper.path("M10 10L90 90");\n     | // draw a diagonal line:\n     | // move to 10,10, line to 90,90\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\n    \\*/\n    paperproto.path = function (pathString) {\n        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);\n        var out = R._engine.path(R.format[apply](R, arguments), this);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.image\n     [ method ]\n     **\n     * Embeds an image into the surface.\n     **\n     > Parameters\n     **\n     - src (string) URI of the source image\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - width (number) width of the image\n     - height (number) height of the image\n     = (object) Rapha\xebl element object with type \u201cimage\u201d\n     **\n     > Usage\n     | var c = paper.image("apple.png", 10, 10, 80, 80);\n    \\*/\n    paperproto.image = function (src, x, y, w, h) {\n        var out = R._engine.image(this, src || "about:blank", x || 0, y || 0, w || 0, h || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.text\n     [ method ]\n     **\n     * Draws a text string. If you need line breaks, put \u201c\\n\u201d in the string.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - text (string) The text string to draw\n     = (object) Rapha\xebl element object with type \u201ctext\u201d\n     **\n     > Usage\n     | var t = paper.text(50, 50, "Rapha\xebl\\nkicks\\nbutt!");\n    \\*/\n    paperproto.text = function (x, y, text) {\n        var out = R._engine.text(this, x || 0, y || 0, Str(text));\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.set\n     [ method ]\n     **\n     * Creates array-like object to keep and operate several elements at once.\n     * Warning: it doesn\u2019t create any elements for itself in the page, it just groups existing elements.\n     * Sets act as pseudo elements \u2014 all methods available to an element can be used on a set.\n     = (object) array-like object that represents set of elements\n     **\n     > Usage\n     | var st = paper.set();\n     | st.push(\n     |     paper.circle(10, 10, 5),\n     |     paper.circle(30, 10, 5)\n     | );\n     | st.attr({fill: "red"}); // changes the fill of both circles\n    \\*/\n    paperproto.set = function (itemsArray) {\n        !R.is(itemsArray, "array") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));\n        var out = new Set(itemsArray);\n        this.__set__ && this.__set__.push(out);\n        out["paper"] = this;\n        out["type"] = "set";\n        return out;\n    };\n    /*\\\n     * Paper.setStart\n     [ method ]\n     **\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\n     * @Paper.setFinish will be added to the set.\n     **\n     > Usage\n     | paper.setStart();\n     | paper.circle(10, 10, 5),\n     | paper.circle(30, 10, 5)\n     | var st = paper.setFinish();\n     | st.attr({fill: "red"}); // changes the fill of both circles\n    \\*/\n    paperproto.setStart = function (set) {\n        this.__set__ = set || this.set();\n    };\n    /*\\\n     * Paper.setFinish\n     [ method ]\n     **\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\n     **\n     = (object) set\n    \\*/\n    paperproto.setFinish = function (set) {\n        var out = this.__set__;\n        delete this.__set__;\n        return out;\n    };\n    /*\\\n     * Paper.getSize\n     [ method ]\n     **\n     * Obtains current paper actual size.\n     **\n     = (object)\n     \\*/\n    paperproto.getSize = function () {\n        var container = this.canvas.parentNode;\n        return {\n            width: container.offsetWidth,\n            height: container.offsetHeight\n                };\n        };\n    /*\\\n     * Paper.setSize\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - width (number) new width of the canvas\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setSize = function (width, height) {\n        return R._engine.setSize.call(this, width, height);\n    };\n    /*\\\n     * Paper.setViewBox\n     [ method ]\n     **\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\n     * specifying new boundaries.\n     **\n     > Parameters\n     **\n     - x (number) new x position, default is `0`\n     - y (number) new y position, default is `0`\n     - w (number) new width of the canvas\n     - h (number) new height of the canvas\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\n    \\*/\n    paperproto.setViewBox = function (x, y, w, h, fit) {\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\n    };\n    /*\\\n     * Paper.top\n     [ property ]\n     **\n     * Points to the topmost element on the paper\n    \\*/\n    /*\\\n     * Paper.bottom\n     [ property ]\n     **\n     * Points to the bottom element on the paper\n    \\*/\n    paperproto.top = paperproto.bottom = null;\n    /*\\\n     * Paper.raphael\n     [ property ]\n     **\n     * Points to the @Raphael object/function\n    \\*/\n    paperproto.raphael = R;\n    var getOffset = function (elem) {\n        var box = elem.getBoundingClientRect(),\n            doc = elem.ownerDocument,\n            body = doc.body,\n            docElem = doc.documentElement,\n            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\n            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,\n            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\n        return {\n            y: top,\n            x: left\n        };\n    };\n    /*\\\n     * Paper.getElementByPoint\n     [ method ]\n     **\n     * Returns you topmost element under given point.\n     **\n     = (object) Rapha\xebl element object\n     > Parameters\n     **\n     - x (number) x coordinate from the top left corner of the window\n     - y (number) y coordinate from the top left corner of the window\n     > Usage\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: "#f00"});\n    \\*/\n    paperproto.getElementByPoint = function (x, y) {\n        var paper = this,\n            svg = paper.canvas,\n            target = g.doc.elementFromPoint(x, y);\n        if (g.win.opera && target.tagName == "svg") {\n            var so = getOffset(svg),\n                sr = svg.createSVGRect();\n            sr.x = x - so.x;\n            sr.y = y - so.y;\n            sr.width = sr.height = 1;\n            var hits = svg.getIntersectionList(sr, null);\n            if (hits.length) {\n                target = hits[hits.length - 1];\n            }\n        }\n        if (!target) {\n            return null;\n        }\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\n            target = target.parentNode;\n        }\n        target == paper.canvas.parentNode && (target = svg);\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\n        return target;\n    };\n\n    /*\\\n     * Paper.getElementsByBBox\n     [ method ]\n     **\n     * Returns set of elements that have an intersecting bounding box\n     **\n     > Parameters\n     **\n     - bbox (object) bbox to check with\n     = (object) @Set\n     \\*/\n    paperproto.getElementsByBBox = function (bbox) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (R.isBBoxIntersect(el.getBBox(), bbox)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n\n    /*\\\n     * Paper.getById\n     [ method ]\n     **\n     * Returns you element by its internal ID.\n     **\n     > Parameters\n     **\n     - id (number) id\n     = (object) Rapha\xebl element object\n    \\*/\n    paperproto.getById = function (id) {\n        var bot = this.bottom;\n        while (bot) {\n            if (bot.id == id) {\n                return bot;\n            }\n            bot = bot.next;\n        }\n        return null;\n    };\n    /*\\\n     * Paper.forEach\n     [ method ]\n     **\n     * Executes given function for each element on the paper\n     *\n     * If callback function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Paper object\n     > Usage\n     | paper.forEach(function (el) {\n     |     el.attr({ stroke: "blue" });\n     | });\n    \\*/\n    paperproto.forEach = function (callback, thisArg) {\n        var bot = this.bottom;\n        while (bot) {\n            if (callback.call(thisArg, bot) === false) {\n                return this;\n            }\n            bot = bot.next;\n        }\n        return this;\n    };\n    /*\\\n     * Paper.getElementsByPoint\n     [ method ]\n     **\n     * Returns set of elements that have common point inside\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (object) @Set\n    \\*/\n    paperproto.getElementsByPoint = function (x, y) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n    function x_y() {\n        return this.x + S + this.y;\n    }\n    function x_y_w_h() {\n        return this.x + S + this.y + S + this.width + " \\xd7 " + this.height;\n    }\n    /*\\\n     * Element.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this element\u2019s shape\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point inside the shape\n    \\*/\n    elproto.isPointInside = function (x, y) {\n        var rp = this.realPath = getPath[this.type](this);\n        if (this.attr(\'transform\') && this.attr(\'transform\').length) {\n            rp = R.transformPath(rp, this.attr(\'transform\'));\n        }\n        return R.isPointInsidePath(rp, x, y);\n    };\n    /*\\\n     * Element.getBBox\n     [ method ]\n     **\n     * Return bounding box for a given element\n     **\n     > Parameters\n     **\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\n     = (object) Bounding box object:\n     o {\n     o     x: (number) top left corner x\n     o     y: (number) top left corner y\n     o     x2: (number) bottom right corner x\n     o     y2: (number) bottom right corner y\n     o     width: (number) width\n     o     height: (number) height\n     o }\n    \\*/\n    elproto.getBBox = function (isWithoutTransform) {\n        if (this.removed) {\n            return {};\n        }\n        var _ = this._;\n        if (isWithoutTransform) {\n            if (_.dirty || !_.bboxwt) {\n                this.realPath = getPath[this.type](this);\n                _.bboxwt = pathDimensions(this.realPath);\n                _.bboxwt.toString = x_y_w_h;\n                _.dirty = 0;\n            }\n            return _.bboxwt;\n        }\n        if (_.dirty || _.dirtyT || !_.bbox) {\n            if (_.dirty || !this.realPath) {\n                _.bboxwt = 0;\n                this.realPath = getPath[this.type](this);\n            }\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\n            _.bbox.toString = x_y_w_h;\n            _.dirty = _.dirtyT = 0;\n        }\n        return _.bbox;\n    };\n    /*\\\n     * Element.clone\n     [ method ]\n     **\n     = (object) clone of a given element\n     **\n    \\*/\n    elproto.clone = function () {\n        if (this.removed) {\n            return null;\n        }\n        var out = this.paper[this.type]().attr(this.attr());\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Element.glow\n     [ method ]\n     **\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\n     *\n     * Note: Glow is not connected to the element. If you change element attributes it won\u2019t adjust itself.\n     **\n     > Parameters\n     **\n     - glow (object) #optional parameters object with all properties optional:\n     o {\n     o     width (number) size of the glow, default is `10`\n     o     fill (boolean) will it be filled, default is `false`\n     o     opacity (number) opacity, default is `0.5`\n     o     offsetx (number) horizontal offset, default is `0`\n     o     offsety (number) vertical offset, default is `0`\n     o     color (string) glow colour, default is `black`\n     o }\n     = (object) @Paper.set of elements that represents glow\n    \\*/\n    elproto.glow = function (glow) {\n        if (this.type == "text") {\n            return null;\n        }\n        glow = glow || {};\n        var s = {\n            width: (glow.width || 10) + (+this.attr("stroke-width") || 1),\n            fill: glow.fill || false,\n            opacity: glow.opacity == null ? .5 : glow.opacity,\n            offsetx: glow.offsetx || 0,\n            offsety: glow.offsety || 0,\n            color: glow.color || "#000"\n        },\n            c = s.width / 2,\n            r = this.paper,\n            out = r.set(),\n            path = this.realPath || getPath[this.type](this);\n        path = this.matrix ? mapPath(path, this.matrix) : path;\n        for (var i = 1; i < c + 1; i++) {\n            out.push(r.path(path).attr({\n                stroke: s.color,\n                fill: s.fill ? s.color : "none",\n                "stroke-linejoin": "round",\n                "stroke-linecap": "round",\n                "stroke-width": +(s.width / c * i).toFixed(3),\n                opacity: +(s.opacity / c).toFixed(3)\n            }));\n        }\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\n    };\n    var curveslengths = {},\n    getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n        if (length == null) {\n            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n        } else {\n            return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\n        }\n    },\n    getLengthFactory = function (istotal, subpath) {\n        return function (path, length, onlystart) {\n            path = path2curve(path);\n            var x, y, p, l, sp = "", subpaths = {}, point,\n                len = 0;\n            for (var i = 0, ii = path.length; i < ii; i++) {\n                p = path[i];\n                if (p[0] == "M") {\n                    x = +p[1];\n                    y = +p[2];\n                } else {\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                    if (len + l > length) {\n                        if (subpath && !subpaths.start) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            sp += ["C" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\n                            if (onlystart) {return sp;}\n                            subpaths.start = sp;\n                            sp = ["M" + point.x, point.y + "C" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\n                            len += l;\n                            x = +p[5];\n                            y = +p[6];\n                            continue;\n                        }\n                        if (!istotal && !subpath) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            return {x: point.x, y: point.y, alpha: point.alpha};\n                        }\n                    }\n                    len += l;\n                    x = +p[5];\n                    y = +p[6];\n                }\n                sp += p.shift() + p;\n            }\n            subpaths.end = sp;\n            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\n            point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});\n            return point;\n        };\n    };\n    var getTotalLength = getLengthFactory(1),\n        getPointAtLength = getLengthFactory(),\n        getSubpathsAtLength = getLengthFactory(0, 1);\n    /*\\\n     * Raphael.getTotalLength\n     [ method ]\n     **\n     * Returns length of the given path in pixels.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string.\n     **\n     = (number) length.\n    \\*/\n    R.getTotalLength = getTotalLength;\n    /*\\\n     * Raphael.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    R.getPointAtLength = getPointAtLength;\n    /*\\\n     * Raphael.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given path from given length to given length.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    R.getSubpath = function (path, from, to) {\n        if (this.getTotalLength(path) - to < 1e-6) {\n            return getSubpathsAtLength(path, from).end;\n        }\n        var a = getSubpathsAtLength(path, to, 1);\n        return from ? getSubpathsAtLength(a, from).end : a;\n    };\n    /*\\\n     * Element.getTotalLength\n     [ method ]\n     **\n     * Returns length of the path in pixels. Only works for element of \u201cpath\u201d type.\n     = (number) length.\n    \\*/\n    elproto.getTotalLength = function () {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        if (this.node.getTotalLength) {\n            return this.node.getTotalLength();\n        }\n\n        return getTotalLength(path);\n    };\n    /*\\\n     * Element.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path. Only works for element of \u201cpath\u201d type.\n     **\n     > Parameters\n     **\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    elproto.getPointAtLength = function (length) {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        return getPointAtLength(path, length);\n    };\n    /*\\\n     * Element.getPath\n     [ method ]\n     **\n     * Returns path of the element. Only works for elements of \u201cpath\u201d type and simple elements like circle.\n     = (object) path\n     **\n    \\*/\n    elproto.getPath = function () {\n        var path,\n            getPath = R._getPath[this.type];\n\n        if (this.type == "text" || this.type == "set") {\n            return;\n        }\n\n        if (getPath) {\n            path = getPath(this);\n        }\n\n        return path;\n    };\n    /*\\\n     * Element.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given element from given length to given length. Only works for element of \u201cpath\u201d type.\n     **\n     > Parameters\n     **\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    elproto.getSubpath = function (from, to) {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        return R.getSubpath(path, from, to);\n    };\n    /*\\\n     * Raphael.easing_formulas\n     [ property ]\n     **\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\n     # <ul>\n     #     <li>\u201clinear\u201d</li>\n     #     <li>\u201c&lt;\u201d or \u201ceaseIn\u201d or \u201cease-in\u201d</li>\n     #     <li>\u201c>\u201d or \u201ceaseOut\u201d or \u201cease-out\u201d</li>\n     #     <li>\u201c&lt;>\u201d or \u201ceaseInOut\u201d or \u201cease-in-out\u201d</li>\n     #     <li>\u201cbackIn\u201d or \u201cback-in\u201d</li>\n     #     <li>\u201cbackOut\u201d or \u201cback-out\u201d</li>\n     #     <li>\u201celastic\u201d</li>\n     #     <li>\u201cbounce\u201d</li>\n     # </ul>\n     # <p>See also <a href="http://raphaeljs.com/easing.html">Easing demo</a>.</p>\n    \\*/\n    var ef = R.easing_formulas = {\n        linear: function (n) {\n            return n;\n        },\n        "<": function (n) {\n            return pow(n, 1.7);\n        },\n        ">": function (n) {\n            return pow(n, .48);\n        },\n        "<>": function (n) {\n            var q = .48 - n / 1.04,\n                Q = math.sqrt(.1734 + q * q),\n                x = Q - q,\n                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\n                y = -Q - q,\n                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\n                t = X + Y + .5;\n            return (1 - t) * 3 * t * t + t * t * t;\n        },\n        backIn: function (n) {\n            var s = 1.70158;\n            return n * n * ((s + 1) * n - s);\n        },\n        backOut: function (n) {\n            n = n - 1;\n            var s = 1.70158;\n            return n * n * ((s + 1) * n + s) + 1;\n        },\n        elastic: function (n) {\n            if (n == !!n) {\n                return n;\n            }\n            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;\n        },\n        bounce: function (n) {\n            var s = 7.5625,\n                p = 2.75,\n                l;\n            if (n < (1 / p)) {\n                l = s * n * n;\n            } else {\n                if (n < (2 / p)) {\n                    n -= (1.5 / p);\n                    l = s * n * n + .75;\n                } else {\n                    if (n < (2.5 / p)) {\n                        n -= (2.25 / p);\n                        l = s * n * n + .9375;\n                    } else {\n                        n -= (2.625 / p);\n                        l = s * n * n + .984375;\n                    }\n                }\n            }\n            return l;\n        }\n    };\n    ef.easeIn = ef["ease-in"] = ef["<"];\n    ef.easeOut = ef["ease-out"] = ef[">"];\n    ef.easeInOut = ef["ease-in-out"] = ef["<>"];\n    ef["back-in"] = ef.backIn;\n    ef["back-out"] = ef.backOut;\n\n    var animationElements = [],\n        requestAnimFrame = window.requestAnimationFrame       ||\n                           window.webkitRequestAnimationFrame ||\n                           window.mozRequestAnimationFrame    ||\n                           window.oRequestAnimationFrame      ||\n                           window.msRequestAnimationFrame     ||\n                           function (callback) {\n                               setTimeout(callback, 16);\n                           },\n        animation = function () {\n            var Now = +new Date,\n                l = 0;\n            for (; l < animationElements.length; l++) {\n                var e = animationElements[l];\n                if (e.el.removed || e.paused) {\n                    continue;\n                }\n                var time = Now - e.start,\n                    ms = e.ms,\n                    easing = e.easing,\n                    from = e.from,\n                    diff = e.diff,\n                    to = e.to,\n                    t = e.t,\n                    that = e.el,\n                    set = {},\n                    now,\n                    init = {},\n                    key;\n                if (e.initstatus) {\n                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\n                    e.status = e.initstatus;\n                    delete e.initstatus;\n                    e.stop && animationElements.splice(l--, 1);\n                } else {\n                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\n                }\n                if (time < 0) {\n                    continue;\n                }\n                if (time < ms) {\n                    var pos = easing(time / ms);\n                    for (var attr in from) if (from[has](attr)) {\n                        switch (availableAnimAttrs[attr]) {\n                            case nu:\n                                now = +from[attr] + pos * ms * diff[attr];\n                                break;\n                            case "colour":\n                                now = "rgb(" + [\n                                    upto255(round(from[attr].r + pos * ms * diff[attr].r)),\n                                    upto255(round(from[attr].g + pos * ms * diff[attr].g)),\n                                    upto255(round(from[attr].b + pos * ms * diff[attr].b))\n                                ].join(",") + ")";\n                                break;\n                            case "path":\n                                now = [];\n                                for (var i = 0, ii = from[attr].length; i < ii; i++) {\n                                    now[i] = [from[attr][i][0]];\n                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                    }\n                                    now[i] = now[i].join(S);\n                                }\n                                now = now.join(S);\n                                break;\n                            case "transform":\n                                if (diff[attr].real) {\n                                    now = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                        }\n                                    }\n                                } else {\n                                    var get = function (i) {\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\n                                    };\n                                    // now = [["r", get(2), 0, 0], ["t", get(3), get(4)], ["s", get(0), get(1), 0, 0]];\n                                    now = [["m", get(0), get(1), get(2), get(3), get(4), get(5)]];\n                                }\n                                break;\n                            case "csv":\n                                if (attr == "clip-rect") {\n                                    now = [];\n                                    i = 4;\n                                    while (i--) {\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\n                                    }\n                                }\n                                break;\n                            default:\n                                var from2 = [][concat](from[attr]);\n                                now = [];\n                                i = that.paper.customAttributes[attr].length;\n                                while (i--) {\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\n                                }\n                                break;\n                        }\n                        set[attr] = now;\n                    }\n                    that.attr(set);\n                    (function (id, that, anim) {\n                        setTimeout(function () {\n                            eve("raphael.anim.frame." + id, that, anim);\n                        });\n                    })(that.id, that, e.anim);\n                } else {\n                    (function(f, el, a) {\n                        setTimeout(function() {\n                            eve("raphael.anim.frame." + el.id, el, a);\n                            eve("raphael.anim.finish." + el.id, el, a);\n                            R.is(f, "function") && f.call(el);\n                        });\n                    })(e.callback, that, e.anim);\n                    that.attr(to);\n                    animationElements.splice(l--, 1);\n                    if (e.repeat > 1 && !e.next) {\n                        for (key in to) if (to[has](key)) {\n                            init[key] = e.totalOrigin[key];\n                        }\n                        e.el.attr(init);\n                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\n                    }\n                    if (e.next && !e.stop) {\n                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\n                    }\n                }\n            }\n            animationElements.length && requestAnimFrame(animation);\n        },\n        upto255 = function (color) {\n            return color > 255 ? 255 : color < 0 ? 0 : color;\n        };\n    /*\\\n     * Element.animateWith\n     [ method ]\n     **\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\n     **\n     > Parameters\n     **\n     - el (object) element to sync with\n     - anim (object) animation to sync with\n     - params (object) #optional final attributes for the element, see also @Element.attr\n     - ms (number) #optional number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - element (object) element to sync with\n     - anim (object) animation to sync with\n     - animation (object) #optional animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animateWith = function (el, anim, params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\n            x, y;\n        runAnimation(a, element, a.percents[0], null, element.attr());\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\n            if (animationElements[i].anim == anim && animationElements[i].el == el) {\n                animationElements[ii - 1].start = animationElements[i].start;\n                break;\n            }\n        }\n        return element;\n        //\n        //\n        // var a = params ? R.animation(params, ms, easing, callback) : anim,\n        //     status = element.status(anim);\n        // return this.animate(a).status(a, status * anim.ms / a.ms);\n    };\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n        var cx = 3 * p1x,\n            bx = 3 * (p2x - p1x) - cx,\n            ax = 1 - cx - bx,\n            cy = 3 * p1y,\n            by = 3 * (p2y - p1y) - cy,\n            ay = 1 - cy - by;\n        function sampleCurveX(t) {\n            return ((ax * t + bx) * t + cx) * t;\n        }\n        function solve(x, epsilon) {\n            var t = solveCurveX(x, epsilon);\n            return ((ay * t + by) * t + cy) * t;\n        }\n        function solveCurveX(x, epsilon) {\n            var t0, t1, t2, x2, d2, i;\n            for(t2 = x, i = 0; i < 8; i++) {\n                x2 = sampleCurveX(t2) - x;\n                if (abs(x2) < epsilon) {\n                    return t2;\n                }\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\n                if (abs(d2) < 1e-6) {\n                    break;\n                }\n                t2 = t2 - x2 / d2;\n            }\n            t0 = 0;\n            t1 = 1;\n            t2 = x;\n            if (t2 < t0) {\n                return t0;\n            }\n            if (t2 > t1) {\n                return t1;\n            }\n            while (t0 < t1) {\n                x2 = sampleCurveX(t2);\n                if (abs(x2 - x) < epsilon) {\n                    return t2;\n                }\n                if (x > x2) {\n                    t0 = t2;\n                } else {\n                    t1 = t2;\n                }\n                t2 = (t1 - t0) / 2 + t0;\n            }\n            return t2;\n        }\n        return solve(t, 1 / (200 * duration));\n    }\n    elproto.onAnimation = function (f) {\n        f ? eve.on("raphael.anim.frame." + this.id, f) : eve.unbind("raphael.anim.frame." + this.id);\n        return this;\n    };\n    function Animation(anim, ms) {\n        var percents = [],\n            newAnim = {};\n        this.ms = ms;\n        this.times = 1;\n        if (anim) {\n            for (var attr in anim) if (anim[has](attr)) {\n                newAnim[toFloat(attr)] = anim[attr];\n                percents.push(toFloat(attr));\n            }\n            percents.sort(sortByNumber);\n        }\n        this.anim = newAnim;\n        this.top = percents[percents.length - 1];\n        this.percents = percents;\n    }\n    /*\\\n     * Animation.delay\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given delay.\n     **\n     > Parameters\n     **\n     - delay (number) number of ms to pass between animation start and actual animation\n     **\n     = (object) new altered Animation object\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\n     | circle1.animate(anim); // run the given animation immediately\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\n    \\*/\n    Animation.prototype.delay = function (delay) {\n        var a = new Animation(this.anim, this.ms);\n        a.times = this.times;\n        a.del = +delay || 0;\n        return a;\n    };\n    /*\\\n     * Animation.repeat\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given repetition.\n     **\n     > Parameters\n     **\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\n     **\n     = (object) new altered Animation object\n    \\*/\n    Animation.prototype.repeat = function (times) {\n        var a = new Animation(this.anim, this.ms);\n        a.del = this.del;\n        a.times = math.floor(mmax(times, 0)) || 1;\n        return a;\n    };\n    function runAnimation(anim, element, percent, status, totalOrigin, times) {\n        percent = toFloat(percent);\n        var params,\n            isInAnim,\n            isInAnimSet,\n            percents = [],\n            next,\n            prev,\n            timestamp,\n            ms = anim.ms,\n            from = {},\n            to = {},\n            diff = {};\n        if (status) {\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\n                var e = animationElements[i];\n                if (e.el.id == element.id && e.anim == anim) {\n                    if (e.percent != percent) {\n                        animationElements.splice(i, 1);\n                        isInAnimSet = 1;\n                    } else {\n                        isInAnim = e;\n                    }\n                    element.attr(e.totalOrigin);\n                    break;\n                }\n            }\n        } else {\n            status = +to; // NaN\n        }\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\n            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {\n                percent = anim.percents[i];\n                prev = anim.percents[i - 1] || 0;\n                ms = ms / anim.top * (percent - prev);\n                next = anim.percents[i + 1];\n                params = anim.anim[percent];\n                break;\n            } else if (status) {\n                element.attr(anim.anim[anim.percents[i]]);\n            }\n        }\n        if (!params) {\n            return;\n        }\n        if (!isInAnim) {\n            for (var attr in params) if (params[has](attr)) {\n                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {\n                    from[attr] = element.attr(attr);\n                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);\n                    to[attr] = params[attr];\n                    switch (availableAnimAttrs[attr]) {\n                        case nu:\n                            diff[attr] = (to[attr] - from[attr]) / ms;\n                            break;\n                        case "colour":\n                            from[attr] = R.getRGB(from[attr]);\n                            var toColour = R.getRGB(to[attr]);\n                            diff[attr] = {\n                                r: (toColour.r - from[attr].r) / ms,\n                                g: (toColour.g - from[attr].g) / ms,\n                                b: (toColour.b - from[attr].b) / ms\n                            };\n                            break;\n                        case "path":\n                            var pathes = path2curve(from[attr], to[attr]),\n                                toPath = pathes[1];\n                            from[attr] = pathes[0];\n                            diff[attr] = [];\n                            for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                diff[attr][i] = [0];\n                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\n                                }\n                            }\n                            break;\n                        case "transform":\n                            var _ = element._,\n                                eq = equaliseTransform(_[attr], to[attr]);\n                            if (eq) {\n                                from[attr] = eq.from;\n                                to[attr] = eq.to;\n                                diff[attr] = [];\n                                diff[attr].real = true;\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                    diff[attr][i] = [from[attr][i][0]];\n                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\n                                    }\n                                }\n                            } else {\n                                var m = (element.matrix || new Matrix),\n                                    to2 = {\n                                        _: {transform: _.transform},\n                                        getBBox: function () {\n                                            return element.getBBox(1);\n                                        }\n                                    };\n                                from[attr] = [\n                                    m.a,\n                                    m.b,\n                                    m.c,\n                                    m.d,\n                                    m.e,\n                                    m.f\n                                ];\n                                extractTransform(to2, to[attr]);\n                                to[attr] = to2._.transform;\n                                diff[attr] = [\n                                    (to2.matrix.a - m.a) / ms,\n                                    (to2.matrix.b - m.b) / ms,\n                                    (to2.matrix.c - m.c) / ms,\n                                    (to2.matrix.d - m.d) / ms,\n                                    (to2.matrix.e - m.e) / ms,\n                                    (to2.matrix.f - m.f) / ms\n                                ];\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\n                                // extractTransform(to2, to[attr]);\n                                // diff[attr] = [\n                                //     (to2._.sx - _.sx) / ms,\n                                //     (to2._.sy - _.sy) / ms,\n                                //     (to2._.deg - _.deg) / ms,\n                                //     (to2._.dx - _.dx) / ms,\n                                //     (to2._.dy - _.dy) / ms\n                                // ];\n                            }\n                            break;\n                        case "csv":\n                            var values = Str(params[attr])[split](separator),\n                                from2 = Str(from[attr])[split](separator);\n                            if (attr == "clip-rect") {\n                                from[attr] = from2;\n                                diff[attr] = [];\n                                i = from2.length;\n                                while (i--) {\n                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;\n                                }\n                            }\n                            to[attr] = values;\n                            break;\n                        default:\n                            values = [][concat](params[attr]);\n                            from2 = [][concat](from[attr]);\n                            diff[attr] = [];\n                            i = element.paper.customAttributes[attr].length;\n                            while (i--) {\n                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;\n                            }\n                            break;\n                    }\n                }\n            }\n            var easing = params.easing,\n                easyeasy = R.easing_formulas[easing];\n            if (!easyeasy) {\n                easyeasy = Str(easing).match(bezierrg);\n                if (easyeasy && easyeasy.length == 5) {\n                    var curve = easyeasy;\n                    easyeasy = function (t) {\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\n                    };\n                } else {\n                    easyeasy = pipe;\n                }\n            }\n            timestamp = params.start || anim.start || +new Date;\n            e = {\n                anim: anim,\n                percent: percent,\n                timestamp: timestamp,\n                start: timestamp + (anim.del || 0),\n                status: 0,\n                initstatus: status || 0,\n                stop: false,\n                ms: ms,\n                easing: easyeasy,\n                from: from,\n                diff: diff,\n                to: to,\n                el: element,\n                callback: params.callback,\n                prev: prev,\n                next: next,\n                repeat: times || anim.times,\n                origin: element.attr(),\n                totalOrigin: totalOrigin\n            };\n            animationElements.push(e);\n            if (status && !isInAnim && !isInAnimSet) {\n                e.stop = true;\n                e.start = new Date - ms * status;\n                if (animationElements.length == 1) {\n                    return animation();\n                }\n            }\n            if (isInAnimSet) {\n                e.start = new Date - e.ms * status;\n            }\n            animationElements.length == 1 && requestAnimFrame(animation);\n        } else {\n            isInAnim.initstatus = status;\n            isInAnim.start = new Date - isInAnim.ms * status;\n        }\n        eve("raphael.anim.start." + element.id, element, anim);\n    }\n    /*\\\n     * Raphael.animation\n     [ method ]\n     **\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\n     * See also @Animation.delay and @Animation.repeat methods.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     **\n     = (object) @Animation\n    \\*/\n    R.animation = function (params, ms, easing, callback) {\n        if (params instanceof Animation) {\n            return params;\n        }\n        if (R.is(easing, "function") || !easing) {\n            callback = callback || easing || null;\n            easing = null;\n        }\n        params = Object(params);\n        ms = +ms || 0;\n        var p = {},\n            json,\n            attr;\n        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + "%" != attr) {\n            json = true;\n            p[attr] = params[attr];\n        }\n        if (!json) {\n            // if percent-like syntax is used and end-of-all animation callback used\n            if(callback){\n                // find the last one\n                var lastKey = 0;\n                for(var i in params){\n                    var percent = toInt(i);\n                    if(params[has](i) && percent > lastKey){\n                        lastKey = percent;\n                    }\n                }\n                lastKey += \'%\';\n                // if already defined callback in the last keyframe, skip\n                !params[lastKey].callback && (params[lastKey].callback = callback);\n            }\n          return new Animation(params, ms);\n        } else {\n            easing && (p.easing = easing);\n            callback && (p.callback = callback);\n            return new Animation({100: p}, ms);\n        }\n    };\n    /*\\\n     * Element.animate\n     [ method ]\n     **\n     * Creates and starts animation for given element.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - animation (object) animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animate = function (params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\n        return element;\n    };\n    /*\\\n     * Element.setTime\n     [ method ]\n     **\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\n     **\n     > Parameters\n     **\n     - anim (object) animation object\n     - value (number) number of milliseconds from the beginning of the animation\n     **\n     = (object) original element if `value` is specified\n     * Note, that during animation following events are triggered:\n     *\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\n    \\*/\n    elproto.setTime = function (anim, value) {\n        if (anim && value != null) {\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\n        }\n        return this;\n    };\n    /*\\\n     * Element.status\n     [ method ]\n     **\n     * Gets or sets the status of animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - value (number) #optional 0 \u2013 1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\n     **\n     = (number) status\n     * or\n     = (array) status if `anim` is not specified. Array of objects in format:\n     o {\n     o     anim: (object) animation object\n     o     status: (number) status\n     o }\n     * or\n     = (object) original element if `value` is specified\n    \\*/\n    elproto.status = function (anim, value) {\n        var out = [],\n            i = 0,\n            len,\n            e;\n        if (value != null) {\n            runAnimation(anim, this, -1, mmin(value, 1));\n            return this;\n        } else {\n            len = animationElements.length;\n            for (; i < len; i++) {\n                e = animationElements[i];\n                if (e.el.id == this.id && (!anim || e.anim == anim)) {\n                    if (anim) {\n                        return e.status;\n                    }\n                    out.push({\n                        anim: e.anim,\n                        status: e.status\n                    });\n                }\n            }\n            if (anim) {\n                return 0;\n            }\n            return out;\n        }\n    };\n    /*\\\n     * Element.pause\n     [ method ]\n     **\n     * Stops animation of the element with ability to resume it later on.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.pause = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            if (eve("raphael.anim.pause." + this.id, this, animationElements[i].anim) !== false) {\n                animationElements[i].paused = true;\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Element.resume\n     [ method ]\n     **\n     * Resumes animation if it was paused with @Element.pause method.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.resume = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            var e = animationElements[i];\n            if (eve("raphael.anim.resume." + this.id, this, e.anim) !== false) {\n                delete e.paused;\n                this.status(e.anim, e.status);\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Element.stop\n     [ method ]\n     **\n     * Stops animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.stop = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            if (eve("raphael.anim.stop." + this.id, this, animationElements[i].anim) !== false) {\n                animationElements.splice(i--, 1);\n            }\n        }\n        return this;\n    };\n    function stopAnimation(paper) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {\n            animationElements.splice(i--, 1);\n        }\n    }\n    eve.on("raphael.remove", stopAnimation);\n    eve.on("raphael.clear", stopAnimation);\n    elproto.toString = function () {\n        return "Rapha\\xebl\\u2019s object";\n    };\n\n    // Set\n    var Set = function (items) {\n        this.items = [];\n        this.length = 0;\n        this.type = "set";\n        if (items) {\n            for (var i = 0, ii = items.length; i < ii; i++) {\n                if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\n                    this[this.items.length] = this.items[this.items.length] = items[i];\n                    this.length++;\n                }\n            }\n        }\n    },\n    setproto = Set.prototype;\n    /*\\\n     * Set.push\n     [ method ]\n     **\n     * Adds each argument to the current set.\n     = (object) original element\n    \\*/\n    setproto.push = function () {\n        var item,\n            len;\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\n            item = arguments[i];\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\n                len = this.items.length;\n                this[len] = this.items[len] = item;\n                this.length++;\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Set.pop\n     [ method ]\n     **\n     * Removes last element and returns it.\n     = (object) element\n    \\*/\n    setproto.pop = function () {\n        this.length && delete this[this.length--];\n        return this.items.pop();\n    };\n    /*\\\n     * Set.forEach\n     [ method ]\n     **\n     * Executes given function for each element in the set.\n     *\n     * If function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Set object\n    \\*/\n    setproto.forEach = function (callback, thisArg) {\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            if (callback.call(thisArg, this.items[i], i) === false) {\n                return this;\n            }\n        }\n        return this;\n    };\n    for (var method in elproto) if (elproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname][apply](el, arg);\n                });\n            };\n        })(method);\n    }\n    setproto.attr = function (name, value) {\n        if (name && R.is(name, array) && R.is(name[0], "object")) {\n            for (var j = 0, jj = name.length; j < jj; j++) {\n                this.items[j].attr(name[j]);\n            }\n        } else {\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\n                this.items[i].attr(name, value);\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Set.clear\n     [ method ]\n     **\n     * Removes all elements from the set\n    \\*/\n    setproto.clear = function () {\n        while (this.length) {\n            this.pop();\n        }\n    };\n    /*\\\n     * Set.splice\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - index (number) position of the deletion\n     - count (number) number of element to remove\n     - insertion\u2026 (object) #optional elements to insert\n     = (object) set elements that were deleted\n    \\*/\n    setproto.splice = function (index, count, insertion) {\n        index = index < 0 ? mmax(this.length + index, 0) : index;\n        count = mmax(0, mmin(this.length - index, count));\n        var tail = [],\n            todel = [],\n            args = [],\n            i;\n        for (i = 2; i < arguments.length; i++) {\n            args.push(arguments[i]);\n        }\n        for (i = 0; i < count; i++) {\n            todel.push(this[index + i]);\n        }\n        for (; i < this.length - index; i++) {\n            tail.push(this[index + i]);\n        }\n        var arglen = args.length;\n        for (i = 0; i < arglen + tail.length; i++) {\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\n        }\n        i = this.items.length = this.length -= count - arglen;\n        while (this[i]) {\n            delete this[i++];\n        }\n        return new Set(todel);\n    };\n    /*\\\n     * Set.exclude\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - element (object) element to remove\n     = (boolean) `true` if object was found & removed from the set\n    \\*/\n    setproto.exclude = function (el) {\n        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\n            this.splice(i, 1);\n            return true;\n        }\n    };\n    setproto.animate = function (params, ms, easing, callback) {\n        (R.is(easing, "function") || !easing) && (callback = easing || null);\n        var len = this.items.length,\n            i = len,\n            item,\n            set = this,\n            collector;\n        if (!len) {\n            return this;\n        }\n        callback && (collector = function () {\n            !--len && callback.call(set);\n        });\n        easing = R.is(easing, string) ? easing : collector;\n        var anim = R.animation(params, ms, easing, collector);\n        item = this.items[--i].animate(anim);\n        while (i--) {\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\n            (this.items[i] && !this.items[i].removed) || len--;\n        }\n        return this;\n    };\n    setproto.insertAfter = function (el) {\n        var i = this.items.length;\n        while (i--) {\n            this.items[i].insertAfter(el);\n        }\n        return this;\n    };\n    setproto.getBBox = function () {\n        var x = [],\n            y = [],\n            x2 = [],\n            y2 = [];\n        for (var i = this.items.length; i--;) if (!this.items[i].removed) {\n            var box = this.items[i].getBBox();\n            x.push(box.x);\n            y.push(box.y);\n            x2.push(box.x + box.width);\n            y2.push(box.y + box.height);\n        }\n        x = mmin[apply](0, x);\n        y = mmin[apply](0, y);\n        x2 = mmax[apply](0, x2);\n        y2 = mmax[apply](0, y2);\n        return {\n            x: x,\n            y: y,\n            x2: x2,\n            y2: y2,\n            width: x2 - x,\n            height: y2 - y\n        };\n    };\n    setproto.clone = function (s) {\n        s = this.paper.set();\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            s.push(this.items[i].clone());\n        }\n        return s;\n    };\n    setproto.toString = function () {\n        return "Rapha\\xebl\\u2018s set";\n    };\n\n    setproto.glow = function(glowConfig) {\n        var ret = this.paper.set();\n        this.forEach(function(shape, index){\n            var g = shape.glow(glowConfig);\n            if(g != null){\n                g.forEach(function(shape2, index2){\n                    ret.push(shape2);\n                });\n            }\n        });\n        return ret;\n    };\n\n\n    /*\\\n     * Set.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this set\u2019s elements\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point is inside any of the set\'s elements\n     \\*/\n    setproto.isPointInside = function (x, y) {\n        var isPointInside = false;\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                isPointInside = true;\n                return false; // stop loop\n            }\n        });\n        return isPointInside;\n    };\n\n    /*\\\n     * Raphael.registerFont\n     [ method ]\n     **\n     * Adds given font to the registered set of fonts for Rapha\xebl. Should be used as an internal call from within Cuf\xf3n\u2019s font file.\n     * Returns original parameter, so it could be used with chaining.\n     # <a href="http://wiki.github.com/sorccu/cufon/about">More about Cuf\xf3n and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\n     **\n     > Parameters\n     **\n     - font (object) the font to register\n     = (object) the font you passed in\n     > Usage\n     | Cufon.registerFont(Raphael.registerFont({\u2026}));\n    \\*/\n    R.registerFont = function (font) {\n        if (!font.face) {\n            return font;\n        }\n        this.fonts = this.fonts || {};\n        var fontcopy = {\n                w: font.w,\n                face: {},\n                glyphs: {}\n            },\n            family = font.face["font-family"];\n        for (var prop in font.face) if (font.face[has](prop)) {\n            fontcopy.face[prop] = font.face[prop];\n        }\n        if (this.fonts[family]) {\n            this.fonts[family].push(fontcopy);\n        } else {\n            this.fonts[family] = [fontcopy];\n        }\n        if (!font.svg) {\n            fontcopy.face["units-per-em"] = toInt(font.face["units-per-em"], 10);\n            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {\n                var path = font.glyphs[glyph];\n                fontcopy.glyphs[glyph] = {\n                    w: path.w,\n                    k: {},\n                    d: path.d && "M" + path.d.replace(/[mlcxtrv]/g, function (command) {\n                            return {l: "L", c: "C", x: "z", t: "m", r: "l", v: "c"}[command] || "M";\n                        }) + "z"\n                };\n                if (path.k) {\n                    for (var k in path.k) if (path[has](k)) {\n                        fontcopy.glyphs[glyph].k[k] = path.k[k];\n                    }\n                }\n            }\n        }\n        return font;\n    };\n    /*\\\n     * Paper.getFont\n     [ method ]\n     **\n     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like \u201cMyriad\u201d for \u201cMyriad Pro\u201d.\n     **\n     > Parameters\n     **\n     - family (string) font family name or any word from it\n     - weight (string) #optional font weight\n     - style (string) #optional font style\n     - stretch (string) #optional font stretch\n     = (object) the font object\n     > Usage\n     | paper.print(100, 100, "Test string", paper.getFont("Times", 800), 30);\n    \\*/\n    paperproto.getFont = function (family, weight, style, stretch) {\n        stretch = stretch || "normal";\n        style = style || "normal";\n        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;\n        if (!R.fonts) {\n            return;\n        }\n        var font = R.fonts[family];\n        if (!font) {\n            var name = new RegExp("(^|\\\\s)" + family.replace(/[^\\w\\d\\s+!~.:_-]/g, E) + "(\\\\s|$)", "i");\n            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {\n                if (name.test(fontName)) {\n                    font = R.fonts[fontName];\n                    break;\n                }\n            }\n        }\n        var thefont;\n        if (font) {\n            for (var i = 0, ii = font.length; i < ii; i++) {\n                thefont = font[i];\n                if (thefont.face["font-weight"] == weight && (thefont.face["font-style"] == style || !thefont.face["font-style"]) && thefont.face["font-stretch"] == stretch) {\n                    break;\n                }\n            }\n        }\n        return thefont;\n    };\n    /*\\\n     * Paper.print\n     [ method ]\n     **\n     * Creates path that represent given text written using given font at given position with given size.\n     * Result of the method is path element that contains whole text as a separate path.\n     **\n     > Parameters\n     **\n     - x (number) x position of the text\n     - y (number) y position of the text\n     - string (string) text to print\n     - font (object) font object, see @Paper.getFont\n     - size (number) #optional size of the font, default is `16`\n     - origin (string) #optional could be `"baseline"` or `"middle"`, default is `"middle"`\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\n     - line_spacing (number) #optional number in range `1..3`, default is `1`\n     = (object) resulting path element, which consist of all letters\n     > Usage\n     | var txt = r.print(10, 50, "print", r.getFont("Museo"), 30).attr({fill: "#fff"});\n    \\*/\n    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {\n        origin = origin || "middle"; // baseline|middle\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\n        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);\n        var letters = Str(string)[split](E),\n            shift = 0,\n            notfirst = 0,\n            path = E,\n            scale;\n        R.is(font, "string") && (font = this.getFont(font));\n        if (font) {\n            scale = (size || 16) / font.face["units-per-em"];\n            var bb = font.face.bbox[split](separator),\n                top = +bb[0],\n                lineHeight = bb[3] - bb[1],\n                shifty = 0,\n                height = +bb[1] + (origin == "baseline" ? lineHeight + (+font.face.descent) : lineHeight / 2);\n            for (var i = 0, ii = letters.length; i < ii; i++) {\n                if (letters[i] == "\\n") {\n                    shift = 0;\n                    curr = 0;\n                    notfirst = 0;\n                    shifty += lineHeight * line_spacing;\n                } else {\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\n                        curr = font.glyphs[letters[i]];\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\n                    notfirst = 1;\n                }\n                if (curr && curr.d) {\n                    path += R.transformPath(curr.d, ["t", shift * scale, shifty * scale, "s", scale, scale, top, height, "t", (x - top) / scale, (y - height) / scale]);\n                }\n            }\n        }\n        return this.path(path).attr({\n            fill: "#000",\n            stroke: "none"\n        });\n    };\n\n    /*\\\n     * Paper.add\n     [ method ]\n     **\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\n     **\n     > Parameters\n     **\n     - json (array)\n     = (object) resulting set of imported elements\n     > Usage\n     | paper.add([\n     |     {\n     |         type: "circle",\n     |         cx: 10,\n     |         cy: 10,\n     |         r: 5\n     |     },\n     |     {\n     |         type: "rect",\n     |         x: 10,\n     |         y: 10,\n     |         width: 10,\n     |         height: 10,\n     |         fill: "#fc0"\n     |     }\n     | ]);\n    \\*/\n    paperproto.add = function (json) {\n        if (R.is(json, "array")) {\n            var res = this.set(),\n                i = 0,\n                ii = json.length,\n                j;\n            for (; i < ii; i++) {\n                j = json[i] || {};\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\n            }\n        }\n        return res;\n    };\n\n    /*\\\n     * Raphael.format\n     [ method ]\n     **\n     * Simple format function. Replaces construction of type \u201c`{<number>}`\u201d to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - \u2026 (string) rest of arguments will be treated as parameters for replacement\n     = (string) formated string\n     > Usage\n     | var x = 10,\n     |     y = 20,\n     |     width = 40,\n     |     height = 50;\n     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"\n     | paper.path(Raphael.format("M{0},{1}h{2}v{3}h{4}z", x, y, width, height, -width));\n    \\*/\n    R.format = function (token, params) {\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\n        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {\n            return args[++i] == null ? E : args[i];\n        }));\n        return token || E;\n    };\n    /*\\\n     * Raphael.fullfill\n     [ method ]\n     **\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type \u201c`{<name>}`\u201d to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - json (object) object which properties will be used as a replacement\n     = (string) formated string\n     > Usage\n     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"\n     | paper.path(Raphael.fullfill("M{x},{y}h{dim.width}v{dim.height}h{dim[\'negative width\']}z", {\n     |     x: 10,\n     |     y: 20,\n     |     dim: {\n     |         width: 40,\n     |         height: 50,\n     |         "negative width": -40\n     |     }\n     | }));\n    \\*/\n    R.fullfill = (function () {\n        var tokenRegex = /\\{([^\\}]+)\\}/g,\n            objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[(\'|")(.+?)\\2\\])(\\(\\))?/g, // matches .xxxxx or ["xxxxx"] to run over object properties\n            replacer = function (all, key, obj) {\n                var res = obj;\n                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\n                    name = name || quotedName;\n                    if (res) {\n                        if (name in res) {\n                            res = res[name];\n                        }\n                        typeof res == "function" && isFunc && (res = res());\n                    }\n                });\n                res = (res == null || res == obj ? all : res) + "";\n                return res;\n            };\n        return function (str, obj) {\n            return String(str).replace(tokenRegex, function (all, key) {\n                return replacer(all, key, obj);\n            });\n        };\n    })();\n    /*\\\n     * Raphael.ninja\n     [ method ]\n     **\n     * If you want to leave no trace of Rapha\xebl (Well, Rapha\xebl creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.\n     **\n     = (object) Raphael object\n     > Usage\n     | (function (local_raphael) {\n     |     var paper = local_raphael(10, 10, 320, 200);\n     |     \u2026\n     | })(Raphael.ninja());\n    \\*/\n    R.ninja = function () {\n        if (oldRaphael.was) {\n            g.win.Raphael = oldRaphael.is;\n        } else {\n            // IE8 raises an error when deleting window property\n            window.Raphael = undefined;\n            try {\n                delete window.Raphael;\n            } catch(e) {}\n        }\n        return R;\n    };\n    /*\\\n     * Raphael.st\n     [ property (object) ]\n     **\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\n     * you added, so you will be able to call the same method on sets too.\n     **\n     * See also @Raphael.el.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: "#f00"});\n     | };\n     | Raphael.st.red = function () {\n     |     this.forEach(function (el) {\n     |         el.red();\n     |     });\n     | };\n     | // then use it\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\n    \\*/\n    R.st = setproto;\n\n    eve.on("raphael.DOMload", function () {\n        loaded = true;\n    });\n\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n    (function (doc, loaded, f) {\n        if (doc.readyState == null && doc.addEventListener){\n            doc.addEventListener(loaded, f = function () {\n                doc.removeEventListener(loaded, f, false);\n                doc.readyState = "complete";\n            }, false);\n            doc.readyState = "loading";\n        }\n        function isLoaded() {\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve("raphael.DOMload");\n        }\n        isLoaded();\n    })(document, "DOMContentLoaded");\n\n    return R;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5jb3JlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmFwaGFlbC8uL2Rldi9yYXBoYWVsLmNvcmUuanM/OTRkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoW1wiZXZlXCJdLCBmdW5jdGlvbihldmUpIHtcblxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGEgY2FudmFzIG9iamVjdCBvbiB3aGljaCB0byBkcmF3LlxuICAgICAqIFlvdSBtdXN0IGRvIHRoaXMgZmlyc3QsIGFzIGFsbCBmdXR1cmUgY2FsbHMgdG8gZHJhd2luZyBtZXRob2RzXG4gICAgICogZnJvbSB0aGlzIGluc3RhbmNlIHdpbGwgYmUgYm91bmQgdG8gdGhpcyBjYW52YXMuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGNvbnRhaW5lciAoSFRNTEVsZW1lbnR8c3RyaW5nKSBET00gZWxlbWVudCBvciBpdHMgSUQgd2hpY2ggaXMgZ29pbmcgdG8gYmUgYSBwYXJlbnQgZm9yIGRyYXdpbmcgc3VyZmFjZVxuICAgICAtIHdpZHRoIChudW1iZXIpXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgZXhlY3V0ZWQgaW4gdGhlIGNvbnRleHQgb2YgbmV3bHkgY3JlYXRlZCBwYXBlclxuICAgICAqIG9yXG4gICAgIC0geCAobnVtYmVyKVxuICAgICAtIHkgKG51bWJlcilcbiAgICAgLSB3aWR0aCAobnVtYmVyKVxuICAgICAtIGhlaWdodCAobnVtYmVyKVxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBjb250ZXh0IG9mIG5ld2x5IGNyZWF0ZWQgcGFwZXJcbiAgICAgKiBvclxuICAgICAtIGFsbCAoYXJyYXkpIChmaXJzdCAzIG9yIDQgZWxlbWVudHMgaW4gdGhlIGFycmF5IGFyZSBlcXVhbCB0byBbY29udGFpbmVySUQsIHdpZHRoLCBoZWlnaHRdIG9yIFt4LCB5LCB3aWR0aCwgaGVpZ2h0XS4gVGhlIHJlc3QgYXJlIGVsZW1lbnQgZGVzY3JpcHRpb25zIGluIGZvcm1hdCB7dHlwZTogdHlwZSwgPGF0dHJpYnV0ZXM+fSkuIFNlZSBAUGFwZXIuYWRkLlxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBjb250ZXh0IG9mIG5ld2x5IGNyZWF0ZWQgcGFwZXJcbiAgICAgKiBvclxuICAgICAtIG9uUmVhZHlDYWxsYmFjayAoZnVuY3Rpb24pIGZ1bmN0aW9uIHRoYXQgaXMgZ29pbmcgdG8gYmUgY2FsbGVkIG9uIERPTSByZWFkeSBldmVudC4gWW91IGNhbiBhbHNvIHN1YnNjcmliZSB0byB0aGlzIGV2ZW50IHZpYSBFdmXigJlzIOKAnERPTUxvYWTigJ0gZXZlbnQuIEluIHRoaXMgY2FzZSBtZXRob2QgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICAgPSAob2JqZWN0KSBAUGFwZXJcbiAgICAgPiBVc2FnZVxuICAgICB8IC8vIEVhY2ggb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlcyBjcmVhdGUgYSBjYW52YXNcbiAgICAgfCAvLyB0aGF0IGlzIDMyMHB4IHdpZGUgYnkgMjAwcHggaGlnaC5cbiAgICAgfCAvLyBDYW52YXMgaXMgY3JlYXRlZCBhdCB0aGUgdmlld3BvcnTigJlzIDEwLDUwIGNvb3JkaW5hdGUuXG4gICAgIHwgdmFyIHBhcGVyID0gUmFwaGFlbCgxMCwgNTAsIDMyMCwgMjAwKTtcbiAgICAgfCAvLyBDYW52YXMgaXMgY3JlYXRlZCBhdCB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSAjbm90ZXBhZCBlbGVtZW50XG4gICAgIHwgLy8gKG9yIGl0cyB0b3AgcmlnaHQgY29ybmVyIGluIGRpcj1cInJ0bFwiIGVsZW1lbnRzKVxuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub3RlcGFkXCIpLCAzMjAsIDIwMCk7XG4gICAgIHwgLy8gU2FtZSBhcyBhYm92ZVxuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoXCJub3RlcGFkXCIsIDMyMCwgMjAwKTtcbiAgICAgfCAvLyBJbWFnZSBkdW1wXG4gICAgIHwgdmFyIHNldCA9IFJhcGhhZWwoW1wibm90ZXBhZFwiLCAzMjAsIDIwMCwge1xuICAgICB8ICAgICB0eXBlOiBcInJlY3RcIixcbiAgICAgfCAgICAgeDogMTAsXG4gICAgIHwgICAgIHk6IDEwLFxuICAgICB8ICAgICB3aWR0aDogMjUsXG4gICAgIHwgICAgIGhlaWdodDogMjUsXG4gICAgIHwgICAgIHN0cm9rZTogXCIjZjAwXCJcbiAgICAgfCB9LCB7XG4gICAgIHwgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICB8ICAgICB4OiAzMCxcbiAgICAgfCAgICAgeTogNDAsXG4gICAgIHwgICAgIHRleHQ6IFwiRHVtcFwiXG4gICAgIHwgfV0pO1xuICAgIFxcKi9cbiAgICBmdW5jdGlvbiBSKGZpcnN0KSB7XG4gICAgICAgIGlmIChSLmlzKGZpcnN0LCBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVkID8gZmlyc3QoKSA6IGV2ZS5vbihcInJhcGhhZWwuRE9NbG9hZFwiLCBmaXJzdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoUi5pcyhmaXJzdCwgYXJyYXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gUi5fZW5naW5lLmNyZWF0ZVthcHBseV0oUiwgZmlyc3Quc3BsaWNlKDAsIDMgKyBSLmlzKGZpcnN0WzBdLCBudSkpKS5hZGQoZmlyc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICAgICAgaWYgKFIuaXMoYXJnc1thcmdzLmxlbmd0aCAtIDFdLCBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhcmdzLnBvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkZWQgPyBmLmNhbGwoUi5fZW5naW5lLmNyZWF0ZVthcHBseV0oUiwgYXJncykpIDogZXZlLm9uKFwicmFwaGFlbC5ET01sb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZi5jYWxsKFIuX2VuZ2luZS5jcmVhdGVbYXBwbHldKFIsIGFyZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFIuX2VuZ2luZS5jcmVhdGVbYXBwbHldKFIsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgUi52ZXJzaW9uID0gXCIyLjIuMFwiO1xuICAgIFIuZXZlID0gZXZlO1xuICAgIHZhciBsb2FkZWQsXG4gICAgICAgIHNlcGFyYXRvciA9IC9bLCBdKy8sXG4gICAgICAgIGVsZW1lbnRzID0ge2NpcmNsZTogMSwgcmVjdDogMSwgcGF0aDogMSwgZWxsaXBzZTogMSwgdGV4dDogMSwgaW1hZ2U6IDF9LFxuICAgICAgICBmb3JtYXRyZyA9IC9cXHsoXFxkKylcXH0vZyxcbiAgICAgICAgcHJvdG8gPSBcInByb3RvdHlwZVwiLFxuICAgICAgICBoYXMgPSBcImhhc093blByb3BlcnR5XCIsXG4gICAgICAgIGcgPSB7XG4gICAgICAgICAgICBkb2M6IGRvY3VtZW50LFxuICAgICAgICAgICAgd2luOiB3aW5kb3dcbiAgICAgICAgfSxcbiAgICAgICAgb2xkUmFwaGFlbCA9IHtcbiAgICAgICAgICAgIHdhczogT2JqZWN0LnByb3RvdHlwZVtoYXNdLmNhbGwoZy53aW4sIFwiUmFwaGFlbFwiKSxcbiAgICAgICAgICAgIGlzOiBnLndpbi5SYXBoYWVsXG4gICAgICAgIH0sXG4gICAgICAgIFBhcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLypcXFxuICAgICAgICAgICAgICogUGFwZXIuY2FcbiAgICAgICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICAgICAqKlxuICAgICAgICAgICAgICogU2hvcnRjdXQgZm9yIEBQYXBlci5jdXN0b21BdHRyaWJ1dGVzXG4gICAgICAgICAgICBcXCovXG4gICAgICAgICAgICAvKlxcXG4gICAgICAgICAgICAgKiBQYXBlci5jdXN0b21BdHRyaWJ1dGVzXG4gICAgICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAgICAgKipcbiAgICAgICAgICAgICAqIElmIHlvdSBoYXZlIGEgc2V0IG9mIGF0dHJpYnV0ZXMgdGhhdCB5b3Ugd291bGQgbGlrZSB0byByZXByZXNlbnRcbiAgICAgICAgICAgICAqIGFzIGEgZnVuY3Rpb24gb2Ygc29tZSBudW1iZXIgeW91IGNhbiBkbyBpdCBlYXNpbHkgd2l0aCBjdXN0b20gYXR0cmlidXRlczpcbiAgICAgICAgICAgICA+IFVzYWdlXG4gICAgICAgICAgICAgfCBwYXBlci5jdXN0b21BdHRyaWJ1dGVzLmh1ZSA9IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgICB8ICAgICBudW0gPSBudW0gJSAxO1xuICAgICAgICAgICAgIHwgICAgIHJldHVybiB7ZmlsbDogXCJoc2IoXCIgKyBudW0gKyBcIiwgMC43NSwgMSlcIn07XG4gICAgICAgICAgICAgfCB9O1xuICAgICAgICAgICAgIHwgLy8gQ3VzdG9tIGF0dHJpYnV0ZSDigJxodWXigJ0gd2lsbCBjaGFuZ2UgZmlsbFxuICAgICAgICAgICAgIHwgLy8gdG8gYmUgZ2l2ZW4gaHVlIHdpdGggZml4ZWQgc2F0dXJhdGlvbiBhbmQgYnJpZ2h0bmVzcy5cbiAgICAgICAgICAgICB8IC8vIE5vdyB5b3UgY2FuIHVzZSBpdCBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgfCB2YXIgYyA9IHBhcGVyLmNpcmNsZSgxMCwgMTAsIDEwKS5hdHRyKHtodWU6IC40NX0pO1xuICAgICAgICAgICAgIHwgLy8gb3IgZXZlbiBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgfCBjLmFuaW1hdGUoe2h1ZTogMX0sIDFlMyk7XG4gICAgICAgICAgICAgfFxuICAgICAgICAgICAgIHwgLy8gWW91IGNvdWxkIGFsc28gY3JlYXRlIGN1c3RvbSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICB8IC8vIHdpdGggbXVsdGlwbGUgcGFyYW1ldGVyczpcbiAgICAgICAgICAgICB8IHBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMuaHNiID0gZnVuY3Rpb24gKGgsIHMsIGIpIHtcbiAgICAgICAgICAgICB8ICAgICByZXR1cm4ge2ZpbGw6IFwiaHNiKFwiICsgW2gsIHMsIGJdLmpvaW4oXCIsXCIpICsgXCIpXCJ9O1xuICAgICAgICAgICAgIHwgfTtcbiAgICAgICAgICAgICB8IGMuYXR0cih7aHNiOiBcIjAuNSAuOCAxXCJ9KTtcbiAgICAgICAgICAgICB8IGMuYW5pbWF0ZSh7aHNiOiBbMSwgMCwgMC41XX0sIDFlMyk7XG4gICAgICAgICAgICBcXCovXG4gICAgICAgICAgICB0aGlzLmNhID0gdGhpcy5jdXN0b21BdHRyaWJ1dGVzID0ge307XG4gICAgICAgIH0sXG4gICAgICAgIHBhcGVycHJvdG8sXG4gICAgICAgIGFwcGVuZENoaWxkID0gXCJhcHBlbmRDaGlsZFwiLFxuICAgICAgICBhcHBseSA9IFwiYXBwbHlcIixcbiAgICAgICAgY29uY2F0ID0gXCJjb25jYXRcIixcbiAgICAgICAgLy90YWtlbiBmcm9tIE1vZGVybml6ciB0b3VjaCB0ZXN0OiBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvdG91Y2hldmVudHMuanMjTDQwXG4gICAgICAgIHN1cHBvcnRzVG91Y2ggPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCB3aW5kb3cuVG91Y2hFdmVudCB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gsXG4gICAgICAgIEUgPSBcIlwiLFxuICAgICAgICBTID0gXCIgXCIsXG4gICAgICAgIFN0ciA9IFN0cmluZyxcbiAgICAgICAgc3BsaXQgPSBcInNwbGl0XCIsXG4gICAgICAgIGV2ZW50cyA9IFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNlbW92ZSBtb3VzZW91dCBtb3VzZW92ZXIgbW91c2V1cCB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiW3NwbGl0XShTKSxcbiAgICAgICAgdG91Y2hNYXAgPSB7XG4gICAgICAgICAgICBtb3VzZWRvd246IFwidG91Y2hzdGFydFwiLFxuICAgICAgICAgICAgbW91c2Vtb3ZlOiBcInRvdWNobW92ZVwiLFxuICAgICAgICAgICAgbW91c2V1cDogXCJ0b3VjaGVuZFwiXG4gICAgICAgIH0sXG4gICAgICAgIGxvd2VyQ2FzZSA9IFN0ci5wcm90b3R5cGUudG9Mb3dlckNhc2UsXG4gICAgICAgIG1hdGggPSBNYXRoLFxuICAgICAgICBtbWF4ID0gbWF0aC5tYXgsXG4gICAgICAgIG1taW4gPSBtYXRoLm1pbixcbiAgICAgICAgYWJzID0gbWF0aC5hYnMsXG4gICAgICAgIHBvdyA9IG1hdGgucG93LFxuICAgICAgICBQSSA9IG1hdGguUEksXG4gICAgICAgIG51ID0gXCJudW1iZXJcIixcbiAgICAgICAgc3RyaW5nID0gXCJzdHJpbmdcIixcbiAgICAgICAgYXJyYXkgPSBcImFycmF5XCIsXG4gICAgICAgIHRvU3RyaW5nID0gXCJ0b1N0cmluZ1wiLFxuICAgICAgICBmaWxsU3RyaW5nID0gXCJmaWxsXCIsXG4gICAgICAgIG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcbiAgICAgICAgcGFwZXIgPSB7fSxcbiAgICAgICAgcHVzaCA9IFwicHVzaFwiLFxuICAgICAgICBJU1VSTCA9IFIuX0lTVVJMID0gL151cmxcXChbJ1wiXT8oLis/KVsnXCJdP1xcKSQvaSxcbiAgICAgICAgY29sb3VyUmVnRXhwID0gL15cXHMqKCgjW2EtZlxcZF17Nn0pfCgjW2EtZlxcZF17M30pfHJnYmE/XFwoXFxzKihbXFxkXFwuXSslP1xccyosXFxzKltcXGRcXC5dKyU/XFxzKixcXHMqW1xcZFxcLl0rJT8oPzpcXHMqLFxccypbXFxkXFwuXSslPyk/KVxccypcXCl8aHNiYT9cXChcXHMqKFtcXGRcXC5dKyg/OmRlZ3xcXHhiMHwlKT9cXHMqLFxccypbXFxkXFwuXSslP1xccyosXFxzKltcXGRcXC5dKyg/OiU/XFxzKixcXHMqW1xcZFxcLl0rKT8pJT9cXHMqXFwpfGhzbGE/XFwoXFxzKihbXFxkXFwuXSsoPzpkZWd8XFx4YjB8JSk/XFxzKixcXHMqW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSsoPzolP1xccyosXFxzKltcXGRcXC5dKyk/KSU/XFxzKlxcKSlcXHMqJC9pLFxuICAgICAgICBpc25hbiA9IHtcIk5hTlwiOiAxLCBcIkluZmluaXR5XCI6IDEsIFwiLUluZmluaXR5XCI6IDF9LFxuICAgICAgICBiZXppZXJyZyA9IC9eKD86Y3ViaWMtKT9iZXppZXJcXCgoW14sXSspLChbXixdKyksKFteLF0rKSwoW15cXCldKylcXCkvLFxuICAgICAgICByb3VuZCA9IG1hdGgucm91bmQsXG4gICAgICAgIHNldEF0dHJpYnV0ZSA9IFwic2V0QXR0cmlidXRlXCIsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICB0b0ludCA9IHBhcnNlSW50LFxuICAgICAgICB1cHBlckNhc2UgPSBTdHIucHJvdG90eXBlLnRvVXBwZXJDYXNlLFxuICAgICAgICBhdmFpbGFibGVBdHRycyA9IFIuX2F2YWlsYWJsZUF0dHJzID0ge1xuICAgICAgICAgICAgXCJhcnJvdy1lbmRcIjogXCJub25lXCIsXG4gICAgICAgICAgICBcImFycm93LXN0YXJ0XCI6IFwibm9uZVwiLFxuICAgICAgICAgICAgYmx1cjogMCxcbiAgICAgICAgICAgIFwiY2xpcC1yZWN0XCI6IFwiMCAwIDFlOSAxZTlcIixcbiAgICAgICAgICAgIGN1cnNvcjogXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBjeDogMCxcbiAgICAgICAgICAgIGN5OiAwLFxuICAgICAgICAgICAgZmlsbDogXCIjZmZmXCIsXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiAxLFxuICAgICAgICAgICAgZm9udDogJzEwcHggXCJBcmlhbFwiJyxcbiAgICAgICAgICAgIFwiZm9udC1mYW1pbHlcIjogJ1wiQXJpYWxcIicsXG4gICAgICAgICAgICBcImZvbnQtc2l6ZVwiOiBcIjEwXCIsXG4gICAgICAgICAgICBcImZvbnQtc3R5bGVcIjogXCJub3JtYWxcIixcbiAgICAgICAgICAgIFwiZm9udC13ZWlnaHRcIjogNDAwLFxuICAgICAgICAgICAgZ3JhZGllbnQ6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBocmVmOiBcImh0dHA6Ly9yYXBoYWVsanMuY29tL1wiLFxuICAgICAgICAgICAgXCJsZXR0ZXItc3BhY2luZ1wiOiAwLFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHBhdGg6IFwiTTAsMFwiLFxuICAgICAgICAgICAgcjogMCxcbiAgICAgICAgICAgIHJ4OiAwLFxuICAgICAgICAgICAgcnk6IDAsXG4gICAgICAgICAgICBzcmM6IFwiXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwiIzAwMFwiLFxuICAgICAgICAgICAgXCJzdHJva2UtZGFzaGFycmF5XCI6IFwiXCIsXG4gICAgICAgICAgICBcInN0cm9rZS1saW5lY2FwXCI6IFwiYnV0dFwiLFxuICAgICAgICAgICAgXCJzdHJva2UtbGluZWpvaW5cIjogXCJidXR0XCIsXG4gICAgICAgICAgICBcInN0cm9rZS1taXRlcmxpbWl0XCI6IDAsXG4gICAgICAgICAgICBcInN0cm9rZS1vcGFjaXR5XCI6IDEsXG4gICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiAxLFxuICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgXCJ0ZXh0LWFuY2hvclwiOiBcIm1pZGRsZVwiLFxuICAgICAgICAgICAgdGl0bGU6IFwiUmFwaGFlbFwiLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiBcIlwiLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJcIlxuICAgICAgICB9LFxuICAgICAgICBhdmFpbGFibGVBbmltQXR0cnMgPSBSLl9hdmFpbGFibGVBbmltQXR0cnMgPSB7XG4gICAgICAgICAgICBibHVyOiBudSxcbiAgICAgICAgICAgIFwiY2xpcC1yZWN0XCI6IFwiY3N2XCIsXG4gICAgICAgICAgICBjeDogbnUsXG4gICAgICAgICAgICBjeTogbnUsXG4gICAgICAgICAgICBmaWxsOiBcImNvbG91clwiLFxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogbnUsXG4gICAgICAgICAgICBcImZvbnQtc2l6ZVwiOiBudSxcbiAgICAgICAgICAgIGhlaWdodDogbnUsXG4gICAgICAgICAgICBvcGFjaXR5OiBudSxcbiAgICAgICAgICAgIHBhdGg6IFwicGF0aFwiLFxuICAgICAgICAgICAgcjogbnUsXG4gICAgICAgICAgICByeDogbnUsXG4gICAgICAgICAgICByeTogbnUsXG4gICAgICAgICAgICBzdHJva2U6IFwiY29sb3VyXCIsXG4gICAgICAgICAgICBcInN0cm9rZS1vcGFjaXR5XCI6IG51LFxuICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogbnUsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICB3aWR0aDogbnUsXG4gICAgICAgICAgICB4OiBudSxcbiAgICAgICAgICAgIHk6IG51XG4gICAgICAgIH0sXG4gICAgICAgIHdoaXRlc3BhY2UgPSAvW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XS9nLFxuICAgICAgICBjb21tYVNwYWNlcyA9IC9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKixbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKi8sXG4gICAgICAgIGhzcmcgPSB7aHM6IDEsIHJnOiAxfSxcbiAgICAgICAgcDJzID0gLyw/KFthY2hsbXFyc3R2eHpdKSw/L2dpLFxuICAgICAgICBwYXRoQ29tbWFuZCA9IC8oW2FjaGxtcnFzdHZ6XSlbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjksXSooKC0/XFxkKlxcLj9cXGQqKD86ZVtcXC0rXT9cXGQrKT9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKiw/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSopKykvaWcsXG4gICAgICAgIHRDb21tYW5kID0gLyhbcnN0bV0pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5LF0qKCgtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qKSspL2lnLFxuICAgICAgICBwYXRoVmFsdWVzID0gLygtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/KVtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLD9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKi9pZyxcbiAgICAgICAgcmFkaWFsX2dyYWRpZW50ID0gUi5fcmFkaWFsX2dyYWRpZW50ID0gL15yKD86XFwoKFteLF0rPylbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKixbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKihbXlxcKV0rPylcXCkpPy8sXG4gICAgICAgIGVsZGF0YSA9IHt9LFxuICAgICAgICBzb3J0QnlLZXkgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEua2V5IC0gYi5rZXk7XG4gICAgICAgIH0sXG4gICAgICAgIHNvcnRCeU51bWJlciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9GbG9hdChhKSAtIHRvRmxvYXQoYik7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1biA9IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgICBwaXBlID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9LFxuICAgICAgICByZWN0UGF0aCA9IFIuX3JlY3RQYXRoID0gZnVuY3Rpb24gKHgsIHksIHcsIGgsIHIpIHtcbiAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbXCJNXCIsIHggKyByLCB5XSwgW1wibFwiLCB3IC0gciAqIDIsIDBdLCBbXCJhXCIsIHIsIHIsIDAsIDAsIDEsIHIsIHJdLCBbXCJsXCIsIDAsIGggLSByICogMl0sIFtcImFcIiwgciwgciwgMCwgMCwgMSwgLXIsIHJdLCBbXCJsXCIsIHIgKiAyIC0gdywgMF0sIFtcImFcIiwgciwgciwgMCwgMCwgMSwgLXIsIC1yXSwgW1wibFwiLCAwLCByICogMiAtIGhdLCBbXCJhXCIsIHIsIHIsIDAsIDAsIDEsIHIsIC1yXSwgW1wielwiXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW1tcIk1cIiwgeCwgeV0sIFtcImxcIiwgdywgMF0sIFtcImxcIiwgMCwgaF0sIFtcImxcIiwgLXcsIDBdLCBbXCJ6XCJdXTtcbiAgICAgICAgfSxcbiAgICAgICAgZWxsaXBzZVBhdGggPSBmdW5jdGlvbiAoeCwgeSwgcngsIHJ5KSB7XG4gICAgICAgICAgICBpZiAocnkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJ5ID0gcng7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW1tcIk1cIiwgeCwgeV0sIFtcIm1cIiwgMCwgLXJ5XSwgW1wiYVwiLCByeCwgcnksIDAsIDEsIDEsIDAsIDIgKiByeV0sIFtcImFcIiwgcngsIHJ5LCAwLCAxLCAxLCAwLCAtMiAqIHJ5XSwgW1wielwiXV07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBhdGggPSBSLl9nZXRQYXRoID0ge1xuICAgICAgICAgICAgcGF0aDogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLmF0dHIoXCJwYXRoXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNpcmNsZTogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlbC5hdHRycztcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxsaXBzZVBhdGgoYS5jeCwgYS5jeSwgYS5yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbGxpcHNlOiBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGVsLmF0dHJzO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGxpcHNlUGF0aChhLmN4LCBhLmN5LCBhLnJ4LCBhLnJ5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWN0OiBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGVsLmF0dHJzO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN0UGF0aChhLngsIGEueSwgYS53aWR0aCwgYS5oZWlnaHQsIGEucik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gZWwuYXR0cnM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY3RQYXRoKGEueCwgYS55LCBhLndpZHRoLCBhLmhlaWdodCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJib3ggPSBlbC5fZ2V0QkJveCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN0UGF0aChiYm94LngsIGJib3gueSwgYmJveC53aWR0aCwgYmJveC5oZWlnaHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCA6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJib3ggPSBlbC5fZ2V0QkJveCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN0UGF0aChiYm94LngsIGJib3gueSwgYmJveC53aWR0aCwgYmJveC5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvKlxcXG4gICAgICAgICAqIFJhcGhhZWwubWFwUGF0aFxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogVHJhbnNmb3JtIHRoZSBwYXRoIHN0cmluZyB3aXRoIGdpdmVuIG1hdHJpeC5cbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSBwYXRoIChzdHJpbmcpIHBhdGggc3RyaW5nXG4gICAgICAgICAtIG1hdHJpeCAob2JqZWN0KSBzZWUgQE1hdHJpeFxuICAgICAgICAgPSAoc3RyaW5nKSB0cmFuc2Zvcm1lZCBwYXRoIHN0cmluZ1xuICAgICAgICBcXCovXG4gICAgICAgIG1hcFBhdGggPSBSLm1hcFBhdGggPSBmdW5jdGlvbiAocGF0aCwgbWF0cml4KSB7XG4gICAgICAgICAgICBpZiAoIW1hdHJpeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHgsIHksIGksIGosIGlpLCBqaiwgcGF0aGk7XG4gICAgICAgICAgICBwYXRoID0gcGF0aDJjdXJ2ZShwYXRoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gcGF0aC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcGF0aGkgPSBwYXRoW2ldO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gcGF0aGkubGVuZ3RoOyBqIDwgamo7IGogKz0gMikge1xuICAgICAgICAgICAgICAgICAgICB4ID0gbWF0cml4LngocGF0aGlbal0sIHBhdGhpW2ogKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIHkgPSBtYXRyaXgueShwYXRoaVtqXSwgcGF0aGlbaiArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aGlbal0gPSB4O1xuICAgICAgICAgICAgICAgICAgICBwYXRoaVtqICsgMV0gPSB5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICB9O1xuXG4gICAgUi5fZyA9IGc7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwudHlwZVxuICAgICBbIHByb3BlcnR5IChzdHJpbmcpIF1cbiAgICAgKipcbiAgICAgKiBDYW4gYmUg4oCcU1ZH4oCdLCDigJxWTUzigJ0gb3IgZW1wdHksIGRlcGVuZGluZyBvbiBicm93c2VyIHN1cHBvcnQuXG4gICAgXFwqL1xuICAgIFIudHlwZSA9IChnLndpbi5TVkdBbmdsZSB8fCBnLmRvYy5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKFwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZVwiLCBcIjEuMVwiKSA/IFwiU1ZHXCIgOiBcIlZNTFwiKTtcbiAgICBpZiAoUi50eXBlID09IFwiVk1MXCIpIHtcbiAgICAgICAgdmFyIGQgPSBnLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgYjtcbiAgICAgICAgZC5pbm5lckhUTUwgPSAnPHY6c2hhcGUgYWRqPVwiMVwiLz4nO1xuICAgICAgICBiID0gZC5maXJzdENoaWxkO1xuICAgICAgICBiLnN0eWxlLmJlaGF2aW9yID0gXCJ1cmwoI2RlZmF1bHQjVk1MKVwiO1xuICAgICAgICBpZiAoIShiICYmIHR5cGVvZiBiLmFkaiA9PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIChSLnR5cGUgPSBFKTtcbiAgICAgICAgfVxuICAgICAgICBkID0gbnVsbDtcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuc3ZnXG4gICAgIFsgcHJvcGVydHkgKGJvb2xlYW4pIF1cbiAgICAgKipcbiAgICAgKiBgdHJ1ZWAgaWYgYnJvd3NlciBzdXBwb3J0cyBTVkcuXG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnZtbFxuICAgICBbIHByb3BlcnR5IChib29sZWFuKSBdXG4gICAgICoqXG4gICAgICogYHRydWVgIGlmIGJyb3dzZXIgc3VwcG9ydHMgVk1MLlxuICAgIFxcKi9cbiAgICBSLnN2ZyA9ICEoUi52bWwgPSBSLnR5cGUgPT0gXCJWTUxcIik7XG4gICAgUi5fUGFwZXIgPSBQYXBlcjtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5mblxuICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgKipcbiAgICAgKiBZb3UgY2FuIGFkZCB5b3VyIG93biBtZXRob2QgdG8gdGhlIGNhbnZhcy4gRm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gZHJhdyBhIHBpZSBjaGFydCxcbiAgICAgKiB5b3UgY2FuIGNyZWF0ZSB5b3VyIG93biBwaWUgY2hhcnQgZnVuY3Rpb24gYW5kIHNoaXAgaXQgYXMgYSBSYXBoYcOrbCBwbHVnaW4uIFRvIGRvIHRoaXNcbiAgICAgKiB5b3UgbmVlZCB0byBleHRlbmQgdGhlIGBSYXBoYWVsLmZuYCBvYmplY3QuIFlvdSBzaG91bGQgbW9kaWZ5IHRoZSBgZm5gIG9iamVjdCBiZWZvcmUgYVxuICAgICAqIFJhcGhhw6tsIGluc3RhbmNlIGlzIGNyZWF0ZWQsIG90aGVyd2lzZSBpdCB3aWxsIHRha2Ugbm8gZWZmZWN0LiBQbGVhc2Ugbm90ZSB0aGF0IHRoZVxuICAgICAqIGFiaWxpdHkgZm9yIG5hbWVzcGFjZWQgcGx1Z2lucyB3YXMgcmVtb3ZlZCBpbiBSYXBoYWVsIDIuMC4gSXQgaXMgdXAgdG8gdGhlIHBsdWdpbiB0b1xuICAgICAqIGVuc3VyZSBhbnkgbmFtZXNwYWNpbmcgZW5zdXJlcyBwcm9wZXIgY29udGV4dC5cbiAgICAgPiBVc2FnZVxuICAgICB8IFJhcGhhZWwuZm4uYXJyb3cgPSBmdW5jdGlvbiAoeDEsIHkxLCB4MiwgeTIsIHNpemUpIHtcbiAgICAgfCAgICAgcmV0dXJuIHRoaXMucGF0aCggLi4uICk7XG4gICAgIHwgfTtcbiAgICAgfCAvLyBvciBjcmVhdGUgbmFtZXNwYWNlXG4gICAgIHwgUmFwaGFlbC5mbi5teXN0dWZmID0ge1xuICAgICB8ICAgICBhcnJvdzogZnVuY3Rpb24gKCkge+KApn0sXG4gICAgIHwgICAgIHN0YXI6IGZ1bmN0aW9uICgpIHvigKZ9LFxuICAgICB8ICAgICAvLyBldGPigKZcbiAgICAgfCB9O1xuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoMTAsIDEwLCA2MzAsIDQ4MCk7XG4gICAgIHwgLy8gdGhlbiB1c2UgaXRcbiAgICAgfCBwYXBlci5hcnJvdygxMCwgMTAsIDMwLCAzMCwgNSkuYXR0cih7ZmlsbDogXCIjZjAwXCJ9KTtcbiAgICAgfCBwYXBlci5teXN0dWZmLmFycm93KCk7XG4gICAgIHwgcGFwZXIubXlzdHVmZi5zdGFyKCk7XG4gICAgXFwqL1xuICAgIFIuZm4gPSBwYXBlcnByb3RvID0gUGFwZXIucHJvdG90eXBlID0gUi5wcm90b3R5cGU7XG4gICAgUi5faWQgPSAwO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmlzXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBIYW5kZnVsIG9mIHJlcGxhY2VtZW50cyBmb3IgYHR5cGVvZmAgb3BlcmF0b3IuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIG8gKOKApikgYW55IG9iamVjdCBvciBwcmltaXRpdmVcbiAgICAgLSB0eXBlIChzdHJpbmcpIG5hbWUgb2YgdGhlIHR5cGUsIGkuZS4g4oCcc3RyaW5n4oCdLCDigJxmdW5jdGlvbuKAnSwg4oCcbnVtYmVy4oCdLCBldGMuXG4gICAgID0gKGJvb2xlYW4pIGlzIGdpdmVuIHZhbHVlIGlzIG9mIGdpdmVuIHR5cGVcbiAgICBcXCovXG4gICAgUi5pcyA9IGZ1bmN0aW9uIChvLCB0eXBlKSB7XG4gICAgICAgIHR5cGUgPSBsb3dlckNhc2UuY2FsbCh0eXBlKTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgcmV0dXJuICFpc25hbltoYXNdKCtvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBvIGluc3RhbmNlb2YgQXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICAodHlwZSA9PSBcIm51bGxcIiAmJiBvID09PSBudWxsKSB8fFxuICAgICAgICAgICAgICAgICh0eXBlID09IHR5cGVvZiBvICYmIG8gIT09IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgKHR5cGUgPT0gXCJvYmplY3RcIiAmJiBvID09PSBPYmplY3QobykpIHx8XG4gICAgICAgICAgICAgICAgKHR5cGUgPT0gXCJhcnJheVwiICYmIEFycmF5LmlzQXJyYXkgJiYgQXJyYXkuaXNBcnJheShvKSkgfHxcbiAgICAgICAgICAgICAgICBvYmplY3RUb1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpID09IHR5cGU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgICAgICBpZiAodHlwZW9mIG9iaiA9PSBcImZ1bmN0aW9uXCIgfHwgT2JqZWN0KG9iaikgIT09IG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0gbmV3IG9iai5jb25zdHJ1Y3RvcjtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKG9ialtoYXNdKGtleSkpIHtcbiAgICAgICAgICAgIHJlc1trZXldID0gY2xvbmUob2JqW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuYW5nbGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybnMgYW5nbGUgYmV0d2VlbiB0d28gb3IgdGhyZWUgcG9pbnRzXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHgxIChudW1iZXIpIHggY29vcmQgb2YgZmlyc3QgcG9pbnRcbiAgICAgLSB5MSAobnVtYmVyKSB5IGNvb3JkIG9mIGZpcnN0IHBvaW50XG4gICAgIC0geDIgKG51bWJlcikgeCBjb29yZCBvZiBzZWNvbmQgcG9pbnRcbiAgICAgLSB5MiAobnVtYmVyKSB5IGNvb3JkIG9mIHNlY29uZCBwb2ludFxuICAgICAtIHgzIChudW1iZXIpICNvcHRpb25hbCB4IGNvb3JkIG9mIHRoaXJkIHBvaW50XG4gICAgIC0geTMgKG51bWJlcikgI29wdGlvbmFsIHkgY29vcmQgb2YgdGhpcmQgcG9pbnRcbiAgICAgPSAobnVtYmVyKSBhbmdsZSBpbiBkZWdyZWVzLlxuICAgIFxcKi9cbiAgICBSLmFuZ2xlID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpIHtcbiAgICAgICAgaWYgKHgzID09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB4ID0geDEgLSB4MixcbiAgICAgICAgICAgICAgICB5ID0geTEgLSB5MjtcbiAgICAgICAgICAgIGlmICgheCAmJiAheSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICgxODAgKyBtYXRoLmF0YW4yKC15LCAteCkgKiAxODAgLyBQSSArIDM2MCkgJSAzNjA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUi5hbmdsZSh4MSwgeTEsIHgzLCB5MykgLSBSLmFuZ2xlKHgyLCB5MiwgeDMsIHkzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmFkXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBUcmFuc2Zvcm0gYW5nbGUgdG8gcmFkaWFuc1xuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBkZWcgKG51bWJlcikgYW5nbGUgaW4gZGVncmVlc1xuICAgICA9IChudW1iZXIpIGFuZ2xlIGluIHJhZGlhbnMuXG4gICAgXFwqL1xuICAgIFIucmFkID0gZnVuY3Rpb24gKGRlZykge1xuICAgICAgICByZXR1cm4gZGVnICUgMzYwICogUEkgLyAxODA7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5kZWdcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFRyYW5zZm9ybSBhbmdsZSB0byBkZWdyZWVzXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHJhZCAobnVtYmVyKSBhbmdsZSBpbiByYWRpYW5zXG4gICAgID0gKG51bWJlcikgYW5nbGUgaW4gZGVncmVlcy5cbiAgICBcXCovXG4gICAgUi5kZWcgPSBmdW5jdGlvbiAocmFkKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kICgocmFkICogMTgwIC8gUEklIDM2MCkqIDEwMDApIC8gMTAwMDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnNuYXBUb1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogU25hcHMgZ2l2ZW4gdmFsdWUgdG8gZ2l2ZW4gZ3JpZC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gdmFsdWVzIChhcnJheXxudW1iZXIpIGdpdmVuIGFycmF5IG9mIHZhbHVlcyBvciBzdGVwIG9mIHRoZSBncmlkXG4gICAgIC0gdmFsdWUgKG51bWJlcikgdmFsdWUgdG8gYWRqdXN0XG4gICAgIC0gdG9sZXJhbmNlIChudW1iZXIpICNvcHRpb25hbCB0b2xlcmFuY2UgZm9yIHNuYXBwaW5nLiBEZWZhdWx0IGlzIGAxMGAuXG4gICAgID0gKG51bWJlcikgYWRqdXN0ZWQgdmFsdWUuXG4gICAgXFwqL1xuICAgIFIuc25hcFRvID0gZnVuY3Rpb24gKHZhbHVlcywgdmFsdWUsIHRvbGVyYW5jZSkge1xuICAgICAgICB0b2xlcmFuY2UgPSBSLmlzKHRvbGVyYW5jZSwgXCJmaW5pdGVcIikgPyB0b2xlcmFuY2UgOiAxMDtcbiAgICAgICAgaWYgKFIuaXModmFsdWVzLCBhcnJheSkpIHtcbiAgICAgICAgICAgIHZhciBpID0gdmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIGlmIChhYnModmFsdWVzW2ldIC0gdmFsdWUpIDw9IHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSArdmFsdWVzO1xuICAgICAgICAgICAgdmFyIHJlbSA9IHZhbHVlICUgdmFsdWVzO1xuICAgICAgICAgICAgaWYgKHJlbSA8IHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAtIHJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZW0gPiB2YWx1ZXMgLSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgLSByZW0gKyB2YWx1ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5jcmVhdGVVVUlEXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIFJGQzQxMjIsIHZlcnNpb24gNCBJRFxuICAgIFxcKi9cbiAgICB2YXIgY3JlYXRlVVVJRCA9IFIuY3JlYXRlVVVJRCA9IChmdW5jdGlvbiAodXVpZFJlZ0V4LCB1dWlkUmVwbGFjZXIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBcInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UodXVpZFJlZ0V4LCB1dWlkUmVwbGFjZXIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH07XG4gICAgfSkoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgdmFyIHIgPSBtYXRoLnJhbmRvbSgpICogMTYgfCAwLFxuICAgICAgICAgICAgdiA9IGMgPT0gXCJ4XCIgPyByIDogKHIgJiAzIHwgOCk7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcblxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnNldFdpbmRvd1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXNlZCB3aGVuIHlvdSBuZWVkIHRvIGRyYXcgaW4gYCZsdDtpZnJhbWU+YC4gU3dpdGNoZWQgd2luZG93IHRvIHRoZSBpZnJhbWUgb25lLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBuZXd3aW4gKHdpbmRvdykgbmV3IHdpbmRvdyBvYmplY3RcbiAgICBcXCovXG4gICAgUi5zZXRXaW5kb3cgPSBmdW5jdGlvbiAobmV3d2luKSB7XG4gICAgICAgIGV2ZShcInJhcGhhZWwuc2V0V2luZG93XCIsIFIsIGcud2luLCBuZXd3aW4pO1xuICAgICAgICBnLndpbiA9IG5ld3dpbjtcbiAgICAgICAgZy5kb2MgPSBnLndpbi5kb2N1bWVudDtcbiAgICAgICAgaWYgKFIuX2VuZ2luZS5pbml0V2luKSB7XG4gICAgICAgICAgICBSLl9lbmdpbmUuaW5pdFdpbihnLndpbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciB0b0hleCA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICBpZiAoUi52bWwpIHtcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9kZWFuLmVkd2FyZHMubmFtZS93ZWJsb2cvMjAwOS8xMC9jb252ZXJ0LWFueS1jb2xvdXItdmFsdWUtdG8taGV4LWluLW1zaWUvXG4gICAgICAgICAgICB2YXIgdHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuICAgICAgICAgICAgdmFyIGJvZDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvY3VtID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJodG1sZmlsZVwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bS53cml0ZShcIjxib2R5PlwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGJvZCA9IGRvY3VtLmJvZHk7XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICBib2QgPSBjcmVhdGVQb3B1cCgpLmRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBib2QuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgICAgICAgICB0b0hleCA9IGNhY2hlcihmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBib2Quc3R5bGUuY29sb3IgPSBTdHIoY29sb3IpLnJlcGxhY2UodHJpbSwgRSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJhbmdlLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiRm9yZUNvbG9yXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICgodmFsdWUgJiAyNTUpIDw8IDE2KSB8ICh2YWx1ZSAmIDY1MjgwKSB8ICgodmFsdWUgJiAxNjcxMTY4MCkgPj4+IDE2KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiI1wiICsgKFwiMDAwMDAwXCIgKyB2YWx1ZS50b1N0cmluZygxNikpLnNsaWNlKC02KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGkgPSBnLmRvYy5jcmVhdGVFbGVtZW50KFwiaVwiKTtcbiAgICAgICAgICAgIGkudGl0bGUgPSBcIlJhcGhhXFx4ZWJsIENvbG91ciBQaWNrZXJcIjtcbiAgICAgICAgICAgIGkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgZy5kb2MuYm9keS5hcHBlbmRDaGlsZChpKTtcbiAgICAgICAgICAgIHRvSGV4ID0gY2FjaGVyKGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICAgICAgICAgIGkuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZy5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShpLCBFKS5nZXRQcm9wZXJ0eVZhbHVlKFwiY29sb3JcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9IZXgoY29sb3IpO1xuICAgIH0sXG4gICAgaHNidG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcImhzYihcIiArIFt0aGlzLmgsIHRoaXMucywgdGhpcy5iXSArIFwiKVwiO1xuICAgIH0sXG4gICAgaHNsdG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcImhzbChcIiArIFt0aGlzLmgsIHRoaXMucywgdGhpcy5sXSArIFwiKVwiO1xuICAgIH0sXG4gICAgcmdidG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhleDtcbiAgICB9LFxuICAgIHByZXBhcmVSR0IgPSBmdW5jdGlvbiAociwgZywgYikge1xuICAgICAgICBpZiAoZyA9PSBudWxsICYmIFIuaXMociwgXCJvYmplY3RcIikgJiYgXCJyXCIgaW4gciAmJiBcImdcIiBpbiByICYmIFwiYlwiIGluIHIpIHtcbiAgICAgICAgICAgIGIgPSByLmI7XG4gICAgICAgICAgICBnID0gci5nO1xuICAgICAgICAgICAgciA9IHIucjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZyA9PSBudWxsICYmIFIuaXMociwgc3RyaW5nKSkge1xuICAgICAgICAgICAgdmFyIGNsciA9IFIuZ2V0UkdCKHIpO1xuICAgICAgICAgICAgciA9IGNsci5yO1xuICAgICAgICAgICAgZyA9IGNsci5nO1xuICAgICAgICAgICAgYiA9IGNsci5iO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyID4gMSB8fCBnID4gMSB8fCBiID4gMSkge1xuICAgICAgICAgICAgciAvPSAyNTU7XG4gICAgICAgICAgICBnIC89IDI1NTtcbiAgICAgICAgICAgIGIgLz0gMjU1O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtyLCBnLCBiXTtcbiAgICB9LFxuICAgIHBhY2thZ2VSR0IgPSBmdW5jdGlvbiAociwgZywgYiwgbykge1xuICAgICAgICByICo9IDI1NTtcbiAgICAgICAgZyAqPSAyNTU7XG4gICAgICAgIGIgKj0gMjU1O1xuICAgICAgICB2YXIgcmdiID0ge1xuICAgICAgICAgICAgcjogcixcbiAgICAgICAgICAgIGc6IGcsXG4gICAgICAgICAgICBiOiBiLFxuICAgICAgICAgICAgaGV4OiBSLnJnYihyLCBnLCBiKSxcbiAgICAgICAgICAgIHRvU3RyaW5nOiByZ2J0b1N0cmluZ1xuICAgICAgICB9O1xuICAgICAgICBSLmlzKG8sIFwiZmluaXRlXCIpICYmIChyZ2Iub3BhY2l0eSA9IG8pO1xuICAgICAgICByZXR1cm4gcmdiO1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5jb2xvclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUGFyc2VzIHRoZSBjb2xvciBzdHJpbmcgYW5kIHJldHVybnMgb2JqZWN0IHdpdGggYWxsIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGNvbG9yLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBjbHIgKHN0cmluZykgY29sb3Igc3RyaW5nIGluIG9uZSBvZiB0aGUgc3VwcG9ydGVkIGZvcm1hdHMgKHNlZSBAUmFwaGFlbC5nZXRSR0IpXG4gICAgID0gKG9iamVjdCkgQ29tYmluZWQgUkdCICYgSFNCIG9iamVjdCBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICByIChudW1iZXIpIHJlZCxcbiAgICAgbyAgICAgZyAobnVtYmVyKSBncmVlbixcbiAgICAgbyAgICAgYiAobnVtYmVyKSBibHVlLFxuICAgICBvICAgICBoZXggKHN0cmluZykgY29sb3IgaW4gSFRNTC9DU1MgZm9ybWF0OiAj4oCi4oCi4oCi4oCi4oCi4oCiLFxuICAgICBvICAgICBlcnJvciAoYm9vbGVhbikgYHRydWVgIGlmIHN0cmluZyBjYW7igJl0IGJlIHBhcnNlZCxcbiAgICAgbyAgICAgaCAobnVtYmVyKSBodWUsXG4gICAgIG8gICAgIHMgKG51bWJlcikgc2F0dXJhdGlvbixcbiAgICAgbyAgICAgdiAobnVtYmVyKSB2YWx1ZSAoYnJpZ2h0bmVzcyksXG4gICAgIG8gICAgIGwgKG51bWJlcikgbGlnaHRuZXNzXG4gICAgIG8gfVxuICAgIFxcKi9cbiAgICBSLmNvbG9yID0gZnVuY3Rpb24gKGNscikge1xuICAgICAgICB2YXIgcmdiO1xuICAgICAgICBpZiAoUi5pcyhjbHIsIFwib2JqZWN0XCIpICYmIFwiaFwiIGluIGNsciAmJiBcInNcIiBpbiBjbHIgJiYgXCJiXCIgaW4gY2xyKSB7XG4gICAgICAgICAgICByZ2IgPSBSLmhzYjJyZ2IoY2xyKTtcbiAgICAgICAgICAgIGNsci5yID0gcmdiLnI7XG4gICAgICAgICAgICBjbHIuZyA9IHJnYi5nO1xuICAgICAgICAgICAgY2xyLmIgPSByZ2IuYjtcbiAgICAgICAgICAgIGNsci5oZXggPSByZ2IuaGV4O1xuICAgICAgICB9IGVsc2UgaWYgKFIuaXMoY2xyLCBcIm9iamVjdFwiKSAmJiBcImhcIiBpbiBjbHIgJiYgXCJzXCIgaW4gY2xyICYmIFwibFwiIGluIGNscikge1xuICAgICAgICAgICAgcmdiID0gUi5oc2wycmdiKGNscik7XG4gICAgICAgICAgICBjbHIuciA9IHJnYi5yO1xuICAgICAgICAgICAgY2xyLmcgPSByZ2IuZztcbiAgICAgICAgICAgIGNsci5iID0gcmdiLmI7XG4gICAgICAgICAgICBjbHIuaGV4ID0gcmdiLmhleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChSLmlzKGNsciwgXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgICAgICBjbHIgPSBSLmdldFJHQihjbHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFIuaXMoY2xyLCBcIm9iamVjdFwiKSAmJiBcInJcIiBpbiBjbHIgJiYgXCJnXCIgaW4gY2xyICYmIFwiYlwiIGluIGNscikge1xuICAgICAgICAgICAgICAgIHJnYiA9IFIucmdiMmhzbChjbHIpO1xuICAgICAgICAgICAgICAgIGNsci5oID0gcmdiLmg7XG4gICAgICAgICAgICAgICAgY2xyLnMgPSByZ2IucztcbiAgICAgICAgICAgICAgICBjbHIubCA9IHJnYi5sO1xuICAgICAgICAgICAgICAgIHJnYiA9IFIucmdiMmhzYihjbHIpO1xuICAgICAgICAgICAgICAgIGNsci52ID0gcmdiLmI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsciA9IHtoZXg6IFwibm9uZVwifTtcbiAgICAgICAgICAgICAgICBjbHIuciA9IGNsci5nID0gY2xyLmIgPSBjbHIuaCA9IGNsci5zID0gY2xyLnYgPSBjbHIubCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNsci50b1N0cmluZyA9IHJnYnRvU3RyaW5nO1xuICAgICAgICByZXR1cm4gY2xyO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaHNiMnJnYlxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgSFNCIHZhbHVlcyB0byBSR0Igb2JqZWN0LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoIChudW1iZXIpIGh1ZVxuICAgICAtIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICAtIHYgKG51bWJlcikgdmFsdWUgb3IgYnJpZ2h0bmVzc1xuICAgICA9IChvYmplY3QpIFJHQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZSxcbiAgICAgbyAgICAgaGV4IChzdHJpbmcpIGNvbG9yIGluIEhUTUwvQ1NTIGZvcm1hdDogI+KAouKAouKAouKAouKAouKAolxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5oc2IycmdiID0gZnVuY3Rpb24gKGgsIHMsIHYsIG8pIHtcbiAgICAgICAgaWYgKHRoaXMuaXMoaCwgXCJvYmplY3RcIikgJiYgXCJoXCIgaW4gaCAmJiBcInNcIiBpbiBoICYmIFwiYlwiIGluIGgpIHtcbiAgICAgICAgICAgIHYgPSBoLmI7XG4gICAgICAgICAgICBzID0gaC5zO1xuICAgICAgICAgICAgbyA9IGgubztcbiAgICAgICAgICAgIGggPSBoLmg7XG4gICAgICAgIH1cbiAgICAgICAgaCAqPSAzNjA7XG4gICAgICAgIHZhciBSLCBHLCBCLCBYLCBDO1xuICAgICAgICBoID0gKGggJSAzNjApIC8gNjA7XG4gICAgICAgIEMgPSB2ICogcztcbiAgICAgICAgWCA9IEMgKiAoMSAtIGFicyhoICUgMiAtIDEpKTtcbiAgICAgICAgUiA9IEcgPSBCID0gdiAtIEM7XG5cbiAgICAgICAgaCA9IH5+aDtcbiAgICAgICAgUiArPSBbQywgWCwgMCwgMCwgWCwgQ11baF07XG4gICAgICAgIEcgKz0gW1gsIEMsIEMsIFgsIDAsIDBdW2hdO1xuICAgICAgICBCICs9IFswLCAwLCBYLCBDLCBDLCBYXVtoXTtcbiAgICAgICAgcmV0dXJuIHBhY2thZ2VSR0IoUiwgRywgQiwgbyk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5oc2wycmdiXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBIU0wgdmFsdWVzIHRvIFJHQiBvYmplY3QuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGggKG51bWJlcikgaHVlXG4gICAgIC0gcyAobnVtYmVyKSBzYXR1cmF0aW9uXG4gICAgIC0gbCAobnVtYmVyKSBsdW1pbm9zaXR5XG4gICAgID0gKG9iamVjdCkgUkdCIG9iamVjdCBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICByIChudW1iZXIpIHJlZCxcbiAgICAgbyAgICAgZyAobnVtYmVyKSBncmVlbixcbiAgICAgbyAgICAgYiAobnVtYmVyKSBibHVlLFxuICAgICBvICAgICBoZXggKHN0cmluZykgY29sb3IgaW4gSFRNTC9DU1MgZm9ybWF0OiAj4oCi4oCi4oCi4oCi4oCi4oCiXG4gICAgIG8gfVxuICAgIFxcKi9cbiAgICBSLmhzbDJyZ2IgPSBmdW5jdGlvbiAoaCwgcywgbCwgbykge1xuICAgICAgICBpZiAodGhpcy5pcyhoLCBcIm9iamVjdFwiKSAmJiBcImhcIiBpbiBoICYmIFwic1wiIGluIGggJiYgXCJsXCIgaW4gaCkge1xuICAgICAgICAgICAgbCA9IGgubDtcbiAgICAgICAgICAgIHMgPSBoLnM7XG4gICAgICAgICAgICBoID0gaC5oO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoID4gMSB8fCBzID4gMSB8fCBsID4gMSkge1xuICAgICAgICAgICAgaCAvPSAzNjA7XG4gICAgICAgICAgICBzIC89IDEwMDtcbiAgICAgICAgICAgIGwgLz0gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGggKj0gMzYwO1xuICAgICAgICB2YXIgUiwgRywgQiwgWCwgQztcbiAgICAgICAgaCA9IChoICUgMzYwKSAvIDYwO1xuICAgICAgICBDID0gMiAqIHMgKiAobCA8IC41ID8gbCA6IDEgLSBsKTtcbiAgICAgICAgWCA9IEMgKiAoMSAtIGFicyhoICUgMiAtIDEpKTtcbiAgICAgICAgUiA9IEcgPSBCID0gbCAtIEMgLyAyO1xuXG4gICAgICAgIGggPSB+fmg7XG4gICAgICAgIFIgKz0gW0MsIFgsIDAsIDAsIFgsIENdW2hdO1xuICAgICAgICBHICs9IFtYLCBDLCBDLCBYLCAwLCAwXVtoXTtcbiAgICAgICAgQiArPSBbMCwgMCwgWCwgQywgQywgWF1baF07XG4gICAgICAgIHJldHVybiBwYWNrYWdlUkdCKFIsIEcsIEIsIG8pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmdiMmhzYlxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgUkdCIHZhbHVlcyB0byBIU0Igb2JqZWN0LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSByIChudW1iZXIpIHJlZFxuICAgICAtIGcgKG51bWJlcikgZ3JlZW5cbiAgICAgLSBiIChudW1iZXIpIGJsdWVcbiAgICAgPSAob2JqZWN0KSBIU0Igb2JqZWN0IGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIGggKG51bWJlcikgaHVlXG4gICAgIG8gICAgIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICBvICAgICBiIChudW1iZXIpIGJyaWdodG5lc3NcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIucmdiMmhzYiA9IGZ1bmN0aW9uIChyLCBnLCBiKSB7XG4gICAgICAgIGIgPSBwcmVwYXJlUkdCKHIsIGcsIGIpO1xuICAgICAgICByID0gYlswXTtcbiAgICAgICAgZyA9IGJbMV07XG4gICAgICAgIGIgPSBiWzJdO1xuXG4gICAgICAgIHZhciBILCBTLCBWLCBDO1xuICAgICAgICBWID0gbW1heChyLCBnLCBiKTtcbiAgICAgICAgQyA9IFYgLSBtbWluKHIsIGcsIGIpO1xuICAgICAgICBIID0gKEMgPT0gMCA/IG51bGwgOlxuICAgICAgICAgICAgIFYgPT0gciA/IChnIC0gYikgLyBDIDpcbiAgICAgICAgICAgICBWID09IGcgPyAoYiAtIHIpIC8gQyArIDIgOlxuICAgICAgICAgICAgICAgICAgICAgIChyIC0gZykgLyBDICsgNFxuICAgICAgICAgICAgKTtcbiAgICAgICAgSCA9ICgoSCArIDM2MCkgJSA2KSAqIDYwIC8gMzYwO1xuICAgICAgICBTID0gQyA9PSAwID8gMCA6IEMgLyBWO1xuICAgICAgICByZXR1cm4ge2g6IEgsIHM6IFMsIGI6IFYsIHRvU3RyaW5nOiBoc2J0b1N0cmluZ307XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5yZ2IyaHNsXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBSR0IgdmFsdWVzIHRvIEhTTCBvYmplY3QuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHIgKG51bWJlcikgcmVkXG4gICAgIC0gZyAobnVtYmVyKSBncmVlblxuICAgICAtIGIgKG51bWJlcikgYmx1ZVxuICAgICA9IChvYmplY3QpIEhTTCBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgaCAobnVtYmVyKSBodWVcbiAgICAgbyAgICAgcyAobnVtYmVyKSBzYXR1cmF0aW9uXG4gICAgIG8gICAgIGwgKG51bWJlcikgbHVtaW5vc2l0eVxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5yZ2IyaHNsID0gZnVuY3Rpb24gKHIsIGcsIGIpIHtcbiAgICAgICAgYiA9IHByZXBhcmVSR0IociwgZywgYik7XG4gICAgICAgIHIgPSBiWzBdO1xuICAgICAgICBnID0gYlsxXTtcbiAgICAgICAgYiA9IGJbMl07XG5cbiAgICAgICAgdmFyIEgsIFMsIEwsIE0sIG0sIEM7XG4gICAgICAgIE0gPSBtbWF4KHIsIGcsIGIpO1xuICAgICAgICBtID0gbW1pbihyLCBnLCBiKTtcbiAgICAgICAgQyA9IE0gLSBtO1xuICAgICAgICBIID0gKEMgPT0gMCA/IG51bGwgOlxuICAgICAgICAgICAgIE0gPT0gciA/IChnIC0gYikgLyBDIDpcbiAgICAgICAgICAgICBNID09IGcgPyAoYiAtIHIpIC8gQyArIDIgOlxuICAgICAgICAgICAgICAgICAgICAgIChyIC0gZykgLyBDICsgNCk7XG4gICAgICAgIEggPSAoKEggKyAzNjApICUgNikgKiA2MCAvIDM2MDtcbiAgICAgICAgTCA9IChNICsgbSkgLyAyO1xuICAgICAgICBTID0gKEMgPT0gMCA/IDAgOlxuICAgICAgICAgICAgIEwgPCAuNSA/IEMgLyAoMiAqIEwpIDpcbiAgICAgICAgICAgICAgICAgICAgICBDIC8gKDIgLSAyICogTCkpO1xuICAgICAgICByZXR1cm4ge2g6IEgsIHM6IFMsIGw6IEwsIHRvU3RyaW5nOiBoc2x0b1N0cmluZ307XG4gICAgfTtcbiAgICBSLl9wYXRoMnN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9pbihcIixcIikucmVwbGFjZShwMnMsIFwiJDFcIik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiByZXB1c2goYXJyYXksIGl0ZW0pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyYXkubGVuZ3RoOyBpIDwgaWk7IGkrKykgaWYgKGFycmF5W2ldID09PSBpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXkucHVzaChhcnJheS5zcGxpY2UoaSwgMSlbMF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNhY2hlcihmLCBzY29wZSwgcG9zdHByb2Nlc3Nvcikge1xuICAgICAgICBmdW5jdGlvbiBuZXdmKCkge1xuICAgICAgICAgICAgdmFyIGFyZyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCksXG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZy5qb2luKFwiXFx1MjQwMFwiKSxcbiAgICAgICAgICAgICAgICBjYWNoZSA9IG5ld2YuY2FjaGUgPSBuZXdmLmNhY2hlIHx8IHt9LFxuICAgICAgICAgICAgICAgIGNvdW50ID0gbmV3Zi5jb3VudCA9IG5ld2YuY291bnQgfHwgW107XG4gICAgICAgICAgICBpZiAoY2FjaGVbaGFzXShhcmdzKSkge1xuICAgICAgICAgICAgICAgIHJlcHVzaChjb3VudCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc3Rwcm9jZXNzb3IgPyBwb3N0cHJvY2Vzc29yKGNhY2hlW2FyZ3NdKSA6IGNhY2hlW2FyZ3NdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291bnQubGVuZ3RoID49IDFlMyAmJiBkZWxldGUgY2FjaGVbY291bnQuc2hpZnQoKV07XG4gICAgICAgICAgICBjb3VudC5wdXNoKGFyZ3MpO1xuICAgICAgICAgICAgY2FjaGVbYXJnc10gPSBmW2FwcGx5XShzY29wZSwgYXJnKTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0cHJvY2Vzc29yID8gcG9zdHByb2Nlc3NvcihjYWNoZVthcmdzXSkgOiBjYWNoZVthcmdzXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3ZjtcbiAgICB9XG5cbiAgICB2YXIgcHJlbG9hZCA9IFIuX3ByZWxvYWQgPSBmdW5jdGlvbiAoc3JjLCBmKSB7XG4gICAgICAgIHZhciBpbWcgPSBnLmRvYy5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBpbWcuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotOTk5OWVtO3RvcDotOTk5OWVtXCI7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9ubG9hZCA9IG51bGw7XG4gICAgICAgICAgICBnLmRvYy5ib2R5LnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGcuZG9jLmJvZHkucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIGcuZG9jLmJvZHkuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgaW1nLnNyYyA9IHNyYztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY2xyVG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhleDtcbiAgICB9XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5nZXRSR0JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFBhcnNlcyBjb2xvdXIgc3RyaW5nIGFzIFJHQiBvYmplY3RcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gY29sb3VyIChzdHJpbmcpIGNvbG91ciBzdHJpbmcgaW4gb25lIG9mIGZvcm1hdHM6XG4gICAgICMgPHVsPlxuICAgICAjICAgICA8bGk+Q29sb3VyIG5hbWUgKOKAnDxjb2RlPnJlZDwvY29kZT7igJ0sIOKAnDxjb2RlPmdyZWVuPC9jb2RlPuKAnSwg4oCcPGNvZGU+Y29ybmZsb3dlcmJsdWU8L2NvZGU+4oCdLCBldGMpPC9saT5cbiAgICAgIyAgICAgPGxpPiPigKLigKLigKIg4oCUIHNob3J0ZW5lZCBIVE1MIGNvbG91cjogKOKAnDxjb2RlPiMwMDA8L2NvZGU+4oCdLCDigJw8Y29kZT4jZmMwPC9jb2RlPuKAnSwgZXRjKTwvbGk+XG4gICAgICMgICAgIDxsaT4j4oCi4oCi4oCi4oCi4oCi4oCiIOKAlCBmdWxsIGxlbmd0aCBIVE1MIGNvbG91cjogKOKAnDxjb2RlPiMwMDAwMDA8L2NvZGU+4oCdLCDigJw8Y29kZT4jYmQyMzAwPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+cmdiKOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCByZWQsIGdyZWVuIGFuZCBibHVlIGNoYW5uZWxz4oCZIHZhbHVlczogKOKAnDxjb2RlPnJnYigyMDAsJm5ic3A7MTAwLCZuYnNwOzApPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+cmdiKOKAouKAouKAoiUsIOKAouKAouKAoiUsIOKAouKAouKAoiUpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgaW4gJTogKOKAnDxjb2RlPnJnYigxMDAlLCZuYnNwOzE3NSUsJm5ic3A7MCUpPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+aHNiKOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBodWUsIHNhdHVyYXRpb24gYW5kIGJyaWdodG5lc3MgdmFsdWVzOiAo4oCcPGNvZGU+aHNiKDAuNSwmbmJzcDswLjI1LCZuYnNwOzEpPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+aHNiKOKAouKAouKAoiUsIOKAouKAouKAoiUsIOKAouKAouKAoiUpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgaW4gJTwvbGk+XG4gICAgICMgICAgIDxsaT5oc2wo4oCi4oCi4oCiLCDigKLigKLigKIsIOKAouKAouKAoikg4oCUIHNhbWUgYXMgaHNiPC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBoc2I8L2xpPlxuICAgICAjIDwvdWw+XG4gICAgID0gKG9iamVjdCkgUkdCIG9iamVjdCBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICByIChudW1iZXIpIHJlZCxcbiAgICAgbyAgICAgZyAobnVtYmVyKSBncmVlbixcbiAgICAgbyAgICAgYiAobnVtYmVyKSBibHVlXG4gICAgIG8gICAgIGhleCAoc3RyaW5nKSBjb2xvciBpbiBIVE1ML0NTUyBmb3JtYXQ6ICPigKLigKLigKLigKLigKLigKIsXG4gICAgIG8gICAgIGVycm9yIChib29sZWFuKSB0cnVlIGlmIHN0cmluZyBjYW7igJl0IGJlIHBhcnNlZFxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5nZXRSR0IgPSBjYWNoZXIoZnVuY3Rpb24gKGNvbG91cikge1xuICAgICAgICBpZiAoIWNvbG91ciB8fCAhISgoY29sb3VyID0gU3RyKGNvbG91cikpLmluZGV4T2YoXCItXCIpICsgMSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7cjogLTEsIGc6IC0xLCBiOiAtMSwgaGV4OiBcIm5vbmVcIiwgZXJyb3I6IDEsIHRvU3RyaW5nOiBjbHJUb1N0cmluZ307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbG91ciA9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtyOiAtMSwgZzogLTEsIGI6IC0xLCBoZXg6IFwibm9uZVwiLCB0b1N0cmluZzogY2xyVG9TdHJpbmd9O1xuICAgICAgICB9XG4gICAgICAgICEoaHNyZ1toYXNdKGNvbG91ci50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygwLCAyKSkgfHwgY29sb3VyLmNoYXJBdCgpID09IFwiI1wiKSAmJiAoY29sb3VyID0gdG9IZXgoY29sb3VyKSk7XG4gICAgICAgIHZhciByZXMsXG4gICAgICAgICAgICByZWQsXG4gICAgICAgICAgICBncmVlbixcbiAgICAgICAgICAgIGJsdWUsXG4gICAgICAgICAgICBvcGFjaXR5LFxuICAgICAgICAgICAgdCxcbiAgICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgICAgIHJnYiA9IGNvbG91ci5tYXRjaChjb2xvdXJSZWdFeHApO1xuICAgICAgICBpZiAocmdiKSB7XG4gICAgICAgICAgICBpZiAocmdiWzJdKSB7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvSW50KHJnYlsyXS5zdWJzdHJpbmcoNSksIDE2KTtcbiAgICAgICAgICAgICAgICBncmVlbiA9IHRvSW50KHJnYlsyXS5zdWJzdHJpbmcoMywgNSksIDE2KTtcbiAgICAgICAgICAgICAgICByZWQgPSB0b0ludChyZ2JbMl0uc3Vic3RyaW5nKDEsIDMpLCAxNik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmdiWzNdKSB7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvSW50KCh0ID0gcmdiWzNdLmNoYXJBdCgzKSkgKyB0LCAxNik7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0ludCgodCA9IHJnYlszXS5jaGFyQXQoMikpICsgdCwgMTYpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvSW50KCh0ID0gcmdiWzNdLmNoYXJBdCgxKSkgKyB0LCAxNik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmdiWzRdKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzID0gcmdiWzRdW3NwbGl0XShjb21tYVNwYWNlcyk7XG4gICAgICAgICAgICAgICAgcmVkID0gdG9GbG9hdCh2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgICAgIHZhbHVlc1swXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKHJlZCAqPSAyLjU1KTtcbiAgICAgICAgICAgICAgICBncmVlbiA9IHRvRmxvYXQodmFsdWVzWzFdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMV0uc2xpY2UoLTEpID09IFwiJVwiICYmIChncmVlbiAqPSAyLjU1KTtcbiAgICAgICAgICAgICAgICBibHVlID0gdG9GbG9hdCh2YWx1ZXNbMl0pO1xuICAgICAgICAgICAgICAgIHZhbHVlc1syXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKGJsdWUgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgcmdiWzFdLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwgNCkgPT0gXCJyZ2JhXCIgJiYgKG9wYWNpdHkgPSB0b0Zsb2F0KHZhbHVlc1szXSkpO1xuICAgICAgICAgICAgICAgIHZhbHVlc1szXSAmJiB2YWx1ZXNbM10uc2xpY2UoLTEpID09IFwiJVwiICYmIChvcGFjaXR5IC89IDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmdiWzVdKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzID0gcmdiWzVdW3NwbGl0XShjb21tYVNwYWNlcyk7XG4gICAgICAgICAgICAgICAgcmVkID0gdG9GbG9hdCh2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgICAgIHZhbHVlc1swXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKHJlZCAqPSAyLjU1KTtcbiAgICAgICAgICAgICAgICBncmVlbiA9IHRvRmxvYXQodmFsdWVzWzFdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMV0uc2xpY2UoLTEpID09IFwiJVwiICYmIChncmVlbiAqPSAyLjU1KTtcbiAgICAgICAgICAgICAgICBibHVlID0gdG9GbG9hdCh2YWx1ZXNbMl0pO1xuICAgICAgICAgICAgICAgIHZhbHVlc1syXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKGJsdWUgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgKHZhbHVlc1swXS5zbGljZSgtMykgPT0gXCJkZWdcIiB8fCB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiXFx4YjBcIikgJiYgKHJlZCAvPSAzNjApO1xuICAgICAgICAgICAgICAgIHJnYlsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDQpID09IFwiaHNiYVwiICYmIChvcGFjaXR5ID0gdG9GbG9hdCh2YWx1ZXNbM10pKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbM10gJiYgdmFsdWVzWzNdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAob3BhY2l0eSAvPSAxMDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBSLmhzYjJyZ2IocmVkLCBncmVlbiwgYmx1ZSwgb3BhY2l0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmdiWzZdKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzID0gcmdiWzZdW3NwbGl0XShjb21tYVNwYWNlcyk7XG4gICAgICAgICAgICAgICAgcmVkID0gdG9GbG9hdCh2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgICAgIHZhbHVlc1swXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKHJlZCAqPSAyLjU1KTtcbiAgICAgICAgICAgICAgICBncmVlbiA9IHRvRmxvYXQodmFsdWVzWzFdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMV0uc2xpY2UoLTEpID09IFwiJVwiICYmIChncmVlbiAqPSAyLjU1KTtcbiAgICAgICAgICAgICAgICBibHVlID0gdG9GbG9hdCh2YWx1ZXNbMl0pO1xuICAgICAgICAgICAgICAgIHZhbHVlc1syXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKGJsdWUgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgKHZhbHVlc1swXS5zbGljZSgtMykgPT0gXCJkZWdcIiB8fCB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiXFx4YjBcIikgJiYgKHJlZCAvPSAzNjApO1xuICAgICAgICAgICAgICAgIHJnYlsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDQpID09IFwiaHNsYVwiICYmIChvcGFjaXR5ID0gdG9GbG9hdCh2YWx1ZXNbM10pKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbM10gJiYgdmFsdWVzWzNdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAob3BhY2l0eSAvPSAxMDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBSLmhzbDJyZ2IocmVkLCBncmVlbiwgYmx1ZSwgb3BhY2l0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZ2IgPSB7cjogcmVkLCBnOiBncmVlbiwgYjogYmx1ZSwgdG9TdHJpbmc6IGNsclRvU3RyaW5nfTtcbiAgICAgICAgICAgIHJnYi5oZXggPSBcIiNcIiArICgxNjc3NzIxNiB8IGJsdWUgfCAoZ3JlZW4gPDwgOCkgfCAocmVkIDw8IDE2KSkudG9TdHJpbmcoMTYpLnNsaWNlKDEpO1xuICAgICAgICAgICAgUi5pcyhvcGFjaXR5LCBcImZpbml0ZVwiKSAmJiAocmdiLm9wYWNpdHkgPSBvcGFjaXR5KTtcbiAgICAgICAgICAgIHJldHVybiByZ2I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtyOiAtMSwgZzogLTEsIGI6IC0xLCBoZXg6IFwibm9uZVwiLCBlcnJvcjogMSwgdG9TdHJpbmc6IGNsclRvU3RyaW5nfTtcbiAgICB9LCBSKTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5oc2JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIEhTQiB2YWx1ZXMgdG8gaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGggKG51bWJlcikgaHVlXG4gICAgIC0gcyAobnVtYmVyKSBzYXR1cmF0aW9uXG4gICAgIC0gYiAobnVtYmVyKSB2YWx1ZSBvciBicmlnaHRuZXNzXG4gICAgID0gKHN0cmluZykgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgXFwqL1xuICAgIFIuaHNiID0gY2FjaGVyKGZ1bmN0aW9uIChoLCBzLCBiKSB7XG4gICAgICAgIHJldHVybiBSLmhzYjJyZ2IoaCwgcywgYikuaGV4O1xuICAgIH0pO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmhzbFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgSFNMIHZhbHVlcyB0byBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaCAobnVtYmVyKSBodWVcbiAgICAgLSBzIChudW1iZXIpIHNhdHVyYXRpb25cbiAgICAgLSBsIChudW1iZXIpIGx1bWlub3NpdHlcbiAgICAgPSAoc3RyaW5nKSBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICBcXCovXG4gICAgUi5oc2wgPSBjYWNoZXIoZnVuY3Rpb24gKGgsIHMsIGwpIHtcbiAgICAgICAgcmV0dXJuIFIuaHNsMnJnYihoLCBzLCBsKS5oZXg7XG4gICAgfSk7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmdiXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBSR0IgdmFsdWVzIHRvIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3VyLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSByIChudW1iZXIpIHJlZFxuICAgICAtIGcgKG51bWJlcikgZ3JlZW5cbiAgICAgLSBiIChudW1iZXIpIGJsdWVcbiAgICAgPSAoc3RyaW5nKSBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICBcXCovXG4gICAgUi5yZ2IgPSBjYWNoZXIoZnVuY3Rpb24gKHIsIGcsIGIpIHtcbiAgICAgICAgZnVuY3Rpb24gcm91bmQoeCkgeyByZXR1cm4gKHggKyAwLjUpIHwgMDsgfVxuICAgICAgICByZXR1cm4gXCIjXCIgKyAoMTY3NzcyMTYgfCByb3VuZChiKSB8IChyb3VuZChnKSA8PCA4KSB8IChyb3VuZChyKSA8PCAxNikpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICB9KTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5nZXRDb2xvclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogT24gZWFjaCBjYWxsIHJldHVybnMgbmV4dCBjb2xvdXIgaW4gdGhlIHNwZWN0cnVtLiBUbyByZXNldCBpdCBiYWNrIHRvIHJlZCBjYWxsIEBSYXBoYWVsLmdldENvbG9yLnJlc2V0XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHZhbHVlIChudW1iZXIpICNvcHRpb25hbCBicmlnaHRuZXNzLCBkZWZhdWx0IGlzIGAwLjc1YFxuICAgICA9IChzdHJpbmcpIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3VyLlxuICAgIFxcKi9cbiAgICBSLmdldENvbG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMuZ2V0Q29sb3Iuc3RhcnQgPSB0aGlzLmdldENvbG9yLnN0YXJ0IHx8IHtoOiAwLCBzOiAxLCBiOiB2YWx1ZSB8fCAuNzV9LFxuICAgICAgICAgICAgcmdiID0gdGhpcy5oc2IycmdiKHN0YXJ0LmgsIHN0YXJ0LnMsIHN0YXJ0LmIpO1xuICAgICAgICBzdGFydC5oICs9IC4wNzU7XG4gICAgICAgIGlmIChzdGFydC5oID4gMSkge1xuICAgICAgICAgICAgc3RhcnQuaCA9IDA7XG4gICAgICAgICAgICBzdGFydC5zIC09IC4yO1xuICAgICAgICAgICAgc3RhcnQucyA8PSAwICYmICh0aGlzLmdldENvbG9yLnN0YXJ0ID0ge2g6IDAsIHM6IDEsIGI6IHN0YXJ0LmJ9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmdiLmhleDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmdldENvbG9yLnJlc2V0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXNldHMgc3BlY3RydW0gcG9zaXRpb24gZm9yIEBSYXBoYWVsLmdldENvbG9yIGJhY2sgdG8gcmVkLlxuICAgIFxcKi9cbiAgICBSLmdldENvbG9yLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zdGFydDtcbiAgICB9O1xuXG4gICAgLy8gaHR0cDovL3NjaGVwZXJzLmNjL2dldHRpbmctdG8tdGhlLXBvaW50XG4gICAgZnVuY3Rpb24gY2F0bXVsbFJvbTJiZXppZXIoY3JwLCB6KSB7XG4gICAgICAgIHZhciBkID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpTGVuID0gY3JwLmxlbmd0aDsgaUxlbiAtIDIgKiAheiA+IGk7IGkgKz0gMikge1xuICAgICAgICAgICAgdmFyIHAgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7eDogK2NycFtpIC0gMl0sIHk6ICtjcnBbaSAtIDFdfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt4OiArY3JwW2ldLCAgICAgeTogK2NycFtpICsgMV19LFxuICAgICAgICAgICAgICAgICAgICAgICAge3g6ICtjcnBbaSArIDJdLCB5OiArY3JwW2kgKyAzXX0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7eDogK2NycFtpICsgNF0sIHk6ICtjcnBbaSArIDVdfVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgaWYgKHopIHtcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFswXSA9IHt4OiArY3JwW2lMZW4gLSAyXSwgeTogK2NycFtpTGVuIC0gMV19O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaUxlbiAtIDQgPT0gaSkge1xuICAgICAgICAgICAgICAgICAgICBwWzNdID0ge3g6ICtjcnBbMF0sIHk6ICtjcnBbMV19O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaUxlbiAtIDIgPT0gaSkge1xuICAgICAgICAgICAgICAgICAgICBwWzJdID0ge3g6ICtjcnBbMF0sIHk6ICtjcnBbMV19O1xuICAgICAgICAgICAgICAgICAgICBwWzNdID0ge3g6ICtjcnBbMl0sIHk6ICtjcnBbM119O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlMZW4gLSA0ID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFszXSA9IHBbMl07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaSkge1xuICAgICAgICAgICAgICAgICAgICBwWzBdID0ge3g6ICtjcnBbaV0sIHk6ICtjcnBbaSArIDFdfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkLnB1c2goW1wiQ1wiLFxuICAgICAgICAgICAgICAgICAgKC1wWzBdLnggKyA2ICogcFsxXS54ICsgcFsyXS54KSAvIDYsXG4gICAgICAgICAgICAgICAgICAoLXBbMF0ueSArIDYgKiBwWzFdLnkgKyBwWzJdLnkpIC8gNixcbiAgICAgICAgICAgICAgICAgIChwWzFdLnggKyA2ICogcFsyXS54IC0gcFszXS54KSAvIDYsXG4gICAgICAgICAgICAgICAgICAocFsxXS55ICsgNipwWzJdLnkgLSBwWzNdLnkpIC8gNixcbiAgICAgICAgICAgICAgICAgIHBbMl0ueCxcbiAgICAgICAgICAgICAgICAgIHBbMl0ueVxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZDtcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGFyc2VQYXRoU3RyaW5nXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIFBhcnNlcyBnaXZlbiBwYXRoIHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIGFycmF5cyBvZiBwYXRoIHNlZ21lbnRzLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoU3RyaW5nIChzdHJpbmd8YXJyYXkpIHBhdGggc3RyaW5nIG9yIGFycmF5IG9mIHNlZ21lbnRzIChpbiB0aGUgbGFzdCBjYXNlIGl0IHdpbGwgYmUgcmV0dXJuZWQgc3RyYWlnaHQgYXdheSlcbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIHNlZ21lbnRzLlxuICAgIFxcKi9cbiAgICBSLnBhcnNlUGF0aFN0cmluZyA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XG4gICAgICAgIGlmICghcGF0aFN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHB0aCA9IHBhdGhzKHBhdGhTdHJpbmcpO1xuICAgICAgICBpZiAocHRoLmFycikge1xuICAgICAgICAgICAgcmV0dXJuIHBhdGhDbG9uZShwdGguYXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJhbUNvdW50cyA9IHthOiA3LCBjOiA2LCBoOiAxLCBsOiAyLCBtOiAyLCByOiA0LCBxOiA0LCBzOiA0LCB0OiAyLCB2OiAxLCB6OiAwfSxcbiAgICAgICAgICAgIGRhdGEgPSBbXTtcbiAgICAgICAgaWYgKFIuaXMocGF0aFN0cmluZywgYXJyYXkpICYmIFIuaXMocGF0aFN0cmluZ1swXSwgYXJyYXkpKSB7IC8vIHJvdWdoIGFzc3VtcHRpb25cbiAgICAgICAgICAgIGRhdGEgPSBwYXRoQ2xvbmUocGF0aFN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgU3RyKHBhdGhTdHJpbmcpLnJlcGxhY2UocGF0aENvbW1hbmQsIGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gYi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGMucmVwbGFjZShwYXRoVmFsdWVzLCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICBiICYmIHBhcmFtcy5wdXNoKCtiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBcIm1cIiAmJiBwYXJhbXMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goW2JdW2NvbmNhdF0ocGFyYW1zLnNwbGljZSgwLCAyKSkpO1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gXCJsXCI7XG4gICAgICAgICAgICAgICAgICAgIGIgPSBiID09IFwibVwiID8gXCJsXCIgOiBcIkxcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFtiXVtjb25jYXRdKHBhcmFtcykpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB3aGlsZSAocGFyYW1zLmxlbmd0aCA+PSBwYXJhbUNvdW50c1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goW2JdW2NvbmNhdF0ocGFyYW1zLnNwbGljZSgwLCBwYXJhbUNvdW50c1tuYW1lXSkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbUNvdW50c1tuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnRvU3RyaW5nID0gUi5fcGF0aDJzdHJpbmc7XG4gICAgICAgIHB0aC5hcnIgPSBwYXRoQ2xvbmUoZGF0YSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGFyc2VUcmFuc2Zvcm1TdHJpbmdcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUGFyc2VzIGdpdmVuIHBhdGggc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdHJhbnNmb3JtYXRpb25zLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBUU3RyaW5nIChzdHJpbmd8YXJyYXkpIHRyYW5zZm9ybSBzdHJpbmcgb3IgYXJyYXkgb2YgdHJhbnNmb3JtYXRpb25zIChpbiB0aGUgbGFzdCBjYXNlIGl0IHdpbGwgYmUgcmV0dXJuZWQgc3RyYWlnaHQgYXdheSlcbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIHRyYW5zZm9ybWF0aW9ucy5cbiAgICBcXCovXG4gICAgUi5wYXJzZVRyYW5zZm9ybVN0cmluZyA9IGNhY2hlcihmdW5jdGlvbiAoVFN0cmluZykge1xuICAgICAgICBpZiAoIVRTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJhbUNvdW50cyA9IHtyOiAzLCBzOiA0LCB0OiAyLCBtOiA2fSxcbiAgICAgICAgICAgIGRhdGEgPSBbXTtcbiAgICAgICAgaWYgKFIuaXMoVFN0cmluZywgYXJyYXkpICYmIFIuaXMoVFN0cmluZ1swXSwgYXJyYXkpKSB7IC8vIHJvdWdoIGFzc3VtcHRpb25cbiAgICAgICAgICAgIGRhdGEgPSBwYXRoQ2xvbmUoVFN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgU3RyKFRTdHJpbmcpLnJlcGxhY2UodENvbW1hbmQsIGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbG93ZXJDYXNlLmNhbGwoYik7XG4gICAgICAgICAgICAgICAgYy5yZXBsYWNlKHBhdGhWYWx1ZXMsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgIGIgJiYgcGFyYW1zLnB1c2goK2IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGEucHVzaChbYl1bY29uY2F0XShwYXJhbXMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGRhdGEudG9TdHJpbmcgPSBSLl9wYXRoMnN0cmluZztcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwgdGhpcywgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICBpZiAoIWVsZW0pIHJldHVybiBlbGVtO1xuICAgICAgICB2YXIgbmV3RGF0YSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuZXdMZXZlbCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbmV3TGV2ZWwucHVzaChlbGVtW2ldW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0RhdGEucHVzaChuZXdMZXZlbCk7XG4gICAgICAgIH1cbiAgICAgIHJldHVybiBuZXdEYXRhOyB9ICk7XG4gICAgLy8gUEFUSFNcbiAgICB2YXIgcGF0aHMgPSBmdW5jdGlvbiAocHMpIHtcbiAgICAgICAgdmFyIHAgPSBwYXRocy5wcyA9IHBhdGhzLnBzIHx8IHt9O1xuICAgICAgICBpZiAocFtwc10pIHtcbiAgICAgICAgICAgIHBbcHNdLnNsZWVwID0gMTAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcFtwc10gPSB7XG4gICAgICAgICAgICAgICAgc2xlZXA6IDEwMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwKSBpZiAocFtoYXNdKGtleSkgJiYga2V5ICE9IHBzKSB7XG4gICAgICAgICAgICAgICAgcFtrZXldLnNsZWVwLS07XG4gICAgICAgICAgICAgICAgIXBba2V5XS5zbGVlcCAmJiBkZWxldGUgcFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBbcHNdO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZmluZERvdHNBdFNlZ21lbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogRmluZCBkb3QgY29vcmRpbmF0ZXMgb24gdGhlIGdpdmVuIGN1YmljIGJlemllciBjdXJ2ZSBhdCB0aGUgZ2l2ZW4gdC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcDF4IChudW1iZXIpIHggb2YgdGhlIGZpcnN0IHBvaW50IG9mIHRoZSBjdXJ2ZVxuICAgICAtIHAxeSAobnVtYmVyKSB5IG9mIHRoZSBmaXJzdCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSBjMXggKG51bWJlcikgeCBvZiB0aGUgZmlyc3QgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMxeSAobnVtYmVyKSB5IG9mIHRoZSBmaXJzdCBhbmNob3Igb2YgdGhlIGN1cnZlXG4gICAgIC0gYzJ4IChudW1iZXIpIHggb2YgdGhlIHNlY29uZCBhbmNob3Igb2YgdGhlIGN1cnZlXG4gICAgIC0gYzJ5IChudW1iZXIpIHkgb2YgdGhlIHNlY29uZCBhbmNob3Igb2YgdGhlIGN1cnZlXG4gICAgIC0gcDJ4IChudW1iZXIpIHggb2YgdGhlIHNlY29uZCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSBwMnkgKG51bWJlcikgeSBvZiB0aGUgc2Vjb25kIHBvaW50IG9mIHRoZSBjdXJ2ZVxuICAgICAtIHQgKG51bWJlcikgcG9zaXRpb24gb24gdGhlIGN1cnZlICgwLi4xKVxuICAgICA9IChvYmplY3QpIHBvaW50IGluZm9ybWF0aW9uIGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICBvICAgICBtOiB7XG4gICAgIG8gICAgICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIGxlZnQgYW5jaG9yXG4gICAgIG8gICAgICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIGxlZnQgYW5jaG9yXG4gICAgIG8gICAgIH1cbiAgICAgbyAgICAgbjoge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSByaWdodCBhbmNob3JcbiAgICAgbyAgICAgICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgYW5jaG9yXG4gICAgIG8gICAgIH1cbiAgICAgbyAgICAgc3RhcnQ6IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgb2YgdGhlIGN1cnZlXG4gICAgIG8gICAgICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHN0YXJ0IG9mIHRoZSBjdXJ2ZVxuICAgICBvICAgICB9XG4gICAgIG8gICAgIGVuZDoge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBlbmQgb2YgdGhlIGN1cnZlXG4gICAgIG8gICAgICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIGVuZCBvZiB0aGUgY3VydmVcbiAgICAgbyAgICAgfVxuICAgICBvICAgICBhbHBoYTogKG51bWJlcikgYW5nbGUgb2YgdGhlIGN1cnZlIGRlcml2YXRpdmUgYXQgdGhlIHBvaW50XG4gICAgIG8gfVxuICAgIFxcKi9cbiAgICBSLmZpbmREb3RzQXRTZWdtZW50ID0gZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0KSB7XG4gICAgICAgIHZhciB0MSA9IDEgLSB0LFxuICAgICAgICAgICAgdDEzID0gcG93KHQxLCAzKSxcbiAgICAgICAgICAgIHQxMiA9IHBvdyh0MSwgMiksXG4gICAgICAgICAgICB0MiA9IHQgKiB0LFxuICAgICAgICAgICAgdDMgPSB0MiAqIHQsXG4gICAgICAgICAgICB4ID0gdDEzICogcDF4ICsgdDEyICogMyAqIHQgKiBjMXggKyB0MSAqIDMgKiB0ICogdCAqIGMyeCArIHQzICogcDJ4LFxuICAgICAgICAgICAgeSA9IHQxMyAqIHAxeSArIHQxMiAqIDMgKiB0ICogYzF5ICsgdDEgKiAzICogdCAqIHQgKiBjMnkgKyB0MyAqIHAyeSxcbiAgICAgICAgICAgIG14ID0gcDF4ICsgMiAqIHQgKiAoYzF4IC0gcDF4KSArIHQyICogKGMyeCAtIDIgKiBjMXggKyBwMXgpLFxuICAgICAgICAgICAgbXkgPSBwMXkgKyAyICogdCAqIChjMXkgLSBwMXkpICsgdDIgKiAoYzJ5IC0gMiAqIGMxeSArIHAxeSksXG4gICAgICAgICAgICBueCA9IGMxeCArIDIgKiB0ICogKGMyeCAtIGMxeCkgKyB0MiAqIChwMnggLSAyICogYzJ4ICsgYzF4KSxcbiAgICAgICAgICAgIG55ID0gYzF5ICsgMiAqIHQgKiAoYzJ5IC0gYzF5KSArIHQyICogKHAyeSAtIDIgKiBjMnkgKyBjMXkpLFxuICAgICAgICAgICAgYXggPSB0MSAqIHAxeCArIHQgKiBjMXgsXG4gICAgICAgICAgICBheSA9IHQxICogcDF5ICsgdCAqIGMxeSxcbiAgICAgICAgICAgIGN4ID0gdDEgKiBjMnggKyB0ICogcDJ4LFxuICAgICAgICAgICAgY3kgPSB0MSAqIGMyeSArIHQgKiBwMnksXG4gICAgICAgICAgICBhbHBoYSA9ICg5MCAtIG1hdGguYXRhbjIobXggLSBueCwgbXkgLSBueSkgKiAxODAgLyBQSSk7XG4gICAgICAgIChteCA+IG54IHx8IG15IDwgbnkpICYmIChhbHBoYSArPSAxODApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICBtOiB7eDogbXgsIHk6IG15fSxcbiAgICAgICAgICAgIG46IHt4OiBueCwgeTogbnl9LFxuICAgICAgICAgICAgc3RhcnQ6IHt4OiBheCwgeTogYXl9LFxuICAgICAgICAgICAgZW5kOiB7eDogY3gsIHk6IGN5fSxcbiAgICAgICAgICAgIGFscGhhOiBhbHBoYVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuYmV6aWVyQkJveFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBSZXR1cm4gYm91bmRpbmcgYm94IG9mIGEgZ2l2ZW4gY3ViaWMgYmV6aWVyIGN1cnZlXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHAxeCAobnVtYmVyKSB4IG9mIHRoZSBmaXJzdCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSBwMXkgKG51bWJlcikgeSBvZiB0aGUgZmlyc3QgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gYzF4IChudW1iZXIpIHggb2YgdGhlIGZpcnN0IGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMXkgKG51bWJlcikgeSBvZiB0aGUgZmlyc3QgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMyeCAobnVtYmVyKSB4IG9mIHRoZSBzZWNvbmQgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMyeSAobnVtYmVyKSB5IG9mIHRoZSBzZWNvbmQgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIHAyeCAobnVtYmVyKSB4IG9mIHRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gcDJ5IChudW1iZXIpIHkgb2YgdGhlIHNlY29uZCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgKiBvclxuICAgICAtIGJleiAoYXJyYXkpIGFycmF5IG9mIHNpeCBwb2ludHMgZm9yIGJlemllciBjdXJ2ZVxuICAgICA9IChvYmplY3QpIHBvaW50IGluZm9ybWF0aW9uIGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIG1pbjoge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHBvaW50XG4gICAgIG8gICAgICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHRvcCBwb2ludFxuICAgICBvICAgICB9XG4gICAgIG8gICAgIG1heDoge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSByaWdodCBwb2ludFxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBib3R0b20gcG9pbnRcbiAgICAgbyAgICAgfVxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5iZXppZXJCQm94ID0gZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5KSB7XG4gICAgICAgIGlmICghUi5pcyhwMXgsIFwiYXJyYXlcIikpIHtcbiAgICAgICAgICAgIHAxeCA9IFtwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJib3ggPSBjdXJ2ZURpbS5hcHBseShudWxsLCBwMXgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogYmJveC5taW4ueCxcbiAgICAgICAgICAgIHk6IGJib3gubWluLnksXG4gICAgICAgICAgICB4MjogYmJveC5tYXgueCxcbiAgICAgICAgICAgIHkyOiBiYm94Lm1heC55LFxuICAgICAgICAgICAgd2lkdGg6IGJib3gubWF4LnggLSBiYm94Lm1pbi54LFxuICAgICAgICAgICAgaGVpZ2h0OiBiYm94Lm1heC55IC0gYmJveC5taW4ueVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaXNQb2ludEluc2lkZUJCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgZ2l2ZW4gcG9pbnQgaXMgaW5zaWRlIGJvdW5kaW5nIGJveGVzLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBiYm94IChzdHJpbmcpIGJvdW5kaW5nIGJveFxuICAgICAtIHggKHN0cmluZykgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICAtIHkgKHN0cmluZykgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgcG9pbnQgaW5zaWRlXG4gICAgXFwqL1xuICAgIFIuaXNQb2ludEluc2lkZUJCb3ggPSBmdW5jdGlvbiAoYmJveCwgeCwgeSkge1xuICAgICAgICByZXR1cm4geCA+PSBiYm94LnggJiYgeCA8PSBiYm94LngyICYmIHkgPj0gYmJveC55ICYmIHkgPD0gYmJveC55MjtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmlzQkJveEludGVyc2VjdFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0d28gYm91bmRpbmcgYm94ZXMgaW50ZXJzZWN0XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGJib3gxIChzdHJpbmcpIGZpcnN0IGJvdW5kaW5nIGJveFxuICAgICAtIGJib3gyIChzdHJpbmcpIHNlY29uZCBib3VuZGluZyBib3hcbiAgICAgPSAoYm9vbGVhbikgYHRydWVgIGlmIHRoZXkgaW50ZXJzZWN0XG4gICAgXFwqL1xuICAgIFIuaXNCQm94SW50ZXJzZWN0ID0gZnVuY3Rpb24gKGJib3gxLCBiYm94Mikge1xuICAgICAgICB2YXIgaSA9IFIuaXNQb2ludEluc2lkZUJCb3g7XG4gICAgICAgIHJldHVybiBpKGJib3gyLCBiYm94MS54LCBiYm94MS55KVxuICAgICAgICAgICAgfHwgaShiYm94MiwgYmJveDEueDIsIGJib3gxLnkpXG4gICAgICAgICAgICB8fCBpKGJib3gyLCBiYm94MS54LCBiYm94MS55MilcbiAgICAgICAgICAgIHx8IGkoYmJveDIsIGJib3gxLngyLCBiYm94MS55MilcbiAgICAgICAgICAgIHx8IGkoYmJveDEsIGJib3gyLngsIGJib3gyLnkpXG4gICAgICAgICAgICB8fCBpKGJib3gxLCBiYm94Mi54MiwgYmJveDIueSlcbiAgICAgICAgICAgIHx8IGkoYmJveDEsIGJib3gyLngsIGJib3gyLnkyKVxuICAgICAgICAgICAgfHwgaShiYm94MSwgYmJveDIueDIsIGJib3gyLnkyKVxuICAgICAgICAgICAgfHwgKGJib3gxLnggPCBiYm94Mi54MiAmJiBiYm94MS54ID4gYmJveDIueCB8fCBiYm94Mi54IDwgYmJveDEueDIgJiYgYmJveDIueCA+IGJib3gxLngpXG4gICAgICAgICAgICAmJiAoYmJveDEueSA8IGJib3gyLnkyICYmIGJib3gxLnkgPiBiYm94Mi55IHx8IGJib3gyLnkgPCBiYm94MS55MiAmJiBiYm94Mi55ID4gYmJveDEueSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBiYXNlMyh0LCBwMSwgcDIsIHAzLCBwNCkge1xuICAgICAgICB2YXIgdDEgPSAtMyAqIHAxICsgOSAqIHAyIC0gOSAqIHAzICsgMyAqIHA0LFxuICAgICAgICAgICAgdDIgPSB0ICogdDEgKyA2ICogcDEgLSAxMiAqIHAyICsgNiAqIHAzO1xuICAgICAgICByZXR1cm4gdCAqIHQyIC0gMyAqIHAxICsgMyAqIHAyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiZXpsZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCB6KSB7XG4gICAgICAgIGlmICh6ID09IG51bGwpIHtcbiAgICAgICAgICAgIHogPSAxO1xuICAgICAgICB9XG4gICAgICAgIHogPSB6ID4gMSA/IDEgOiB6IDwgMCA/IDAgOiB6O1xuICAgICAgICB2YXIgejIgPSB6IC8gMixcbiAgICAgICAgICAgIG4gPSAxMixcbiAgICAgICAgICAgIFR2YWx1ZXMgPSBbLTAuMTI1MiwwLjEyNTIsLTAuMzY3OCwwLjM2NzgsLTAuNTg3MywwLjU4NzMsLTAuNzY5OSwwLjc2OTksLTAuOTA0MSwwLjkwNDEsLTAuOTgxNiwwLjk4MTZdLFxuICAgICAgICAgICAgQ3ZhbHVlcyA9IFswLjI0OTEsMC4yNDkxLDAuMjMzNSwwLjIzMzUsMC4yMDMyLDAuMjAzMiwwLjE2MDEsMC4xNjAxLDAuMTA2OSwwLjEwNjksMC4wNDcyLDAuMDQ3Ml0sXG4gICAgICAgICAgICBzdW0gPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgdmFyIGN0ID0gejIgKiBUdmFsdWVzW2ldICsgejIsXG4gICAgICAgICAgICAgICAgeGJhc2UgPSBiYXNlMyhjdCwgeDEsIHgyLCB4MywgeDQpLFxuICAgICAgICAgICAgICAgIHliYXNlID0gYmFzZTMoY3QsIHkxLCB5MiwgeTMsIHk0KSxcbiAgICAgICAgICAgICAgICBjb21iID0geGJhc2UgKiB4YmFzZSArIHliYXNlICogeWJhc2U7XG4gICAgICAgICAgICBzdW0gKz0gQ3ZhbHVlc1tpXSAqIG1hdGguc3FydChjb21iKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gejIgKiBzdW07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFRhdExlbih4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQsIGxsKSB7XG4gICAgICAgIGlmIChsbCA8IDAgfHwgYmV6bGVuKHgxLCB5MSwgeDIsIHkyLCB4MywgeTMsIHg0LCB5NCkgPCBsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ID0gMSxcbiAgICAgICAgICAgIHN0ZXAgPSB0IC8gMixcbiAgICAgICAgICAgIHQyID0gdCAtIHN0ZXAsXG4gICAgICAgICAgICBsLFxuICAgICAgICAgICAgZSA9IC4wMTtcbiAgICAgICAgbCA9IGJlemxlbih4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQsIHQyKTtcbiAgICAgICAgd2hpbGUgKGFicyhsIC0gbGwpID4gZSkge1xuICAgICAgICAgICAgc3RlcCAvPSAyO1xuICAgICAgICAgICAgdDIgKz0gKGwgPCBsbCA/IDEgOiAtMSkgKiBzdGVwO1xuICAgICAgICAgICAgbCA9IGJlemxlbih4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQsIHQyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVyc2VjdCh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbW1heCh4MSwgeDIpIDwgbW1pbih4MywgeDQpIHx8XG4gICAgICAgICAgICBtbWluKHgxLCB4MikgPiBtbWF4KHgzLCB4NCkgfHxcbiAgICAgICAgICAgIG1tYXgoeTEsIHkyKSA8IG1taW4oeTMsIHk0KSB8fFxuICAgICAgICAgICAgbW1pbih5MSwgeTIpID4gbW1heCh5MywgeTQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBueCA9ICh4MSAqIHkyIC0geTEgKiB4MikgKiAoeDMgLSB4NCkgLSAoeDEgLSB4MikgKiAoeDMgKiB5NCAtIHkzICogeDQpLFxuICAgICAgICAgICAgbnkgPSAoeDEgKiB5MiAtIHkxICogeDIpICogKHkzIC0geTQpIC0gKHkxIC0geTIpICogKHgzICogeTQgLSB5MyAqIHg0KSxcbiAgICAgICAgICAgIGRlbm9taW5hdG9yID0gKHgxIC0geDIpICogKHkzIC0geTQpIC0gKHkxIC0geTIpICogKHgzIC0geDQpO1xuXG4gICAgICAgIGlmICghZGVub21pbmF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHggPSBueCAvIGRlbm9taW5hdG9yLFxuICAgICAgICAgICAgcHkgPSBueSAvIGRlbm9taW5hdG9yLFxuICAgICAgICAgICAgcHgyID0gK3B4LnRvRml4ZWQoMiksXG4gICAgICAgICAgICBweTIgPSArcHkudG9GaXhlZCgyKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcHgyIDwgK21taW4oeDEsIHgyKS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweDIgPiArbW1heCh4MSwgeDIpLnRvRml4ZWQoMikgfHxcbiAgICAgICAgICAgIHB4MiA8ICttbWluKHgzLCB4NCkudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHgyID4gK21tYXgoeDMsIHg0KS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweTIgPCArbW1pbih5MSwgeTIpLnRvRml4ZWQoMikgfHxcbiAgICAgICAgICAgIHB5MiA+ICttbWF4KHkxLCB5MikudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHkyIDwgK21taW4oeTMsIHk0KS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweTIgPiArbW1heCh5MywgeTQpLnRvRml4ZWQoMilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHt4OiBweCwgeTogcHl9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnRlcihiZXoxLCBiZXoyKSB7XG4gICAgICAgIHJldHVybiBpbnRlckhlbHBlcihiZXoxLCBiZXoyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50ZXJDb3VudChiZXoxLCBiZXoyKSB7XG4gICAgICAgIHJldHVybiBpbnRlckhlbHBlcihiZXoxLCBiZXoyLCAxKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50ZXJIZWxwZXIoYmV6MSwgYmV6MiwganVzdENvdW50KSB7XG4gICAgICAgIHZhciBiYm94MSA9IFIuYmV6aWVyQkJveChiZXoxKSxcbiAgICAgICAgICAgIGJib3gyID0gUi5iZXppZXJCQm94KGJlejIpO1xuICAgICAgICBpZiAoIVIuaXNCQm94SW50ZXJzZWN0KGJib3gxLCBiYm94MikpIHtcbiAgICAgICAgICAgIHJldHVybiBqdXN0Q291bnQgPyAwIDogW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGwxID0gYmV6bGVuLmFwcGx5KDAsIGJlejEpLFxuICAgICAgICAgICAgbDIgPSBiZXpsZW4uYXBwbHkoMCwgYmV6MiksXG4gICAgICAgICAgICBuMSA9IG1tYXgofn4obDEgLyA1KSwgMSksXG4gICAgICAgICAgICBuMiA9IG1tYXgofn4obDIgLyA1KSwgMSksXG4gICAgICAgICAgICBkb3RzMSA9IFtdLFxuICAgICAgICAgICAgZG90czIgPSBbXSxcbiAgICAgICAgICAgIHh5ID0ge30sXG4gICAgICAgICAgICByZXMgPSBqdXN0Q291bnQgPyAwIDogW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjEgKyAxOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwID0gUi5maW5kRG90c0F0U2VnbWVudC5hcHBseShSLCBiZXoxLmNvbmNhdChpIC8gbjEpKTtcbiAgICAgICAgICAgIGRvdHMxLnB1c2goe3g6IHAueCwgeTogcC55LCB0OiBpIC8gbjF9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjIgKyAxOyBpKyspIHtcbiAgICAgICAgICAgIHAgPSBSLmZpbmREb3RzQXRTZWdtZW50LmFwcGx5KFIsIGJlejIuY29uY2F0KGkgLyBuMikpO1xuICAgICAgICAgICAgZG90czIucHVzaCh7eDogcC54LCB5OiBwLnksIHQ6IGkgLyBuMn0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBuMTsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG4yOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGkgPSBkb3RzMVtpXSxcbiAgICAgICAgICAgICAgICAgICAgZGkxID0gZG90czFbaSArIDFdLFxuICAgICAgICAgICAgICAgICAgICBkaiA9IGRvdHMyW2pdLFxuICAgICAgICAgICAgICAgICAgICBkajEgPSBkb3RzMltqICsgMV0sXG4gICAgICAgICAgICAgICAgICAgIGNpID0gYWJzKGRpMS54IC0gZGkueCkgPCAuMDAxID8gXCJ5XCIgOiBcInhcIixcbiAgICAgICAgICAgICAgICAgICAgY2ogPSBhYnMoZGoxLnggLSBkai54KSA8IC4wMDEgPyBcInlcIiA6IFwieFwiLFxuICAgICAgICAgICAgICAgICAgICBpcyA9IGludGVyc2VjdChkaS54LCBkaS55LCBkaTEueCwgZGkxLnksIGRqLngsIGRqLnksIGRqMS54LCBkajEueSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4eVtpcy54LnRvRml4ZWQoNCldID09IGlzLnkudG9GaXhlZCg0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgeHlbaXMueC50b0ZpeGVkKDQpXSA9IGlzLnkudG9GaXhlZCg0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQxID0gZGkudCArIGFicygoaXNbY2ldIC0gZGlbY2ldKSAvIChkaTFbY2ldIC0gZGlbY2ldKSkgKiAoZGkxLnQgLSBkaS50KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHQyID0gZGoudCArIGFicygoaXNbY2pdIC0gZGpbY2pdKSAvIChkajFbY2pdIC0gZGpbY2pdKSkgKiAoZGoxLnQgLSBkai50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMS4wMDEgJiYgdDIgPj0gMCAmJiB0MiA8PSAxLjAwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGp1c3RDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGlzLngsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGlzLnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQxOiBtbWluKHQxLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdDI6IG1taW4odDIsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGF0aEludGVyc2VjdGlvblxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBGaW5kcyBpbnRlcnNlY3Rpb25zIG9mIHR3byBwYXRoc1xuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoMSAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAtIHBhdGgyIChzdHJpbmcpIHBhdGggc3RyaW5nXG4gICAgID0gKGFycmF5KSBkb3RzIG9mIGludGVyc2VjdGlvblxuICAgICBvIFtcbiAgICAgbyAgICAge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICBvICAgICAgICAgdDE6IChudW1iZXIpIHQgdmFsdWUgZm9yIHNlZ21lbnQgb2YgcGF0aDFcbiAgICAgbyAgICAgICAgIHQyOiAobnVtYmVyKSB0IHZhbHVlIGZvciBzZWdtZW50IG9mIHBhdGgyXG4gICAgIG8gICAgICAgICBzZWdtZW50MTogKG51bWJlcikgb3JkZXIgbnVtYmVyIGZvciBzZWdtZW50IG9mIHBhdGgxXG4gICAgIG8gICAgICAgICBzZWdtZW50MjogKG51bWJlcikgb3JkZXIgbnVtYmVyIGZvciBzZWdtZW50IG9mIHBhdGgyXG4gICAgIG8gICAgICAgICBiZXoxOiAoYXJyYXkpIGVpZ2h0IGNvb3JkaW5hdGVzIHJlcHJlc2VudGluZyBiZXppw6lyIGN1cnZlIGZvciB0aGUgc2VnbWVudCBvZiBwYXRoMVxuICAgICBvICAgICAgICAgYmV6MjogKGFycmF5KSBlaWdodCBjb29yZGluYXRlcyByZXByZXNlbnRpbmcgYmV6acOpciBjdXJ2ZSBmb3IgdGhlIHNlZ21lbnQgb2YgcGF0aDJcbiAgICAgbyAgICAgfVxuICAgICBvIF1cbiAgICBcXCovXG4gICAgUi5wYXRoSW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gKHBhdGgxLCBwYXRoMikge1xuICAgICAgICByZXR1cm4gaW50ZXJQYXRoSGVscGVyKHBhdGgxLCBwYXRoMik7XG4gICAgfTtcbiAgICBSLnBhdGhJbnRlcnNlY3Rpb25OdW1iZXIgPSBmdW5jdGlvbiAocGF0aDEsIHBhdGgyKSB7XG4gICAgICAgIHJldHVybiBpbnRlclBhdGhIZWxwZXIocGF0aDEsIHBhdGgyLCAxKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGludGVyUGF0aEhlbHBlcihwYXRoMSwgcGF0aDIsIGp1c3RDb3VudCkge1xuICAgICAgICBwYXRoMSA9IFIuX3BhdGgyY3VydmUocGF0aDEpO1xuICAgICAgICBwYXRoMiA9IFIuX3BhdGgyY3VydmUocGF0aDIpO1xuICAgICAgICB2YXIgeDEsIHkxLCB4MiwgeTIsIHgxbSwgeTFtLCB4Mm0sIHkybSwgYmV6MSwgYmV6MixcbiAgICAgICAgICAgIHJlcyA9IGp1c3RDb3VudCA/IDAgOiBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcGF0aDEubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIHBpID0gcGF0aDFbaV07XG4gICAgICAgICAgICBpZiAocGlbMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICB4MSA9IHgxbSA9IHBpWzFdO1xuICAgICAgICAgICAgICAgIHkxID0geTFtID0gcGlbMl07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChwaVswXSA9PSBcIkNcIikge1xuICAgICAgICAgICAgICAgICAgICBiZXoxID0gW3gxLCB5MV0uY29uY2F0KHBpLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgeDEgPSBiZXoxWzZdO1xuICAgICAgICAgICAgICAgICAgICB5MSA9IGJlejFbN107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmV6MSA9IFt4MSwgeTEsIHgxLCB5MSwgeDFtLCB5MW0sIHgxbSwgeTFtXTtcbiAgICAgICAgICAgICAgICAgICAgeDEgPSB4MW07XG4gICAgICAgICAgICAgICAgICAgIHkxID0geTFtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBwYXRoMi5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwaiA9IHBhdGgyW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGpbMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgyID0geDJtID0gcGpbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IHkybSA9IHBqWzJdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBqWzBdID09IFwiQ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmV6MiA9IFt4MiwgeTJdLmNvbmNhdChwai5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBiZXoyWzZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkyID0gYmV6Mls3XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmV6MiA9IFt4MiwgeTIsIHgyLCB5MiwgeDJtLCB5Mm0sIHgybSwgeTJtXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MiA9IHgybTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IHkybTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRyID0gaW50ZXJIZWxwZXIoYmV6MSwgYmV6MiwganVzdENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqdXN0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gaW50cjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDAsIGtrID0gaW50ci5sZW5ndGg7IGsgPCBrazsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludHJba10uc2VnbWVudDEgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRyW2tdLnNlZ21lbnQyID0gajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cltrXS5iZXoxID0gYmV6MTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cltrXS5iZXoyID0gYmV6MjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzLmNvbmNhdChpbnRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5pc1BvaW50SW5zaWRlUGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBnaXZlbiBwb2ludCBpcyBpbnNpZGUgYSBnaXZlbiBjbG9zZWQgcGF0aC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcGF0aCAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAtIHggKG51bWJlcikgeCBvZiB0aGUgcG9pbnRcbiAgICAgLSB5IChudW1iZXIpIHkgb2YgdGhlIHBvaW50XG4gICAgID0gKGJvb2xlYW4pIHRydWUsIGlmIHBvaW50IGlzIGluc2lkZSB0aGUgcGF0aFxuICAgIFxcKi9cbiAgICBSLmlzUG9pbnRJbnNpZGVQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHgsIHkpIHtcbiAgICAgICAgdmFyIGJib3ggPSBSLnBhdGhCQm94KHBhdGgpO1xuICAgICAgICByZXR1cm4gUi5pc1BvaW50SW5zaWRlQkJveChiYm94LCB4LCB5KSAmJlxuICAgICAgICAgICAgICAgaW50ZXJQYXRoSGVscGVyKHBhdGgsIFtbXCJNXCIsIHgsIHldLCBbXCJIXCIsIGJib3gueDIgKyAxMF1dLCAxKSAlIDIgPT0gMTtcbiAgICB9O1xuICAgIFIuX3JlbW92ZWRGYWN0b3J5ID0gZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZShcInJhcGhhZWwubG9nXCIsIG51bGwsIFwiUmFwaGFcXHhlYmw6IHlvdSBhcmUgY2FsbGluZyB0byBtZXRob2QgXFx1MjAxY1wiICsgbWV0aG9kbmFtZSArIFwiXFx1MjAxZCBvZiByZW1vdmVkIG9iamVjdFwiLCBtZXRob2RuYW1lKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhdGhCQm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIFJldHVybiBib3VuZGluZyBib3ggb2YgYSBnaXZlbiBwYXRoXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGggKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgPSAob2JqZWN0KSBib3VuZGluZyBib3hcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgbGVmdCB0b3AgcG9pbnQgb2YgdGhlIGJveFxuICAgICBvICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIGxlZnQgdG9wIHBvaW50IG9mIHRoZSBib3hcbiAgICAgbyAgICAgeDI6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgYm90dG9tIHBvaW50IG9mIHRoZSBib3hcbiAgICAgbyAgICAgeTI6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgYm90dG9tIHBvaW50IG9mIHRoZSBib3hcbiAgICAgbyAgICAgd2lkdGg6IChudW1iZXIpIHdpZHRoIG9mIHRoZSBib3hcbiAgICAgbyAgICAgaGVpZ2h0OiAobnVtYmVyKSBoZWlnaHQgb2YgdGhlIGJveFxuICAgICBvICAgICBjeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIGJveFxuICAgICBvICAgICBjeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIGJveFxuICAgICBvIH1cbiAgICBcXCovXG4gICAgdmFyIHBhdGhEaW1lbnNpb25zID0gUi5wYXRoQkJveCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgIHZhciBwdGggPSBwYXRocyhwYXRoKTtcbiAgICAgICAgaWYgKHB0aC5iYm94KSB7XG4gICAgICAgICAgICByZXR1cm4gY2xvbmUocHRoLmJib3gpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHt4OiAwLCB5OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwLCB4MjogMCwgeTI6IDB9O1xuICAgICAgICB9XG4gICAgICAgIHBhdGggPSBwYXRoMmN1cnZlKHBhdGgpO1xuICAgICAgICB2YXIgeCA9IDAsXG4gICAgICAgICAgICB5ID0gMCxcbiAgICAgICAgICAgIFggPSBbXSxcbiAgICAgICAgICAgIFkgPSBbXSxcbiAgICAgICAgICAgIHA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBhdGgubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgcCA9IHBhdGhbaV07XG4gICAgICAgICAgICBpZiAocFswXSA9PSBcIk1cIikge1xuICAgICAgICAgICAgICAgIHggPSBwWzFdO1xuICAgICAgICAgICAgICAgIHkgPSBwWzJdO1xuICAgICAgICAgICAgICAgIFgucHVzaCh4KTtcbiAgICAgICAgICAgICAgICBZLnB1c2goeSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkaW0gPSBjdXJ2ZURpbSh4LCB5LCBwWzFdLCBwWzJdLCBwWzNdLCBwWzRdLCBwWzVdLCBwWzZdKTtcbiAgICAgICAgICAgICAgICBYID0gWFtjb25jYXRdKGRpbS5taW4ueCwgZGltLm1heC54KTtcbiAgICAgICAgICAgICAgICBZID0gWVtjb25jYXRdKGRpbS5taW4ueSwgZGltLm1heC55KTtcbiAgICAgICAgICAgICAgICB4ID0gcFs1XTtcbiAgICAgICAgICAgICAgICB5ID0gcFs2XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgeG1pbiA9IG1taW5bYXBwbHldKDAsIFgpLFxuICAgICAgICAgICAgeW1pbiA9IG1taW5bYXBwbHldKDAsIFkpLFxuICAgICAgICAgICAgeG1heCA9IG1tYXhbYXBwbHldKDAsIFgpLFxuICAgICAgICAgICAgeW1heCA9IG1tYXhbYXBwbHldKDAsIFkpLFxuICAgICAgICAgICAgd2lkdGggPSB4bWF4IC0geG1pbixcbiAgICAgICAgICAgIGhlaWdodCA9IHltYXggLSB5bWluLFxuICAgICAgICAgICAgICAgIGJiID0ge1xuICAgICAgICAgICAgICAgIHg6IHhtaW4sXG4gICAgICAgICAgICAgICAgeTogeW1pbixcbiAgICAgICAgICAgICAgICB4MjogeG1heCxcbiAgICAgICAgICAgICAgICB5MjogeW1heCxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgY3g6IHhtaW4gKyB3aWR0aCAvIDIsXG4gICAgICAgICAgICAgICAgY3k6IHltaW4gKyBoZWlnaHQgLyAyXG4gICAgICAgICAgICB9O1xuICAgICAgICBwdGguYmJveCA9IGNsb25lKGJiKTtcbiAgICAgICAgcmV0dXJuIGJiO1xuICAgIH0sXG4gICAgICAgIHBhdGhDbG9uZSA9IGZ1bmN0aW9uIChwYXRoQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBjbG9uZShwYXRoQXJyYXkpO1xuICAgICAgICAgICAgcmVzLnRvU3RyaW5nID0gUi5fcGF0aDJzdHJpbmc7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9LFxuICAgICAgICBwYXRoVG9SZWxhdGl2ZSA9IFIuX3BhdGhUb1JlbGF0aXZlID0gZnVuY3Rpb24gKHBhdGhBcnJheSkge1xuICAgICAgICAgICAgdmFyIHB0aCA9IHBhdGhzKHBhdGhBcnJheSk7XG4gICAgICAgICAgICBpZiAocHRoLnJlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLnJlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIVIuaXMocGF0aEFycmF5LCBhcnJheSkgfHwgIVIuaXMocGF0aEFycmF5ICYmIHBhdGhBcnJheVswXSwgYXJyYXkpKSB7IC8vIHJvdWdoIGFzc3VtcHRpb25cbiAgICAgICAgICAgICAgICBwYXRoQXJyYXkgPSBSLnBhcnNlUGF0aFN0cmluZyhwYXRoQXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlcyA9IFtdLFxuICAgICAgICAgICAgICAgIHggPSAwLFxuICAgICAgICAgICAgICAgIHkgPSAwLFxuICAgICAgICAgICAgICAgIG14ID0gMCxcbiAgICAgICAgICAgICAgICBteSA9IDAsXG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgaWYgKHBhdGhBcnJheVswXVswXSA9PSBcIk1cIikge1xuICAgICAgICAgICAgICAgIHggPSBwYXRoQXJyYXlbMF1bMV07XG4gICAgICAgICAgICAgICAgeSA9IHBhdGhBcnJheVswXVsyXTtcbiAgICAgICAgICAgICAgICBteCA9IHg7XG4gICAgICAgICAgICAgICAgbXkgPSB5O1xuICAgICAgICAgICAgICAgIHN0YXJ0Kys7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goW1wiTVwiLCB4LCB5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnQsIGlpID0gcGF0aEFycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgciA9IHJlc1tpXSA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBwYSA9IHBhdGhBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGFbMF0gIT0gbG93ZXJDYXNlLmNhbGwocGFbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJbMF0gPSBsb3dlckNhc2UuY2FsbChwYVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoclswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzFdID0gcGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsyXSA9IHBhWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbM10gPSBwYVszXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzRdID0gcGFbNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls1XSA9IHBhWzVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNl0gPSArKHBhWzZdIC0geCkudG9GaXhlZCgzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzddID0gKyhwYVs3XSAtIHkpLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMV0gPSArKHBhWzFdIC0geSkudG9GaXhlZCgzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXggPSBwYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteSA9IHBhWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMSwgamogPSBwYS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbal0gPSArKHBhW2pdIC0gKChqICUgMikgPyB4IDogeSkpLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgciA9IHJlc1tpXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFbMF0gPT0gXCJtXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gcGFbMV0gKyB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgbXkgPSBwYVsyXSArIHk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDAsIGtrID0gcGEubGVuZ3RoOyBrIDwga2s7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzW2ldW2tdID0gcGFba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IHJlc1tpXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXNbaV1bMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInpcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBteDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBteTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeCArPSArcmVzW2ldW2xlbiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB5ICs9ICtyZXNbaV1bbGVuIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHggKz0gK3Jlc1tpXVtsZW4gLSAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gK3Jlc1tpXVtsZW4gLSAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMudG9TdHJpbmcgPSBSLl9wYXRoMnN0cmluZztcbiAgICAgICAgICAgIHB0aC5yZWwgPSBwYXRoQ2xvbmUocmVzKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHBhdGhUb0Fic29sdXRlID0gUi5fcGF0aFRvQWJzb2x1dGUgPSBmdW5jdGlvbiAocGF0aEFycmF5KSB7XG4gICAgICAgICAgICB2YXIgcHRoID0gcGF0aHMocGF0aEFycmF5KTtcbiAgICAgICAgICAgIGlmIChwdGguYWJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhDbG9uZShwdGguYWJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghUi5pcyhwYXRoQXJyYXksIGFycmF5KSB8fCAhUi5pcyhwYXRoQXJyYXkgJiYgcGF0aEFycmF5WzBdLCBhcnJheSkpIHsgLy8gcm91Z2ggYXNzdW1wdGlvblxuICAgICAgICAgICAgICAgIHBhdGhBcnJheSA9IFIucGFyc2VQYXRoU3RyaW5nKHBhdGhBcnJheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBhdGhBcnJheSB8fCAhcGF0aEFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbW1wiTVwiLCAwLCAwXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzID0gW10sXG4gICAgICAgICAgICAgICAgeCA9IDAsXG4gICAgICAgICAgICAgICAgeSA9IDAsXG4gICAgICAgICAgICAgICAgbXggPSAwLFxuICAgICAgICAgICAgICAgIG15ID0gMCxcbiAgICAgICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgICAgICBpZiAocGF0aEFycmF5WzBdWzBdID09IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgeCA9ICtwYXRoQXJyYXlbMF1bMV07XG4gICAgICAgICAgICAgICAgeSA9ICtwYXRoQXJyYXlbMF1bMl07XG4gICAgICAgICAgICAgICAgbXggPSB4O1xuICAgICAgICAgICAgICAgIG15ID0geTtcbiAgICAgICAgICAgICAgICBzdGFydCsrO1xuICAgICAgICAgICAgICAgIHJlc1swXSA9IFtcIk1cIiwgeCwgeV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3J6ID0gcGF0aEFycmF5Lmxlbmd0aCA9PSAzICYmIHBhdGhBcnJheVswXVswXSA9PSBcIk1cIiAmJiBwYXRoQXJyYXlbMV1bMF0udG9VcHBlckNhc2UoKSA9PSBcIlJcIiAmJiBwYXRoQXJyYXlbMl1bMF0udG9VcHBlckNhc2UoKSA9PSBcIlpcIjtcbiAgICAgICAgICAgIGZvciAodmFyIHIsIHBhLCBpID0gc3RhcnQsIGlpID0gcGF0aEFycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaChyID0gW10pO1xuICAgICAgICAgICAgICAgIHBhID0gcGF0aEFycmF5W2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYVswXSAhPSB1cHBlckNhc2UuY2FsbChwYVswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgclswXSA9IHVwcGVyQ2FzZS5jYWxsKHBhWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMV0gPSBwYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzJdID0gcGFbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclszXSA9IHBhWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNF0gPSBwYVs0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzVdID0gcGFbNV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls2XSA9ICsocGFbNl0gKyB4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzddID0gKyhwYVs3XSArIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzFdID0gK3BhWzFdICsgeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsxXSA9ICtwYVsxXSArIHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb3RzID0gW3gsIHldW2NvbmNhdF0ocGEuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAyLCBqaiA9IGRvdHMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzW2pdID0gK2RvdHNbal0gKyB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RzWysral0gPSArZG90c1tqXSArIHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSByZXNbY29uY2F0XShjYXRtdWxsUm9tMmJlemllcihkb3RzLCBjcnopKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXggPSArcGFbMV0gKyB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15ID0gK3BhWzJdICsgeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMSwgamogPSBwYS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbal0gPSArcGFbal0gKyAoKGogJSAyKSA/IHggOiB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhWzBdID09IFwiUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvdHMgPSBbeCwgeV1bY29uY2F0XShwYS5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzW2NvbmNhdF0oY2F0bXVsbFJvbTJiZXppZXIoZG90cywgY3J6KSk7XG4gICAgICAgICAgICAgICAgICAgIHIgPSBbXCJSXCJdW2NvbmNhdF0ocGEuc2xpY2UoLTIpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMCwga2sgPSBwYS5sZW5ndGg7IGsgPCBrazsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByW2tdID0gcGFba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJaXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gbXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gbXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSByWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gclsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgbXggPSByW3IubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBteSA9IHJbci5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSByW3IubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gcltyLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy50b1N0cmluZyA9IFIuX3BhdGgyc3RyaW5nO1xuICAgICAgICAgICAgcHRoLmFicyA9IHBhdGhDbG9uZShyZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSxcbiAgICAgICAgbDJjID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgICAgICAgICByZXR1cm4gW3gxLCB5MSwgeDIsIHkyLCB4MiwgeTJdO1xuICAgICAgICB9LFxuICAgICAgICBxMmMgPSBmdW5jdGlvbiAoeDEsIHkxLCBheCwgYXksIHgyLCB5Mikge1xuICAgICAgICAgICAgdmFyIF8xMyA9IDEgLyAzLFxuICAgICAgICAgICAgICAgIF8yMyA9IDIgLyAzO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgXzEzICogeDEgKyBfMjMgKiBheCxcbiAgICAgICAgICAgICAgICAgICAgXzEzICogeTEgKyBfMjMgKiBheSxcbiAgICAgICAgICAgICAgICAgICAgXzEzICogeDIgKyBfMjMgKiBheCxcbiAgICAgICAgICAgICAgICAgICAgXzEzICogeTIgKyBfMjMgKiBheSxcbiAgICAgICAgICAgICAgICAgICAgeDIsXG4gICAgICAgICAgICAgICAgICAgIHkyXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgfSxcbiAgICAgICAgYTJjID0gZnVuY3Rpb24gKHgxLCB5MSwgcngsIHJ5LCBhbmdsZSwgbGFyZ2VfYXJjX2ZsYWcsIHN3ZWVwX2ZsYWcsIHgyLCB5MiwgcmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAvLyBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvZiB3aGVyZSB0aGlzIG1hdGggY2FtZSBmcm9tIHZpc2l0OlxuICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvaW1wbG5vdGUuaHRtbCNBcmNJbXBsZW1lbnRhdGlvbk5vdGVzXG4gICAgICAgICAgICB2YXIgXzEyMCA9IFBJICogMTIwIC8gMTgwLFxuICAgICAgICAgICAgICAgIHJhZCA9IFBJIC8gMTgwICogKCthbmdsZSB8fCAwKSxcbiAgICAgICAgICAgICAgICByZXMgPSBbXSxcbiAgICAgICAgICAgICAgICB4eSxcbiAgICAgICAgICAgICAgICByb3RhdGUgPSBjYWNoZXIoZnVuY3Rpb24gKHgsIHksIHJhZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgWCA9IHggKiBtYXRoLmNvcyhyYWQpIC0geSAqIG1hdGguc2luKHJhZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBZID0geCAqIG1hdGguc2luKHJhZCkgKyB5ICogbWF0aC5jb3MocmFkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt4OiBYLCB5OiBZfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAgICAgeHkgPSByb3RhdGUoeDEsIHkxLCAtcmFkKTtcbiAgICAgICAgICAgICAgICB4MSA9IHh5Lng7XG4gICAgICAgICAgICAgICAgeTEgPSB4eS55O1xuICAgICAgICAgICAgICAgIHh5ID0gcm90YXRlKHgyLCB5MiwgLXJhZCk7XG4gICAgICAgICAgICAgICAgeDIgPSB4eS54O1xuICAgICAgICAgICAgICAgIHkyID0geHkueTtcbiAgICAgICAgICAgICAgICB2YXIgY29zID0gbWF0aC5jb3MoUEkgLyAxODAgKiBhbmdsZSksXG4gICAgICAgICAgICAgICAgICAgIHNpbiA9IG1hdGguc2luKFBJIC8gMTgwICogYW5nbGUpLFxuICAgICAgICAgICAgICAgICAgICB4ID0gKHgxIC0geDIpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgeSA9ICh5MSAtIHkyKSAvIDI7XG4gICAgICAgICAgICAgICAgdmFyIGggPSAoeCAqIHgpIC8gKHJ4ICogcngpICsgKHkgKiB5KSAvIChyeSAqIHJ5KTtcbiAgICAgICAgICAgICAgICBpZiAoaCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaCA9IG1hdGguc3FydChoKTtcbiAgICAgICAgICAgICAgICAgICAgcnggPSBoICogcng7XG4gICAgICAgICAgICAgICAgICAgIHJ5ID0gaCAqIHJ5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcngyID0gcnggKiByeCxcbiAgICAgICAgICAgICAgICAgICAgcnkyID0gcnkgKiByeSxcbiAgICAgICAgICAgICAgICAgICAgayA9IChsYXJnZV9hcmNfZmxhZyA9PSBzd2VlcF9mbGFnID8gLTEgOiAxKSAqXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRoLnNxcnQoYWJzKChyeDIgKiByeTIgLSByeDIgKiB5ICogeSAtIHJ5MiAqIHggKiB4KSAvIChyeDIgKiB5ICogeSArIHJ5MiAqIHggKiB4KSkpLFxuICAgICAgICAgICAgICAgICAgICBjeCA9IGsgKiByeCAqIHkgLyByeSArICh4MSArIHgyKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIGN5ID0gayAqIC1yeSAqIHggLyByeCArICh5MSArIHkyKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIGYxID0gbWF0aC5hc2luKCgoeTEgLSBjeSkgLyByeSkudG9GaXhlZCg5KSksXG4gICAgICAgICAgICAgICAgICAgIGYyID0gbWF0aC5hc2luKCgoeTIgLSBjeSkgLyByeSkudG9GaXhlZCg5KSk7XG5cbiAgICAgICAgICAgICAgICBmMSA9IHgxIDwgY3ggPyBQSSAtIGYxIDogZjE7XG4gICAgICAgICAgICAgICAgZjIgPSB4MiA8IGN4ID8gUEkgLSBmMiA6IGYyO1xuICAgICAgICAgICAgICAgIGYxIDwgMCAmJiAoZjEgPSBQSSAqIDIgKyBmMSk7XG4gICAgICAgICAgICAgICAgZjIgPCAwICYmIChmMiA9IFBJICogMiArIGYyKTtcbiAgICAgICAgICAgICAgICBpZiAoc3dlZXBfZmxhZyAmJiBmMSA+IGYyKSB7XG4gICAgICAgICAgICAgICAgICAgIGYxID0gZjEgLSBQSSAqIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc3dlZXBfZmxhZyAmJiBmMiA+IGYxKSB7XG4gICAgICAgICAgICAgICAgICAgIGYyID0gZjIgLSBQSSAqIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmMSA9IHJlY3Vyc2l2ZVswXTtcbiAgICAgICAgICAgICAgICBmMiA9IHJlY3Vyc2l2ZVsxXTtcbiAgICAgICAgICAgICAgICBjeCA9IHJlY3Vyc2l2ZVsyXTtcbiAgICAgICAgICAgICAgICBjeSA9IHJlY3Vyc2l2ZVszXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZiA9IGYyIC0gZjE7XG4gICAgICAgICAgICBpZiAoYWJzKGRmKSA+IF8xMjApIHtcbiAgICAgICAgICAgICAgICB2YXIgZjJvbGQgPSBmMixcbiAgICAgICAgICAgICAgICAgICAgeDJvbGQgPSB4MixcbiAgICAgICAgICAgICAgICAgICAgeTJvbGQgPSB5MjtcbiAgICAgICAgICAgICAgICBmMiA9IGYxICsgXzEyMCAqIChzd2VlcF9mbGFnICYmIGYyID4gZjEgPyAxIDogLTEpO1xuICAgICAgICAgICAgICAgIHgyID0gY3ggKyByeCAqIG1hdGguY29zKGYyKTtcbiAgICAgICAgICAgICAgICB5MiA9IGN5ICsgcnkgKiBtYXRoLnNpbihmMik7XG4gICAgICAgICAgICAgICAgcmVzID0gYTJjKHgyLCB5MiwgcngsIHJ5LCBhbmdsZSwgMCwgc3dlZXBfZmxhZywgeDJvbGQsIHkyb2xkLCBbZjIsIGYyb2xkLCBjeCwgY3ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRmID0gZjIgLSBmMTtcbiAgICAgICAgICAgIHZhciBjMSA9IG1hdGguY29zKGYxKSxcbiAgICAgICAgICAgICAgICBzMSA9IG1hdGguc2luKGYxKSxcbiAgICAgICAgICAgICAgICBjMiA9IG1hdGguY29zKGYyKSxcbiAgICAgICAgICAgICAgICBzMiA9IG1hdGguc2luKGYyKSxcbiAgICAgICAgICAgICAgICB0ID0gbWF0aC50YW4oZGYgLyA0KSxcbiAgICAgICAgICAgICAgICBoeCA9IDQgLyAzICogcnggKiB0LFxuICAgICAgICAgICAgICAgIGh5ID0gNCAvIDMgKiByeSAqIHQsXG4gICAgICAgICAgICAgICAgbTEgPSBbeDEsIHkxXSxcbiAgICAgICAgICAgICAgICBtMiA9IFt4MSArIGh4ICogczEsIHkxIC0gaHkgKiBjMV0sXG4gICAgICAgICAgICAgICAgbTMgPSBbeDIgKyBoeCAqIHMyLCB5MiAtIGh5ICogYzJdLFxuICAgICAgICAgICAgICAgIG00ID0gW3gyLCB5Ml07XG4gICAgICAgICAgICBtMlswXSA9IDIgKiBtMVswXSAtIG0yWzBdO1xuICAgICAgICAgICAgbTJbMV0gPSAyICogbTFbMV0gLSBtMlsxXTtcbiAgICAgICAgICAgIGlmIChyZWN1cnNpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW20yLCBtMywgbTRdW2NvbmNhdF0ocmVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzID0gW20yLCBtMywgbTRdW2NvbmNhdF0ocmVzKS5qb2luKClbc3BsaXRdKFwiLFwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3cmVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3cmVzW2ldID0gaSAlIDIgPyByb3RhdGUocmVzW2kgLSAxXSwgcmVzW2ldLCByYWQpLnkgOiByb3RhdGUocmVzW2ldLCByZXNbaSArIDFdLCByYWQpLng7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdyZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZpbmREb3RBdFNlZ21lbnQgPSBmdW5jdGlvbiAocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIHQpIHtcbiAgICAgICAgICAgIHZhciB0MSA9IDEgLSB0O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB4OiBwb3codDEsIDMpICogcDF4ICsgcG93KHQxLCAyKSAqIDMgKiB0ICogYzF4ICsgdDEgKiAzICogdCAqIHQgKiBjMnggKyBwb3codCwgMykgKiBwMngsXG4gICAgICAgICAgICAgICAgeTogcG93KHQxLCAzKSAqIHAxeSArIHBvdyh0MSwgMikgKiAzICogdCAqIGMxeSArIHQxICogMyAqIHQgKiB0ICogYzJ5ICsgcG93KHQsIDMpICogcDJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBjdXJ2ZURpbSA9IGNhY2hlcihmdW5jdGlvbiAocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnkpIHtcbiAgICAgICAgICAgIHZhciBhID0gKGMyeCAtIDIgKiBjMXggKyBwMXgpIC0gKHAyeCAtIDIgKiBjMnggKyBjMXgpLFxuICAgICAgICAgICAgICAgIGIgPSAyICogKGMxeCAtIHAxeCkgLSAyICogKGMyeCAtIGMxeCksXG4gICAgICAgICAgICAgICAgYyA9IHAxeCAtIGMxeCxcbiAgICAgICAgICAgICAgICB0MSA9ICgtYiArIG1hdGguc3FydChiICogYiAtIDQgKiBhICogYykpIC8gMiAvIGEsXG4gICAgICAgICAgICAgICAgdDIgPSAoLWIgLSBtYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpKSAvIDIgLyBhLFxuICAgICAgICAgICAgICAgIHkgPSBbcDF5LCBwMnldLFxuICAgICAgICAgICAgICAgIHggPSBbcDF4LCBwMnhdLFxuICAgICAgICAgICAgICAgIGRvdDtcbiAgICAgICAgICAgIGFicyh0MSkgPiBcIjFlMTJcIiAmJiAodDEgPSAuNSk7XG4gICAgICAgICAgICBhYnModDIpID4gXCIxZTEyXCIgJiYgKHQyID0gLjUpO1xuICAgICAgICAgICAgaWYgKHQxID4gMCAmJiB0MSA8IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QgPSBmaW5kRG90QXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0MSk7XG4gICAgICAgICAgICAgICAgeC5wdXNoKGRvdC54KTtcbiAgICAgICAgICAgICAgICB5LnB1c2goZG90LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQyID4gMCAmJiB0MiA8IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QgPSBmaW5kRG90QXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0Mik7XG4gICAgICAgICAgICAgICAgeC5wdXNoKGRvdC54KTtcbiAgICAgICAgICAgICAgICB5LnB1c2goZG90LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYSA9IChjMnkgLSAyICogYzF5ICsgcDF5KSAtIChwMnkgLSAyICogYzJ5ICsgYzF5KTtcbiAgICAgICAgICAgIGIgPSAyICogKGMxeSAtIHAxeSkgLSAyICogKGMyeSAtIGMxeSk7XG4gICAgICAgICAgICBjID0gcDF5IC0gYzF5O1xuICAgICAgICAgICAgdDEgPSAoLWIgKyBtYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpKSAvIDIgLyBhO1xuICAgICAgICAgICAgdDIgPSAoLWIgLSBtYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpKSAvIDIgLyBhO1xuICAgICAgICAgICAgYWJzKHQxKSA+IFwiMWUxMlwiICYmICh0MSA9IC41KTtcbiAgICAgICAgICAgIGFicyh0MikgPiBcIjFlMTJcIiAmJiAodDIgPSAuNSk7XG4gICAgICAgICAgICBpZiAodDEgPiAwICYmIHQxIDwgMSkge1xuICAgICAgICAgICAgICAgIGRvdCA9IGZpbmREb3RBdFNlZ21lbnQocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIHQxKTtcbiAgICAgICAgICAgICAgICB4LnB1c2goZG90LngpO1xuICAgICAgICAgICAgICAgIHkucHVzaChkb3QueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodDIgPiAwICYmIHQyIDwgMSkge1xuICAgICAgICAgICAgICAgIGRvdCA9IGZpbmREb3RBdFNlZ21lbnQocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIHQyKTtcbiAgICAgICAgICAgICAgICB4LnB1c2goZG90LngpO1xuICAgICAgICAgICAgICAgIHkucHVzaChkb3QueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1pbjoge3g6IG1taW5bYXBwbHldKDAsIHgpLCB5OiBtbWluW2FwcGx5XSgwLCB5KX0sXG4gICAgICAgICAgICAgICAgbWF4OiB7eDogbW1heFthcHBseV0oMCwgeCksIHk6IG1tYXhbYXBwbHldKDAsIHkpfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIHBhdGgyY3VydmUgPSBSLl9wYXRoMmN1cnZlID0gY2FjaGVyKGZ1bmN0aW9uIChwYXRoLCBwYXRoMikge1xuICAgICAgICAgICAgdmFyIHB0aCA9ICFwYXRoMiAmJiBwYXRocyhwYXRoKTtcbiAgICAgICAgICAgIGlmICghcGF0aDIgJiYgcHRoLmN1cnZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhDbG9uZShwdGguY3VydmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHAgPSBwYXRoVG9BYnNvbHV0ZShwYXRoKSxcbiAgICAgICAgICAgICAgICBwMiA9IHBhdGgyICYmIHBhdGhUb0Fic29sdXRlKHBhdGgyKSxcbiAgICAgICAgICAgICAgICBhdHRycyA9IHt4OiAwLCB5OiAwLCBieDogMCwgYnk6IDAsIFg6IDAsIFk6IDAsIHF4OiBudWxsLCBxeTogbnVsbH0sXG4gICAgICAgICAgICAgICAgYXR0cnMyID0ge3g6IDAsIHk6IDAsIGJ4OiAwLCBieTogMCwgWDogMCwgWTogMCwgcXg6IG51bGwsIHF5OiBudWxsfSxcbiAgICAgICAgICAgICAgICBwcm9jZXNzUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCBkLCBwY29tKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBueCwgbnksIHRxID0ge1Q6MSwgUToxfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1wiQ1wiLCBkLngsIGQueSwgZC54LCBkLnksIGQueCwgZC55XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAhKHBhdGhbMF0gaW4gdHEpICYmIChkLnF4ID0gZC5xeSA9IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhdGhbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5YID0gcGF0aFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLlkgPSBwYXRoWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKGEyY1thcHBseV0oMCwgW2QueCwgZC55XVtjb25jYXRdKHBhdGguc2xpY2UoMSkpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwY29tID09IFwiQ1wiIHx8IHBjb20gPT0gXCJTXCIpIHsgLy8gSW4gXCJTXCIgY2FzZSB3ZSBoYXZlIHRvIHRha2UgaW50byBhY2NvdW50LCBpZiB0aGUgcHJldmlvdXMgY29tbWFuZCBpcyBDL1MuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG54ID0gZC54ICogMiAtIGQuYng7ICAgICAgICAgIC8vIEFuZCByZWZsZWN0IHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBueSA9IGQueSAqIDIgLSBkLmJ5OyAgICAgICAgICAvLyBjb21tYW5kJ3MgY29udHJvbCBwb2ludCByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBwb2ludC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHNvbWUgZWxzZSBvciBub3RoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG54ID0gZC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBueSA9IGQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIiwgbngsIG55XVtjb25jYXRdKHBhdGguc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGNvbSA9PSBcIlFcIiB8fCBwY29tID09IFwiVFwiKSB7IC8vIEluIFwiVFwiIGNhc2Ugd2UgaGF2ZSB0byB0YWtlIGludG8gYWNjb3VudCwgaWYgdGhlIHByZXZpb3VzIGNvbW1hbmQgaXMgUS9ULlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnF4ID0gZC54ICogMiAtIGQucXg7ICAgICAgICAvLyBBbmQgbWFrZSBhIHJlZmxlY3Rpb24gc2ltaWxhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnF5ID0gZC55ICogMiAtIGQucXk7ICAgICAgICAvLyB0byBjYXNlIFwiU1wiLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3Igc29tZXRoaW5nIGVsc2Ugb3Igbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnF4ID0gZC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnF5ID0gZC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKHEyYyhkLngsIGQueSwgZC5xeCwgZC5xeSwgcGF0aFsxXSwgcGF0aFsyXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnF4ID0gcGF0aFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnF5ID0gcGF0aFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKHEyYyhkLngsIGQueSwgcGF0aFsxXSwgcGF0aFsyXSwgcGF0aFszXSwgcGF0aFs0XSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKGwyYyhkLngsIGQueSwgcGF0aFsxXSwgcGF0aFsyXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKGwyYyhkLngsIGQueSwgcGF0aFsxXSwgZC55KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBbXCJDXCJdW2NvbmNhdF0obDJjKGQueCwgZC55LCBkLngsIHBhdGhbMV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJaXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShsMmMoZC54LCBkLnksIGQuWCwgZC5ZKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmaXhBcmMgPSBmdW5jdGlvbiAocHAsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBwW2ldLmxlbmd0aCA+IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBwW2ldLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGkgPSBwcFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwaS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY29tczFbaV09XCJBXCI7IC8vIGlmIGNyZWF0ZWQgbXVsdGlwbGUgQzpzLCB0aGVpciBvcmlnaW5hbCBzZWcgaXMgc2F2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMiAmJiAocGNvbXMyW2ldPVwiQVwiKTsgLy8gdGhlIHNhbWUgYXMgYWJvdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcC5zcGxpY2UoaSsrLCAwLCBbXCJDXCJdW2NvbmNhdF0ocGkuc3BsaWNlKDAsIDYpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpaSA9IG1tYXgocC5sZW5ndGgsIHAyICYmIHAyLmxlbmd0aCB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZml4TSA9IGZ1bmN0aW9uIChwYXRoMSwgcGF0aDIsIGExLCBhMiwgaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aDEgJiYgcGF0aDIgJiYgcGF0aDFbaV1bMF0gPT0gXCJNXCIgJiYgcGF0aDJbaV1bMF0gIT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgyLnNwbGljZShpLCAwLCBbXCJNXCIsIGEyLngsIGEyLnldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGExLmJ4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGExLmJ5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGExLnggPSBwYXRoMVtpXVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGExLnkgPSBwYXRoMVtpXVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlpID0gbW1heChwLmxlbmd0aCwgcDIgJiYgcDIubGVuZ3RoIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwY29tczEgPSBbXSwgLy8gcGF0aCBjb21tYW5kcyBvZiBvcmlnaW5hbCBwYXRoIHBcbiAgICAgICAgICAgICAgICBwY29tczIgPSBbXSwgLy8gcGF0aCBjb21tYW5kcyBvZiBvcmlnaW5hbCBwYXRoIHAyXG4gICAgICAgICAgICAgICAgcGZpcnN0ID0gXCJcIiwgLy8gdGVtcG9yYXJ5IGhvbGRlciBmb3Igb3JpZ2luYWwgcGF0aCBjb21tYW5kXG4gICAgICAgICAgICAgICAgcGNvbSA9IFwiXCI7IC8vIGhvbGRlciBmb3IgcHJldmlvdXMgcGF0aCBjb21tYW5kIG9mIG9yaWdpbmFsIHBhdGhcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG1tYXgocC5sZW5ndGgsIHAyICYmIHAyLmxlbmd0aCB8fCAwKTsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwW2ldICYmIChwZmlyc3QgPSBwW2ldWzBdKTsgLy8gc2F2ZSBjdXJyZW50IHBhdGggY29tbWFuZFxuXG4gICAgICAgICAgICAgICAgaWYgKHBmaXJzdCAhPSBcIkNcIikgLy8gQyBpcyBub3Qgc2F2ZWQgeWV0LCBiZWNhdXNlIGl0IG1heSBiZSByZXN1bHQgb2YgY29udmVyc2lvblxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGNvbXMxW2ldID0gcGZpcnN0OyAvLyBTYXZlIGN1cnJlbnQgcGF0aCBjb21tYW5kXG4gICAgICAgICAgICAgICAgICAgIGkgJiYgKCBwY29tID0gcGNvbXMxW2ktMV0pOyAvLyBHZXQgcHJldmlvdXMgcGF0aCBjb21tYW5kIHBjb21cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcFtpXSA9IHByb2Nlc3NQYXRoKHBbaV0sIGF0dHJzLCBwY29tKTsgLy8gUHJldmlvdXMgcGF0aCBjb21tYW5kIGlzIGlucHV0dGVkIHRvIHByb2Nlc3NQYXRoXG5cbiAgICAgICAgICAgICAgICBpZiAocGNvbXMxW2ldICE9IFwiQVwiICYmIHBmaXJzdCA9PSBcIkNcIikgcGNvbXMxW2ldID0gXCJDXCI7IC8vIEEgaXMgdGhlIG9ubHkgY29tbWFuZFxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIG1heSBwcm9kdWNlIG11bHRpcGxlIEM6c1xuICAgICAgICAgICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgQyBpcyBhbHNvIEMgaW4gb3JpZ2luYWwgcGF0aFxuXG4gICAgICAgICAgICAgICAgZml4QXJjKHAsIGkpOyAvLyBmaXhBcmMgYWRkcyBhbHNvIHRoZSByaWdodCBhbW91bnQgb2YgQTpzIHRvIHBjb21zMVxuXG4gICAgICAgICAgICAgICAgaWYgKHAyKSB7IC8vIHRoZSBzYW1lIHByb2NlZHVyZXMgaXMgZG9uZSB0byBwMlxuICAgICAgICAgICAgICAgICAgICBwMltpXSAmJiAocGZpcnN0ID0gcDJbaV1bMF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGZpcnN0ICE9IFwiQ1wiKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwY29tczJbaV0gPSBwZmlyc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBpICYmIChwY29tID0gcGNvbXMyW2ktMV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHAyW2ldID0gcHJvY2Vzc1BhdGgocDJbaV0sIGF0dHJzMiwgcGNvbSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBjb21zMltpXSE9XCJBXCIgJiYgcGZpcnN0PT1cIkNcIikgcGNvbXMyW2ldPVwiQ1wiO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpeEFyYyhwMiwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpeE0ocCwgcDIsIGF0dHJzLCBhdHRyczIsIGkpO1xuICAgICAgICAgICAgICAgIGZpeE0ocDIsIHAsIGF0dHJzMiwgYXR0cnMsIGkpO1xuICAgICAgICAgICAgICAgIHZhciBzZWcgPSBwW2ldLFxuICAgICAgICAgICAgICAgICAgICBzZWcyID0gcDIgJiYgcDJbaV0sXG4gICAgICAgICAgICAgICAgICAgIHNlZ2xlbiA9IHNlZy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHNlZzJsZW4gPSBwMiAmJiBzZWcyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBhdHRycy54ID0gc2VnW3NlZ2xlbiAtIDJdO1xuICAgICAgICAgICAgICAgIGF0dHJzLnkgPSBzZWdbc2VnbGVuIC0gMV07XG4gICAgICAgICAgICAgICAgYXR0cnMuYnggPSB0b0Zsb2F0KHNlZ1tzZWdsZW4gLSA0XSkgfHwgYXR0cnMueDtcbiAgICAgICAgICAgICAgICBhdHRycy5ieSA9IHRvRmxvYXQoc2VnW3NlZ2xlbiAtIDNdKSB8fCBhdHRycy55O1xuICAgICAgICAgICAgICAgIGF0dHJzMi5ieCA9IHAyICYmICh0b0Zsb2F0KHNlZzJbc2VnMmxlbiAtIDRdKSB8fCBhdHRyczIueCk7XG4gICAgICAgICAgICAgICAgYXR0cnMyLmJ5ID0gcDIgJiYgKHRvRmxvYXQoc2VnMltzZWcybGVuIC0gM10pIHx8IGF0dHJzMi55KTtcbiAgICAgICAgICAgICAgICBhdHRyczIueCA9IHAyICYmIHNlZzJbc2VnMmxlbiAtIDJdO1xuICAgICAgICAgICAgICAgIGF0dHJzMi55ID0gcDIgJiYgc2VnMltzZWcybGVuIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXAyKSB7XG4gICAgICAgICAgICAgICAgcHRoLmN1cnZlID0gcGF0aENsb25lKHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHAyID8gW3AsIHAyXSA6IHA7XG4gICAgICAgIH0sIG51bGwsIHBhdGhDbG9uZSksXG4gICAgICAgIHBhcnNlRG90cyA9IFIuX3BhcnNlRG90cyA9IGNhY2hlcihmdW5jdGlvbiAoZ3JhZGllbnQpIHtcbiAgICAgICAgICAgIHZhciBkb3RzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBncmFkaWVudC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvdCA9IHt9LFxuICAgICAgICAgICAgICAgICAgICBwYXIgPSBncmFkaWVudFtpXS5tYXRjaCgvXihbXjpdKik6PyhbXFxkXFwuXSopLyk7XG4gICAgICAgICAgICAgICAgZG90LmNvbG9yID0gUi5nZXRSR0IocGFyWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAoZG90LmNvbG9yLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb3Qub3BhY2l0eSA9IGRvdC5jb2xvci5vcGFjaXR5O1xuICAgICAgICAgICAgICAgIGRvdC5jb2xvciA9IGRvdC5jb2xvci5oZXg7XG4gICAgICAgICAgICAgICAgcGFyWzJdICYmIChkb3Qub2Zmc2V0ID0gcGFyWzJdICsgXCIlXCIpO1xuICAgICAgICAgICAgICAgIGRvdHMucHVzaChkb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChpID0gMSwgaWkgPSBkb3RzLmxlbmd0aCAtIDE7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkb3RzW2ldLm9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSB0b0Zsb2F0KGRvdHNbaSAtIDFdLm9mZnNldCB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IGlpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb3RzW2pdLm9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IGRvdHNbal0ub2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gaWk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW5kID0gdG9GbG9hdChlbmQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IChlbmQgLSBzdGFydCkgLyAoaiAtIGkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ICs9IGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzW2ldLm9mZnNldCA9IHN0YXJ0ICsgXCIlXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZG90cztcbiAgICAgICAgfSksXG4gICAgICAgIHRlYXIgPSBSLl90ZWFyID0gZnVuY3Rpb24gKGVsLCBwYXBlcikge1xuICAgICAgICAgICAgZWwgPT0gcGFwZXIudG9wICYmIChwYXBlci50b3AgPSBlbC5wcmV2KTtcbiAgICAgICAgICAgIGVsID09IHBhcGVyLmJvdHRvbSAmJiAocGFwZXIuYm90dG9tID0gZWwubmV4dCk7XG4gICAgICAgICAgICBlbC5uZXh0ICYmIChlbC5uZXh0LnByZXYgPSBlbC5wcmV2KTtcbiAgICAgICAgICAgIGVsLnByZXYgJiYgKGVsLnByZXYubmV4dCA9IGVsLm5leHQpO1xuICAgICAgICB9LFxuICAgICAgICB0b2Zyb250ID0gUi5fdG9mcm9udCA9IGZ1bmN0aW9uIChlbCwgcGFwZXIpIHtcbiAgICAgICAgICAgIGlmIChwYXBlci50b3AgPT09IGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGVhcihlbCwgcGFwZXIpO1xuICAgICAgICAgICAgZWwubmV4dCA9IG51bGw7XG4gICAgICAgICAgICBlbC5wcmV2ID0gcGFwZXIudG9wO1xuICAgICAgICAgICAgcGFwZXIudG9wLm5leHQgPSBlbDtcbiAgICAgICAgICAgIHBhcGVyLnRvcCA9IGVsO1xuICAgICAgICB9LFxuICAgICAgICB0b2JhY2sgPSBSLl90b2JhY2sgPSBmdW5jdGlvbiAoZWwsIHBhcGVyKSB7XG4gICAgICAgICAgICBpZiAocGFwZXIuYm90dG9tID09PSBlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRlYXIoZWwsIHBhcGVyKTtcbiAgICAgICAgICAgIGVsLm5leHQgPSBwYXBlci5ib3R0b207XG4gICAgICAgICAgICBlbC5wcmV2ID0gbnVsbDtcbiAgICAgICAgICAgIHBhcGVyLmJvdHRvbS5wcmV2ID0gZWw7XG4gICAgICAgICAgICBwYXBlci5ib3R0b20gPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgaW5zZXJ0YWZ0ZXIgPSBSLl9pbnNlcnRhZnRlciA9IGZ1bmN0aW9uIChlbCwgZWwyLCBwYXBlcikge1xuICAgICAgICAgICAgdGVhcihlbCwgcGFwZXIpO1xuICAgICAgICAgICAgZWwyID09IHBhcGVyLnRvcCAmJiAocGFwZXIudG9wID0gZWwpO1xuICAgICAgICAgICAgZWwyLm5leHQgJiYgKGVsMi5uZXh0LnByZXYgPSBlbCk7XG4gICAgICAgICAgICBlbC5uZXh0ID0gZWwyLm5leHQ7XG4gICAgICAgICAgICBlbC5wcmV2ID0gZWwyO1xuICAgICAgICAgICAgZWwyLm5leHQgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgaW5zZXJ0YmVmb3JlID0gUi5faW5zZXJ0YmVmb3JlID0gZnVuY3Rpb24gKGVsLCBlbDIsIHBhcGVyKSB7XG4gICAgICAgICAgICB0ZWFyKGVsLCBwYXBlcik7XG4gICAgICAgICAgICBlbDIgPT0gcGFwZXIuYm90dG9tICYmIChwYXBlci5ib3R0b20gPSBlbCk7XG4gICAgICAgICAgICBlbDIucHJldiAmJiAoZWwyLnByZXYubmV4dCA9IGVsKTtcbiAgICAgICAgICAgIGVsLnByZXYgPSBlbDIucHJldjtcbiAgICAgICAgICAgIGVsMi5wcmV2ID0gZWw7XG4gICAgICAgICAgICBlbC5uZXh0ID0gZWwyO1xuICAgICAgICB9LFxuICAgICAgICAvKlxcXG4gICAgICAgICAqIFJhcGhhZWwudG9NYXRyaXhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm5zIG1hdHJpeCBvZiB0cmFuc2Zvcm1hdGlvbnMgYXBwbGllZCB0byBhIGdpdmVuIHBhdGhcbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSBwYXRoIChzdHJpbmcpIHBhdGggc3RyaW5nXG4gICAgICAgICAtIHRyYW5zZm9ybSAoc3RyaW5nfGFycmF5KSB0cmFuc2Zvcm1hdGlvbiBzdHJpbmdcbiAgICAgICAgID0gKG9iamVjdCkgQE1hdHJpeFxuICAgICAgICBcXCovXG4gICAgICAgIHRvTWF0cml4ID0gUi50b01hdHJpeCA9IGZ1bmN0aW9uIChwYXRoLCB0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHZhciBiYiA9IHBhdGhEaW1lbnNpb25zKHBhdGgpLFxuICAgICAgICAgICAgICAgIGVsID0ge1xuICAgICAgICAgICAgICAgICAgICBfOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IEVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0QkJveDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV4dHJhY3RUcmFuc2Zvcm0oZWwsIHRyYW5zZm9ybSk7XG4gICAgICAgICAgICByZXR1cm4gZWwubWF0cml4O1xuICAgICAgICB9LFxuICAgICAgICAvKlxcXG4gICAgICAgICAqIFJhcGhhZWwudHJhbnNmb3JtUGF0aFxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybnMgcGF0aCB0cmFuc2Zvcm1lZCBieSBhIGdpdmVuIHRyYW5zZm9ybWF0aW9uXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gcGF0aCAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAgICAgLSB0cmFuc2Zvcm0gKHN0cmluZ3xhcnJheSkgdHJhbnNmb3JtYXRpb24gc3RyaW5nXG4gICAgICAgICA9IChzdHJpbmcpIHBhdGhcbiAgICAgICAgXFwqL1xuICAgICAgICB0cmFuc2Zvcm1QYXRoID0gUi50cmFuc2Zvcm1QYXRoID0gZnVuY3Rpb24gKHBhdGgsIHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcFBhdGgocGF0aCwgdG9NYXRyaXgocGF0aCwgdHJhbnNmb3JtKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dHJhY3RUcmFuc2Zvcm0gPSBSLl9leHRyYWN0VHJhbnNmb3JtID0gZnVuY3Rpb24gKGVsLCB0c3RyKSB7XG4gICAgICAgICAgICBpZiAodHN0ciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsLl8udHJhbnNmb3JtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHN0ciA9IFN0cih0c3RyKS5yZXBsYWNlKC9cXC57M318XFx1MjAyNi9nLCBlbC5fLnRyYW5zZm9ybSB8fCBFKTtcbiAgICAgICAgICAgIHZhciB0ZGF0YSA9IFIucGFyc2VUcmFuc2Zvcm1TdHJpbmcodHN0ciksXG4gICAgICAgICAgICAgICAgZGVnID0gMCxcbiAgICAgICAgICAgICAgICBkeCA9IDAsXG4gICAgICAgICAgICAgICAgZHkgPSAwLFxuICAgICAgICAgICAgICAgIHN4ID0gMSxcbiAgICAgICAgICAgICAgICBzeSA9IDEsXG4gICAgICAgICAgICAgICAgXyA9IGVsLl8sXG4gICAgICAgICAgICAgICAgbSA9IG5ldyBNYXRyaXg7XG4gICAgICAgICAgICBfLnRyYW5zZm9ybSA9IHRkYXRhIHx8IFtdO1xuICAgICAgICAgICAgaWYgKHRkYXRhKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGRhdGEubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRkYXRhW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGxlbiA9IHQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9IFN0cih0WzBdKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWJzb2x1dGUgPSB0WzBdICE9IGNvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlciA9IGFic29sdXRlID8gbS5pbnZlcnQoKSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB4MSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHkxLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB5MixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWFuZCA9PSBcInRcIiAmJiB0bGVuID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgxID0gaW52ZXIueCgwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MSA9IGludmVyLnkoMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBpbnZlci54KHRbMV0sIHRbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkyID0gaW52ZXIueSh0WzFdLCB0WzJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnRyYW5zbGF0ZSh4MiAtIHgxLCB5MiAtIHkxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS50cmFuc2xhdGUodFsxXSwgdFsyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PSBcInJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsZW4gPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJiID0gYmIgfHwgZWwuZ2V0QkJveCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnJvdGF0ZSh0WzFdLCBiYi54ICsgYmIud2lkdGggLyAyLCBiYi55ICsgYmIuaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVnICs9IHRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRsZW4gPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MiA9IGludmVyLngodFsyXSwgdFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkyID0gaW52ZXIueSh0WzJdLCB0WzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5yb3RhdGUodFsxXSwgeDIsIHkyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnJvdGF0ZSh0WzFdLCB0WzJdLCB0WzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVnICs9IHRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PSBcInNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsZW4gPT0gMiB8fCB0bGVuID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYiA9IGJiIHx8IGVsLmdldEJCb3goMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5zY2FsZSh0WzFdLCB0W3RsZW4gLSAxXSwgYmIueCArIGJiLndpZHRoIC8gMiwgYmIueSArIGJiLmhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN4ICo9IHRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3kgKj0gdFt0bGVuIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRsZW4gPT0gNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MiA9IGludmVyLngodFszXSwgdFs0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkyID0gaW52ZXIueSh0WzNdLCB0WzRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5zY2FsZSh0WzFdLCB0WzJdLCB4MiwgeTIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc2NhbGUodFsxXSwgdFsyXSwgdFszXSwgdFs0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN4ICo9IHRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3kgKj0gdFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kID09IFwibVwiICYmIHRsZW4gPT0gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbS5hZGQodFsxXSwgdFsyXSwgdFszXSwgdFs0XSwgdFs1XSwgdFs2XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXy5kaXJ0eVQgPSAxO1xuICAgICAgICAgICAgICAgICAgICBlbC5tYXRyaXggPSBtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcXFxuICAgICAgICAgICAgICogRWxlbWVudC5tYXRyaXhcbiAgICAgICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICAgICAqKlxuICAgICAgICAgICAgICogS2VlcHMgQE1hdHJpeCBvYmplY3QsIHdoaWNoIHJlcHJlc2VudHMgZWxlbWVudCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICAgICAgXFwqL1xuICAgICAgICAgICAgZWwubWF0cml4ID0gbTtcblxuICAgICAgICAgICAgXy5zeCA9IHN4O1xuICAgICAgICAgICAgXy5zeSA9IHN5O1xuICAgICAgICAgICAgXy5kZWcgPSBkZWc7XG4gICAgICAgICAgICBfLmR4ID0gZHggPSBtLmU7XG4gICAgICAgICAgICBfLmR5ID0gZHkgPSBtLmY7XG5cbiAgICAgICAgICAgIGlmIChzeCA9PSAxICYmIHN5ID09IDEgJiYgIWRlZyAmJiBfLmJib3gpIHtcbiAgICAgICAgICAgICAgICBfLmJib3gueCArPSArZHg7XG4gICAgICAgICAgICAgICAgXy5iYm94LnkgKz0gK2R5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfLmRpcnR5VCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldEVtcHR5ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBsID0gaXRlbVswXTtcbiAgICAgICAgICAgIHN3aXRjaCAobC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRcIjogcmV0dXJuIFtsLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBjYXNlIFwibVwiOiByZXR1cm4gW2wsIDEsIDAsIDAsIDEsIDAsIDBdO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyXCI6IGlmIChpdGVtLmxlbmd0aCA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMCwgaXRlbVsyXSwgaXRlbVszXV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtsLCAwXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcInNcIjogaWYgKGl0ZW0ubGVuZ3RoID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtsLCAxLCAxLCBpdGVtWzNdLCBpdGVtWzRdXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtsLCAxLCAxXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2wsIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXF1YWxpc2VUcmFuc2Zvcm0gPSBSLl9lcXVhbGlzZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0MSwgdDIpIHtcbiAgICAgICAgICAgIHQyID0gU3RyKHQyKS5yZXBsYWNlKC9cXC57M318XFx1MjAyNi9nLCB0MSk7XG4gICAgICAgICAgICB0MSA9IFIucGFyc2VUcmFuc2Zvcm1TdHJpbmcodDEpIHx8IFtdO1xuICAgICAgICAgICAgdDIgPSBSLnBhcnNlVHJhbnNmb3JtU3RyaW5nKHQyKSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBtYXhsZW5ndGggPSBtbWF4KHQxLmxlbmd0aCwgdDIubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBmcm9tID0gW10sXG4gICAgICAgICAgICAgICAgdG8gPSBbXSxcbiAgICAgICAgICAgICAgICBpID0gMCwgaiwgamosXG4gICAgICAgICAgICAgICAgdHQxLCB0dDI7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IG1heGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdHQxID0gdDFbaV0gfHwgZ2V0RW1wdHkodDJbaV0pO1xuICAgICAgICAgICAgICAgIHR0MiA9IHQyW2ldIHx8IGdldEVtcHR5KHR0MSk7XG4gICAgICAgICAgICAgICAgaWYgKCh0dDFbMF0gIT0gdHQyWzBdKSB8fFxuICAgICAgICAgICAgICAgICAgICAodHQxWzBdLnRvTG93ZXJDYXNlKCkgPT0gXCJyXCIgJiYgKHR0MVsyXSAhPSB0dDJbMl0gfHwgdHQxWzNdICE9IHR0MlszXSkpIHx8XG4gICAgICAgICAgICAgICAgICAgICh0dDFbMF0udG9Mb3dlckNhc2UoKSA9PSBcInNcIiAmJiAodHQxWzNdICE9IHR0MlszXSB8fCB0dDFbNF0gIT0gdHQyWzRdKSlcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJvbVtpXSA9IFtdO1xuICAgICAgICAgICAgICAgIHRvW2ldID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSBtbWF4KHR0MS5sZW5ndGgsIHR0Mi5sZW5ndGgpOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBqIGluIHR0MSAmJiAoZnJvbVtpXVtqXSA9IHR0MVtqXSk7XG4gICAgICAgICAgICAgICAgICAgIGogaW4gdHQyICYmICh0b1tpXVtqXSA9IHR0MltqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmcm9tOiBmcm9tLFxuICAgICAgICAgICAgICAgIHRvOiB0b1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICBSLl9nZXRDb250YWluZXIgPSBmdW5jdGlvbiAoeCwgeSwgdywgaCkge1xuICAgICAgICB2YXIgY29udGFpbmVyO1xuICAgICAgICBjb250YWluZXIgPSBoID09IG51bGwgJiYgIVIuaXMoeCwgXCJvYmplY3RcIikgPyBnLmRvYy5nZXRFbGVtZW50QnlJZCh4KSA6IHg7XG4gICAgICAgIGlmIChjb250YWluZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWluZXIudGFnTmFtZSkge1xuICAgICAgICAgICAgaWYgKHkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogY29udGFpbmVyLnN0eWxlLnBpeGVsV2lkdGggfHwgY29udGFpbmVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbnRhaW5lci5zdHlsZS5waXhlbEhlaWdodCB8fCBjb250YWluZXIub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB5LFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250YWluZXI6IDEsXG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgICAgaGVpZ2h0OiBoXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5wYXRoVG9SZWxhdGl2ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBwYXRoIHRvIHJlbGF0aXZlIGZvcm1cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcGF0aFN0cmluZyAoc3RyaW5nfGFycmF5KSBwYXRoIHN0cmluZyBvciBhcnJheSBvZiBzZWdtZW50c1xuICAgICA9IChhcnJheSkgYXJyYXkgb2Ygc2VnbWVudHMuXG4gICAgXFwqL1xuICAgIFIucGF0aFRvUmVsYXRpdmUgPSBwYXRoVG9SZWxhdGl2ZTtcbiAgICBSLl9lbmdpbmUgPSB7fTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5wYXRoMmN1cnZlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIHBhdGggdG8gYSBuZXcgcGF0aCB3aGVyZSBhbGwgc2VnbWVudHMgYXJlIGN1YmljIGJlemllciBjdXJ2ZXMuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGhTdHJpbmcgKHN0cmluZ3xhcnJheSkgcGF0aCBzdHJpbmcgb3IgYXJyYXkgb2Ygc2VnbWVudHNcbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIHNlZ21lbnRzLlxuICAgIFxcKi9cbiAgICBSLnBhdGgyY3VydmUgPSBwYXRoMmN1cnZlO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLm1hdHJpeFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIG1hdHJpeCBiYXNlZCBvbiBnaXZlbiBwYXJhbWV0ZXJzLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBhIChudW1iZXIpXG4gICAgIC0gYiAobnVtYmVyKVxuICAgICAtIGMgKG51bWJlcilcbiAgICAgLSBkIChudW1iZXIpXG4gICAgIC0gZSAobnVtYmVyKVxuICAgICAtIGYgKG51bWJlcilcbiAgICAgPSAob2JqZWN0KSBATWF0cml4XG4gICAgXFwqL1xuICAgIFIubWF0cml4ID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgoYSwgYiwgYywgZCwgZSwgZik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBNYXRyaXgoYSwgYiwgYywgZCwgZSwgZikge1xuICAgICAgICBpZiAoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmEgPSArYTtcbiAgICAgICAgICAgIHRoaXMuYiA9ICtiO1xuICAgICAgICAgICAgdGhpcy5jID0gK2M7XG4gICAgICAgICAgICB0aGlzLmQgPSArZDtcbiAgICAgICAgICAgIHRoaXMuZSA9ICtlO1xuICAgICAgICAgICAgdGhpcy5mID0gK2Y7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmEgPSAxO1xuICAgICAgICAgICAgdGhpcy5iID0gMDtcbiAgICAgICAgICAgIHRoaXMuYyA9IDA7XG4gICAgICAgICAgICB0aGlzLmQgPSAxO1xuICAgICAgICAgICAgdGhpcy5lID0gMDtcbiAgICAgICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgKGZ1bmN0aW9uIChtYXRyaXhwcm90bykge1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC5hZGRcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIEFkZHMgZ2l2ZW4gbWF0cml4IHRvIGV4aXN0aW5nIG9uZS5cbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSBhIChudW1iZXIpXG4gICAgICAgICAtIGIgKG51bWJlcilcbiAgICAgICAgIC0gYyAobnVtYmVyKVxuICAgICAgICAgLSBkIChudW1iZXIpXG4gICAgICAgICAtIGUgKG51bWJlcilcbiAgICAgICAgIC0gZiAobnVtYmVyKVxuICAgICAgICAgb3JcbiAgICAgICAgIC0gbWF0cml4IChvYmplY3QpIEBNYXRyaXhcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5hZGQgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSwgZikge1xuICAgICAgICAgICAgdmFyIG91dCA9IFtbXSwgW10sIFtdXSxcbiAgICAgICAgICAgICAgICBtID0gW1t0aGlzLmEsIHRoaXMuYywgdGhpcy5lXSwgW3RoaXMuYiwgdGhpcy5kLCB0aGlzLmZdLCBbMCwgMCwgMV1dLFxuICAgICAgICAgICAgICAgIG1hdHJpeCA9IFtbYSwgYywgZV0sIFtiLCBkLCBmXSwgWzAsIDAsIDFdXSxcbiAgICAgICAgICAgICAgICB4LCB5LCB6LCByZXM7XG5cbiAgICAgICAgICAgIGlmIChhICYmIGEgaW5zdGFuY2VvZiBNYXRyaXgpIHtcbiAgICAgICAgICAgICAgICBtYXRyaXggPSBbW2EuYSwgYS5jLCBhLmVdLCBbYS5iLCBhLmQsIGEuZl0sIFswLCAwLCAxXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoeCA9IDA7IHggPCAzOyB4KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHkgPSAwOyB5IDwgMzsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoeiA9IDA7IHogPCAzOyB6KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyArPSBtW3hdW3pdICogbWF0cml4W3pdW3ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG91dFt4XVt5XSA9IHJlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmEgPSBvdXRbMF1bMF07XG4gICAgICAgICAgICB0aGlzLmIgPSBvdXRbMV1bMF07XG4gICAgICAgICAgICB0aGlzLmMgPSBvdXRbMF1bMV07XG4gICAgICAgICAgICB0aGlzLmQgPSBvdXRbMV1bMV07XG4gICAgICAgICAgICB0aGlzLmUgPSBvdXRbMF1bMl07XG4gICAgICAgICAgICB0aGlzLmYgPSBvdXRbMV1bMl07XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LmludmVydFxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmV0dXJucyBpbnZlcnRlZCB2ZXJzaW9uIG9mIHRoZSBtYXRyaXhcbiAgICAgICAgID0gKG9iamVjdCkgQE1hdHJpeFxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLmludmVydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXMsXG4gICAgICAgICAgICAgICAgeCA9IG1lLmEgKiBtZS5kIC0gbWUuYiAqIG1lLmM7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hdHJpeChtZS5kIC8geCwgLW1lLmIgLyB4LCAtbWUuYyAvIHgsIG1lLmEgLyB4LCAobWUuYyAqIG1lLmYgLSBtZS5kICogbWUuZSkgLyB4LCAobWUuYiAqIG1lLmUgLSBtZS5hICogbWUuZikgLyB4KTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguY2xvbmVcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybnMgY29weSBvZiB0aGUgbWF0cml4XG4gICAgICAgICA9IChvYmplY3QpIEBNYXRyaXhcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0cml4KHRoaXMuYSwgdGhpcy5iLCB0aGlzLmMsIHRoaXMuZCwgdGhpcy5lLCB0aGlzLmYpO1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC50cmFuc2xhdGVcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFRyYW5zbGF0ZSB0aGUgbWF0cml4XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0geCAobnVtYmVyKVxuICAgICAgICAgLSB5IChudW1iZXIpXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8udHJhbnNsYXRlID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKDEsIDAsIDAsIDEsIHgsIHkpO1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC5zY2FsZVxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogU2NhbGVzIHRoZSBtYXRyaXhcbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSB4IChudW1iZXIpXG4gICAgICAgICAtIHkgKG51bWJlcikgI29wdGlvbmFsXG4gICAgICAgICAtIGN4IChudW1iZXIpICNvcHRpb25hbFxuICAgICAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWxcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5zY2FsZSA9IGZ1bmN0aW9uICh4LCB5LCBjeCwgY3kpIHtcbiAgICAgICAgICAgIHkgPT0gbnVsbCAmJiAoeSA9IHgpO1xuICAgICAgICAgICAgKGN4IHx8IGN5KSAmJiB0aGlzLmFkZCgxLCAwLCAwLCAxLCBjeCwgY3kpO1xuICAgICAgICAgICAgdGhpcy5hZGQoeCwgMCwgMCwgeSwgMCwgMCk7XG4gICAgICAgICAgICAoY3ggfHwgY3kpICYmIHRoaXMuYWRkKDEsIDAsIDAsIDEsIC1jeCwgLWN5KTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXgucm90YXRlXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSb3RhdGVzIHRoZSBtYXRyaXhcbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSBhIChudW1iZXIpXG4gICAgICAgICAtIHggKG51bWJlcilcbiAgICAgICAgIC0geSAobnVtYmVyKVxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLnJvdGF0ZSA9IGZ1bmN0aW9uIChhLCB4LCB5KSB7XG4gICAgICAgICAgICBhID0gUi5yYWQoYSk7XG4gICAgICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICAgICAgeSA9IHkgfHwgMDtcbiAgICAgICAgICAgIHZhciBjb3MgPSArbWF0aC5jb3MoYSkudG9GaXhlZCg5KSxcbiAgICAgICAgICAgICAgICBzaW4gPSArbWF0aC5zaW4oYSkudG9GaXhlZCg5KTtcbiAgICAgICAgICAgIHRoaXMuYWRkKGNvcywgc2luLCAtc2luLCBjb3MsIHgsIHkpO1xuICAgICAgICAgICAgdGhpcy5hZGQoMSwgMCwgMCwgMSwgLXgsIC15KTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXgueFxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmV0dXJuIHggY29vcmRpbmF0ZSBmb3IgZ2l2ZW4gcG9pbnQgYWZ0ZXIgdHJhbnNmb3JtYXRpb24gZGVzY3JpYmVkIGJ5IHRoZSBtYXRyaXguIFNlZSBhbHNvIEBNYXRyaXgueVxuICAgICAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICAgICAtIHggKG51bWJlcilcbiAgICAgICAgIC0geSAobnVtYmVyKVxuICAgICAgICAgPSAobnVtYmVyKSB4XG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8ueCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgICAgICByZXR1cm4geCAqIHRoaXMuYSArIHkgKiB0aGlzLmMgKyB0aGlzLmU7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LnlcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybiB5IGNvb3JkaW5hdGUgZm9yIGdpdmVuIHBvaW50IGFmdGVyIHRyYW5zZm9ybWF0aW9uIGRlc2NyaWJlZCBieSB0aGUgbWF0cml4LiBTZWUgYWxzbyBATWF0cml4LnhcbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSB4IChudW1iZXIpXG4gICAgICAgICAtIHkgKG51bWJlcilcbiAgICAgICAgID0gKG51bWJlcikgeVxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLnkgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgcmV0dXJuIHggKiB0aGlzLmIgKyB5ICogdGhpcy5kICsgdGhpcy5mO1xuICAgICAgICB9O1xuICAgICAgICBtYXRyaXhwcm90by5nZXQgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgcmV0dXJuICt0aGlzW1N0ci5mcm9tQ2hhckNvZGUoOTcgKyBpKV0udG9GaXhlZCg0KTtcbiAgICAgICAgfTtcbiAgICAgICAgbWF0cml4cHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gUi5zdmcgP1xuICAgICAgICAgICAgICAgIFwibWF0cml4KFwiICsgW3RoaXMuZ2V0KDApLCB0aGlzLmdldCgxKSwgdGhpcy5nZXQoMiksIHRoaXMuZ2V0KDMpLCB0aGlzLmdldCg0KSwgdGhpcy5nZXQoNSldLmpvaW4oKSArIFwiKVwiIDpcbiAgICAgICAgICAgICAgICBbdGhpcy5nZXQoMCksIHRoaXMuZ2V0KDIpLCB0aGlzLmdldCgxKSwgdGhpcy5nZXQoMyksIDAsIDBdLmpvaW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgbWF0cml4cHJvdG8udG9GaWx0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuTWF0cml4KE0xMT1cIiArIHRoaXMuZ2V0KDApICtcbiAgICAgICAgICAgICAgICBcIiwgTTEyPVwiICsgdGhpcy5nZXQoMikgKyBcIiwgTTIxPVwiICsgdGhpcy5nZXQoMSkgKyBcIiwgTTIyPVwiICsgdGhpcy5nZXQoMykgK1xuICAgICAgICAgICAgICAgIFwiLCBEeD1cIiArIHRoaXMuZ2V0KDQpICsgXCIsIER5PVwiICsgdGhpcy5nZXQoNSkgKyBcIiwgc2l6aW5nbWV0aG9kPSdhdXRvIGV4cGFuZCcpXCI7XG4gICAgICAgIH07XG4gICAgICAgIG1hdHJpeHByb3RvLm9mZnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5lLnRvRml4ZWQoNCksIHRoaXMuZi50b0ZpeGVkKDQpXTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gbm9ybShhKSB7XG4gICAgICAgICAgICByZXR1cm4gYVswXSAqIGFbMF0gKyBhWzFdICogYVsxXTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBub3JtYWxpemUoYSkge1xuICAgICAgICAgICAgdmFyIG1hZyA9IG1hdGguc3FydChub3JtKGEpKTtcbiAgICAgICAgICAgIGFbMF0gJiYgKGFbMF0gLz0gbWFnKTtcbiAgICAgICAgICAgIGFbMV0gJiYgKGFbMV0gLz0gbWFnKTtcbiAgICAgICAgfVxuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC5zcGxpdFxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogU3BsaXRzIG1hdHJpeCBpbnRvIHByaW1pdGl2ZSB0cmFuc2Zvcm1hdGlvbnNcbiAgICAgICAgID0gKG9iamVjdCkgaW4gZm9ybWF0OlxuICAgICAgICAgbyBkeCAobnVtYmVyKSB0cmFuc2xhdGlvbiBieSB4XG4gICAgICAgICBvIGR5IChudW1iZXIpIHRyYW5zbGF0aW9uIGJ5IHlcbiAgICAgICAgIG8gc2NhbGV4IChudW1iZXIpIHNjYWxlIGJ5IHhcbiAgICAgICAgIG8gc2NhbGV5IChudW1iZXIpIHNjYWxlIGJ5IHlcbiAgICAgICAgIG8gc2hlYXIgKG51bWJlcikgc2hlYXJcbiAgICAgICAgIG8gcm90YXRlIChudW1iZXIpIHJvdGF0aW9uIGluIGRlZ1xuICAgICAgICAgbyBpc1NpbXBsZSAoYm9vbGVhbikgY291bGQgaXQgYmUgcmVwcmVzZW50ZWQgdmlhIHNpbXBsZSB0cmFuc2Zvcm1hdGlvbnNcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5zcGxpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgICAgIC8vIHRyYW5zbGF0aW9uXG4gICAgICAgICAgICBvdXQuZHggPSB0aGlzLmU7XG4gICAgICAgICAgICBvdXQuZHkgPSB0aGlzLmY7XG5cbiAgICAgICAgICAgIC8vIHNjYWxlIGFuZCBzaGVhclxuICAgICAgICAgICAgdmFyIHJvdyA9IFtbdGhpcy5hLCB0aGlzLmNdLCBbdGhpcy5iLCB0aGlzLmRdXTtcbiAgICAgICAgICAgIG91dC5zY2FsZXggPSBtYXRoLnNxcnQobm9ybShyb3dbMF0pKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZShyb3dbMF0pO1xuXG4gICAgICAgICAgICBvdXQuc2hlYXIgPSByb3dbMF1bMF0gKiByb3dbMV1bMF0gKyByb3dbMF1bMV0gKiByb3dbMV1bMV07XG4gICAgICAgICAgICByb3dbMV0gPSBbcm93WzFdWzBdIC0gcm93WzBdWzBdICogb3V0LnNoZWFyLCByb3dbMV1bMV0gLSByb3dbMF1bMV0gKiBvdXQuc2hlYXJdO1xuXG4gICAgICAgICAgICBvdXQuc2NhbGV5ID0gbWF0aC5zcXJ0KG5vcm0ocm93WzFdKSk7XG4gICAgICAgICAgICBub3JtYWxpemUocm93WzFdKTtcbiAgICAgICAgICAgIG91dC5zaGVhciAvPSBvdXQuc2NhbGV5O1xuXG4gICAgICAgICAgICAvLyByb3RhdGlvblxuICAgICAgICAgICAgdmFyIHNpbiA9IC1yb3dbMF1bMV0sXG4gICAgICAgICAgICAgICAgY29zID0gcm93WzFdWzFdO1xuICAgICAgICAgICAgaWYgKGNvcyA8IDApIHtcbiAgICAgICAgICAgICAgICBvdXQucm90YXRlID0gUi5kZWcobWF0aC5hY29zKGNvcykpO1xuICAgICAgICAgICAgICAgIGlmIChzaW4gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dC5yb3RhdGUgPSAzNjAgLSBvdXQucm90YXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0LnJvdGF0ZSA9IFIuZGVnKG1hdGguYXNpbihzaW4pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0LmlzU2ltcGxlID0gIStvdXQuc2hlYXIudG9GaXhlZCg5KSAmJiAob3V0LnNjYWxleC50b0ZpeGVkKDkpID09IG91dC5zY2FsZXkudG9GaXhlZCg5KSB8fCAhb3V0LnJvdGF0ZSk7XG4gICAgICAgICAgICBvdXQuaXNTdXBlclNpbXBsZSA9ICErb3V0LnNoZWFyLnRvRml4ZWQoOSkgJiYgb3V0LnNjYWxleC50b0ZpeGVkKDkpID09IG91dC5zY2FsZXkudG9GaXhlZCg5KSAmJiAhb3V0LnJvdGF0ZTtcbiAgICAgICAgICAgIG91dC5ub1JvdGF0aW9uID0gIStvdXQuc2hlYXIudG9GaXhlZCg5KSAmJiAhb3V0LnJvdGF0ZTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LnRvVHJhbnNmb3JtU3RyaW5nXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm4gdHJhbnNmb3JtIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgZ2l2ZW4gbWF0cml4XG4gICAgICAgICA9IChzdHJpbmcpIHRyYW5zZm9ybSBzdHJpbmdcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by50b1RyYW5zZm9ybVN0cmluZyA9IGZ1bmN0aW9uIChzaG9ydGVyKSB7XG4gICAgICAgICAgICB2YXIgcyA9IHNob3J0ZXIgfHwgdGhpc1tzcGxpdF0oKTtcbiAgICAgICAgICAgIGlmIChzLmlzU2ltcGxlKSB7XG4gICAgICAgICAgICAgICAgcy5zY2FsZXggPSArcy5zY2FsZXgudG9GaXhlZCg0KTtcbiAgICAgICAgICAgICAgICBzLnNjYWxleSA9ICtzLnNjYWxleS50b0ZpeGVkKDQpO1xuICAgICAgICAgICAgICAgIHMucm90YXRlID0gK3Mucm90YXRlLnRvRml4ZWQoNCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICAocy5keCB8fCBzLmR5ID8gXCJ0XCIgKyBbcy5keCwgcy5keV0gOiBFKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAocy5zY2FsZXggIT0gMSB8fCBzLnNjYWxleSAhPSAxID8gXCJzXCIgKyBbcy5zY2FsZXgsIHMuc2NhbGV5LCAwLCAwXSA6IEUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChzLnJvdGF0ZSA/IFwiclwiICsgW3Mucm90YXRlLCAwLCAwXSA6IEUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtXCIgKyBbdGhpcy5nZXQoMCksIHRoaXMuZ2V0KDEpLCB0aGlzLmdldCgyKSwgdGhpcy5nZXQoMyksIHRoaXMuZ2V0KDQpLCB0aGlzLmdldCg1KV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSkoTWF0cml4LnByb3RvdHlwZSk7XG5cbiAgICB2YXIgcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB9LFxuICAgIHByZXZlbnRUb3VjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgfSxcbiAgICBzdG9wVG91Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSxcbiAgICBnZXRFdmVudFBvc2l0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHNjcm9sbFkgPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGcuZG9jLmJvZHkuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgc2Nyb2xsWCA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGcuZG9jLmJvZHkuc2Nyb2xsTGVmdDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogZS5jbGllbnRYICsgc2Nyb2xsWCxcbiAgICAgICAgICAgIHk6IGUuY2xpZW50WSArIHNjcm9sbFlcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGFkZEV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGcuZG9jLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqLCB0eXBlLCBmbiwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGdldEV2ZW50UG9zaXRpb24oZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKGVsZW1lbnQsIGUsIHBvcy54LCBwb3MueSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiB0b3VjaE1hcFt0eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2YgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGdldEV2ZW50UG9zaXRpb24oZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkZSA9IGU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXNbaV0udGFyZ2V0ID09IG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gZS50YXJnZXRUb3VjaGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm9yaWdpbmFsRXZlbnQgPSBvbGRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID0gcHJldmVudFRvdWNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IHN0b3BUb3VjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbChlbGVtZW50LCBlLCBwb3MueCwgcG9zLnkpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcih0b3VjaE1hcFt0eXBlXSwgX2YsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzVG91Y2ggJiYgdG91Y2hNYXBbdHlwZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcih0b3VjaE1hcFt0eXBlXSwgX2YsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChnLmRvYy5hdHRhY2hFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmosIHR5cGUsIGZuLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlID0gZSB8fCBnLndpbi5ldmVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFkgPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGcuZG9jLmJvZHkuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWCA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGcuZG9jLmJvZHkuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBlLmNsaWVudFggKyBzY3JvbGxYLFxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGUuY2xpZW50WSArIHNjcm9sbFk7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IHByZXZlbnREZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IHN0b3BQcm9wYWdhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwoZWxlbWVudCwgZSwgeCwgeSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBvYmouYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgICAgICAgICAgICAgdmFyIGRldGFjaGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvYmouZGV0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRldGFjaGVyO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pKCksXG4gICAgZHJhZyA9IFtdLFxuICAgIGRyYWdNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICB5ID0gZS5jbGllbnRZLFxuICAgICAgICAgICAgc2Nyb2xsWSA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZy5kb2MuYm9keS5zY3JvbGxUb3AsXG4gICAgICAgICAgICBzY3JvbGxYID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZy5kb2MuYm9keS5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgZHJhZ2ksXG4gICAgICAgICAgICBqID0gZHJhZy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAgICAgIGRyYWdpID0gZHJhZ1tqXTtcbiAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIGUudG91Y2hlcykge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZS50b3VjaGVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgdG91Y2g7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaCA9IGUudG91Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvdWNoLmlkZW50aWZpZXIgPT0gZHJhZ2kuZWwuX2RyYWcuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgICAgICAgICAoZS5vcmlnaW5hbEV2ZW50ID8gZS5vcmlnaW5hbEV2ZW50IDogZSkucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGRyYWdpLmVsLm5vZGUsXG4gICAgICAgICAgICAgICAgbyxcbiAgICAgICAgICAgICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZyxcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGUsXG4gICAgICAgICAgICAgICAgZGlzcGxheSA9IG5vZGUuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgIGcud2luLm9wZXJhICYmIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgbyA9IGRyYWdpLmVsLnBhcGVyLmdldEVsZW1lbnRCeVBvaW50KHgsIHkpO1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgIGcud2luLm9wZXJhICYmIChuZXh0ID8gcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBuZXh0KSA6IHBhcmVudC5hcHBlbmRDaGlsZChub2RlKSk7XG4gICAgICAgICAgICBvICYmIGV2ZShcInJhcGhhZWwuZHJhZy5vdmVyLlwiICsgZHJhZ2kuZWwuaWQsIGRyYWdpLmVsLCBvKTtcbiAgICAgICAgICAgIHggKz0gc2Nyb2xsWDtcbiAgICAgICAgICAgIHkgKz0gc2Nyb2xsWTtcbiAgICAgICAgICAgIGV2ZShcInJhcGhhZWwuZHJhZy5tb3ZlLlwiICsgZHJhZ2kuZWwuaWQsIGRyYWdpLm1vdmVfc2NvcGUgfHwgZHJhZ2kuZWwsIHggLSBkcmFnaS5lbC5fZHJhZy54LCB5IC0gZHJhZ2kuZWwuX2RyYWcueSwgeCwgeSwgZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRyYWdVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIFIudW5tb3VzZW1vdmUoZHJhZ01vdmUpLnVubW91c2V1cChkcmFnVXApO1xuICAgICAgICB2YXIgaSA9IGRyYWcubGVuZ3RoLFxuICAgICAgICAgICAgZHJhZ2k7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIGRyYWdpID0gZHJhZ1tpXTtcbiAgICAgICAgICAgIGRyYWdpLmVsLl9kcmFnID0ge307XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmRyYWcuZW5kLlwiICsgZHJhZ2kuZWwuaWQsIGRyYWdpLmVuZF9zY29wZSB8fCBkcmFnaS5zdGFydF9zY29wZSB8fCBkcmFnaS5tb3ZlX3Njb3BlIHx8IGRyYWdpLmVsLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBkcmFnID0gW107XG4gICAgfSxcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5lbFxuICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgKipcbiAgICAgKiBZb3UgY2FuIGFkZCB5b3VyIG93biBtZXRob2QgdG8gZWxlbWVudHMuIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8gaGFjayBkZWZhdWx0IGZ1bmN0aW9uYWxpdHkgb3JcbiAgICAgKiB3YW50IHRvIHdyYXAgc29tZSBjb21tb24gdHJhbnNmb3JtYXRpb24gb3IgYXR0cmlidXRlcyBpbiBvbmUgbWV0aG9kLiBJbiBkaWZmZXJlbmNlIHRvIGNhbnZhcyBtZXRob2RzLFxuICAgICAqIHlvdSBjYW4gcmVkZWZpbmUgZWxlbWVudCBtZXRob2QgYXQgYW55IHRpbWUuIEV4cGVuZGluZyBlbGVtZW50IG1ldGhvZHMgd291bGRu4oCZdCBhZmZlY3Qgc2V0LlxuICAgICA+IFVzYWdlXG4gICAgIHwgUmFwaGFlbC5lbC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgIHwgICAgIHRoaXMuYXR0cih7ZmlsbDogXCIjZjAwXCJ9KTtcbiAgICAgfCB9O1xuICAgICB8IC8vIHRoZW4gdXNlIGl0XG4gICAgIHwgcGFwZXIuY2lyY2xlKDEwMCwgMTAwLCAyMCkucmVkKCk7XG4gICAgXFwqL1xuICAgIGVscHJvdG8gPSBSLmVsID0ge307XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgY2xpY2sgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5jbGlja1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBjbGljayBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5kYmxjbGlja1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBkb3VibGUgY2xpY2sgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5kYmxjbGlja1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBkb3VibGUgY2xpY2sgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2Vkb3duXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlZG93biBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bm1vdXNlZG93blxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZWRvd24gZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2Vtb3ZlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlbW92ZSBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bm1vdXNlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZW1vdmUgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2VvdXRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2VvdXQgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5tb3VzZW91dFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZW91dCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5tb3VzZW92ZXJcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2VvdmVyIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVubW91c2VvdmVyXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlb3ZlciBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5tb3VzZXVwXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNldXAgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5tb3VzZXVwXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNldXAgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudG91Y2hzdGFydFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciB0b3VjaHN0YXJ0IGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVudG91Y2hzdGFydFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciB0b3VjaHN0YXJ0IGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvdWNobW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciB0b3VjaG1vdmUgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW50b3VjaG1vdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2htb3ZlIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvdWNoZW5kXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNoZW5kIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVudG91Y2hlbmRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hlbmQgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudG91Y2hjYW5jZWxcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hjYW5jZWwgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW50b3VjaGNhbmNlbFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciB0b3VjaGNhbmNlbCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgZm9yICh2YXIgaSA9IGV2ZW50cy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgIFJbZXZlbnROYW1lXSA9IGVscHJvdG9bZXZlbnROYW1lXSA9IGZ1bmN0aW9uIChmbiwgc2NvcGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoUi5pcyhmbiwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHRoaXMuZXZlbnRzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKHtuYW1lOiBldmVudE5hbWUsIGY6IGZuLCB1bmJpbmQ6IGFkZEV2ZW50KHRoaXMuc2hhcGUgfHwgdGhpcy5ub2RlIHx8IGcuZG9jLCBldmVudE5hbWUsIGZuLCBzY29wZSB8fCB0aGlzKX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBSW1widW5cIiArIGV2ZW50TmFtZV0gPSBlbHByb3RvW1widW5cIiArIGV2ZW50TmFtZV0gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5ldmVudHMgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgIGwgPSBldmVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHdoaWxlIChsLS0pe1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRzW2xdLm5hbWUgPT0gZXZlbnROYW1lICYmIChSLmlzKGZuLCBcInVuZGVmaW5lZFwiKSB8fCBldmVudHNbbF0uZiA9PSBmbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1tsXS51bmJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UobCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnRzLmxlbmd0aCAmJiBkZWxldGUgdGhpcy5ldmVudHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KShldmVudHNbaV0pO1xuICAgIH1cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmRhdGFcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgb3IgcmV0cmlldmVzIGdpdmVuIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBrZXkuXG4gICAgICoqXG4gICAgICogU2VlIGFsc28gQEVsZW1lbnQucmVtb3ZlRGF0YVxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBrZXkgKHN0cmluZykga2V5IHRvIHN0b3JlIGRhdGFcbiAgICAgLSB2YWx1ZSAoYW55KSAjb3B0aW9uYWwgdmFsdWUgdG8gc3RvcmVcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgICAqIG9yLCBpZiB2YWx1ZSBpcyBub3Qgc3BlY2lmaWVkOlxuICAgICA9IChhbnkpIHZhbHVlXG4gICAgICogb3IsIGlmIGtleSBhbmQgdmFsdWUgYXJlIG5vdCBzcGVjaWZpZWQ6XG4gICAgID0gKG9iamVjdCkgS2V5L3ZhbHVlIHBhaXJzIGZvciBhbGwgdGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50LlxuICAgICA+IFVzYWdlXG4gICAgIHwgZm9yICh2YXIgaSA9IDAsIGkgPCA1LCBpKyspIHtcbiAgICAgfCAgICAgcGFwZXIuY2lyY2xlKDEwICsgMTUgKiBpLCAxMCwgMTApXG4gICAgIHwgICAgICAgICAgLmF0dHIoe2ZpbGw6IFwiIzAwMFwifSlcbiAgICAgfCAgICAgICAgICAuZGF0YShcImlcIiwgaSlcbiAgICAgfCAgICAgICAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICB8ICAgICAgICAgICAgIGFsZXJ0KHRoaXMuZGF0YShcImlcIikpO1xuICAgICB8ICAgICAgICAgIH0pO1xuICAgICB8IH1cbiAgICBcXCovXG4gICAgZWxwcm90by5kYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBlbGRhdGFbdGhpcy5pZF0gPSBlbGRhdGFbdGhpcy5pZF0gfHwge307XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGlmIChSLmlzKGtleSwgXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGtleSkgaWYgKGtleVtoYXNdKGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YShpLCBrZXlbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZShcInJhcGhhZWwuZGF0YS5nZXQuXCIgKyB0aGlzLmlkLCB0aGlzLCBkYXRhW2tleV0sIGtleSk7XG4gICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICBldmUoXCJyYXBoYWVsLmRhdGEuc2V0LlwiICsgdGhpcy5pZCwgdGhpcywgdmFsdWUsIGtleSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQucmVtb3ZlRGF0YVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggYW4gZWxlbWVudCBieSBnaXZlbiBrZXkuXG4gICAgICogSWYga2V5IGlzIG5vdCBwcm92aWRlZCwgcmVtb3ZlcyBhbGwgdGhlIGRhdGEgb2YgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGtleSAoc3RyaW5nKSAjb3B0aW9uYWwga2V5XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5yZW1vdmVEYXRhID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoa2V5ID09IG51bGwpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBlbGRhdGFbdGhpcy5pZF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGRhdGFbdGhpcy5pZF0gJiYgZGVsZXRlIGVsZGF0YVt0aGlzLmlkXVtrZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmdldERhdGFcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZWxlbWVudCBkYXRhXG4gICAgID0gKG9iamVjdCkgZGF0YVxuICAgIFxcKi9cbiAgICBlbHByb3RvLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjbG9uZShlbGRhdGFbdGhpcy5pZF0gfHwge30pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaG92ZXJcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlcnMgZm9yIGhvdmVyIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZl9pbiAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGhvdmVyIGluXG4gICAgIC0gZl9vdXQgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciBob3ZlciBvdXRcbiAgICAgLSBpY29udGV4dCAob2JqZWN0KSAjb3B0aW9uYWwgY29udGV4dCBmb3IgaG92ZXIgaW4gaGFuZGxlclxuICAgICAtIG9jb250ZXh0IChvYmplY3QpICNvcHRpb25hbCBjb250ZXh0IGZvciBob3ZlciBvdXQgaGFuZGxlclxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaG92ZXIgPSBmdW5jdGlvbiAoZl9pbiwgZl9vdXQsIHNjb3BlX2luLCBzY29wZV9vdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW91c2VvdmVyKGZfaW4sIHNjb3BlX2luKS5tb3VzZW91dChmX291dCwgc2NvcGVfb3V0IHx8IHNjb3BlX2luKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuaG92ZXJcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlcnMgZm9yIGhvdmVyIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZl9pbiAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGhvdmVyIGluXG4gICAgIC0gZl9vdXQgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciBob3ZlciBvdXRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnVuaG92ZXIgPSBmdW5jdGlvbiAoZl9pbiwgZl9vdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5tb3VzZW92ZXIoZl9pbikudW5tb3VzZW91dChmX291dCk7XG4gICAgfTtcbiAgICB2YXIgZHJhZ2dhYmxlID0gW107XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZHJhZ1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVycyBmb3IgZHJhZyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gb25tb3ZlIChmdW5jdGlvbikgaGFuZGxlciBmb3IgbW92aW5nXG4gICAgIC0gb25zdGFydCAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGRyYWcgc3RhcnRcbiAgICAgLSBvbmVuZCAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGRyYWcgZW5kXG4gICAgIC0gbWNvbnRleHQgKG9iamVjdCkgI29wdGlvbmFsIGNvbnRleHQgZm9yIG1vdmluZyBoYW5kbGVyXG4gICAgIC0gc2NvbnRleHQgKG9iamVjdCkgI29wdGlvbmFsIGNvbnRleHQgZm9yIGRyYWcgc3RhcnQgaGFuZGxlclxuICAgICAtIGVjb250ZXh0IChvYmplY3QpICNvcHRpb25hbCBjb250ZXh0IGZvciBkcmFnIGVuZCBoYW5kbGVyXG4gICAgICogQWRkaXRpb25hbGx5IGZvbGxvd2luZyBgZHJhZ2AgZXZlbnRzIHdpbGwgYmUgdHJpZ2dlcmVkOiBgZHJhZy5zdGFydC48aWQ+YCBvbiBzdGFydCxcbiAgICAgKiBgZHJhZy5lbmQuPGlkPmAgb24gZW5kIGFuZCBgZHJhZy5tb3ZlLjxpZD5gIG9uIGV2ZXJ5IG1vdmUuIFdoZW4gZWxlbWVudCB3aWxsIGJlIGRyYWdnZWQgb3ZlciBhbm90aGVyIGVsZW1lbnRcbiAgICAgKiBgZHJhZy5vdmVyLjxpZD5gIHdpbGwgYmUgZmlyZWQgYXMgd2VsbC5cbiAgICAgKlxuICAgICAqIFN0YXJ0IGV2ZW50IGFuZCBzdGFydCBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGluIHNwZWNpZmllZCBjb250ZXh0IG9yIGluIGNvbnRleHQgb2YgdGhlIGVsZW1lbnQgd2l0aCBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgbyB4IChudW1iZXIpIHggcG9zaXRpb24gb2YgdGhlIG1vdXNlXG4gICAgIG8geSAobnVtYmVyKSB5IHBvc2l0aW9uIG9mIHRoZSBtb3VzZVxuICAgICBvIGV2ZW50IChvYmplY3QpIERPTSBldmVudCBvYmplY3RcbiAgICAgKiBNb3ZlIGV2ZW50IGFuZCBtb3ZlIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgaW4gc3BlY2lmaWVkIGNvbnRleHQgb3IgaW4gY29udGV4dCBvZiB0aGUgZWxlbWVudCB3aXRoIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICAgICBvIGR4IChudW1iZXIpIHNoaWZ0IGJ5IHggZnJvbSB0aGUgc3RhcnQgcG9pbnRcbiAgICAgbyBkeSAobnVtYmVyKSBzaGlmdCBieSB5IGZyb20gdGhlIHN0YXJ0IHBvaW50XG4gICAgIG8geCAobnVtYmVyKSB4IHBvc2l0aW9uIG9mIHRoZSBtb3VzZVxuICAgICBvIHkgKG51bWJlcikgeSBwb3NpdGlvbiBvZiB0aGUgbW91c2VcbiAgICAgbyBldmVudCAob2JqZWN0KSBET00gZXZlbnQgb2JqZWN0XG4gICAgICogRW5kIGV2ZW50IGFuZCBlbmQgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiBzcGVjaWZpZWQgY29udGV4dCBvciBpbiBjb250ZXh0IG9mIHRoZSBlbGVtZW50IHdpdGggZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAgIG8gZXZlbnQgKG9iamVjdCkgRE9NIGV2ZW50IG9iamVjdFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZHJhZyA9IGZ1bmN0aW9uIChvbm1vdmUsIG9uc3RhcnQsIG9uZW5kLCBtb3ZlX3Njb3BlLCBzdGFydF9zY29wZSwgZW5kX3Njb3BlKSB7XG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0KGUpIHtcbiAgICAgICAgICAgIChlLm9yaWdpbmFsRXZlbnQgfHwgZSkucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYLFxuICAgICAgICAgICAgICAgIHkgPSBlLmNsaWVudFksXG4gICAgICAgICAgICAgICAgc2Nyb2xsWSA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZy5kb2MuYm9keS5zY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgc2Nyb2xsWCA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGcuZG9jLmJvZHkuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIHRoaXMuX2RyYWcuaWQgPSBlLmlkZW50aWZpZXI7XG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGUudG91Y2hlcy5sZW5ndGgsIHRvdWNoO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2ggPSBlLnRvdWNoZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RyYWcuaWQgPSB0b3VjaC5pZGVudGlmaWVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PSB0aGlzLl9kcmFnLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gdG91Y2guY2xpZW50WDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB0b3VjaC5jbGllbnRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9kcmFnLnggPSB4ICsgc2Nyb2xsWDtcbiAgICAgICAgICAgIHRoaXMuX2RyYWcueSA9IHkgKyBzY3JvbGxZO1xuICAgICAgICAgICAgIWRyYWcubGVuZ3RoICYmIFIubW91c2Vtb3ZlKGRyYWdNb3ZlKS5tb3VzZXVwKGRyYWdVcCk7XG4gICAgICAgICAgICBkcmFnLnB1c2goe2VsOiB0aGlzLCBtb3ZlX3Njb3BlOiBtb3ZlX3Njb3BlLCBzdGFydF9zY29wZTogc3RhcnRfc2NvcGUsIGVuZF9zY29wZTogZW5kX3Njb3BlfSk7XG4gICAgICAgICAgICBvbnN0YXJ0ICYmIGV2ZS5vbihcInJhcGhhZWwuZHJhZy5zdGFydC5cIiArIHRoaXMuaWQsIG9uc3RhcnQpO1xuICAgICAgICAgICAgb25tb3ZlICYmIGV2ZS5vbihcInJhcGhhZWwuZHJhZy5tb3ZlLlwiICsgdGhpcy5pZCwgb25tb3ZlKTtcbiAgICAgICAgICAgIG9uZW5kICYmIGV2ZS5vbihcInJhcGhhZWwuZHJhZy5lbmQuXCIgKyB0aGlzLmlkLCBvbmVuZCk7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmRyYWcuc3RhcnQuXCIgKyB0aGlzLmlkLCBzdGFydF9zY29wZSB8fCBtb3ZlX3Njb3BlIHx8IHRoaXMsIHRoaXMuX2RyYWcueCwgdGhpcy5fZHJhZy55LCBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kcmFnID0ge307XG4gICAgICAgIGRyYWdnYWJsZS5wdXNoKHtlbDogdGhpcywgc3RhcnQ6IHN0YXJ0fSk7XG4gICAgICAgIHRoaXMubW91c2Vkb3duKHN0YXJ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5vbkRyYWdPdmVyXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTaG9ydGN1dCBmb3IgYXNzaWduaW5nIGV2ZW50IGhhbmRsZXIgZm9yIGBkcmFnLm92ZXIuPGlkPmAgZXZlbnQsIHdoZXJlIGlkIGlzIGlkIG9mIHRoZSBlbGVtZW50IChzZWUgQEVsZW1lbnQuaWQpLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBmIChmdW5jdGlvbikgaGFuZGxlciBmb3IgZXZlbnQsIGZpcnN0IGFyZ3VtZW50IHdvdWxkIGJlIHRoZSBlbGVtZW50IHlvdSBhcmUgZHJhZ2dpbmcgb3ZlclxuICAgIFxcKi9cbiAgICBlbHByb3RvLm9uRHJhZ092ZXIgPSBmdW5jdGlvbiAoZikge1xuICAgICAgICBmID8gZXZlLm9uKFwicmFwaGFlbC5kcmFnLm92ZXIuXCIgKyB0aGlzLmlkLCBmKSA6IGV2ZS51bmJpbmQoXCJyYXBoYWVsLmRyYWcub3Zlci5cIiArIHRoaXMuaWQpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5kcmFnXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGFsbCBkcmFnIGV2ZW50IGhhbmRsZXJzIGZyb20gZ2l2ZW4gZWxlbWVudC5cbiAgICBcXCovXG4gICAgZWxwcm90by51bmRyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpID0gZHJhZ2dhYmxlLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkgaWYgKGRyYWdnYWJsZVtpXS5lbCA9PSB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzLnVubW91c2Vkb3duKGRyYWdnYWJsZVtpXS5zdGFydCk7XG4gICAgICAgICAgICBkcmFnZ2FibGUuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgZXZlLnVuYmluZChcInJhcGhhZWwuZHJhZy4qLlwiICsgdGhpcy5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgIWRyYWdnYWJsZS5sZW5ndGggJiYgUi51bm1vdXNlbW92ZShkcmFnTW92ZSkudW5tb3VzZXVwKGRyYWdVcCk7XG4gICAgICAgIGRyYWcgPSBbXTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5jaXJjbGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERyYXdzIGEgY2lyY2xlLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgY2VudHJlXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRyZVxuICAgICAtIHIgKG51bWJlcikgcmFkaXVzXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3Qgd2l0aCB0eXBlIOKAnGNpcmNsZeKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIGMgPSBwYXBlci5jaXJjbGUoNTAsIDUwLCA0MCk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uY2lyY2xlID0gZnVuY3Rpb24gKHgsIHksIHIpIHtcbiAgICAgICAgdmFyIG91dCA9IFIuX2VuZ2luZS5jaXJjbGUodGhpcywgeCB8fCAwLCB5IHx8IDAsIHIgfHwgMCk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlY3RcbiAgICAgWyBtZXRob2QgXVxuICAgICAqXG4gICAgICogRHJhd3MgYSByZWN0YW5nbGUuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSB0b3AgbGVmdCBjb3JuZXJcbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgdG9wIGxlZnQgY29ybmVyXG4gICAgIC0gd2lkdGggKG51bWJlcikgd2lkdGhcbiAgICAgLSBoZWlnaHQgKG51bWJlcikgaGVpZ2h0XG4gICAgIC0gciAobnVtYmVyKSAjb3B0aW9uYWwgcmFkaXVzIGZvciByb3VuZGVkIGNvcm5lcnMsIGRlZmF1bHQgaXMgMFxuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0IHdpdGggdHlwZSDigJxyZWN04oCdXG4gICAgICoqXG4gICAgID4gVXNhZ2VcbiAgICAgfCAvLyByZWd1bGFyIHJlY3RhbmdsZVxuICAgICB8IHZhciBjID0gcGFwZXIucmVjdCgxMCwgMTAsIDUwLCA1MCk7XG4gICAgIHwgLy8gcmVjdGFuZ2xlIHdpdGggcm91bmRlZCBjb3JuZXJzXG4gICAgIHwgdmFyIGMgPSBwYXBlci5yZWN0KDQwLCA0MCwgNTAsIDUwLCAxMCk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8ucmVjdCA9IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCByKSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUucmVjdCh0aGlzLCB4IHx8IDAsIHkgfHwgMCwgdyB8fCAwLCBoIHx8IDAsIHIgfHwgMCk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmVsbGlwc2VcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERyYXdzIGFuIGVsbGlwc2UuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmVcbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudHJlXG4gICAgIC0gcnggKG51bWJlcikgaG9yaXpvbnRhbCByYWRpdXNcbiAgICAgLSByeSAobnVtYmVyKSB2ZXJ0aWNhbCByYWRpdXNcbiAgICAgPSAob2JqZWN0KSBSYXBoYcOrbCBlbGVtZW50IG9iamVjdCB3aXRoIHR5cGUg4oCcZWxsaXBzZeKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIGMgPSBwYXBlci5lbGxpcHNlKDUwLCA1MCwgNDAsIDIwKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5lbGxpcHNlID0gZnVuY3Rpb24gKHgsIHksIHJ4LCByeSkge1xuICAgICAgICB2YXIgb3V0ID0gUi5fZW5naW5lLmVsbGlwc2UodGhpcywgeCB8fCAwLCB5IHx8IDAsIHJ4IHx8IDAsIHJ5IHx8IDApO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5wYXRoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGEgcGF0aCBlbGVtZW50IGJ5IGdpdmVuIHBhdGggZGF0YSBzdHJpbmcuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGhTdHJpbmcgKHN0cmluZykgI29wdGlvbmFsIHBhdGggc3RyaW5nIGluIFNWRyBmb3JtYXQuXG4gICAgICogUGF0aCBzdHJpbmcgY29uc2lzdHMgb2Ygb25lLWxldHRlciBjb21tYW5kcywgZm9sbG93ZWQgYnkgY29tbWEgc2VwcmFyYXRlZCBhcmd1bWVudHMgaW4gbnVtZXJjYWwgZm9ybS4gRXhhbXBsZTpcbiAgICAgfCBcIk0xMCwyMEwzMCw0MFwiXG4gICAgICogSGVyZSB3ZSBjYW4gc2VlIHR3byBjb21tYW5kczog4oCcTeKAnSwgd2l0aCBhcmd1bWVudHMgYCgxMCwgMjApYCBhbmQg4oCcTOKAnSB3aXRoIGFyZ3VtZW50cyBgKDMwLCA0MClgLiBVcHBlciBjYXNlIGxldHRlciBtZWFuIGNvbW1hbmQgaXMgYWJzb2x1dGUsIGxvd2VyIGNhc2XigJRyZWxhdGl2ZS5cbiAgICAgKlxuICAgICAjIDxwPkhlcmUgaXMgc2hvcnQgbGlzdCBvZiBjb21tYW5kcyBhdmFpbGFibGUsIGZvciBtb3JlIGRldGFpbHMgc2VlIDxhIGhyZWY9XCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcvcGF0aHMuaHRtbCNQYXRoRGF0YVwiIHRpdGxlPVwiRGV0YWlscyBvZiBhIHBhdGgncyBkYXRhIGF0dHJpYnV0ZSdzIGZvcm1hdCBhcmUgZGVzY3JpYmVkIGluIHRoZSBTVkcgc3BlY2lmaWNhdGlvbi5cIj5TVkcgcGF0aCBzdHJpbmcgZm9ybWF0PC9hPi48L3A+XG4gICAgICMgPHRhYmxlPjx0aGVhZD48dHI+PHRoPkNvbW1hbmQ8L3RoPjx0aD5OYW1lPC90aD48dGg+UGFyYW1ldGVyczwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT5cbiAgICAgIyA8dHI+PHRkPk08L3RkPjx0ZD5tb3ZldG88L3RkPjx0ZD4oeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5aPC90ZD48dGQ+Y2xvc2VwYXRoPC90ZD48dGQ+KG5vbmUpPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+TDwvdGQ+PHRkPmxpbmV0bzwvdGQ+PHRkPih4IHkpKzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPkg8L3RkPjx0ZD5ob3Jpem9udGFsIGxpbmV0bzwvdGQ+PHRkPngrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+VjwvdGQ+PHRkPnZlcnRpY2FsIGxpbmV0bzwvdGQ+PHRkPnkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+QzwvdGQ+PHRkPmN1cnZldG88L3RkPjx0ZD4oeDEgeTEgeDIgeTIgeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5TPC90ZD48dGQ+c21vb3RoIGN1cnZldG88L3RkPjx0ZD4oeDIgeTIgeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5RPC90ZD48dGQ+cXVhZHJhdGljIELDqXppZXIgY3VydmV0bzwvdGQ+PHRkPih4MSB5MSB4IHkpKzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPlQ8L3RkPjx0ZD5zbW9vdGggcXVhZHJhdGljIELDqXppZXIgY3VydmV0bzwvdGQ+PHRkPih4IHkpKzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPkE8L3RkPjx0ZD5lbGxpcHRpY2FsIGFyYzwvdGQ+PHRkPihyeCByeSB4LWF4aXMtcm90YXRpb24gbGFyZ2UtYXJjLWZsYWcgc3dlZXAtZmxhZyB4IHkpKzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPlI8L3RkPjx0ZD48YSBocmVmPVwiaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DYXRtdWxs4oCTUm9tX3NwbGluZSNDYXRtdWxsLkUyLjgwLjkzUm9tX3NwbGluZVwiPkNhdG11bGwtUm9tIGN1cnZldG88L2E+KjwvdGQ+PHRkPngxIHkxICh4IHkpKzwvdGQ+PC90cj48L3Rib2R5PjwvdGFibGU+XG4gICAgICogKiDigJxDYXRtdWxsLVJvbSBjdXJ2ZXRv4oCdIGlzIGEgbm90IHN0YW5kYXJkIFNWRyBjb21tYW5kIGFuZCBhZGRlZCBpbiAyLjAgdG8gbWFrZSBsaWZlIGVhc2llci5cbiAgICAgKiBOb3RlOiB0aGVyZSBpcyBhIHNwZWNpYWwgY2FzZSB3aGVuIHBhdGggY29uc2lzdCBvZiBqdXN0IHRocmVlIGNvbW1hbmRzOiDigJxNMTAsMTBS4oCmeuKAnS4gSW4gdGhpcyBjYXNlIHBhdGggd2lsbCBzbW9vdGhseSBjb25uZWN0cyB0byBpdHMgYmVnaW5uaW5nLlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIGMgPSBwYXBlci5wYXRoKFwiTTEwIDEwTDkwIDkwXCIpO1xuICAgICB8IC8vIGRyYXcgYSBkaWFnb25hbCBsaW5lOlxuICAgICB8IC8vIG1vdmUgdG8gMTAsMTAsIGxpbmUgdG8gOTAsOTBcbiAgICAgKiBGb3IgZXhhbXBsZSBvZiBwYXRoIHN0cmluZ3MsIGNoZWNrIG91dCB0aGVzZSBpY29uczogaHR0cDovL3JhcGhhZWxqcy5jb20vaWNvbnMvXG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8ucGF0aCA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XG4gICAgICAgIHBhdGhTdHJpbmcgJiYgIVIuaXMocGF0aFN0cmluZywgc3RyaW5nKSAmJiAhUi5pcyhwYXRoU3RyaW5nWzBdLCBhcnJheSkgJiYgKHBhdGhTdHJpbmcgKz0gRSk7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUucGF0aChSLmZvcm1hdFthcHBseV0oUiwgYXJndW1lbnRzKSwgdGhpcyk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmltYWdlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBFbWJlZHMgYW4gaW1hZ2UgaW50byB0aGUgc3VyZmFjZS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gc3JjIChzdHJpbmcpIFVSSSBvZiB0aGUgc291cmNlIGltYWdlXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBwb3NpdGlvblxuICAgICAtIHdpZHRoIChudW1iZXIpIHdpZHRoIG9mIHRoZSBpbWFnZVxuICAgICAtIGhlaWdodCAobnVtYmVyKSBoZWlnaHQgb2YgdGhlIGltYWdlXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3Qgd2l0aCB0eXBlIOKAnGltYWdl4oCdXG4gICAgICoqXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgYyA9IHBhcGVyLmltYWdlKFwiYXBwbGUucG5nXCIsIDEwLCAxMCwgODAsIDgwKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5pbWFnZSA9IGZ1bmN0aW9uIChzcmMsIHgsIHksIHcsIGgpIHtcbiAgICAgICAgdmFyIG91dCA9IFIuX2VuZ2luZS5pbWFnZSh0aGlzLCBzcmMgfHwgXCJhYm91dDpibGFua1wiLCB4IHx8IDAsIHkgfHwgMCwgdyB8fCAwLCBoIHx8IDApO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci50ZXh0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEcmF3cyBhIHRleHQgc3RyaW5nLiBJZiB5b3UgbmVlZCBsaW5lIGJyZWFrcywgcHV0IOKAnFxcbuKAnSBpbiB0aGUgc3RyaW5nLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBwb3NpdGlvblxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIHBvc2l0aW9uXG4gICAgIC0gdGV4dCAoc3RyaW5nKSBUaGUgdGV4dCBzdHJpbmcgdG8gZHJhd1xuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0IHdpdGggdHlwZSDigJx0ZXh04oCdXG4gICAgICoqXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgdCA9IHBhcGVyLnRleHQoNTAsIDUwLCBcIlJhcGhhw6tsXFxua2lja3NcXG5idXR0IVwiKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by50ZXh0ID0gZnVuY3Rpb24gKHgsIHksIHRleHQpIHtcbiAgICAgICAgdmFyIG91dCA9IFIuX2VuZ2luZS50ZXh0KHRoaXMsIHggfHwgMCwgeSB8fCAwLCBTdHIodGV4dCkpO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5zZXRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENyZWF0ZXMgYXJyYXktbGlrZSBvYmplY3QgdG8ga2VlcCBhbmQgb3BlcmF0ZSBzZXZlcmFsIGVsZW1lbnRzIGF0IG9uY2UuXG4gICAgICogV2FybmluZzogaXQgZG9lc27igJl0IGNyZWF0ZSBhbnkgZWxlbWVudHMgZm9yIGl0c2VsZiBpbiB0aGUgcGFnZSwgaXQganVzdCBncm91cHMgZXhpc3RpbmcgZWxlbWVudHMuXG4gICAgICogU2V0cyBhY3QgYXMgcHNldWRvIGVsZW1lbnRzIOKAlCBhbGwgbWV0aG9kcyBhdmFpbGFibGUgdG8gYW4gZWxlbWVudCBjYW4gYmUgdXNlZCBvbiBhIHNldC5cbiAgICAgPSAob2JqZWN0KSBhcnJheS1saWtlIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgc2V0IG9mIGVsZW1lbnRzXG4gICAgICoqXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgc3QgPSBwYXBlci5zZXQoKTtcbiAgICAgfCBzdC5wdXNoKFxuICAgICB8ICAgICBwYXBlci5jaXJjbGUoMTAsIDEwLCA1KSxcbiAgICAgfCAgICAgcGFwZXIuY2lyY2xlKDMwLCAxMCwgNSlcbiAgICAgfCApO1xuICAgICB8IHN0LmF0dHIoe2ZpbGw6IFwicmVkXCJ9KTsgLy8gY2hhbmdlcyB0aGUgZmlsbCBvZiBib3RoIGNpcmNsZXNcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5zZXQgPSBmdW5jdGlvbiAoaXRlbXNBcnJheSkge1xuICAgICAgICAhUi5pcyhpdGVtc0FycmF5LCBcImFycmF5XCIpICYmIChpdGVtc0FycmF5ID0gQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgYXJndW1lbnRzLmxlbmd0aCkpO1xuICAgICAgICB2YXIgb3V0ID0gbmV3IFNldChpdGVtc0FycmF5KTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIG91dFtcInBhcGVyXCJdID0gdGhpcztcbiAgICAgICAgb3V0W1widHlwZVwiXSA9IFwic2V0XCI7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0U3RhcnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENyZWF0ZXMgQFBhcGVyLnNldC4gQWxsIGVsZW1lbnRzIHRoYXQgd2lsbCBiZSBjcmVhdGVkIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgYW5kIGJlZm9yZSBjYWxsaW5nXG4gICAgICogQFBhcGVyLnNldEZpbmlzaCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBzZXQuXG4gICAgICoqXG4gICAgID4gVXNhZ2VcbiAgICAgfCBwYXBlci5zZXRTdGFydCgpO1xuICAgICB8IHBhcGVyLmNpcmNsZSgxMCwgMTAsIDUpLFxuICAgICB8IHBhcGVyLmNpcmNsZSgzMCwgMTAsIDUpXG4gICAgIHwgdmFyIHN0ID0gcGFwZXIuc2V0RmluaXNoKCk7XG4gICAgIHwgc3QuYXR0cih7ZmlsbDogXCJyZWRcIn0pOyAvLyBjaGFuZ2VzIHRoZSBmaWxsIG9mIGJvdGggY2lyY2xlc1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnNldFN0YXJ0ID0gZnVuY3Rpb24gKHNldCkge1xuICAgICAgICB0aGlzLl9fc2V0X18gPSBzZXQgfHwgdGhpcy5zZXQoKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5zZXRGaW5pc2hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFNlZSBAUGFwZXIuc2V0U3RhcnQuIFRoaXMgbWV0aG9kIGZpbmlzaGVzIGNhdGNoaW5nIGFuZCByZXR1cm5zIHJlc3VsdGluZyBzZXQuXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgc2V0XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uc2V0RmluaXNoID0gZnVuY3Rpb24gKHNldCkge1xuICAgICAgICB2YXIgb3V0ID0gdGhpcy5fX3NldF9fO1xuICAgICAgICBkZWxldGUgdGhpcy5fX3NldF9fO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldFNpemVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE9idGFpbnMgY3VycmVudCBwYXBlciBhY3R1YWwgc2l6ZS5cbiAgICAgKipcbiAgICAgPSAob2JqZWN0KVxuICAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jYW52YXMucGFyZW50Tm9kZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiBjb250YWluZXIub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGNvbnRhaW5lci5vZmZzZXRIZWlnaHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5zZXRTaXplXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJZiB5b3UgbmVlZCB0byBjaGFuZ2UgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIGNhbGwgdGhpcyBtZXRob2RcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gd2lkdGggKG51bWJlcikgbmV3IHdpZHRoIG9mIHRoZSBjYW52YXNcbiAgICAgLSBoZWlnaHQgKG51bWJlcikgbmV3IGhlaWdodCBvZiB0aGUgY2FudmFzXG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uc2V0U2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBSLl9lbmdpbmUuc2V0U2l6ZS5jYWxsKHRoaXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnNldFZpZXdCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFNldHMgdGhlIHZpZXcgYm94IG9mIHRoZSBwYXBlci4gUHJhY3RpY2FsbHkgaXQgZ2l2ZXMgeW91IGFiaWxpdHkgdG8gem9vbSBhbmQgcGFuIHdob2xlIHBhcGVyIHN1cmZhY2UgYnlcbiAgICAgKiBzcGVjaWZ5aW5nIG5ldyBib3VuZGFyaWVzLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIG5ldyB4IHBvc2l0aW9uLCBkZWZhdWx0IGlzIGAwYFxuICAgICAtIHkgKG51bWJlcikgbmV3IHkgcG9zaXRpb24sIGRlZmF1bHQgaXMgYDBgXG4gICAgIC0gdyAobnVtYmVyKSBuZXcgd2lkdGggb2YgdGhlIGNhbnZhc1xuICAgICAtIGggKG51bWJlcikgbmV3IGhlaWdodCBvZiB0aGUgY2FudmFzXG4gICAgIC0gZml0IChib29sZWFuKSBgdHJ1ZWAgaWYgeW91IHdhbnQgZ3JhcGhpY3MgdG8gZml0IGludG8gbmV3IGJvdW5kYXJ5IGJveFxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnNldFZpZXdCb3ggPSBmdW5jdGlvbiAoeCwgeSwgdywgaCwgZml0KSB7XG4gICAgICAgIHJldHVybiBSLl9lbmdpbmUuc2V0Vmlld0JveC5jYWxsKHRoaXMsIHgsIHksIHcsIGgsIGZpdCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIudG9wXG4gICAgIFsgcHJvcGVydHkgXVxuICAgICAqKlxuICAgICAqIFBvaW50cyB0byB0aGUgdG9wbW9zdCBlbGVtZW50IG9uIHRoZSBwYXBlclxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogUGFwZXIuYm90dG9tXG4gICAgIFsgcHJvcGVydHkgXVxuICAgICAqKlxuICAgICAqIFBvaW50cyB0byB0aGUgYm90dG9tIGVsZW1lbnQgb24gdGhlIHBhcGVyXG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8udG9wID0gcGFwZXJwcm90by5ib3R0b20gPSBudWxsO1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5yYXBoYWVsXG4gICAgIFsgcHJvcGVydHkgXVxuICAgICAqKlxuICAgICAqIFBvaW50cyB0byB0aGUgQFJhcGhhZWwgb2JqZWN0L2Z1bmN0aW9uXG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8ucmFwaGFlbCA9IFI7XG4gICAgdmFyIGdldE9mZnNldCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIHZhciBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgZG9jID0gZWxlbS5vd25lckRvY3VtZW50LFxuICAgICAgICAgICAgYm9keSA9IGRvYy5ib2R5LFxuICAgICAgICAgICAgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQsXG4gICAgICAgICAgICBjbGllbnRUb3AgPSBkb2NFbGVtLmNsaWVudFRvcCB8fCBib2R5LmNsaWVudFRvcCB8fCAwLCBjbGllbnRMZWZ0ID0gZG9jRWxlbS5jbGllbnRMZWZ0IHx8IGJvZHkuY2xpZW50TGVmdCB8fCAwLFxuICAgICAgICAgICAgdG9wICA9IGJveC50b3AgICsgKGcud2luLnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wIHx8IGJvZHkuc2Nyb2xsVG9wICkgLSBjbGllbnRUb3AsXG4gICAgICAgICAgICBsZWZ0ID0gYm94LmxlZnQgKyAoZy53aW4ucGFnZVhPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxMZWZ0IHx8IGJvZHkuc2Nyb2xsTGVmdCkgLSBjbGllbnRMZWZ0O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeTogdG9wLFxuICAgICAgICAgICAgeDogbGVmdFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEVsZW1lbnRCeVBvaW50XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIHlvdSB0b3Btb3N0IGVsZW1lbnQgdW5kZXIgZ2l2ZW4gcG9pbnQuXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3RcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgZnJvbSB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSB3aW5kb3dcbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBmcm9tIHRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIHdpbmRvd1xuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIuZ2V0RWxlbWVudEJ5UG9pbnQobW91c2VYLCBtb3VzZVkpLmF0dHIoe3N0cm9rZTogXCIjZjAwXCJ9KTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRFbGVtZW50QnlQb2ludCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBwYXBlciA9IHRoaXMsXG4gICAgICAgICAgICBzdmcgPSBwYXBlci5jYW52YXMsXG4gICAgICAgICAgICB0YXJnZXQgPSBnLmRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICAgICAgICBpZiAoZy53aW4ub3BlcmEgJiYgdGFyZ2V0LnRhZ05hbWUgPT0gXCJzdmdcIikge1xuICAgICAgICAgICAgdmFyIHNvID0gZ2V0T2Zmc2V0KHN2ZyksXG4gICAgICAgICAgICAgICAgc3IgPSBzdmcuY3JlYXRlU1ZHUmVjdCgpO1xuICAgICAgICAgICAgc3IueCA9IHggLSBzby54O1xuICAgICAgICAgICAgc3IueSA9IHkgLSBzby55O1xuICAgICAgICAgICAgc3Iud2lkdGggPSBzci5oZWlnaHQgPSAxO1xuICAgICAgICAgICAgdmFyIGhpdHMgPSBzdmcuZ2V0SW50ZXJzZWN0aW9uTGlzdChzciwgbnVsbCk7XG4gICAgICAgICAgICBpZiAoaGl0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBoaXRzW2hpdHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQgIT0gc3ZnLnBhcmVudE5vZGUgJiYgIXRhcmdldC5yYXBoYWVsKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQgPT0gcGFwZXIuY2FudmFzLnBhcmVudE5vZGUgJiYgKHRhcmdldCA9IHN2Zyk7XG4gICAgICAgIHRhcmdldCA9IHRhcmdldCAmJiB0YXJnZXQucmFwaGFlbCA/IHBhcGVyLmdldEJ5SWQodGFyZ2V0LnJhcGhhZWxpZCkgOiBudWxsO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUGFwZXIuZ2V0RWxlbWVudHNCeUJCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybnMgc2V0IG9mIGVsZW1lbnRzIHRoYXQgaGF2ZSBhbiBpbnRlcnNlY3RpbmcgYm91bmRpbmcgYm94XG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGJib3ggKG9iamVjdCkgYmJveCB0byBjaGVjayB3aXRoXG4gICAgID0gKG9iamVjdCkgQFNldFxuICAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRFbGVtZW50c0J5QkJveCA9IGZ1bmN0aW9uIChiYm94KSB7XG4gICAgICAgIHZhciBzZXQgPSB0aGlzLnNldCgpO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoUi5pc0JCb3hJbnRlcnNlY3QoZWwuZ2V0QkJveCgpLCBiYm94KSkge1xuICAgICAgICAgICAgICAgIHNldC5wdXNoKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfTtcblxuICAgIC8qXFxcbiAgICAgKiBQYXBlci5nZXRCeUlkXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIHlvdSBlbGVtZW50IGJ5IGl0cyBpbnRlcm5hbCBJRC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gaWQgKG51bWJlcikgaWRcbiAgICAgPSAob2JqZWN0KSBSYXBoYcOrbCBlbGVtZW50IG9iamVjdFxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmdldEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdmFyIGJvdCA9IHRoaXMuYm90dG9tO1xuICAgICAgICB3aGlsZSAoYm90KSB7XG4gICAgICAgICAgICBpZiAoYm90LmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvdCA9IGJvdC5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmZvckVhY2hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEV4ZWN1dGVzIGdpdmVuIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQgb24gdGhlIHBhcGVyXG4gICAgICpcbiAgICAgKiBJZiBjYWxsYmFjayBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAgaXQgd2lsbCBzdG9wIGxvb3AgcnVubmluZy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSBmdW5jdGlvbiB0byBydW5cbiAgICAgLSB0aGlzQXJnIChvYmplY3QpIGNvbnRleHQgb2JqZWN0IGZvciB0aGUgY2FsbGJhY2tcbiAgICAgPSAob2JqZWN0KSBQYXBlciBvYmplY3RcbiAgICAgPiBVc2FnZVxuICAgICB8IHBhcGVyLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgIHwgICAgIGVsLmF0dHIoeyBzdHJva2U6IFwiYmx1ZVwiIH0pO1xuICAgICB8IH0pO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIGJvdCA9IHRoaXMuYm90dG9tO1xuICAgICAgICB3aGlsZSAoYm90KSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBib3QpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm90ID0gYm90Lm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuZ2V0RWxlbWVudHNCeVBvaW50XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIHNldCBvZiBlbGVtZW50cyB0aGF0IGhhdmUgY29tbW9uIHBvaW50IGluc2lkZVxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgPSAob2JqZWN0KSBAU2V0XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0RWxlbWVudHNCeVBvaW50ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdmFyIHNldCA9IHRoaXMuc2V0KCk7XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIGlmIChlbC5pc1BvaW50SW5zaWRlKHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgc2V0LnB1c2goZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNldDtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHhfeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCArIFMgKyB0aGlzLnk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHhfeV93X2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKyBTICsgdGhpcy55ICsgUyArIHRoaXMud2lkdGggKyBcIiBcXHhkNyBcIiArIHRoaXMuaGVpZ2h0O1xuICAgIH1cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5pc1BvaW50SW5zaWRlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgZ2l2ZW4gcG9pbnQgaXMgaW5zaWRlIHRoaXMgZWxlbWVudOKAmXMgc2hhcGVcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCBpZiBwb2ludCBpbnNpZGUgdGhlIHNoYXBlXG4gICAgXFwqL1xuICAgIGVscHJvdG8uaXNQb2ludEluc2lkZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBycCA9IHRoaXMucmVhbFBhdGggPSBnZXRQYXRoW3RoaXMudHlwZV0odGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmF0dHIoJ3RyYW5zZm9ybScpICYmIHRoaXMuYXR0cigndHJhbnNmb3JtJykubGVuZ3RoKSB7XG4gICAgICAgICAgICBycCA9IFIudHJhbnNmb3JtUGF0aChycCwgdGhpcy5hdHRyKCd0cmFuc2Zvcm0nKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFIuaXNQb2ludEluc2lkZVBhdGgocnAsIHgsIHkpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0QkJveFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIGJvdW5kaW5nIGJveCBmb3IgYSBnaXZlbiBlbGVtZW50XG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGlzV2l0aG91dFRyYW5zZm9ybSAoYm9vbGVhbikgZmxhZywgYHRydWVgIGlmIHlvdSB3YW50IHRvIGhhdmUgYm91bmRpbmcgYm94IGJlZm9yZSB0cmFuc2Zvcm1hdGlvbnMuIERlZmF1bHQgaXMgYGZhbHNlYC5cbiAgICAgPSAob2JqZWN0KSBCb3VuZGluZyBib3ggb2JqZWN0OlxuICAgICBvIHtcbiAgICAgbyAgICAgeDogKG51bWJlcikgdG9wIGxlZnQgY29ybmVyIHhcbiAgICAgbyAgICAgeTogKG51bWJlcikgdG9wIGxlZnQgY29ybmVyIHlcbiAgICAgbyAgICAgeDI6IChudW1iZXIpIGJvdHRvbSByaWdodCBjb3JuZXIgeFxuICAgICBvICAgICB5MjogKG51bWJlcikgYm90dG9tIHJpZ2h0IGNvcm5lciB5XG4gICAgIG8gICAgIHdpZHRoOiAobnVtYmVyKSB3aWR0aFxuICAgICBvICAgICBoZWlnaHQ6IChudW1iZXIpIGhlaWdodFxuICAgICBvIH1cbiAgICBcXCovXG4gICAgZWxwcm90by5nZXRCQm94ID0gZnVuY3Rpb24gKGlzV2l0aG91dFRyYW5zZm9ybSkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF8gPSB0aGlzLl87XG4gICAgICAgIGlmIChpc1dpdGhvdXRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmIChfLmRpcnR5IHx8ICFfLmJib3h3dCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVhbFBhdGggPSBnZXRQYXRoW3RoaXMudHlwZV0odGhpcyk7XG4gICAgICAgICAgICAgICAgXy5iYm94d3QgPSBwYXRoRGltZW5zaW9ucyh0aGlzLnJlYWxQYXRoKTtcbiAgICAgICAgICAgICAgICBfLmJib3h3dC50b1N0cmluZyA9IHhfeV93X2g7XG4gICAgICAgICAgICAgICAgXy5kaXJ0eSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXy5iYm94d3Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF8uZGlydHkgfHwgXy5kaXJ0eVQgfHwgIV8uYmJveCkge1xuICAgICAgICAgICAgaWYgKF8uZGlydHkgfHwgIXRoaXMucmVhbFBhdGgpIHtcbiAgICAgICAgICAgICAgICBfLmJib3h3dCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFsUGF0aCA9IGdldFBhdGhbdGhpcy50eXBlXSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF8uYmJveCA9IHBhdGhEaW1lbnNpb25zKG1hcFBhdGgodGhpcy5yZWFsUGF0aCwgdGhpcy5tYXRyaXgpKTtcbiAgICAgICAgICAgIF8uYmJveC50b1N0cmluZyA9IHhfeV93X2g7XG4gICAgICAgICAgICBfLmRpcnR5ID0gXy5kaXJ0eVQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfLmJib3g7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5jbG9uZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgY2xvbmUgb2YgYSBnaXZlbiBlbGVtZW50XG4gICAgICoqXG4gICAgXFwqL1xuICAgIGVscHJvdG8uY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXQgPSB0aGlzLnBhcGVyW3RoaXMudHlwZV0oKS5hdHRyKHRoaXMuYXR0cigpKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5nbG93XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm4gc2V0IG9mIGVsZW1lbnRzIHRoYXQgY3JlYXRlIGdsb3ctbGlrZSBlZmZlY3QgYXJvdW5kIGdpdmVuIGVsZW1lbnQuIFNlZSBAUGFwZXIuc2V0LlxuICAgICAqXG4gICAgICogTm90ZTogR2xvdyBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBlbGVtZW50LiBJZiB5b3UgY2hhbmdlIGVsZW1lbnQgYXR0cmlidXRlcyBpdCB3b27igJl0IGFkanVzdCBpdHNlbGYuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGdsb3cgKG9iamVjdCkgI29wdGlvbmFsIHBhcmFtZXRlcnMgb2JqZWN0IHdpdGggYWxsIHByb3BlcnRpZXMgb3B0aW9uYWw6XG4gICAgIG8ge1xuICAgICBvICAgICB3aWR0aCAobnVtYmVyKSBzaXplIG9mIHRoZSBnbG93LCBkZWZhdWx0IGlzIGAxMGBcbiAgICAgbyAgICAgZmlsbCAoYm9vbGVhbikgd2lsbCBpdCBiZSBmaWxsZWQsIGRlZmF1bHQgaXMgYGZhbHNlYFxuICAgICBvICAgICBvcGFjaXR5IChudW1iZXIpIG9wYWNpdHksIGRlZmF1bHQgaXMgYDAuNWBcbiAgICAgbyAgICAgb2Zmc2V0eCAobnVtYmVyKSBob3Jpem9udGFsIG9mZnNldCwgZGVmYXVsdCBpcyBgMGBcbiAgICAgbyAgICAgb2Zmc2V0eSAobnVtYmVyKSB2ZXJ0aWNhbCBvZmZzZXQsIGRlZmF1bHQgaXMgYDBgXG4gICAgIG8gICAgIGNvbG9yIChzdHJpbmcpIGdsb3cgY29sb3VyLCBkZWZhdWx0IGlzIGBibGFja2BcbiAgICAgbyB9XG4gICAgID0gKG9iamVjdCkgQFBhcGVyLnNldCBvZiBlbGVtZW50cyB0aGF0IHJlcHJlc2VudHMgZ2xvd1xuICAgIFxcKi9cbiAgICBlbHByb3RvLmdsb3cgPSBmdW5jdGlvbiAoZ2xvdykge1xuICAgICAgICBpZiAodGhpcy50eXBlID09IFwidGV4dFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBnbG93ID0gZ2xvdyB8fCB7fTtcbiAgICAgICAgdmFyIHMgPSB7XG4gICAgICAgICAgICB3aWR0aDogKGdsb3cud2lkdGggfHwgMTApICsgKCt0aGlzLmF0dHIoXCJzdHJva2Utd2lkdGhcIikgfHwgMSksXG4gICAgICAgICAgICBmaWxsOiBnbG93LmZpbGwgfHwgZmFsc2UsXG4gICAgICAgICAgICBvcGFjaXR5OiBnbG93Lm9wYWNpdHkgPT0gbnVsbCA/IC41IDogZ2xvdy5vcGFjaXR5LFxuICAgICAgICAgICAgb2Zmc2V0eDogZ2xvdy5vZmZzZXR4IHx8IDAsXG4gICAgICAgICAgICBvZmZzZXR5OiBnbG93Lm9mZnNldHkgfHwgMCxcbiAgICAgICAgICAgIGNvbG9yOiBnbG93LmNvbG9yIHx8IFwiIzAwMFwiXG4gICAgICAgIH0sXG4gICAgICAgICAgICBjID0gcy53aWR0aCAvIDIsXG4gICAgICAgICAgICByID0gdGhpcy5wYXBlcixcbiAgICAgICAgICAgIG91dCA9IHIuc2V0KCksXG4gICAgICAgICAgICBwYXRoID0gdGhpcy5yZWFsUGF0aCB8fCBnZXRQYXRoW3RoaXMudHlwZV0odGhpcyk7XG4gICAgICAgIHBhdGggPSB0aGlzLm1hdHJpeCA/IG1hcFBhdGgocGF0aCwgdGhpcy5tYXRyaXgpIDogcGF0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBvdXQucHVzaChyLnBhdGgocGF0aCkuYXR0cih7XG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBzLmNvbG9yLFxuICAgICAgICAgICAgICAgIGZpbGw6IHMuZmlsbCA/IHMuY29sb3IgOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICBcInN0cm9rZS1saW5lam9pblwiOiBcInJvdW5kXCIsXG4gICAgICAgICAgICAgICAgXCJzdHJva2UtbGluZWNhcFwiOiBcInJvdW5kXCIsXG4gICAgICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogKyhzLndpZHRoIC8gYyAqIGkpLnRvRml4ZWQoMyksXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogKyhzLm9wYWNpdHkgLyBjKS50b0ZpeGVkKDMpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dC5pbnNlcnRCZWZvcmUodGhpcykudHJhbnNsYXRlKHMub2Zmc2V0eCwgcy5vZmZzZXR5KTtcbiAgICB9O1xuICAgIHZhciBjdXJ2ZXNsZW5ndGhzID0ge30sXG4gICAgZ2V0UG9pbnRBdFNlZ21lbnRMZW5ndGggPSBmdW5jdGlvbiAocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIGxlbmd0aCkge1xuICAgICAgICBpZiAobGVuZ3RoID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBiZXpsZW4ocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFIuZmluZERvdHNBdFNlZ21lbnQocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIGdldFRhdExlbihwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgbGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldExlbmd0aEZhY3RvcnkgPSBmdW5jdGlvbiAoaXN0b3RhbCwgc3VicGF0aCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGgsIGxlbmd0aCwgb25seXN0YXJ0KSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aDJjdXJ2ZShwYXRoKTtcbiAgICAgICAgICAgIHZhciB4LCB5LCBwLCBsLCBzcCA9IFwiXCIsIHN1YnBhdGhzID0ge30sIHBvaW50LFxuICAgICAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwYXRoLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwID0gcGF0aFtpXTtcbiAgICAgICAgICAgICAgICBpZiAocFswXSA9PSBcIk1cIikge1xuICAgICAgICAgICAgICAgICAgICB4ID0gK3BbMV07XG4gICAgICAgICAgICAgICAgICAgIHkgPSArcFsyXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsID0gZ2V0UG9pbnRBdFNlZ21lbnRMZW5ndGgoeCwgeSwgcFsxXSwgcFsyXSwgcFszXSwgcFs0XSwgcFs1XSwgcFs2XSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZW4gKyBsID4gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VicGF0aCAmJiAhc3VicGF0aHMuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludCA9IGdldFBvaW50QXRTZWdtZW50TGVuZ3RoKHgsIHksIHBbMV0sIHBbMl0sIHBbM10sIHBbNF0sIHBbNV0sIHBbNl0sIGxlbmd0aCAtIGxlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3AgKz0gW1wiQ1wiICsgcG9pbnQuc3RhcnQueCwgcG9pbnQuc3RhcnQueSwgcG9pbnQubS54LCBwb2ludC5tLnksIHBvaW50LngsIHBvaW50LnldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmx5c3RhcnQpIHtyZXR1cm4gc3A7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhdGhzLnN0YXJ0ID0gc3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3AgPSBbXCJNXCIgKyBwb2ludC54LCBwb2ludC55ICsgXCJDXCIgKyBwb2ludC5uLngsIHBvaW50Lm4ueSwgcG9pbnQuZW5kLngsIHBvaW50LmVuZC55LCBwWzVdLCBwWzZdXS5qb2luKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuICs9IGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9ICtwWzVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSArcFs2XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXN0b3RhbCAmJiAhc3VicGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gZ2V0UG9pbnRBdFNlZ21lbnRMZW5ndGgoeCwgeSwgcFsxXSwgcFsyXSwgcFszXSwgcFs0XSwgcFs1XSwgcFs2XSwgbGVuZ3RoIC0gbGVuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge3g6IHBvaW50LngsIHk6IHBvaW50LnksIGFscGhhOiBwb2ludC5hbHBoYX07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGVuICs9IGw7XG4gICAgICAgICAgICAgICAgICAgIHggPSArcFs1XTtcbiAgICAgICAgICAgICAgICAgICAgeSA9ICtwWzZdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzcCArPSBwLnNoaWZ0KCkgKyBwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VicGF0aHMuZW5kID0gc3A7XG4gICAgICAgICAgICBwb2ludCA9IGlzdG90YWwgPyBsZW4gOiBzdWJwYXRoID8gc3VicGF0aHMgOiBSLmZpbmREb3RzQXRTZWdtZW50KHgsIHksIHBbMF0sIHBbMV0sIHBbMl0sIHBbM10sIHBbNF0sIHBbNV0sIDEpO1xuICAgICAgICAgICAgcG9pbnQuYWxwaGEgJiYgKHBvaW50ID0ge3g6IHBvaW50LngsIHk6IHBvaW50LnksIGFscGhhOiBwb2ludC5hbHBoYX0pO1xuICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIGdldFRvdGFsTGVuZ3RoID0gZ2V0TGVuZ3RoRmFjdG9yeSgxKSxcbiAgICAgICAgZ2V0UG9pbnRBdExlbmd0aCA9IGdldExlbmd0aEZhY3RvcnkoKSxcbiAgICAgICAgZ2V0U3VicGF0aHNBdExlbmd0aCA9IGdldExlbmd0aEZhY3RvcnkoMCwgMSk7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0VG90YWxMZW5ndGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybnMgbGVuZ3RoIG9mIHRoZSBnaXZlbiBwYXRoIGluIHBpeGVscy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGF0aCAoc3RyaW5nKSBTVkcgcGF0aCBzdHJpbmcuXG4gICAgICoqXG4gICAgID0gKG51bWJlcikgbGVuZ3RoLlxuICAgIFxcKi9cbiAgICBSLmdldFRvdGFsTGVuZ3RoID0gZ2V0VG90YWxMZW5ndGg7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0UG9pbnRBdExlbmd0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIGNvb3JkaW5hdGVzIG9mIHRoZSBwb2ludCBsb2NhdGVkIGF0IHRoZSBnaXZlbiBsZW5ndGggb24gdGhlIGdpdmVuIHBhdGguXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHBhdGggKHN0cmluZykgU1ZHIHBhdGggc3RyaW5nXG4gICAgIC0gbGVuZ3RoIChudW1iZXIpXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBvaW50OlxuICAgICBvIHtcbiAgICAgbyAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlXG4gICAgIG8gICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZVxuICAgICBvICAgICBhbHBoYTogKG51bWJlcikgYW5nbGUgb2YgZGVyaXZhdGl2ZVxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5nZXRQb2ludEF0TGVuZ3RoID0gZ2V0UG9pbnRBdExlbmd0aDtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5nZXRTdWJwYXRoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm4gc3VicGF0aCBvZiBhIGdpdmVuIHBhdGggZnJvbSBnaXZlbiBsZW5ndGggdG8gZ2l2ZW4gbGVuZ3RoLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBwYXRoIChzdHJpbmcpIFNWRyBwYXRoIHN0cmluZ1xuICAgICAtIGZyb20gKG51bWJlcikgcG9zaXRpb24gb2YgdGhlIHN0YXJ0IG9mIHRoZSBzZWdtZW50XG4gICAgIC0gdG8gKG51bWJlcikgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiB0aGUgc2VnbWVudFxuICAgICAqKlxuICAgICA9IChzdHJpbmcpIHBhdGhzdHJpbmcgZm9yIHRoZSBzZWdtZW50XG4gICAgXFwqL1xuICAgIFIuZ2V0U3VicGF0aCA9IGZ1bmN0aW9uIChwYXRoLCBmcm9tLCB0bykge1xuICAgICAgICBpZiAodGhpcy5nZXRUb3RhbExlbmd0aChwYXRoKSAtIHRvIDwgMWUtNikge1xuICAgICAgICAgICAgcmV0dXJuIGdldFN1YnBhdGhzQXRMZW5ndGgocGF0aCwgZnJvbSkuZW5kO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhID0gZ2V0U3VicGF0aHNBdExlbmd0aChwYXRoLCB0bywgMSk7XG4gICAgICAgIHJldHVybiBmcm9tID8gZ2V0U3VicGF0aHNBdExlbmd0aChhLCBmcm9tKS5lbmQgOiBhO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0VG90YWxMZW5ndGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybnMgbGVuZ3RoIG9mIHRoZSBwYXRoIGluIHBpeGVscy4gT25seSB3b3JrcyBmb3IgZWxlbWVudCBvZiDigJxwYXRo4oCdIHR5cGUuXG4gICAgID0gKG51bWJlcikgbGVuZ3RoLlxuICAgIFxcKi9cbiAgICBlbHByb3RvLmdldFRvdGFsTGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXRUb3RhbExlbmd0aChwYXRoKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmdldFBvaW50QXRMZW5ndGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybiBjb29yZGluYXRlcyBvZiB0aGUgcG9pbnQgbG9jYXRlZCBhdCB0aGUgZ2l2ZW4gbGVuZ3RoIG9uIHRoZSBnaXZlbiBwYXRoLiBPbmx5IHdvcmtzIGZvciBlbGVtZW50IG9mIOKAnHBhdGjigJ0gdHlwZS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gbGVuZ3RoIChudW1iZXIpXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBvaW50OlxuICAgICBvIHtcbiAgICAgbyAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlXG4gICAgIG8gICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZVxuICAgICBvICAgICBhbHBoYTogKG51bWJlcikgYW5nbGUgb2YgZGVyaXZhdGl2ZVxuICAgICBvIH1cbiAgICBcXCovXG4gICAgZWxwcm90by5nZXRQb2ludEF0TGVuZ3RoID0gZnVuY3Rpb24gKGxlbmd0aCkge1xuICAgICAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXRQb2ludEF0TGVuZ3RoKHBhdGgsIGxlbmd0aCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5nZXRQYXRoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIHBhdGggb2YgdGhlIGVsZW1lbnQuIE9ubHkgd29ya3MgZm9yIGVsZW1lbnRzIG9mIOKAnHBhdGjigJ0gdHlwZSBhbmQgc2ltcGxlIGVsZW1lbnRzIGxpa2UgY2lyY2xlLlxuICAgICA9IChvYmplY3QpIHBhdGhcbiAgICAgKipcbiAgICBcXCovXG4gICAgZWxwcm90by5nZXRQYXRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCxcbiAgICAgICAgICAgIGdldFBhdGggPSBSLl9nZXRQYXRoW3RoaXMudHlwZV07XG5cbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcInRleHRcIiB8fCB0aGlzLnR5cGUgPT0gXCJzZXRcIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdldFBhdGgpIHtcbiAgICAgICAgICAgIHBhdGggPSBnZXRQYXRoKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5nZXRTdWJwYXRoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm4gc3VicGF0aCBvZiBhIGdpdmVuIGVsZW1lbnQgZnJvbSBnaXZlbiBsZW5ndGggdG8gZ2l2ZW4gbGVuZ3RoLiBPbmx5IHdvcmtzIGZvciBlbGVtZW50IG9mIOKAnHBhdGjigJ0gdHlwZS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZnJvbSAobnVtYmVyKSBwb3NpdGlvbiBvZiB0aGUgc3RhcnQgb2YgdGhlIHNlZ21lbnRcbiAgICAgLSB0byAobnVtYmVyKSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoZSBzZWdtZW50XG4gICAgICoqXG4gICAgID0gKHN0cmluZykgcGF0aHN0cmluZyBmb3IgdGhlIHNlZ21lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5nZXRTdWJwYXRoID0gZnVuY3Rpb24gKGZyb20sIHRvKSB7XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoKCk7XG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFIuZ2V0U3VicGF0aChwYXRoLCBmcm9tLCB0byk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5lYXNpbmdfZm9ybXVsYXNcbiAgICAgWyBwcm9wZXJ0eSBdXG4gICAgICoqXG4gICAgICogT2JqZWN0IHRoYXQgY29udGFpbnMgZWFzaW5nIGZvcm11bGFzIGZvciBhbmltYXRpb24uIFlvdSBjb3VsZCBleHRlbmQgaXQgd2l0aCB5b3VyIG93bi4gQnkgZGVmYXVsdCBpdCBoYXMgZm9sbG93aW5nIGxpc3Qgb2YgZWFzaW5nOlxuICAgICAjIDx1bD5cbiAgICAgIyAgICAgPGxpPuKAnGxpbmVhcuKAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJwmbHQ74oCdIG9yIOKAnGVhc2VJbuKAnSBvciDigJxlYXNlLWlu4oCdPC9saT5cbiAgICAgIyAgICAgPGxpPuKAnD7igJ0gb3Ig4oCcZWFzZU91dOKAnSBvciDigJxlYXNlLW91dOKAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJwmbHQ7PuKAnSBvciDigJxlYXNlSW5PdXTigJ0gb3Ig4oCcZWFzZS1pbi1vdXTigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcYmFja0lu4oCdIG9yIOKAnGJhY2staW7igJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcYmFja091dOKAnSBvciDigJxiYWNrLW91dOKAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJxlbGFzdGlj4oCdPC9saT5cbiAgICAgIyAgICAgPGxpPuKAnGJvdW5jZeKAnTwvbGk+XG4gICAgICMgPC91bD5cbiAgICAgIyA8cD5TZWUgYWxzbyA8YSBocmVmPVwiaHR0cDovL3JhcGhhZWxqcy5jb20vZWFzaW5nLmh0bWxcIj5FYXNpbmcgZGVtbzwvYT4uPC9wPlxuICAgIFxcKi9cbiAgICB2YXIgZWYgPSBSLmVhc2luZ19mb3JtdWxhcyA9IHtcbiAgICAgICAgbGluZWFyOiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0sXG4gICAgICAgIFwiPFwiOiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgcmV0dXJuIHBvdyhuLCAxLjcpO1xuICAgICAgICB9LFxuICAgICAgICBcIj5cIjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHJldHVybiBwb3cobiwgLjQ4KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCI8PlwiOiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgdmFyIHEgPSAuNDggLSBuIC8gMS4wNCxcbiAgICAgICAgICAgICAgICBRID0gbWF0aC5zcXJ0KC4xNzM0ICsgcSAqIHEpLFxuICAgICAgICAgICAgICAgIHggPSBRIC0gcSxcbiAgICAgICAgICAgICAgICBYID0gcG93KGFicyh4KSwgMSAvIDMpICogKHggPCAwID8gLTEgOiAxKSxcbiAgICAgICAgICAgICAgICB5ID0gLVEgLSBxLFxuICAgICAgICAgICAgICAgIFkgPSBwb3coYWJzKHkpLCAxIC8gMykgKiAoeSA8IDAgPyAtMSA6IDEpLFxuICAgICAgICAgICAgICAgIHQgPSBYICsgWSArIC41O1xuICAgICAgICAgICAgcmV0dXJuICgxIC0gdCkgKiAzICogdCAqIHQgKyB0ICogdCAqIHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGJhY2tJbjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgICAgICAgIHJldHVybiBuICogbiAqICgocyArIDEpICogbiAtIHMpO1xuICAgICAgICB9LFxuICAgICAgICBiYWNrT3V0OiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgbiA9IG4gLSAxO1xuICAgICAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICAgICAgcmV0dXJuIG4gKiBuICogKChzICsgMSkgKiBuICsgcykgKyAxO1xuICAgICAgICB9LFxuICAgICAgICBlbGFzdGljOiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgaWYgKG4gPT0gISFuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG93KDIsIC0xMCAqIG4pICogbWF0aC5zaW4oKG4gLSAuMDc1KSAqICgyICogUEkpIC8gLjMpICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgYm91bmNlOiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgdmFyIHMgPSA3LjU2MjUsXG4gICAgICAgICAgICAgICAgcCA9IDIuNzUsXG4gICAgICAgICAgICAgICAgbDtcbiAgICAgICAgICAgIGlmIChuIDwgKDEgLyBwKSkge1xuICAgICAgICAgICAgICAgIGwgPSBzICogbiAqIG47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChuIDwgKDIgLyBwKSkge1xuICAgICAgICAgICAgICAgICAgICBuIC09ICgxLjUgLyBwKTtcbiAgICAgICAgICAgICAgICAgICAgbCA9IHMgKiBuICogbiArIC43NTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobiA8ICgyLjUgLyBwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbiAtPSAoMi4yNSAvIHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHMgKiBuICogbiArIC45Mzc1O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbiAtPSAoMi42MjUgLyBwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBzICogbiAqIG4gKyAuOTg0Mzc1O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGVmLmVhc2VJbiA9IGVmW1wiZWFzZS1pblwiXSA9IGVmW1wiPFwiXTtcbiAgICBlZi5lYXNlT3V0ID0gZWZbXCJlYXNlLW91dFwiXSA9IGVmW1wiPlwiXTtcbiAgICBlZi5lYXNlSW5PdXQgPSBlZltcImVhc2UtaW4tb3V0XCJdID0gZWZbXCI8PlwiXTtcbiAgICBlZltcImJhY2staW5cIl0gPSBlZi5iYWNrSW47XG4gICAgZWZbXCJiYWNrLW91dFwiXSA9IGVmLmJhY2tPdXQ7XG5cbiAgICB2YXIgYW5pbWF0aW9uRWxlbWVudHMgPSBbXSxcbiAgICAgICAgcmVxdWVzdEFuaW1GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgIGFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBOb3cgPSArbmV3IERhdGUsXG4gICAgICAgICAgICAgICAgbCA9IDA7XG4gICAgICAgICAgICBmb3IgKDsgbCA8IGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBhbmltYXRpb25FbGVtZW50c1tsXTtcbiAgICAgICAgICAgICAgICBpZiAoZS5lbC5yZW1vdmVkIHx8IGUucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGltZSA9IE5vdyAtIGUuc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIG1zID0gZS5tcyxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gZS5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBlLmZyb20sXG4gICAgICAgICAgICAgICAgICAgIGRpZmYgPSBlLmRpZmYsXG4gICAgICAgICAgICAgICAgICAgIHRvID0gZS50byxcbiAgICAgICAgICAgICAgICAgICAgdCA9IGUudCxcbiAgICAgICAgICAgICAgICAgICAgdGhhdCA9IGUuZWwsXG4gICAgICAgICAgICAgICAgICAgIHNldCA9IHt9LFxuICAgICAgICAgICAgICAgICAgICBub3csXG4gICAgICAgICAgICAgICAgICAgIGluaXQgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAga2V5O1xuICAgICAgICAgICAgICAgIGlmIChlLmluaXRzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IChlLmluaXRzdGF0dXMgKiBlLmFuaW0udG9wIC0gZS5wcmV2KSAvIChlLnBlcmNlbnQgLSBlLnByZXYpICogbXM7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RhdHVzID0gZS5pbml0c3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZS5pbml0c3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3AgJiYgYW5pbWF0aW9uRWxlbWVudHMuc3BsaWNlKGwtLSwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdGF0dXMgPSAoZS5wcmV2ICsgKGUucGVyY2VudCAtIGUucHJldikgKiAodGltZSAvIG1zKSkgLyBlLmFuaW0udG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGltZSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aW1lIDwgbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGVhc2luZyh0aW1lIC8gbXMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhdHRyIGluIGZyb20pIGlmIChmcm9tW2hhc10oYXR0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXZhaWxhYmxlQW5pbUF0dHJzW2F0dHJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBudTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gK2Zyb21bYXR0cl0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb2xvdXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gXCJyZ2IoXCIgKyBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHRvMjU1KHJvdW5kKGZyb21bYXR0cl0uciArIHBvcyAqIG1zICogZGlmZlthdHRyXS5yKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHRvMjU1KHJvdW5kKGZyb21bYXR0cl0uZyArIHBvcyAqIG1zICogZGlmZlthdHRyXS5nKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHRvMjU1KHJvdW5kKGZyb21bYXR0cl0uYiArIHBvcyAqIG1zICogZGlmZlthdHRyXS5iKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiLFwiKSArIFwiKVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGF0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZnJvbVthdHRyXS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dbaV0gPSBbZnJvbVthdHRyXVtpXVswXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMSwgamogPSBmcm9tW2F0dHJdW2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dbaV1bal0gPSArZnJvbVthdHRyXVtpXVtqXSArIHBvcyAqIG1zICogZGlmZlthdHRyXVtpXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd1tpXSA9IG5vd1tpXS5qb2luKFMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IG5vdy5qb2luKFMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNmb3JtXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmW2F0dHJdLnJlYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBmcm9tW2F0dHJdLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dbaV0gPSBbZnJvbVthdHRyXVtpXVswXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMSwgamogPSBmcm9tW2F0dHJdW2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldW2pdID0gZnJvbVthdHRyXVtpXVtqXSArIHBvcyAqIG1zICogZGlmZlthdHRyXVtpXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0ID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gK2Zyb21bYXR0cl1baV0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93ID0gW1tcInJcIiwgZ2V0KDIpLCAwLCAwXSwgW1widFwiLCBnZXQoMyksIGdldCg0KV0sIFtcInNcIiwgZ2V0KDApLCBnZXQoMSksIDAsIDBdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFtbXCJtXCIsIGdldCgwKSwgZ2V0KDEpLCBnZXQoMiksIGdldCgzKSwgZ2V0KDQpLCBnZXQoNSldXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3N2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyID09IFwiY2xpcC1yZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gK2Zyb21bYXR0cl1baV0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyb20yID0gW11bY29uY2F0XShmcm9tW2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0aGF0LnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbYXR0cl0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dbaV0gPSArZnJvbTJbaV0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRbYXR0cl0gPSBub3c7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hdHRyKHNldCk7XG4gICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoaWQsIHRoYXQsIGFuaW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZShcInJhcGhhZWwuYW5pbS5mcmFtZS5cIiArIGlkLCB0aGF0LCBhbmltKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KSh0aGF0LmlkLCB0aGF0LCBlLmFuaW0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihmLCBlbCwgYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIgKyBlbC5pZCwgZWwsIGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZShcInJhcGhhZWwuYW5pbS5maW5pc2guXCIgKyBlbC5pZCwgZWwsIGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuaXMoZiwgXCJmdW5jdGlvblwiKSAmJiBmLmNhbGwoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKGUuY2FsbGJhY2ssIHRoYXQsIGUuYW5pbSk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXR0cih0byk7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkVsZW1lbnRzLnNwbGljZShsLS0sIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5yZXBlYXQgPiAxICYmICFlLm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIHRvKSBpZiAodG9baGFzXShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFtrZXldID0gZS50b3RhbE9yaWdpbltrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZS5lbC5hdHRyKGluaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuQW5pbWF0aW9uKGUuYW5pbSwgZS5lbCwgZS5hbmltLnBlcmNlbnRzWzBdLCBudWxsLCBlLnRvdGFsT3JpZ2luLCBlLnJlcGVhdCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLm5leHQgJiYgIWUuc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuQW5pbWF0aW9uKGUuYW5pbSwgZS5lbCwgZS5uZXh0LCBudWxsLCBlLnRvdGFsT3JpZ2luLCBlLnJlcGVhdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5sZW5ndGggJiYgcmVxdWVzdEFuaW1GcmFtZShhbmltYXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICB1cHRvMjU1ID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3IgPiAyNTUgPyAyNTUgOiBjb2xvciA8IDAgPyAwIDogY29sb3I7XG4gICAgICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuYW5pbWF0ZVdpdGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFjdHMgc2ltaWxhciB0byBARWxlbWVudC5hbmltYXRlLCBidXQgZW5zdXJlIHRoYXQgZ2l2ZW4gYW5pbWF0aW9uIHJ1bnMgaW4gc3luYyB3aXRoIGFub3RoZXIgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZWwgKG9iamVjdCkgZWxlbWVudCB0byBzeW5jIHdpdGhcbiAgICAgLSBhbmltIChvYmplY3QpIGFuaW1hdGlvbiB0byBzeW5jIHdpdGhcbiAgICAgLSBwYXJhbXMgKG9iamVjdCkgI29wdGlvbmFsIGZpbmFsIGF0dHJpYnV0ZXMgZm9yIHRoZSBlbGVtZW50LCBzZWUgYWxzbyBARWxlbWVudC5hdHRyXG4gICAgIC0gbXMgKG51bWJlcikgI29wdGlvbmFsIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZm9yIGFuaW1hdGlvbiB0byBydW5cbiAgICAgLSBlYXNpbmcgKHN0cmluZykgI29wdGlvbmFsIGVhc2luZyB0eXBlLiBBY2NlcHQgb24gb2YgQFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzIG9yIENTUyBmb3JtYXQ6IGBjdWJpYyYjeDIwMTA7YmV6aWVyKFhYLCYjMTYwO1hYLCYjMTYwO1hYLCYjMTYwO1hYKWBcbiAgICAgLSBjYWxsYmFjayAoZnVuY3Rpb24pICNvcHRpb25hbCBjYWxsYmFjayBmdW5jdGlvbi4gV2lsbCBiZSBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbmltYXRpb24uXG4gICAgICogb3JcbiAgICAgLSBlbGVtZW50IChvYmplY3QpIGVsZW1lbnQgdG8gc3luYyB3aXRoXG4gICAgIC0gYW5pbSAob2JqZWN0KSBhbmltYXRpb24gdG8gc3luYyB3aXRoXG4gICAgIC0gYW5pbWF0aW9uIChvYmplY3QpICNvcHRpb25hbCBhbmltYXRpb24gb2JqZWN0LCBzZWUgQFJhcGhhZWwuYW5pbWF0aW9uXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLmFuaW1hdGVXaXRoID0gZnVuY3Rpb24gKGVsLCBhbmltLCBwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcztcbiAgICAgICAgaWYgKGVsZW1lbnQucmVtb3ZlZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZhciBhID0gcGFyYW1zIGluc3RhbmNlb2YgQW5pbWF0aW9uID8gcGFyYW1zIDogUi5hbmltYXRpb24ocGFyYW1zLCBtcywgZWFzaW5nLCBjYWxsYmFjayksXG4gICAgICAgICAgICB4LCB5O1xuICAgICAgICBydW5BbmltYXRpb24oYSwgZWxlbWVudCwgYS5wZXJjZW50c1swXSwgbnVsbCwgZWxlbWVudC5hdHRyKCkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uRWxlbWVudHNbaV0uYW5pbSA9PSBhbmltICYmIGFuaW1hdGlvbkVsZW1lbnRzW2ldLmVsID09IGVsKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHNbaWkgLSAxXS5zdGFydCA9IGFuaW1hdGlvbkVsZW1lbnRzW2ldLnN0YXJ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvLyB2YXIgYSA9IHBhcmFtcyA/IFIuYW5pbWF0aW9uKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spIDogYW5pbSxcbiAgICAgICAgLy8gICAgIHN0YXR1cyA9IGVsZW1lbnQuc3RhdHVzKGFuaW0pO1xuICAgICAgICAvLyByZXR1cm4gdGhpcy5hbmltYXRlKGEpLnN0YXR1cyhhLCBzdGF0dXMgKiBhbmltLm1zIC8gYS5tcyk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBDdWJpY0JlemllckF0VGltZSh0LCBwMXgsIHAxeSwgcDJ4LCBwMnksIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBjeCA9IDMgKiBwMXgsXG4gICAgICAgICAgICBieCA9IDMgKiAocDJ4IC0gcDF4KSAtIGN4LFxuICAgICAgICAgICAgYXggPSAxIC0gY3ggLSBieCxcbiAgICAgICAgICAgIGN5ID0gMyAqIHAxeSxcbiAgICAgICAgICAgIGJ5ID0gMyAqIChwMnkgLSBwMXkpIC0gY3ksXG4gICAgICAgICAgICBheSA9IDEgLSBjeSAtIGJ5O1xuICAgICAgICBmdW5jdGlvbiBzYW1wbGVDdXJ2ZVgodCkge1xuICAgICAgICAgICAgcmV0dXJuICgoYXggKiB0ICsgYngpICogdCArIGN4KSAqIHQ7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc29sdmUoeCwgZXBzaWxvbikge1xuICAgICAgICAgICAgdmFyIHQgPSBzb2x2ZUN1cnZlWCh4LCBlcHNpbG9uKTtcbiAgICAgICAgICAgIHJldHVybiAoKGF5ICogdCArIGJ5KSAqIHQgKyBjeSkgKiB0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNvbHZlQ3VydmVYKHgsIGVwc2lsb24pIHtcbiAgICAgICAgICAgIHZhciB0MCwgdDEsIHQyLCB4MiwgZDIsIGk7XG4gICAgICAgICAgICBmb3IodDIgPSB4LCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIHgyID0gc2FtcGxlQ3VydmVYKHQyKSAtIHg7XG4gICAgICAgICAgICAgICAgaWYgKGFicyh4MikgPCBlcHNpbG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0MjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZDIgPSAoMyAqIGF4ICogdDIgKyAyICogYngpICogdDIgKyBjeDtcbiAgICAgICAgICAgICAgICBpZiAoYWJzKGQyKSA8IDFlLTYpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQyID0gdDIgLSB4MiAvIGQyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdDAgPSAwO1xuICAgICAgICAgICAgdDEgPSAxO1xuICAgICAgICAgICAgdDIgPSB4O1xuICAgICAgICAgICAgaWYgKHQyIDwgdDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodDIgPiB0MSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICh0MCA8IHQxKSB7XG4gICAgICAgICAgICAgICAgeDIgPSBzYW1wbGVDdXJ2ZVgodDIpO1xuICAgICAgICAgICAgICAgIGlmIChhYnMoeDIgLSB4KSA8IGVwc2lsb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeCA+IHgyKSB7XG4gICAgICAgICAgICAgICAgICAgIHQwID0gdDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdDEgPSB0MjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdDIgPSAodDEgLSB0MCkgLyAyICsgdDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdDI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvbHZlKHQsIDEgLyAoMjAwICogZHVyYXRpb24pKTtcbiAgICB9XG4gICAgZWxwcm90by5vbkFuaW1hdGlvbiA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIGYgPyBldmUub24oXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIgKyB0aGlzLmlkLCBmKSA6IGV2ZS51bmJpbmQoXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIgKyB0aGlzLmlkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBBbmltYXRpb24oYW5pbSwgbXMpIHtcbiAgICAgICAgdmFyIHBlcmNlbnRzID0gW10sXG4gICAgICAgICAgICBuZXdBbmltID0ge307XG4gICAgICAgIHRoaXMubXMgPSBtcztcbiAgICAgICAgdGhpcy50aW1lcyA9IDE7XG4gICAgICAgIGlmIChhbmltKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhdHRyIGluIGFuaW0pIGlmIChhbmltW2hhc10oYXR0cikpIHtcbiAgICAgICAgICAgICAgICBuZXdBbmltW3RvRmxvYXQoYXR0cildID0gYW5pbVthdHRyXTtcbiAgICAgICAgICAgICAgICBwZXJjZW50cy5wdXNoKHRvRmxvYXQoYXR0cikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVyY2VudHMuc29ydChzb3J0QnlOdW1iZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbSA9IG5ld0FuaW07XG4gICAgICAgIHRoaXMudG9wID0gcGVyY2VudHNbcGVyY2VudHMubGVuZ3RoIC0gMV07XG4gICAgICAgIHRoaXMucGVyY2VudHMgPSBwZXJjZW50cztcbiAgICB9XG4gICAgLypcXFxuICAgICAqIEFuaW1hdGlvbi5kZWxheVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBhIGNvcHkgb2YgZXhpc3RpbmcgYW5pbWF0aW9uIG9iamVjdCB3aXRoIGdpdmVuIGRlbGF5LlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBkZWxheSAobnVtYmVyKSBudW1iZXIgb2YgbXMgdG8gcGFzcyBiZXR3ZWVuIGFuaW1hdGlvbiBzdGFydCBhbmQgYWN0dWFsIGFuaW1hdGlvblxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG5ldyBhbHRlcmVkIEFuaW1hdGlvbiBvYmplY3RcbiAgICAgfCB2YXIgYW5pbSA9IFJhcGhhZWwuYW5pbWF0aW9uKHtjeDogMTAsIGN5OiAyMH0sIDJlMyk7XG4gICAgIHwgY2lyY2xlMS5hbmltYXRlKGFuaW0pOyAvLyBydW4gdGhlIGdpdmVuIGFuaW1hdGlvbiBpbW1lZGlhdGVseVxuICAgICB8IGNpcmNsZTIuYW5pbWF0ZShhbmltLmRlbGF5KDUwMCkpOyAvLyBydW4gdGhlIGdpdmVuIGFuaW1hdGlvbiBhZnRlciA1MDAgbXNcbiAgICBcXCovXG4gICAgQW5pbWF0aW9uLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uIChkZWxheSkge1xuICAgICAgICB2YXIgYSA9IG5ldyBBbmltYXRpb24odGhpcy5hbmltLCB0aGlzLm1zKTtcbiAgICAgICAgYS50aW1lcyA9IHRoaXMudGltZXM7XG4gICAgICAgIGEuZGVsID0gK2RlbGF5IHx8IDA7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEFuaW1hdGlvbi5yZXBlYXRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENyZWF0ZXMgYSBjb3B5IG9mIGV4aXN0aW5nIGFuaW1hdGlvbiBvYmplY3Qgd2l0aCBnaXZlbiByZXBldGl0aW9uLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSByZXBlYXQgKG51bWJlcikgbnVtYmVyIGl0ZXJhdGlvbnMgb2YgYW5pbWF0aW9uLiBGb3IgaW5maW5pdGUgYW5pbWF0aW9uIHBhc3MgYEluZmluaXR5YFxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG5ldyBhbHRlcmVkIEFuaW1hdGlvbiBvYmplY3RcbiAgICBcXCovXG4gICAgQW5pbWF0aW9uLnByb3RvdHlwZS5yZXBlYXQgPSBmdW5jdGlvbiAodGltZXMpIHtcbiAgICAgICAgdmFyIGEgPSBuZXcgQW5pbWF0aW9uKHRoaXMuYW5pbSwgdGhpcy5tcyk7XG4gICAgICAgIGEuZGVsID0gdGhpcy5kZWw7XG4gICAgICAgIGEudGltZXMgPSBtYXRoLmZsb29yKG1tYXgodGltZXMsIDApKSB8fCAxO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHJ1bkFuaW1hdGlvbihhbmltLCBlbGVtZW50LCBwZXJjZW50LCBzdGF0dXMsIHRvdGFsT3JpZ2luLCB0aW1lcykge1xuICAgICAgICBwZXJjZW50ID0gdG9GbG9hdChwZXJjZW50KTtcbiAgICAgICAgdmFyIHBhcmFtcyxcbiAgICAgICAgICAgIGlzSW5BbmltLFxuICAgICAgICAgICAgaXNJbkFuaW1TZXQsXG4gICAgICAgICAgICBwZXJjZW50cyA9IFtdLFxuICAgICAgICAgICAgbmV4dCxcbiAgICAgICAgICAgIHByZXYsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICBtcyA9IGFuaW0ubXMsXG4gICAgICAgICAgICBmcm9tID0ge30sXG4gICAgICAgICAgICB0byA9IHt9LFxuICAgICAgICAgICAgZGlmZiA9IHt9O1xuICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGFuaW1hdGlvbkVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChlLmVsLmlkID09IGVsZW1lbnQuaWQgJiYgZS5hbmltID09IGFuaW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucGVyY2VudCAhPSBwZXJjZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0luQW5pbVNldCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0luQW5pbSA9IGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdHRyKGUudG90YWxPcmlnaW4pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXMgPSArdG87IC8vIE5hTlxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFuaW0ucGVyY2VudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFuaW0ucGVyY2VudHNbaV0gPT0gcGVyY2VudCB8fCBhbmltLnBlcmNlbnRzW2ldID4gc3RhdHVzICogYW5pbS50b3ApIHtcbiAgICAgICAgICAgICAgICBwZXJjZW50ID0gYW5pbS5wZXJjZW50c1tpXTtcbiAgICAgICAgICAgICAgICBwcmV2ID0gYW5pbS5wZXJjZW50c1tpIC0gMV0gfHwgMDtcbiAgICAgICAgICAgICAgICBtcyA9IG1zIC8gYW5pbS50b3AgKiAocGVyY2VudCAtIHByZXYpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBhbmltLnBlcmNlbnRzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBhbmltLmFuaW1bcGVyY2VudF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXR0cihhbmltLmFuaW1bYW5pbS5wZXJjZW50c1tpXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0luQW5pbSkge1xuICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBwYXJhbXMpIGlmIChwYXJhbXNbaGFzXShhdHRyKSkge1xuICAgICAgICAgICAgICAgIGlmIChhdmFpbGFibGVBbmltQXR0cnNbaGFzXShhdHRyKSB8fCBlbGVtZW50LnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShhdHRyKSkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gZWxlbWVudC5hdHRyKGF0dHIpO1xuICAgICAgICAgICAgICAgICAgICAoZnJvbVthdHRyXSA9PSBudWxsKSAmJiAoZnJvbVthdHRyXSA9IGF2YWlsYWJsZUF0dHJzW2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgdG9bYXR0cl0gPSBwYXJhbXNbYXR0cl07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXZhaWxhYmxlQW5pbUF0dHJzW2F0dHJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG51OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSAodG9bYXR0cl0gLSBmcm9tW2F0dHJdKSAvIG1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbG91clwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21bYXR0cl0gPSBSLmdldFJHQihmcm9tW2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9Db2xvdXIgPSBSLmdldFJHQih0b1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcjogKHRvQ29sb3VyLnIgLSBmcm9tW2F0dHJdLnIpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGc6ICh0b0NvbG91ci5nIC0gZnJvbVthdHRyXS5nKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiAodG9Db2xvdXIuYiAtIGZyb21bYXR0cl0uYikgLyBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGF0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXRoZXMgPSBwYXRoMmN1cnZlKGZyb21bYXR0cl0sIHRvW2F0dHJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9QYXRoID0gcGF0aGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21bYXR0cl0gPSBwYXRoZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZnJvbVthdHRyXS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV0gPSBbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAxLCBqaiA9IGZyb21bYXR0cl1baV0ubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXVtpXVtqXSA9ICh0b1BhdGhbaV1bal0gLSBmcm9tW2F0dHJdW2ldW2pdKSAvIG1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfID0gZWxlbWVudC5fLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcSA9IGVxdWFsaXNlVHJhbnNmb3JtKF9bYXR0cl0sIHRvW2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVthdHRyXSA9IGVxLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvW2F0dHJdID0gZXEudG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXS5yZWFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBmcm9tW2F0dHJdLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV0gPSBbZnJvbVthdHRyXVtpXVswXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGZyb21bYXR0cl1baV0ubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV1bal0gPSAodG9bYXR0cl1baV1bal0gLSBmcm9tW2F0dHJdW2ldW2pdKSAvIG1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSAoZWxlbWVudC5tYXRyaXggfHwgbmV3IE1hdHJpeCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXzoge3RyYW5zZm9ybTogXy50cmFuc2Zvcm19LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEJCb3g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QkJveCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5hLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5iLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5mXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUcmFuc2Zvcm0odG8yLCB0b1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvW2F0dHJdID0gdG8yLl8udHJhbnNmb3JtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvMi5tYXRyaXguYSAtIG0uYSkgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0bzIubWF0cml4LmIgLSBtLmIpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG8yLm1hdHJpeC5jIC0gbS5jKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvMi5tYXRyaXguZCAtIG0uZCkgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0bzIubWF0cml4LmUgLSBtLmUpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG8yLm1hdHJpeC5mIC0gbS5mKSAvIG1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb21bYXR0cl0gPSBbXy5zeCwgXy5zeSwgXy5kZWcsIF8uZHgsIF8uZHldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdG8yID0ge186e30sIGdldEJCb3g6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVsZW1lbnQuZ2V0QkJveCgpOyB9fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXh0cmFjdFRyYW5zZm9ybSh0bzIsIHRvW2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlmZlthdHRyXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICh0bzIuXy5zeCAtIF8uc3gpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAodG8yLl8uc3kgLSBfLnN5KSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgKHRvMi5fLmRlZyAtIF8uZGVnKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgKHRvMi5fLmR4IC0gXy5keCkgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICh0bzIuXy5keSAtIF8uZHkpIC8gbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3N2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFN0cihwYXJhbXNbYXR0cl0pW3NwbGl0XShzZXBhcmF0b3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tMiA9IFN0cihmcm9tW2F0dHJdKVtzcGxpdF0oc2VwYXJhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ciA9PSBcImNsaXAtcmVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21bYXR0cl0gPSBmcm9tMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZnJvbTIubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldID0gKHZhbHVlc1tpXSAtIGZyb21bYXR0cl1baV0pIC8gbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9bYXR0cl0gPSB2YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IFtdW2NvbmNhdF0ocGFyYW1zW2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tMiA9IFtdW2NvbmNhdF0oZnJvbVthdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlbGVtZW50LnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbYXR0cl0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXVtpXSA9ICgodmFsdWVzW2ldIHx8IDApIC0gKGZyb20yW2ldIHx8IDApKSAvIG1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlYXNpbmcgPSBwYXJhbXMuZWFzaW5nLFxuICAgICAgICAgICAgICAgIGVhc3llYXN5ID0gUi5lYXNpbmdfZm9ybXVsYXNbZWFzaW5nXTtcbiAgICAgICAgICAgIGlmICghZWFzeWVhc3kpIHtcbiAgICAgICAgICAgICAgICBlYXN5ZWFzeSA9IFN0cihlYXNpbmcpLm1hdGNoKGJlemllcnJnKTtcbiAgICAgICAgICAgICAgICBpZiAoZWFzeWVhc3kgJiYgZWFzeWVhc3kubGVuZ3RoID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnZlID0gZWFzeWVhc3k7XG4gICAgICAgICAgICAgICAgICAgIGVhc3llYXN5ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDdWJpY0JlemllckF0VGltZSh0LCArY3VydmVbMV0sICtjdXJ2ZVsyXSwgK2N1cnZlWzNdLCArY3VydmVbNF0sIG1zKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlYXN5ZWFzeSA9IHBpcGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGltZXN0YW1wID0gcGFyYW1zLnN0YXJ0IHx8IGFuaW0uc3RhcnQgfHwgK25ldyBEYXRlO1xuICAgICAgICAgICAgZSA9IHtcbiAgICAgICAgICAgICAgICBhbmltOiBhbmltLFxuICAgICAgICAgICAgICAgIHBlcmNlbnQ6IHBlcmNlbnQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRpbWVzdGFtcCArIChhbmltLmRlbCB8fCAwKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICAgICAgaW5pdHN0YXR1czogc3RhdHVzIHx8IDAsXG4gICAgICAgICAgICAgICAgc3RvcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbXM6IG1zLFxuICAgICAgICAgICAgICAgIGVhc2luZzogZWFzeWVhc3ksXG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbSxcbiAgICAgICAgICAgICAgICBkaWZmOiBkaWZmLFxuICAgICAgICAgICAgICAgIHRvOiB0byxcbiAgICAgICAgICAgICAgICBlbDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogcGFyYW1zLmNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHByZXY6IHByZXYsXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dCxcbiAgICAgICAgICAgICAgICByZXBlYXQ6IHRpbWVzIHx8IGFuaW0udGltZXMsXG4gICAgICAgICAgICAgICAgb3JpZ2luOiBlbGVtZW50LmF0dHIoKSxcbiAgICAgICAgICAgICAgICB0b3RhbE9yaWdpbjogdG90YWxPcmlnaW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5wdXNoKGUpO1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAmJiAhaXNJbkFuaW0gJiYgIWlzSW5BbmltU2V0KSB7XG4gICAgICAgICAgICAgICAgZS5zdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlLnN0YXJ0ID0gbmV3IERhdGUgLSBtcyAqIHN0YXR1cztcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0luQW5pbVNldCkge1xuICAgICAgICAgICAgICAgIGUuc3RhcnQgPSBuZXcgRGF0ZSAtIGUubXMgKiBzdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5sZW5ndGggPT0gMSAmJiByZXF1ZXN0QW5pbUZyYW1lKGFuaW1hdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc0luQW5pbS5pbml0c3RhdHVzID0gc3RhdHVzO1xuICAgICAgICAgICAgaXNJbkFuaW0uc3RhcnQgPSBuZXcgRGF0ZSAtIGlzSW5BbmltLm1zICogc3RhdHVzO1xuICAgICAgICB9XG4gICAgICAgIGV2ZShcInJhcGhhZWwuYW5pbS5zdGFydC5cIiArIGVsZW1lbnQuaWQsIGVsZW1lbnQsIGFuaW0pO1xuICAgIH1cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5hbmltYXRpb25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENyZWF0ZXMgYW4gYW5pbWF0aW9uIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gdGhlIEBFbGVtZW50LmFuaW1hdGUgb3IgQEVsZW1lbnQuYW5pbWF0ZVdpdGggbWV0aG9kcy5cbiAgICAgKiBTZWUgYWxzbyBAQW5pbWF0aW9uLmRlbGF5IGFuZCBAQW5pbWF0aW9uLnJlcGVhdCBtZXRob2RzLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBwYXJhbXMgKG9iamVjdCkgZmluYWwgYXR0cmlidXRlcyBmb3IgdGhlIGVsZW1lbnQsIHNlZSBhbHNvIEBFbGVtZW50LmF0dHJcbiAgICAgLSBtcyAobnVtYmVyKSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZvciBhbmltYXRpb24gdG8gcnVuXG4gICAgIC0gZWFzaW5nIChzdHJpbmcpICNvcHRpb25hbCBlYXNpbmcgdHlwZS4gQWNjZXB0IG9uZSBvZiBAUmFwaGFlbC5lYXNpbmdfZm9ybXVsYXMgb3IgQ1NTIGZvcm1hdDogYGN1YmljJiN4MjAxMDtiZXppZXIoWFgsJiMxNjA7WFgsJiMxNjA7WFgsJiMxNjA7WFgpYFxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uLiBXaWxsIGJlIGNhbGxlZCBhdCB0aGUgZW5kIG9mIGFuaW1hdGlvbi5cbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBAQW5pbWF0aW9uXG4gICAgXFwqL1xuICAgIFIuYW5pbWF0aW9uID0gZnVuY3Rpb24gKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHBhcmFtcyBpbnN0YW5jZW9mIEFuaW1hdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoUi5pcyhlYXNpbmcsIFwiZnVuY3Rpb25cIikgfHwgIWVhc2luZykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBlYXNpbmcgfHwgbnVsbDtcbiAgICAgICAgICAgIGVhc2luZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcGFyYW1zID0gT2JqZWN0KHBhcmFtcyk7XG4gICAgICAgIG1zID0gK21zIHx8IDA7XG4gICAgICAgIHZhciBwID0ge30sXG4gICAgICAgICAgICBqc29uLFxuICAgICAgICAgICAgYXR0cjtcbiAgICAgICAgZm9yIChhdHRyIGluIHBhcmFtcykgaWYgKHBhcmFtc1toYXNdKGF0dHIpICYmIHRvRmxvYXQoYXR0cikgIT0gYXR0ciAmJiB0b0Zsb2F0KGF0dHIpICsgXCIlXCIgIT0gYXR0cikge1xuICAgICAgICAgICAganNvbiA9IHRydWU7XG4gICAgICAgICAgICBwW2F0dHJdID0gcGFyYW1zW2F0dHJdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghanNvbikge1xuICAgICAgICAgICAgLy8gaWYgcGVyY2VudC1saWtlIHN5bnRheCBpcyB1c2VkIGFuZCBlbmQtb2YtYWxsIGFuaW1hdGlvbiBjYWxsYmFjayB1c2VkXG4gICAgICAgICAgICBpZihjYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgbGFzdCBvbmVcbiAgICAgICAgICAgICAgICB2YXIgbGFzdEtleSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIHBhcmFtcyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZXJjZW50ID0gdG9JbnQoaSk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhcmFtc1toYXNdKGkpICYmIHBlcmNlbnQgPiBsYXN0S2V5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RLZXkgPSBwZXJjZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3RLZXkgKz0gJyUnO1xuICAgICAgICAgICAgICAgIC8vIGlmIGFscmVhZHkgZGVmaW5lZCBjYWxsYmFjayBpbiB0aGUgbGFzdCBrZXlmcmFtZSwgc2tpcFxuICAgICAgICAgICAgICAgICFwYXJhbXNbbGFzdEtleV0uY2FsbGJhY2sgJiYgKHBhcmFtc1tsYXN0S2V5XS5jYWxsYmFjayA9IGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IEFuaW1hdGlvbihwYXJhbXMsIG1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVhc2luZyAmJiAocC5lYXNpbmcgPSBlYXNpbmcpO1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgKHAuY2FsbGJhY2sgPSBjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFuaW1hdGlvbih7MTAwOiBwfSwgbXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5hbmltYXRlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGFuZCBzdGFydHMgYW5pbWF0aW9uIGZvciBnaXZlbiBlbGVtZW50LlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBwYXJhbXMgKG9iamVjdCkgZmluYWwgYXR0cmlidXRlcyBmb3IgdGhlIGVsZW1lbnQsIHNlZSBhbHNvIEBFbGVtZW50LmF0dHJcbiAgICAgLSBtcyAobnVtYmVyKSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZvciBhbmltYXRpb24gdG8gcnVuXG4gICAgIC0gZWFzaW5nIChzdHJpbmcpICNvcHRpb25hbCBlYXNpbmcgdHlwZS4gQWNjZXB0IG9uZSBvZiBAUmFwaGFlbC5lYXNpbmdfZm9ybXVsYXMgb3IgQ1NTIGZvcm1hdDogYGN1YmljJiN4MjAxMDtiZXppZXIoWFgsJiMxNjA7WFgsJiMxNjA7WFgsJiMxNjA7WFgpYFxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uLiBXaWxsIGJlIGNhbGxlZCBhdCB0aGUgZW5kIG9mIGFuaW1hdGlvbi5cbiAgICAgKiBvclxuICAgICAtIGFuaW1hdGlvbiAob2JqZWN0KSBhbmltYXRpb24gb2JqZWN0LCBzZWUgQFJhcGhhZWwuYW5pbWF0aW9uXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLmFuaW1hdGUgPSBmdW5jdGlvbiAocGFyYW1zLCBtcywgZWFzaW5nLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXM7XG4gICAgICAgIGlmIChlbGVtZW50LnJlbW92ZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5pbSA9IHBhcmFtcyBpbnN0YW5jZW9mIEFuaW1hdGlvbiA/IHBhcmFtcyA6IFIuYW5pbWF0aW9uKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spO1xuICAgICAgICBydW5BbmltYXRpb24oYW5pbSwgZWxlbWVudCwgYW5pbS5wZXJjZW50c1swXSwgbnVsbCwgZWxlbWVudC5hdHRyKCkpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnNldFRpbWVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFNldHMgdGhlIHN0YXR1cyBvZiBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQgaW4gbWlsbGlzZWNvbmRzLiBTaW1pbGFyIHRvIEBFbGVtZW50LnN0YXR1cyBtZXRob2QuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGFuaW0gKG9iamVjdCkgYW5pbWF0aW9uIG9iamVjdFxuICAgICAtIHZhbHVlIChudW1iZXIpIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhbmltYXRpb25cbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBvcmlnaW5hbCBlbGVtZW50IGlmIGB2YWx1ZWAgaXMgc3BlY2lmaWVkXG4gICAgICogTm90ZSwgdGhhdCBkdXJpbmcgYW5pbWF0aW9uIGZvbGxvd2luZyBldmVudHMgYXJlIHRyaWdnZXJlZDpcbiAgICAgKlxuICAgICAqIE9uIGVhY2ggYW5pbWF0aW9uIGZyYW1lIGV2ZW50IGBhbmltLmZyYW1lLjxpZD5gLCBvbiBzdGFydCBgYW5pbS5zdGFydC48aWQ+YCBhbmQgb24gZW5kIGBhbmltLmZpbmlzaC48aWQ+YC5cbiAgICBcXCovXG4gICAgZWxwcm90by5zZXRUaW1lID0gZnVuY3Rpb24gKGFuaW0sIHZhbHVlKSB7XG4gICAgICAgIGlmIChhbmltICYmIHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzKGFuaW0sIG1taW4odmFsdWUsIGFuaW0ubXMpIC8gYW5pbS5tcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zdGF0dXNcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgc3RhdHVzIG9mIGFuaW1hdGlvbiBvZiB0aGUgZWxlbWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gYW5pbSAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdFxuICAgICAtIHZhbHVlIChudW1iZXIpICNvcHRpb25hbCAwIOKAkyAxLiBJZiBzcGVjaWZpZWQsIG1ldGhvZCB3b3JrcyBsaWtlIGEgc2V0dGVyIGFuZCBzZXRzIHRoZSBzdGF0dXMgb2YgYSBnaXZlbiBhbmltYXRpb24gdG8gdGhlIHZhbHVlLiBUaGlzIHdpbGwgY2F1c2UgYW5pbWF0aW9uIHRvIGp1bXAgdG8gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICAqKlxuICAgICA9IChudW1iZXIpIHN0YXR1c1xuICAgICAqIG9yXG4gICAgID0gKGFycmF5KSBzdGF0dXMgaWYgYGFuaW1gIGlzIG5vdCBzcGVjaWZpZWQuIEFycmF5IG9mIG9iamVjdHMgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgYW5pbTogKG9iamVjdCkgYW5pbWF0aW9uIG9iamVjdFxuICAgICBvICAgICBzdGF0dXM6IChudW1iZXIpIHN0YXR1c1xuICAgICBvIH1cbiAgICAgKiBvclxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnQgaWYgYHZhbHVlYCBpcyBzcGVjaWZpZWRcbiAgICBcXCovXG4gICAgZWxwcm90by5zdGF0dXMgPSBmdW5jdGlvbiAoYW5pbSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdLFxuICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICBsZW4sXG4gICAgICAgICAgICBlO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcnVuQW5pbWF0aW9uKGFuaW0sIHRoaXMsIC0xLCBtbWluKHZhbHVlLCAxKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlbiA9IGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlID0gYW5pbWF0aW9uRWxlbWVudHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGUuZWwuaWQgPT0gdGhpcy5pZCAmJiAoIWFuaW0gfHwgZS5hbmltID09IGFuaW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbTogZS5hbmltLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBlLnN0YXR1c1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYW5pbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQucGF1c2VcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFN0b3BzIGFuaW1hdGlvbiBvZiB0aGUgZWxlbWVudCB3aXRoIGFiaWxpdHkgdG8gcmVzdW1lIGl0IGxhdGVyIG9uLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBhbmltIChvYmplY3QpICNvcHRpb25hbCBhbmltYXRpb24gb2JqZWN0XG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnBhdXNlID0gZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkrKykgaWYgKGFuaW1hdGlvbkVsZW1lbnRzW2ldLmVsLmlkID09IHRoaXMuaWQgJiYgKCFhbmltIHx8IGFuaW1hdGlvbkVsZW1lbnRzW2ldLmFuaW0gPT0gYW5pbSkpIHtcbiAgICAgICAgICAgIGlmIChldmUoXCJyYXBoYWVsLmFuaW0ucGF1c2UuXCIgKyB0aGlzLmlkLCB0aGlzLCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25FbGVtZW50c1tpXS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQucmVzdW1lXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXN1bWVzIGFuaW1hdGlvbiBpZiBpdCB3YXMgcGF1c2VkIHdpdGggQEVsZW1lbnQucGF1c2UgbWV0aG9kLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBhbmltIChvYmplY3QpICNvcHRpb25hbCBhbmltYXRpb24gb2JqZWN0XG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJlc3VtZSA9IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpKyspIGlmIChhbmltYXRpb25FbGVtZW50c1tpXS5lbC5pZCA9PSB0aGlzLmlkICYmICghYW5pbSB8fCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltID09IGFuaW0pKSB7XG4gICAgICAgICAgICB2YXIgZSA9IGFuaW1hdGlvbkVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKGV2ZShcInJhcGhhZWwuYW5pbS5yZXN1bWUuXCIgKyB0aGlzLmlkLCB0aGlzLCBlLmFuaW0pICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBlLnBhdXNlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyhlLmFuaW0sIGUuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnN0b3BcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFN0b3BzIGFuaW1hdGlvbiBvZiB0aGUgZWxlbWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gYW5pbSAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdFxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5zdG9wID0gZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkrKykgaWYgKGFuaW1hdGlvbkVsZW1lbnRzW2ldLmVsLmlkID09IHRoaXMuaWQgJiYgKCFhbmltIHx8IGFuaW1hdGlvbkVsZW1lbnRzW2ldLmFuaW0gPT0gYW5pbSkpIHtcbiAgICAgICAgICAgIGlmIChldmUoXCJyYXBoYWVsLmFuaW0uc3RvcC5cIiArIHRoaXMuaWQsIHRoaXMsIGFuaW1hdGlvbkVsZW1lbnRzW2ldLmFuaW0pICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkVsZW1lbnRzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZnVuY3Rpb24gc3RvcEFuaW1hdGlvbihwYXBlcikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aDsgaSsrKSBpZiAoYW5pbWF0aW9uRWxlbWVudHNbaV0uZWwucGFwZXIgPT0gcGFwZXIpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbkVsZW1lbnRzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV2ZS5vbihcInJhcGhhZWwucmVtb3ZlXCIsIHN0b3BBbmltYXRpb24pO1xuICAgIGV2ZS5vbihcInJhcGhhZWwuY2xlYXJcIiwgc3RvcEFuaW1hdGlvbik7XG4gICAgZWxwcm90by50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmFwaGFcXHhlYmxcXHUyMDE5cyBvYmplY3RcIjtcbiAgICB9O1xuXG4gICAgLy8gU2V0XG4gICAgdmFyIFNldCA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy50eXBlID0gXCJzZXRcIjtcbiAgICAgICAgaWYgKGl0ZW1zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldICYmIChpdGVtc1tpXS5jb25zdHJ1Y3RvciA9PSBlbHByb3RvLmNvbnN0cnVjdG9yIHx8IGl0ZW1zW2ldLmNvbnN0cnVjdG9yID09IFNldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1t0aGlzLml0ZW1zLmxlbmd0aF0gPSB0aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoXSA9IGl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0cHJvdG8gPSBTZXQucHJvdG90eXBlO1xuICAgIC8qXFxcbiAgICAgKiBTZXQucHVzaFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBlYWNoIGFyZ3VtZW50IHRvIHRoZSBjdXJyZW50IHNldC5cbiAgICAgPSAob2JqZWN0KSBvcmlnaW5hbCBlbGVtZW50XG4gICAgXFwqL1xuICAgIHNldHByb3RvLnB1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVtLFxuICAgICAgICAgICAgbGVuO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIChpdGVtLmNvbnN0cnVjdG9yID09IGVscHJvdG8uY29uc3RydWN0b3IgfHwgaXRlbS5jb25zdHJ1Y3RvciA9PSBTZXQpKSB7XG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5pdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpc1tsZW5dID0gdGhpcy5pdGVtc1tsZW5dID0gaXRlbTtcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFNldC5wb3BcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgbGFzdCBlbGVtZW50IGFuZCByZXR1cm5zIGl0LlxuICAgICA9IChvYmplY3QpIGVsZW1lbnRcbiAgICBcXCovXG4gICAgc2V0cHJvdG8ucG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxlbmd0aCAmJiBkZWxldGUgdGhpc1t0aGlzLmxlbmd0aC0tXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMucG9wKCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogU2V0LmZvckVhY2hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEV4ZWN1dGVzIGdpdmVuIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIHNldC5cbiAgICAgKlxuICAgICAqIElmIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCBpdCB3aWxsIHN0b3AgbG9vcCBydW5uaW5nLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBjYWxsYmFjayAoZnVuY3Rpb24pIGZ1bmN0aW9uIHRvIHJ1blxuICAgICAtIHRoaXNBcmcgKG9iamVjdCkgY29udGV4dCBvYmplY3QgZm9yIHRoZSBjYWxsYmFja1xuICAgICA9IChvYmplY3QpIFNldCBvYmplY3RcbiAgICBcXCovXG4gICAgc2V0cHJvdG8uZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLml0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMuaXRlbXNbaV0sIGkpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSkge1xuICAgICAgICBzZXRwcm90b1ttZXRob2RdID0gKGZ1bmN0aW9uIChtZXRob2RuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmcgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxbbWV0aG9kbmFtZV1bYXBwbHldKGVsLCBhcmcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkobWV0aG9kKTtcbiAgICB9XG4gICAgc2V0cHJvdG8uYXR0ciA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICBpZiAobmFtZSAmJiBSLmlzKG5hbWUsIGFycmF5KSAmJiBSLmlzKG5hbWVbMF0sIFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBuYW1lLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2pdLmF0dHIobmFtZVtqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLml0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2ldLmF0dHIobmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFNldC5jbGVhclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBhbGwgZWxlbWVudHMgZnJvbSB0aGUgc2V0XG4gICAgXFwqL1xuICAgIHNldHByb3RvLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBTZXQuc3BsaWNlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGdpdmVuIGVsZW1lbnQgZnJvbSB0aGUgc2V0XG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGluZGV4IChudW1iZXIpIHBvc2l0aW9uIG9mIHRoZSBkZWxldGlvblxuICAgICAtIGNvdW50IChudW1iZXIpIG51bWJlciBvZiBlbGVtZW50IHRvIHJlbW92ZVxuICAgICAtIGluc2VydGlvbuKApiAob2JqZWN0KSAjb3B0aW9uYWwgZWxlbWVudHMgdG8gaW5zZXJ0XG4gICAgID0gKG9iamVjdCkgc2V0IGVsZW1lbnRzIHRoYXQgd2VyZSBkZWxldGVkXG4gICAgXFwqL1xuICAgIHNldHByb3RvLnNwbGljZSA9IGZ1bmN0aW9uIChpbmRleCwgY291bnQsIGluc2VydGlvbikge1xuICAgICAgICBpbmRleCA9IGluZGV4IDwgMCA/IG1tYXgodGhpcy5sZW5ndGggKyBpbmRleCwgMCkgOiBpbmRleDtcbiAgICAgICAgY291bnQgPSBtbWF4KDAsIG1taW4odGhpcy5sZW5ndGggLSBpbmRleCwgY291bnQpKTtcbiAgICAgICAgdmFyIHRhaWwgPSBbXSxcbiAgICAgICAgICAgIHRvZGVsID0gW10sXG4gICAgICAgICAgICBhcmdzID0gW10sXG4gICAgICAgICAgICBpO1xuICAgICAgICBmb3IgKGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgdG9kZWwucHVzaCh0aGlzW2luZGV4ICsgaV0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpIDwgdGhpcy5sZW5ndGggLSBpbmRleDsgaSsrKSB7XG4gICAgICAgICAgICB0YWlsLnB1c2godGhpc1tpbmRleCArIGldKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJnbGVuID0gYXJncy5sZW5ndGg7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmdsZW4gKyB0YWlsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2luZGV4ICsgaV0gPSB0aGlzW2luZGV4ICsgaV0gPSBpIDwgYXJnbGVuID8gYXJnc1tpXSA6IHRhaWxbaSAtIGFyZ2xlbl07XG4gICAgICAgIH1cbiAgICAgICAgaSA9IHRoaXMuaXRlbXMubGVuZ3RoID0gdGhpcy5sZW5ndGggLT0gY291bnQgLSBhcmdsZW47XG4gICAgICAgIHdoaWxlICh0aGlzW2ldKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpc1tpKytdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2V0KHRvZGVsKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBTZXQuZXhjbHVkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBnaXZlbiBlbGVtZW50IGZyb20gdGhlIHNldFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBlbGVtZW50IChvYmplY3QpIGVsZW1lbnQgdG8gcmVtb3ZlXG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCBpZiBvYmplY3Qgd2FzIGZvdW5kICYgcmVtb3ZlZCBmcm9tIHRoZSBzZXRcbiAgICBcXCovXG4gICAgc2V0cHJvdG8uZXhjbHVkZSA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmxlbmd0aDsgaSA8IGlpOyBpKyspIGlmICh0aGlzW2ldID09IGVsKSB7XG4gICAgICAgICAgICB0aGlzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzZXRwcm90by5hbmltYXRlID0gZnVuY3Rpb24gKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spIHtcbiAgICAgICAgKFIuaXMoZWFzaW5nLCBcImZ1bmN0aW9uXCIpIHx8ICFlYXNpbmcpICYmIChjYWxsYmFjayA9IGVhc2luZyB8fCBudWxsKTtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaSA9IGxlbixcbiAgICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgICBzZXQgPSB0aGlzLFxuICAgICAgICAgICAgY29sbGVjdG9yO1xuICAgICAgICBpZiAoIWxlbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2sgJiYgKGNvbGxlY3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICEtLWxlbiAmJiBjYWxsYmFjay5jYWxsKHNldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBlYXNpbmcgPSBSLmlzKGVhc2luZywgc3RyaW5nKSA/IGVhc2luZyA6IGNvbGxlY3RvcjtcbiAgICAgICAgdmFyIGFuaW0gPSBSLmFuaW1hdGlvbihwYXJhbXMsIG1zLCBlYXNpbmcsIGNvbGxlY3Rvcik7XG4gICAgICAgIGl0ZW0gPSB0aGlzLml0ZW1zWy0taV0uYW5pbWF0ZShhbmltKTtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXSAmJiAhdGhpcy5pdGVtc1tpXS5yZW1vdmVkICYmIHRoaXMuaXRlbXNbaV0uYW5pbWF0ZVdpdGgoaXRlbSwgYW5pbSwgYW5pbSk7XG4gICAgICAgICAgICAodGhpcy5pdGVtc1tpXSAmJiAhdGhpcy5pdGVtc1tpXS5yZW1vdmVkKSB8fCBsZW4tLTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHNldHByb3RvLmluc2VydEFmdGVyID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0uaW5zZXJ0QWZ0ZXIoZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgc2V0cHJvdG8uZ2V0QkJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHggPSBbXSxcbiAgICAgICAgICAgIHkgPSBbXSxcbiAgICAgICAgICAgIHgyID0gW10sXG4gICAgICAgICAgICB5MiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGg7IGktLTspIGlmICghdGhpcy5pdGVtc1tpXS5yZW1vdmVkKSB7XG4gICAgICAgICAgICB2YXIgYm94ID0gdGhpcy5pdGVtc1tpXS5nZXRCQm94KCk7XG4gICAgICAgICAgICB4LnB1c2goYm94LngpO1xuICAgICAgICAgICAgeS5wdXNoKGJveC55KTtcbiAgICAgICAgICAgIHgyLnB1c2goYm94LnggKyBib3gud2lkdGgpO1xuICAgICAgICAgICAgeTIucHVzaChib3gueSArIGJveC5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHggPSBtbWluW2FwcGx5XSgwLCB4KTtcbiAgICAgICAgeSA9IG1taW5bYXBwbHldKDAsIHkpO1xuICAgICAgICB4MiA9IG1tYXhbYXBwbHldKDAsIHgyKTtcbiAgICAgICAgeTIgPSBtbWF4W2FwcGx5XSgwLCB5Mik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIHgyOiB4MixcbiAgICAgICAgICAgIHkyOiB5MixcbiAgICAgICAgICAgIHdpZHRoOiB4MiAtIHgsXG4gICAgICAgICAgICBoZWlnaHQ6IHkyIC0geVxuICAgICAgICB9O1xuICAgIH07XG4gICAgc2V0cHJvdG8uY2xvbmUgPSBmdW5jdGlvbiAocykge1xuICAgICAgICBzID0gdGhpcy5wYXBlci5zZXQoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBzLnB1c2godGhpcy5pdGVtc1tpXS5jbG9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xuICAgIHNldHByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJSYXBoYVxceGVibFxcdTIwMThzIHNldFwiO1xuICAgIH07XG5cbiAgICBzZXRwcm90by5nbG93ID0gZnVuY3Rpb24oZ2xvd0NvbmZpZykge1xuICAgICAgICB2YXIgcmV0ID0gdGhpcy5wYXBlci5zZXQoKTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHNoYXBlLCBpbmRleCl7XG4gICAgICAgICAgICB2YXIgZyA9IHNoYXBlLmdsb3coZ2xvd0NvbmZpZyk7XG4gICAgICAgICAgICBpZihnICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIGcuZm9yRWFjaChmdW5jdGlvbihzaGFwZTIsIGluZGV4Mil7XG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKHNoYXBlMik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG5cblxuICAgIC8qXFxcbiAgICAgKiBTZXQuaXNQb2ludEluc2lkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGdpdmVuIHBvaW50IGlzIGluc2lkZSB0aGlzIHNldOKAmXMgZWxlbWVudHNcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCBpZiBwb2ludCBpcyBpbnNpZGUgYW55IG9mIHRoZSBzZXQncyBlbGVtZW50c1xuICAgICBcXCovXG4gICAgc2V0cHJvdG8uaXNQb2ludEluc2lkZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBpc1BvaW50SW5zaWRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIGlmIChlbC5pc1BvaW50SW5zaWRlKHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgaXNQb2ludEluc2lkZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBzdG9wIGxvb3BcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpc1BvaW50SW5zaWRlO1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5yZWdpc3RlckZvbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZ2l2ZW4gZm9udCB0byB0aGUgcmVnaXN0ZXJlZCBzZXQgb2YgZm9udHMgZm9yIFJhcGhhw6tsLiBTaG91bGQgYmUgdXNlZCBhcyBhbiBpbnRlcm5hbCBjYWxsIGZyb20gd2l0aGluIEN1ZsOzbuKAmXMgZm9udCBmaWxlLlxuICAgICAqIFJldHVybnMgb3JpZ2luYWwgcGFyYW1ldGVyLCBzbyBpdCBjb3VsZCBiZSB1c2VkIHdpdGggY2hhaW5pbmcuXG4gICAgICMgPGEgaHJlZj1cImh0dHA6Ly93aWtpLmdpdGh1Yi5jb20vc29yY2N1L2N1Zm9uL2Fib3V0XCI+TW9yZSBhYm91dCBDdWbDs24gYW5kIGhvdyB0byBjb252ZXJ0IHlvdXIgZm9udCBmb3JtIFRURiwgT1RGLCBldGMgdG8gSmF2YVNjcmlwdCBmaWxlLjwvYT5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZm9udCAob2JqZWN0KSB0aGUgZm9udCB0byByZWdpc3RlclxuICAgICA9IChvYmplY3QpIHRoZSBmb250IHlvdSBwYXNzZWQgaW5cbiAgICAgPiBVc2FnZVxuICAgICB8IEN1Zm9uLnJlZ2lzdGVyRm9udChSYXBoYWVsLnJlZ2lzdGVyRm9udCh74oCmfSkpO1xuICAgIFxcKi9cbiAgICBSLnJlZ2lzdGVyRm9udCA9IGZ1bmN0aW9uIChmb250KSB7XG4gICAgICAgIGlmICghZm9udC5mYWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9udDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvbnRzID0gdGhpcy5mb250cyB8fCB7fTtcbiAgICAgICAgdmFyIGZvbnRjb3B5ID0ge1xuICAgICAgICAgICAgICAgIHc6IGZvbnQudyxcbiAgICAgICAgICAgICAgICBmYWNlOiB7fSxcbiAgICAgICAgICAgICAgICBnbHlwaHM6IHt9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFtaWx5ID0gZm9udC5mYWNlW1wiZm9udC1mYW1pbHlcIl07XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gZm9udC5mYWNlKSBpZiAoZm9udC5mYWNlW2hhc10ocHJvcCkpIHtcbiAgICAgICAgICAgIGZvbnRjb3B5LmZhY2VbcHJvcF0gPSBmb250LmZhY2VbcHJvcF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZm9udHNbZmFtaWx5XSkge1xuICAgICAgICAgICAgdGhpcy5mb250c1tmYW1pbHldLnB1c2goZm9udGNvcHkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mb250c1tmYW1pbHldID0gW2ZvbnRjb3B5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZvbnQuc3ZnKSB7XG4gICAgICAgICAgICBmb250Y29weS5mYWNlW1widW5pdHMtcGVyLWVtXCJdID0gdG9JbnQoZm9udC5mYWNlW1widW5pdHMtcGVyLWVtXCJdLCAxMCk7XG4gICAgICAgICAgICBmb3IgKHZhciBnbHlwaCBpbiBmb250LmdseXBocykgaWYgKGZvbnQuZ2x5cGhzW2hhc10oZ2x5cGgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBmb250LmdseXBoc1tnbHlwaF07XG4gICAgICAgICAgICAgICAgZm9udGNvcHkuZ2x5cGhzW2dseXBoXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdzogcGF0aC53LFxuICAgICAgICAgICAgICAgICAgICBrOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgZDogcGF0aC5kICYmIFwiTVwiICsgcGF0aC5kLnJlcGxhY2UoL1ttbGN4dHJ2XS9nLCBmdW5jdGlvbiAoY29tbWFuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7bDogXCJMXCIsIGM6IFwiQ1wiLCB4OiBcInpcIiwgdDogXCJtXCIsIHI6IFwibFwiLCB2OiBcImNcIn1bY29tbWFuZF0gfHwgXCJNXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSArIFwielwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gcGF0aC5rKSBpZiAocGF0aFtoYXNdKGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb250Y29weS5nbHlwaHNbZ2x5cGhdLmtba10gPSBwYXRoLmtba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvbnQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuZ2V0Rm9udFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRmluZHMgZm9udCBvYmplY3QgaW4gdGhlIHJlZ2lzdGVyZWQgZm9udHMgYnkgZ2l2ZW4gcGFyYW1ldGVycy4gWW91IGNvdWxkIHNwZWNpZnkgb25seSBvbmUgd29yZCBmcm9tIHRoZSBmb250IG5hbWUsIGxpa2Ug4oCcTXlyaWFk4oCdIGZvciDigJxNeXJpYWQgUHJv4oCdLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBmYW1pbHkgKHN0cmluZykgZm9udCBmYW1pbHkgbmFtZSBvciBhbnkgd29yZCBmcm9tIGl0XG4gICAgIC0gd2VpZ2h0IChzdHJpbmcpICNvcHRpb25hbCBmb250IHdlaWdodFxuICAgICAtIHN0eWxlIChzdHJpbmcpICNvcHRpb25hbCBmb250IHN0eWxlXG4gICAgIC0gc3RyZXRjaCAoc3RyaW5nKSAjb3B0aW9uYWwgZm9udCBzdHJldGNoXG4gICAgID0gKG9iamVjdCkgdGhlIGZvbnQgb2JqZWN0XG4gICAgID4gVXNhZ2VcbiAgICAgfCBwYXBlci5wcmludCgxMDAsIDEwMCwgXCJUZXN0IHN0cmluZ1wiLCBwYXBlci5nZXRGb250KFwiVGltZXNcIiwgODAwKSwgMzApO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmdldEZvbnQgPSBmdW5jdGlvbiAoZmFtaWx5LCB3ZWlnaHQsIHN0eWxlLCBzdHJldGNoKSB7XG4gICAgICAgIHN0cmV0Y2ggPSBzdHJldGNoIHx8IFwibm9ybWFsXCI7XG4gICAgICAgIHN0eWxlID0gc3R5bGUgfHwgXCJub3JtYWxcIjtcbiAgICAgICAgd2VpZ2h0ID0gK3dlaWdodCB8fCB7bm9ybWFsOiA0MDAsIGJvbGQ6IDcwMCwgbGlnaHRlcjogMzAwLCBib2xkZXI6IDgwMH1bd2VpZ2h0XSB8fCA0MDA7XG4gICAgICAgIGlmICghUi5mb250cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb250ID0gUi5mb250c1tmYW1pbHldO1xuICAgICAgICBpZiAoIWZvbnQpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgZmFtaWx5LnJlcGxhY2UoL1teXFx3XFxkXFxzKyF+LjpfLV0vZywgRSkgKyBcIihcXFxcc3wkKVwiLCBcImlcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBmb250TmFtZSBpbiBSLmZvbnRzKSBpZiAoUi5mb250c1toYXNdKGZvbnROYW1lKSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lLnRlc3QoZm9udE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQgPSBSLmZvbnRzW2ZvbnROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB0aGVmb250O1xuICAgICAgICBpZiAoZm9udCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhlZm9udCA9IGZvbnRbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRoZWZvbnQuZmFjZVtcImZvbnQtd2VpZ2h0XCJdID09IHdlaWdodCAmJiAodGhlZm9udC5mYWNlW1wiZm9udC1zdHlsZVwiXSA9PSBzdHlsZSB8fCAhdGhlZm9udC5mYWNlW1wiZm9udC1zdHlsZVwiXSkgJiYgdGhlZm9udC5mYWNlW1wiZm9udC1zdHJldGNoXCJdID09IHN0cmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGVmb250O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnByaW50XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIHBhdGggdGhhdCByZXByZXNlbnQgZ2l2ZW4gdGV4dCB3cml0dGVuIHVzaW5nIGdpdmVuIGZvbnQgYXQgZ2l2ZW4gcG9zaXRpb24gd2l0aCBnaXZlbiBzaXplLlxuICAgICAqIFJlc3VsdCBvZiB0aGUgbWV0aG9kIGlzIHBhdGggZWxlbWVudCB0aGF0IGNvbnRhaW5zIHdob2xlIHRleHQgYXMgYSBzZXBhcmF0ZSBwYXRoLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggcG9zaXRpb24gb2YgdGhlIHRleHRcbiAgICAgLSB5IChudW1iZXIpIHkgcG9zaXRpb24gb2YgdGhlIHRleHRcbiAgICAgLSBzdHJpbmcgKHN0cmluZykgdGV4dCB0byBwcmludFxuICAgICAtIGZvbnQgKG9iamVjdCkgZm9udCBvYmplY3QsIHNlZSBAUGFwZXIuZ2V0Rm9udFxuICAgICAtIHNpemUgKG51bWJlcikgI29wdGlvbmFsIHNpemUgb2YgdGhlIGZvbnQsIGRlZmF1bHQgaXMgYDE2YFxuICAgICAtIG9yaWdpbiAoc3RyaW5nKSAjb3B0aW9uYWwgY291bGQgYmUgYFwiYmFzZWxpbmVcImAgb3IgYFwibWlkZGxlXCJgLCBkZWZhdWx0IGlzIGBcIm1pZGRsZVwiYFxuICAgICAtIGxldHRlcl9zcGFjaW5nIChudW1iZXIpICNvcHRpb25hbCBudW1iZXIgaW4gcmFuZ2UgYC0xLi4xYCwgZGVmYXVsdCBpcyBgMGBcbiAgICAgLSBsaW5lX3NwYWNpbmcgKG51bWJlcikgI29wdGlvbmFsIG51bWJlciBpbiByYW5nZSBgMS4uM2AsIGRlZmF1bHQgaXMgYDFgXG4gICAgID0gKG9iamVjdCkgcmVzdWx0aW5nIHBhdGggZWxlbWVudCwgd2hpY2ggY29uc2lzdCBvZiBhbGwgbGV0dGVyc1xuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIHR4dCA9IHIucHJpbnQoMTAsIDUwLCBcInByaW50XCIsIHIuZ2V0Rm9udChcIk11c2VvXCIpLCAzMCkuYXR0cih7ZmlsbDogXCIjZmZmXCJ9KTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5wcmludCA9IGZ1bmN0aW9uICh4LCB5LCBzdHJpbmcsIGZvbnQsIHNpemUsIG9yaWdpbiwgbGV0dGVyX3NwYWNpbmcsIGxpbmVfc3BhY2luZykge1xuICAgICAgICBvcmlnaW4gPSBvcmlnaW4gfHwgXCJtaWRkbGVcIjsgLy8gYmFzZWxpbmV8bWlkZGxlXG4gICAgICAgIGxldHRlcl9zcGFjaW5nID0gbW1heChtbWluKGxldHRlcl9zcGFjaW5nIHx8IDAsIDEpLCAtMSk7XG4gICAgICAgIGxpbmVfc3BhY2luZyA9IG1tYXgobW1pbihsaW5lX3NwYWNpbmcgfHwgMSwgMyksIDEpO1xuICAgICAgICB2YXIgbGV0dGVycyA9IFN0cihzdHJpbmcpW3NwbGl0XShFKSxcbiAgICAgICAgICAgIHNoaWZ0ID0gMCxcbiAgICAgICAgICAgIG5vdGZpcnN0ID0gMCxcbiAgICAgICAgICAgIHBhdGggPSBFLFxuICAgICAgICAgICAgc2NhbGU7XG4gICAgICAgIFIuaXMoZm9udCwgXCJzdHJpbmdcIikgJiYgKGZvbnQgPSB0aGlzLmdldEZvbnQoZm9udCkpO1xuICAgICAgICBpZiAoZm9udCkge1xuICAgICAgICAgICAgc2NhbGUgPSAoc2l6ZSB8fCAxNikgLyBmb250LmZhY2VbXCJ1bml0cy1wZXItZW1cIl07XG4gICAgICAgICAgICB2YXIgYmIgPSBmb250LmZhY2UuYmJveFtzcGxpdF0oc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICB0b3AgPSArYmJbMF0sXG4gICAgICAgICAgICAgICAgbGluZUhlaWdodCA9IGJiWzNdIC0gYmJbMV0sXG4gICAgICAgICAgICAgICAgc2hpZnR5ID0gMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSArYmJbMV0gKyAob3JpZ2luID09IFwiYmFzZWxpbmVcIiA/IGxpbmVIZWlnaHQgKyAoK2ZvbnQuZmFjZS5kZXNjZW50KSA6IGxpbmVIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxldHRlcnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChsZXR0ZXJzW2ldID09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hpZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbm90Zmlyc3QgPSAwO1xuICAgICAgICAgICAgICAgICAgICBzaGlmdHkgKz0gbGluZUhlaWdodCAqIGxpbmVfc3BhY2luZztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldiA9IG5vdGZpcnN0ICYmIGZvbnQuZ2x5cGhzW2xldHRlcnNbaSAtIDFdXSB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBmb250LmdseXBoc1tsZXR0ZXJzW2ldXTtcbiAgICAgICAgICAgICAgICAgICAgc2hpZnQgKz0gbm90Zmlyc3QgPyAocHJldi53IHx8IGZvbnQudykgKyAocHJldi5rICYmIHByZXYua1tsZXR0ZXJzW2ldXSB8fCAwKSArIChmb250LncgKiBsZXR0ZXJfc3BhY2luZykgOiAwO1xuICAgICAgICAgICAgICAgICAgICBub3RmaXJzdCA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJyICYmIGN1cnIuZCkge1xuICAgICAgICAgICAgICAgICAgICBwYXRoICs9IFIudHJhbnNmb3JtUGF0aChjdXJyLmQsIFtcInRcIiwgc2hpZnQgKiBzY2FsZSwgc2hpZnR5ICogc2NhbGUsIFwic1wiLCBzY2FsZSwgc2NhbGUsIHRvcCwgaGVpZ2h0LCBcInRcIiwgKHggLSB0b3ApIC8gc2NhbGUsICh5IC0gaGVpZ2h0KSAvIHNjYWxlXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgocGF0aCkuYXR0cih7XG4gICAgICAgICAgICBmaWxsOiBcIiMwMDBcIixcbiAgICAgICAgICAgIHN0cm9rZTogXCJub25lXCJcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qXFxcbiAgICAgKiBQYXBlci5hZGRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEltcG9ydHMgZWxlbWVudHMgaW4gSlNPTiBhcnJheSBpbiBmb3JtYXQgYHt0eXBlOiB0eXBlLCA8YXR0cmlidXRlcz59YFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBqc29uIChhcnJheSlcbiAgICAgPSAob2JqZWN0KSByZXN1bHRpbmcgc2V0IG9mIGltcG9ydGVkIGVsZW1lbnRzXG4gICAgID4gVXNhZ2VcbiAgICAgfCBwYXBlci5hZGQoW1xuICAgICB8ICAgICB7XG4gICAgIHwgICAgICAgICB0eXBlOiBcImNpcmNsZVwiLFxuICAgICB8ICAgICAgICAgY3g6IDEwLFxuICAgICB8ICAgICAgICAgY3k6IDEwLFxuICAgICB8ICAgICAgICAgcjogNVxuICAgICB8ICAgICB9LFxuICAgICB8ICAgICB7XG4gICAgIHwgICAgICAgICB0eXBlOiBcInJlY3RcIixcbiAgICAgfCAgICAgICAgIHg6IDEwLFxuICAgICB8ICAgICAgICAgeTogMTAsXG4gICAgIHwgICAgICAgICB3aWR0aDogMTAsXG4gICAgIHwgICAgICAgICBoZWlnaHQ6IDEwLFxuICAgICB8ICAgICAgICAgZmlsbDogXCIjZmMwXCJcbiAgICAgfCAgICAgfVxuICAgICB8IF0pO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmFkZCA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgIGlmIChSLmlzKGpzb24sIFwiYXJyYXlcIikpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSB0aGlzLnNldCgpLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGlpID0ganNvbi5sZW5ndGgsXG4gICAgICAgICAgICAgICAgajtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGogPSBqc29uW2ldIHx8IHt9O1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2hhc10oai50eXBlKSAmJiByZXMucHVzaCh0aGlzW2oudHlwZV0oKS5hdHRyKGopKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5mb3JtYXRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFNpbXBsZSBmb3JtYXQgZnVuY3Rpb24uIFJlcGxhY2VzIGNvbnN0cnVjdGlvbiBvZiB0eXBlIOKAnGB7PG51bWJlcj59YOKAnSB0byB0aGUgY29ycmVzcG9uZGluZyBhcmd1bWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gdG9rZW4gKHN0cmluZykgc3RyaW5nIHRvIGZvcm1hdFxuICAgICAtIOKApiAoc3RyaW5nKSByZXN0IG9mIGFyZ3VtZW50cyB3aWxsIGJlIHRyZWF0ZWQgYXMgcGFyYW1ldGVycyBmb3IgcmVwbGFjZW1lbnRcbiAgICAgPSAoc3RyaW5nKSBmb3JtYXRlZCBzdHJpbmdcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciB4ID0gMTAsXG4gICAgIHwgICAgIHkgPSAyMCxcbiAgICAgfCAgICAgd2lkdGggPSA0MCxcbiAgICAgfCAgICAgaGVpZ2h0ID0gNTA7XG4gICAgIHwgLy8gdGhpcyB3aWxsIGRyYXcgYSByZWN0YW5ndWxhciBzaGFwZSBlcXVpdmFsZW50IHRvIFwiTTEwLDIwaDQwdjUwaC00MHpcIlxuICAgICB8IHBhcGVyLnBhdGgoUmFwaGFlbC5mb3JtYXQoXCJNezB9LHsxfWh7Mn12ezN9aHs0fXpcIiwgeCwgeSwgd2lkdGgsIGhlaWdodCwgLXdpZHRoKSk7XG4gICAgXFwqL1xuICAgIFIuZm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBSLmlzKHBhcmFtcywgYXJyYXkpID8gWzBdW2NvbmNhdF0ocGFyYW1zKSA6IGFyZ3VtZW50cztcbiAgICAgICAgdG9rZW4gJiYgUi5pcyh0b2tlbiwgc3RyaW5nKSAmJiBhcmdzLmxlbmd0aCAtIDEgJiYgKHRva2VuID0gdG9rZW4ucmVwbGFjZShmb3JtYXRyZywgZnVuY3Rpb24gKHN0ciwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3NbKytpXSA9PSBudWxsID8gRSA6IGFyZ3NbaV07XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHRva2VuIHx8IEU7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5mdWxsZmlsbFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQSBsaXR0bGUgYml0IG1vcmUgYWR2YW5jZWQgZm9ybWF0IGZ1bmN0aW9uIHRoYW4gQFJhcGhhZWwuZm9ybWF0LiBSZXBsYWNlcyBjb25zdHJ1Y3Rpb24gb2YgdHlwZSDigJxgezxuYW1lPn1g4oCdIHRvIHRoZSBjb3JyZXNwb25kaW5nIGFyZ3VtZW50LlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB0b2tlbiAoc3RyaW5nKSBzdHJpbmcgdG8gZm9ybWF0XG4gICAgIC0ganNvbiAob2JqZWN0KSBvYmplY3Qgd2hpY2ggcHJvcGVydGllcyB3aWxsIGJlIHVzZWQgYXMgYSByZXBsYWNlbWVudFxuICAgICA9IChzdHJpbmcpIGZvcm1hdGVkIHN0cmluZ1xuICAgICA+IFVzYWdlXG4gICAgIHwgLy8gdGhpcyB3aWxsIGRyYXcgYSByZWN0YW5ndWxhciBzaGFwZSBlcXVpdmFsZW50IHRvIFwiTTEwLDIwaDQwdjUwaC00MHpcIlxuICAgICB8IHBhcGVyLnBhdGgoUmFwaGFlbC5mdWxsZmlsbChcIk17eH0se3l9aHtkaW0ud2lkdGh9dntkaW0uaGVpZ2h0fWh7ZGltWyduZWdhdGl2ZSB3aWR0aCddfXpcIiwge1xuICAgICB8ICAgICB4OiAxMCxcbiAgICAgfCAgICAgeTogMjAsXG4gICAgIHwgICAgIGRpbToge1xuICAgICB8ICAgICAgICAgd2lkdGg6IDQwLFxuICAgICB8ICAgICAgICAgaGVpZ2h0OiA1MCxcbiAgICAgfCAgICAgICAgIFwibmVnYXRpdmUgd2lkdGhcIjogLTQwXG4gICAgIHwgICAgIH1cbiAgICAgfCB9KSk7XG4gICAgXFwqL1xuICAgIFIuZnVsbGZpbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW5SZWdleCA9IC9cXHsoW15cXH1dKylcXH0vZyxcbiAgICAgICAgICAgIG9iak5vdGF0aW9uUmVnZXggPSAvKD86KD86XnxcXC4pKC4rPykoPz1cXFt8XFwufCR8XFwoKXxcXFsoJ3xcIikoLis/KVxcMlxcXSkoXFwoXFwpKT8vZywgLy8gbWF0Y2hlcyAueHh4eHggb3IgW1wieHh4eHhcIl0gdG8gcnVuIG92ZXIgb2JqZWN0IHByb3BlcnRpZXNcbiAgICAgICAgICAgIHJlcGxhY2VyID0gZnVuY3Rpb24gKGFsbCwga2V5LCBvYmopIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gb2JqO1xuICAgICAgICAgICAgICAgIGtleS5yZXBsYWNlKG9iak5vdGF0aW9uUmVnZXgsIGZ1bmN0aW9uIChhbGwsIG5hbWUsIHF1b3RlLCBxdW90ZWROYW1lLCBpc0Z1bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUgfHwgcXVvdGVkTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgaW4gcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHJlcyA9PSBcImZ1bmN0aW9uXCIgJiYgaXNGdW5jICYmIChyZXMgPSByZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXMgPSAocmVzID09IG51bGwgfHwgcmVzID09IG9iaiA/IGFsbCA6IHJlcykgKyBcIlwiO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0ciwgb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSh0b2tlblJlZ2V4LCBmdW5jdGlvbiAoYWxsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZXIoYWxsLCBrZXksIG9iaik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLm5pbmphXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJZiB5b3Ugd2FudCB0byBsZWF2ZSBubyB0cmFjZSBvZiBSYXBoYcOrbCAoV2VsbCwgUmFwaGHDq2wgY3JlYXRlcyBvbmx5IG9uZSBnbG9iYWwgdmFyaWFibGUgYFJhcGhhZWxgLCBidXQgYW55d2F5LikgWW91IGNhbiB1c2UgYG5pbmphYCBtZXRob2QuXG4gICAgICogQmV3YXJlLCB0aGF0IGluIHRoaXMgY2FzZSBwbHVnaW5zIGNvdWxkIHN0b3Agd29ya2luZywgYmVjYXVzZSB0aGV5IGFyZSBkZXBlbmRpbmcgb24gZ2xvYmFsIHZhcmlhYmxlIGV4aXN0ZW5jZS5cbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBSYXBoYWVsIG9iamVjdFxuICAgICA+IFVzYWdlXG4gICAgIHwgKGZ1bmN0aW9uIChsb2NhbF9yYXBoYWVsKSB7XG4gICAgIHwgICAgIHZhciBwYXBlciA9IGxvY2FsX3JhcGhhZWwoMTAsIDEwLCAzMjAsIDIwMCk7XG4gICAgIHwgICAgIOKAplxuICAgICB8IH0pKFJhcGhhZWwubmluamEoKSk7XG4gICAgXFwqL1xuICAgIFIubmluamEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChvbGRSYXBoYWVsLndhcykge1xuICAgICAgICAgICAgZy53aW4uUmFwaGFlbCA9IG9sZFJhcGhhZWwuaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJRTggcmFpc2VzIGFuIGVycm9yIHdoZW4gZGVsZXRpbmcgd2luZG93IHByb3BlcnR5XG4gICAgICAgICAgICB3aW5kb3cuUmFwaGFlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy5SYXBoYWVsO1xuICAgICAgICAgICAgfSBjYXRjaChlKSB7fVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuc3RcbiAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICoqXG4gICAgICogWW91IGNhbiBhZGQgeW91ciBvd24gbWV0aG9kIHRvIGVsZW1lbnRzIGFuZCBzZXRzLiBJdCBpcyB3aXNlIHRvIGFkZCBhIHNldCBtZXRob2QgZm9yIGVhY2ggZWxlbWVudCBtZXRob2RcbiAgICAgKiB5b3UgYWRkZWQsIHNvIHlvdSB3aWxsIGJlIGFibGUgdG8gY2FsbCB0aGUgc2FtZSBtZXRob2Qgb24gc2V0cyB0b28uXG4gICAgICoqXG4gICAgICogU2VlIGFsc28gQFJhcGhhZWwuZWwuXG4gICAgID4gVXNhZ2VcbiAgICAgfCBSYXBoYWVsLmVsLnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgfCAgICAgdGhpcy5hdHRyKHtmaWxsOiBcIiNmMDBcIn0pO1xuICAgICB8IH07XG4gICAgIHwgUmFwaGFlbC5zdC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgIHwgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgfCAgICAgICAgIGVsLnJlZCgpO1xuICAgICB8ICAgICB9KTtcbiAgICAgfCB9O1xuICAgICB8IC8vIHRoZW4gdXNlIGl0XG4gICAgIHwgcGFwZXIuc2V0KHBhcGVyLmNpcmNsZSgxMDAsIDEwMCwgMjApLCBwYXBlci5jaXJjbGUoMTEwLCAxMDAsIDIwKSkucmVkKCk7XG4gICAgXFwqL1xuICAgIFIuc3QgPSBzZXRwcm90bztcblxuICAgIGV2ZS5vbihcInJhcGhhZWwuRE9NbG9hZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgfSk7XG5cbiAgICAvLyBGaXJlZm94IDwzLjYgZml4OiBodHRwOi8vd2VicmVmbGVjdGlvbi5ibG9nc3BvdC5jb20vMjAwOS8xMS8xOTUtY2hhcnMtdG8taGVscC1sYXp5LWxvYWRpbmcuaHRtbFxuICAgIChmdW5jdGlvbiAoZG9jLCBsb2FkZWQsIGYpIHtcbiAgICAgICAgaWYgKGRvYy5yZWFkeVN0YXRlID09IG51bGwgJiYgZG9jLmFkZEV2ZW50TGlzdGVuZXIpe1xuICAgICAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIobG9hZGVkLCBmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKGxvYWRlZCwgZiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRvYy5yZWFkeVN0YXRlID0gXCJjb21wbGV0ZVwiO1xuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICAgICAgZG9jLnJlYWR5U3RhdGUgPSBcImxvYWRpbmdcIjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpc0xvYWRlZCgpIHtcbiAgICAgICAgICAgICgvaW4vKS50ZXN0KGRvYy5yZWFkeVN0YXRlKSA/IHNldFRpbWVvdXQoaXNMb2FkZWQsIDkpIDogUi5ldmUoXCJyYXBoYWVsLkRPTWxvYWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaXNMb2FkZWQoKTtcbiAgICB9KShkb2N1bWVudCwgXCJET01Db250ZW50TG9hZGVkXCIpO1xuXG4gICAgcmV0dXJuIFI7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./dev/raphael.core.js\n')},"./dev/raphael.svg.js":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ "./dev/raphael.core.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n    if (R && !R.svg) {\n        return;\n    }\n\n    var has = "hasOwnProperty",\n        Str = String,\n        toFloat = parseFloat,\n        toInt = parseInt,\n        math = Math,\n        mmax = math.max,\n        abs = math.abs,\n        pow = math.pow,\n        separator = /[, ]+/,\n        eve = R.eve,\n        E = "",\n        S = " ";\n    var xlink = "http://www.w3.org/1999/xlink",\n        markers = {\n            block: "M5,0 0,2.5 5,5z",\n            classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z",\n            diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z",\n            open: "M6,1 1,3.5 6,6",\n            oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"\n        },\n        markerCounter = {};\n    R.toString = function () {\n        return  "Your browser supports SVG.\\nYou are running Rapha\\xebl " + this.version;\n    };\n    var $ = function (el, attr) {\n        if (attr) {\n            if (typeof el == "string") {\n                el = $(el);\n            }\n            for (var key in attr) if (attr[has](key)) {\n                if (key.substring(0, 6) == "xlink:") {\n                    el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));\n                } else {\n                    el.setAttribute(key, Str(attr[key]));\n                }\n            }\n        } else {\n            el = R._g.doc.createElementNS("http://www.w3.org/2000/svg", el);\n            el.style && (el.style.webkitTapHighlightColor = "rgba(0,0,0,0)");\n        }\n        return el;\n    },\n    addGradientFill = function (element, gradient) {\n        var type = "linear",\n            id = element.id + gradient,\n            fx = .5, fy = .5,\n            o = element.node,\n            SVG = element.paper,\n            s = o.style,\n            el = R._g.doc.getElementById(id);\n        if (!el) {\n            gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {\n                type = "radial";\n                if (_fx && _fy) {\n                    fx = toFloat(_fx);\n                    fy = toFloat(_fy);\n                    var dir = ((fy > .5) * 2 - 1);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&\n                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&\n                        fy != .5 &&\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\n                }\n                return E;\n            });\n            gradient = gradient.split(/\\s*\\-\\s*/);\n            if (type == "linear") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n                var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],\n                    max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n                vector[2] *= max;\n                vector[3] *= max;\n                if (vector[2] < 0) {\n                    vector[0] = -vector[2];\n                    vector[2] = 0;\n                }\n                if (vector[3] < 0) {\n                    vector[1] = -vector[3];\n                    vector[3] = 0;\n                }\n            }\n            var dots = R._parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            id = id.replace(/[\\(\\)\\s,\\xb0#]/g, "_");\n\n            if (element.gradient && id != element.gradient.id) {\n                SVG.defs.removeChild(element.gradient);\n                delete element.gradient;\n            }\n\n            if (!element.gradient) {\n                el = $(type + "Gradient", {id: id});\n                element.gradient = el;\n                $(el, type == "radial" ? {\n                    fx: fx,\n                    fy: fy\n                } : {\n                    x1: vector[0],\n                    y1: vector[1],\n                    x2: vector[2],\n                    y2: vector[3],\n                    gradientTransform: element.matrix.invert()\n                });\n                SVG.defs.appendChild(el);\n                for (var i = 0, ii = dots.length; i < ii; i++) {\n                    el.appendChild($("stop", {\n                        offset: dots[i].offset ? dots[i].offset : i ? "100%" : "0%",\n                        "stop-color": dots[i].color || "#fff",\n                        "stop-opacity": isFinite(dots[i].opacity) ? dots[i].opacity : 1\n                    }));\n                }\n            }\n        }\n        $(o, {\n            fill: fillurl(id),\n            opacity: 1,\n            "fill-opacity": 1\n        });\n        s.fill = E;\n        s.opacity = 1;\n        s.fillOpacity = 1;\n        return 1;\n    },\n    isIE9or10 = function () {\n      var mode = document.documentMode;\n      return mode && (mode === 9 || mode === 10);\n    },\n    fillurl = function (id) {\n      if (isIE9or10()) {\n          return "url(\'#" + id + "\')";\n      }\n      var location = document.location;\n      var locationString = (\n          location.protocol + \'//\' +\n          location.host +\n          location.pathname +\n          location.search\n      );\n      return "url(\'" + locationString + "#" + id + "\')";\n    },\n    updatePosition = function (o) {\n        var bbox = o.getBBox(1);\n        $(o.pattern, {patternTransform: o.matrix.invert() + " translate(" + bbox.x + "," + bbox.y + ")"});\n    },\n    addArrow = function (o, value, isEnd) {\n        if (o.type == "path") {\n            var values = Str(value).toLowerCase().split("-"),\n                p = o.paper,\n                se = isEnd ? "end" : "start",\n                node = o.node,\n                attrs = o.attrs,\n                stroke = attrs["stroke-width"],\n                i = values.length,\n                type = "classic",\n                from,\n                to,\n                dx,\n                refX,\n                attr,\n                w = 3,\n                h = 3,\n                t = 5;\n            while (i--) {\n                switch (values[i]) {\n                    case "block":\n                    case "classic":\n                    case "oval":\n                    case "diamond":\n                    case "open":\n                    case "none":\n                        type = values[i];\n                        break;\n                    case "wide": h = 5; break;\n                    case "narrow": h = 2; break;\n                    case "long": w = 5; break;\n                    case "short": w = 2; break;\n                }\n            }\n            if (type == "open") {\n                w += 2;\n                h += 2;\n                t += 2;\n                dx = 1;\n                refX = isEnd ? 4 : 1;\n                attr = {\n                    fill: "none",\n                    stroke: attrs.stroke\n                };\n            } else {\n                refX = dx = w / 2;\n                attr = {\n                    fill: attrs.stroke,\n                    stroke: "none"\n                };\n            }\n            if (o._.arrows) {\n                if (isEnd) {\n                    o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\n                    o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\n                } else {\n                    o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\n                    o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\n                }\n            } else {\n                o._.arrows = {};\n            }\n            if (type != "none") {\n                var pathId = "raphael-marker-" + type,\n                    markerId = "raphael-marker-" + se + type + w + h + "-obj" + o.id;\n                if (!R._g.doc.getElementById(pathId)) {\n                    p.defs.appendChild($($("path"), {\n                        "stroke-linecap": "round",\n                        d: markers[type],\n                        id: pathId\n                    }));\n                    markerCounter[pathId] = 1;\n                } else {\n                    markerCounter[pathId]++;\n                }\n                var marker = R._g.doc.getElementById(markerId),\n                    use;\n                if (!marker) {\n                    marker = $($("marker"), {\n                        id: markerId,\n                        markerHeight: h,\n                        markerWidth: w,\n                        orient: "auto",\n                        refX: refX,\n                        refY: h / 2\n                    });\n                    use = $($("use"), {\n                        "xlink:href": "#" + pathId,\n                        transform: (isEnd ? "rotate(180 " + w / 2 + " " + h / 2 + ") " : E) + "scale(" + w / t + "," + h / t + ")",\n                        "stroke-width": (1 / ((w / t + h / t) / 2)).toFixed(4)\n                    });\n                    marker.appendChild(use);\n                    p.defs.appendChild(marker);\n                    markerCounter[markerId] = 1;\n                } else {\n                    markerCounter[markerId]++;\n                    use = marker.getElementsByTagName("use")[0];\n                }\n                $(use, attr);\n                var delta = dx * (type != "diamond" && type != "oval");\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - delta * stroke;\n                } else {\n                    from = delta * stroke;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                attr = {};\n                attr["marker-" + se] = "url(#" + markerId + ")";\n                if (to || from) {\n                    attr.d = R.getSubpath(attrs.path, from, to);\n                }\n                $(node, attr);\n                o._.arrows[se + "Path"] = pathId;\n                o._.arrows[se + "Marker"] = markerId;\n                o._.arrows[se + "dx"] = delta;\n                o._.arrows[se + "Type"] = type;\n                o._.arrows[se + "String"] = value;\n            } else {\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - from;\n                } else {\n                    from = 0;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                o._.arrows[se + "Path"] && $(node, {d: R.getSubpath(attrs.path, from, to)});\n                delete o._.arrows[se + "Path"];\n                delete o._.arrows[se + "Marker"];\n                delete o._.arrows[se + "dx"];\n                delete o._.arrows[se + "Type"];\n                delete o._.arrows[se + "String"];\n            }\n            for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {\n                var item = R._g.doc.getElementById(attr);\n                item && item.parentNode.removeChild(item);\n            }\n        }\n    },\n    dasharray = {\n        "-": [3, 1],\n        ".": [1, 1],\n        "-.": [3, 1, 1, 1],\n        "-..": [3, 1, 1, 1, 1, 1],\n        ". ": [1, 3],\n        "- ": [4, 3],\n        "--": [8, 3],\n        "- .": [4, 3, 1, 3],\n        "--.": [8, 3, 1, 3],\n        "--..": [8, 3, 1, 3, 1, 3]\n    },\n    addDashes = function (o, value, params) {\n        value = dasharray[Str(value).toLowerCase()];\n        if (value) {\n            var width = o.attrs["stroke-width"] || "1",\n                butt = {round: width, square: width, butt: 0}[o.attrs["stroke-linecap"] || params["stroke-linecap"]] || 0,\n                dashes = [],\n                i = value.length;\n            while (i--) {\n                dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;\n            }\n            $(o.node, {"stroke-dasharray": dashes.join(",")});\n        }\n        else {\n          $(o.node, {"stroke-dasharray": "none"});\n        }\n    },\n    setFillAndStroke = function (o, params) {\n        var node = o.node,\n            attrs = o.attrs,\n            vis = node.style.visibility;\n        node.style.visibility = "hidden";\n        for (var att in params) {\n            if (params[has](att)) {\n                if (!R._availableAttrs[has](att)) {\n                    continue;\n                }\n                var value = params[att];\n                attrs[att] = value;\n                switch (att) {\n                    case "blur":\n                        o.blur(value);\n                        break;\n                    case "title":\n                        var title = node.getElementsByTagName("title");\n\n                        // Use the existing <title>.\n                        if (title.length && (title = title[0])) {\n                          title.firstChild.nodeValue = value;\n                        } else {\n                          title = $("title");\n                          var val = R._g.doc.createTextNode(value);\n                          title.appendChild(val);\n                          node.appendChild(title);\n                        }\n                        break;\n                    case "href":\n                    case "target":\n                        var pn = node.parentNode;\n                        if (pn.tagName.toLowerCase() != "a") {\n                            var hl = $("a");\n                            pn.insertBefore(hl, node);\n                            hl.appendChild(node);\n                            pn = hl;\n                        }\n                        if (att == "target") {\n                            pn.setAttributeNS(xlink, "show", value == "blank" ? "new" : value);\n                        } else {\n                            pn.setAttributeNS(xlink, att, value);\n                        }\n                        break;\n                    case "cursor":\n                        node.style.cursor = value;\n                        break;\n                    case "transform":\n                        o.transform(value);\n                        break;\n                    case "arrow-start":\n                        addArrow(o, value);\n                        break;\n                    case "arrow-end":\n                        addArrow(o, value, 1);\n                        break;\n                    case "clip-rect":\n                        var rect = Str(value).split(separator);\n                        if (rect.length == 4) {\n                            o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\n                            var el = $("clipPath"),\n                                rc = $("rect");\n                            el.id = R.createUUID();\n                            $(rc, {\n                                x: rect[0],\n                                y: rect[1],\n                                width: rect[2],\n                                height: rect[3]\n                            });\n                            el.appendChild(rc);\n                            o.paper.defs.appendChild(el);\n                            $(node, {"clip-path": "url(#" + el.id + ")"});\n                            o.clip = rc;\n                        }\n                        if (!value) {\n                            var path = node.getAttribute("clip-path");\n                            if (path) {\n                                var clip = R._g.doc.getElementById(path.replace(/(^url\\(#|\\)$)/g, E));\n                                clip && clip.parentNode.removeChild(clip);\n                                $(node, {"clip-path": E});\n                                delete o.clip;\n                            }\n                        }\n                    break;\n                    case "path":\n                        if (o.type == "path") {\n                            $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : "M0,0"});\n                            o._.dirty = 1;\n                            if (o._.arrows) {\n                                "startString" in o._.arrows && addArrow(o, o._.arrows.startString);\n                                "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                            }\n                        }\n                        break;\n                    case "width":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fx) {\n                            att = "x";\n                            value = attrs.x;\n                        } else {\n                            break;\n                        }\n                    case "x":\n                        if (attrs.fx) {\n                            value = -attrs.x - (attrs.width || 0);\n                        }\n                    case "rx":\n                        if (att == "rx" && o.type == "rect") {\n                            break;\n                        }\n                    case "cx":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case "height":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fy) {\n                            att = "y";\n                            value = attrs.y;\n                        } else {\n                            break;\n                        }\n                    case "y":\n                        if (attrs.fy) {\n                            value = -attrs.y - (attrs.height || 0);\n                        }\n                    case "ry":\n                        if (att == "ry" && o.type == "rect") {\n                            break;\n                        }\n                    case "cy":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case "r":\n                        if (o.type == "rect") {\n                            $(node, {rx: value, ry: value});\n                        } else {\n                            node.setAttribute(att, value);\n                        }\n                        o._.dirty = 1;\n                        break;\n                    case "src":\n                        if (o.type == "image") {\n                            node.setAttributeNS(xlink, "href", value);\n                        }\n                        break;\n                    case "stroke-width":\n                        if (o._.sx != 1 || o._.sy != 1) {\n                            value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\n                        }\n                        node.setAttribute(att, value);\n                        if (attrs["stroke-dasharray"]) {\n                            addDashes(o, attrs["stroke-dasharray"], params);\n                        }\n                        if (o._.arrows) {\n                            "startString" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case "stroke-dasharray":\n                        addDashes(o, value, params);\n                        break;\n                    case "fill":\n                        var isURL = Str(value).match(R._ISURL);\n                        if (isURL) {\n                            el = $("pattern");\n                            var ig = $("image");\n                            el.id = R.createUUID();\n                            $(el, {x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1});\n                            $(ig, {x: 0, y: 0, "xlink:href": isURL[1]});\n                            el.appendChild(ig);\n\n                            (function (el) {\n                                R._preload(isURL[1], function () {\n                                    var w = this.offsetWidth,\n                                        h = this.offsetHeight;\n                                    $(el, {width: w, height: h});\n                                    $(ig, {width: w, height: h});\n                                });\n                            })(el);\n                            o.paper.defs.appendChild(el);\n                            $(node, {fill: "url(#" + el.id + ")"});\n                            o.pattern = el;\n                            o.pattern && updatePosition(o);\n                            break;\n                        }\n                        var clr = R.getRGB(value);\n                        if (!clr.error) {\n                            delete params.gradient;\n                            delete attrs.gradient;\n                            !R.is(attrs.opacity, "undefined") &&\n                                R.is(params.opacity, "undefined") &&\n                                $(node, {opacity: attrs.opacity});\n                            !R.is(attrs["fill-opacity"], "undefined") &&\n                                R.is(params["fill-opacity"], "undefined") &&\n                                $(node, {"fill-opacity": attrs["fill-opacity"]});\n                        } else if ((o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value)) {\n                            if ("opacity" in attrs || "fill-opacity" in attrs) {\n                                var gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\\(#|\\)$/g, E));\n                                if (gradient) {\n                                    var stops = gradient.getElementsByTagName("stop");\n                                    $(stops[stops.length - 1], {"stop-opacity": ("opacity" in attrs ? attrs.opacity : 1) * ("fill-opacity" in attrs ? attrs["fill-opacity"] : 1)});\n                                }\n                            }\n                            attrs.gradient = value;\n                            attrs.fill = "none";\n                            break;\n                        }\n                        clr[has]("opacity") && $(node, {"fill-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                    case "stroke":\n                        clr = R.getRGB(value);\n                        node.setAttribute(att, clr.hex);\n                        att == "stroke" && clr[has]("opacity") && $(node, {"stroke-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                        if (att == "stroke" && o._.arrows) {\n                            "startString" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case "gradient":\n                        (o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value);\n                        break;\n                    case "opacity":\n                        if (attrs.gradient && !attrs[has]("stroke-opacity")) {\n                            $(node, {"stroke-opacity": value > 1 ? value / 100 : value});\n                        }\n                        // fall\n                    case "fill-opacity":\n                        if (attrs.gradient) {\n                            gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\\(#|\\)$/g, E));\n                            if (gradient) {\n                                stops = gradient.getElementsByTagName("stop");\n                                $(stops[stops.length - 1], {"stop-opacity": value});\n                            }\n                            break;\n                        }\n                    default:\n                        att == "font-size" && (value = toInt(value, 10) + "px");\n                        var cssrule = att.replace(/(\\-.)/g, function (w) {\n                            return w.substring(1).toUpperCase();\n                        });\n                        node.style[cssrule] = value;\n                        o._.dirty = 1;\n                        node.setAttribute(att, value);\n                        break;\n                }\n            }\n        }\n\n        tuneText(o, params);\n        node.style.visibility = vis;\n    },\n    leading = 1.2,\n    tuneText = function (el, params) {\n        if (el.type != "text" || !(params[has]("text") || params[has]("font") || params[has]("font-size") || params[has]("x") || params[has]("y"))) {\n            return;\n        }\n        var a = el.attrs,\n            node = el.node,\n            fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue("font-size"), 10) : 10;\n\n        if (params[has]("text")) {\n            a.text = params.text;\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n            var texts = Str(params.text).split("\\n"),\n                tspans = [],\n                tspan;\n            for (var i = 0, ii = texts.length; i < ii; i++) {\n                tspan = $("tspan");\n                i && $(tspan, {dy: fontSize * leading, x: a.x});\n                tspan.appendChild(R._g.doc.createTextNode(texts[i]));\n                node.appendChild(tspan);\n                tspans[i] = tspan;\n            }\n        } else {\n            tspans = node.getElementsByTagName("tspan");\n            for (i = 0, ii = tspans.length; i < ii; i++) if (i) {\n                $(tspans[i], {dy: fontSize * leading, x: a.x});\n            } else {\n                $(tspans[0], {dy: 0});\n            }\n        }\n        $(node, {x: a.x, y: a.y});\n        el._.dirty = 1;\n        var bb = el._getBBox(),\n            dif = a.y - (bb.y + bb.height / 2);\n        dif && R.is(dif, "finite") && $(tspans[0], {dy: dif});\n    },\n    getRealNode = function (node) {\n        if (node.parentNode && node.parentNode.tagName.toLowerCase() === "a") {\n            return node.parentNode;\n        } else {\n            return node;\n        }\n    },\n    Element = function (node, svg) {\n        var X = 0,\n            Y = 0;\n        /*\\\n         * Element.node\n         [ property (object) ]\n         **\n         * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\n         **\n         * Note: Don\u2019t mess with it.\n         > Usage\n         | // draw a circle at coordinate 10,10 with radius of 10\n         | var c = paper.circle(10, 10, 10);\n         | c.node.onclick = function () {\n         |     c.attr("fill", "red");\n         | };\n        \\*/\n        this[0] = this.node = node;\n        /*\\\n         * Element.raphael\n         [ property (object) ]\n         **\n         * Internal reference to @Raphael object. In case it is not available.\n         > Usage\n         | Raphael.el.red = function () {\n         |     var hsb = this.paper.raphael.rgb2hsb(this.attr("fill"));\n         |     hsb.h = 1;\n         |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});\n         | }\n        \\*/\n        node.raphael = true;\n        /*\\\n         * Element.id\n         [ property (number) ]\n         **\n         * Unique id of the element. Especially useful when you want to listen to events of the element,\n         * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.\n        \\*/\n        this.id = guid();\n        node.raphaelid = this.id;\n\n        /**\n        * Method that returns a 5 letter/digit id, enough for 36^5 = 60466176 elements\n        * @returns {string} id\n        */\n        function guid() {\n            return ("0000" + (Math.random()*Math.pow(36,5) << 0).toString(36)).slice(-5);\n        }\n\n        this.matrix = R.matrix();\n        this.realPath = null;\n        /*\\\n         * Element.paper\n         [ property (object) ]\n         **\n         * Internal reference to \u201cpaper\u201d where object drawn. Mainly for use in plugins and element extensions.\n         > Usage\n         | Raphael.el.cross = function () {\n         |     this.attr({fill: "red"});\n         |     this.paper.path("M10,10L50,50M50,10L10,50")\n         |         .attr({stroke: "red"});\n         | }\n        \\*/\n        this.paper = svg;\n        this.attrs = this.attrs || {};\n        this._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            deg: 0,\n            dx: 0,\n            dy: 0,\n            dirty: 1\n        };\n        !svg.bottom && (svg.bottom = this);\n        /*\\\n         * Element.prev\n         [ property (object) ]\n         **\n         * Reference to the previous element in the hierarchy.\n        \\*/\n        this.prev = svg.top;\n        svg.top && (svg.top.next = this);\n        svg.top = this;\n        /*\\\n         * Element.next\n         [ property (object) ]\n         **\n         * Reference to the next element in the hierarchy.\n        \\*/\n        this.next = null;\n    },\n    elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n\n    R._engine.path = function (pathString, SVG) {\n        var el = $("path");\n        SVG.canvas && SVG.canvas.appendChild(el);\n        var p = new Element(el, SVG);\n        p.type = "path";\n        setFillAndStroke(p, {\n            fill: "none",\n            stroke: "#000",\n            path: pathString\n        });\n        return p;\n    };\n    /*\\\n     * Element.rotate\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds rotation by given angle around given point to the list of\n     * transformations of the element.\n     > Parameters\n     - deg (number) angle in degrees\n     - cx (number) #optional x coordinate of the centre of rotation\n     - cy (number) #optional y coordinate of the centre of rotation\n     * If cx & cy aren\u2019t specified centre of the shape is used as a point of rotation.\n     = (object) @Element\n    \\*/\n    elproto.rotate = function (deg, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        this.transform(this._.transform.concat([["r", deg, cx, cy]]));\n        return this;\n    };\n    /*\\\n     * Element.scale\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds scale by given amount relative to given point to the list of\n     * transformations of the element.\n     > Parameters\n     - sx (number) horisontal scale amount\n     - sy (number) vertical scale amount\n     - cx (number) #optional x coordinate of the centre of scale\n     - cy (number) #optional y coordinate of the centre of scale\n     * If cx & cy aren\u2019t specified centre of the shape is used instead.\n     = (object) @Element\n    \\*/\n    elproto.scale = function (sx, sy, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));\n        return this;\n    };\n    /*\\\n     * Element.translate\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds translation by given amount to the list of transformations of the element.\n     > Parameters\n     - dx (number) horisontal shift\n     - dy (number) vertical shift\n     = (object) @Element\n    \\*/\n    elproto.translate = function (dx, dy) {\n        if (this.removed) {\n            return this;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        this.transform(this._.transform.concat([["t", dx, dy]]));\n        return this;\n    };\n    /*\\\n     * Element.transform\n     [ method ]\n     **\n     * Adds transformation to the element which is separate to other attributes,\n     * i.e. translation doesn\u2019t change `x` or `y` of the rectange. The format\n     * of transformation string is similar to the path string syntax:\n     | "t100,100r30,100,100s2,2,100,100r45s1.5"\n     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for\n     * scale and `m` is for matrix.\n     *\n     * There are also alternative \u201cabsolute\u201d translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.\n     *\n     * So, the example line above could be read like \u201ctranslate by 100, 100; rotate 30\xb0 around 100, 100; scale twice around 100, 100;\n     * rotate 45\xb0 around centre; scale 1.5 times relative to centre\u201d. As you can see rotate and scale commands have origin\n     * coordinates as optional parameters, the default is the centre point of the element.\n     * Matrix accepts six parameters.\n     > Usage\n     | var el = paper.rect(10, 20, 300, 200);\n     | // translate 100, 100, rotate 45\xb0, translate -100, 0\n     | el.transform("t100,100r45t-100,0");\n     | // if you want you can append or prepend transformations\n     | el.transform("...t50,50");\n     | el.transform("s2...");\n     | // or even wrap\n     | el.transform("t50,50...t-50-50");\n     | // to reset transformation call method with empty string\n     | el.transform("");\n     | // to get current value call it without parameters\n     | console.log(el.transform());\n     > Parameters\n     - tstr (string) #optional transformation string\n     * If tstr isn\u2019t specified\n     = (string) current transformation string\n     * else\n     = (object) @Element\n    \\*/\n    elproto.transform = function (tstr) {\n        var _ = this._;\n        if (tstr == null) {\n            return _.transform;\n        }\n        R._extractTransform(this, tstr);\n\n        this.clip && $(this.clip, {transform: this.matrix.invert()});\n        this.pattern && updatePosition(this);\n        this.node && $(this.node, {transform: this.matrix});\n\n        if (_.sx != 1 || _.sy != 1) {\n            var sw = this.attrs[has]("stroke-width") ? this.attrs["stroke-width"] : 1;\n            this.attr({"stroke-width": sw});\n        }\n\n        return this;\n    };\n    /*\\\n     * Element.hide\n     [ method ]\n     **\n     * Makes element invisible. See @Element.show.\n     = (object) @Element\n    \\*/\n    elproto.hide = function () {\n        if(!this.removed) this.node.style.display = "none";\n        return this;\n    };\n    /*\\\n     * Element.show\n     [ method ]\n     **\n     * Makes element visible. See @Element.hide.\n     = (object) @Element\n    \\*/\n    elproto.show = function () {\n        if(!this.removed) this.node.style.display = "";\n        return this;\n    };\n    /*\\\n     * Element.remove\n     [ method ]\n     **\n     * Removes element from the paper.\n    \\*/\n    elproto.remove = function () {\n        var node = getRealNode(this.node);\n        if (this.removed || !node.parentNode) {\n            return;\n        }\n        var paper = this.paper;\n        paper.__set__ && paper.__set__.exclude(this);\n        eve.unbind("raphael.*.*." + this.id);\n        if (this.gradient) {\n            paper.defs.removeChild(this.gradient);\n        }\n        R._tear(this, paper);\n\n        node.parentNode.removeChild(node);\n\n        // Remove custom data for element\n        this.removeData();\n\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    elproto._getBBox = function () {\n        if (this.node.style.display == "none") {\n            this.show();\n            var hide = true;\n        }\n        var canvasHidden = false,\n            containerStyle;\n        if (this.paper.canvas.parentElement) {\n          containerStyle = this.paper.canvas.parentElement.style;\n        } //IE10+ can\'t find parentElement\n        else if (this.paper.canvas.parentNode) {\n          containerStyle = this.paper.canvas.parentNode.style;\n        }\n\n        if(containerStyle && containerStyle.display == "none") {\n          canvasHidden = true;\n          containerStyle.display = "";\n        }\n        var bbox = {};\n        try {\n            bbox = this.node.getBBox();\n        } catch(e) {\n            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix\n            bbox = {\n                x: this.node.clientLeft,\n                y: this.node.clientTop,\n                width: this.node.clientWidth,\n                height: this.node.clientHeight\n            }\n        } finally {\n            bbox = bbox || {};\n            if(canvasHidden){\n              containerStyle.display = "none";\n            }\n        }\n        hide && this.hide();\n        return bbox;\n    };\n    /*\\\n     * Element.attr\n     [ method ]\n     **\n     * Sets the attributes of the element.\n     > Parameters\n     - attrName (string) attribute\u2019s name\n     - value (string) value\n     * or\n     - params (object) object of name/value pairs\n     * or\n     - attrName (string) attribute\u2019s name\n     * or\n     - attrNames (array) in this case method returns array of current values for given attribute names\n     = (object) @Element if attrsName & value or params are passed in.\n     = (...) value of the attribute if only attrsName is passed in.\n     = (array) array of values of the attribute if attrsNames is passed in.\n     = (object) object of attributes if nothing is passed in.\n     > Possible parameters\n     # <p>Please refer to the <a href="http://www.w3.org/TR/SVG/" title="The W3C Recommendation for the SVG language describes these properties in detail.">SVG specification</a> for an explanation of these parameters.</p>\n     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.\n     o clip-rect (string) comma or space separated values: x, y, width and height\n     o cursor (string) CSS type of the cursor\n     o cx (number) the x-axis coordinate of the center of the circle, or ellipse\n     o cy (number) the y-axis coordinate of the center of the circle, or ellipse\n     o fill (string) colour, gradient or image\n     o fill-opacity (number)\n     o font (string)\n     o font-family (string)\n     o font-size (number) font size in pixels\n     o font-weight (string)\n     o height (number)\n     o href (string) URL, if specified element behaves as hyperlink\n     o opacity (number)\n     o path (string) SVG path string format\n     o r (number) radius of the circle, ellipse or rounded corner on the rect\n     o rx (number) horisontal radius of the ellipse\n     o ry (number) vertical radius of the ellipse\n     o src (string) image URL, only works for @Element.image element\n     o stroke (string) stroke colour\n     o stroke-dasharray (string) [\u201c\u201d, \u201cnone\u201d, \u201c`-`\u201d, \u201c`.`\u201d, \u201c`-.`\u201d, \u201c`-..`\u201d, \u201c`. `\u201d, \u201c`- `\u201d, \u201c`--`\u201d, \u201c`- .`\u201d, \u201c`--.`\u201d, \u201c`--..`\u201d]\n     o stroke-linecap (string) [\u201c`butt`\u201d, \u201c`square`\u201d, \u201c`round`\u201d]\n     o stroke-linejoin (string) [\u201c`bevel`\u201d, \u201c`round`\u201d, \u201c`miter`\u201d]\n     o stroke-miterlimit (number)\n     o stroke-opacity (number)\n     o stroke-width (number) stroke width in pixels, default is \'1\'\n     o target (string) used with href\n     o text (string) contents of the text element. Use `\\n` for multiline text\n     o text-anchor (string) [\u201c`start`\u201d, \u201c`middle`\u201d, \u201c`end`\u201d], default is \u201c`middle`\u201d\n     o title (string) will create tooltip with a given text\n     o transform (string) see @Element.transform\n     o width (number)\n     o x (number)\n     o y (number)\n     > Gradients\n     * Linear gradient format: \u201c`\u2039angle\u203a-\u2039colour\u203a[-\u2039colour\u203a[:\u2039offset\u203a]]*-\u2039colour\u203a`\u201d, example: \u201c`90-#fff-#000`\u201d \u2013 90\xb0\n     * gradient from white to black or \u201c`0-#fff-#f00:20-#000`\u201d \u2013 0\xb0 gradient from white via red (at 20%) to black.\n     *\n     * radial gradient: \u201c`r[(\u2039fx\u203a, \u2039fy\u203a)]\u2039colour\u203a[-\u2039colour\u203a[:\u2039offset\u203a]]*-\u2039colour\u203a`\u201d, example: \u201c`r#fff-#000`\u201d \u2013\n     * gradient from white to black or \u201c`r(0.25, 0.75)#fff-#000`\u201d \u2013 gradient from white to black with focus point\n     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.\n     > Path String\n     # <p>Please refer to <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a path\u2019s data attribute\u2019s format are described in the SVG specification.">SVG documentation regarding path string</a>. Rapha\xebl fully supports it.</p>\n     > Colour Parsing\n     # <ul>\n     #     <li>Colour name (\u201c<code>red</code>\u201d, \u201c<code>green</code>\u201d, \u201c<code>cornflowerblue</code>\u201d, etc)</li>\n     #     <li>#\u2022\u2022\u2022 \u2014 shortened HTML colour: (\u201c<code>#000</code>\u201d, \u201c<code>#fc0</code>\u201d, etc)</li>\n     #     <li>#\u2022\u2022\u2022\u2022\u2022\u2022 \u2014 full length HTML colour: (\u201c<code>#000000</code>\u201d, \u201c<code>#bd2300</code>\u201d)</li>\n     #     <li>rgb(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 red, green and blue channels\u2019 values: (\u201c<code>rgb(200,&nbsp;100,&nbsp;0)</code>\u201d)</li>\n     #     <li>rgb(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %: (\u201c<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>\u201d)</li>\n     #     <li>rgba(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 red, green and blue channels\u2019 values: (\u201c<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>\u201d)</li>\n     #     <li>rgba(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %: (\u201c<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>\u201d)</li>\n     #     <li>hsb(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 hue, saturation and brightness values: (\u201c<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>\u201d)</li>\n     #     <li>hsb(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %</li>\n     #     <li>hsba(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 same as above, but with opacity</li>\n     #     <li>hsl(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 almost the same as hsb, see <a href="http://en.wikipedia.org/wiki/HSL_and_HSV" title="HSL and HSV - Wikipedia, the free encyclopedia">Wikipedia page</a></li>\n     #     <li>hsl(\u2022\u2022\u2022%, \u2022\u2022\u2022%, \u2022\u2022\u2022%) \u2014 same as above, but in %</li>\n     #     <li>hsla(\u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022, \u2022\u2022\u2022) \u2014 same as above, but with opacity</li>\n     #     <li>Optionally for hsb and hsl you could specify hue as a degree: \u201c<code>hsl(240deg,&nbsp;1,&nbsp;.5)</code>\u201d or, if you want to go fancy, \u201c<code>hsl(240\xb0,&nbsp;1,&nbsp;.5)</code>\u201d</li>\n     # </ul>\n    \\*/\n    elproto.attr = function (name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs) if (this.attrs[has](a)) {\n                res[a] = this.attrs[a];\n            }\n            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            return res;\n        }\n        if (value == null && R.is(name, "string")) {\n            if (name == "fill" && this.attrs.fill == "none" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            if (name == "transform") {\n                return this._.transform;\n            }\n            var names = name.split(separator),\n                out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.paper.customAttributes[name], "function")) {\n                    out[name] = this.paper.customAttributes[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (value == null && R.is(name, "array")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        if (value != null) {\n            var params = {};\n            params[name] = value;\n        } else if (name != null && R.is(name, "object")) {\n            params = name;\n        }\n        for (var key in params) {\n            eve("raphael.attr." + key + "." + this.id, this, params[key]);\n        }\n        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {\n            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\n            this.attrs[key] = params[key];\n            for (var subkey in par) if (par[has](subkey)) {\n                params[subkey] = par[subkey];\n            }\n        }\n        setFillAndStroke(this, params);\n        return this;\n    };\n    /*\\\n     * Element.toFront\n     [ method ]\n     **\n     * Moves the element so it is the closest to the viewer\u2019s eyes, on top of other elements.\n     = (object) @Element\n    \\*/\n    elproto.toFront = function () {\n        if (this.removed) {\n            return this;\n        }\n        var node = getRealNode(this.node);\n        node.parentNode.appendChild(node);\n        var svg = this.paper;\n        svg.top != this && R._tofront(this, svg);\n        return this;\n    };\n    /*\\\n     * Element.toBack\n     [ method ]\n     **\n     * Moves the element so it is the furthest from the viewer\u2019s eyes, behind other elements.\n     = (object) @Element\n    \\*/\n    elproto.toBack = function () {\n        if (this.removed) {\n            return this;\n        }\n        var node = getRealNode(this.node);\n        var parentNode = node.parentNode;\n        parentNode.insertBefore(node, parentNode.firstChild);\n        R._toback(this, this.paper);\n        var svg = this.paper;\n        return this;\n    };\n    /*\\\n     * Element.insertAfter\n     [ method ]\n     **\n     * Inserts current object after the given one.\n     = (object) @Element\n    \\*/\n    elproto.insertAfter = function (element) {\n        if (this.removed || !element) {\n            return this;\n        }\n\n        var node = getRealNode(this.node);\n        var afterNode = getRealNode(element.node || element[element.length - 1].node);\n        if (afterNode.nextSibling) {\n            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);\n        } else {\n            afterNode.parentNode.appendChild(node);\n        }\n        R._insertafter(this, element, this.paper);\n        return this;\n    };\n    /*\\\n     * Element.insertBefore\n     [ method ]\n     **\n     * Inserts current object before the given one.\n     = (object) @Element\n    \\*/\n    elproto.insertBefore = function (element) {\n        if (this.removed || !element) {\n            return this;\n        }\n\n        var node = getRealNode(this.node);\n        var beforeNode = getRealNode(element.node || element[0].node);\n        beforeNode.parentNode.insertBefore(node, beforeNode);\n        R._insertbefore(this, element, this.paper);\n        return this;\n    };\n    elproto.blur = function (size) {\n        // Experimental. No Safari support. Use it on your own risk.\n        var t = this;\n        if (+size !== 0) {\n            var fltr = $("filter"),\n                blur = $("feGaussianBlur");\n            t.attrs.blur = size;\n            fltr.id = R.createUUID();\n            $(blur, {stdDeviation: +size || 1.5});\n            fltr.appendChild(blur);\n            t.paper.defs.appendChild(fltr);\n            t._blur = fltr;\n            $(t.node, {filter: "url(#" + fltr.id + ")"});\n        } else {\n            if (t._blur) {\n                t._blur.parentNode.removeChild(t._blur);\n                delete t._blur;\n                delete t.attrs.blur;\n            }\n            t.node.removeAttribute("filter");\n        }\n        return t;\n    };\n    R._engine.circle = function (svg, x, y, r) {\n        var el = $("circle");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {cx: x, cy: y, r: r, fill: "none", stroke: "#000"};\n        res.type = "circle";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.rect = function (svg, x, y, w, h, r) {\n        var el = $("rect");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: "none", stroke: "#000"};\n        res.type = "rect";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.ellipse = function (svg, x, y, rx, ry) {\n        var el = $("ellipse");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: "none", stroke: "#000"};\n        res.type = "ellipse";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.image = function (svg, src, x, y, w, h) {\n        var el = $("image");\n        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: "none"});\n        el.setAttributeNS(xlink, "href", src);\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {x: x, y: y, width: w, height: h, src: src};\n        res.type = "image";\n        return res;\n    };\n    R._engine.text = function (svg, x, y, text) {\n        var el = $("text");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {\n            x: x,\n            y: y,\n            "text-anchor": "middle",\n            text: text,\n            "font-family": R._availableAttrs["font-family"],\n            "font-size": R._availableAttrs["font-size"],\n            stroke: "none",\n            fill: "#000"\n        };\n        res.type = "text";\n        setFillAndStroke(res, res.attrs);\n        return res;\n    };\n    R._engine.setSize = function (width, height) {\n        this.width = width || this.width;\n        this.height = height || this.height;\n        this.canvas.setAttribute("width", this.width);\n        this.canvas.setAttribute("height", this.height);\n        if (this._viewBox) {\n            this.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments),\n            container = con && con.container;\n        if (!container) {\n            throw new Error("SVG container not found.");\n        }\n        var x = con.x,\n            y = con.y,\n            width = con.width,\n            height = con.height,\n            cnvs = $("svg"),\n            css = "overflow:hidden;",\n            isFloating;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        $(cnvs, {\n            height: height,\n            version: 1.1,\n            width: width,\n            xmlns: "http://www.w3.org/2000/svg",\n            "xmlns:xlink": "http://www.w3.org/1999/xlink"\n        });\n        if (container == 1) {\n            cnvs.style.cssText = css + "position:absolute;left:" + x + "px;top:" + y + "px";\n            R._g.doc.body.appendChild(cnvs);\n            isFloating = 1;\n        } else {\n            cnvs.style.cssText = css + "position:relative";\n            if (container.firstChild) {\n                container.insertBefore(cnvs, container.firstChild);\n            } else {\n                container.appendChild(cnvs);\n            }\n        }\n        container = new R._Paper;\n        container.width = width;\n        container.height = height;\n        container.canvas = cnvs;\n        container.clear();\n        container._left = container._top = 0;\n        isFloating && (container.renderfix = function () {});\n        container.renderfix();\n        return container;\n    };\n    R._engine.setViewBox = function (x, y, w, h, fit) {\n        eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);\n        var paperSize = this.getSize(),\n            size = mmax(w / paperSize.width, h / paperSize.height),\n            top = this.top,\n            aspectRatio = fit ? "xMidYMid meet" : "xMinYMin",\n            vb,\n            sw;\n        if (x == null) {\n            if (this._vbSize) {\n                size = 1;\n            }\n            delete this._vbSize;\n            vb = "0 0 " + this.width + S + this.height;\n        } else {\n            this._vbSize = size;\n            vb = x + S + y + S + w + S + h;\n        }\n        $(this.canvas, {\n            viewBox: vb,\n            preserveAspectRatio: aspectRatio\n        });\n        while (size && top) {\n            sw = "stroke-width" in top.attrs ? top.attrs["stroke-width"] : 1;\n            top.attr({"stroke-width": sw});\n            top._.dirty = 1;\n            top._.dirtyT = 1;\n            top = top.prev;\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        return this;\n    };\n    /*\\\n     * Paper.renderfix\n     [ method ]\n     **\n     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependent\n     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.\n     * This method fixes the issue.\n     **\n       Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.\n    \\*/\n    R.prototype.renderfix = function () {\n        var cnvs = this.canvas,\n            s = cnvs.style,\n            pos;\n        try {\n            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\n        } catch (e) {\n            pos = cnvs.createSVGMatrix();\n        }\n        var left = -pos.e % 1,\n            top = -pos.f % 1;\n        if (left || top) {\n            if (left) {\n                this._left = (this._left + left) % 1;\n                s.left = this._left + "px";\n            }\n            if (top) {\n                this._top = (this._top + top) % 1;\n                s.top = this._top + "px";\n            }\n        }\n    };\n    /*\\\n     * Paper.clear\n     [ method ]\n     **\n     * Clears the paper, i.e. removes all the elements.\n    \\*/\n    R.prototype.clear = function () {\n        R.eve("raphael.clear", this);\n        var c = this.canvas;\n        while (c.firstChild) {\n            c.removeChild(c.firstChild);\n        }\n        this.bottom = this.top = null;\n        (this.desc = $("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\\xebl " + R.version));\n        c.appendChild(this.desc);\n        c.appendChild(this.defs = $("defs"));\n    };\n    /*\\\n     * Paper.remove\n     [ method ]\n     **\n     * Removes the paper from the DOM.\n    \\*/\n    R.prototype.remove = function () {\n        eve("raphael.remove", this);\n        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n    };\n    var setproto = R.st;\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5zdmcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwuc3ZnLmpzP2Q4YzciXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCJdLCBmdW5jdGlvbihSKSB7XG4gICAgaWYgKFIgJiYgIVIuc3ZnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGFzID0gXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICB0b0ludCA9IHBhcnNlSW50LFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgbW1heCA9IG1hdGgubWF4LFxuICAgICAgICBhYnMgPSBtYXRoLmFicyxcbiAgICAgICAgcG93ID0gbWF0aC5wb3csXG4gICAgICAgIHNlcGFyYXRvciA9IC9bLCBdKy8sXG4gICAgICAgIGV2ZSA9IFIuZXZlLFxuICAgICAgICBFID0gXCJcIixcbiAgICAgICAgUyA9IFwiIFwiO1xuICAgIHZhciB4bGluayA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICAgICAgICBtYXJrZXJzID0ge1xuICAgICAgICAgICAgYmxvY2s6IFwiTTUsMCAwLDIuNSA1LDV6XCIsXG4gICAgICAgICAgICBjbGFzc2ljOiBcIk01LDAgMCwyLjUgNSw1IDMuNSwzIDMuNSwyelwiLFxuICAgICAgICAgICAgZGlhbW9uZDogXCJNMi41LDAgNSwyLjUgMi41LDUgMCwyLjV6XCIsXG4gICAgICAgICAgICBvcGVuOiBcIk02LDEgMSwzLjUgNiw2XCIsXG4gICAgICAgICAgICBvdmFsOiBcIk0yLjUsMEEyLjUsMi41LDAsMCwxLDIuNSw1IDIuNSwyLjUsMCwwLDEsMi41LDB6XCJcbiAgICAgICAgfSxcbiAgICAgICAgbWFya2VyQ291bnRlciA9IHt9O1xuICAgIFIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAgXCJZb3VyIGJyb3dzZXIgc3VwcG9ydHMgU1ZHLlxcbllvdSBhcmUgcnVubmluZyBSYXBoYVxceGVibCBcIiArIHRoaXMudmVyc2lvbjtcbiAgICB9O1xuICAgIHZhciAkID0gZnVuY3Rpb24gKGVsLCBhdHRyKSB7XG4gICAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBlbCA9ICQoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGF0dHIpIGlmIChhdHRyW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsIDYpID09IFwieGxpbms6XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmssIGtleS5zdWJzdHJpbmcoNiksIFN0cihhdHRyW2tleV0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBTdHIoYXR0cltrZXldKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwgPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBlbCk7XG4gICAgICAgICAgICBlbC5zdHlsZSAmJiAoZWwuc3R5bGUud2Via2l0VGFwSGlnaGxpZ2h0Q29sb3IgPSBcInJnYmEoMCwwLDAsMClcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH0sXG4gICAgYWRkR3JhZGllbnRGaWxsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGdyYWRpZW50KSB7XG4gICAgICAgIHZhciB0eXBlID0gXCJsaW5lYXJcIixcbiAgICAgICAgICAgIGlkID0gZWxlbWVudC5pZCArIGdyYWRpZW50LFxuICAgICAgICAgICAgZnggPSAuNSwgZnkgPSAuNSxcbiAgICAgICAgICAgIG8gPSBlbGVtZW50Lm5vZGUsXG4gICAgICAgICAgICBTVkcgPSBlbGVtZW50LnBhcGVyLFxuICAgICAgICAgICAgcyA9IG8uc3R5bGUsXG4gICAgICAgICAgICBlbCA9IFIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgZ3JhZGllbnQgPSBTdHIoZ3JhZGllbnQpLnJlcGxhY2UoUi5fcmFkaWFsX2dyYWRpZW50LCBmdW5jdGlvbiAoYWxsLCBfZngsIF9meSkge1xuICAgICAgICAgICAgICAgIHR5cGUgPSBcInJhZGlhbFwiO1xuICAgICAgICAgICAgICAgIGlmIChfZnggJiYgX2Z5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ4ID0gdG9GbG9hdChfZngpO1xuICAgICAgICAgICAgICAgICAgICBmeSA9IHRvRmxvYXQoX2Z5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpciA9ICgoZnkgPiAuNSkgKiAyIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHBvdyhmeCAtIC41LCAyKSArIHBvdyhmeSAtIC41LCAyKSA+IC4yNSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGZ5ID0gbWF0aC5zcXJ0KC4yNSAtIHBvdyhmeCAtIC41LCAyKSkgKiBkaXIgKyAuNSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ5ICE9IC41ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoZnkgPSBmeS50b0ZpeGVkKDUpIC0gMWUtNSAqIGRpcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBFO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncmFkaWVudCA9IGdyYWRpZW50LnNwbGl0KC9cXHMqXFwtXFxzKi8pO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJsaW5lYXJcIikge1xuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IGdyYWRpZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgYW5nbGUgPSAtdG9GbG9hdChhbmdsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGFuZ2xlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZlY3RvciA9IFswLCAwLCBtYXRoLmNvcyhSLnJhZChhbmdsZSkpLCBtYXRoLnNpbihSLnJhZChhbmdsZSkpXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gMSAvIChtbWF4KGFicyh2ZWN0b3JbMl0pLCBhYnModmVjdG9yWzNdKSkgfHwgMSk7XG4gICAgICAgICAgICAgICAgdmVjdG9yWzJdICo9IG1heDtcbiAgICAgICAgICAgICAgICB2ZWN0b3JbM10gKj0gbWF4O1xuICAgICAgICAgICAgICAgIGlmICh2ZWN0b3JbMl0gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclswXSA9IC12ZWN0b3JbMl07XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclsyXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2ZWN0b3JbM10gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclsxXSA9IC12ZWN0b3JbM107XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclszXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRvdHMgPSBSLl9wYXJzZURvdHMoZ3JhZGllbnQpO1xuICAgICAgICAgICAgaWYgKCFkb3RzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZCA9IGlkLnJlcGxhY2UoL1tcXChcXClcXHMsXFx4YjAjXS9nLCBcIl9cIik7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmdyYWRpZW50ICYmIGlkICE9IGVsZW1lbnQuZ3JhZGllbnQuaWQpIHtcbiAgICAgICAgICAgICAgICBTVkcuZGVmcy5yZW1vdmVDaGlsZChlbGVtZW50LmdyYWRpZW50KTtcbiAgICAgICAgICAgICAgICBkZWxldGUgZWxlbWVudC5ncmFkaWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgZWwgPSAkKHR5cGUgKyBcIkdyYWRpZW50XCIsIHtpZDogaWR9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmdyYWRpZW50ID0gZWw7XG4gICAgICAgICAgICAgICAgJChlbCwgdHlwZSA9PSBcInJhZGlhbFwiID8ge1xuICAgICAgICAgICAgICAgICAgICBmeDogZngsXG4gICAgICAgICAgICAgICAgICAgIGZ5OiBmeVxuICAgICAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgIHgxOiB2ZWN0b3JbMF0sXG4gICAgICAgICAgICAgICAgICAgIHkxOiB2ZWN0b3JbMV0sXG4gICAgICAgICAgICAgICAgICAgIHgyOiB2ZWN0b3JbMl0sXG4gICAgICAgICAgICAgICAgICAgIHkyOiB2ZWN0b3JbM10sXG4gICAgICAgICAgICAgICAgICAgIGdyYWRpZW50VHJhbnNmb3JtOiBlbGVtZW50Lm1hdHJpeC5pbnZlcnQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFNWRy5kZWZzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkb3RzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoJChcInN0b3BcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBkb3RzW2ldLm9mZnNldCA/IGRvdHNbaV0ub2Zmc2V0IDogaSA/IFwiMTAwJVwiIDogXCIwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9wLWNvbG9yXCI6IGRvdHNbaV0uY29sb3IgfHwgXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3Atb3BhY2l0eVwiOiBpc0Zpbml0ZShkb3RzW2ldLm9wYWNpdHkpID8gZG90c1tpXS5vcGFjaXR5IDogMVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICQobywge1xuICAgICAgICAgICAgZmlsbDogZmlsbHVybChpZCksXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogMVxuICAgICAgICB9KTtcbiAgICAgICAgcy5maWxsID0gRTtcbiAgICAgICAgcy5vcGFjaXR5ID0gMTtcbiAgICAgICAgcy5maWxsT3BhY2l0eSA9IDE7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0sXG4gICAgaXNJRTlvcjEwID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG4gICAgICByZXR1cm4gbW9kZSAmJiAobW9kZSA9PT0gOSB8fCBtb2RlID09PSAxMCk7XG4gICAgfSxcbiAgICBmaWxsdXJsID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBpZiAoaXNJRTlvcjEwKCkpIHtcbiAgICAgICAgICByZXR1cm4gXCJ1cmwoJyNcIiArIGlkICsgXCInKVwiO1xuICAgICAgfVxuICAgICAgdmFyIGxvY2F0aW9uID0gZG9jdW1lbnQubG9jYXRpb247XG4gICAgICB2YXIgbG9jYXRpb25TdHJpbmcgPSAoXG4gICAgICAgICAgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICtcbiAgICAgICAgICBsb2NhdGlvbi5ob3N0ICtcbiAgICAgICAgICBsb2NhdGlvbi5wYXRobmFtZSArXG4gICAgICAgICAgbG9jYXRpb24uc2VhcmNoXG4gICAgICApO1xuICAgICAgcmV0dXJuIFwidXJsKCdcIiArIGxvY2F0aW9uU3RyaW5nICsgXCIjXCIgKyBpZCArIFwiJylcIjtcbiAgICB9LFxuICAgIHVwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIGJib3ggPSBvLmdldEJCb3goMSk7XG4gICAgICAgICQoby5wYXR0ZXJuLCB7cGF0dGVyblRyYW5zZm9ybTogby5tYXRyaXguaW52ZXJ0KCkgKyBcIiB0cmFuc2xhdGUoXCIgKyBiYm94LnggKyBcIixcIiArIGJib3gueSArIFwiKVwifSk7XG4gICAgfSxcbiAgICBhZGRBcnJvdyA9IGZ1bmN0aW9uIChvLCB2YWx1ZSwgaXNFbmQpIHtcbiAgICAgICAgaWYgKG8udHlwZSA9PSBcInBhdGhcIikge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFN0cih2YWx1ZSkudG9Mb3dlckNhc2UoKS5zcGxpdChcIi1cIiksXG4gICAgICAgICAgICAgICAgcCA9IG8ucGFwZXIsXG4gICAgICAgICAgICAgICAgc2UgPSBpc0VuZCA/IFwiZW5kXCIgOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgbm9kZSA9IG8ubm9kZSxcbiAgICAgICAgICAgICAgICBhdHRycyA9IG8uYXR0cnMsXG4gICAgICAgICAgICAgICAgc3Ryb2tlID0gYXR0cnNbXCJzdHJva2Utd2lkdGhcIl0sXG4gICAgICAgICAgICAgICAgaSA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiY2xhc3NpY1wiLFxuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgZHgsXG4gICAgICAgICAgICAgICAgcmVmWCxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIHcgPSAzLFxuICAgICAgICAgICAgICAgIGggPSAzLFxuICAgICAgICAgICAgICAgIHQgPSA1O1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWVzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2xhc3NpY1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3ZhbFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3BlblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwid2lkZVwiOiBoID0gNTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYXJyb3dcIjogaCA9IDI7IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibG9uZ1wiOiB3ID0gNTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzaG9ydFwiOiB3ID0gMjsgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJvcGVuXCIpIHtcbiAgICAgICAgICAgICAgICB3ICs9IDI7XG4gICAgICAgICAgICAgICAgaCArPSAyO1xuICAgICAgICAgICAgICAgIHQgKz0gMjtcbiAgICAgICAgICAgICAgICBkeCA9IDE7XG4gICAgICAgICAgICAgICAgcmVmWCA9IGlzRW5kID8gNCA6IDE7XG4gICAgICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogYXR0cnMuc3Ryb2tlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVmWCA9IGR4ID0gdyAvIDI7XG4gICAgICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogYXR0cnMuc3Ryb2tlLFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvLl8uYXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG8uXy5hcnJvd3MuZW5kUGF0aCAmJiBtYXJrZXJDb3VudGVyW28uXy5hcnJvd3MuZW5kUGF0aF0tLTtcbiAgICAgICAgICAgICAgICAgICAgby5fLmFycm93cy5lbmRNYXJrZXIgJiYgbWFya2VyQ291bnRlcltvLl8uYXJyb3dzLmVuZE1hcmtlcl0tLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvLl8uYXJyb3dzLnN0YXJ0UGF0aCAmJiBtYXJrZXJDb3VudGVyW28uXy5hcnJvd3Muc3RhcnRQYXRoXS0tO1xuICAgICAgICAgICAgICAgICAgICBvLl8uYXJyb3dzLnN0YXJ0TWFya2VyICYmIG1hcmtlckNvdW50ZXJbby5fLmFycm93cy5zdGFydE1hcmtlcl0tLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3MgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlICE9IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGhJZCA9IFwicmFwaGFlbC1tYXJrZXItXCIgKyB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJJZCA9IFwicmFwaGFlbC1tYXJrZXItXCIgKyBzZSArIHR5cGUgKyB3ICsgaCArIFwiLW9ialwiICsgby5pZDtcbiAgICAgICAgICAgICAgICBpZiAoIVIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKHBhdGhJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZzLmFwcGVuZENoaWxkKCQoJChcInBhdGhcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVjYXBcIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZDogbWFya2Vyc1t0eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXRoSWRcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb3VudGVyW3BhdGhJZF0gPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNvdW50ZXJbcGF0aElkXSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gUi5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQobWFya2VySWQpLFxuICAgICAgICAgICAgICAgICAgICB1c2U7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyID0gJCgkKFwibWFya2VyXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogbWFya2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJIZWlnaHQ6IGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJXaWR0aDogdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZYOiByZWZYLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmWTogaCAvIDJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHVzZSA9ICQoJChcInVzZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4bGluazpocmVmXCI6IFwiI1wiICsgcGF0aElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAoaXNFbmQgPyBcInJvdGF0ZSgxODAgXCIgKyB3IC8gMiArIFwiIFwiICsgaCAvIDIgKyBcIikgXCIgOiBFKSArIFwic2NhbGUoXCIgKyB3IC8gdCArIFwiLFwiICsgaCAvIHQgKyBcIilcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6ICgxIC8gKCh3IC8gdCArIGggLyB0KSAvIDIpKS50b0ZpeGVkKDQpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuYXBwZW5kQ2hpbGQodXNlKTtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZzLmFwcGVuZENoaWxkKG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNvdW50ZXJbbWFya2VySWRdID0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb3VudGVyW21hcmtlcklkXSsrO1xuICAgICAgICAgICAgICAgICAgICB1c2UgPSBtYXJrZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ1c2VcIilbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQodXNlLCBhdHRyKTtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBkeCAqICh0eXBlICE9IFwiZGlhbW9uZFwiICYmIHR5cGUgIT0gXCJvdmFsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gby5fLmFycm93cy5zdGFydGR4ICogc3Ryb2tlIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHRvID0gUi5nZXRUb3RhbExlbmd0aChhdHRycy5wYXRoKSAtIGRlbHRhICogc3Ryb2tlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBkZWx0YSAqIHN0cm9rZTtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gKG8uXy5hcnJvd3MuZW5kZHggKiBzdHJva2UgfHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF0dHIgPSB7fTtcbiAgICAgICAgICAgICAgICBhdHRyW1wibWFya2VyLVwiICsgc2VdID0gXCJ1cmwoI1wiICsgbWFya2VySWQgKyBcIilcIjtcbiAgICAgICAgICAgICAgICBpZiAodG8gfHwgZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyLmQgPSBSLmdldFN1YnBhdGgoYXR0cnMucGF0aCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKG5vZGUsIGF0dHIpO1xuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3Nbc2UgKyBcIlBhdGhcIl0gPSBwYXRoSWQ7XG4gICAgICAgICAgICAgICAgby5fLmFycm93c1tzZSArIFwiTWFya2VyXCJdID0gbWFya2VySWQ7XG4gICAgICAgICAgICAgICAgby5fLmFycm93c1tzZSArIFwiZHhcIl0gPSBkZWx0YTtcbiAgICAgICAgICAgICAgICBvLl8uYXJyb3dzW3NlICsgXCJUeXBlXCJdID0gdHlwZTtcbiAgICAgICAgICAgICAgICBvLl8uYXJyb3dzW3NlICsgXCJTdHJpbmdcIl0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBvLl8uYXJyb3dzLnN0YXJ0ZHggKiBzdHJva2UgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gZnJvbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gKG8uXy5hcnJvd3MuZW5kZHggKiBzdHJva2UgfHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3Nbc2UgKyBcIlBhdGhcIl0gJiYgJChub2RlLCB7ZDogUi5nZXRTdWJwYXRoKGF0dHJzLnBhdGgsIGZyb20sIHRvKX0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJQYXRoXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJNYXJrZXJcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlIG8uXy5hcnJvd3Nbc2UgKyBcImR4XCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJUeXBlXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJTdHJpbmdcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGF0dHIgaW4gbWFya2VyQ291bnRlcikgaWYgKG1hcmtlckNvdW50ZXJbaGFzXShhdHRyKSAmJiAhbWFya2VyQ291bnRlclthdHRyXSkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gUi5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQoYXR0cik7XG4gICAgICAgICAgICAgICAgaXRlbSAmJiBpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRhc2hhcnJheSA9IHtcbiAgICAgICAgXCItXCI6IFszLCAxXSxcbiAgICAgICAgXCIuXCI6IFsxLCAxXSxcbiAgICAgICAgXCItLlwiOiBbMywgMSwgMSwgMV0sXG4gICAgICAgIFwiLS4uXCI6IFszLCAxLCAxLCAxLCAxLCAxXSxcbiAgICAgICAgXCIuIFwiOiBbMSwgM10sXG4gICAgICAgIFwiLSBcIjogWzQsIDNdLFxuICAgICAgICBcIi0tXCI6IFs4LCAzXSxcbiAgICAgICAgXCItIC5cIjogWzQsIDMsIDEsIDNdLFxuICAgICAgICBcIi0tLlwiOiBbOCwgMywgMSwgM10sXG4gICAgICAgIFwiLS0uLlwiOiBbOCwgMywgMSwgMywgMSwgM11cbiAgICB9LFxuICAgIGFkZERhc2hlcyA9IGZ1bmN0aW9uIChvLCB2YWx1ZSwgcGFyYW1zKSB7XG4gICAgICAgIHZhbHVlID0gZGFzaGFycmF5W1N0cih2YWx1ZSkudG9Mb3dlckNhc2UoKV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gby5hdHRyc1tcInN0cm9rZS13aWR0aFwiXSB8fCBcIjFcIixcbiAgICAgICAgICAgICAgICBidXR0ID0ge3JvdW5kOiB3aWR0aCwgc3F1YXJlOiB3aWR0aCwgYnV0dDogMH1bby5hdHRyc1tcInN0cm9rZS1saW5lY2FwXCJdIHx8IHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdXSB8fCAwLFxuICAgICAgICAgICAgICAgIGRhc2hlcyA9IFtdLFxuICAgICAgICAgICAgICAgIGkgPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgZGFzaGVzW2ldID0gdmFsdWVbaV0gKiB3aWR0aCArICgoaSAlIDIpID8gMSA6IC0xKSAqIGJ1dHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKG8ubm9kZSwge1wic3Ryb2tlLWRhc2hhcnJheVwiOiBkYXNoZXMuam9pbihcIixcIil9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAkKG8ubm9kZSwge1wic3Ryb2tlLWRhc2hhcnJheVwiOiBcIm5vbmVcIn0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXRGaWxsQW5kU3Ryb2tlID0gZnVuY3Rpb24gKG8sIHBhcmFtcykge1xuICAgICAgICB2YXIgbm9kZSA9IG8ubm9kZSxcbiAgICAgICAgICAgIGF0dHJzID0gby5hdHRycyxcbiAgICAgICAgICAgIHZpcyA9IG5vZGUuc3R5bGUudmlzaWJpbGl0eTtcbiAgICAgICAgbm9kZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgZm9yICh2YXIgYXR0IGluIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHBhcmFtc1toYXNdKGF0dCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIVIuX2F2YWlsYWJsZUF0dHJzW2hhc10oYXR0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2F0dF07XG4gICAgICAgICAgICAgICAgYXR0cnNbYXR0XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibHVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBvLmJsdXIodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aXRsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRpdGxlXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIDx0aXRsZT4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGUubGVuZ3RoICYmICh0aXRsZSA9IHRpdGxlWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZS5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkKFwidGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZENoaWxkKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJocmVmXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0YXJnZXRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbiA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbi50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gXCJhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGwgPSAkKFwiYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbi5pbnNlcnRCZWZvcmUoaGwsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhsLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuID0gaGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ID09IFwidGFyZ2V0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbi5zZXRBdHRyaWJ1dGVOUyh4bGluaywgXCJzaG93XCIsIHZhbHVlID09IFwiYmxhbmtcIiA/IFwibmV3XCIgOiB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuLnNldEF0dHJpYnV0ZU5TKHhsaW5rLCBhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3Vyc29yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmN1cnNvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG8udHJhbnNmb3JtKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3ctc3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFycm93KG8sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3ctZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRBcnJvdyhvLCB2YWx1ZSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNsaXAtcmVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBTdHIodmFsdWUpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2xpcCAmJiBvLmNsaXAucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8uY2xpcC5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSAkKFwiY2xpcFBhdGhcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjID0gJChcInJlY3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHJjLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHJlY3RbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHJlY3RbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0WzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3RbM11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChyYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wYXBlci5kZWZzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcImNsaXAtcGF0aFwiOiBcInVybCgjXCIgKyBlbC5pZCArIFwiKVwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jbGlwID0gcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSBub2RlLmdldEF0dHJpYnV0ZShcImNsaXAtcGF0aFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IFIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKHBhdGgucmVwbGFjZSgvKF51cmxcXCgjfFxcKSQpL2csIEUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcCAmJiBjbGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge1wiY2xpcC1wYXRoXCI6IEV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG8uY2xpcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGF0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcInBhdGhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge2Q6IHZhbHVlID8gYXR0cnMucGF0aCA9IFIuX3BhdGhUb0Fic29sdXRlKHZhbHVlKSA6IFwiTTAsMFwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5fLmFycm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXJ0U3RyaW5nXCIgaW4gby5fLmFycm93cyAmJiBhZGRBcnJvdyhvLCBvLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmRTdHJpbmdcIiBpbiBvLl8uYXJyb3dzICYmIGFkZEFycm93KG8sIG8uXy5hcnJvd3MuZW5kU3RyaW5nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIndpZHRoXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cnMuZngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHQgPSBcInhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF0dHJzLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmZ4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAtYXR0cnMueCAtIChhdHRycy53aWR0aCB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ID09IFwicnhcIiAmJiBvLnR5cGUgPT0gXCJyZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImN4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucGF0dGVybiAmJiB1cGRhdGVQb3NpdGlvbihvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhlaWdodFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZGlydHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmZ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ID0gXCJ5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhdHRycy55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRycy5meSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gLWF0dHJzLnkgLSAoYXR0cnMuaGVpZ2h0IHx8IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicnlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQgPT0gXCJyeVwiICYmIG8udHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3lcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5wYXR0ZXJuICYmIHVwZGF0ZVBvc2l0aW9uKG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge3J4OiB2YWx1ZSwgcnk6IHZhbHVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3JjXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby50eXBlID09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoeGxpbmssIFwiaHJlZlwiLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9rZS13aWR0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uXy5zeCAhPSAxIHx8IG8uXy5zeSAhPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgLz0gbW1heChhYnMoby5fLnN4KSwgYWJzKG8uXy5zeSkpIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyc1tcInN0cm9rZS1kYXNoYXJyYXlcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGREYXNoZXMobywgYXR0cnNbXCJzdHJva2UtZGFzaGFycmF5XCJdLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uXy5hcnJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXJ0U3RyaW5nXCIgaW4gby5fLmFycm93cyAmJiBhZGRBcnJvdyhvLCBvLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFN0cmluZ1wiIGluIG8uXy5hcnJvd3MgJiYgYWRkQXJyb3cobywgby5fLmFycm93cy5lbmRTdHJpbmcsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJva2UtZGFzaGFycmF5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGREYXNoZXMobywgdmFsdWUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1VSTCA9IFN0cih2YWx1ZSkubWF0Y2goUi5fSVNVUkwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSAkKFwicGF0dGVyblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWcgPSAkKFwiaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGVsLCB7eDogMCwgeTogMCwgcGF0dGVyblVuaXRzOiBcInVzZXJTcGFjZU9uVXNlXCIsIGhlaWdodDogMSwgd2lkdGg6IDF9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGlnLCB7eDogMCwgeTogMCwgXCJ4bGluazpocmVmXCI6IGlzVVJMWzFdfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLl9wcmVsb2FkKGlzVVJMWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IHRoaXMub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbCwge3dpZHRoOiB3LCBoZWlnaHQ6IGh9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoaWcsIHt3aWR0aDogdywgaGVpZ2h0OiBofSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhcGVyLmRlZnMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge2ZpbGw6IFwidXJsKCNcIiArIGVsLmlkICsgXCIpXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhdHRlcm4gPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhdHRlcm4gJiYgdXBkYXRlUG9zaXRpb24obyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xyID0gUi5nZXRSR0IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbHIuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdyYWRpZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRycy5ncmFkaWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhUi5pcyhhdHRycy5vcGFjaXR5LCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmlzKHBhcmFtcy5vcGFjaXR5LCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtvcGFjaXR5OiBhdHRycy5vcGFjaXR5fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIVIuaXMoYXR0cnNbXCJmaWxsLW9wYWNpdHlcIl0sIFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuaXMocGFyYW1zW1wiZmlsbC1vcGFjaXR5XCJdLCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcImZpbGwtb3BhY2l0eVwiOiBhdHRyc1tcImZpbGwtb3BhY2l0eVwiXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoby50eXBlID09IFwiY2lyY2xlXCIgfHwgby50eXBlID09IFwiZWxsaXBzZVwiIHx8IFN0cih2YWx1ZSkuY2hhckF0KCkgIT0gXCJyXCIpICYmIGFkZEdyYWRpZW50RmlsbChvLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJvcGFjaXR5XCIgaW4gYXR0cnMgfHwgXCJmaWxsLW9wYWNpdHlcIiBpbiBhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JhZGllbnQgPSBSLl9nLmRvYy5nZXRFbGVtZW50QnlJZChub2RlLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLCBFKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFkaWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3BzID0gZ3JhZGllbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChzdG9wc1tzdG9wcy5sZW5ndGggLSAxXSwge1wic3RvcC1vcGFjaXR5XCI6IChcIm9wYWNpdHlcIiBpbiBhdHRycyA/IGF0dHJzLm9wYWNpdHkgOiAxKSAqIChcImZpbGwtb3BhY2l0eVwiIGluIGF0dHJzID8gYXR0cnNbXCJmaWxsLW9wYWNpdHlcIl0gOiAxKX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLmdyYWRpZW50ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuZmlsbCA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xyW2hhc10oXCJvcGFjaXR5XCIpICYmICQobm9kZSwge1wiZmlsbC1vcGFjaXR5XCI6IGNsci5vcGFjaXR5ID4gMSA/IGNsci5vcGFjaXR5IC8gMTAwIDogY2xyLm9wYWNpdHl9KTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9rZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xyID0gUi5nZXRSR0IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCBjbHIuaGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dCA9PSBcInN0cm9rZVwiICYmIGNscltoYXNdKFwib3BhY2l0eVwiKSAmJiAkKG5vZGUsIHtcInN0cm9rZS1vcGFjaXR5XCI6IGNsci5vcGFjaXR5ID4gMSA/IGNsci5vcGFjaXR5IC8gMTAwIDogY2xyLm9wYWNpdHl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQgPT0gXCJzdHJva2VcIiAmJiBvLl8uYXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdGFydFN0cmluZ1wiIGluIG8uXy5hcnJvd3MgJiYgYWRkQXJyb3cobywgby5fLmFycm93cy5zdGFydFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmRTdHJpbmdcIiBpbiBvLl8uYXJyb3dzICYmIGFkZEFycm93KG8sIG8uXy5hcnJvd3MuZW5kU3RyaW5nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ3JhZGllbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIChvLnR5cGUgPT0gXCJjaXJjbGVcIiB8fCBvLnR5cGUgPT0gXCJlbGxpcHNlXCIgfHwgU3RyKHZhbHVlKS5jaGFyQXQoKSAhPSBcInJcIikgJiYgYWRkR3JhZGllbnRGaWxsKG8sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3BhY2l0eVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmdyYWRpZW50ICYmICFhdHRyc1toYXNdKFwic3Ryb2tlLW9wYWNpdHlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcInN0cm9rZS1vcGFjaXR5XCI6IHZhbHVlID4gMSA/IHZhbHVlIC8gMTAwIDogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhbGxcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGwtb3BhY2l0eVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQgPSBSLl9nLmRvYy5nZXRFbGVtZW50QnlJZChub2RlLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLCBFKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BzID0gZ3JhZGllbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHN0b3BzW3N0b3BzLmxlbmd0aCAtIDFdLCB7XCJzdG9wLW9wYWNpdHlcIjogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHQgPT0gXCJmb250LXNpemVcIiAmJiAodmFsdWUgPSB0b0ludCh2YWx1ZSwgMTApICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjc3NydWxlID0gYXR0LnJlcGxhY2UoLyhcXC0uKS9nLCBmdW5jdGlvbiAodykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3LnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlW2Nzc3J1bGVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZGlydHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0dW5lVGV4dChvLCBwYXJhbXMpO1xuICAgICAgICBub2RlLnN0eWxlLnZpc2liaWxpdHkgPSB2aXM7XG4gICAgfSxcbiAgICBsZWFkaW5nID0gMS4yLFxuICAgIHR1bmVUZXh0ID0gZnVuY3Rpb24gKGVsLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKGVsLnR5cGUgIT0gXCJ0ZXh0XCIgfHwgIShwYXJhbXNbaGFzXShcInRleHRcIikgfHwgcGFyYW1zW2hhc10oXCJmb250XCIpIHx8IHBhcmFtc1toYXNdKFwiZm9udC1zaXplXCIpIHx8IHBhcmFtc1toYXNdKFwieFwiKSB8fCBwYXJhbXNbaGFzXShcInlcIikpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSBlbC5hdHRycyxcbiAgICAgICAgICAgIG5vZGUgPSBlbC5ub2RlLFxuICAgICAgICAgICAgZm9udFNpemUgPSBub2RlLmZpcnN0Q2hpbGQgPyB0b0ludChSLl9nLmRvYy5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG5vZGUuZmlyc3RDaGlsZCwgRSkuZ2V0UHJvcGVydHlWYWx1ZShcImZvbnQtc2l6ZVwiKSwgMTApIDogMTA7XG5cbiAgICAgICAgaWYgKHBhcmFtc1toYXNdKFwidGV4dFwiKSkge1xuICAgICAgICAgICAgYS50ZXh0ID0gcGFyYW1zLnRleHQ7XG4gICAgICAgICAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRleHRzID0gU3RyKHBhcmFtcy50ZXh0KS5zcGxpdChcIlxcblwiKSxcbiAgICAgICAgICAgICAgICB0c3BhbnMgPSBbXSxcbiAgICAgICAgICAgICAgICB0c3BhbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRleHRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0c3BhbiA9ICQoXCJ0c3BhblwiKTtcbiAgICAgICAgICAgICAgICBpICYmICQodHNwYW4sIHtkeTogZm9udFNpemUgKiBsZWFkaW5nLCB4OiBhLnh9KTtcbiAgICAgICAgICAgICAgICB0c3Bhbi5hcHBlbmRDaGlsZChSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0c1tpXSkpO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodHNwYW4pO1xuICAgICAgICAgICAgICAgIHRzcGFuc1tpXSA9IHRzcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHNwYW5zID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRzcGFuXCIpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSB0c3BhbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICAkKHRzcGFuc1tpXSwge2R5OiBmb250U2l6ZSAqIGxlYWRpbmcsIHg6IGEueH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRzcGFuc1swXSwge2R5OiAwfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJChub2RlLCB7eDogYS54LCB5OiBhLnl9KTtcbiAgICAgICAgZWwuXy5kaXJ0eSA9IDE7XG4gICAgICAgIHZhciBiYiA9IGVsLl9nZXRCQm94KCksXG4gICAgICAgICAgICBkaWYgPSBhLnkgLSAoYmIueSArIGJiLmhlaWdodCAvIDIpO1xuICAgICAgICBkaWYgJiYgUi5pcyhkaWYsIFwiZmluaXRlXCIpICYmICQodHNwYW5zWzBdLCB7ZHk6IGRpZn0pO1xuICAgIH0sXG4gICAgZ2V0UmVhbE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5wYXJlbnROb2RlICYmIG5vZGUucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSwgc3ZnKSB7XG4gICAgICAgIHZhciBYID0gMCxcbiAgICAgICAgICAgIFkgPSAwO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQubm9kZVxuICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBHaXZlcyB5b3UgYSByZWZlcmVuY2UgdG8gdGhlIERPTSBvYmplY3QsIHNvIHlvdSBjYW4gYXNzaWduIGV2ZW50IGhhbmRsZXJzIG9yIGp1c3QgbWVzcyBhcm91bmQuXG4gICAgICAgICAqKlxuICAgICAgICAgKiBOb3RlOiBEb27igJl0IG1lc3Mgd2l0aCBpdC5cbiAgICAgICAgID4gVXNhZ2VcbiAgICAgICAgIHwgLy8gZHJhdyBhIGNpcmNsZSBhdCBjb29yZGluYXRlIDEwLDEwIHdpdGggcmFkaXVzIG9mIDEwXG4gICAgICAgICB8IHZhciBjID0gcGFwZXIuY2lyY2xlKDEwLCAxMCwgMTApO1xuICAgICAgICAgfCBjLm5vZGUub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIHwgICAgIGMuYXR0cihcImZpbGxcIiwgXCJyZWRcIik7XG4gICAgICAgICB8IH07XG4gICAgICAgIFxcKi9cbiAgICAgICAgdGhpc1swXSA9IHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogRWxlbWVudC5yYXBoYWVsXG4gICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIEludGVybmFsIHJlZmVyZW5jZSB0byBAUmFwaGFlbCBvYmplY3QuIEluIGNhc2UgaXQgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgID4gVXNhZ2VcbiAgICAgICAgIHwgUmFwaGFlbC5lbC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICB8ICAgICB2YXIgaHNiID0gdGhpcy5wYXBlci5yYXBoYWVsLnJnYjJoc2IodGhpcy5hdHRyKFwiZmlsbFwiKSk7XG4gICAgICAgICB8ICAgICBoc2IuaCA9IDE7XG4gICAgICAgICB8ICAgICB0aGlzLmF0dHIoe2ZpbGw6IHRoaXMucGFwZXIucmFwaGFlbC5oc2IycmdiKGhzYikuaGV4fSk7XG4gICAgICAgICB8IH1cbiAgICAgICAgXFwqL1xuICAgICAgICBub2RlLnJhcGhhZWwgPSB0cnVlO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQuaWRcbiAgICAgICAgIFsgcHJvcGVydHkgKG51bWJlcikgXVxuICAgICAgICAgKipcbiAgICAgICAgICogVW5pcXVlIGlkIG9mIHRoZSBlbGVtZW50LiBFc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGxpc3RlbiB0byBldmVudHMgb2YgdGhlIGVsZW1lbnQsXG4gICAgICAgICAqIGJlY2F1c2UgYWxsIGV2ZW50cyBhcmUgZmlyZWQgaW4gZm9ybWF0IGA8bW9kdWxlPi48YWN0aW9uPi48aWQ+YC4gQWxzbyB1c2VmdWwgZm9yIEBQYXBlci5nZXRCeUlkIG1ldGhvZC5cbiAgICAgICAgXFwqL1xuICAgICAgICB0aGlzLmlkID0gZ3VpZCgpO1xuICAgICAgICBub2RlLnJhcGhhZWxpZCA9IHRoaXMuaWQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogTWV0aG9kIHRoYXQgcmV0dXJucyBhIDUgbGV0dGVyL2RpZ2l0IGlkLCBlbm91Z2ggZm9yIDM2XjUgPSA2MDQ2NjE3NiBlbGVtZW50c1xuICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGlkXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGd1aWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFwiMDAwMFwiICsgKE1hdGgucmFuZG9tKCkqTWF0aC5wb3coMzYsNSkgPDwgMCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hdHJpeCA9IFIubWF0cml4KCk7XG4gICAgICAgIHRoaXMucmVhbFBhdGggPSBudWxsO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQucGFwZXJcbiAgICAgICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAgICAgKipcbiAgICAgICAgICogSW50ZXJuYWwgcmVmZXJlbmNlIHRvIOKAnHBhcGVy4oCdIHdoZXJlIG9iamVjdCBkcmF3bi4gTWFpbmx5IGZvciB1c2UgaW4gcGx1Z2lucyBhbmQgZWxlbWVudCBleHRlbnNpb25zLlxuICAgICAgICAgPiBVc2FnZVxuICAgICAgICAgfCBSYXBoYWVsLmVsLmNyb3NzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgfCAgICAgdGhpcy5hdHRyKHtmaWxsOiBcInJlZFwifSk7XG4gICAgICAgICB8ICAgICB0aGlzLnBhcGVyLnBhdGgoXCJNMTAsMTBMNTAsNTBNNTAsMTBMMTAsNTBcIilcbiAgICAgICAgIHwgICAgICAgICAuYXR0cih7c3Ryb2tlOiBcInJlZFwifSk7XG4gICAgICAgICB8IH1cbiAgICAgICAgXFwqL1xuICAgICAgICB0aGlzLnBhcGVyID0gc3ZnO1xuICAgICAgICB0aGlzLmF0dHJzID0gdGhpcy5hdHRycyB8fCB7fTtcbiAgICAgICAgdGhpcy5fID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBbXSxcbiAgICAgICAgICAgIHN4OiAxLFxuICAgICAgICAgICAgc3k6IDEsXG4gICAgICAgICAgICBkZWc6IDAsXG4gICAgICAgICAgICBkeDogMCxcbiAgICAgICAgICAgIGR5OiAwLFxuICAgICAgICAgICAgZGlydHk6IDFcbiAgICAgICAgfTtcbiAgICAgICAgIXN2Zy5ib3R0b20gJiYgKHN2Zy5ib3R0b20gPSB0aGlzKTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBFbGVtZW50LnByZXZcbiAgICAgICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBwcmV2aW91cyBlbGVtZW50IGluIHRoZSBoaWVyYXJjaHkuXG4gICAgICAgIFxcKi9cbiAgICAgICAgdGhpcy5wcmV2ID0gc3ZnLnRvcDtcbiAgICAgICAgc3ZnLnRvcCAmJiAoc3ZnLnRvcC5uZXh0ID0gdGhpcyk7XG4gICAgICAgIHN2Zy50b3AgPSB0aGlzO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQubmV4dFxuICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIG5leHQgZWxlbWVudCBpbiB0aGUgaGllcmFyY2h5LlxuICAgICAgICBcXCovXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgfSxcbiAgICBlbHByb3RvID0gUi5lbDtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlID0gZWxwcm90bztcbiAgICBlbHByb3RvLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcblxuICAgIFIuX2VuZ2luZS5wYXRoID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcsIFNWRykge1xuICAgICAgICB2YXIgZWwgPSAkKFwicGF0aFwiKTtcbiAgICAgICAgU1ZHLmNhbnZhcyAmJiBTVkcuY2FudmFzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHAgPSBuZXcgRWxlbWVudChlbCwgU1ZHKTtcbiAgICAgICAgcC50eXBlID0gXCJwYXRoXCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocCwge1xuICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwiIzAwMFwiLFxuICAgICAgICAgICAgcGF0aDogcGF0aFN0cmluZ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5yb3RhdGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERlcHJlY2F0ZWQhIFVzZSBARWxlbWVudC50cmFuc2Zvcm0gaW5zdGVhZC5cbiAgICAgKiBBZGRzIHJvdGF0aW9uIGJ5IGdpdmVuIGFuZ2xlIGFyb3VuZCBnaXZlbiBwb2ludCB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZGVnIChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygcm90YXRpb25cbiAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWwgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygcm90YXRpb25cbiAgICAgKiBJZiBjeCAmIGN5IGFyZW7igJl0IHNwZWNpZmllZCBjZW50cmUgb2YgdGhlIHNoYXBlIGlzIHVzZWQgYXMgYSBwb2ludCBvZiByb3RhdGlvbi5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJvdGF0ZSA9IGZ1bmN0aW9uIChkZWcsIGN4LCBjeSkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBkZWcgPSBTdHIoZGVnKS5zcGxpdChzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoZGVnLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGN4ID0gdG9GbG9hdChkZWdbMV0pO1xuICAgICAgICAgICAgY3kgPSB0b0Zsb2F0KGRlZ1syXSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVnID0gdG9GbG9hdChkZWdbMF0pO1xuICAgICAgICAoY3kgPT0gbnVsbCkgJiYgKGN4ID0gY3kpO1xuICAgICAgICBpZiAoY3ggPT0gbnVsbCB8fCBjeSA9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgYmJveCA9IHRoaXMuZ2V0QkJveCgxKTtcbiAgICAgICAgICAgIGN4ID0gYmJveC54ICsgYmJveC53aWR0aCAvIDI7XG4gICAgICAgICAgICBjeSA9IGJib3gueSArIGJib3guaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wiclwiLCBkZWcsIGN4LCBjeV1dKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuc2NhbGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERlcHJlY2F0ZWQhIFVzZSBARWxlbWVudC50cmFuc2Zvcm0gaW5zdGVhZC5cbiAgICAgKiBBZGRzIHNjYWxlIGJ5IGdpdmVuIGFtb3VudCByZWxhdGl2ZSB0byBnaXZlbiBwb2ludCB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gc3ggKG51bWJlcikgaG9yaXNvbnRhbCBzY2FsZSBhbW91bnRcbiAgICAgLSBzeSAobnVtYmVyKSB2ZXJ0aWNhbCBzY2FsZSBhbW91bnRcbiAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygc2NhbGVcbiAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWwgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygc2NhbGVcbiAgICAgKiBJZiBjeCAmIGN5IGFyZW7igJl0IHNwZWNpZmllZCBjZW50cmUgb2YgdGhlIHNoYXBlIGlzIHVzZWQgaW5zdGVhZC5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBzeSwgY3gsIGN5KSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHN4ID0gU3RyKHN4KS5zcGxpdChzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoc3gubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgc3kgPSB0b0Zsb2F0KHN4WzFdKTtcbiAgICAgICAgICAgIGN4ID0gdG9GbG9hdChzeFsyXSk7XG4gICAgICAgICAgICBjeSA9IHRvRmxvYXQoc3hbM10pO1xuICAgICAgICB9XG4gICAgICAgIHN4ID0gdG9GbG9hdChzeFswXSk7XG4gICAgICAgIChzeSA9PSBudWxsKSAmJiAoc3kgPSBzeCk7XG4gICAgICAgIChjeSA9PSBudWxsKSAmJiAoY3ggPSBjeSk7XG4gICAgICAgIGlmIChjeCA9PSBudWxsIHx8IGN5ID09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBiYm94ID0gdGhpcy5nZXRCQm94KDEpO1xuICAgICAgICB9XG4gICAgICAgIGN4ID0gY3ggPT0gbnVsbCA/IGJib3gueCArIGJib3gud2lkdGggLyAyIDogY3g7XG4gICAgICAgIGN5ID0gY3kgPT0gbnVsbCA/IGJib3gueSArIGJib3guaGVpZ2h0IC8gMiA6IGN5O1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wic1wiLCBzeCwgc3ksIGN4LCBjeV1dKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudHJhbnNsYXRlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEZXByZWNhdGVkISBVc2UgQEVsZW1lbnQudHJhbnNmb3JtIGluc3RlYWQuXG4gICAgICogQWRkcyB0cmFuc2xhdGlvbiBieSBnaXZlbiBhbW91bnQgdG8gdGhlIGxpc3Qgb2YgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBkeCAobnVtYmVyKSBob3Jpc29udGFsIHNoaWZ0XG4gICAgIC0gZHkgKG51bWJlcikgdmVydGljYWwgc2hpZnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkeCwgZHkpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZHggPSBTdHIoZHgpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBkeSA9IHRvRmxvYXQoZHhbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGR4ID0gdG9GbG9hdChkeFswXSkgfHwgMDtcbiAgICAgICAgZHkgPSArZHkgfHwgMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInRcIiwgZHgsIGR5XV0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50cmFuc2Zvcm1cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGVsZW1lbnQgd2hpY2ggaXMgc2VwYXJhdGUgdG8gb3RoZXIgYXR0cmlidXRlcyxcbiAgICAgKiBpLmUuIHRyYW5zbGF0aW9uIGRvZXNu4oCZdCBjaGFuZ2UgYHhgIG9yIGB5YCBvZiB0aGUgcmVjdGFuZ2UuIFRoZSBmb3JtYXRcbiAgICAgKiBvZiB0cmFuc2Zvcm1hdGlvbiBzdHJpbmcgaXMgc2ltaWxhciB0byB0aGUgcGF0aCBzdHJpbmcgc3ludGF4OlxuICAgICB8IFwidDEwMCwxMDByMzAsMTAwLDEwMHMyLDIsMTAwLDEwMHI0NXMxLjVcIlxuICAgICAqIEVhY2ggbGV0dGVyIGlzIGEgY29tbWFuZC4gVGhlcmUgYXJlIGZvdXIgY29tbWFuZHM6IGB0YCBpcyBmb3IgdHJhbnNsYXRlLCBgcmAgaXMgZm9yIHJvdGF0ZSwgYHNgIGlzIGZvclxuICAgICAqIHNjYWxlIGFuZCBgbWAgaXMgZm9yIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIFRoZXJlIGFyZSBhbHNvIGFsdGVybmF0aXZlIOKAnGFic29sdXRl4oCdIHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGU6IGBUYCwgYFJgIGFuZCBgU2AuIFRoZXkgd2lsbCBub3QgdGFrZSBwcmV2aW91cyB0cmFuc2Zvcm1hdGlvbiBpbnRvIGFjY291bnQuIEZvciBleGFtcGxlLCBgLi4uVDEwMCwwYCB3aWxsIGFsd2F5cyBtb3ZlIGVsZW1lbnQgMTAwIHB4IGhvcmlzb250YWxseSwgd2hpbGUgYC4uLnQxMDAsMGAgY291bGQgbW92ZSBpdCB2ZXJ0aWNhbGx5IGlmIHRoZXJlIGlzIGByOTBgIGJlZm9yZS4gSnVzdCBjb21wYXJlIHJlc3VsdHMgb2YgYHI5MHQxMDAsMGAgYW5kIGByOTBUMTAwLDBgLlxuICAgICAqXG4gICAgICogU28sIHRoZSBleGFtcGxlIGxpbmUgYWJvdmUgY291bGQgYmUgcmVhZCBsaWtlIOKAnHRyYW5zbGF0ZSBieSAxMDAsIDEwMDsgcm90YXRlIDMwwrAgYXJvdW5kIDEwMCwgMTAwOyBzY2FsZSB0d2ljZSBhcm91bmQgMTAwLCAxMDA7XG4gICAgICogcm90YXRlIDQ1wrAgYXJvdW5kIGNlbnRyZTsgc2NhbGUgMS41IHRpbWVzIHJlbGF0aXZlIHRvIGNlbnRyZeKAnS4gQXMgeW91IGNhbiBzZWUgcm90YXRlIGFuZCBzY2FsZSBjb21tYW5kcyBoYXZlIG9yaWdpblxuICAgICAqIGNvb3JkaW5hdGVzIGFzIG9wdGlvbmFsIHBhcmFtZXRlcnMsIHRoZSBkZWZhdWx0IGlzIHRoZSBjZW50cmUgcG9pbnQgb2YgdGhlIGVsZW1lbnQuXG4gICAgICogTWF0cml4IGFjY2VwdHMgc2l4IHBhcmFtZXRlcnMuXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgZWwgPSBwYXBlci5yZWN0KDEwLCAyMCwgMzAwLCAyMDApO1xuICAgICB8IC8vIHRyYW5zbGF0ZSAxMDAsIDEwMCwgcm90YXRlIDQ1wrAsIHRyYW5zbGF0ZSAtMTAwLCAwXG4gICAgIHwgZWwudHJhbnNmb3JtKFwidDEwMCwxMDByNDV0LTEwMCwwXCIpO1xuICAgICB8IC8vIGlmIHlvdSB3YW50IHlvdSBjYW4gYXBwZW5kIG9yIHByZXBlbmQgdHJhbnNmb3JtYXRpb25zXG4gICAgIHwgZWwudHJhbnNmb3JtKFwiLi4udDUwLDUwXCIpO1xuICAgICB8IGVsLnRyYW5zZm9ybShcInMyLi4uXCIpO1xuICAgICB8IC8vIG9yIGV2ZW4gd3JhcFxuICAgICB8IGVsLnRyYW5zZm9ybShcInQ1MCw1MC4uLnQtNTAtNTBcIik7XG4gICAgIHwgLy8gdG8gcmVzZXQgdHJhbnNmb3JtYXRpb24gY2FsbCBtZXRob2Qgd2l0aCBlbXB0eSBzdHJpbmdcbiAgICAgfCBlbC50cmFuc2Zvcm0oXCJcIik7XG4gICAgIHwgLy8gdG8gZ2V0IGN1cnJlbnQgdmFsdWUgY2FsbCBpdCB3aXRob3V0IHBhcmFtZXRlcnNcbiAgICAgfCBjb25zb2xlLmxvZyhlbC50cmFuc2Zvcm0oKSk7XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHRzdHIgKHN0cmluZykgI29wdGlvbmFsIHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAqIElmIHRzdHIgaXNu4oCZdCBzcGVjaWZpZWRcbiAgICAgPSAoc3RyaW5nKSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAqIGVsc2VcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0c3RyKSB7XG4gICAgICAgIHZhciBfID0gdGhpcy5fO1xuICAgICAgICBpZiAodHN0ciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gXy50cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgUi5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLCB0c3RyKTtcblxuICAgICAgICB0aGlzLmNsaXAgJiYgJCh0aGlzLmNsaXAsIHt0cmFuc2Zvcm06IHRoaXMubWF0cml4LmludmVydCgpfSk7XG4gICAgICAgIHRoaXMucGF0dGVybiAmJiB1cGRhdGVQb3NpdGlvbih0aGlzKTtcbiAgICAgICAgdGhpcy5ub2RlICYmICQodGhpcy5ub2RlLCB7dHJhbnNmb3JtOiB0aGlzLm1hdHJpeH0pO1xuXG4gICAgICAgIGlmIChfLnN4ICE9IDEgfHwgXy5zeSAhPSAxKSB7XG4gICAgICAgICAgICB2YXIgc3cgPSB0aGlzLmF0dHJzW2hhc10oXCJzdHJva2Utd2lkdGhcIikgPyB0aGlzLmF0dHJzW1wic3Ryb2tlLXdpZHRoXCJdIDogMTtcbiAgICAgICAgICAgIHRoaXMuYXR0cih7XCJzdHJva2Utd2lkdGhcIjogc3d9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaGlkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogTWFrZXMgZWxlbWVudCBpbnZpc2libGUuIFNlZSBARWxlbWVudC5zaG93LlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCkgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zaG93XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBNYWtlcyBlbGVtZW50IHZpc2libGUuIFNlZSBARWxlbWVudC5oaWRlLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCkgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBlbGVtZW50IGZyb20gdGhlIHBhcGVyLlxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBnZXRSZWFsTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkIHx8ICFub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFwZXIgPSB0aGlzLnBhcGVyO1xuICAgICAgICBwYXBlci5fX3NldF9fICYmIHBhcGVyLl9fc2V0X18uZXhjbHVkZSh0aGlzKTtcbiAgICAgICAgZXZlLnVuYmluZChcInJhcGhhZWwuKi4qLlwiICsgdGhpcy5pZCk7XG4gICAgICAgIGlmICh0aGlzLmdyYWRpZW50KSB7XG4gICAgICAgICAgICBwYXBlci5kZWZzLnJlbW92ZUNoaWxkKHRoaXMuZ3JhZGllbnQpO1xuICAgICAgICB9XG4gICAgICAgIFIuX3RlYXIodGhpcywgcGFwZXIpO1xuXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblxuICAgICAgICAvLyBSZW1vdmUgY3VzdG9tIGRhdGEgZm9yIGVsZW1lbnRcbiAgICAgICAgdGhpcy5yZW1vdmVEYXRhKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdHlwZW9mIHRoaXNbaV0gPT0gXCJmdW5jdGlvblwiID8gUi5fcmVtb3ZlZEZhY3RvcnkoaSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlZCA9IHRydWU7XG4gICAgfTtcbiAgICBlbHByb3RvLl9nZXRCQm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGhpZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYW52YXNIaWRkZW4gPSBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlO1xuICAgICAgICBpZiAodGhpcy5wYXBlci5jYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIGNvbnRhaW5lclN0eWxlID0gdGhpcy5wYXBlci5jYW52YXMucGFyZW50RWxlbWVudC5zdHlsZTtcbiAgICAgICAgfSAvL0lFMTArIGNhbid0IGZpbmQgcGFyZW50RWxlbWVudFxuICAgICAgICBlbHNlIGlmICh0aGlzLnBhcGVyLmNhbnZhcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgY29udGFpbmVyU3R5bGUgPSB0aGlzLnBhcGVyLmNhbnZhcy5wYXJlbnROb2RlLnN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoY29udGFpbmVyU3R5bGUgJiYgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xuICAgICAgICAgIGNhbnZhc0hpZGRlbiA9IHRydWU7XG4gICAgICAgICAgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJib3ggPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJib3ggPSB0aGlzLm5vZGUuZ2V0QkJveCgpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggMy4wLngsIDI1LjAuMSAocHJvYmFibHkgbW9yZSB2ZXJzaW9ucyBhZmZlY3RlZCkgcGxheSBiYWRseSBoZXJlIC0gcG9zc2libGUgZml4XG4gICAgICAgICAgICBiYm94ID0ge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMubm9kZS5jbGllbnRMZWZ0LFxuICAgICAgICAgICAgICAgIHk6IHRoaXMubm9kZS5jbGllbnRUb3AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubm9kZS5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMubm9kZS5jbGllbnRIZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGJib3ggPSBiYm94IHx8IHt9O1xuICAgICAgICAgICAgaWYoY2FudmFzSGlkZGVuKXtcbiAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGhpZGUgJiYgdGhpcy5oaWRlKCk7XG4gICAgICAgIHJldHVybiBiYm94O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuYXR0clxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogU2V0cyB0aGUgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYXR0ck5hbWUgKHN0cmluZykgYXR0cmlidXRl4oCZcyBuYW1lXG4gICAgIC0gdmFsdWUgKHN0cmluZykgdmFsdWVcbiAgICAgKiBvclxuICAgICAtIHBhcmFtcyAob2JqZWN0KSBvYmplY3Qgb2YgbmFtZS92YWx1ZSBwYWlyc1xuICAgICAqIG9yXG4gICAgIC0gYXR0ck5hbWUgKHN0cmluZykgYXR0cmlidXRl4oCZcyBuYW1lXG4gICAgICogb3JcbiAgICAgLSBhdHRyTmFtZXMgKGFycmF5KSBpbiB0aGlzIGNhc2UgbWV0aG9kIHJldHVybnMgYXJyYXkgb2YgY3VycmVudCB2YWx1ZXMgZm9yIGdpdmVuIGF0dHJpYnV0ZSBuYW1lc1xuICAgICA9IChvYmplY3QpIEBFbGVtZW50IGlmIGF0dHJzTmFtZSAmIHZhbHVlIG9yIHBhcmFtcyBhcmUgcGFzc2VkIGluLlxuICAgICA9ICguLi4pIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgaWYgb25seSBhdHRyc05hbWUgaXMgcGFzc2VkIGluLlxuICAgICA9IChhcnJheSkgYXJyYXkgb2YgdmFsdWVzIG9mIHRoZSBhdHRyaWJ1dGUgaWYgYXR0cnNOYW1lcyBpcyBwYXNzZWQgaW4uXG4gICAgID0gKG9iamVjdCkgb2JqZWN0IG9mIGF0dHJpYnV0ZXMgaWYgbm90aGluZyBpcyBwYXNzZWQgaW4uXG4gICAgID4gUG9zc2libGUgcGFyYW1ldGVyc1xuICAgICAjIDxwPlBsZWFzZSByZWZlciB0byB0aGUgPGEgaHJlZj1cImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRy9cIiB0aXRsZT1cIlRoZSBXM0MgUmVjb21tZW5kYXRpb24gZm9yIHRoZSBTVkcgbGFuZ3VhZ2UgZGVzY3JpYmVzIHRoZXNlIHByb3BlcnRpZXMgaW4gZGV0YWlsLlwiPlNWRyBzcGVjaWZpY2F0aW9uPC9hPiBmb3IgYW4gZXhwbGFuYXRpb24gb2YgdGhlc2UgcGFyYW1ldGVycy48L3A+XG4gICAgIG8gYXJyb3ctZW5kIChzdHJpbmcpIGFycm93aGVhZCBvbiB0aGUgZW5kIG9mIHRoZSBwYXRoLiBUaGUgZm9ybWF0IGZvciBzdHJpbmcgaXMgYDx0eXBlPlstPHdpZHRoPlstPGxlbmd0aD5dXWAuIFBvc3NpYmxlIHR5cGVzOiBgY2xhc3NpY2AsIGBibG9ja2AsIGBvcGVuYCwgYG92YWxgLCBgZGlhbW9uZGAsIGBub25lYCwgd2lkdGg6IGB3aWRlYCwgYG5hcnJvd2AsIGBtZWRpdW1gLCBsZW5ndGg6IGBsb25nYCwgYHNob3J0YCwgYG1pZGl1bWAuXG4gICAgIG8gY2xpcC1yZWN0IChzdHJpbmcpIGNvbW1hIG9yIHNwYWNlIHNlcGFyYXRlZCB2YWx1ZXM6IHgsIHksIHdpZHRoIGFuZCBoZWlnaHRcbiAgICAgbyBjdXJzb3IgKHN0cmluZykgQ1NTIHR5cGUgb2YgdGhlIGN1cnNvclxuICAgICBvIGN4IChudW1iZXIpIHRoZSB4LWF4aXMgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUsIG9yIGVsbGlwc2VcbiAgICAgbyBjeSAobnVtYmVyKSB0aGUgeS1heGlzIGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlLCBvciBlbGxpcHNlXG4gICAgIG8gZmlsbCAoc3RyaW5nKSBjb2xvdXIsIGdyYWRpZW50IG9yIGltYWdlXG4gICAgIG8gZmlsbC1vcGFjaXR5IChudW1iZXIpXG4gICAgIG8gZm9udCAoc3RyaW5nKVxuICAgICBvIGZvbnQtZmFtaWx5IChzdHJpbmcpXG4gICAgIG8gZm9udC1zaXplIChudW1iZXIpIGZvbnQgc2l6ZSBpbiBwaXhlbHNcbiAgICAgbyBmb250LXdlaWdodCAoc3RyaW5nKVxuICAgICBvIGhlaWdodCAobnVtYmVyKVxuICAgICBvIGhyZWYgKHN0cmluZykgVVJMLCBpZiBzcGVjaWZpZWQgZWxlbWVudCBiZWhhdmVzIGFzIGh5cGVybGlua1xuICAgICBvIG9wYWNpdHkgKG51bWJlcilcbiAgICAgbyBwYXRoIChzdHJpbmcpIFNWRyBwYXRoIHN0cmluZyBmb3JtYXRcbiAgICAgbyByIChudW1iZXIpIHJhZGl1cyBvZiB0aGUgY2lyY2xlLCBlbGxpcHNlIG9yIHJvdW5kZWQgY29ybmVyIG9uIHRoZSByZWN0XG4gICAgIG8gcnggKG51bWJlcikgaG9yaXNvbnRhbCByYWRpdXMgb2YgdGhlIGVsbGlwc2VcbiAgICAgbyByeSAobnVtYmVyKSB2ZXJ0aWNhbCByYWRpdXMgb2YgdGhlIGVsbGlwc2VcbiAgICAgbyBzcmMgKHN0cmluZykgaW1hZ2UgVVJMLCBvbmx5IHdvcmtzIGZvciBARWxlbWVudC5pbWFnZSBlbGVtZW50XG4gICAgIG8gc3Ryb2tlIChzdHJpbmcpIHN0cm9rZSBjb2xvdXJcbiAgICAgbyBzdHJva2UtZGFzaGFycmF5IChzdHJpbmcpIFvigJzigJ0sIOKAnG5vbmXigJ0sIOKAnGAtYOKAnSwg4oCcYC5g4oCdLCDigJxgLS5g4oCdLCDigJxgLS4uYOKAnSwg4oCcYC4gYOKAnSwg4oCcYC0gYOKAnSwg4oCcYC0tYOKAnSwg4oCcYC0gLmDigJ0sIOKAnGAtLS5g4oCdLCDigJxgLS0uLmDigJ1dXG4gICAgIG8gc3Ryb2tlLWxpbmVjYXAgKHN0cmluZykgW+KAnGBidXR0YOKAnSwg4oCcYHNxdWFyZWDigJ0sIOKAnGByb3VuZGDigJ1dXG4gICAgIG8gc3Ryb2tlLWxpbmVqb2luIChzdHJpbmcpIFvigJxgYmV2ZWxg4oCdLCDigJxgcm91bmRg4oCdLCDigJxgbWl0ZXJg4oCdXVxuICAgICBvIHN0cm9rZS1taXRlcmxpbWl0IChudW1iZXIpXG4gICAgIG8gc3Ryb2tlLW9wYWNpdHkgKG51bWJlcilcbiAgICAgbyBzdHJva2Utd2lkdGggKG51bWJlcikgc3Ryb2tlIHdpZHRoIGluIHBpeGVscywgZGVmYXVsdCBpcyAnMSdcbiAgICAgbyB0YXJnZXQgKHN0cmluZykgdXNlZCB3aXRoIGhyZWZcbiAgICAgbyB0ZXh0IChzdHJpbmcpIGNvbnRlbnRzIG9mIHRoZSB0ZXh0IGVsZW1lbnQuIFVzZSBgXFxuYCBmb3IgbXVsdGlsaW5lIHRleHRcbiAgICAgbyB0ZXh0LWFuY2hvciAoc3RyaW5nKSBb4oCcYHN0YXJ0YOKAnSwg4oCcYG1pZGRsZWDigJ0sIOKAnGBlbmRg4oCdXSwgZGVmYXVsdCBpcyDigJxgbWlkZGxlYOKAnVxuICAgICBvIHRpdGxlIChzdHJpbmcpIHdpbGwgY3JlYXRlIHRvb2x0aXAgd2l0aCBhIGdpdmVuIHRleHRcbiAgICAgbyB0cmFuc2Zvcm0gKHN0cmluZykgc2VlIEBFbGVtZW50LnRyYW5zZm9ybVxuICAgICBvIHdpZHRoIChudW1iZXIpXG4gICAgIG8geCAobnVtYmVyKVxuICAgICBvIHkgKG51bWJlcilcbiAgICAgPiBHcmFkaWVudHNcbiAgICAgKiBMaW5lYXIgZ3JhZGllbnQgZm9ybWF0OiDigJxg4oC5YW5nbGXigLot4oC5Y29sb3Vy4oC6Wy3igLljb2xvdXLigLpbOuKAuW9mZnNldOKAul1dKi3igLljb2xvdXLigLpg4oCdLCBleGFtcGxlOiDigJxgOTAtI2ZmZi0jMDAwYOKAnSDigJMgOTDCsFxuICAgICAqIGdyYWRpZW50IGZyb20gd2hpdGUgdG8gYmxhY2sgb3Ig4oCcYDAtI2ZmZi0jZjAwOjIwLSMwMDBg4oCdIOKAkyAwwrAgZ3JhZGllbnQgZnJvbSB3aGl0ZSB2aWEgcmVkIChhdCAyMCUpIHRvIGJsYWNrLlxuICAgICAqXG4gICAgICogcmFkaWFsIGdyYWRpZW50OiDigJxgclso4oC5ZnjigLosIOKAuWZ54oC6KV3igLljb2xvdXLigLpbLeKAuWNvbG91cuKAuls64oC5b2Zmc2V04oC6XV0qLeKAuWNvbG91cuKAumDigJ0sIGV4YW1wbGU6IOKAnGByI2ZmZi0jMDAwYOKAnSDigJNcbiAgICAgKiBncmFkaWVudCBmcm9tIHdoaXRlIHRvIGJsYWNrIG9yIOKAnGByKDAuMjUsIDAuNzUpI2ZmZi0jMDAwYOKAnSDigJMgZ3JhZGllbnQgZnJvbSB3aGl0ZSB0byBibGFjayB3aXRoIGZvY3VzIHBvaW50XG4gICAgICogYXQgMC4yNSwgMC43NS4gRm9jdXMgcG9pbnQgY29vcmRpbmF0ZXMgYXJlIGluIDAuLjEgcmFuZ2UuIFJhZGlhbCBncmFkaWVudHMgY2FuIG9ubHkgYmUgYXBwbGllZCB0byBjaXJjbGVzIGFuZCBlbGxpcHNlcy5cbiAgICAgPiBQYXRoIFN0cmluZ1xuICAgICAjIDxwPlBsZWFzZSByZWZlciB0byA8YSBocmVmPVwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHL3BhdGhzLmh0bWwjUGF0aERhdGFcIiB0aXRsZT1cIkRldGFpbHMgb2YgYSBwYXRo4oCZcyBkYXRhIGF0dHJpYnV0ZeKAmXMgZm9ybWF0IGFyZSBkZXNjcmliZWQgaW4gdGhlIFNWRyBzcGVjaWZpY2F0aW9uLlwiPlNWRyBkb2N1bWVudGF0aW9uIHJlZ2FyZGluZyBwYXRoIHN0cmluZzwvYT4uIFJhcGhhw6tsIGZ1bGx5IHN1cHBvcnRzIGl0LjwvcD5cbiAgICAgPiBDb2xvdXIgUGFyc2luZ1xuICAgICAjIDx1bD5cbiAgICAgIyAgICAgPGxpPkNvbG91ciBuYW1lICjigJw8Y29kZT5yZWQ8L2NvZGU+4oCdLCDigJw8Y29kZT5ncmVlbjwvY29kZT7igJ0sIOKAnDxjb2RlPmNvcm5mbG93ZXJibHVlPC9jb2RlPuKAnSwgZXRjKTwvbGk+XG4gICAgICMgICAgIDxsaT4j4oCi4oCi4oCiIOKAlCBzaG9ydGVuZWQgSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2ZjMDwvY29kZT7igJ0sIGV0Yyk8L2xpPlxuICAgICAjICAgICA8bGk+I+KAouKAouKAouKAouKAouKAoiDigJQgZnVsbCBsZW5ndGggSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2JkMjMwMDwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2IoMjAwLCZuYnNwOzEwMCwmbmJzcDswKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2IoMTAwJSwmbmJzcDsxNzUlLCZuYnNwOzAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYmEo4oCi4oCi4oCiLCDigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2JhKDIwMCwmbmJzcDsxMDAsJm5ic3A7MCwgLjUpPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+cmdiYSjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2JhKDEwMCUsJm5ic3A7MTc1JSwmbmJzcDswJSwgNTAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgaHVlLCBzYXR1cmF0aW9uIGFuZCBicmlnaHRuZXNzIHZhbHVlczogKOKAnDxjb2RlPmhzYigwLjUsJm5ic3A7MC4yNSwmbmJzcDsxKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNiYSjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBvcGFjaXR5PC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgYWxtb3N0IHRoZSBzYW1lIGFzIGhzYiwgc2VlIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTTF9hbmRfSFNWXCIgdGl0bGU9XCJIU0wgYW5kIEhTViAtIFdpa2lwZWRpYSwgdGhlIGZyZWUgZW5jeWNsb3BlZGlhXCI+V2lraXBlZGlhIHBhZ2U8L2E+PC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNsYSjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBvcGFjaXR5PC9saT5cbiAgICAgIyAgICAgPGxpPk9wdGlvbmFsbHkgZm9yIGhzYiBhbmQgaHNsIHlvdSBjb3VsZCBzcGVjaWZ5IGh1ZSBhcyBhIGRlZ3JlZTog4oCcPGNvZGU+aHNsKDI0MGRlZywmbmJzcDsxLCZuYnNwOy41KTwvY29kZT7igJ0gb3IsIGlmIHlvdSB3YW50IHRvIGdvIGZhbmN5LCDigJw8Y29kZT5oc2woMjQwwrAsJm5ic3A7MSwmbmJzcDsuNSk8L2NvZGU+4oCdPC9saT5cbiAgICAgIyA8L3VsPlxuICAgIFxcKi9cbiAgICBlbHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmF0dHJzKSBpZiAodGhpcy5hdHRyc1toYXNdKGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzW2FdID0gdGhpcy5hdHRyc1thXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5ncmFkaWVudCAmJiByZXMuZmlsbCA9PSBcIm5vbmVcIiAmJiAocmVzLmZpbGwgPSByZXMuZ3JhZGllbnQpICYmIGRlbGV0ZSByZXMuZ3JhZGllbnQ7XG4gICAgICAgICAgICByZXMudHJhbnNmb3JtID0gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJmaWxsXCIgJiYgdGhpcy5hdHRycy5maWxsID09IFwibm9uZVwiICYmIHRoaXMuYXR0cnMuZ3JhZGllbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRycy5ncmFkaWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYW1lID09IFwidHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgaW4gdGhpcy5hdHRycykge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSB0aGlzLmF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0sIFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W25hbWVdID0gdGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW25hbWVdLmRlZjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSBSLl9hdmFpbGFibGVBdHRyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaWkgLSAxID8gb3V0IDogb3V0W25hbWVzWzBdXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiBSLmlzKG5hbWUsIFwiYXJyYXlcIikpIHtcbiAgICAgICAgICAgIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBuYW1lLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvdXRbbmFtZVtpXV0gPSB0aGlzLmF0dHIobmFtZVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lICE9IG51bGwgJiYgUi5pcyhuYW1lLCBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgcGFyYW1zID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmF0dHIuXCIgKyBrZXkgKyBcIi5cIiArIHRoaXMuaWQsIHRoaXMsIHBhcmFtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpIGlmICh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShrZXkpICYmIHBhcmFtc1toYXNdKGtleSkgJiYgUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgdmFyIHBhciA9IHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1trZXldLmFwcGx5KHRoaXMsIFtdLmNvbmNhdChwYXJhbXNba2V5XSkpO1xuICAgICAgICAgICAgdGhpcy5hdHRyc1trZXldID0gcGFyYW1zW2tleV07XG4gICAgICAgICAgICBmb3IgKHZhciBzdWJrZXkgaW4gcGFyKSBpZiAocGFyW2hhc10oc3Via2V5KSkge1xuICAgICAgICAgICAgICAgIHBhcmFtc1tzdWJrZXldID0gcGFyW3N1YmtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsbEFuZFN0cm9rZSh0aGlzLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvRnJvbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE1vdmVzIHRoZSBlbGVtZW50IHNvIGl0IGlzIHRoZSBjbG9zZXN0IHRvIHRoZSB2aWV3ZXLigJlzIGV5ZXMsIG9uIHRvcCBvZiBvdGhlciBlbGVtZW50cy5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRvRnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub2RlID0gZ2V0UmVhbE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICB2YXIgc3ZnID0gdGhpcy5wYXBlcjtcbiAgICAgICAgc3ZnLnRvcCAhPSB0aGlzICYmIFIuX3RvZnJvbnQodGhpcywgc3ZnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b0JhY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE1vdmVzIHRoZSBlbGVtZW50IHNvIGl0IGlzIHRoZSBmdXJ0aGVzdCBmcm9tIHRoZSB2aWV3ZXLigJlzIGV5ZXMsIGJlaGluZCBvdGhlciBlbGVtZW50cy5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRvQmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vZGUgPSBnZXRSZWFsTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgcGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbiAgICAgICAgUi5fdG9iYWNrKHRoaXMsIHRoaXMucGFwZXIpO1xuICAgICAgICB2YXIgc3ZnID0gdGhpcy5wYXBlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5pbnNlcnRBZnRlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSW5zZXJ0cyBjdXJyZW50IG9iamVjdCBhZnRlciB0aGUgZ2l2ZW4gb25lLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkIHx8ICFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBub2RlID0gZ2V0UmVhbE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgdmFyIGFmdGVyTm9kZSA9IGdldFJlYWxOb2RlKGVsZW1lbnQubm9kZSB8fCBlbGVtZW50W2VsZW1lbnQubGVuZ3RoIC0gMV0ubm9kZSk7XG4gICAgICAgIGlmIChhZnRlck5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgIGFmdGVyTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBhZnRlck5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWZ0ZXJOb2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgUi5faW5zZXJ0YWZ0ZXIodGhpcywgZWxlbWVudCwgdGhpcy5wYXBlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaW5zZXJ0QmVmb3JlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJbnNlcnRzIGN1cnJlbnQgb2JqZWN0IGJlZm9yZSB0aGUgZ2l2ZW4gb25lLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCB8fCAhZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbm9kZSA9IGdldFJlYWxOb2RlKHRoaXMubm9kZSk7XG4gICAgICAgIHZhciBiZWZvcmVOb2RlID0gZ2V0UmVhbE5vZGUoZWxlbWVudC5ub2RlIHx8IGVsZW1lbnRbMF0ubm9kZSk7XG4gICAgICAgIGJlZm9yZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgIFIuX2luc2VydGJlZm9yZSh0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmJsdXIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICAvLyBFeHBlcmltZW50YWwuIE5vIFNhZmFyaSBzdXBwb3J0LiBVc2UgaXQgb24geW91ciBvd24gcmlzay5cbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAoK3NpemUgIT09IDApIHtcbiAgICAgICAgICAgIHZhciBmbHRyID0gJChcImZpbHRlclwiKSxcbiAgICAgICAgICAgICAgICBibHVyID0gJChcImZlR2F1c3NpYW5CbHVyXCIpO1xuICAgICAgICAgICAgdC5hdHRycy5ibHVyID0gc2l6ZTtcbiAgICAgICAgICAgIGZsdHIuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICQoYmx1ciwge3N0ZERldmlhdGlvbjogK3NpemUgfHwgMS41fSk7XG4gICAgICAgICAgICBmbHRyLmFwcGVuZENoaWxkKGJsdXIpO1xuICAgICAgICAgICAgdC5wYXBlci5kZWZzLmFwcGVuZENoaWxkKGZsdHIpO1xuICAgICAgICAgICAgdC5fYmx1ciA9IGZsdHI7XG4gICAgICAgICAgICAkKHQubm9kZSwge2ZpbHRlcjogXCJ1cmwoI1wiICsgZmx0ci5pZCArIFwiKVwifSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodC5fYmx1cikge1xuICAgICAgICAgICAgICAgIHQuX2JsdXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0Ll9ibHVyKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdC5fYmx1cjtcbiAgICAgICAgICAgICAgICBkZWxldGUgdC5hdHRycy5ibHVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5ub2RlLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5jaXJjbGUgPSBmdW5jdGlvbiAoc3ZnLCB4LCB5LCByKSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJjaXJjbGVcIik7XG4gICAgICAgIHN2Zy5jYW52YXMgJiYgc3ZnLmNhbnZhcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZXMgPSBuZXcgRWxlbWVudChlbCwgc3ZnKTtcbiAgICAgICAgcmVzLmF0dHJzID0ge2N4OiB4LCBjeTogeSwgcjogciwgZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCIjMDAwXCJ9O1xuICAgICAgICByZXMudHlwZSA9IFwiY2lyY2xlXCI7XG4gICAgICAgICQoZWwsIHJlcy5hdHRycyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUucmVjdCA9IGZ1bmN0aW9uIChzdmcsIHgsIHksIHcsIGgsIHIpIHtcbiAgICAgICAgdmFyIGVsID0gJChcInJlY3RcIik7XG4gICAgICAgIHN2Zy5jYW52YXMgJiYgc3ZnLmNhbnZhcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZXMgPSBuZXcgRWxlbWVudChlbCwgc3ZnKTtcbiAgICAgICAgcmVzLmF0dHJzID0ge3g6IHgsIHk6IHksIHdpZHRoOiB3LCBoZWlnaHQ6IGgsIHJ4OiByIHx8IDAsIHJ5OiByIHx8IDAsIGZpbGw6IFwibm9uZVwiLCBzdHJva2U6IFwiIzAwMFwifTtcbiAgICAgICAgcmVzLnR5cGUgPSBcInJlY3RcIjtcbiAgICAgICAgJChlbCwgcmVzLmF0dHJzKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5lbGxpcHNlID0gZnVuY3Rpb24gKHN2ZywgeCwgeSwgcngsIHJ5KSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJlbGxpcHNlXCIpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHtjeDogeCwgY3k6IHksIHJ4OiByeCwgcnk6IHJ5LCBmaWxsOiBcIm5vbmVcIiwgc3Ryb2tlOiBcIiMwMDBcIn07XG4gICAgICAgIHJlcy50eXBlID0gXCJlbGxpcHNlXCI7XG4gICAgICAgICQoZWwsIHJlcy5hdHRycyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuaW1hZ2UgPSBmdW5jdGlvbiAoc3ZnLCBzcmMsIHgsIHksIHcsIGgpIHtcbiAgICAgICAgdmFyIGVsID0gJChcImltYWdlXCIpO1xuICAgICAgICAkKGVsLCB7eDogeCwgeTogeSwgd2lkdGg6IHcsIGhlaWdodDogaCwgcHJlc2VydmVBc3BlY3RSYXRpbzogXCJub25lXCJ9KTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmssIFwiaHJlZlwiLCBzcmMpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHt4OiB4LCB5OiB5LCB3aWR0aDogdywgaGVpZ2h0OiBoLCBzcmM6IHNyY307XG4gICAgICAgIHJlcy50eXBlID0gXCJpbWFnZVwiO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnRleHQgPSBmdW5jdGlvbiAoc3ZnLCB4LCB5LCB0ZXh0KSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJ0ZXh0XCIpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgXCJ0ZXh0LWFuY2hvclwiOiBcIm1pZGRsZVwiLFxuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIFwiZm9udC1mYW1pbHlcIjogUi5fYXZhaWxhYmxlQXR0cnNbXCJmb250LWZhbWlseVwiXSxcbiAgICAgICAgICAgIFwiZm9udC1zaXplXCI6IFIuX2F2YWlsYWJsZUF0dHJzW1wiZm9udC1zaXplXCJdLFxuICAgICAgICAgICAgc3Ryb2tlOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZpbGw6IFwiIzAwMFwiXG4gICAgICAgIH07XG4gICAgICAgIHJlcy50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocmVzLCByZXMuYXR0cnMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGggfHwgdGhpcy53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfHwgdGhpcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMud2lkdGgpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBpZiAodGhpcy5fdmlld0JveCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsIHRoaXMuX3ZpZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbiA9IFIuX2dldENvbnRhaW5lci5hcHBseSgwLCBhcmd1bWVudHMpLFxuICAgICAgICAgICAgY29udGFpbmVyID0gY29uICYmIGNvbi5jb250YWluZXI7XG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVkcgY29udGFpbmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHggPSBjb24ueCxcbiAgICAgICAgICAgIHkgPSBjb24ueSxcbiAgICAgICAgICAgIHdpZHRoID0gY29uLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY29uLmhlaWdodCxcbiAgICAgICAgICAgIGNudnMgPSAkKFwic3ZnXCIpLFxuICAgICAgICAgICAgY3NzID0gXCJvdmVyZmxvdzpoaWRkZW47XCIsXG4gICAgICAgICAgICBpc0Zsb2F0aW5nO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIHx8IDUxMjtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDM0MjtcbiAgICAgICAgJChjbnZzLCB7XG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHZlcnNpb246IDEuMSxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgICAgICAgICBcInhtbG5zOnhsaW5rXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29udGFpbmVyID09IDEpIHtcbiAgICAgICAgICAgIGNudnMuc3R5bGUuY3NzVGV4dCA9IGNzcyArIFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDpcIiArIHggKyBcInB4O3RvcDpcIiArIHkgKyBcInB4XCI7XG4gICAgICAgICAgICBSLl9nLmRvYy5ib2R5LmFwcGVuZENoaWxkKGNudnMpO1xuICAgICAgICAgICAgaXNGbG9hdGluZyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbnZzLnN0eWxlLmNzc1RleHQgPSBjc3MgKyBcInBvc2l0aW9uOnJlbGF0aXZlXCI7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGNudnMsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNudnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lciA9IG5ldyBSLl9QYXBlcjtcbiAgICAgICAgY29udGFpbmVyLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNvbnRhaW5lci5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGNvbnRhaW5lci5jYW52YXMgPSBjbnZzO1xuICAgICAgICBjb250YWluZXIuY2xlYXIoKTtcbiAgICAgICAgY29udGFpbmVyLl9sZWZ0ID0gY29udGFpbmVyLl90b3AgPSAwO1xuICAgICAgICBpc0Zsb2F0aW5nICYmIChjb250YWluZXIucmVuZGVyZml4ID0gZnVuY3Rpb24gKCkge30pO1xuICAgICAgICBjb250YWluZXIucmVuZGVyZml4KCk7XG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuc2V0Vmlld0JveCA9IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCBmaXQpIHtcbiAgICAgICAgZXZlKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsIHRoaXMsIHRoaXMuX3ZpZXdCb3gsIFt4LCB5LCB3LCBoLCBmaXRdKTtcbiAgICAgICAgdmFyIHBhcGVyU2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgc2l6ZSA9IG1tYXgodyAvIHBhcGVyU2l6ZS53aWR0aCwgaCAvIHBhcGVyU2l6ZS5oZWlnaHQpLFxuICAgICAgICAgICAgdG9wID0gdGhpcy50b3AsXG4gICAgICAgICAgICBhc3BlY3RSYXRpbyA9IGZpdCA/IFwieE1pZFlNaWQgbWVldFwiIDogXCJ4TWluWU1pblwiLFxuICAgICAgICAgICAgdmIsXG4gICAgICAgICAgICBzdztcbiAgICAgICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZiU2l6ZSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3ZiU2l6ZTtcbiAgICAgICAgICAgIHZiID0gXCIwIDAgXCIgKyB0aGlzLndpZHRoICsgUyArIHRoaXMuaGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdmJTaXplID0gc2l6ZTtcbiAgICAgICAgICAgIHZiID0geCArIFMgKyB5ICsgUyArIHcgKyBTICsgaDtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMuY2FudmFzLCB7XG4gICAgICAgICAgICB2aWV3Qm94OiB2YixcbiAgICAgICAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvXG4gICAgICAgIH0pO1xuICAgICAgICB3aGlsZSAoc2l6ZSAmJiB0b3ApIHtcbiAgICAgICAgICAgIHN3ID0gXCJzdHJva2Utd2lkdGhcIiBpbiB0b3AuYXR0cnMgPyB0b3AuYXR0cnNbXCJzdHJva2Utd2lkdGhcIl0gOiAxO1xuICAgICAgICAgICAgdG9wLmF0dHIoe1wic3Ryb2tlLXdpZHRoXCI6IHN3fSk7XG4gICAgICAgICAgICB0b3AuXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICB0b3AuXy5kaXJ0eVQgPSAxO1xuICAgICAgICAgICAgdG9wID0gdG9wLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmlld0JveCA9IFt4LCB5LCB3LCBoLCAhIWZpdF07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlbmRlcmZpeFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRml4ZXMgdGhlIGlzc3VlIG9mIEZpcmVmb3ggYW5kIElFOSByZWdhcmRpbmcgc3VicGl4ZWwgcmVuZGVyaW5nLiBJZiBwYXBlciBpcyBkZXBlbmRlbnRcbiAgICAgKiBvbiBvdGhlciBlbGVtZW50cyBhZnRlciByZWZsb3cgaXQgY291bGQgc2hpZnQgaGFsZiBwaXhlbCB3aGljaCBjYXVzZSBmb3IgbGluZXMgdG8gbG9zdCB0aGVpciBjcmlzcG5lc3MuXG4gICAgICogVGhpcyBtZXRob2QgZml4ZXMgdGhlIGlzc3VlLlxuICAgICAqKlxuICAgICAgIFNwZWNpYWwgdGhhbmtzIHRvIE1hcml1c3ogTm93YWsgKGh0dHA6Ly93d3cubWVkaWtvby5jb20vKSBmb3IgdGhpcyBtZXRob2QuXG4gICAgXFwqL1xuICAgIFIucHJvdG90eXBlLnJlbmRlcmZpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNudnMgPSB0aGlzLmNhbnZhcyxcbiAgICAgICAgICAgIHMgPSBjbnZzLnN0eWxlLFxuICAgICAgICAgICAgcG9zO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcG9zID0gY252cy5nZXRTY3JlZW5DVE0oKSB8fCBjbnZzLmNyZWF0ZVNWR01hdHJpeCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBwb3MgPSBjbnZzLmNyZWF0ZVNWR01hdHJpeCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZWZ0ID0gLXBvcy5lICUgMSxcbiAgICAgICAgICAgIHRvcCA9IC1wb3MuZiAlIDE7XG4gICAgICAgIGlmIChsZWZ0IHx8IHRvcCkge1xuICAgICAgICAgICAgaWYgKGxlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sZWZ0ID0gKHRoaXMuX2xlZnQgKyBsZWZ0KSAlIDE7XG4gICAgICAgICAgICAgICAgcy5sZWZ0ID0gdGhpcy5fbGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b3AgPSAodGhpcy5fdG9wICsgdG9wKSAlIDE7XG4gICAgICAgICAgICAgICAgcy50b3AgPSB0aGlzLl90b3AgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5jbGVhclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ2xlYXJzIHRoZSBwYXBlciwgaS5lLiByZW1vdmVzIGFsbCB0aGUgZWxlbWVudHMuXG4gICAgXFwqL1xuICAgIFIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBSLmV2ZShcInJhcGhhZWwuY2xlYXJcIiwgdGhpcyk7XG4gICAgICAgIHZhciBjID0gdGhpcy5jYW52YXM7XG4gICAgICAgIHdoaWxlIChjLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMudG9wID0gbnVsbDtcbiAgICAgICAgKHRoaXMuZGVzYyA9ICQoXCJkZXNjXCIpKS5hcHBlbmRDaGlsZChSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZShcIkNyZWF0ZWQgd2l0aCBSYXBoYVxceGVibCBcIiArIFIudmVyc2lvbikpO1xuICAgICAgICBjLmFwcGVuZENoaWxkKHRoaXMuZGVzYyk7XG4gICAgICAgIGMuYXBwZW5kQ2hpbGQodGhpcy5kZWZzID0gJChcImRlZnNcIikpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyB0aGUgcGFwZXIgZnJvbSB0aGUgRE9NLlxuICAgIFxcKi9cbiAgICBSLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZShcInJhcGhhZWwucmVtb3ZlXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy5wYXJlbnROb2RlICYmIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSB0eXBlb2YgdGhpc1tpXSA9PSBcImZ1bmN0aW9uXCIgPyBSLl9yZW1vdmVkRmFjdG9yeShpKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzZXRwcm90byA9IFIuc3Q7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSAmJiAhc2V0cHJvdG9baGFzXShtZXRob2QpKSB7XG4gICAgICAgIHNldHByb3RvW21ldGhvZF0gPSAoZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RuYW1lXS5hcHBseShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./dev/raphael.svg.js\n')},"./dev/raphael.vml.js":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ "./dev/raphael.core.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n    if (R && !R.vml) {\n        return;\n    }\n\n    var has = "hasOwnProperty",\n        Str = String,\n        toFloat = parseFloat,\n        math = Math,\n        round = math.round,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        fillString = "fill",\n        separator = /[, ]+/,\n        eve = R.eve,\n        ms = " progid:DXImageTransform.Microsoft",\n        S = " ",\n        E = "",\n        map = {M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x"},\n        bites = /([clmz]),?([^clmz]*)/gi,\n        blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n        val = /-?[^,\\s-]+/g,\n        cssDot = "position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",\n        zoom = 21600,\n        pathTypes = {path: 1, rect: 1, image: 1},\n        ovalTypes = {circle: 1, ellipse: 1},\n        path2vml = function (path) {\n            var total =  /[ahqstv]/ig,\n                command = R._pathToAbsolute;\n            Str(path).match(total) && (command = R._path2curve);\n            total = /[clmz]/g;\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\n                var res = Str(path).replace(bites, function (all, command, args) {\n                    var vals = [],\n                        isMove = command.toLowerCase() == "m",\n                        res = map[command];\n                    args.replace(val, function (value) {\n                        if (isMove && vals.length == 2) {\n                            res += vals + map[command == "m" ? "l" : "L"];\n                            vals = [];\n                        }\n                        vals.push(round(value * zoom));\n                    });\n                    return res + vals;\n                });\n                return res;\n            }\n            var pa = command(path), p, r;\n            res = [];\n            for (var i = 0, ii = pa.length; i < ii; i++) {\n                p = pa[i];\n                r = pa[i][0].toLowerCase();\n                r == "z" && (r = "x");\n                for (var j = 1, jj = p.length; j < jj; j++) {\n                    r += round(p[j] * zoom) + (j != jj - 1 ? "," : E);\n                }\n                res.push(r);\n            }\n            return res.join(S);\n        },\n        compensation = function (deg, dx, dy) {\n            var m = R.matrix();\n            m.rotate(-deg, .5, .5);\n            return {\n                dx: m.x(dx, dy),\n                dy: m.y(dx, dy)\n            };\n        },\n        setCoords = function (p, sx, sy, dx, dy, deg) {\n            var _ = p._,\n                m = p.matrix,\n                fillpos = _.fillpos,\n                o = p.node,\n                s = o.style,\n                y = 1,\n                flip = "",\n                dxdy,\n                kx = zoom / sx,\n                ky = zoom / sy;\n            s.visibility = "hidden";\n            if (!sx || !sy) {\n                return;\n            }\n            o.coordsize = abs(kx) + S + abs(ky);\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\n            if (deg) {\n                var c = compensation(deg, dx, dy);\n                dx = c.dx;\n                dy = c.dy;\n            }\n            sx < 0 && (flip += "x");\n            sy < 0 && (flip += " y") && (y = -1);\n            s.flip = flip;\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\n            if (fillpos || _.fillsize) {\n                var fill = o.getElementsByTagName(fillString);\n                fill = fill && fill[0];\n                o.removeChild(fill);\n                if (fillpos) {\n                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\n                    fill.position = c.dx * y + S + c.dy * y;\n                }\n                if (_.fillsize) {\n                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\n                }\n                o.appendChild(fill);\n            }\n            s.visibility = "visible";\n        };\n    R.toString = function () {\n        return  "Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl " + this.version;\n    };\n    var addArrow = function (o, value, isEnd) {\n        var values = Str(value).toLowerCase().split("-"),\n            se = isEnd ? "end" : "start",\n            i = values.length,\n            type = "classic",\n            w = "medium",\n            h = "medium";\n        while (i--) {\n            switch (values[i]) {\n                case "block":\n                case "classic":\n                case "oval":\n                case "diamond":\n                case "open":\n                case "none":\n                    type = values[i];\n                    break;\n                case "wide":\n                case "narrow": h = values[i]; break;\n                case "long":\n                case "short": w = values[i]; break;\n            }\n        }\n        var stroke = o.node.getElementsByTagName("stroke")[0];\n        stroke[se + "arrow"] = type;\n        stroke[se + "arrowlength"] = w;\n        stroke[se + "arrowwidth"] = h;\n    },\n    setFillAndStroke = function (o, params) {\n        // o.paper.canvas.style.display = "none";\n        o.attrs = o.attrs || {};\n        var node = o.node,\n            a = o.attrs,\n            s = node.style,\n            xy,\n            newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\n            isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\n            res = o;\n\n\n        for (var par in params) if (params[has](par)) {\n            a[par] = params[par];\n        }\n        if (newpath) {\n            a.path = R._getPath[o.type](o);\n            o._.dirty = 1;\n        }\n        params.href && (node.href = params.href);\n        params.title && (node.title = params.title);\n        params.target && (node.target = params.target);\n        params.cursor && (s.cursor = params.cursor);\n        "blur" in params && o.blur(params.blur);\n        if (params.path && o.type == "path" || newpath) {\n            node.path = path2vml(~Str(a.path).toLowerCase().indexOf("r") ? R._pathToAbsolute(a.path) : a.path);\n            o._.dirty = 1;\n            if (o.type == "image") {\n                o._.fillpos = [a.x, a.y];\n                o._.fillsize = [a.width, a.height];\n                setCoords(o, 1, 1, 0, 0, 0);\n            }\n        }\n        "transform" in params && o.transform(params.transform);\n        if (isOval) {\n            var cx = +a.cx,\n                cy = +a.cy,\n                rx = +a.rx || +a.r || 0,\n                ry = +a.ry || +a.r || 0;\n            node.path = R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\n            o._.dirty = 1;\n        }\n        if ("clip-rect" in params) {\n            var rect = Str(params["clip-rect"]).split(separator);\n            if (rect.length == 4) {\n                rect[2] = +rect[2] + (+rect[0]);\n                rect[3] = +rect[3] + (+rect[1]);\n                var div = node.clipRect || R._g.doc.createElement("div"),\n                    dstyle = div.style;\n                dstyle.clip = R.format("rect({1}px {2}px {3}px {0}px)", rect);\n                if (!node.clipRect) {\n                    dstyle.position = "absolute";\n                    dstyle.top = 0;\n                    dstyle.left = 0;\n                    dstyle.width = o.paper.width + "px";\n                    dstyle.height = o.paper.height + "px";\n                    node.parentNode.insertBefore(div, node);\n                    div.appendChild(node);\n                    node.clipRect = div;\n                }\n            }\n            if (!params["clip-rect"]) {\n                node.clipRect && (node.clipRect.style.clip = "auto");\n            }\n        }\n        if (o.textpath) {\n            var textpathStyle = o.textpath.style;\n            params.font && (textpathStyle.font = params.font);\n            params["font-family"] && (textpathStyle.fontFamily = \'"\' + params["font-family"].split(",")[0].replace(/^[\'"]+|[\'"]+$/g, E) + \'"\');\n            params["font-size"] && (textpathStyle.fontSize = params["font-size"]);\n            params["font-weight"] && (textpathStyle.fontWeight = params["font-weight"]);\n            params["font-style"] && (textpathStyle.fontStyle = params["font-style"]);\n        }\n        if ("arrow-start" in params) {\n            addArrow(res, params["arrow-start"]);\n        }\n        if ("arrow-end" in params) {\n            addArrow(res, params["arrow-end"], 1);\n        }\n        if (params.opacity != null ||\n            params.fill != null ||\n            params.src != null ||\n            params.stroke != null ||\n            params["stroke-width"] != null ||\n            params["stroke-opacity"] != null ||\n            params["fill-opacity"] != null ||\n            params["stroke-dasharray"] != null ||\n            params["stroke-miterlimit"] != null ||\n            params["stroke-linejoin"] != null ||\n            params["stroke-linecap"] != null) {\n            var fill = node.getElementsByTagName(fillString),\n                newfill = false;\n            fill = fill && fill[0];\n            !fill && (newfill = fill = createNode(fillString));\n            if (o.type == "image" && params.src) {\n                fill.src = params.src;\n            }\n            params.fill && (fill.on = true);\n            if (fill.on == null || params.fill == "none" || params.fill === null) {\n                fill.on = false;\n            }\n            if (fill.on && params.fill) {\n                var isURL = Str(params.fill).match(R._ISURL);\n                if (isURL) {\n                    fill.parentNode == node && node.removeChild(fill);\n                    fill.rotate = true;\n                    fill.src = isURL[1];\n                    fill.type = "tile";\n                    var bbox = o.getBBox(1);\n                    fill.position = bbox.x + S + bbox.y;\n                    o._.fillpos = [bbox.x, bbox.y];\n\n                    R._preload(isURL[1], function () {\n                        o._.fillsize = [this.offsetWidth, this.offsetHeight];\n                    });\n                } else {\n                    fill.color = R.getRGB(params.fill).hex;\n                    fill.src = E;\n                    fill.type = "solid";\n                    if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != "r") && addGradientFill(res, params.fill, fill)) {\n                        a.fill = "none";\n                        a.gradient = params.fill;\n                        fill.rotate = false;\n                    }\n                }\n            }\n            if ("fill-opacity" in params || "opacity" in params) {\n                var opacity = ((+a["fill-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);\n                opacity = mmin(mmax(opacity, 0), 1);\n                fill.opacity = opacity;\n                if (fill.src) {\n                    fill.color = "none";\n                }\n            }\n            node.appendChild(fill);\n            var stroke = (node.getElementsByTagName("stroke") && node.getElementsByTagName("stroke")[0]),\n            newstroke = false;\n            !stroke && (newstroke = stroke = createNode("stroke"));\n            if ((params.stroke && params.stroke != "none") ||\n                params["stroke-width"] ||\n                params["stroke-opacity"] != null ||\n                params["stroke-dasharray"] ||\n                params["stroke-miterlimit"] ||\n                params["stroke-linejoin"] ||\n                params["stroke-linecap"]) {\n                stroke.on = true;\n            }\n            (params.stroke == "none" || params.stroke === null || stroke.on == null || params.stroke == 0 || params["stroke-width"] == 0) && (stroke.on = false);\n            var strokeColor = R.getRGB(params.stroke);\n            stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n            opacity = ((+a["stroke-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);\n            var width = (toFloat(params["stroke-width"]) || 1) * .75;\n            opacity = mmin(mmax(opacity, 0), 1);\n            params["stroke-width"] == null && (width = a["stroke-width"]);\n            params["stroke-width"] && (stroke.weight = width);\n            width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n            stroke.opacity = opacity;\n\n            params["stroke-linejoin"] && (stroke.joinstyle = params["stroke-linejoin"] || "miter");\n            stroke.miterlimit = params["stroke-miterlimit"] || 8;\n            params["stroke-linecap"] && (stroke.endcap = params["stroke-linecap"] == "butt" ? "flat" : params["stroke-linecap"] == "square" ? "square" : "round");\n            if ("stroke-dasharray" in params) {\n                var dasharray = {\n                    "-": "shortdash",\n                    ".": "shortdot",\n                    "-.": "shortdashdot",\n                    "-..": "shortdashdotdot",\n                    ". ": "dot",\n                    "- ": "dash",\n                    "--": "longdash",\n                    "- .": "dashdot",\n                    "--.": "longdashdot",\n                    "--..": "longdashdotdot"\n                };\n                stroke.dashstyle = dasharray[has](params["stroke-dasharray"]) ? dasharray[params["stroke-dasharray"]] : E;\n            }\n            newstroke && node.appendChild(stroke);\n        }\n        if (res.type == "text") {\n            res.paper.canvas.style.display = E;\n            var span = res.paper.span,\n                m = 100,\n                fontSize = a.font && a.font.match(/\\d+(?:\\.\\d*)?(?=px)/);\n            s = span.style;\n            a.font && (s.font = a.font);\n            a["font-family"] && (s.fontFamily = a["font-family"]);\n            a["font-weight"] && (s.fontWeight = a["font-weight"]);\n            a["font-style"] && (s.fontStyle = a["font-style"]);\n            fontSize = toFloat(a["font-size"] || fontSize && fontSize[0]) || 10;\n            s.fontSize = fontSize * m + "px";\n            res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\\n/g, "<br>"));\n            var brect = span.getBoundingClientRect();\n            res.W = a.w = (brect.right - brect.left) / m;\n            res.H = a.h = (brect.bottom - brect.top) / m;\n            // res.paper.canvas.style.display = "none";\n            res.X = a.x;\n            res.Y = a.y + res.H / 2;\n\n            ("x" in params || "y" in params) && (res.path.v = R.format("m{0},{1}l{2},{1}", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));\n            var dirtyattrs = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"];\n            for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {\n                res._.dirty = 1;\n                break;\n            }\n\n            // text-anchor emulation\n            switch (a["text-anchor"]) {\n                case "start":\n                    res.textpath.style["v-text-align"] = "left";\n                    res.bbx = res.W / 2;\n                break;\n                case "end":\n                    res.textpath.style["v-text-align"] = "right";\n                    res.bbx = -res.W / 2;\n                break;\n                default:\n                    res.textpath.style["v-text-align"] = "center";\n                    res.bbx = 0;\n                break;\n            }\n            res.textpath.style["v-text-kern"] = true;\n        }\n        // res.paper.canvas.style.display = E;\n    },\n    addGradientFill = function (o, gradient, fill) {\n        o.attrs = o.attrs || {};\n        var attrs = o.attrs,\n            pow = Math.pow,\n            opacity,\n            oindex,\n            type = "linear",\n            fxfy = ".5 .5";\n        o.attrs.gradient = gradient;\n        gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {\n            type = "radial";\n            if (fx && fy) {\n                fx = toFloat(fx);\n                fy = toFloat(fy);\n                pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                fxfy = fx + S + fy;\n            }\n            return E;\n        });\n        gradient = gradient.split(/\\s*\\-\\s*/);\n        if (type == "linear") {\n            var angle = gradient.shift();\n            angle = -toFloat(angle);\n            if (isNaN(angle)) {\n                return null;\n            }\n        }\n        var dots = R._parseDots(gradient);\n        if (!dots) {\n            return null;\n        }\n        o = o.shape || o.node;\n        if (dots.length) {\n            o.removeChild(fill);\n            fill.on = true;\n            fill.method = "none";\n            fill.color = dots[0].color;\n            fill.color2 = dots[dots.length - 1].color;\n            var clrs = [];\n            for (var i = 0, ii = dots.length; i < ii; i++) {\n                dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\n            }\n            fill.colors = clrs.length ? clrs.join() : "0% " + fill.color;\n            if (type == "radial") {\n                fill.type = "gradientTitle";\n                fill.focus = "100%";\n                fill.focussize = "0 0";\n                fill.focusposition = fxfy;\n                fill.angle = 0;\n            } else {\n                // fill.rotate= true;\n                fill.type = "gradient";\n                fill.angle = (270 - angle) % 360;\n            }\n            o.appendChild(fill);\n        }\n        return 1;\n    },\n    Element = function (node, vml) {\n        this[0] = this.node = node;\n        node.raphael = true;\n        this.id = R._oid++;\n        node.raphaelid = this.id;\n        this.X = 0;\n        this.Y = 0;\n        this.attrs = {};\n        this.paper = vml;\n        this.matrix = R.matrix();\n        this._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            dx: 0,\n            dy: 0,\n            deg: 0,\n            dirty: 1,\n            dirtyT: 1\n        };\n        !vml.bottom && (vml.bottom = this);\n        this.prev = vml.top;\n        vml.top && (vml.top.next = this);\n        vml.top = this;\n        this.next = null;\n    };\n    var elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n    elproto.transform = function (tstr) {\n        if (tstr == null) {\n            return this._.transform;\n        }\n        var vbs = this.paper._viewBoxShift,\n            vbt = vbs ? "s" + [vbs.scale, vbs.scale] + "-1-1t" + [vbs.dx, vbs.dy] : E,\n            oldt;\n        if (vbs) {\n            oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, this._.transform || E);\n        }\n        R._extractTransform(this, vbt + tstr);\n        var matrix = this.matrix.clone(),\n            skew = this.skew,\n            o = this.node,\n            split,\n            isGrad = ~Str(this.attrs.fill).indexOf("-"),\n            isPatt = !Str(this.attrs.fill).indexOf("url(");\n        matrix.translate(1, 1);\n        if (isPatt || isGrad || this.type == "image") {\n            skew.matrix = "1 0 0 1";\n            skew.offset = "0 0";\n            split = matrix.split();\n            if ((isGrad && split.noRotation) || !split.isSimple) {\n                o.style.filter = matrix.toFilter();\n                var bb = this.getBBox(),\n                    bbt = this.getBBox(1),\n                    dx = bb.x - bbt.x,\n                    dy = bb.y - bbt.y;\n                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\n                setCoords(this, 1, 1, dx, dy, 0);\n            } else {\n                o.style.filter = E;\n                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\n            }\n        } else {\n            o.style.filter = E;\n            skew.matrix = Str(matrix);\n            skew.offset = matrix.offset();\n        }\n        if (oldt !== null) { // empty string value is true as well\n            this._.transform = oldt;\n            R._extractTransform(this, oldt);\n        }\n        return this;\n    };\n    elproto.rotate = function (deg, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        if (deg == null) {\n            return;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        this._.dirtyT = 1;\n        this.transform(this._.transform.concat([["r", deg, cx, cy]]));\n        return this;\n    };\n    elproto.translate = function (dx, dy) {\n        if (this.removed) {\n            return this;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        if (this._.bbox) {\n            this._.bbox.x += dx;\n            this._.bbox.y += dy;\n        }\n        this.transform(this._.transform.concat([["t", dx, dy]]));\n        return this;\n    };\n    elproto.scale = function (sx, sy, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n            isNaN(cx) && (cx = null);\n            isNaN(cy) && (cy = null);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n\n        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));\n        this._.dirtyT = 1;\n        return this;\n    };\n    elproto.hide = function () {\n        !this.removed && (this.node.style.display = "none");\n        return this;\n    };\n    elproto.show = function () {\n        !this.removed && (this.node.style.display = E);\n        return this;\n    };\n    // Needed to fix the vml setViewBox issues\n    elproto.auxGetBBox = R.el.getBBox;\n    elproto.getBBox = function(){\n      var b = this.auxGetBBox();\n      if (this.paper && this.paper._viewBoxShift)\n      {\n        var c = {};\n        var z = 1/this.paper._viewBoxShift.scale;\n        c.x = b.x - this.paper._viewBoxShift.dx;\n        c.x *= z;\n        c.y = b.y - this.paper._viewBoxShift.dy;\n        c.y *= z;\n        c.width  = b.width  * z;\n        c.height = b.height * z;\n        c.x2 = c.x + c.width;\n        c.y2 = c.y + c.height;\n        return c;\n      }\n      return b;\n    };\n    elproto._getBBox = function () {\n        if (this.removed) {\n            return {};\n        }\n        return {\n            x: this.X + (this.bbx || 0) - this.W / 2,\n            y: this.Y - this.H,\n            width: this.W,\n            height: this.H\n        };\n    };\n    elproto.remove = function () {\n        if (this.removed || !this.node.parentNode) {\n            return;\n        }\n        this.paper.__set__ && this.paper.__set__.exclude(this);\n        R.eve.unbind("raphael.*.*." + this.id);\n        R._tear(this, this.paper);\n        this.node.parentNode.removeChild(this.node);\n        this.shape && this.shape.parentNode.removeChild(this.shape);\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    elproto.attr = function (name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs) if (this.attrs[has](a)) {\n                res[a] = this.attrs[a];\n            }\n            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            return res;\n        }\n        if (value == null && R.is(name, "string")) {\n            if (name == fillString && this.attrs.fill == "none" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            var names = name.split(separator),\n                out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.paper.customAttributes[name], "function")) {\n                    out[name] = this.paper.customAttributes[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (this.attrs && value == null && R.is(name, "array")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        var params;\n        if (value != null) {\n            params = {};\n            params[name] = value;\n        }\n        value == null && R.is(name, "object") && (params = name);\n        for (var key in params) {\n            eve("raphael.attr." + key + "." + this.id, this, params[key]);\n        }\n        if (params) {\n            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {\n                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\n                this.attrs[key] = params[key];\n                for (var subkey in par) if (par[has](subkey)) {\n                    params[subkey] = par[subkey];\n                }\n            }\n            // this.paper.canvas.style.display = "none";\n            if (params.text && this.type == "text") {\n                this.textpath.string = params.text;\n            }\n            setFillAndStroke(this, params);\n            // this.paper.canvas.style.display = E;\n        }\n        return this;\n    };\n    elproto.toFront = function () {\n        !this.removed && this.node.parentNode.appendChild(this.node);\n        this.paper && this.paper.top != this && R._tofront(this, this.paper);\n        return this;\n    };\n    elproto.toBack = function () {\n        if (this.removed) {\n            return this;\n        }\n        if (this.node.parentNode.firstChild != this.node) {\n            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);\n            R._toback(this, this.paper);\n        }\n        return this;\n    };\n    elproto.insertAfter = function (element) {\n        if (this.removed) {\n            return this;\n        }\n        if (element.constructor == R.st.constructor) {\n            element = element[element.length - 1];\n        }\n        if (element.node.nextSibling) {\n            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);\n        } else {\n            element.node.parentNode.appendChild(this.node);\n        }\n        R._insertafter(this, element, this.paper);\n        return this;\n    };\n    elproto.insertBefore = function (element) {\n        if (this.removed) {\n            return this;\n        }\n        if (element.constructor == R.st.constructor) {\n            element = element[0];\n        }\n        element.node.parentNode.insertBefore(this.node, element.node);\n        R._insertbefore(this, element, this.paper);\n        return this;\n    };\n    elproto.blur = function (size) {\n        var s = this.node.runtimeStyle,\n            f = s.filter;\n        f = f.replace(blurregexp, E);\n        if (+size !== 0) {\n            this.attrs.blur = size;\n            s.filter = f + S + ms + ".Blur(pixelradius=" + (+size || 1.5) + ")";\n            s.margin = R.format("-{0}px 0 0 -{0}px", round(+size || 1.5));\n        } else {\n            s.filter = f;\n            s.margin = 0;\n            delete this.attrs.blur;\n        }\n        return this;\n    };\n\n    R._engine.path = function (pathString, vml) {\n        var el = createNode("shape");\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = vml.coordorigin;\n        var p = new Element(el, vml),\n            attr = {fill: "none", stroke: "#000"};\n        pathString && (attr.path = pathString);\n        p.type = "path";\n        p.path = [];\n        p.Path = E;\n        setFillAndStroke(p, attr);\n        vml.canvas && vml.canvas.appendChild(el);\n        var skew = createNode("skew");\n        skew.on = true;\n        el.appendChild(skew);\n        p.skew = skew;\n        p.transform(E);\n        return p;\n    };\n    R._engine.rect = function (vml, x, y, w, h, r) {\n        var path = R._rectPath(x, y, w, h, r),\n            res = vml.path(path),\n            a = res.attrs;\n        res.X = a.x = x;\n        res.Y = a.y = y;\n        res.W = a.width = w;\n        res.H = a.height = h;\n        a.r = r;\n        a.path = path;\n        res.type = "rect";\n        return res;\n    };\n    R._engine.ellipse = function (vml, x, y, rx, ry) {\n        var res = vml.path(),\n            a = res.attrs;\n        res.X = x - rx;\n        res.Y = y - ry;\n        res.W = rx * 2;\n        res.H = ry * 2;\n        res.type = "ellipse";\n        setFillAndStroke(res, {\n            cx: x,\n            cy: y,\n            rx: rx,\n            ry: ry\n        });\n        return res;\n    };\n    R._engine.circle = function (vml, x, y, r) {\n        var res = vml.path(),\n            a = res.attrs;\n        res.X = x - r;\n        res.Y = y - r;\n        res.W = res.H = r * 2;\n        res.type = "circle";\n        setFillAndStroke(res, {\n            cx: x,\n            cy: y,\n            r: r\n        });\n        return res;\n    };\n    R._engine.image = function (vml, src, x, y, w, h) {\n        var path = R._rectPath(x, y, w, h),\n            res = vml.path(path).attr({stroke: "none"}),\n            a = res.attrs,\n            node = res.node,\n            fill = node.getElementsByTagName(fillString)[0];\n        a.src = src;\n        res.X = a.x = x;\n        res.Y = a.y = y;\n        res.W = a.width = w;\n        res.H = a.height = h;\n        a.path = path;\n        res.type = "image";\n        fill.parentNode == node && node.removeChild(fill);\n        fill.rotate = true;\n        fill.src = src;\n        fill.type = "tile";\n        res._.fillpos = [x, y];\n        res._.fillsize = [w, h];\n        node.appendChild(fill);\n        setCoords(res, 1, 1, 0, 0, 0);\n        return res;\n    };\n    R._engine.text = function (vml, x, y, text) {\n        var el = createNode("shape"),\n            path = createNode("path"),\n            o = createNode("textpath");\n        x = x || 0;\n        y = y || 0;\n        text = text || "";\n        path.v = R.format("m{0},{1}l{2},{1}", round(x * zoom), round(y * zoom), round(x * zoom) + 1);\n        path.textpathok = true;\n        o.string = Str(text);\n        o.on = true;\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = "0 0";\n        var p = new Element(el, vml),\n            attr = {\n                fill: "#000",\n                stroke: "none",\n                font: R._availableAttrs.font,\n                text: text\n            };\n        p.shape = el;\n        p.path = path;\n        p.textpath = o;\n        p.type = "text";\n        p.attrs.text = Str(text);\n        p.attrs.x = x;\n        p.attrs.y = y;\n        p.attrs.w = 1;\n        p.attrs.h = 1;\n        setFillAndStroke(p, attr);\n        el.appendChild(o);\n        el.appendChild(path);\n        vml.canvas.appendChild(el);\n        var skew = createNode("skew");\n        skew.on = true;\n        el.appendChild(skew);\n        p.skew = skew;\n        p.transform(E);\n        return p;\n    };\n    R._engine.setSize = function (width, height) {\n        var cs = this.canvas.style;\n        this.width = width;\n        this.height = height;\n        width == +width && (width += "px");\n        height == +height && (height += "px");\n        cs.width = width;\n        cs.height = height;\n        cs.clip = "rect(0 " + width + " " + height + " 0)";\n        if (this._viewBox) {\n            R._engine.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.setViewBox = function (x, y, w, h, fit) {\n        R.eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);\n        var paperSize = this.getSize(),\n            width = paperSize.width,\n            height = paperSize.height,\n            H, W;\n        if (fit) {\n            H = height / h;\n            W = width / w;\n            if (w * H < width) {\n                x -= (width - w * H) / 2 / H;\n            }\n            if (h * W < height) {\n                y -= (height - h * W) / 2 / W;\n            }\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        this._viewBoxShift = {\n            dx: -x,\n            dy: -y,\n            scale: paperSize\n        };\n        this.forEach(function (el) {\n            el.transform("...");\n        });\n        return this;\n    };\n    var createNode;\n    R._engine.initWin = function (win) {\n            var doc = win.document;\n            if (doc.styleSheets.length < 31) {\n                doc.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");\n            } else {\n                // no more room, add to the existing one\n                // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\n                doc.styleSheets[0].addRule(".rvml", "behavior:url(#default#VML)");\n            }\n            try {\n                !doc.namespaces.rvml && doc.namespaces.add("rvml", "urn:schemas-microsoft-com:vml");\n                createNode = function (tagName) {\n                    return doc.createElement(\'<rvml:\' + tagName + \' class="rvml">\');\n                };\n            } catch (e) {\n                createNode = function (tagName) {\n                    return doc.createElement(\'<\' + tagName + \' xmlns="urn:schemas-microsoft.com:vml" class="rvml">\');\n                };\n            }\n        };\n    R._engine.initWin(R._g.win);\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments),\n            container = con.container,\n            height = con.height,\n            s,\n            width = con.width,\n            x = con.x,\n            y = con.y;\n        if (!container) {\n            throw new Error("VML container not found.");\n        }\n        var res = new R._Paper,\n            c = res.canvas = R._g.doc.createElement("div"),\n            cs = c.style;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        res.width = width;\n        res.height = height;\n        width == +width && (width += "px");\n        height == +height && (height += "px");\n        res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n        res.coordorigin = "0 0";\n        res.span = R._g.doc.createElement("span");\n        res.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";\n        c.appendChild(res.span);\n        cs.cssText = R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", width, height);\n        if (container == 1) {\n            R._g.doc.body.appendChild(c);\n            cs.left = x + "px";\n            cs.top = y + "px";\n            cs.position = "absolute";\n        } else {\n            if (container.firstChild) {\n                container.insertBefore(c, container.firstChild);\n            } else {\n                container.appendChild(c);\n            }\n        }\n        res.renderfix = function () {};\n        return res;\n    };\n    R.prototype.clear = function () {\n        R.eve("raphael.clear", this);\n        this.canvas.innerHTML = E;\n        this.span = R._g.doc.createElement("span");\n        this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";\n        this.canvas.appendChild(this.span);\n        this.bottom = this.top = null;\n    };\n    R.prototype.remove = function () {\n        R.eve("raphael.remove", this);\n        this.canvas.parentNode.removeChild(this.canvas);\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n        return true;\n    };\n\n    var setproto = R.st;\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC52bWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwudm1sLmpzP2JhZjAiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCJdLCBmdW5jdGlvbihSKSB7XG4gICAgaWYgKFIgJiYgIVIudm1sKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGFzID0gXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgcm91bmQgPSBtYXRoLnJvdW5kLFxuICAgICAgICBtbWF4ID0gbWF0aC5tYXgsXG4gICAgICAgIG1taW4gPSBtYXRoLm1pbixcbiAgICAgICAgYWJzID0gbWF0aC5hYnMsXG4gICAgICAgIGZpbGxTdHJpbmcgPSBcImZpbGxcIixcbiAgICAgICAgc2VwYXJhdG9yID0gL1ssIF0rLyxcbiAgICAgICAgZXZlID0gUi5ldmUsXG4gICAgICAgIG1zID0gXCIgcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0XCIsXG4gICAgICAgIFMgPSBcIiBcIixcbiAgICAgICAgRSA9IFwiXCIsXG4gICAgICAgIG1hcCA9IHtNOiBcIm1cIiwgTDogXCJsXCIsIEM6IFwiY1wiLCBaOiBcInhcIiwgbTogXCJ0XCIsIGw6IFwiclwiLCBjOiBcInZcIiwgejogXCJ4XCJ9LFxuICAgICAgICBiaXRlcyA9IC8oW2NsbXpdKSw/KFteY2xtel0qKS9naSxcbiAgICAgICAgYmx1cnJlZ2V4cCA9IC8gcHJvZ2lkOlxcUytCbHVyXFwoW15cXCldK1xcKS9nLFxuICAgICAgICB2YWwgPSAvLT9bXixcXHMtXSsvZyxcbiAgICAgICAgY3NzRG90ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7YmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIixcbiAgICAgICAgem9vbSA9IDIxNjAwLFxuICAgICAgICBwYXRoVHlwZXMgPSB7cGF0aDogMSwgcmVjdDogMSwgaW1hZ2U6IDF9LFxuICAgICAgICBvdmFsVHlwZXMgPSB7Y2lyY2xlOiAxLCBlbGxpcHNlOiAxfSxcbiAgICAgICAgcGF0aDJ2bWwgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gIC9bYWhxc3R2XS9pZyxcbiAgICAgICAgICAgICAgICBjb21tYW5kID0gUi5fcGF0aFRvQWJzb2x1dGU7XG4gICAgICAgICAgICBTdHIocGF0aCkubWF0Y2godG90YWwpICYmIChjb21tYW5kID0gUi5fcGF0aDJjdXJ2ZSk7XG4gICAgICAgICAgICB0b3RhbCA9IC9bY2xtel0vZztcbiAgICAgICAgICAgIGlmIChjb21tYW5kID09IFIuX3BhdGhUb0Fic29sdXRlICYmICFTdHIocGF0aCkubWF0Y2godG90YWwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IFN0cihwYXRoKS5yZXBsYWNlKGJpdGVzLCBmdW5jdGlvbiAoYWxsLCBjb21tYW5kLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWxzID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc01vdmUgPSBjb21tYW5kLnRvTG93ZXJDYXNlKCkgPT0gXCJtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBtYXBbY29tbWFuZF07XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MucmVwbGFjZSh2YWwsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW92ZSAmJiB2YWxzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IHZhbHMgKyBtYXBbY29tbWFuZCA9PSBcIm1cIiA/IFwibFwiIDogXCJMXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaChyb3VuZCh2YWx1ZSAqIHpvb20pKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMgKyB2YWxzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGEgPSBjb21tYW5kKHBhdGgpLCBwLCByO1xuICAgICAgICAgICAgcmVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwYS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcCA9IHBhW2ldO1xuICAgICAgICAgICAgICAgIHIgPSBwYVtpXVswXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHIgPT0gXCJ6XCIgJiYgKHIgPSBcInhcIik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gcC5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHIgKz0gcm91bmQocFtqXSAqIHpvb20pICsgKGogIT0gamogLSAxID8gXCIsXCIgOiBFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzLnB1c2gocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpvaW4oUyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBlbnNhdGlvbiA9IGZ1bmN0aW9uIChkZWcsIGR4LCBkeSkge1xuICAgICAgICAgICAgdmFyIG0gPSBSLm1hdHJpeCgpO1xuICAgICAgICAgICAgbS5yb3RhdGUoLWRlZywgLjUsIC41KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZHg6IG0ueChkeCwgZHkpLFxuICAgICAgICAgICAgICAgIGR5OiBtLnkoZHgsIGR5KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0Q29vcmRzID0gZnVuY3Rpb24gKHAsIHN4LCBzeSwgZHgsIGR5LCBkZWcpIHtcbiAgICAgICAgICAgIHZhciBfID0gcC5fLFxuICAgICAgICAgICAgICAgIG0gPSBwLm1hdHJpeCxcbiAgICAgICAgICAgICAgICBmaWxscG9zID0gXy5maWxscG9zLFxuICAgICAgICAgICAgICAgIG8gPSBwLm5vZGUsXG4gICAgICAgICAgICAgICAgcyA9IG8uc3R5bGUsXG4gICAgICAgICAgICAgICAgeSA9IDEsXG4gICAgICAgICAgICAgICAgZmxpcCA9IFwiXCIsXG4gICAgICAgICAgICAgICAgZHhkeSxcbiAgICAgICAgICAgICAgICBreCA9IHpvb20gLyBzeCxcbiAgICAgICAgICAgICAgICBreSA9IHpvb20gLyBzeTtcbiAgICAgICAgICAgIHMudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBpZiAoIXN4IHx8ICFzeSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG8uY29vcmRzaXplID0gYWJzKGt4KSArIFMgKyBhYnMoa3kpO1xuICAgICAgICAgICAgcy5yb3RhdGlvbiA9IGRlZyAqIChzeCAqIHN5IDwgMCA/IC0xIDogMSk7XG4gICAgICAgICAgICBpZiAoZGVnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBjb21wZW5zYXRpb24oZGVnLCBkeCwgZHkpO1xuICAgICAgICAgICAgICAgIGR4ID0gYy5keDtcbiAgICAgICAgICAgICAgICBkeSA9IGMuZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzeCA8IDAgJiYgKGZsaXAgKz0gXCJ4XCIpO1xuICAgICAgICAgICAgc3kgPCAwICYmIChmbGlwICs9IFwiIHlcIikgJiYgKHkgPSAtMSk7XG4gICAgICAgICAgICBzLmZsaXAgPSBmbGlwO1xuICAgICAgICAgICAgby5jb29yZG9yaWdpbiA9IChkeCAqIC1reCkgKyBTICsgKGR5ICogLWt5KTtcbiAgICAgICAgICAgIGlmIChmaWxscG9zIHx8IF8uZmlsbHNpemUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsbCA9IG8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZmlsbFN0cmluZyk7XG4gICAgICAgICAgICAgICAgZmlsbCA9IGZpbGwgJiYgZmlsbFswXTtcbiAgICAgICAgICAgICAgICBvLnJlbW92ZUNoaWxkKGZpbGwpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxscG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBjb21wZW5zYXRpb24oZGVnLCBtLngoZmlsbHBvc1swXSwgZmlsbHBvc1sxXSksIG0ueShmaWxscG9zWzBdLCBmaWxscG9zWzFdKSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwucG9zaXRpb24gPSBjLmR4ICogeSArIFMgKyBjLmR5ICogeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF8uZmlsbHNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5zaXplID0gXy5maWxsc2l6ZVswXSAqIGFicyhzeCkgKyBTICsgXy5maWxsc2l6ZVsxXSAqIGFicyhzeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG8uYXBwZW5kQ2hpbGQoZmlsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICAgICAgfTtcbiAgICBSLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIFwiWW91ciBicm93c2VyIGRvZXNuXFx1MjAxOXQgc3VwcG9ydCBTVkcuIEZhbGxpbmcgZG93biB0byBWTUwuXFxuWW91IGFyZSBydW5uaW5nIFJhcGhhXFx4ZWJsIFwiICsgdGhpcy52ZXJzaW9uO1xuICAgIH07XG4gICAgdmFyIGFkZEFycm93ID0gZnVuY3Rpb24gKG8sIHZhbHVlLCBpc0VuZCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gU3RyKHZhbHVlKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLVwiKSxcbiAgICAgICAgICAgIHNlID0gaXNFbmQgPyBcImVuZFwiIDogXCJzdGFydFwiLFxuICAgICAgICAgICAgaSA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICB0eXBlID0gXCJjbGFzc2ljXCIsXG4gICAgICAgICAgICB3ID0gXCJtZWRpdW1cIixcbiAgICAgICAgICAgIGggPSBcIm1lZGl1bVwiO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHZhbHVlc1tpXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJjbGFzc2ljXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIm92YWxcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIndpZGVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwibmFycm93XCI6IGggPSB2YWx1ZXNbaV07IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInNob3J0XCI6IHcgPSB2YWx1ZXNbaV07IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJva2UgPSBvLm5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF07XG4gICAgICAgIHN0cm9rZVtzZSArIFwiYXJyb3dcIl0gPSB0eXBlO1xuICAgICAgICBzdHJva2Vbc2UgKyBcImFycm93bGVuZ3RoXCJdID0gdztcbiAgICAgICAgc3Ryb2tlW3NlICsgXCJhcnJvd3dpZHRoXCJdID0gaDtcbiAgICB9LFxuICAgIHNldEZpbGxBbmRTdHJva2UgPSBmdW5jdGlvbiAobywgcGFyYW1zKSB7XG4gICAgICAgIC8vIG8ucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgby5hdHRycyA9IG8uYXR0cnMgfHwge307XG4gICAgICAgIHZhciBub2RlID0gby5ub2RlLFxuICAgICAgICAgICAgYSA9IG8uYXR0cnMsXG4gICAgICAgICAgICBzID0gbm9kZS5zdHlsZSxcbiAgICAgICAgICAgIHh5LFxuICAgICAgICAgICAgbmV3cGF0aCA9IHBhdGhUeXBlc1tvLnR5cGVdICYmIChwYXJhbXMueCAhPSBhLnggfHwgcGFyYW1zLnkgIT0gYS55IHx8IHBhcmFtcy53aWR0aCAhPSBhLndpZHRoIHx8IHBhcmFtcy5oZWlnaHQgIT0gYS5oZWlnaHQgfHwgcGFyYW1zLmN4ICE9IGEuY3ggfHwgcGFyYW1zLmN5ICE9IGEuY3kgfHwgcGFyYW1zLnJ4ICE9IGEucnggfHwgcGFyYW1zLnJ5ICE9IGEucnkgfHwgcGFyYW1zLnIgIT0gYS5yKSxcbiAgICAgICAgICAgIGlzT3ZhbCA9IG92YWxUeXBlc1tvLnR5cGVdICYmIChhLmN4ICE9IHBhcmFtcy5jeCB8fCBhLmN5ICE9IHBhcmFtcy5jeSB8fCBhLnIgIT0gcGFyYW1zLnIgfHwgYS5yeCAhPSBwYXJhbXMucnggfHwgYS5yeSAhPSBwYXJhbXMucnkpLFxuICAgICAgICAgICAgcmVzID0gbztcblxuXG4gICAgICAgIGZvciAodmFyIHBhciBpbiBwYXJhbXMpIGlmIChwYXJhbXNbaGFzXShwYXIpKSB7XG4gICAgICAgICAgICBhW3Bhcl0gPSBwYXJhbXNbcGFyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3cGF0aCkge1xuICAgICAgICAgICAgYS5wYXRoID0gUi5fZ2V0UGF0aFtvLnR5cGVdKG8pO1xuICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXMuaHJlZiAmJiAobm9kZS5ocmVmID0gcGFyYW1zLmhyZWYpO1xuICAgICAgICBwYXJhbXMudGl0bGUgJiYgKG5vZGUudGl0bGUgPSBwYXJhbXMudGl0bGUpO1xuICAgICAgICBwYXJhbXMudGFyZ2V0ICYmIChub2RlLnRhcmdldCA9IHBhcmFtcy50YXJnZXQpO1xuICAgICAgICBwYXJhbXMuY3Vyc29yICYmIChzLmN1cnNvciA9IHBhcmFtcy5jdXJzb3IpO1xuICAgICAgICBcImJsdXJcIiBpbiBwYXJhbXMgJiYgby5ibHVyKHBhcmFtcy5ibHVyKTtcbiAgICAgICAgaWYgKHBhcmFtcy5wYXRoICYmIG8udHlwZSA9PSBcInBhdGhcIiB8fCBuZXdwYXRoKSB7XG4gICAgICAgICAgICBub2RlLnBhdGggPSBwYXRoMnZtbCh+U3RyKGEucGF0aCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiclwiKSA/IFIuX3BhdGhUb0Fic29sdXRlKGEucGF0aCkgOiBhLnBhdGgpO1xuICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgIGlmIChvLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICAgICAgby5fLmZpbGxwb3MgPSBbYS54LCBhLnldO1xuICAgICAgICAgICAgICAgIG8uXy5maWxsc2l6ZSA9IFthLndpZHRoLCBhLmhlaWdodF07XG4gICAgICAgICAgICAgICAgc2V0Q29vcmRzKG8sIDEsIDEsIDAsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFwidHJhbnNmb3JtXCIgaW4gcGFyYW1zICYmIG8udHJhbnNmb3JtKHBhcmFtcy50cmFuc2Zvcm0pO1xuICAgICAgICBpZiAoaXNPdmFsKSB7XG4gICAgICAgICAgICB2YXIgY3ggPSArYS5jeCxcbiAgICAgICAgICAgICAgICBjeSA9ICthLmN5LFxuICAgICAgICAgICAgICAgIHJ4ID0gK2EucnggfHwgK2EuciB8fCAwLFxuICAgICAgICAgICAgICAgIHJ5ID0gK2EucnkgfHwgK2EuciB8fCAwO1xuICAgICAgICAgICAgbm9kZS5wYXRoID0gUi5mb3JtYXQoXCJhcnswfSx7MX0sezJ9LHszfSx7NH0sezF9LHs0fSx7MX14XCIsIHJvdW5kKChjeCAtIHJ4KSAqIHpvb20pLCByb3VuZCgoY3kgLSByeSkgKiB6b29tKSwgcm91bmQoKGN4ICsgcngpICogem9vbSksIHJvdW5kKChjeSArIHJ5KSAqIHpvb20pLCByb3VuZChjeCAqIHpvb20pKTtcbiAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiY2xpcC1yZWN0XCIgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IFN0cihwYXJhbXNbXCJjbGlwLXJlY3RcIl0pLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgICAgICBpZiAocmVjdC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgIHJlY3RbMl0gPSArcmVjdFsyXSArICgrcmVjdFswXSk7XG4gICAgICAgICAgICAgICAgcmVjdFszXSA9ICtyZWN0WzNdICsgKCtyZWN0WzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gbm9kZS5jbGlwUmVjdCB8fCBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgICAgICAgICBkc3R5bGUgPSBkaXYuc3R5bGU7XG4gICAgICAgICAgICAgICAgZHN0eWxlLmNsaXAgPSBSLmZvcm1hdChcInJlY3QoezF9cHggezJ9cHggezN9cHggezB9cHgpXCIsIHJlY3QpO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZS5jbGlwUmVjdCkge1xuICAgICAgICAgICAgICAgICAgICBkc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS50b3AgPSAwO1xuICAgICAgICAgICAgICAgICAgICBkc3R5bGUubGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS53aWR0aCA9IG8ucGFwZXIud2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS5oZWlnaHQgPSBvLnBhcGVyLmhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkaXYsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xpcFJlY3QgPSBkaXY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwYXJhbXNbXCJjbGlwLXJlY3RcIl0pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsaXBSZWN0ICYmIChub2RlLmNsaXBSZWN0LnN0eWxlLmNsaXAgPSBcImF1dG9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG8udGV4dHBhdGgpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0cGF0aFN0eWxlID0gby50ZXh0cGF0aC5zdHlsZTtcbiAgICAgICAgICAgIHBhcmFtcy5mb250ICYmICh0ZXh0cGF0aFN0eWxlLmZvbnQgPSBwYXJhbXMuZm9udCk7XG4gICAgICAgICAgICBwYXJhbXNbXCJmb250LWZhbWlseVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250RmFtaWx5ID0gJ1wiJyArIHBhcmFtc1tcImZvbnQtZmFtaWx5XCJdLnNwbGl0KFwiLFwiKVswXS5yZXBsYWNlKC9eWydcIl0rfFsnXCJdKyQvZywgRSkgKyAnXCInKTtcbiAgICAgICAgICAgIHBhcmFtc1tcImZvbnQtc2l6ZVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250U2l6ZSA9IHBhcmFtc1tcImZvbnQtc2l6ZVwiXSk7XG4gICAgICAgICAgICBwYXJhbXNbXCJmb250LXdlaWdodFwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250V2VpZ2h0ID0gcGFyYW1zW1wiZm9udC13ZWlnaHRcIl0pO1xuICAgICAgICAgICAgcGFyYW1zW1wiZm9udC1zdHlsZVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250U3R5bGUgPSBwYXJhbXNbXCJmb250LXN0eWxlXCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJhcnJvdy1zdGFydFwiIGluIHBhcmFtcykge1xuICAgICAgICAgICAgYWRkQXJyb3cocmVzLCBwYXJhbXNbXCJhcnJvdy1zdGFydFwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiYXJyb3ctZW5kXCIgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBhZGRBcnJvdyhyZXMsIHBhcmFtc1tcImFycm93LWVuZFwiXSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5vcGFjaXR5ICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtcy5maWxsICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtcy5zcmMgIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zLnN0cm9rZSAhPSBudWxsIHx8XG4gICAgICAgICAgICBwYXJhbXNbXCJzdHJva2Utd2lkdGhcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW9wYWNpdHlcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wiZmlsbC1vcGFjaXR5XCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1kYXNoYXJyYXlcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLWxpbmVqb2luXCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBmaWxsID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShmaWxsU3RyaW5nKSxcbiAgICAgICAgICAgICAgICBuZXdmaWxsID0gZmFsc2U7XG4gICAgICAgICAgICBmaWxsID0gZmlsbCAmJiBmaWxsWzBdO1xuICAgICAgICAgICAgIWZpbGwgJiYgKG5ld2ZpbGwgPSBmaWxsID0gY3JlYXRlTm9kZShmaWxsU3RyaW5nKSk7XG4gICAgICAgICAgICBpZiAoby50eXBlID09IFwiaW1hZ2VcIiAmJiBwYXJhbXMuc3JjKSB7XG4gICAgICAgICAgICAgICAgZmlsbC5zcmMgPSBwYXJhbXMuc3JjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zLmZpbGwgJiYgKGZpbGwub24gPSB0cnVlKTtcbiAgICAgICAgICAgIGlmIChmaWxsLm9uID09IG51bGwgfHwgcGFyYW1zLmZpbGwgPT0gXCJub25lXCIgfHwgcGFyYW1zLmZpbGwgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmaWxsLm9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsbC5vbiAmJiBwYXJhbXMuZmlsbCkge1xuICAgICAgICAgICAgICAgIHZhciBpc1VSTCA9IFN0cihwYXJhbXMuZmlsbCkubWF0Y2goUi5fSVNVUkwpO1xuICAgICAgICAgICAgICAgIGlmIChpc1VSTCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnBhcmVudE5vZGUgPT0gbm9kZSAmJiBub2RlLnJlbW92ZUNoaWxkKGZpbGwpO1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnJvdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwuc3JjID0gaXNVUkxbMV07XG4gICAgICAgICAgICAgICAgICAgIGZpbGwudHlwZSA9IFwidGlsZVwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmJveCA9IG8uZ2V0QkJveCgxKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5wb3NpdGlvbiA9IGJib3gueCArIFMgKyBiYm94Lnk7XG4gICAgICAgICAgICAgICAgICAgIG8uXy5maWxscG9zID0gW2Jib3gueCwgYmJveC55XTtcblxuICAgICAgICAgICAgICAgICAgICBSLl9wcmVsb2FkKGlzVVJMWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZmlsbHNpemUgPSBbdGhpcy5vZmZzZXRXaWR0aCwgdGhpcy5vZmZzZXRIZWlnaHRdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaWxsLmNvbG9yID0gUi5nZXRSR0IocGFyYW1zLmZpbGwpLmhleDtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5zcmMgPSBFO1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnR5cGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChSLmdldFJHQihwYXJhbXMuZmlsbCkuZXJyb3IgJiYgKHJlcy50eXBlIGluIHtjaXJjbGU6IDEsIGVsbGlwc2U6IDF9IHx8IFN0cihwYXJhbXMuZmlsbCkuY2hhckF0KCkgIT0gXCJyXCIpICYmIGFkZEdyYWRpZW50RmlsbChyZXMsIHBhcmFtcy5maWxsLCBmaWxsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5maWxsID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhLmdyYWRpZW50ID0gcGFyYW1zLmZpbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsLnJvdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFwiZmlsbC1vcGFjaXR5XCIgaW4gcGFyYW1zIHx8IFwib3BhY2l0eVwiIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gKCgrYVtcImZpbGwtb3BhY2l0eVwiXSArIDEgfHwgMikgLSAxKSAqICgoK2Eub3BhY2l0eSArIDEgfHwgMikgLSAxKSAqICgoK1IuZ2V0UkdCKHBhcmFtcy5maWxsKS5vICsgMSB8fCAyKSAtIDEpO1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgPSBtbWluKG1tYXgob3BhY2l0eSwgMCksIDEpO1xuICAgICAgICAgICAgICAgIGZpbGwub3BhY2l0eSA9IG9wYWNpdHk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGwuc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwuY29sb3IgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZpbGwpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZSA9IChub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpICYmIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF0pLFxuICAgICAgICAgICAgbmV3c3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgICAhc3Ryb2tlICYmIChuZXdzdHJva2UgPSBzdHJva2UgPSBjcmVhdGVOb2RlKFwic3Ryb2tlXCIpKTtcbiAgICAgICAgICAgIGlmICgocGFyYW1zLnN0cm9rZSAmJiBwYXJhbXMuc3Ryb2tlICE9IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSB8fFxuICAgICAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1vcGFjaXR5XCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtZGFzaGFycmF5XCJdIHx8XG4gICAgICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWNhcFwiXSkge1xuICAgICAgICAgICAgICAgIHN0cm9rZS5vbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAocGFyYW1zLnN0cm9rZSA9PSBcIm5vbmVcIiB8fCBwYXJhbXMuc3Ryb2tlID09PSBudWxsIHx8IHN0cm9rZS5vbiA9PSBudWxsIHx8IHBhcmFtcy5zdHJva2UgPT0gMCB8fCBwYXJhbXNbXCJzdHJva2Utd2lkdGhcIl0gPT0gMCkgJiYgKHN0cm9rZS5vbiA9IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBzdHJva2VDb2xvciA9IFIuZ2V0UkdCKHBhcmFtcy5zdHJva2UpO1xuICAgICAgICAgICAgc3Ryb2tlLm9uICYmIHBhcmFtcy5zdHJva2UgJiYgKHN0cm9rZS5jb2xvciA9IHN0cm9rZUNvbG9yLmhleCk7XG4gICAgICAgICAgICBvcGFjaXR5ID0gKCgrYVtcInN0cm9rZS1vcGFjaXR5XCJdICsgMSB8fCAyKSAtIDEpICogKCgrYS5vcGFjaXR5ICsgMSB8fCAyKSAtIDEpICogKCgrc3Ryb2tlQ29sb3IubyArIDEgfHwgMikgLSAxKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICh0b0Zsb2F0KHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSkgfHwgMSkgKiAuNzU7XG4gICAgICAgICAgICBvcGFjaXR5ID0gbW1pbihtbWF4KG9wYWNpdHksIDApLCAxKTtcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSA9PSBudWxsICYmICh3aWR0aCA9IGFbXCJzdHJva2Utd2lkdGhcIl0pO1xuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLXdpZHRoXCJdICYmIChzdHJva2Uud2VpZ2h0ID0gd2lkdGgpO1xuICAgICAgICAgICAgd2lkdGggJiYgd2lkdGggPCAxICYmIChvcGFjaXR5ICo9IHdpZHRoKSAmJiAoc3Ryb2tlLndlaWdodCA9IDEpO1xuICAgICAgICAgICAgc3Ryb2tlLm9wYWNpdHkgPSBvcGFjaXR5O1xuXG4gICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gJiYgKHN0cm9rZS5qb2luc3R5bGUgPSBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gfHwgXCJtaXRlclwiKTtcbiAgICAgICAgICAgIHN0cm9rZS5taXRlcmxpbWl0ID0gcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gfHwgODtcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdICYmIChzdHJva2UuZW5kY2FwID0gcGFyYW1zW1wic3Ryb2tlLWxpbmVjYXBcIl0gPT0gXCJidXR0XCIgPyBcImZsYXRcIiA6IHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdID09IFwic3F1YXJlXCIgPyBcInNxdWFyZVwiIDogXCJyb3VuZFwiKTtcbiAgICAgICAgICAgIGlmIChcInN0cm9rZS1kYXNoYXJyYXlcIiBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGFzaGFycmF5ID0ge1xuICAgICAgICAgICAgICAgICAgICBcIi1cIjogXCJzaG9ydGRhc2hcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuXCI6IFwic2hvcnRkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgXCItLlwiOiBcInNob3J0ZGFzaGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0uLlwiOiBcInNob3J0ZGFzaGRvdGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi4gXCI6IFwiZG90XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLSBcIjogXCJkYXNoXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLS1cIjogXCJsb25nZGFzaFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0gLlwiOiBcImRhc2hkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgXCItLS5cIjogXCJsb25nZGFzaGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0tLi5cIjogXCJsb25nZGFzaGRvdGRvdFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzdHJva2UuZGFzaHN0eWxlID0gZGFzaGFycmF5W2hhc10ocGFyYW1zW1wic3Ryb2tlLWRhc2hhcnJheVwiXSkgPyBkYXNoYXJyYXlbcGFyYW1zW1wic3Ryb2tlLWRhc2hhcnJheVwiXV0gOiBFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3c3Ryb2tlICYmIG5vZGUuYXBwZW5kQ2hpbGQoc3Ryb2tlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgIHJlcy5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheSA9IEU7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHJlcy5wYXBlci5zcGFuLFxuICAgICAgICAgICAgICAgIG0gPSAxMDAsXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBhLmZvbnQgJiYgYS5mb250Lm1hdGNoKC9cXGQrKD86XFwuXFxkKik/KD89cHgpLyk7XG4gICAgICAgICAgICBzID0gc3Bhbi5zdHlsZTtcbiAgICAgICAgICAgIGEuZm9udCAmJiAocy5mb250ID0gYS5mb250KTtcbiAgICAgICAgICAgIGFbXCJmb250LWZhbWlseVwiXSAmJiAocy5mb250RmFtaWx5ID0gYVtcImZvbnQtZmFtaWx5XCJdKTtcbiAgICAgICAgICAgIGFbXCJmb250LXdlaWdodFwiXSAmJiAocy5mb250V2VpZ2h0ID0gYVtcImZvbnQtd2VpZ2h0XCJdKTtcbiAgICAgICAgICAgIGFbXCJmb250LXN0eWxlXCJdICYmIChzLmZvbnRTdHlsZSA9IGFbXCJmb250LXN0eWxlXCJdKTtcbiAgICAgICAgICAgIGZvbnRTaXplID0gdG9GbG9hdChhW1wiZm9udC1zaXplXCJdIHx8IGZvbnRTaXplICYmIGZvbnRTaXplWzBdKSB8fCAxMDtcbiAgICAgICAgICAgIHMuZm9udFNpemUgPSBmb250U2l6ZSAqIG0gKyBcInB4XCI7XG4gICAgICAgICAgICByZXMudGV4dHBhdGguc3RyaW5nICYmIChzcGFuLmlubmVySFRNTCA9IFN0cihyZXMudGV4dHBhdGguc3RyaW5nKS5yZXBsYWNlKC88L2csIFwiJiM2MDtcIikucmVwbGFjZSgvJi9nLCBcIiYjMzg7XCIpLnJlcGxhY2UoL1xcbi9nLCBcIjxicj5cIikpO1xuICAgICAgICAgICAgdmFyIGJyZWN0ID0gc3Bhbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHJlcy5XID0gYS53ID0gKGJyZWN0LnJpZ2h0IC0gYnJlY3QubGVmdCkgLyBtO1xuICAgICAgICAgICAgcmVzLkggPSBhLmggPSAoYnJlY3QuYm90dG9tIC0gYnJlY3QudG9wKSAvIG07XG4gICAgICAgICAgICAvLyByZXMucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHJlcy5YID0gYS54O1xuICAgICAgICAgICAgcmVzLlkgPSBhLnkgKyByZXMuSCAvIDI7XG5cbiAgICAgICAgICAgIChcInhcIiBpbiBwYXJhbXMgfHwgXCJ5XCIgaW4gcGFyYW1zKSAmJiAocmVzLnBhdGgudiA9IFIuZm9ybWF0KFwibXswfSx7MX1sezJ9LHsxfVwiLCByb3VuZChhLnggKiB6b29tKSwgcm91bmQoYS55ICogem9vbSksIHJvdW5kKGEueCAqIHpvb20pICsgMSkpO1xuICAgICAgICAgICAgdmFyIGRpcnR5YXR0cnMgPSBbXCJ4XCIsIFwieVwiLCBcInRleHRcIiwgXCJmb250XCIsIFwiZm9udC1mYW1pbHlcIiwgXCJmb250LXdlaWdodFwiLCBcImZvbnQtc3R5bGVcIiwgXCJmb250LXNpemVcIl07XG4gICAgICAgICAgICBmb3IgKHZhciBkID0gMCwgZGQgPSBkaXJ0eWF0dHJzLmxlbmd0aDsgZCA8IGRkOyBkKyspIGlmIChkaXJ0eWF0dHJzW2RdIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJlcy5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGV4dC1hbmNob3IgZW11bGF0aW9uXG4gICAgICAgICAgICBzd2l0Y2ggKGFbXCJ0ZXh0LWFuY2hvclwiXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICByZXMudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQtYWxpZ25cIl0gPSBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IHJlcy5XIC8gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgIHJlcy50ZXh0cGF0aC5zdHlsZVtcInYtdGV4dC1hbGlnblwiXSA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IC1yZXMuVyAvIDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzLnRleHRwYXRoLnN0eWxlW1widi10ZXh0LWFsaWduXCJdID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQta2VyblwiXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzLnBhcGVyLmNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gRTtcbiAgICB9LFxuICAgIGFkZEdyYWRpZW50RmlsbCA9IGZ1bmN0aW9uIChvLCBncmFkaWVudCwgZmlsbCkge1xuICAgICAgICBvLmF0dHJzID0gby5hdHRycyB8fCB7fTtcbiAgICAgICAgdmFyIGF0dHJzID0gby5hdHRycyxcbiAgICAgICAgICAgIHBvdyA9IE1hdGgucG93LFxuICAgICAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgICAgIG9pbmRleCxcbiAgICAgICAgICAgIHR5cGUgPSBcImxpbmVhclwiLFxuICAgICAgICAgICAgZnhmeSA9IFwiLjUgLjVcIjtcbiAgICAgICAgby5hdHRycy5ncmFkaWVudCA9IGdyYWRpZW50O1xuICAgICAgICBncmFkaWVudCA9IFN0cihncmFkaWVudCkucmVwbGFjZShSLl9yYWRpYWxfZ3JhZGllbnQsIGZ1bmN0aW9uIChhbGwsIGZ4LCBmeSkge1xuICAgICAgICAgICAgdHlwZSA9IFwicmFkaWFsXCI7XG4gICAgICAgICAgICBpZiAoZnggJiYgZnkpIHtcbiAgICAgICAgICAgICAgICBmeCA9IHRvRmxvYXQoZngpO1xuICAgICAgICAgICAgICAgIGZ5ID0gdG9GbG9hdChmeSk7XG4gICAgICAgICAgICAgICAgcG93KGZ4IC0gLjUsIDIpICsgcG93KGZ5IC0gLjUsIDIpID4gLjI1ICYmIChmeSA9IG1hdGguc3FydCguMjUgLSBwb3coZnggLSAuNSwgMikpICogKChmeSA+IC41KSAqIDIgLSAxKSArIC41KTtcbiAgICAgICAgICAgICAgICBmeGZ5ID0gZnggKyBTICsgZnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRTtcbiAgICAgICAgfSk7XG4gICAgICAgIGdyYWRpZW50ID0gZ3JhZGllbnQuc3BsaXQoL1xccypcXC1cXHMqLyk7XG4gICAgICAgIGlmICh0eXBlID09IFwibGluZWFyXCIpIHtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IGdyYWRpZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICBhbmdsZSA9IC10b0Zsb2F0KGFuZ2xlKTtcbiAgICAgICAgICAgIGlmIChpc05hTihhbmdsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZG90cyA9IFIuX3BhcnNlRG90cyhncmFkaWVudCk7XG4gICAgICAgIGlmICghZG90cykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbyA9IG8uc2hhcGUgfHwgby5ub2RlO1xuICAgICAgICBpZiAoZG90cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG8ucmVtb3ZlQ2hpbGQoZmlsbCk7XG4gICAgICAgICAgICBmaWxsLm9uID0gdHJ1ZTtcbiAgICAgICAgICAgIGZpbGwubWV0aG9kID0gXCJub25lXCI7XG4gICAgICAgICAgICBmaWxsLmNvbG9yID0gZG90c1swXS5jb2xvcjtcbiAgICAgICAgICAgIGZpbGwuY29sb3IyID0gZG90c1tkb3RzLmxlbmd0aCAtIDFdLmNvbG9yO1xuICAgICAgICAgICAgdmFyIGNscnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGRvdHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGRvdHNbaV0ub2Zmc2V0ICYmIGNscnMucHVzaChkb3RzW2ldLm9mZnNldCArIFMgKyBkb3RzW2ldLmNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGwuY29sb3JzID0gY2xycy5sZW5ndGggPyBjbHJzLmpvaW4oKSA6IFwiMCUgXCIgKyBmaWxsLmNvbG9yO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJyYWRpYWxcIikge1xuICAgICAgICAgICAgICAgIGZpbGwudHlwZSA9IFwiZ3JhZGllbnRUaXRsZVwiO1xuICAgICAgICAgICAgICAgIGZpbGwuZm9jdXMgPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICBmaWxsLmZvY3Vzc2l6ZSA9IFwiMCAwXCI7XG4gICAgICAgICAgICAgICAgZmlsbC5mb2N1c3Bvc2l0aW9uID0gZnhmeTtcbiAgICAgICAgICAgICAgICBmaWxsLmFuZ2xlID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZmlsbC5yb3RhdGU9IHRydWU7XG4gICAgICAgICAgICAgICAgZmlsbC50eXBlID0gXCJncmFkaWVudFwiO1xuICAgICAgICAgICAgICAgIGZpbGwuYW5nbGUgPSAoMjcwIC0gYW5nbGUpICUgMzYwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgby5hcHBlbmRDaGlsZChmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICB9LFxuICAgIEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSwgdm1sKSB7XG4gICAgICAgIHRoaXNbMF0gPSB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICBub2RlLnJhcGhhZWwgPSB0cnVlO1xuICAgICAgICB0aGlzLmlkID0gUi5fb2lkKys7XG4gICAgICAgIG5vZGUucmFwaGFlbGlkID0gdGhpcy5pZDtcbiAgICAgICAgdGhpcy5YID0gMDtcbiAgICAgICAgdGhpcy5ZID0gMDtcbiAgICAgICAgdGhpcy5hdHRycyA9IHt9O1xuICAgICAgICB0aGlzLnBhcGVyID0gdm1sO1xuICAgICAgICB0aGlzLm1hdHJpeCA9IFIubWF0cml4KCk7XG4gICAgICAgIHRoaXMuXyA9IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogW10sXG4gICAgICAgICAgICBzeDogMSxcbiAgICAgICAgICAgIHN5OiAxLFxuICAgICAgICAgICAgZHg6IDAsXG4gICAgICAgICAgICBkeTogMCxcbiAgICAgICAgICAgIGRlZzogMCxcbiAgICAgICAgICAgIGRpcnR5OiAxLFxuICAgICAgICAgICAgZGlydHlUOiAxXG4gICAgICAgIH07XG4gICAgICAgICF2bWwuYm90dG9tICYmICh2bWwuYm90dG9tID0gdGhpcyk7XG4gICAgICAgIHRoaXMucHJldiA9IHZtbC50b3A7XG4gICAgICAgIHZtbC50b3AgJiYgKHZtbC50b3AubmV4dCA9IHRoaXMpO1xuICAgICAgICB2bWwudG9wID0gdGhpcztcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICB9O1xuICAgIHZhciBlbHByb3RvID0gUi5lbDtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlID0gZWxwcm90bztcbiAgICBlbHByb3RvLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcbiAgICBlbHByb3RvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0c3RyKSB7XG4gICAgICAgIGlmICh0c3RyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8udHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YnMgPSB0aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQsXG4gICAgICAgICAgICB2YnQgPSB2YnMgPyBcInNcIiArIFt2YnMuc2NhbGUsIHZicy5zY2FsZV0gKyBcIi0xLTF0XCIgKyBbdmJzLmR4LCB2YnMuZHldIDogRSxcbiAgICAgICAgICAgIG9sZHQ7XG4gICAgICAgIGlmICh2YnMpIHtcbiAgICAgICAgICAgIG9sZHQgPSB0c3RyID0gU3RyKHRzdHIpLnJlcGxhY2UoL1xcLnszfXxcXHUyMDI2L2csIHRoaXMuXy50cmFuc2Zvcm0gfHwgRSk7XG4gICAgICAgIH1cbiAgICAgICAgUi5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLCB2YnQgKyB0c3RyKTtcbiAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMubWF0cml4LmNsb25lKCksXG4gICAgICAgICAgICBza2V3ID0gdGhpcy5za2V3LFxuICAgICAgICAgICAgbyA9IHRoaXMubm9kZSxcbiAgICAgICAgICAgIHNwbGl0LFxuICAgICAgICAgICAgaXNHcmFkID0gflN0cih0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCItXCIpLFxuICAgICAgICAgICAgaXNQYXR0ID0gIVN0cih0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCJ1cmwoXCIpO1xuICAgICAgICBtYXRyaXgudHJhbnNsYXRlKDEsIDEpO1xuICAgICAgICBpZiAoaXNQYXR0IHx8IGlzR3JhZCB8fCB0aGlzLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICBza2V3Lm1hdHJpeCA9IFwiMSAwIDAgMVwiO1xuICAgICAgICAgICAgc2tldy5vZmZzZXQgPSBcIjAgMFwiO1xuICAgICAgICAgICAgc3BsaXQgPSBtYXRyaXguc3BsaXQoKTtcbiAgICAgICAgICAgIGlmICgoaXNHcmFkICYmIHNwbGl0Lm5vUm90YXRpb24pIHx8ICFzcGxpdC5pc1NpbXBsZSkge1xuICAgICAgICAgICAgICAgIG8uc3R5bGUuZmlsdGVyID0gbWF0cml4LnRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGJiID0gdGhpcy5nZXRCQm94KCksXG4gICAgICAgICAgICAgICAgICAgIGJidCA9IHRoaXMuZ2V0QkJveCgxKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSBiYi54IC0gYmJ0LngsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gYmIueSAtIGJidC55O1xuICAgICAgICAgICAgICAgIG8uY29vcmRvcmlnaW4gPSAoZHggKiAtem9vbSkgKyBTICsgKGR5ICogLXpvb20pO1xuICAgICAgICAgICAgICAgIHNldENvb3Jkcyh0aGlzLCAxLCAxLCBkeCwgZHksIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvLnN0eWxlLmZpbHRlciA9IEU7XG4gICAgICAgICAgICAgICAgc2V0Q29vcmRzKHRoaXMsIHNwbGl0LnNjYWxleCwgc3BsaXQuc2NhbGV5LCBzcGxpdC5keCwgc3BsaXQuZHksIHNwbGl0LnJvdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLnN0eWxlLmZpbHRlciA9IEU7XG4gICAgICAgICAgICBza2V3Lm1hdHJpeCA9IFN0cihtYXRyaXgpO1xuICAgICAgICAgICAgc2tldy5vZmZzZXQgPSBtYXRyaXgub2Zmc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZHQgIT09IG51bGwpIHsgLy8gZW1wdHkgc3RyaW5nIHZhbHVlIGlzIHRydWUgYXMgd2VsbFxuICAgICAgICAgICAgdGhpcy5fLnRyYW5zZm9ybSA9IG9sZHQ7XG4gICAgICAgICAgICBSLl9leHRyYWN0VHJhbnNmb3JtKHRoaXMsIG9sZHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZWxwcm90by5yb3RhdGUgPSBmdW5jdGlvbiAoZGVnLCBjeCwgY3kpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVnID0gU3RyKGRlZykuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKGRlZy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjeCA9IHRvRmxvYXQoZGVnWzFdKTtcbiAgICAgICAgICAgIGN5ID0gdG9GbG9hdChkZWdbMl0pO1xuICAgICAgICB9XG4gICAgICAgIGRlZyA9IHRvRmxvYXQoZGVnWzBdKTtcbiAgICAgICAgKGN5ID09IG51bGwpICYmIChjeCA9IGN5KTtcbiAgICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmdldEJCb3goMSk7XG4gICAgICAgICAgICBjeCA9IGJib3gueCArIGJib3gud2lkdGggLyAyO1xuICAgICAgICAgICAgY3kgPSBiYm94LnkgKyBiYm94LmhlaWdodCAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fLmRpcnR5VCA9IDE7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJyXCIsIGRlZywgY3gsIGN5XV0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkeCwgZHkpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZHggPSBTdHIoZHgpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBkeSA9IHRvRmxvYXQoZHhbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGR4ID0gdG9GbG9hdChkeFswXSkgfHwgMDtcbiAgICAgICAgZHkgPSArZHkgfHwgMDtcbiAgICAgICAgaWYgKHRoaXMuXy5iYm94KSB7XG4gICAgICAgICAgICB0aGlzLl8uYmJveC54ICs9IGR4O1xuICAgICAgICAgICAgdGhpcy5fLmJib3gueSArPSBkeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1widFwiLCBkeCwgZHldXSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGVscHJvdG8uc2NhbGUgPSBmdW5jdGlvbiAoc3gsIHN5LCBjeCwgY3kpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgc3ggPSBTdHIoc3gpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChzeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBzeSA9IHRvRmxvYXQoc3hbMV0pO1xuICAgICAgICAgICAgY3ggPSB0b0Zsb2F0KHN4WzJdKTtcbiAgICAgICAgICAgIGN5ID0gdG9GbG9hdChzeFszXSk7XG4gICAgICAgICAgICBpc05hTihjeCkgJiYgKGN4ID0gbnVsbCk7XG4gICAgICAgICAgICBpc05hTihjeSkgJiYgKGN5ID0gbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ggPSB0b0Zsb2F0KHN4WzBdKTtcbiAgICAgICAgKHN5ID09IG51bGwpICYmIChzeSA9IHN4KTtcbiAgICAgICAgKGN5ID09IG51bGwpICYmIChjeCA9IGN5KTtcbiAgICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmdldEJCb3goMSk7XG4gICAgICAgIH1cbiAgICAgICAgY3ggPSBjeCA9PSBudWxsID8gYmJveC54ICsgYmJveC53aWR0aCAvIDIgOiBjeDtcbiAgICAgICAgY3kgPSBjeSA9PSBudWxsID8gYmJveC55ICsgYmJveC5oZWlnaHQgLyAyIDogY3k7XG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInNcIiwgc3gsIHN5LCBjeCwgY3ldXSkpO1xuICAgICAgICB0aGlzLl8uZGlydHlUID0gMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLnJlbW92ZWQgJiYgKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGVscHJvdG8uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIXRoaXMucmVtb3ZlZCAmJiAodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBFKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyBOZWVkZWQgdG8gZml4IHRoZSB2bWwgc2V0Vmlld0JveCBpc3N1ZXNcbiAgICBlbHByb3RvLmF1eEdldEJCb3ggPSBSLmVsLmdldEJCb3g7XG4gICAgZWxwcm90by5nZXRCQm94ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBiID0gdGhpcy5hdXhHZXRCQm94KCk7XG4gICAgICBpZiAodGhpcy5wYXBlciAmJiB0aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQpXG4gICAgICB7XG4gICAgICAgIHZhciBjID0ge307XG4gICAgICAgIHZhciB6ID0gMS90aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQuc2NhbGU7XG4gICAgICAgIGMueCA9IGIueCAtIHRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdC5keDtcbiAgICAgICAgYy54ICo9IHo7XG4gICAgICAgIGMueSA9IGIueSAtIHRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdC5keTtcbiAgICAgICAgYy55ICo9IHo7XG4gICAgICAgIGMud2lkdGggID0gYi53aWR0aCAgKiB6O1xuICAgICAgICBjLmhlaWdodCA9IGIuaGVpZ2h0ICogejtcbiAgICAgICAgYy54MiA9IGMueCArIGMud2lkdGg7XG4gICAgICAgIGMueTIgPSBjLnkgKyBjLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgICB9XG4gICAgICByZXR1cm4gYjtcbiAgICB9O1xuICAgIGVscHJvdG8uX2dldEJCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5YICsgKHRoaXMuYmJ4IHx8IDApIC0gdGhpcy5XIC8gMixcbiAgICAgICAgICAgIHk6IHRoaXMuWSAtIHRoaXMuSCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLlcsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuSFxuICAgICAgICB9O1xuICAgIH07XG4gICAgZWxwcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQgfHwgIXRoaXMubm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXBlci5fX3NldF9fICYmIHRoaXMucGFwZXIuX19zZXRfXy5leGNsdWRlKHRoaXMpO1xuICAgICAgICBSLmV2ZS51bmJpbmQoXCJyYXBoYWVsLiouKi5cIiArIHRoaXMuaWQpO1xuICAgICAgICBSLl90ZWFyKHRoaXMsIHRoaXMucGFwZXIpO1xuICAgICAgICB0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpO1xuICAgICAgICB0aGlzLnNoYXBlICYmIHRoaXMuc2hhcGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNoYXBlKTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdHlwZW9mIHRoaXNbaV0gPT0gXCJmdW5jdGlvblwiID8gUi5fcmVtb3ZlZEZhY3RvcnkoaSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlZCA9IHRydWU7XG4gICAgfTtcbiAgICBlbHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmF0dHJzKSBpZiAodGhpcy5hdHRyc1toYXNdKGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzW2FdID0gdGhpcy5hdHRyc1thXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5ncmFkaWVudCAmJiByZXMuZmlsbCA9PSBcIm5vbmVcIiAmJiAocmVzLmZpbGwgPSByZXMuZ3JhZGllbnQpICYmIGRlbGV0ZSByZXMuZ3JhZGllbnQ7XG4gICAgICAgICAgICByZXMudHJhbnNmb3JtID0gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gZmlsbFN0cmluZyAmJiB0aGlzLmF0dHJzLmZpbGwgPT0gXCJub25lXCIgJiYgdGhpcy5hdHRycy5ncmFkaWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJzLmdyYWRpZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5hbWVzID0gbmFtZS5zcGxpdChzZXBhcmF0b3IpLFxuICAgICAgICAgICAgICAgIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSBpbiB0aGlzLmF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtuYW1lXSA9IHRoaXMuYXR0cnNbbmFtZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChSLmlzKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tuYW1lXSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0uZGVmO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtuYW1lXSA9IFIuX2F2YWlsYWJsZUF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpaSAtIDEgPyBvdXQgOiBvdXRbbmFtZXNbMF1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF0dHJzICYmIHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gbmFtZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0W25hbWVbaV1dID0gdGhpcy5hdHRyKG5hbWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1zO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcGFyYW1zID0ge307XG4gICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9PSBudWxsICYmIFIuaXMobmFtZSwgXCJvYmplY3RcIikgJiYgKHBhcmFtcyA9IG5hbWUpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmF0dHIuXCIgKyBrZXkgKyBcIi5cIiArIHRoaXMuaWQsIHRoaXMsIHBhcmFtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpIGlmICh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShrZXkpICYmIHBhcmFtc1toYXNdKGtleSkgJiYgUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXIgPSB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XS5hcHBseSh0aGlzLCBbXS5jb25jYXQocGFyYW1zW2tleV0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJzW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzdWJrZXkgaW4gcGFyKSBpZiAocGFyW2hhc10oc3Via2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbc3Via2V5XSA9IHBhcltzdWJrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGlmIChwYXJhbXMudGV4dCAmJiB0aGlzLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRwYXRoLnN0cmluZyA9IHBhcmFtcy50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0RmlsbEFuZFN0cm9rZSh0aGlzLCBwYXJhbXMpO1xuICAgICAgICAgICAgLy8gdGhpcy5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheSA9IEU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLnRvRnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLnJlbW92ZWQgJiYgdGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgdGhpcy5wYXBlciAmJiB0aGlzLnBhcGVyLnRvcCAhPSB0aGlzICYmIFIuX3RvZnJvbnQodGhpcywgdGhpcy5wYXBlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZWxwcm90by50b0JhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkICE9IHRoaXMubm9kZSkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSwgdGhpcy5ub2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBSLl90b2JhY2sodGhpcywgdGhpcy5wYXBlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmluc2VydEFmdGVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQuY29uc3RydWN0b3IgPT0gUi5zdC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbZWxlbWVudC5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5ub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICBlbGVtZW50Lm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLCBlbGVtZW50Lm5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBSLl9pbnNlcnRhZnRlcih0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmNvbnN0cnVjdG9yID09IFIuc3QuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsIGVsZW1lbnQubm9kZSk7XG4gICAgICAgIFIuX2luc2VydGJlZm9yZSh0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmJsdXIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMubm9kZS5ydW50aW1lU3R5bGUsXG4gICAgICAgICAgICBmID0gcy5maWx0ZXI7XG4gICAgICAgIGYgPSBmLnJlcGxhY2UoYmx1cnJlZ2V4cCwgRSk7XG4gICAgICAgIGlmICgrc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5hdHRycy5ibHVyID0gc2l6ZTtcbiAgICAgICAgICAgIHMuZmlsdGVyID0gZiArIFMgKyBtcyArIFwiLkJsdXIocGl4ZWxyYWRpdXM9XCIgKyAoK3NpemUgfHwgMS41KSArIFwiKVwiO1xuICAgICAgICAgICAgcy5tYXJnaW4gPSBSLmZvcm1hdChcIi17MH1weCAwIDAgLXswfXB4XCIsIHJvdW5kKCtzaXplIHx8IDEuNSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcy5maWx0ZXIgPSBmO1xuICAgICAgICAgICAgcy5tYXJnaW4gPSAwO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXR0cnMuYmx1cjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgUi5fZW5naW5lLnBhdGggPSBmdW5jdGlvbiAocGF0aFN0cmluZywgdm1sKSB7XG4gICAgICAgIHZhciBlbCA9IGNyZWF0ZU5vZGUoXCJzaGFwZVwiKTtcbiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGNzc0RvdDtcbiAgICAgICAgZWwuY29vcmRzaXplID0gem9vbSArIFMgKyB6b29tO1xuICAgICAgICBlbC5jb29yZG9yaWdpbiA9IHZtbC5jb29yZG9yaWdpbjtcbiAgICAgICAgdmFyIHAgPSBuZXcgRWxlbWVudChlbCwgdm1sKSxcbiAgICAgICAgICAgIGF0dHIgPSB7ZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCIjMDAwXCJ9O1xuICAgICAgICBwYXRoU3RyaW5nICYmIChhdHRyLnBhdGggPSBwYXRoU3RyaW5nKTtcbiAgICAgICAgcC50eXBlID0gXCJwYXRoXCI7XG4gICAgICAgIHAucGF0aCA9IFtdO1xuICAgICAgICBwLlBhdGggPSBFO1xuICAgICAgICBzZXRGaWxsQW5kU3Ryb2tlKHAsIGF0dHIpO1xuICAgICAgICB2bWwuY2FudmFzICYmIHZtbC5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgc2tldyA9IGNyZWF0ZU5vZGUoXCJza2V3XCIpO1xuICAgICAgICBza2V3Lm9uID0gdHJ1ZTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoc2tldyk7XG4gICAgICAgIHAuc2tldyA9IHNrZXc7XG4gICAgICAgIHAudHJhbnNmb3JtKEUpO1xuICAgICAgICByZXR1cm4gcDtcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5yZWN0ID0gZnVuY3Rpb24gKHZtbCwgeCwgeSwgdywgaCwgcikge1xuICAgICAgICB2YXIgcGF0aCA9IFIuX3JlY3RQYXRoKHgsIHksIHcsIGgsIHIpLFxuICAgICAgICAgICAgcmVzID0gdm1sLnBhdGgocGF0aCksXG4gICAgICAgICAgICBhID0gcmVzLmF0dHJzO1xuICAgICAgICByZXMuWCA9IGEueCA9IHg7XG4gICAgICAgIHJlcy5ZID0gYS55ID0geTtcbiAgICAgICAgcmVzLlcgPSBhLndpZHRoID0gdztcbiAgICAgICAgcmVzLkggPSBhLmhlaWdodCA9IGg7XG4gICAgICAgIGEuciA9IHI7XG4gICAgICAgIGEucGF0aCA9IHBhdGg7XG4gICAgICAgIHJlcy50eXBlID0gXCJyZWN0XCI7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuZWxsaXBzZSA9IGZ1bmN0aW9uICh2bWwsIHgsIHksIHJ4LCByeSkge1xuICAgICAgICB2YXIgcmVzID0gdm1sLnBhdGgoKSxcbiAgICAgICAgICAgIGEgPSByZXMuYXR0cnM7XG4gICAgICAgIHJlcy5YID0geCAtIHJ4O1xuICAgICAgICByZXMuWSA9IHkgLSByeTtcbiAgICAgICAgcmVzLlcgPSByeCAqIDI7XG4gICAgICAgIHJlcy5IID0gcnkgKiAyO1xuICAgICAgICByZXMudHlwZSA9IFwiZWxsaXBzZVwiO1xuICAgICAgICBzZXRGaWxsQW5kU3Ryb2tlKHJlcywge1xuICAgICAgICAgICAgY3g6IHgsXG4gICAgICAgICAgICBjeTogeSxcbiAgICAgICAgICAgIHJ4OiByeCxcbiAgICAgICAgICAgIHJ5OiByeVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5jaXJjbGUgPSBmdW5jdGlvbiAodm1sLCB4LCB5LCByKSB7XG4gICAgICAgIHZhciByZXMgPSB2bWwucGF0aCgpLFxuICAgICAgICAgICAgYSA9IHJlcy5hdHRycztcbiAgICAgICAgcmVzLlggPSB4IC0gcjtcbiAgICAgICAgcmVzLlkgPSB5IC0gcjtcbiAgICAgICAgcmVzLlcgPSByZXMuSCA9IHIgKiAyO1xuICAgICAgICByZXMudHlwZSA9IFwiY2lyY2xlXCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocmVzLCB7XG4gICAgICAgICAgICBjeDogeCxcbiAgICAgICAgICAgIGN5OiB5LFxuICAgICAgICAgICAgcjogclxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5pbWFnZSA9IGZ1bmN0aW9uICh2bWwsIHNyYywgeCwgeSwgdywgaCkge1xuICAgICAgICB2YXIgcGF0aCA9IFIuX3JlY3RQYXRoKHgsIHksIHcsIGgpLFxuICAgICAgICAgICAgcmVzID0gdm1sLnBhdGgocGF0aCkuYXR0cih7c3Ryb2tlOiBcIm5vbmVcIn0pLFxuICAgICAgICAgICAgYSA9IHJlcy5hdHRycyxcbiAgICAgICAgICAgIG5vZGUgPSByZXMubm9kZSxcbiAgICAgICAgICAgIGZpbGwgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKGZpbGxTdHJpbmcpWzBdO1xuICAgICAgICBhLnNyYyA9IHNyYztcbiAgICAgICAgcmVzLlggPSBhLnggPSB4O1xuICAgICAgICByZXMuWSA9IGEueSA9IHk7XG4gICAgICAgIHJlcy5XID0gYS53aWR0aCA9IHc7XG4gICAgICAgIHJlcy5IID0gYS5oZWlnaHQgPSBoO1xuICAgICAgICBhLnBhdGggPSBwYXRoO1xuICAgICAgICByZXMudHlwZSA9IFwiaW1hZ2VcIjtcbiAgICAgICAgZmlsbC5wYXJlbnROb2RlID09IG5vZGUgJiYgbm9kZS5yZW1vdmVDaGlsZChmaWxsKTtcbiAgICAgICAgZmlsbC5yb3RhdGUgPSB0cnVlO1xuICAgICAgICBmaWxsLnNyYyA9IHNyYztcbiAgICAgICAgZmlsbC50eXBlID0gXCJ0aWxlXCI7XG4gICAgICAgIHJlcy5fLmZpbGxwb3MgPSBbeCwgeV07XG4gICAgICAgIHJlcy5fLmZpbGxzaXplID0gW3csIGhdO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZpbGwpO1xuICAgICAgICBzZXRDb29yZHMocmVzLCAxLCAxLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS50ZXh0ID0gZnVuY3Rpb24gKHZtbCwgeCwgeSwgdGV4dCkge1xuICAgICAgICB2YXIgZWwgPSBjcmVhdGVOb2RlKFwic2hhcGVcIiksXG4gICAgICAgICAgICBwYXRoID0gY3JlYXRlTm9kZShcInBhdGhcIiksXG4gICAgICAgICAgICBvID0gY3JlYXRlTm9kZShcInRleHRwYXRoXCIpO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB0ZXh0ID0gdGV4dCB8fCBcIlwiO1xuICAgICAgICBwYXRoLnYgPSBSLmZvcm1hdChcIm17MH0sezF9bHsyfSx7MX1cIiwgcm91bmQoeCAqIHpvb20pLCByb3VuZCh5ICogem9vbSksIHJvdW5kKHggKiB6b29tKSArIDEpO1xuICAgICAgICBwYXRoLnRleHRwYXRob2sgPSB0cnVlO1xuICAgICAgICBvLnN0cmluZyA9IFN0cih0ZXh0KTtcbiAgICAgICAgby5vbiA9IHRydWU7XG4gICAgICAgIGVsLnN0eWxlLmNzc1RleHQgPSBjc3NEb3Q7XG4gICAgICAgIGVsLmNvb3Jkc2l6ZSA9IHpvb20gKyBTICsgem9vbTtcbiAgICAgICAgZWwuY29vcmRvcmlnaW4gPSBcIjAgMFwiO1xuICAgICAgICB2YXIgcCA9IG5ldyBFbGVtZW50KGVsLCB2bWwpLFxuICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIiMwMDBcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgIGZvbnQ6IFIuX2F2YWlsYWJsZUF0dHJzLmZvbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcC5zaGFwZSA9IGVsO1xuICAgICAgICBwLnBhdGggPSBwYXRoO1xuICAgICAgICBwLnRleHRwYXRoID0gbztcbiAgICAgICAgcC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHAuYXR0cnMudGV4dCA9IFN0cih0ZXh0KTtcbiAgICAgICAgcC5hdHRycy54ID0geDtcbiAgICAgICAgcC5hdHRycy55ID0geTtcbiAgICAgICAgcC5hdHRycy53ID0gMTtcbiAgICAgICAgcC5hdHRycy5oID0gMTtcbiAgICAgICAgc2V0RmlsbEFuZFN0cm9rZShwLCBhdHRyKTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQobyk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHBhdGgpO1xuICAgICAgICB2bWwuY2FudmFzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHNrZXcgPSBjcmVhdGVOb2RlKFwic2tld1wiKTtcbiAgICAgICAgc2tldy5vbiA9IHRydWU7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHNrZXcpO1xuICAgICAgICBwLnNrZXcgPSBza2V3O1xuICAgICAgICBwLnRyYW5zZm9ybShFKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuc2V0U2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHZhciBjcyA9IHRoaXMuY2FudmFzLnN0eWxlO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB3aWR0aCA9PSArd2lkdGggJiYgKHdpZHRoICs9IFwicHhcIik7XG4gICAgICAgIGhlaWdodCA9PSAraGVpZ2h0ICYmIChoZWlnaHQgKz0gXCJweFwiKTtcbiAgICAgICAgY3Mud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY3MuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBjcy5jbGlwID0gXCJyZWN0KDAgXCIgKyB3aWR0aCArIFwiIFwiICsgaGVpZ2h0ICsgXCIgMClcIjtcbiAgICAgICAgaWYgKHRoaXMuX3ZpZXdCb3gpIHtcbiAgICAgICAgICAgIFIuX2VuZ2luZS5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsIHRoaXMuX3ZpZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnNldFZpZXdCb3ggPSBmdW5jdGlvbiAoeCwgeSwgdywgaCwgZml0KSB7XG4gICAgICAgIFIuZXZlKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsIHRoaXMsIHRoaXMuX3ZpZXdCb3gsIFt4LCB5LCB3LCBoLCBmaXRdKTtcbiAgICAgICAgdmFyIHBhcGVyU2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgd2lkdGggPSBwYXBlclNpemUud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBwYXBlclNpemUuaGVpZ2h0LFxuICAgICAgICAgICAgSCwgVztcbiAgICAgICAgaWYgKGZpdCkge1xuICAgICAgICAgICAgSCA9IGhlaWdodCAvIGg7XG4gICAgICAgICAgICBXID0gd2lkdGggLyB3O1xuICAgICAgICAgICAgaWYgKHcgKiBIIDwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICB4IC09ICh3aWR0aCAtIHcgKiBIKSAvIDIgLyBIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGggKiBXIDwgaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgeSAtPSAoaGVpZ2h0IC0gaCAqIFcpIC8gMiAvIFc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmlld0JveCA9IFt4LCB5LCB3LCBoLCAhIWZpdF07XG4gICAgICAgIHRoaXMuX3ZpZXdCb3hTaGlmdCA9IHtcbiAgICAgICAgICAgIGR4OiAteCxcbiAgICAgICAgICAgIGR5OiAteSxcbiAgICAgICAgICAgIHNjYWxlOiBwYXBlclNpemVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgZWwudHJhbnNmb3JtKFwiLi4uXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICB2YXIgY3JlYXRlTm9kZTtcbiAgICBSLl9lbmdpbmUuaW5pdFdpbiA9IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgICAgICAgICBpZiAoZG9jLnN0eWxlU2hlZXRzLmxlbmd0aCA8IDMxKSB7XG4gICAgICAgICAgICAgICAgZG9jLmNyZWF0ZVN0eWxlU2hlZXQoKS5hZGRSdWxlKFwiLnJ2bWxcIiwgXCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gbW9yZSByb29tLCBhZGQgdG8gdGhlIGV4aXN0aW5nIG9uZVxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTE5NCUyOFZTLjg1JTI5LmFzcHhcbiAgICAgICAgICAgICAgICBkb2Muc3R5bGVTaGVldHNbMF0uYWRkUnVsZShcIi5ydm1sXCIsIFwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICFkb2MubmFtZXNwYWNlcy5ydm1sICYmIGRvYy5uYW1lc3BhY2VzLmFkZChcInJ2bWxcIiwgXCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb2RlID0gZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KCc8cnZtbDonICsgdGFnTmFtZSArICcgY2xhc3M9XCJydm1sXCI+Jyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb2RlID0gZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KCc8JyArIHRhZ05hbWUgKyAnIHhtbG5zPVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LmNvbTp2bWxcIiBjbGFzcz1cInJ2bWxcIj4nKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIFIuX2VuZ2luZS5pbml0V2luKFIuX2cud2luKTtcbiAgICBSLl9lbmdpbmUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29uID0gUi5fZ2V0Q29udGFpbmVyLmFwcGx5KDAsIGFyZ3VtZW50cyksXG4gICAgICAgICAgICBjb250YWluZXIgPSBjb24uY29udGFpbmVyLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY29uLmhlaWdodCxcbiAgICAgICAgICAgIHMsXG4gICAgICAgICAgICB3aWR0aCA9IGNvbi53aWR0aCxcbiAgICAgICAgICAgIHggPSBjb24ueCxcbiAgICAgICAgICAgIHkgPSBjb24ueTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZNTCBjb250YWluZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0gbmV3IFIuX1BhcGVyLFxuICAgICAgICAgICAgYyA9IHJlcy5jYW52YXMgPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgY3MgPSBjLnN0eWxlO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIHx8IDUxMjtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDM0MjtcbiAgICAgICAgcmVzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHJlcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHdpZHRoID09ICt3aWR0aCAmJiAod2lkdGggKz0gXCJweFwiKTtcbiAgICAgICAgaGVpZ2h0ID09ICtoZWlnaHQgJiYgKGhlaWdodCArPSBcInB4XCIpO1xuICAgICAgICByZXMuY29vcmRzaXplID0gem9vbSAqIDFlMyArIFMgKyB6b29tICogMWUzO1xuICAgICAgICByZXMuY29vcmRvcmlnaW4gPSBcIjAgMFwiO1xuICAgICAgICByZXMuc3BhbiA9IFIuX2cuZG9jLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICByZXMuc3Bhbi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW07cGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjE7XCI7XG4gICAgICAgIGMuYXBwZW5kQ2hpbGQocmVzLnNwYW4pO1xuICAgICAgICBjcy5jc3NUZXh0ID0gUi5mb3JtYXQoXCJ0b3A6MDtsZWZ0OjA7d2lkdGg6ezB9O2hlaWdodDp7MX07ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7Y2xpcDpyZWN0KDAgezB9IHsxfSAwKTtvdmVyZmxvdzpoaWRkZW5cIiwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGlmIChjb250YWluZXIgPT0gMSkge1xuICAgICAgICAgICAgUi5fZy5kb2MuYm9keS5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIGNzLmxlZnQgPSB4ICsgXCJweFwiO1xuICAgICAgICAgICAgY3MudG9wID0geSArIFwicHhcIjtcbiAgICAgICAgICAgIGNzLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShjLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMucmVuZGVyZml4ID0gZnVuY3Rpb24gKCkge307XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUi5ldmUoXCJyYXBoYWVsLmNsZWFyXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy5pbm5lckhUTUwgPSBFO1xuICAgICAgICB0aGlzLnNwYW4gPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGhpcy5zcGFuLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTllbTt0b3A6LTk5OTllbTtwYWRkaW5nOjA7bWFyZ2luOjA7bGluZS1oZWlnaHQ6MTtkaXNwbGF5OmlubGluZTtcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5zcGFuKTtcbiAgICAgICAgdGhpcy5ib3R0b20gPSB0aGlzLnRvcCA9IG51bGw7XG4gICAgfTtcbiAgICBSLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFIuZXZlKFwicmFwaGFlbC5yZW1vdmVcIiwgdGhpcyk7XG4gICAgICAgIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSB0eXBlb2YgdGhpc1tpXSA9PSBcImZ1bmN0aW9uXCIgPyBSLl9yZW1vdmVkRmFjdG9yeShpKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHZhciBzZXRwcm90byA9IFIuc3Q7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSAmJiAhc2V0cHJvdG9baGFzXShtZXRob2QpKSB7XG4gICAgICAgIHNldHByb3RvW21ldGhvZF0gPSAoZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RuYW1lXS5hcHBseShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/raphael.vml.js\n')},"./node_modules/eve-raphael/eve.js":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n// \n// Licensed under the Apache License, Version 2.0 (the "License");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n// \n// http://www.apache.org/licenses/LICENSE-2.0\n// \n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an "AS IS" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n// \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \\\\\n// \u2502 Eve 0.5.0 - JavaScript Events Library                      \u2502 \\\\\n// \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \\\\\n// \u2502 Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) \u2502 \\\\\n// \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \\\\\n\n(function (glob) {\n    var version = "0.5.0",\n        has = "hasOwnProperty",\n        separator = /[\\.\\/]/,\n        comaseparator = /\\s*,\\s*/,\n        wildcard = "*",\n        fun = function () {},\n        numsort = function (a, b) {\n            return a - b;\n        },\n        current_event,\n        stop,\n        events = {n: {}},\n        firstDefined = function () {\n            for (var i = 0, ii = this.length; i < ii; i++) {\n                if (typeof this[i] != "undefined") {\n                    return this[i];\n                }\n            }\n        },\n        lastDefined = function () {\n            var i = this.length;\n            while (--i) {\n                if (typeof this[i] != "undefined") {\n                    return this[i];\n                }\n            }\n        },\n        objtos = Object.prototype.toString,\n        Str = String,\n        isArray = Array.isArray || function (ar) {\n            return ar instanceof Array || objtos.call(ar) == "[object Array]";\n        };\n    /*\\\n     * eve\n     [ method ]\n\n     * Fires event with given `name`, given scope and other parameters.\n\n     > Arguments\n\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\n     - scope (object) context for the event handlers\n     - varargs (...) the rest of arguments will be sent to event handlers\n\n     = (object) array of returned values from the listeners. Array has two methods `.firstDefined()` and `.lastDefined()` to get first or last not `undefined` value.\n    \\*/\n        var eve = function (name, scope) {\n            var e = events,\n                oldstop = stop,\n                args = Array.prototype.slice.call(arguments, 2),\n                listeners = eve.listeners(name),\n                z = 0,\n                f = false,\n                l,\n                indexed = [],\n                queue = {},\n                out = [],\n                ce = current_event,\n                errors = [];\n            out.firstDefined = firstDefined;\n            out.lastDefined = lastDefined;\n            current_event = name;\n            stop = 0;\n            for (var i = 0, ii = listeners.length; i < ii; i++) if ("zIndex" in listeners[i]) {\n                indexed.push(listeners[i].zIndex);\n                if (listeners[i].zIndex < 0) {\n                    queue[listeners[i].zIndex] = listeners[i];\n                }\n            }\n            indexed.sort(numsort);\n            while (indexed[z] < 0) {\n                l = queue[indexed[z++]];\n                out.push(l.apply(scope, args));\n                if (stop) {\n                    stop = oldstop;\n                    return out;\n                }\n            }\n            for (i = 0; i < ii; i++) {\n                l = listeners[i];\n                if ("zIndex" in l) {\n                    if (l.zIndex == indexed[z]) {\n                        out.push(l.apply(scope, args));\n                        if (stop) {\n                            break;\n                        }\n                        do {\n                            z++;\n                            l = queue[indexed[z]];\n                            l && out.push(l.apply(scope, args));\n                            if (stop) {\n                                break;\n                            }\n                        } while (l)\n                    } else {\n                        queue[l.zIndex] = l;\n                    }\n                } else {\n                    out.push(l.apply(scope, args));\n                    if (stop) {\n                        break;\n                    }\n                }\n            }\n            stop = oldstop;\n            current_event = ce;\n            return out;\n        };\n        // Undocumented. Debug only.\n        eve._events = events;\n    /*\\\n     * eve.listeners\n     [ method ]\n\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\n\n     > Arguments\n\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\n\n     = (array) array of event handlers\n    \\*/\n    eve.listeners = function (name) {\n        var names = isArray(name) ? name : name.split(separator),\n            e = events,\n            item,\n            items,\n            k,\n            i,\n            ii,\n            j,\n            jj,\n            nes,\n            es = [e],\n            out = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            nes = [];\n            for (j = 0, jj = es.length; j < jj; j++) {\n                e = es[j].n;\n                items = [e[names[i]], e[wildcard]];\n                k = 2;\n                while (k--) {\n                    item = items[k];\n                    if (item) {\n                        nes.push(item);\n                        out = out.concat(item.f || []);\n                    }\n                }\n            }\n            es = nes;\n        }\n        return out;\n    };\n    /*\\\n     * eve.separator\n     [ method ]\n\n     * If for some reasons you don\u2019t like default separators (`.` or `/`) you can specify yours\n     * here. Be aware that if you pass a string longer than one character it will be treated as\n     * a list of characters.\n\n     - separator (string) new separator. Empty string resets to default: `.` or `/`.\n    \\*/\n    eve.separator = function (sep) {\n        if (sep) {\n            sep = Str(sep).replace(/(?=[\\.\\^\\]\\[\\-])/g, "\\\\");\n            sep = "[" + sep + "]";\n            separator = new RegExp(sep);\n        } else {\n            separator = /[\\.\\/]/;\n        }\n    };\n    /*\\\n     * eve.on\n     [ method ]\n     **\n     * Binds given event handler with a given name. You can use wildcards \u201c`*`\u201d for the names:\n     | eve.on("*.under.*", f);\n     | eve("mouse.under.floor"); // triggers f\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     - name (array) if you don\u2019t want to use separators, you can use array of strings\n     - f (function) event handler function\n     **\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment. \n     > Example:\n     | eve.on("mouse", eatIt)(2);\n     | eve.on("mouse", scream);\n     | eve.on("mouse", catchIt)(1);\n     * This will ensure that `catchIt` function will be called before `eatIt`.\n     *\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\n     * Note: I assume most of the time you don\u2019t need to worry about z-index, but it\u2019s nice to have this feature \u201cjust in case\u201d.\n    \\*/\n    eve.on = function (name, f) {\n        if (typeof f != "function") {\n            return function () {};\n        }\n        var names = isArray(name) ? (isArray(name[0]) ? name : [name]) : Str(name).split(comaseparator);\n        for (var i = 0, ii = names.length; i < ii; i++) {\n            (function (name) {\n                var names = isArray(name) ? name : Str(name).split(separator),\n                    e = events,\n                    exist;\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    e = e.n;\n                    e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\n                }\n                e.f = e.f || [];\n                for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\n                    exist = true;\n                    break;\n                }\n                !exist && e.f.push(f);\n            }(names[i]));\n        }\n        return function (zIndex) {\n            if (+zIndex == +zIndex) {\n                f.zIndex = +zIndex;\n            }\n        };\n    };\n    /*\\\n     * eve.f\n     [ method ]\n     **\n     * Returns function that will fire given event with optional arguments.\n     * Arguments that will be passed to the result function will be also\n     * concated to the list of final arguments.\n     | el.onclick = eve.f("click", 1, 2);\n     | eve.on("click", function (a, b, c) {\n     |     console.log(a, b, c); // 1, 2, [event object]\n     | });\n     > Arguments\n     - event (string) event name\n     - varargs (\u2026) and any other arguments\n     = (function) possible event handler function\n    \\*/\n    eve.f = function (event) {\n        var attrs = [].slice.call(arguments, 1);\n        return function () {\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));\n        };\n    };\n    /*\\\n     * eve.stop\n     [ method ]\n     **\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\n    \\*/\n    eve.stop = function () {\n        stop = 1;\n    };\n    /*\\\n     * eve.nt\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     > Arguments\n     **\n     - subname (string) #optional subname of the event\n     **\n     = (string) name of the event, if `subname` is not specified\n     * or\n     = (boolean) `true`, if current event\u2019s name contains `subname`\n    \\*/\n    eve.nt = function (subname) {\n        var cur = isArray(current_event) ? current_event.join(".") : current_event;\n        if (subname) {\n            return new RegExp("(?:\\\\.|\\\\/|^)" + subname + "(?:\\\\.|\\\\/|$)").test(cur);\n        }\n        return cur;\n    };\n    /*\\\n     * eve.nts\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     **\n     = (array) names of the event\n    \\*/\n    eve.nts = function () {\n        return isArray(current_event) ? current_event : current_event.split(separator);\n    };\n    /*\\\n     * eve.off\n     [ method ]\n     **\n     * Removes given function from the list of event listeners assigned to given name.\n     * If no arguments specified all the events will be cleared.\n     **\n     > Arguments\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n    \\*/\n    /*\\\n     * eve.unbind\n     [ method ]\n     **\n     * See @eve.off\n    \\*/\n    eve.off = eve.unbind = function (name, f) {\n        if (!name) {\n            eve._events = events = {n: {}};\n            return;\n        }\n        var names = isArray(name) ? (isArray(name[0]) ? name : [name]) : Str(name).split(comaseparator);\n        if (names.length > 1) {\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                eve.off(names[i], f);\n            }\n            return;\n        }\n        names = isArray(name) ? name : Str(name).split(separator);\n        var e,\n            key,\n            splice,\n            i, ii, j, jj,\n            cur = [events];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            for (j = 0; j < cur.length; j += splice.length - 2) {\n                splice = [j, 1];\n                e = cur[j].n;\n                if (names[i] != wildcard) {\n                    if (e[names[i]]) {\n                        splice.push(e[names[i]]);\n                    }\n                } else {\n                    for (key in e) if (e[has](key)) {\n                        splice.push(e[key]);\n                    }\n                }\n                cur.splice.apply(cur, splice);\n            }\n        }\n        for (i = 0, ii = cur.length; i < ii; i++) {\n            e = cur[i];\n            while (e.n) {\n                if (f) {\n                    if (e.f) {\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\n                            e.f.splice(j, 1);\n                            break;\n                        }\n                        !e.f.length && delete e.f;\n                    }\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        var funcs = e.n[key].f;\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\n                            funcs.splice(j, 1);\n                            break;\n                        }\n                        !funcs.length && delete e.n[key].f;\n                    }\n                } else {\n                    delete e.f;\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        delete e.n[key].f;\n                    }\n                }\n                e = e.n;\n            }\n        }\n    };\n    /*\\\n     * eve.once\n     [ method ]\n     **\n     * Binds given event handler with a given name to only run once then unbind itself.\n     | eve.once("login", f);\n     | eve("login"); // triggers f\n     | eve("login"); // no listeners\n     * Use @eve to trigger the listener.\n     **\n     > Arguments\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     = (function) same return function as @eve.on\n    \\*/\n    eve.once = function (name, f) {\n        var f2 = function () {\n            eve.off(name, f2);\n            return f.apply(this, arguments);\n        };\n        return eve.on(name, f2);\n    };\n    /*\\\n     * eve.version\n     [ property (string) ]\n     **\n     * Current version of the library.\n    \\*/\n    eve.version = version;\n    eve.toString = function () {\n        return "You are running Eve " + version;\n    };\n    ( true && module.exports) ? (module.exports = eve) : ( true ? (!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() { return eve; }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))) : (undefined));\n})(this);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZXZlLXJhcGhhZWwvZXZlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmFwaGFlbC8uL25vZGVfbW9kdWxlcy9ldmUtcmFwaGFlbC9ldmUuanM/ZDJiNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTMgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vIFxuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vLyBcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vLyDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgXFxcXFxuLy8g4pSCIEV2ZSAwLjUuMCAtIEphdmFTY3JpcHQgRXZlbnRzIExpYnJhcnkgICAgICAgICAgICAgICAgICAgICAg4pSCIFxcXFxcbi8vIOKUnOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUpCBcXFxcXG4vLyDilIIgQXV0aG9yIERtaXRyeSBCYXJhbm92c2tpeSAoaHR0cDovL2RtaXRyeS5iYXJhbm92c2tpeS5jb20vKSDilIIgXFxcXFxuLy8g4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIFxcXFxcblxuKGZ1bmN0aW9uIChnbG9iKSB7XG4gICAgdmFyIHZlcnNpb24gPSBcIjAuNS4wXCIsXG4gICAgICAgIGhhcyA9IFwiaGFzT3duUHJvcGVydHlcIixcbiAgICAgICAgc2VwYXJhdG9yID0gL1tcXC5cXC9dLyxcbiAgICAgICAgY29tYXNlcGFyYXRvciA9IC9cXHMqLFxccyovLFxuICAgICAgICB3aWxkY2FyZCA9IFwiKlwiLFxuICAgICAgICBmdW4gPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgbnVtc29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYSAtIGI7XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRfZXZlbnQsXG4gICAgICAgIHN0b3AsXG4gICAgICAgIGV2ZW50cyA9IHtuOiB7fX0sXG4gICAgICAgIGZpcnN0RGVmaW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGFzdERlZmluZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKC0taSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb2JqdG9zID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcbiAgICAgICAgU3RyID0gU3RyaW5nLFxuICAgICAgICBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhciBpbnN0YW5jZW9mIEFycmF5IHx8IG9ianRvcy5jYWxsKGFyKSA9PSBcIltvYmplY3QgQXJyYXldXCI7XG4gICAgICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZVxuICAgICBbIG1ldGhvZCBdXG5cbiAgICAgKiBGaXJlcyBldmVudCB3aXRoIGdpdmVuIGBuYW1lYCwgZ2l2ZW4gc2NvcGUgYW5kIG90aGVyIHBhcmFtZXRlcnMuXG5cbiAgICAgPiBBcmd1bWVudHNcblxuICAgICAtIG5hbWUgKHN0cmluZykgbmFtZSBvZiB0aGUgKmV2ZW50KiwgZG90IChgLmApIG9yIHNsYXNoIChgL2ApIHNlcGFyYXRlZFxuICAgICAtIHNjb3BlIChvYmplY3QpIGNvbnRleHQgZm9yIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAtIHZhcmFyZ3MgKC4uLikgdGhlIHJlc3Qgb2YgYXJndW1lbnRzIHdpbGwgYmUgc2VudCB0byBldmVudCBoYW5kbGVyc1xuXG4gICAgID0gKG9iamVjdCkgYXJyYXkgb2YgcmV0dXJuZWQgdmFsdWVzIGZyb20gdGhlIGxpc3RlbmVycy4gQXJyYXkgaGFzIHR3byBtZXRob2RzIGAuZmlyc3REZWZpbmVkKClgIGFuZCBgLmxhc3REZWZpbmVkKClgIHRvIGdldCBmaXJzdCBvciBsYXN0IG5vdCBgdW5kZWZpbmVkYCB2YWx1ZS5cbiAgICBcXCovXG4gICAgICAgIHZhciBldmUgPSBmdW5jdGlvbiAobmFtZSwgc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gZXZlbnRzLFxuICAgICAgICAgICAgICAgIG9sZHN0b3AgPSBzdG9wLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGV2ZS5saXN0ZW5lcnMobmFtZSksXG4gICAgICAgICAgICAgICAgeiA9IDAsXG4gICAgICAgICAgICAgICAgZiA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIGwsXG4gICAgICAgICAgICAgICAgaW5kZXhlZCA9IFtdLFxuICAgICAgICAgICAgICAgIHF1ZXVlID0ge30sXG4gICAgICAgICAgICAgICAgb3V0ID0gW10sXG4gICAgICAgICAgICAgICAgY2UgPSBjdXJyZW50X2V2ZW50LFxuICAgICAgICAgICAgICAgIGVycm9ycyA9IFtdO1xuICAgICAgICAgICAgb3V0LmZpcnN0RGVmaW5lZCA9IGZpcnN0RGVmaW5lZDtcbiAgICAgICAgICAgIG91dC5sYXN0RGVmaW5lZCA9IGxhc3REZWZpbmVkO1xuICAgICAgICAgICAgY3VycmVudF9ldmVudCA9IG5hbWU7XG4gICAgICAgICAgICBzdG9wID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAoXCJ6SW5kZXhcIiBpbiBsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkLnB1c2gobGlzdGVuZXJzW2ldLnpJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS56SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlW2xpc3RlbmVyc1tpXS56SW5kZXhdID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ZWQuc29ydChudW1zb3J0KTtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleGVkW3pdIDwgMCkge1xuICAgICAgICAgICAgICAgIGwgPSBxdWV1ZVtpbmRleGVkW3orK11dO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGwuYXBwbHkoc2NvcGUsIGFyZ3MpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gb2xkc3RvcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGwgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKFwiekluZGV4XCIgaW4gbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobC56SW5kZXggPT0gaW5kZXhlZFt6XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHF1ZXVlW2luZGV4ZWRbel1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGwpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZVtsLnpJbmRleF0gPSBsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9wID0gb2xkc3RvcDtcbiAgICAgICAgICAgIGN1cnJlbnRfZXZlbnQgPSBjZTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFVuZG9jdW1lbnRlZC4gRGVidWcgb25seS5cbiAgICAgICAgZXZlLl9ldmVudHMgPSBldmVudHM7XG4gICAgLypcXFxuICAgICAqIGV2ZS5saXN0ZW5lcnNcbiAgICAgWyBtZXRob2QgXVxuXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHdoaWNoIGdpdmVzIHlvdSBhcnJheSBvZiBhbGwgZXZlbnQgaGFuZGxlcnMgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCBieSB0aGUgZ2l2ZW4gYG5hbWVgLlxuXG4gICAgID4gQXJndW1lbnRzXG5cbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkXG5cbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIGV2ZW50IGhhbmRsZXJzXG4gICAgXFwqL1xuICAgIGV2ZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gbmFtZSA6IG5hbWUuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgIGUgPSBldmVudHMsXG4gICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICBrLFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgaixcbiAgICAgICAgICAgIGpqLFxuICAgICAgICAgICAgbmVzLFxuICAgICAgICAgICAgZXMgPSBbZV0sXG4gICAgICAgICAgICBvdXQgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBuZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgIGUgPSBlc1tqXS5uO1xuICAgICAgICAgICAgICAgIGl0ZW1zID0gW2VbbmFtZXNbaV1dLCBlW3dpbGRjYXJkXV07XG4gICAgICAgICAgICAgICAgayA9IDI7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGstLSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNba107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IG91dC5jb25jYXQoaXRlbS5mIHx8IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVzID0gbmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogZXZlLnNlcGFyYXRvclxuICAgICBbIG1ldGhvZCBdXG5cbiAgICAgKiBJZiBmb3Igc29tZSByZWFzb25zIHlvdSBkb27igJl0IGxpa2UgZGVmYXVsdCBzZXBhcmF0b3JzIChgLmAgb3IgYC9gKSB5b3UgY2FuIHNwZWNpZnkgeW91cnNcbiAgICAgKiBoZXJlLiBCZSBhd2FyZSB0aGF0IGlmIHlvdSBwYXNzIGEgc3RyaW5nIGxvbmdlciB0aGFuIG9uZSBjaGFyYWN0ZXIgaXQgd2lsbCBiZSB0cmVhdGVkIGFzXG4gICAgICogYSBsaXN0IG9mIGNoYXJhY3RlcnMuXG5cbiAgICAgLSBzZXBhcmF0b3IgKHN0cmluZykgbmV3IHNlcGFyYXRvci4gRW1wdHkgc3RyaW5nIHJlc2V0cyB0byBkZWZhdWx0OiBgLmAgb3IgYC9gLlxuICAgIFxcKi9cbiAgICBldmUuc2VwYXJhdG9yID0gZnVuY3Rpb24gKHNlcCkge1xuICAgICAgICBpZiAoc2VwKSB7XG4gICAgICAgICAgICBzZXAgPSBTdHIoc2VwKS5yZXBsYWNlKC8oPz1bXFwuXFxeXFxdXFxbXFwtXSkvZywgXCJcXFxcXCIpO1xuICAgICAgICAgICAgc2VwID0gXCJbXCIgKyBzZXAgKyBcIl1cIjtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IC9bXFwuXFwvXS87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBldmUub25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEJpbmRzIGdpdmVuIGV2ZW50IGhhbmRsZXIgd2l0aCBhIGdpdmVuIG5hbWUuIFlvdSBjYW4gdXNlIHdpbGRjYXJkcyDigJxgKmDigJ0gZm9yIHRoZSBuYW1lczpcbiAgICAgfCBldmUub24oXCIqLnVuZGVyLipcIiwgZik7XG4gICAgIHwgZXZlKFwibW91c2UudW5kZXIuZmxvb3JcIik7IC8vIHRyaWdnZXJzIGZcbiAgICAgKiBVc2UgQGV2ZSB0byB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICoqXG4gICAgIC0gbmFtZSAoYXJyYXkpIGlmIHlvdSBkb27igJl0IHdhbnQgdG8gdXNlIHNlcGFyYXRvcnMsIHlvdSBjYW4gdXNlIGFycmF5IG9mIHN0cmluZ3NcbiAgICAgLSBmIChmdW5jdGlvbikgZXZlbnQgaGFuZGxlciBmdW5jdGlvblxuICAgICAqKlxuICAgICA9IChmdW5jdGlvbikgcmV0dXJuZWQgZnVuY3Rpb24gYWNjZXB0cyBhIHNpbmdsZSBudW1lcmljIHBhcmFtZXRlciB0aGF0IHJlcHJlc2VudHMgei1pbmRleCBvZiB0aGUgaGFuZGxlci4gSXQgaXMgYW4gb3B0aW9uYWwgZmVhdHVyZSBhbmQgb25seSB1c2VkIHdoZW4geW91IG5lZWQgdG8gZW5zdXJlIHRoYXQgc29tZSBzdWJzZXQgb2YgaGFuZGxlcnMgd2lsbCBiZSBpbnZva2VkIGluIGEgZ2l2ZW4gb3JkZXIsIGRlc3BpdGUgb2YgdGhlIG9yZGVyIG9mIGFzc2lnbm1lbnQuIFxuICAgICA+IEV4YW1wbGU6XG4gICAgIHwgZXZlLm9uKFwibW91c2VcIiwgZWF0SXQpKDIpO1xuICAgICB8IGV2ZS5vbihcIm1vdXNlXCIsIHNjcmVhbSk7XG4gICAgIHwgZXZlLm9uKFwibW91c2VcIiwgY2F0Y2hJdCkoMSk7XG4gICAgICogVGhpcyB3aWxsIGVuc3VyZSB0aGF0IGBjYXRjaEl0YCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgYGVhdEl0YC5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3YW50IHRvIHB1dCB5b3VyIGhhbmRsZXIgYmVmb3JlIG5vbi1pbmRleGVkIGhhbmRsZXJzLCBzcGVjaWZ5IGEgbmVnYXRpdmUgdmFsdWUuXG4gICAgICogTm90ZTogSSBhc3N1bWUgbW9zdCBvZiB0aGUgdGltZSB5b3UgZG9u4oCZdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHotaW5kZXgsIGJ1dCBpdOKAmXMgbmljZSB0byBoYXZlIHRoaXMgZmVhdHVyZSDigJxqdXN0IGluIGNhc2XigJ0uXG4gICAgXFwqL1xuICAgIGV2ZS5vbiA9IGZ1bmN0aW9uIChuYW1lLCBmKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZiAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gKGlzQXJyYXkobmFtZVswXSkgPyBuYW1lIDogW25hbWVdKSA6IFN0cihuYW1lKS5zcGxpdChjb21hc2VwYXJhdG9yKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBTdHIobmFtZSkuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgZSA9IGV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgZXhpc3Q7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBlID0gZS5uO1xuICAgICAgICAgICAgICAgICAgICBlID0gZS5oYXNPd25Qcm9wZXJ0eShuYW1lc1tpXSkgJiYgZVtuYW1lc1tpXV0gfHwgKGVbbmFtZXNbaV1dID0ge246IHt9fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuZiA9IGUuZiB8fCBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGUuZi5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAoZS5mW2ldID09IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIWV4aXN0ICYmIGUuZi5wdXNoKGYpO1xuICAgICAgICAgICAgfShuYW1lc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoekluZGV4KSB7XG4gICAgICAgICAgICBpZiAoK3pJbmRleCA9PSArekluZGV4KSB7XG4gICAgICAgICAgICAgICAgZi56SW5kZXggPSArekluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5mXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgd2lsbCBmaXJlIGdpdmVuIGV2ZW50IHdpdGggb3B0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqIEFyZ3VtZW50cyB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSByZXN1bHQgZnVuY3Rpb24gd2lsbCBiZSBhbHNvXG4gICAgICogY29uY2F0ZWQgdG8gdGhlIGxpc3Qgb2YgZmluYWwgYXJndW1lbnRzLlxuICAgICB8IGVsLm9uY2xpY2sgPSBldmUuZihcImNsaWNrXCIsIDEsIDIpO1xuICAgICB8IGV2ZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgIHwgICAgIGNvbnNvbGUubG9nKGEsIGIsIGMpOyAvLyAxLCAyLCBbZXZlbnQgb2JqZWN0XVxuICAgICB8IH0pO1xuICAgICA+IEFyZ3VtZW50c1xuICAgICAtIGV2ZW50IChzdHJpbmcpIGV2ZW50IG5hbWVcbiAgICAgLSB2YXJhcmdzICjigKYpIGFuZCBhbnkgb3RoZXIgYXJndW1lbnRzXG4gICAgID0gKGZ1bmN0aW9uKSBwb3NzaWJsZSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgXFwqL1xuICAgIGV2ZS5mID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBhdHRycyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZS5hcHBseShudWxsLCBbZXZlbnQsIG51bGxdLmNvbmNhdChhdHRycykuY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSkpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5zdG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJcyB1c2VkIGluc2lkZSBhbiBldmVudCBoYW5kbGVyIHRvIHN0b3AgdGhlIGV2ZW50LCBwcmV2ZW50aW5nIGFueSBzdWJzZXF1ZW50IGxpc3RlbmVycyBmcm9tIGZpcmluZy5cbiAgICBcXCovXG4gICAgZXZlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0b3AgPSAxO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5udFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ291bGQgYmUgdXNlZCBpbnNpZGUgZXZlbnQgaGFuZGxlciB0byBmaWd1cmUgb3V0IGFjdHVhbCBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBzdWJuYW1lIChzdHJpbmcpICNvcHRpb25hbCBzdWJuYW1lIG9mIHRoZSBldmVudFxuICAgICAqKlxuICAgICA9IChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBpZiBgc3VibmFtZWAgaXMgbm90IHNwZWNpZmllZFxuICAgICAqIG9yXG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCwgaWYgY3VycmVudCBldmVudOKAmXMgbmFtZSBjb250YWlucyBgc3VibmFtZWBcbiAgICBcXCovXG4gICAgZXZlLm50ID0gZnVuY3Rpb24gKHN1Ym5hbWUpIHtcbiAgICAgICAgdmFyIGN1ciA9IGlzQXJyYXkoY3VycmVudF9ldmVudCkgPyBjdXJyZW50X2V2ZW50LmpvaW4oXCIuXCIpIDogY3VycmVudF9ldmVudDtcbiAgICAgICAgaWYgKHN1Ym5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKD86XFxcXC58XFxcXC98XilcIiArIHN1Ym5hbWUgKyBcIig/OlxcXFwufFxcXFwvfCQpXCIpLnRlc3QoY3VyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VyO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5udHNcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvdWxkIGJlIHVzZWQgaW5zaWRlIGV2ZW50IGhhbmRsZXIgdG8gZmlndXJlIG91dCBhY3R1YWwgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICoqXG4gICAgICoqXG4gICAgID0gKGFycmF5KSBuYW1lcyBvZiB0aGUgZXZlbnRcbiAgICBcXCovXG4gICAgZXZlLm50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkoY3VycmVudF9ldmVudCkgPyBjdXJyZW50X2V2ZW50IDogY3VycmVudF9ldmVudC5zcGxpdChzZXBhcmF0b3IpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5vZmZcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZ2l2ZW4gZnVuY3Rpb24gZnJvbSB0aGUgbGlzdCBvZiBldmVudCBsaXN0ZW5lcnMgYXNzaWduZWQgdG8gZ2l2ZW4gbmFtZS5cbiAgICAgKiBJZiBubyBhcmd1bWVudHMgc3BlY2lmaWVkIGFsbCB0aGUgZXZlbnRzIHdpbGwgYmUgY2xlYXJlZC5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBldmUudW5iaW5kXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZWUgQGV2ZS5vZmZcbiAgICBcXCovXG4gICAgZXZlLm9mZiA9IGV2ZS51bmJpbmQgPSBmdW5jdGlvbiAobmFtZSwgZikge1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgIGV2ZS5fZXZlbnRzID0gZXZlbnRzID0ge246IHt9fTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gKGlzQXJyYXkobmFtZVswXSkgPyBuYW1lIDogW25hbWVdKSA6IFN0cihuYW1lKS5zcGxpdChjb21hc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBldmUub2ZmKG5hbWVzW2ldLCBmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuYW1lcyA9IGlzQXJyYXkobmFtZSkgPyBuYW1lIDogU3RyKG5hbWUpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIHZhciBlLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgc3BsaWNlLFxuICAgICAgICAgICAgaSwgaWksIGosIGpqLFxuICAgICAgICAgICAgY3VyID0gW2V2ZW50c107XG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGN1ci5sZW5ndGg7IGogKz0gc3BsaWNlLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpY2UgPSBbaiwgMV07XG4gICAgICAgICAgICAgICAgZSA9IGN1cltqXS5uO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lc1tpXSAhPSB3aWxkY2FyZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZVtuYW1lc1tpXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGljZS5wdXNoKGVbbmFtZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGUpIGlmIChlW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BsaWNlLnB1c2goZVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXIuc3BsaWNlLmFwcGx5KGN1ciwgc3BsaWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGN1ci5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBlID0gY3VyW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGUubikge1xuICAgICAgICAgICAgICAgIGlmIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZS5mLmxlbmd0aDsgaiA8IGpqOyBqKyspIGlmIChlLmZbal0gPT0gZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZi5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAhZS5mLmxlbmd0aCAmJiBkZWxldGUgZS5mO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGUubikgaWYgKGUubltoYXNdKGtleSkgJiYgZS5uW2tleV0uZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmNzID0gZS5uW2tleV0uZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZnVuY3MubGVuZ3RoOyBqIDwgamo7IGorKykgaWYgKGZ1bmNzW2pdID09IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jcy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAhZnVuY3MubGVuZ3RoICYmIGRlbGV0ZSBlLm5ba2V5XS5mO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGUuZjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gZS5uKSBpZiAoZS5uW2hhc10oa2V5KSAmJiBlLm5ba2V5XS5mKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZS5uW2tleV0uZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlID0gZS5uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogZXZlLm9uY2VcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEJpbmRzIGdpdmVuIGV2ZW50IGhhbmRsZXIgd2l0aCBhIGdpdmVuIG5hbWUgdG8gb25seSBydW4gb25jZSB0aGVuIHVuYmluZCBpdHNlbGYuXG4gICAgIHwgZXZlLm9uY2UoXCJsb2dpblwiLCBmKTtcbiAgICAgfCBldmUoXCJsb2dpblwiKTsgLy8gdHJpZ2dlcnMgZlxuICAgICB8IGV2ZShcImxvZ2luXCIpOyAvLyBubyBsaXN0ZW5lcnNcbiAgICAgKiBVc2UgQGV2ZSB0byB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICoqXG4gICAgID0gKGZ1bmN0aW9uKSBzYW1lIHJldHVybiBmdW5jdGlvbiBhcyBAZXZlLm9uXG4gICAgXFwqL1xuICAgIGV2ZS5vbmNlID0gZnVuY3Rpb24gKG5hbWUsIGYpIHtcbiAgICAgICAgdmFyIGYyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlLm9mZihuYW1lLCBmMik7XG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZXZlLm9uKG5hbWUsIGYyKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBldmUudmVyc2lvblxuICAgICBbIHByb3BlcnR5IChzdHJpbmcpIF1cbiAgICAgKipcbiAgICAgKiBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuXG4gICAgXFwqL1xuICAgIGV2ZS52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICBldmUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIllvdSBhcmUgcnVubmluZyBFdmUgXCIgKyB2ZXJzaW9uO1xuICAgIH07XG4gICAgKHR5cGVvZiBtb2R1bGUgIT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykgPyAobW9kdWxlLmV4cG9ydHMgPSBldmUpIDogKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kID8gKGRlZmluZShcImV2ZVwiLCBbXSwgZnVuY3Rpb24oKSB7IHJldHVybiBldmU7IH0pKSA6IChnbG9iLmV2ZSA9IGV2ZSkpO1xufSkodGhpcyk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/eve-raphael/eve.js\n')}})}),(function(){var e,t,n,i,o=[].slice,r=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,s=function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},g=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};t=window.Morris={},e=jQuery,t.EventEmitter=function(){function e(){}return e.prototype.on=function(e,t){return null==this.handlers&&(this.handlers={}),null==this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this},e.prototype.fire=function(){var e,t,n,i,r,a;if(t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[t]){for(a=[],n=0,i=(r=this.handlers[t]).length;n<i;n++)a.push(r[n].apply(null,e));return a}},e}(),t.commas=function(e){var t,n,i,o;return null!=e?(i=e<0?"-":"",t=Math.abs(e),i+=(n=Math.floor(t).toFixed(0)).replace(/(?=(?:\d{3})+$)(?!^)/g,","),(o=t.toString()).length>n.length&&(i+=o.slice(n.length)),i):"-"},t.pad2=function(e){return(e<10?"0":"")+e},t.Grid=function(n){function i(t){this.resizeHandler=r(this.resizeHandler,this);var n=this;if(this.el=e("string"==typeof t.element?document.getElementById(t.element):t.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=e.extend({},this.gridDefaults,this.defaults||{},t),"string"==typeof this.options.units&&(this.options.postUnits=t.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(e){var t,i,o,r;return i=n.el.offset(),r=e.pageX-i.left,n.selectFrom?(t=n.data[n.hitTest(Math.min(r,n.selectFrom))]._x,o=n.data[n.hitTest(Math.max(r,n.selectFrom))]._x,n.selectionRect.attr({x:t,width:o-t})):n.fire("hovermove",r,e.pageY-i.top)}),this.el.bind("mouseleave",function(e){return n.selectFrom&&(n.selectionRect.hide(),n.selectFrom=null),n.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(e){var t,i;return i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],t=n.el.offset(),n.fire("hovermove",i.pageX-t.left,i.pageY-t.top)}),this.el.bind("click",function(e){var t;return t=n.el.offset(),n.fire("gridclick",e.pageX-t.left,e.pageY-t.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(e){var t;return t=n.el.offset(),n.startRange(e.pageX-t.left)}),this.el.bind("mouseup",function(e){var t;return t=n.el.offset(),n.endRange(e.pageX-t.left),n.fire("hovermove",e.pageX-t.left,e.pageY-t.top)})),this.options.resize&&e(window).bind("resize",function(e){return null!=n.timeoutId&&window.clearTimeout(n.timeoutId),n.timeoutId=window.setTimeout(n.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return s(i,t.EventEmitter),i.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},i.prototype.setData=function(e,n){var i,o,r,a,s,g,l,c,u,I,d,C,h;return null==n&&(n=!0),this.options.data=e,null==e||0===e.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(I=this.cumulative?0:null,d=this.cumulative?0:null,this.options.goals.length>0&&(a=Math.min.apply(Math,this.options.goals),r=Math.max.apply(Math,this.options.goals),d=null!=d?Math.min(d,a):a,I=null!=I?Math.max(I,r):r),this.data=(function(){var n,r,a;for(a=[],o=n=0,r=e.length;n<r;o=++n)(s={src:g=e[o]}).label=g[this.options.xkey],this.options.parseTime?(s.x=t.parseDate(s.label),this.options.dateFormat?s.label=this.options.dateFormat(s.x):"number"==typeof s.label&&(s.label=new Date(s.label).toString())):(s.x=o,this.options.xLabelFormat&&(s.label=this.options.xLabelFormat(s))),c=0,s.y=(function(){var e,t,n,o;for(o=[],i=e=0,t=(n=this.options.ykeys).length;e<t;i=++e)"string"==typeof(C=g[n[i]])&&(C=parseFloat(C)),null!=C&&"number"!=typeof C&&(C=null),null!=C&&(this.cumulative?c+=C:null!=I?(I=Math.max(C,I),d=Math.min(C,d)):I=d=C),this.cumulative&&null!=c&&(I=Math.max(c,I),d=Math.min(c,d)),o.push(C);return o}).call(this),a.push(s);return a}).call(this),this.options.parseTime&&(this.data=this.data.sort(function(e,t){return(e.x>t.x)-(t.x>e.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.events=this.options.parseTime?(function(){var e,n,i,o;for(o=[],e=0,n=(i=this.options.events).length;e<n;e++)o.push(t.parseDate(i[e]));return o}).call(this):this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",d),this.ymax=this.yboundary("max",I),this.ymin===this.ymax&&(d&&(this.ymin-=1),this.ymax+=1),!0!==(h=this.options.axes)&&"both"!==h&&"y"!==h&&!0!==this.options.grid||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(l=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=(function(){var e,t,n;for(n=[],u=e=this.ymin,t=this.ymax;l>0?e<=t:e>=t;u=e+=l)n.push(u);return n}).call(this))),this.dirty=!0,n?this.redraw():void 0)},i.prototype.yboundary=function(e,t){var n,i;return"string"==typeof(n=this.options["y"+e])?"auto"===n.slice(0,4)?n.length>5?(i=parseInt(n.slice(5),10),null==t?i:Math[e](t,i)):null!=t?t:0:parseInt(n,10):n},i.prototype.autoGridLines=function(e,t,n){var i,o,r,a,s,g,l,c;return c=Math.floor(Math.log(t-e)/Math.log(10)),g=Math.pow(10,c),o=Math.floor(e/g)*g,i=Math.ceil(t/g)*g,s=(i-o)/(n-1),1===g&&s>1&&Math.ceil(s)!==s&&(s=Math.ceil(s),i=o+s*(n-1)),o<0&&i>0&&(o=Math.floor(e/s)*s,i=Math.ceil(t/s)*s),s<1?(a=Math.floor(Math.log(s)/Math.log(10)),r=function(){var e,t;for(t=[],l=e=o;s>0?e<=i:e>=i;l=e+=s)t.push(parseFloat(l.toFixed(1-a)));return t}()):r=function(){var e,t;for(t=[],l=e=o;s>0?e<=i:e>=i;l=e+=s)t.push(l);return t}(),r},i.prototype._calc=function(){var e,t,n,i,o,r,a;if(i=this.el.width(),t=this.el.height(),(this.elementWidth!==i||this.elementHeight!==t||this.dirty)&&(this.elementWidth=i,this.elementHeight=t,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,!0!==(r=this.options.axes)&&"both"!==r&&"y"!==r||(o=(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.grid).length;e<t;e++)i.push(this.measureText(this.yAxisFormat(n[e])).width);return i}).call(this),this.left+=Math.max.apply(Math,o)),!0!==(a=this.options.axes)&&"both"!==a&&"x"!==a||(e=(function(){var e,t,i;for(i=[],n=e=0,t=this.data.length;0<=t?e<t:e>t;n=0<=t?++e:--e)i.push(this.measureText(this.data[n].text,-this.options.xLabelAngle).height);return i}).call(this),this.bottom-=Math.max.apply(Math,e)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc))return this.calc()},i.prototype.transY=function(e){return this.bottom-(e-this.ymin)*this.dy},i.prototype.transX=function(e){return 1===this.data.length?(this.left+this.right)/2:this.left+(e-this.xmin)*this.dx},i.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},i.prototype.measureText=function(e,t){var n,i;return null==t&&(t=0),n=(i=this.raphael.text(100,100,e).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(t)).getBBox(),i.remove(),n},i.prototype.yAxisFormat=function(e){return this.yLabelFormat(e)},i.prototype.yLabelFormat=function(e){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(e):""+this.options.preUnits+t.commas(e)+this.options.postUnits},i.prototype.drawGrid=function(){var e,t,n,i,o,r,a,s;if(!1!==this.options.grid||!0===(o=this.options.axes)||"both"===o||"y"===o){for(s=[],n=0,i=(r=this.grid).length;n<i;n++)t=this.transY(e=r[n]),!0!==(a=this.options.axes)&&"both"!==a&&"y"!==a||this.drawYAxisLabel(this.left-this.options.padding/2,t,this.yAxisFormat(e)),s.push(this.options.grid?this.drawGridLine("M"+this.left+","+t+"H"+(this.left+this.width)):void 0);return s}},i.prototype.drawGoals=function(){var e,t,n,i,o;for(o=[],e=t=0,n=(i=this.options.goals).length;t<n;e=++t)o.push(this.drawGoal(i[e],this.options.goalLineColors[e%this.options.goalLineColors.length]));return o},i.prototype.drawEvents=function(){var e,t,n,i,o;for(o=[],e=t=0,n=(i=this.events).length;t<n;e=++t)o.push(this.drawEvent(i[e],this.options.eventLineColors[e%this.options.eventLineColors.length]));return o},i.prototype.drawGoal=function(e,t){return this.raphael.path("M"+this.left+","+this.transY(e)+"H"+this.right).attr("stroke",t).attr("stroke-width",this.options.goalStrokeWidth)},i.prototype.drawEvent=function(e,t){return this.raphael.path("M"+this.transX(e)+","+this.bottom+"V"+this.top).attr("stroke",t).attr("stroke-width",this.options.eventStrokeWidth)},i.prototype.drawYAxisLabel=function(e,t,n){return this.raphael.text(e,t,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},i.prototype.drawGridLine=function(e){return this.raphael.path(e).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},i.prototype.startRange=function(e){return this.hover.hide(),this.selectFrom=e,this.selectionRect.attr({x:e,width:0}).show()},i.prototype.endRange=function(e){var t,n;if(this.selectFrom)return n=Math.min(this.selectFrom,e),t=Math.max(this.selectFrom,e),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(n)].x,end:this.data[this.hitTest(t)].x}),this.selectFrom=null},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(),t.parseDate=function(e){var t,n,i,o,r,a,s,g,l,c,u;return"number"==typeof e?e:(n=e.match(/^(\d+) Q(\d)$/),o=e.match(/^(\d+)-(\d+)$/),r=e.match(/^(\d+)-(\d+)-(\d+)$/),s=e.match(/^(\d+) W(\d+)$/),g=e.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),l=e.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),n?new Date(parseInt(n[1],10),3*parseInt(n[2],10)-1,1).getTime():o?new Date(parseInt(o[1],10),parseInt(o[2],10)-1,1).getTime():r?new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10)).getTime():s?(4!==(c=new Date(parseInt(s[1],10),0,1)).getDay()&&c.setMonth(0,1+(4-c.getDay()+7)%7),c.getTime()+6048e5*parseInt(s[2],10)):g?g[6]?(a=0,"Z"!==g[6]&&(a=60*parseInt(g[8],10)+parseInt(g[9],10),"+"===g[7]&&(a=0-a)),Date.UTC(parseInt(g[1],10),parseInt(g[2],10)-1,parseInt(g[3],10),parseInt(g[4],10),parseInt(g[5],10)+a)):new Date(parseInt(g[1],10),parseInt(g[2],10)-1,parseInt(g[3],10),parseInt(g[4],10),parseInt(g[5],10)).getTime():l?(u=parseFloat(l[6]),t=Math.floor(u),i=Math.round(1e3*(u-t)),l[8]?(a=0,"Z"!==l[8]&&(a=60*parseInt(l[10],10)+parseInt(l[11],10),"+"===l[9]&&(a=0-a)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+a,t,i)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10),t,i).getTime()):new Date(parseInt(e,10),0,1).getTime())},t.Hover=function(){function n(n){null==n&&(n={}),this.options=e.extend({},t.Hover.defaults,n),this.el=e("<div class='"+this.options.class+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return n.defaults={class:"morris-hover morris-default-style"},n.prototype.update=function(e,t,n){return e?(this.html(e),this.show(),this.moveTo(t,n)):this.hide()},n.prototype.html=function(e){return this.el.html(e)},n.prototype.moveTo=function(e,t){var n,i,o,r,a,s;return a=this.options.parent.innerWidth(),r=this.options.parent.innerHeight(),i=this.el.outerWidth(),n=this.el.outerHeight(),o=Math.min(Math.max(0,e-i/2),a-i),null!=t?(s=t-n-10)<0&&(s=t+10)+n>r&&(s=r/2-n/2):s=r/2-n/2,this.el.css({left:o+"px",top:parseInt(s)+"px"})},n.prototype.show=function(){return this.el.show()},n.prototype.hide=function(){return this.el.hide()},n}(),t.Line=function(e){function n(e){if(this.hilight=r(this.hilight,this),this.onHoverOut=r(this.onHoverOut,this),this.onHoverMove=r(this.onHoverMove,this),this.onGridClick=r(this.onGridClick,this),!(this instanceof t.Line))return new t.Line(e);n.__super__.constructor.call(this,e)}return s(n,t.Grid),n.prototype.init=function(){if("always"!==this.options.hideHover)return this.hover=new t.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},n.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},n.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},n.prototype.calcPoints=function(){var e,t,n,i,o,r;for(r=[],n=0,i=(o=this.data).length;n<i;n++)(e=o[n])._x=this.transX(e.x),e._y=(function(){var n,i,o,r;for(r=[],n=0,i=(o=e.y).length;n<i;n++)r.push(null!=(t=o[n])?this.transY(t):t);return r}).call(this),r.push(e._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var n,i,o,r;for(r=[],n=0,i=(o=e._y).length;n<i;n++)null!=(t=o[n])&&r.push(t);return r}())));return r},n.prototype.hitTest=function(e){var t,n,i,o;if(0===this.data.length)return null;for(t=n=0,i=(o=this.data.slice(1)).length;n<i&&!(e<(o[t]._x+this.data[t]._x)/2);t=++n);return t},n.prototype.onGridClick=function(e,t){var n;return n=this.hitTest(e),this.fire("click",n,this.data[n].src,e,t)},n.prototype.onHoverMove=function(e,t){var n;return n=this.hitTest(e),this.displayHoverForRow(n)},n.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.displayHoverForRow(null)},n.prototype.displayHoverForRow=function(e){var t;return null!=e?((t=this.hover).update.apply(t,this.hoverContentForRow(e)),this.hilight(e)):(this.hover.hide(),this.hilight())},n.prototype.hoverContentForRow=function(e){var t,n,i,o,r,a,s;for(t="<div class='morris-hover-row-label'>"+(i=this.data[e]).label+"</div>",n=r=0,a=(s=i.y).length;r<a;n=++r)o=s[n],t+="<div class='morris-hover-point' style='color: "+this.colorFor(i,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(o)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(t=this.options.hoverCallback(e,this.options,t,i.src)),[t,i._x,i._ymax]},n.prototype.generatePaths=function(){var e,n,i,o;return this.paths=(function(){var r,a,s;for(s=[],n=r=0,a=this.options.ykeys.length;0<=a?r<a:r>a;n=0<=a?++r:--r)o="boolean"==typeof this.options.smooth?this.options.smooth:g.call(this.options.smooth,this.options.ykeys[n])>=0,e=(function(){var e,t,o,r;for(r=[],e=0,t=(o=this.data).length;e<t;e++)void 0!==(i=o[e])._y[n]&&r.push({x:i._x,y:i._y[n]});return r}).call(this),s.push(e.length>1?t.Line.createPath(e,o,this.bottom):null);return s}).call(this)},n.prototype.draw=function(){var e;if(!0!==(e=this.options.axes)&&"both"!==e&&"x"!==e||this.drawXAxis(),this.drawSeries(),!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)},n.prototype.drawXAxis=function(){var e,n,i,o,r,a,s,g,l,c,u=this;for(s=this.bottom+this.options.padding/2,r=null,o=null,e=function(e,t){var n,i,a,g,l;return l=(n=u.drawXAxisLabel(u.transX(t),s,e)).getBBox(),n.transform("r"+-u.options.xLabelAngle),i=n.getBBox(),n.transform("t0,"+i.height/2+"..."),0!==u.options.xLabelAngle&&(g=-.5*l.width*Math.cos(u.options.xLabelAngle*Math.PI/180),n.transform("t"+g+",0...")),i=n.getBBox(),(null==r||r>=i.x+i.width||null!=o&&o>=i.x)&&i.x>=0&&i.x+i.width<u.el.width()?(0!==u.options.xLabelAngle&&(a=1.25*u.options.gridTextSize/Math.sin(u.options.xLabelAngle*Math.PI/180),o=i.x-a),r=i.x-u.options.xLabelMargin):n.remove()},(i=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:t.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.data).length;e<t;e++)i.push([(a=n[e]).label,a.x]);return i}).call(this)).reverse(),c=[],g=0,l=i.length;g<l;g++)c.push(e((n=i[g])[0],n[1]));return c},n.prototype.drawSeries=function(){var e,t,n,i,o,r;for(this.seriesPoints=[],e=t=i=this.options.ykeys.length-1;i<=0?t<=0:t>=0;e=i<=0?++t:--t)this._drawLineFor(e);for(r=[],e=n=o=this.options.ykeys.length-1;o<=0?n<=0:n>=0;e=o<=0?++n:--n)r.push(this._drawPointFor(e));return r},n.prototype._drawPointFor=function(e){var t,n,i,o,r,a;for(this.seriesPoints[e]=[],a=[],i=0,o=(r=this.data).length;i<o;i++)t=null,null!=(n=r[i])._y[e]&&(t=this.drawLinePoint(n._x,n._y[e],this.colorFor(n,e,"point"),e)),a.push(this.seriesPoints[e].push(t));return a},n.prototype._drawLineFor=function(e){var t;if(null!==(t=this.paths[e]))return this.drawLinePath(t,this.colorFor(null,e,"line"),e)},n.createPath=function(e,n,i){var o,r,a,s,g,l,c,u,I;for(l="",n&&(a=t.Line.gradients(e)),c={y:null},s=u=0,I=e.length;u<I;s=++u)null!=(o=e[s]).y&&(null!=c.y?n?(r=a[s],l+="C"+(c.x+(g=(o.x-c.x)/4))+","+Math.min(i,c.y+g*a[s-1])+","+(o.x-g)+","+Math.min(i,o.y-g*r)+","+o.x+","+o.y):l+="L"+o.x+","+o.y:n&&null==a[s]||(l+="M"+o.x+","+o.y)),c=o;return l},n.gradients=function(e){var t,n,i,o,r,a,s,g;for(n=function(e,t){return(e.y-t.y)/(e.x-t.x)},g=[],i=a=0,s=e.length;a<s;i=++a)null!=(t=e[i]).y?(o=e[i+1]||{y:null},g.push(null!=(r=e[i-1]||{y:null}).y&&null!=o.y?n(r,o):null!=r.y?n(r,t):null!=o.y?n(t,o):null)):g.push(null);return g},n.prototype.hilight=function(e){var t,n,i,o,r;if(null!==this.prevHilight&&this.prevHilight!==e)for(t=n=0,o=this.seriesPoints.length-1;0<=o?n<=o:n>=o;t=0<=o?++n:--n)this.seriesPoints[t][this.prevHilight]&&this.seriesPoints[t][this.prevHilight].animate(this.pointShrinkSeries(t));if(null!==e&&this.prevHilight!==e)for(t=i=0,r=this.seriesPoints.length-1;0<=r?i<=r:i>=r;t=0<=r?++i:--i)this.seriesPoints[t][e]&&this.seriesPoints[t][e].animate(this.pointGrowSeries(t));return this.prevHilight=e},n.prototype.colorFor=function(e,t,n){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,e,t,n):"point"===n&&this.options.pointFillColors[t%this.options.pointFillColors.length]||this.options.lineColors[t%this.options.lineColors.length]},n.prototype.drawXAxisLabel=function(e,t,n){return this.raphael.text(e,t,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},n.prototype.drawLinePath=function(e,t,n){return this.raphael.path(e).attr("stroke",t).attr("stroke-width",this.lineWidthForSeries(n))},n.prototype.drawLinePoint=function(e,t,n,i){return this.raphael.circle(e,t,this.pointSizeForSeries(i)).attr("fill",n).attr("stroke-width",this.pointStrokeWidthForSeries(i)).attr("stroke",this.pointStrokeColorForSeries(i))},n.prototype.pointStrokeWidthForSeries=function(e){return this.options.pointStrokeWidths[e%this.options.pointStrokeWidths.length]},n.prototype.pointStrokeColorForSeries=function(e){return this.options.pointStrokeColors[e%this.options.pointStrokeColors.length]},n.prototype.lineWidthForSeries=function(e){return this.options.lineWidth instanceof Array?this.options.lineWidth[e%this.options.lineWidth.length]:this.options.lineWidth},n.prototype.pointSizeForSeries=function(e){return this.options.pointSize instanceof Array?this.options.pointSize[e%this.options.pointSize.length]:this.options.pointSize},n.prototype.pointGrowSeries=function(e){return Raphael.animation({r:this.pointSizeForSeries(e)+3},25,"linear")},n.prototype.pointShrinkSeries=function(e){return Raphael.animation({r:this.pointSizeForSeries(e)},25,"linear")},n}(),t.labelSeries=function(n,i,o,r,a){var s,g,l,c,u,I,d,C,h,A;if(l=200*(i-n)/o,g=new Date(n),void 0===(I=t.LABEL_SPECS[r]))for(C=0,h=(A=t.AUTO_LABEL_ORDER).length;C<h;C++)if(l>=(u=t.LABEL_SPECS[A[C]]).span){I=u;break}for(void 0===I&&(I=t.LABEL_SPECS.second),a&&(I=e.extend({},I,{fmt:a})),s=I.start(g),c=[];(d=s.getTime())<=i;)d>=n&&c.push([I.fmt(s),d]),I.incr(s);return c},n=function(e){return{span:60*e*1e3,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours())},fmt:function(e){return t.pad2(e.getHours())+":"+t.pad2(e.getMinutes())},incr:function(t){return t.setUTCMinutes(t.getUTCMinutes()+e)}}},i=function(e){return{span:1e3*e,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())},fmt:function(e){return t.pad2(e.getHours())+":"+t.pad2(e.getMinutes())+":"+t.pad2(e.getSeconds())},incr:function(t){return t.setUTCSeconds(t.getUTCSeconds()+e)}}},t.LABEL_SPECS={decade:{span:1728e8,start:function(e){return new Date(e.getFullYear()-e.getFullYear()%10,0,1)},fmt:function(e){return""+e.getFullYear()},incr:function(e){return e.setFullYear(e.getFullYear()+10)}},year:{span:1728e7,start:function(e){return new Date(e.getFullYear(),0,1)},fmt:function(e){return""+e.getFullYear()},incr:function(e){return e.setFullYear(e.getFullYear()+1)}},month:{span:24192e5,start:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},fmt:function(e){return e.getFullYear()+"-"+t.pad2(e.getMonth()+1)},incr:function(e){return e.setMonth(e.getMonth()+1)}},week:{span:6048e5,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},fmt:function(e){return e.getFullYear()+"-"+t.pad2(e.getMonth()+1)+"-"+t.pad2(e.getDate())},incr:function(e){return e.setDate(e.getDate()+7)}},day:{span:864e5,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},fmt:function(e){return e.getFullYear()+"-"+t.pad2(e.getMonth()+1)+"-"+t.pad2(e.getDate())},incr:function(e){return e.setDate(e.getDate()+1)}},hour:n(60),"30min":n(30),"15min":n(15),"10min":n(10),"5min":n(5),minute:n(1),"30sec":i(30),"15sec":i(15),"10sec":i(10),"5sec":i(5),second:i(1)},t.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],t.Area=function(n){var i;function o(n){var r;if(!(this instanceof t.Area))return new t.Area(n);r=e.extend({},i,n),this.cumulative=!r.behaveLikeLine,"auto"===r.fillOpacity&&(r.fillOpacity=r.behaveLikeLine?.8:1),o.__super__.constructor.call(this,r)}return s(o,t.Line),i={fillOpacity:"auto",behaveLikeLine:!1},o.prototype.calcPoints=function(){var e,t,n,i,o,r,a;for(a=[],i=0,o=(r=this.data).length;i<o;i++)(e=r[i])._x=this.transX(e.x),t=0,e._y=(function(){var i,o,r,a;for(a=[],i=0,o=(r=e.y).length;i<o;i++)n=r[i],a.push(this.transY(this.options.behaveLikeLine?n:t+=n||0));return a}).call(this),a.push(e._ymax=Math.max.apply(Math,e._y));return a},o.prototype.drawSeries=function(){var e,t,n,i,o,r,a,s;for(this.seriesPoints=[],s=[],n=0,i=(t=this.options.behaveLikeLine?(function(){r=[];for(var e=0,t=this.options.ykeys.length-1;0<=t?e<=t:e>=t;0<=t?e++:e--)r.push(e);return r}).apply(this):(function(){a=[];for(var e=o=this.options.ykeys.length-1;o<=0?e<=0:e>=0;o<=0?e++:e--)a.push(e);return a}).apply(this)).length;n<i;n++)this._drawFillFor(e=t[n]),this._drawLineFor(e),s.push(this._drawPointFor(e));return s},o.prototype._drawFillFor=function(e){var t;if(null!==(t=this.paths[e]))return t=t+"L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(t,this.fillForSeries(e))},o.prototype.fillForSeries=function(e){var t;return t=Raphael.rgb2hsl(this.colorFor(this.data[e],e,"line")),Raphael.hsl(t.h,this.options.behaveLikeLine?.9*t.s:.75*t.s,Math.min(.98,this.options.behaveLikeLine?1.2*t.l:1.25*t.l))},o.prototype.drawFilledPath=function(e,t){return this.raphael.path(e).attr("fill",t).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},o}(),t.Bar=function(n){function i(n){if(this.onHoverOut=r(this.onHoverOut,this),this.onHoverMove=r(this.onHoverMove,this),this.onGridClick=r(this.onGridClick,this),!(this instanceof t.Bar))return new t.Bar(n);i.__super__.constructor.call(this,e.extend({},n,{parseTime:!1}))}return s(i,t.Grid),i.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new t.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},i.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},i.prototype.calc=function(){var e;if(this.calcBars(),!1===this.options.hideHover)return(e=this.hover).update.apply(e,this.hoverContentForRow(this.data.length-1))},i.prototype.calcBars=function(){var e,t,n,i,o,r,a;for(a=[],e=i=0,o=(r=this.data).length;i<o;e=++i)(t=r[e])._x=this.left+this.width*(e+.5)/this.data.length,a.push(t._y=(function(){var e,i,o,r;for(r=[],e=0,i=(o=t.y).length;e<i;e++)r.push(null!=(n=o[e])?this.transY(n):null);return r}).call(this));return a},i.prototype.draw=function(){var e;return!0!==(e=this.options.axes)&&"both"!==e&&"x"!==e||this.drawXAxis(),this.drawSeries()},i.prototype.drawXAxis=function(){var e,t,n,i,o,r,a,s,g,l,c,u,I;for(l=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),a=null,r=null,I=[],e=c=0,u=this.data.length;0<=u?c<u:c>u;e=0<=u?++c:--c)g=(t=this.drawXAxisLabel((s=this.data[this.data.length-1-e])._x,l,s.label)).getBBox(),t.transform("r"+-this.options.xLabelAngle),n=t.getBBox(),t.transform("t0,"+n.height/2+"..."),0!==this.options.xLabelAngle&&(o=-.5*g.width*Math.cos(this.options.xLabelAngle*Math.PI/180),t.transform("t"+o+",0...")),(null==a||a>=n.x+n.width||null!=r&&r>=n.x)&&n.x>=0&&n.x+n.width<this.el.width()?(0!==this.options.xLabelAngle&&(i=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),r=n.x-i),I.push(a=n.x-this.options.xLabelMargin)):I.push(t.remove());return I},i.prototype.drawSeries=function(){var e,t,n,i,o,r,a,s,g,l,c,u,I,d;return e=((n=this.width/this.options.data.length)*this.options.barSizeRatio-this.options.barGap*((s=this.options.stacked?1:this.options.ykeys.length)-1))/s,this.options.barSize&&(e=Math.min(e,this.options.barSize)),a=(n-e*s-this.options.barGap*(s-1))/2,d=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=(function(){var s,C,h,A;for(A=[],i=s=0,C=(h=this.data).length;s<C;i=++s)g=h[i],o=0,A.push((function(){var s,C,h,A;for(A=[],l=s=0,C=(h=g._y).length;s<C;l=++s)null!==(I=h[l])?(d?(u=Math.min(I,d),t=Math.max(I,d)):(u=I,t=this.bottom),r=this.left+i*n+a,this.options.stacked||(r+=l*(e+this.options.barGap)),c=t-u,this.options.verticalGridCondition&&this.options.verticalGridCondition(g.x)&&this.drawBar(this.left+i*n,this.top,n,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(u-=o),this.drawBar(r,u,e,c,this.colorFor(g,l,"bar"),this.options.barOpacity,this.options.barRadius),A.push(o+=c)):A.push(null);return A}).call(this));return A}).call(this)},i.prototype.colorFor=function(e,t,n){return"function"==typeof this.options.barColors?this.options.barColors.call(this,{x:e.x,y:e.y[t],label:e.label},{index:t,key:this.options.ykeys[t],label:this.options.labels[t]},n):this.options.barColors[t%this.options.barColors.length]},i.prototype.hitTest=function(e){return 0===this.data.length?null:(e=Math.max(Math.min(e,this.right),this.left),Math.min(this.data.length-1,Math.floor((e-this.left)/(this.width/this.data.length))))},i.prototype.onGridClick=function(e,t){var n;return n=this.hitTest(e),this.fire("click",n,this.data[n].src,e,t)},i.prototype.onHoverMove=function(e,t){var n,i;return n=this.hitTest(e),(i=this.hover).update.apply(i,this.hoverContentForRow(n))},i.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.hover.hide()},i.prototype.hoverContentForRow=function(e){var t,n,i,o,r,a,s;for(t="<div class='morris-hover-row-label'>"+(i=this.data[e]).label+"</div>",n=r=0,a=(s=i.y).length;r<a;n=++r)o=s[n],t+="<div class='morris-hover-point' style='color: "+this.colorFor(i,n,"label")+"'>\n  "+this.options.labels[n]+":\n  "+this.yLabelFormat(o)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(t=this.options.hoverCallback(e,this.options,t,i.src)),[t,this.left+(e+.5)*this.width/this.data.length]},i.prototype.drawXAxisLabel=function(e,t,n){return this.raphael.text(e,t,n).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawBar=function(e,t,n,i,o,r,a){var s;return(0===(s=Math.max.apply(Math,a))||s>i?this.raphael.rect(e,t,n,i):this.raphael.path(this.roundedRect(e,t,n,i,a))).attr("fill",o).attr("fill-opacity",r).attr("stroke","none")},i.prototype.roundedRect=function(e,t,n,i,o){return null==o&&(o=[0,0,0,0]),["M",e,o[0]+t,"Q",e,t,e+o[0],t,"L",e+n-o[1],t,"Q",e+n,t,e+n,t+o[1],"L",e+n,t+i-o[2],"Q",e+n,t+i,e+n-o[2],t+i,"L",e+o[3],t+i,"Q",e,t+i,e,t+i-o[3],"Z"]},i}(),t.Donut=function(n){function i(n){this.resizeHandler=r(this.resizeHandler,this),this.select=r(this.select,this),this.click=r(this.click,this);var i=this;if(!(this instanceof t.Donut))return new t.Donut(n);if(this.options=e.extend({},this.defaults,n),this.el=e("string"==typeof n.element?document.getElementById(n.element):n.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==n.data&&0!==n.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&e(window).bind("resize",function(e){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.setData(n.data))}return s(i,t.EventEmitter),i.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:t.commas,resize:!1},i.prototype.redraw=function(){var e,n,i,o,r,a,s,g,l,c,u,I,d,C,h,A,f,m,p,b,B,v;for(this.raphael.clear(),n=this.el.width()/2,i=this.el.height()/2,I=(Math.min(n,i)-10)/3,u=0,d=0,A=(p=this.values).length;d<A;d++)u+=p[d];for(g=5/(2*I),e=1.9999*Math.PI-g*this.data.length,a=0,r=0,this.segments=[],o=C=0,f=(b=this.values).length;C<f;o=++C)(c=new t.DonutSegment(n,i,2*I,I,a,l=a+g+e*(b[o]/u),this.data[o].color||this.options.colors[r%this.options.colors.length],this.options.backgroundColor,r,this.raphael)).render(),this.segments.push(c),c.on("hover",this.select),c.on("click",this.click),a=l,r+=1;for(this.text1=this.drawEmptyDonutLabel(n,i-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(n,i+10,this.options.labelColor,14),s=Math.max.apply(Math,this.values),r=0,v=[],h=0,m=(B=this.values).length;h<m;h++){if(B[h]===s){this.select(r);break}v.push(r+=1)}return v},i.prototype.setData=function(e){return this.data=e,this.values=(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.data).length;e<t;e++)i.push(parseFloat(n[e].value));return i}).call(this),this.redraw()},i.prototype.click=function(e){return this.fire("click",e,this.data[e])},i.prototype.select=function(e){var t,n,i,o;for(n=0,i=(o=this.segments).length;n<i;n++)o[n].deselect();return this.segments[e].select(),this.setLabels((t=this.data[e]).label,this.options.formatter(t.value,t))},i.prototype.setLabels=function(e,t){var n,i,o,r,a,s,g,l;return r=1.8*(n=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3),o=n/2,i=n/3,this.text1.attr({text:e,transform:""}),a=this.text1.getBBox(),s=Math.min(r/a.width,o/a.height),this.text1.attr({transform:"S"+s+","+s+","+(a.x+a.width/2)+","+(a.y+a.height)}),this.text2.attr({text:t,transform:""}),g=this.text2.getBBox(),l=Math.min(r/g.width,i/g.height),this.text2.attr({transform:"S"+l+","+l+","+(g.x+g.width/2)+","+g.y})},i.prototype.drawEmptyDonutLabel=function(e,t,n,i,o){var r;return r=this.raphael.text(e,t,"").attr("font-size",i).attr("fill",n),null!=o&&r.attr("font-weight",o),r},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(),t.DonutSegment=function(e){function n(e,t,n,i,o,a,s,g,l,c){this.cx=e,this.cy=t,this.inner=n,this.outer=i,this.color=s,this.backgroundColor=g,this.index=l,this.raphael=c,this.deselect=r(this.deselect,this),this.select=r(this.select,this),this.sin_p0=Math.sin(o),this.cos_p0=Math.cos(o),this.sin_p1=Math.sin(a),this.cos_p1=Math.cos(a),this.is_long=a-o>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return s(n,t.EventEmitter),n.prototype.calcArcPoints=function(e){return[this.cx+e*this.sin_p0,this.cy+e*this.cos_p0,this.cx+e*this.sin_p1,this.cy+e*this.cos_p1]},n.prototype.calcSegment=function(e,t){var n,i,o,r,a,s;return n=(a=this.calcArcPoints(e))[0],o=a[1],i=a[2],r=a[3],s=this.calcArcPoints(t),"M"+n+","+o+"A"+e+","+e+",0,"+this.is_long+",0,"+i+","+r+"L"+s[2]+","+s[3]+"A"+t+","+t+",0,"+this.is_long+",1,"+s[0]+","+s[1]+"Z"},n.prototype.calcArc=function(e){var t;return"M"+(t=this.calcArcPoints(e))[0]+","+t[1]+"A"+e+","+e+",0,"+this.is_long+",0,"+t[2]+","+t[3]},n.prototype.render=function(){var e=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return e.fire("hover",e.index)},function(){return e.fire("click",e.index)})},n.prototype.drawDonutArc=function(e,t){return this.raphael.path(e).attr({stroke:t,"stroke-width":2,opacity:0})},n.prototype.drawDonutSegment=function(e,t,n,i,o){return this.raphael.path(e).attr({fill:t,stroke:n,"stroke-width":3}).hover(i).click(o)},n.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},n.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},n}()}).call(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t||(t=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n,t,t.document)}:e(jQuery,window,document)}(function(e,t,n,i){"use strict";var o,r,a,s,g=function(t){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new r(e?rt(this[o.iApiIndex]):this)},this.fnAddData=function(t,n){var o=this.api(!0),r=e.isArray(t)&&(e.isArray(t[0])||e.isPlainObject(t[0]))?o.rows.add(t):o.row.add(t);return(n===i||n)&&o.draw(),r.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),n=t.settings()[0],o=n.oScroll;e===i||e?t.draw(!1):""===o.sX&&""===o.sY||Oe(n)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===i||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,n){var o=this.api(!0),r=o.rows(e),a=r.settings()[0],s=a.aoData[r[0][0]];return r.remove(),t&&t.call(this,a,s),(n===i||n)&&o.draw(),s},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,n,o,r,a){var s=this.api(!0);null===t||t===i?s.search(e,n,o,a):s.column(t).search(e,n,o,a),s.draw()},this.fnGetData=function(e,t){var n=this.api(!0);if(e!==i){var o=e.nodeName?e.nodeName.toLowerCase():"";return t!==i||"td"==o||"th"==o?n.cell(e,t).data():n.row(e).data()||null}return n.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==i?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),n=e.nodeName.toUpperCase();if("TR"==n)return t.row(e).index();if("TD"==n||"TH"==n){var i=t.cell(e).index();return[i.row,i.columnVisible,i.column]}return null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){var n=this.api(!0).page(e);(t===i||t)&&n.draw(!1)},this.fnSetColumnVis=function(e,t,n){var o=this.api(!0).column(e).visible(t);(n===i||n)&&o.columns.adjust().draw()},this.fnSettings=function(){return rt(this[o.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,n,o,r){var a=this.api(!0);return n===i||null===n?a.row(t).data(e):a.cell(t,n).data(e),(r===i||r)&&a.columns.adjust(),(o===i||o)&&a.draw(),0},this.fnVersionCheck=o.fnVersionCheck;var n=this,a=t===i,s=this.length;for(var l in a&&(t={}),this.oApi=this.internal=o.internal,g.ext.internal)l&&(this[l]=Nt(l));return this.each(function(){var o,r=s>1?gt({},t,!0):t,l=0,c=this.getAttribute("id"),u=!1,I=g.defaults,d=e(this);if("table"==this.nodeName.toLowerCase()){X(I),Z(I.column),Q(I,I,!0),Q(I.column,I.column,!0),Q(I,e.extend(r,d.data()));var C=g.settings;for(l=0,o=C.length;l<o;l++){var h=C[l];if(h.nTable==this||h.nTHead&&h.nTHead.parentNode==this||h.nTFoot&&h.nTFoot.parentNode==this){if(a||(r.bRetrieve!==i?r.bRetrieve:I.bRetrieve))return h.oInstance;if(r.bDestroy!==i?r.bDestroy:I.bDestroy){h.oInstance.fnDestroy();break}return void at(h,0,"Cannot reinitialise DataTable",3)}if(h.sTableId==this.id){C.splice(l,1);break}}null!==c&&""!==c||(c="DataTables_Table_"+g.ext._unique++,this.id=c);var A=e.extend(!0,{},g.models.oSettings,{sDestroyWidth:d[0].style.width,sInstance:c,sTableId:c});A.nTable=this,A.oApi=n.internal,A.oInit=r,C.push(A),A.oInstance=1===n.length?n:d.dataTable(),X(r),w(r.oLanguage),r.aLengthMenu&&!r.iDisplayLength&&(r.iDisplayLength=e.isArray(r.aLengthMenu[0])?r.aLengthMenu[0][0]:r.aLengthMenu[0]),r=gt(e.extend(!0,{},I),r),st(A.oFeatures,r,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),st(A,r,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),st(A.oScroll,r,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),st(A.oLanguage,r,"fnInfoCallback"),ct(A,"aoDrawCallback",r.fnDrawCallback,"user"),ct(A,"aoServerParams",r.fnServerParams,"user"),ct(A,"aoStateSaveParams",r.fnStateSaveParams,"user"),ct(A,"aoStateLoadParams",r.fnStateLoadParams,"user"),ct(A,"aoStateLoaded",r.fnStateLoaded,"user"),ct(A,"aoRowCallback",r.fnRowCallback,"user"),ct(A,"aoRowCreatedCallback",r.fnCreatedRow,"user"),ct(A,"aoHeaderCallback",r.fnHeaderCallback,"user"),ct(A,"aoFooterCallback",r.fnFooterCallback,"user"),ct(A,"aoInitComplete",r.fnInitComplete,"user"),ct(A,"aoPreDrawCallback",r.fnPreDrawCallback,"user"),A.rowIdFn=P(r.rowId),N(A);var f=A.oClasses;if(e.extend(f,g.ext.classes,r.oClasses),d.addClass(f.sTable),A.iInitDisplayStart===i&&(A.iInitDisplayStart=r.iDisplayStart,A._iDisplayStart=r.iDisplayStart),null!==r.iDeferLoading){A.bDeferLoading=!0;var m=e.isArray(r.iDeferLoading);A._iRecordsDisplay=m?r.iDeferLoading[0]:r.iDeferLoading,A._iRecordsTotal=m?r.iDeferLoading[1]:r.iDeferLoading}var p=A.oLanguage;e.extend(!0,p,r.oLanguage),p.sUrl&&(e.ajax({dataType:"json",url:p.sUrl,success:function(t){w(t),Q(I.oLanguage,t),e.extend(!0,p,t),Ne(A)},error:function(){Ne(A)}}),u=!0),null===r.asStripeClasses&&(A.asStripeClasses=[f.sStripeOdd,f.sStripeEven]);var b=A.asStripeClasses,B=d.children("tbody").find("tr").eq(0);-1!==e.inArray(!0,e.map(b,function(e,t){return B.hasClass(e)}))&&(e("tbody tr",this).removeClass(b.join(" ")),A.asDestroyStripes=b.slice());var v,y=[],x=this.getElementsByTagName("thead");if(0!==x.length&&(ce(A.aoHeader,x[0]),y=ue(A)),null===r.aoColumns)for(v=[],l=0,o=y.length;l<o;l++)v.push(null);else v=r.aoColumns;for(l=0,o=v.length;l<o;l++)R(A,y?y[l]:null);if(L(A,r.aoColumnDefs,v,function(e,t){D(A,e,t)}),B.length){var F=function(e,t){return null!==e.getAttribute("data-"+t)?t:null};e(B[0]).children("th, td").each(function(e,t){var n=A.aoColumns[e];if(n.mData===e){var o=F(t,"sort")||F(t,"order"),r=F(t,"filter")||F(t,"search");null===o&&null===r||(n.mData={_:e+".display",sort:null!==o?e+".@data-"+o:i,type:null!==o?e+".@data-"+o:i,filter:null!==r?e+".@data-"+r:i},D(A,e))}})}var G=A.oFeatures,S=function(){if(r.aaSorting===i){var t=A.aaSorting;for(l=0,o=t.length;l<o;l++)t[l][1]=A.aoColumns[l].asSorting[0]}tt(A),G.bSort&&ct(A,"aoDrawCallback",function(){if(A.bSorted){var t=Pe(A),n={};e.each(t,function(e,t){n[t.src]=t.dir}),ut(A,null,"order",[A,t,n]),$e(A)}}),ct(A,"aoDrawCallback",function(){(A.bSorted||"ssp"===Ct(A)||G.bDeferRender)&&tt(A)},"sc");var n=d.children("caption").each(function(){this._captionSide=e(this).css("caption-side")}),a=d.children("thead");0===a.length&&(a=e("<thead/>").appendTo(d)),A.nTHead=a[0];var s=d.children("tbody");0===s.length&&(s=e("<tbody/>").appendTo(d)),A.nTBody=s[0];var g=d.children("tfoot");if(0===g.length&&n.length>0&&(""!==A.oScroll.sX||""!==A.oScroll.sY)&&(g=e("<tfoot/>").appendTo(d)),0===g.length||0===g.children().length?d.addClass(f.sNoFooter):g.length>0&&(A.nTFoot=g[0],ce(A.aoFooter,A.nTFoot)),r.aaData)for(l=0;l<r.aaData.length;l++)V(A,r.aaData[l]);else(A.bDeferLoading||"dom"==Ct(A))&&Y(A,e(A.nTBody).children("tr"));A.aiDisplay=A.aiDisplayMaster.slice(),A.bInitialised=!0,!1===u&&Ne(A)};r.bStateSave?(G.bStateSave=!0,ct(A,"aoDrawCallback",it,"state_save"),ot(A,0,S)):S()}else at(null,0,"Non-table node initialisation ("+this.nodeName+")",2)}),n=null,this},l={},c=/[\r\n]/g,u=/<.*?>/g,I=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,d=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),C=/[',$\xa3\u20ac\xa5%\u2009\u202F\u20BD\u20a9\u20BArfk\u0243\u039e]/gi,h=function(e){return!e||!0===e||"-"===e},A=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},f=function(e,t){return l[t]||(l[t]=new RegExp(ye(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(l[t],"."):e},m=function(e,t,n){var i="string"==typeof e;return!!h(e)||(t&&i&&(e=f(e,t)),n&&i&&(e=e.replace(C,"")),!isNaN(parseFloat(e))&&isFinite(e))},p=function(e,t,n){return!!h(e)||function(e){return h(e)||"string"==typeof e}(e)&&!!m(x(e),t,n)||null},b=function(e,t,n){var o=[],r=0,a=e.length;if(n!==i)for(;r<a;r++)e[r]&&e[r][t]&&o.push(e[r][t][n]);else for(;r<a;r++)e[r]&&o.push(e[r][t]);return o},B=function(e,t,n,o){var r=[],a=0,s=t.length;if(o!==i)for(;a<s;a++)e[t[a]][n]&&r.push(e[t[a]][n][o]);else for(;a<s;a++)r.push(e[t[a]][n]);return r},v=function(e,t){var n,o=[];t===i?(t=0,n=e):(n=t,t=e);for(var r=t;r<n;r++)o.push(r);return o},y=function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]&&t.push(e[n]);return t},x=function(e){return e.replace(u,"")},F=function(e){if(function(e){if(e.length<2)return!0;for(var t=e.slice().sort(),n=t[0],i=1,o=t.length;i<o;i++){if(t[i]===n)return!1;n=t[i]}return!0}(e))return e.slice();var t,n,i,o=[],r=e.length,a=0;e:for(n=0;n<r;n++){for(t=e[n],i=0;i<a;i++)if(o[i]===t)continue e;o.push(t),a++}return o};function G(t){var n,i,o={};e.each(t,function(e,r){(n=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(i=e.replace(n[0],n[2].toLowerCase()),o[i]=e,"o"===n[1]&&G(t[e]))}),t._hungarianMap=o}function Q(t,n,o){var r;t._hungarianMap||G(t),e.each(n,function(a,s){(r=t._hungarianMap[a])===i||!o&&n[r]!==i||("o"===r.charAt(0)?(n[r]||(n[r]={}),e.extend(!0,n[r],n[a]),Q(t[r],n[r],o)):n[r]=n[a])})}function w(e){var t=g.defaults.oLanguage,n=t.sDecimal;if(n&&Xt(n),e){var i=e.sZeroRecords;!e.sEmptyTable&&i&&"No data available in table"===t.sEmptyTable&&st(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&i&&"Loading..."===t.sLoadingRecords&&st(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands);var o=e.sDecimal;o&&n!==o&&Xt(o)}}g.util={throttle:function(e,t){var n,o,r=t!==i?t:200;return function(){var t=this,a=+new Date,s=arguments;n&&a<n+r?(clearTimeout(o),o=setTimeout(function(){n=i,e.apply(t,s)},r)):(n=a,e.apply(t,s))}},escapeRegex:function(e){return e.replace(d,"\\$1")}};var S=function(e,t,n){e[t]!==i&&(e[n]=e[t])};function X(e){S(e,"ordering","bSort"),S(e,"orderMulti","bSortMulti"),S(e,"orderClasses","bSortClasses"),S(e,"orderCellsTop","bSortCellsTop"),S(e,"order","aaSorting"),S(e,"orderFixed","aaSortingFixed"),S(e,"paging","bPaginate"),S(e,"pagingType","sPaginationType"),S(e,"pageLength","iDisplayLength"),S(e,"searching","bFilter"),"boolean"==typeof e.sScrollX&&(e.sScrollX=e.sScrollX?"100%":""),"boolean"==typeof e.scrollX&&(e.scrollX=e.scrollX?"100%":"");var t=e.aoSearchCols;if(t)for(var n=0,i=t.length;n<i;n++)t[n]&&Q(g.models.oSearch,t[n])}function Z(t){S(t,"orderable","bSortable"),S(t,"orderData","aDataSort"),S(t,"orderSequence","asSorting"),S(t,"orderDataType","sortDataType");var n=t.aDataSort;"number"!=typeof n||e.isArray(n)||(t.aDataSort=[n])}function N(n){if(!g.__browser){var i={};g.__browser=i;var o=e("<div/>").css({position:"fixed",top:0,left:-1*e(t).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(e("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(e("<div/>").css({width:"100%",height:10}))).appendTo("body"),r=o.children(),a=r.children();i.barWidth=r[0].offsetWidth-r[0].clientWidth,i.bScrollOversize=100===a[0].offsetWidth&&100!==r[0].clientWidth,i.bScrollbarLeft=1!==Math.round(a.offset().left),i.bBounding=!!o[0].getBoundingClientRect().width,o.remove()}e.extend(n.oBrowser,g.__browser),n.oScroll.iBarWidth=g.__browser.barWidth}function k(e,t,n,o,r,a){var s,g=o,l=!1;for(n!==i&&(s=n,l=!0);g!==r;)e.hasOwnProperty(g)&&(s=l?t(s,e[g],g,e):e[g],l=!0,g+=a);return s}function R(t,i){var o=g.defaults.column,r=t.aoColumns.length,a=e.extend({},g.models.oColumn,o,{nTh:i||n.createElement("th"),sTitle:o.sTitle?o.sTitle:i?i.innerHTML:"",aDataSort:o.aDataSort?o.aDataSort:[r],mData:o.mData?o.mData:r,idx:r});t.aoColumns.push(a);var s=t.aoPreSearchCols;s[r]=e.extend({},g.models.oSearch,s[r]),D(t,r,e(i).data())}function D(t,n,o){var r=t.aoColumns[n],a=t.oClasses,s=e(r.nTh);if(!r.sWidthOrig){r.sWidthOrig=s.attr("width")||null;var l=(s.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);l&&(r.sWidthOrig=l[1])}o!==i&&null!==o&&(Z(o),Q(g.defaults.column,o),o.mDataProp===i||o.mData||(o.mData=o.mDataProp),o.sType&&(r._sManualType=o.sType),o.className&&!o.sClass&&(o.sClass=o.className),o.sClass&&s.addClass(o.sClass),e.extend(r,o),st(r,o,"sWidth","sWidthOrig"),o.iDataSort!==i&&(r.aDataSort=[o.iDataSort]),st(r,o,"aDataSort"));var c=r.mData,u=P(c),I=r.mRender?P(r.mRender):null,d=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};r._bAttrSrc=e.isPlainObject(c)&&(d(c.sort)||d(c.type)||d(c.filter)),r._setter=null,r.fnGetData=function(e,t,n){var o=u(e,t,i,n);return I&&t?I(o,t,e,n):o},r.fnSetData=function(e,t,n){return j(c)(e,t,n)},"number"!=typeof c&&(t._rowReadObject=!0),t.oFeatures.bSort||(r.bSortable=!1,s.addClass(a.sSortableNone));var C=-1!==e.inArray("asc",r.asSorting),h=-1!==e.inArray("desc",r.asSorting);r.bSortable&&(C||h)?C&&!h?(r.sSortingClass=a.sSortableAsc,r.sSortingClassJUI=a.sSortJUIAscAllowed):!C&&h?(r.sSortingClass=a.sSortableDesc,r.sSortingClassJUI=a.sSortJUIDescAllowed):(r.sSortingClass=a.sSortable,r.sSortingClassJUI=a.sSortJUI):(r.sSortingClass=a.sSortableNone,r.sSortingClassJUI="")}function U(e){if(!1!==e.oFeatures.bAutoWidth){var t=e.aoColumns;Ye(e);for(var n=0,i=t.length;n<i;n++)t[n].nTh.style.width=t[n].sWidth}var o=e.oScroll;""===o.sY&&""===o.sX||Oe(e),ut(e,null,"column-sizing",[e])}function T(e,t){var n=H(e,"bVisible");return"number"==typeof n[t]?n[t]:null}function W(t,n){var i=H(t,"bVisible"),o=e.inArray(n,i);return-1!==o?o:null}function E(t){var n=0;return e.each(t.aoColumns,function(t,i){i.bVisible&&"none"!==e(i.nTh).css("display")&&n++}),n}function H(t,n){var i=[];return e.map(t.aoColumns,function(e,t){e[n]&&i.push(t)}),i}function O(e){var t,n,o,r,a,s,l,c,u,I=e.aoColumns,d=e.aoData,C=g.ext.type.detect;for(t=0,n=I.length;t<n;t++)if(u=[],!(l=I[t]).sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(o=0,r=C.length;o<r;o++){for(a=0,s=d.length;a<s&&(u[a]===i&&(u[a]=M(e,a,t,"type")),(c=C[o](u[a],e))||o===C.length-1)&&"html"!==c;a++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function L(t,n,o,r){var a,s,g,l,c,u,I,d=t.aoColumns;if(n)for(a=n.length-1;a>=0;a--){var C=(I=n[a]).targets!==i?I.targets:I.aTargets;for(e.isArray(C)||(C=[C]),g=0,l=C.length;g<l;g++)if("number"==typeof C[g]&&C[g]>=0){for(;d.length<=C[g];)R(t);r(C[g],I)}else if("number"==typeof C[g]&&C[g]<0)r(d.length+C[g],I);else if("string"==typeof C[g])for(c=0,u=d.length;c<u;c++)("_all"==C[g]||e(d[c].nTh).hasClass(C[g]))&&r(c,I)}if(o)for(a=0,s=o.length;a<s;a++)r(a,o[a])}function V(t,n,o,r){var a=t.aoData.length,s=e.extend(!0,{},g.models.oRow,{src:o?"dom":"data",idx:a});s._aData=n,t.aoData.push(s);for(var l=t.aoColumns,c=0,u=l.length;c<u;c++)l[c].sType=null;t.aiDisplayMaster.push(a);var I=t.rowIdFn(n);return I!==i&&(t.aIds[I]=s),!o&&t.oFeatures.bDeferRender||ie(t,a,o,r),a}function Y(t,n){var i;return n instanceof e||(n=e(n)),n.map(function(e,n){return i=ne(t,n),V(t,i.data,n,i.cells)})}function M(e,t,n,o){var r=e.iDraw,a=e.aoColumns[n],s=e.aoData[t]._aData,g=a.sDefaultContent,l=a.fnGetData(s,o,{settings:e,row:t,col:n});if(l===i)return e.iDrawError!=r&&null===g&&(at(e,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+t+", column "+n,4),e.iDrawError=r),g;if(l!==s&&null!==l||null===g||o===i){if("function"==typeof l)return l.call(s)}else l=g;return null===l&&"display"==o?"":l}function _(e,t,n,i){e.aoColumns[n].fnSetData(e.aoData[t]._aData,i,{settings:e,row:t,col:n})}var K=/\[.*?\]$/,z=/\(\)$/;function J(t){return e.map(t.match(/(\\.|[^\.])+/g)||[""],function(e){return e.replace(/\\\./g,".")})}function P(t){if(e.isPlainObject(t)){var n={};return e.each(t,function(e,t){t&&(n[e]=P(t))}),function(e,t,o,r){var a=n[t]||n._;return a!==i?a(e,t,o,r):e}}if(null===t)return function(e){return e};if("function"==typeof t)return function(e,n,i,o){return t(e,n,i,o)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,n){return e[t]};var o=function(t,n,r){var a,s,g,l;if(""!==r)for(var c=J(r),u=0,I=c.length;u<I;u++){if(a=c[u].match(K),s=c[u].match(z),a){if(c[u]=c[u].replace(K,""),""!==c[u]&&(t=t[c[u]]),g=[],c.splice(0,u+1),l=c.join("."),e.isArray(t))for(var d=0,C=t.length;d<C;d++)g.push(o(t[d],n,l));var h=a[0].substring(1,a[0].length-1);t=""===h?g:g.join(h);break}if(s)c[u]=c[u].replace(z,""),t=t[c[u]]();else{if(null===t||t[c[u]]===i)return i;t=t[c[u]]}}return t};return function(e,n){return o(e,n,t)}}function j(t){if(e.isPlainObject(t))return j(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,n,i){t(e,"set",n,i)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,n){e[t]=n};var n=function(t,o,r){for(var a,s,g,l,c,u=J(r),I=u[u.length-1],d=0,C=u.length-1;d<C;d++){if(s=u[d].match(K),g=u[d].match(z),s){if(u[d]=u[d].replace(K,""),t[u[d]]=[],(a=u.slice()).splice(0,d+1),c=a.join("."),e.isArray(o))for(var h=0,A=o.length;h<A;h++)n(l={},o[h],c),t[u[d]].push(l);else t[u[d]]=o;return}g&&(u[d]=u[d].replace(z,""),t=t[u[d]](o)),null!==t[u[d]]&&t[u[d]]!==i||(t[u[d]]={}),t=t[u[d]]}I.match(z)?t=t[I.replace(z,"")](o):t[I.replace(K,"")]=o};return function(e,i){return n(e,i,t)}}function $(e){return b(e.aoData,"_aData")}function q(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0,e.aIds={}}function ee(e,t,n){for(var o=-1,r=0,a=e.length;r<a;r++)e[r]==t?o=r:e[r]>t&&e[r]--;-1!=o&&n===i&&e.splice(o,1)}function te(e,t,n,o){var r,a,s=e.aoData[t],g=function(n,i){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=M(e,t,i,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==s.src)){var l=s.anCells;if(l)if(o!==i)g(l[o],o);else for(r=0,a=l.length;r<a;r++)g(l[r],r)}else s._aData=ne(e,s,o,o===i?i:s._aData).data;s._aSortData=null,s._aFilterData=null;var c=e.aoColumns;if(o!==i)c[o].sType=null;else{for(r=0,a=c.length;r<a;r++)c[r].sType=null;oe(e,s)}}function ne(t,n,o,r){var a,s,g,l=[],c=n.firstChild,u=0,I=t.aoColumns,d=t._rowReadObject;r=r!==i?r:d?{}:[];var C=function(e,t){if("string"==typeof e){var n=e.indexOf("@");if(-1!==n){var i=e.substring(n+1);j(e)(r,t.getAttribute(i))}}},h=function(t){o!==i&&o!==u||(s=I[u],g=e.trim(t.innerHTML),s&&s._bAttrSrc?(j(s.mData._)(r,g),C(s.mData.sort,t),C(s.mData.type,t),C(s.mData.filter,t)):d?(s._setter||(s._setter=j(s.mData)),s._setter(r,g)):r[u]=g),u++};if(c)for(;c;)"TD"!=(a=c.nodeName.toUpperCase())&&"TH"!=a||(h(c),l.push(c)),c=c.nextSibling;else for(var A=0,f=(l=n.anCells).length;A<f;A++)h(l[A]);var m=n.firstChild?n:n.nTr;if(m){var p=m.getAttribute("id");p&&j(t.rowId)(r,p)}return{data:r,cells:l}}function ie(t,i,o,r){var a,s,g,l,c,u=t.aoData[i],I=u._aData,d=[];if(null===u.nTr){for(a=o||n.createElement("tr"),u.nTr=a,u.anCells=d,a._DT_RowIndex=i,oe(t,u),l=0,c=t.aoColumns.length;l<c;l++)g=t.aoColumns[l],(s=o?r[l]:n.createElement(g.sCellType))._DT_CellIndex={row:i,column:l},d.push(s),o&&!g.mRender&&g.mData===l||e.isPlainObject(g.mData)&&g.mData._===l+".display"||(s.innerHTML=M(t,i,l,"display")),g.sClass&&(s.className+=" "+g.sClass),g.bVisible&&!o?a.appendChild(s):!g.bVisible&&o&&s.parentNode.removeChild(s),g.fnCreatedCell&&g.fnCreatedCell.call(t.oInstance,s,M(t,i,l),I,i,l);ut(t,"aoRowCreatedCallback",null,[a,I,i,d])}u.nTr.setAttribute("role","row")}function oe(t,n){var i=n.nTr,o=n._aData;if(i){var r=t.rowIdFn(o);if(r&&(i.id=r),o.DT_RowClass){var a=o.DT_RowClass.split(" ");n.__rowc=n.__rowc?F(n.__rowc.concat(a)):a,e(i).removeClass(n.__rowc.join(" ")).addClass(o.DT_RowClass)}o.DT_RowAttr&&e(i).attr(o.DT_RowAttr),o.DT_RowData&&e(i).data(o.DT_RowData)}}function re(t){var n,i,o,r,a,s=t.nTHead,g=t.nTFoot,l=0===e("th, td",s).length,c=t.oClasses,u=t.aoColumns;for(l&&(r=e("<tr/>").appendTo(s)),n=0,i=u.length;n<i;n++)o=e((a=u[n]).nTh).addClass(a.sClass),l&&o.appendTo(r),t.oFeatures.bSort&&(o.addClass(a.sSortingClass),!1!==a.bSortable&&(o.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),et(t,a.nTh,n))),a.sTitle!=o[0].innerHTML&&o.html(a.sTitle),dt(t,"header")(t,o,a,c);if(l&&ce(t.aoHeader,s),e(s).find(">tr").attr("role","row"),e(s).find(">tr>th, >tr>td").addClass(c.sHeaderTH),e(g).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==g){var I=t.aoFooter[0];for(n=0,i=I.length;n<i;n++)(a=u[n]).nTf=I[n].cell,a.sClass&&e(a.nTf).addClass(a.sClass)}}function ae(t,n,o){var r,a,s,g,l,c,u,I,d,C=[],h=[],A=t.aoColumns.length;if(n){for(o===i&&(o=!1),r=0,a=n.length;r<a;r++){for(C[r]=n[r].slice(),C[r].nTr=n[r].nTr,s=A-1;s>=0;s--)t.aoColumns[s].bVisible||o||C[r].splice(s,1);h.push([])}for(r=0,a=C.length;r<a;r++){if(u=C[r].nTr)for(;c=u.firstChild;)u.removeChild(c);for(s=0,g=C[r].length;s<g;s++)if(I=1,d=1,h[r][s]===i){for(u.appendChild(C[r][s].cell),h[r][s]=1;C[r+I]!==i&&C[r][s].cell==C[r+I][s].cell;)h[r+I][s]=1,I++;for(;C[r][s+d]!==i&&C[r][s].cell==C[r][s+d].cell;){for(l=0;l<I;l++)h[r+l][s+d]=1;d++}e(C[r][s].cell).attr("rowspan",I).attr("colspan",d)}}}}function se(t){var n=ut(t,"aoPreDrawCallback","preDraw",[t]);if(-1===e.inArray(!1,n)){var o=[],r=0,a=t.asStripeClasses,s=a.length,g=t.oLanguage,l=t.iInitDisplayStart,c="ssp"==Ct(t),u=t.aiDisplay;t.bDrawing=!0,l!==i&&-1!==l&&(t._iDisplayStart=c?l:l>=t.fnRecordsDisplay()?0:l,t.iInitDisplayStart=-1);var I=t._iDisplayStart,d=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,Ee(t,!1);else if(c){if(!t.bDestroying&&!de(t))return}else t.iDraw++;if(0!==u.length)for(var C=c?t.aoData.length:d,h=c?0:I;h<C;h++){var A=u[h],f=t.aoData[A];null===f.nTr&&ie(t,A);var m=f.nTr;if(0!==s){var p=a[r%s];f._sRowStripe!=p&&(e(m).removeClass(f._sRowStripe).addClass(p),f._sRowStripe=p)}ut(t,"aoRowCallback",null,[m,f._aData,r,h,A]),o.push(m),r++}else{var b=g.sZeroRecords;1==t.iDraw&&"ajax"==Ct(t)?b=g.sLoadingRecords:g.sEmptyTable&&0===t.fnRecordsTotal()&&(b=g.sEmptyTable),o[0]=e("<tr/>",{class:s?a[0]:""}).append(e("<td />",{valign:"top",colSpan:E(t),class:t.oClasses.sRowEmpty}).html(b))[0]}ut(t,"aoHeaderCallback","header",[e(t.nTHead).children("tr")[0],$(t),I,d,u]),ut(t,"aoFooterCallback","footer",[e(t.nTFoot).children("tr")[0],$(t),I,d,u]);var B=e(t.nTBody);B.children().detach(),B.append(e(o)),ut(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}else Ee(t,!1)}function ge(e,t){var n=e.oFeatures,i=n.bFilter;n.bSort&&je(e),i?me(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,se(e),e._drawHold=!1}function le(t){var n=t.oClasses,i=e(t.nTable),o=e("<div/>").insertBefore(i),r=t.oFeatures,a=e("<div/>",{id:t.sTableId+"_wrapper",class:n.sWrapper+(t.nTFoot?"":" "+n.sNoFooter)});t.nHolding=o[0],t.nTableWrapper=a[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var s,l,c,u,I,d,C=t.sDom.split(""),h=0;h<C.length;h++){if(s=null,"<"==(l=C[h])){if(c=e("<div/>")[0],"'"==(u=C[h+1])||'"'==u){for(I="",d=2;C[h+d]!=u;)I+=C[h+d],d++;if("H"==I?I=n.sJUIHeader:"F"==I&&(I=n.sJUIFooter),-1!=I.indexOf(".")){var A=I.split(".");c.id=A[0].substr(1,A[0].length-1),c.className=A[1]}else"#"==I.charAt(0)?c.id=I.substr(1,I.length-1):c.className=I;h+=d}a.append(c),a=e(c)}else if(">"==l)a=a.parent();else if("l"==l&&r.bPaginate&&r.bLengthChange)s=De(t);else if("f"==l&&r.bFilter)s=fe(t);else if("r"==l&&r.bProcessing)s=We(t);else if("t"==l)s=He(t);else if("i"==l&&r.bInfo)s=Se(t);else if("p"==l&&r.bPaginate)s=Ue(t);else if(0!==g.ext.feature.length)for(var f=g.ext.feature,m=0,p=f.length;m<p;m++)if(l==f[m].cFeature){s=f[m].fnInit(t);break}if(s){var b=t.aanFeatures;b[l]||(b[l]=[]),b[l].push(s),a.append(s)}}o.replaceWith(a),t.nHolding=null}function ce(t,n){var i,o,r,a,s,g,l,c,u,I,d=e(n).children("tr"),C=function(e,t,n){for(var i=e[t];i[n];)n++;return n};for(t.splice(0,t.length),r=0,g=d.length;r<g;r++)t.push([]);for(r=0,g=d.length;r<g;r++)for(o=(i=d[r]).firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(c=(c=1*o.getAttribute("colspan"))&&0!==c&&1!==c?c:1,u=(u=1*o.getAttribute("rowspan"))&&0!==u&&1!==u?u:1,l=C(t,r,0),I=1===c,s=0;s<c;s++)for(a=0;a<u;a++)t[r+a][l+s]={cell:o,unique:I},t[r+a].nTr=i;o=o.nextSibling}}function ue(e,t,n){var i=[];n||(n=e.aoHeader,t&&ce(n=[],t));for(var o=0,r=n.length;o<r;o++)for(var a=0,s=n[o].length;a<s;a++)!n[o][a].unique||i[a]&&e.bSortCellsTop||(i[a]=n[o][a].cell);return i}function Ie(t,n,i){if(ut(t,"aoServerParams","serverParams",[n]),n&&e.isArray(n)){var o={},r=/(.*?)\[\]$/;e.each(n,function(e,t){var n=t.name.match(r);if(n){var i=n[0];o[i]||(o[i]=[]),o[i].push(t.value)}else o[t.name]=t.value}),n=o}var a,s=t.ajax,g=t.oInstance,l=function(e){ut(t,null,"xhr",[t,e,t.jqXHR]),i(e)};if(e.isPlainObject(s)&&s.data){var c="function"==typeof(a=s.data)?a(n,t):a;n="function"==typeof a&&c?c:e.extend(!0,n,c),delete s.data}var u={data:n,success:function(e){var n=e.error||e.sError;n&&at(t,0,n),t.json=e,l(e)},dataType:"json",cache:!1,type:t.sServerMethod,error:function(n,i,o){var r=ut(t,null,"xhr",[t,null,t.jqXHR]);-1===e.inArray(!0,r)&&("parsererror"==i?at(t,0,"Invalid JSON response",1):4===n.readyState&&at(t,0,"Ajax error",7)),Ee(t,!1)}};t.oAjaxData=n,ut(t,null,"preXhr",[t,n]),t.fnServerData?t.fnServerData.call(g,t.sAjaxSource,e.map(n,function(e,t){return{name:t,value:e}}),l,t):t.sAjaxSource||"string"==typeof s?t.jqXHR=e.ajax(e.extend(u,{url:s||t.sAjaxSource})):"function"==typeof s?t.jqXHR=s.call(g,n,l,t):(t.jqXHR=e.ajax(e.extend(u,s)),s.data=a)}function de(e){return!e.bAjaxDataGet||(e.iDraw++,Ee(e,!0),Ie(e,Ce(e),function(t){he(e,t)}),!1)}function Ce(t){var n,i,o,r,a=t.aoColumns,s=a.length,l=t.oFeatures,c=t.oPreviousSearch,u=t.aoPreSearchCols,I=[],d=Pe(t),C=t._iDisplayStart,h=!1!==l.bPaginate?t._iDisplayLength:-1,A=function(e,t){I.push({name:e,value:t})};A("sEcho",t.iDraw),A("iColumns",s),A("sColumns",b(a,"sName").join(",")),A("iDisplayStart",C),A("iDisplayLength",h);var f={draw:t.iDraw,columns:[],order:[],start:C,length:h,search:{value:c.sSearch,regex:c.bRegex}};for(n=0;n<s;n++)f.columns.push({data:i="function"==typeof(o=a[n]).mData?"function":o.mData,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:(r=u[n]).sSearch,regex:r.bRegex}}),A("mDataProp_"+n,i),l.bFilter&&(A("sSearch_"+n,r.sSearch),A("bRegex_"+n,r.bRegex),A("bSearchable_"+n,o.bSearchable)),l.bSort&&A("bSortable_"+n,o.bSortable);l.bFilter&&(A("sSearch",c.sSearch),A("bRegex",c.bRegex)),l.bSort&&(e.each(d,function(e,t){f.order.push({column:t.col,dir:t.dir}),A("iSortCol_"+e,t.col),A("sSortDir_"+e,t.dir)}),A("iSortingCols",d.length));var m=g.ext.legacy.ajax;return null===m?t.sAjaxSource?I:f:m?I:f}function he(e,t){var n=function(e,n){return t[e]!==i?t[e]:t[n]},o=Ae(e,t),r=n("sEcho","draw"),a=n("iTotalRecords","recordsTotal"),s=n("iTotalDisplayRecords","recordsFiltered");if(r){if(1*r<e.iDraw)return;e.iDraw=1*r}q(e),e._iRecordsTotal=parseInt(a,10),e._iRecordsDisplay=parseInt(s,10);for(var g=0,l=o.length;g<l;g++)V(e,o[g]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,se(e),e._bInitComplete||ke(e,t),e.bAjaxDataGet=!0,Ee(e,!1)}function Ae(t,n){var o=e.isPlainObject(t.ajax)&&t.ajax.dataSrc!==i?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===o?n.aaData||n[o]:""!==o?P(o)(n):n}function fe(t){var i=t.oClasses,o=t.sTableId,r=t.oLanguage,a=t.oPreviousSearch,s=t.aanFeatures,g='<input type="search" class="'+i.sFilterInput+'"/>',l=r.sSearch;l=l.match(/_INPUT_/)?l.replace("_INPUT_",g):l+g;var c=e("<div/>",{id:s.f?null:o+"_filter",class:i.sFilter}).append(e("<label/>").append(l)),u=function(){var e=this.value?this.value:"";e!=a.sSearch&&(me(t,{sSearch:e,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),t._iDisplayStart=0,se(t))},I=null!==t.searchDelay?t.searchDelay:"ssp"===Ct(t)?400:0,d=e("input",c).val(a.sSearch).attr("placeholder",r.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",I?Me(u,I):u).on("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",o);return e(t.nTable).on("search.dt.DT",function(e,i){if(t===i)try{d[0]!==n.activeElement&&d.val(a.sSearch)}catch(o){}}),c[0]}function me(e,t,n){var o=e.oPreviousSearch,r=e.aoPreSearchCols,a=function(e){o.sSearch=e.sSearch,o.bRegex=e.bRegex,o.bSmart=e.bSmart,o.bCaseInsensitive=e.bCaseInsensitive},s=function(e){return e.bEscapeRegex!==i?!e.bEscapeRegex:e.bRegex};if(O(e),"ssp"!=Ct(e)){Be(e,t.sSearch,n,s(t),t.bSmart,t.bCaseInsensitive),a(t);for(var g=0;g<r.length;g++)be(e,r[g].sSearch,g,s(r[g]),r[g].bSmart,r[g].bCaseInsensitive);pe(e)}else a(t);e.bFiltered=!0,ut(e,null,"search",[e])}function pe(t){for(var n,i,o=g.ext.search,r=t.aiDisplay,a=0,s=o.length;a<s;a++){for(var l=[],c=0,u=r.length;c<u;c++)o[a](t,(n=t.aoData[i=r[c]])._aFilterData,i,n._aData,c)&&l.push(i);r.length=0,e.merge(r,l)}}function be(e,t,n,i,o,r){if(""!==t){for(var a=[],s=e.aiDisplay,g=ve(t,i,o,r),l=0;l<s.length;l++)g.test(e.aoData[s[l]]._aFilterData[n])&&a.push(s[l]);e.aiDisplay=a}}function Be(e,t,n,i,o,r){var a,s,l,c=ve(t,i,o,r),u=e.oPreviousSearch.sSearch,I=e.aiDisplayMaster,d=[];if(0!==g.ext.search.length&&(n=!0),s=Ge(e),t.length<=0)e.aiDisplay=I.slice();else{for((s||n||u.length>t.length||0!==t.indexOf(u)||e.bSorted)&&(e.aiDisplay=I.slice()),a=e.aiDisplay,l=0;l<a.length;l++)c.test(e.aoData[a[l]]._sFilterRow)&&d.push(a[l]);e.aiDisplay=d}}function ve(t,n,i,o){if(t=n?t:ye(t),i){var r=e.map(t.match(/"[^"]+"|[^ ]+/g)||[""],function(e){if('"'===e.charAt(0)){var t=e.match(/^"(.*)"$/);e=t?t[1]:e}return e.replace('"',"")});t="^(?=.*?"+r.join(")(?=.*?")+").*$"}return new RegExp(t,o?"i":"")}var ye=g.util.escapeRegex,xe=e("<div>")[0],Fe=xe.textContent!==i;function Ge(e){var t,n,i,o,r,a,s,l,c=e.aoColumns,u=g.ext.type.search,I=!1;for(n=0,o=e.aoData.length;n<o;n++)if(!(l=e.aoData[n])._aFilterData){for(a=[],i=0,r=c.length;i<r;i++)(t=c[i]).bSearchable?(s=M(e,n,i,"filter"),u[t.sType]&&(s=u[t.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(xe.innerHTML=s,s=Fe?xe.textContent:xe.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),a.push(s);l._aFilterData=a,l._sFilterRow=a.join("  "),I=!0}return I}function Qe(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function we(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function Se(t){var n=t.sTableId,i=t.aanFeatures.i,o=e("<div/>",{class:t.oClasses.sInfo,id:i?null:n+"_info"});return i||(t.aoDrawCallback.push({fn:Xe,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),e(t.nTable).attr("aria-describedby",n+"_info")),o[0]}function Xe(t){var n=t.aanFeatures.i;if(0!==n.length){var i=t.oLanguage,o=t._iDisplayStart+1,r=t.fnDisplayEnd(),a=t.fnRecordsTotal(),s=t.fnRecordsDisplay(),g=s?i.sInfo:i.sInfoEmpty;s!==a&&(g+=" "+i.sInfoFiltered),g=Ze(t,g+=i.sInfoPostFix);var l=i.fnInfoCallback;null!==l&&(g=l.call(t.oInstance,t,o,r,a,s,g)),e(n).html(g)}}function Ze(e,t){var n=e.fnFormatNumber,i=e._iDisplayStart+1,o=e._iDisplayLength,r=e.fnRecordsDisplay(),a=-1===o;return t.replace(/_START_/g,n.call(e,i)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,r)).replace(/_PAGE_/g,n.call(e,a?1:Math.ceil(i/o))).replace(/_PAGES_/g,n.call(e,a?1:Math.ceil(r/o)))}function Ne(e){var t,n,i,o=e.iInitDisplayStart,r=e.aoColumns,a=e.oFeatures,s=e.bDeferLoading;if(e.bInitialised){for(le(e),re(e),ae(e,e.aoHeader),ae(e,e.aoFooter),Ee(e,!0),a.bAutoWidth&&Ye(e),t=0,n=r.length;t<n;t++)(i=r[t]).sWidth&&(i.nTh.style.width=Je(i.sWidth));ut(e,null,"preInit",[e]),ge(e);var g=Ct(e);("ssp"!=g||s)&&("ajax"==g?Ie(e,[],function(n){var i=Ae(e,n);for(t=0;t<i.length;t++)V(e,i[t]);e.iInitDisplayStart=o,ge(e),Ee(e,!1),ke(e,n)}):(Ee(e,!1),ke(e)))}else setTimeout(function(){Ne(e)},200)}function ke(e,t){e._bInitComplete=!0,(t||e.oInit.aaData)&&U(e),ut(e,null,"plugin-init",[e,t]),ut(e,"aoInitComplete","init",[e,t])}function Re(e,t){var n=parseInt(t,10);e._iDisplayLength=n,It(e),ut(e,null,"length",[e,n])}function De(t){for(var n=t.oClasses,i=t.sTableId,o=t.aLengthMenu,r=e.isArray(o[0]),a=r?o[0]:o,s=r?o[1]:o,g=e("<select/>",{name:i+"_length","aria-controls":i,class:n.sLengthSelect}),l=0,c=a.length;l<c;l++)g[0][l]=new Option("number"==typeof s[l]?t.fnFormatNumber(s[l]):s[l],a[l]);var u=e("<div><label/></div>").addClass(n.sLength);return t.aanFeatures.l||(u[0].id=i+"_length"),u.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",g[0].outerHTML)),e("select",u).val(t._iDisplayLength).on("change.DT",function(n){Re(t,e(this).val()),se(t)}),e(t.nTable).on("length.dt.DT",function(n,i,o){t===i&&e("select",u).val(o)}),u[0]}function Ue(t){var n=t.sPaginationType,i=g.ext.pager[n],o="function"==typeof i,r=function(e){se(e)},a=e("<div/>").addClass(t.oClasses.sPaging+n)[0],s=t.aanFeatures;return o||i.fnInit(t,a,r),s.p||(a.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(e){if(o){var t,n,a=e._iDisplayStart,g=e._iDisplayLength,l=e.fnRecordsDisplay(),c=-1===g,u=c?0:Math.ceil(a/g),I=c?1:Math.ceil(l/g),d=i(u,I);for(t=0,n=s.p.length;t<n;t++)dt(e,"pageButton")(e,s.p[t],t,d,u,I)}else i.fnUpdate(e,r)},sName:"pagination"})),a}function Te(e,t,n){var i=e._iDisplayStart,o=e._iDisplayLength,r=e.fnRecordsDisplay();0===r||-1===o?i=0:"number"==typeof t?(i=t*o)>r&&(i=0):"first"==t?i=0:"previous"==t?(i=o>=0?i-o:0)<0&&(i=0):"next"==t?i+o<r&&(i+=o):"last"==t?i=Math.floor((r-1)/o)*o:at(e,0,"Unknown paging action: "+t,5);var a=e._iDisplayStart!==i;return e._iDisplayStart=i,a&&(ut(e,null,"page",[e]),n&&se(e)),a}function We(t){return e("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing",class:t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function Ee(t,n){t.oFeatures.bProcessing&&e(t.aanFeatures.r).css("display",n?"block":"none"),ut(t,null,"processing",[t,n])}function He(t){var n=e(t.nTable);n.attr("role","grid");var i=t.oScroll;if(""===i.sX&&""===i.sY)return t.nTable;var o=i.sX,r=i.sY,a=t.oClasses,s=n.children("caption"),g=s.length?s[0]._captionSide:null,l=e(n[0].cloneNode(!1)),c=e(n[0].cloneNode(!1)),u=n.children("tfoot"),I="<div/>",d=function(e){return e?Je(e):null};u.length||(u=null);var C=e(I,{class:a.sScrollWrapper}).append(e(I,{class:a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:o?d(o):"100%"}).append(e(I,{class:a.sScrollHeadInner}).css({"box-sizing":"content-box",width:i.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===g?s:null).append(n.children("thead"))))).append(e(I,{class:a.sScrollBody}).css({position:"relative",overflow:"auto",width:d(o)}).append(n));u&&C.append(e(I,{class:a.sScrollFoot}).css({overflow:"hidden",border:0,width:o?d(o):"100%"}).append(e(I,{class:a.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===g?s:null).append(n.children("tfoot")))));var h=C.children(),A=h[0],f=h[1],m=u?h[2]:null;return o&&e(f).on("scroll.DT",function(e){var t=this.scrollLeft;A.scrollLeft=t,u&&(m.scrollLeft=t)}),e(f).css(r&&i.bCollapse?"max-height":"height",r),t.nScrollHead=A,t.nScrollBody=f,t.nScrollFoot=m,t.aoDrawCallback.push({fn:Oe,sName:"scrolling"}),C[0]}function Oe(t){var n,o,r,a,s,g,l,c,u,I=t.oScroll,d=I.sX,C=I.sXInner,h=I.sY,A=I.iBarWidth,f=e(t.nScrollHead),m=f[0].style,p=f.children("div"),B=p[0].style,v=p.children("table"),y=t.nScrollBody,x=e(y),F=y.style,G=e(t.nScrollFoot).children("div"),Q=G.children("table"),w=e(t.nTHead),S=e(t.nTable),X=S[0],Z=X.style,N=t.nTFoot?e(t.nTFoot):null,k=t.oBrowser,R=k.bScrollOversize,D=b(t.aoColumns,"nTh"),W=[],E=[],H=[],O=[],L=function(e){var t=e.style;t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0},V=y.scrollHeight>y.clientHeight;if(t.scrollBarVis!==V&&t.scrollBarVis!==i)return t.scrollBarVis=V,void U(t);t.scrollBarVis=V,S.children("thead, tfoot").remove(),N&&(g=N.clone().prependTo(S),o=N.find("tr"),a=g.find("tr")),s=w.clone().prependTo(S),n=w.find("tr"),r=s.find("tr"),s.find("th, td").removeAttr("tabindex"),d||(F.width="100%",f[0].style.width="100%"),e.each(ue(t,s),function(e,n){l=T(t,e),n.style.width=t.aoColumns[l].sWidth}),N&&Le(function(e){e.style.width=""},a),u=S.outerWidth(),""===d?(Z.width="100%",R&&(S.find("tbody").height()>y.offsetHeight||"scroll"==x.css("overflow-y"))&&(Z.width=Je(S.outerWidth()-A)),u=S.outerWidth()):""!==C&&(Z.width=Je(C),u=S.outerWidth()),Le(L,r),Le(function(t){H.push(t.innerHTML),W.push(Je(e(t).css("width")))},r),Le(function(t,n){-1!==e.inArray(t,D)&&(t.style.width=W[n])},n),e(r).height(0),N&&(Le(L,a),Le(function(t){O.push(t.innerHTML),E.push(Je(e(t).css("width")))},a),Le(function(e,t){e.style.width=E[t]},o),e(a).height(0)),Le(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+H[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=W[t]},r),N&&Le(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+O[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=E[t]},a),S.outerWidth()<u?(c=y.scrollHeight>y.offsetHeight||"scroll"==x.css("overflow-y")?u+A:u,R&&(y.scrollHeight>y.offsetHeight||"scroll"==x.css("overflow-y"))&&(Z.width=Je(c-A)),""!==d&&""===C||at(t,1,"Possible column misalignment",6)):c="100%",F.width=Je(c),m.width=Je(c),N&&(t.nScrollFoot.style.width=Je(c)),h||R&&(F.height=Je(X.offsetHeight+A));var Y=S.outerWidth();v[0].style.width=Je(Y),B.width=Je(Y);var M=S.height()>y.clientHeight||"scroll"==x.css("overflow-y"),_="padding"+(k.bScrollbarLeft?"Left":"Right");B[_]=M?A+"px":"0px",N&&(Q[0].style.width=Je(Y),G[0].style.width=Je(Y),G[0].style[_]=M?A+"px":"0px"),S.children("colgroup").insertBefore(S.children("thead")),x.scroll(),!t.bSorted&&!t.bFiltered||t._drawHold||(y.scrollTop=0)}function Le(e,t,n){for(var i,o,r=0,a=0,s=t.length;a<s;){for(i=t[a].firstChild,o=n?n[a].firstChild:null;i;)1===i.nodeType&&(n?e(i,o,r):e(i,r),r++),i=i.nextSibling,o=n?o.nextSibling:null;a++}}var Ve=/<.*?>/g;function Ye(n){var i,o,r,a=n.nTable,s=n.aoColumns,g=n.oScroll,l=g.sY,c=g.sX,u=g.sXInner,I=s.length,d=H(n,"bVisible"),C=e("th",n.nTHead),h=a.getAttribute("width"),A=a.parentNode,f=!1,m=n.oBrowser,p=m.bScrollOversize,b=a.style.width;for(b&&-1!==b.indexOf("%")&&(h=b),i=0;i<d.length;i++)null!==(o=s[d[i]]).sWidth&&(o.sWidth=_e(o.sWidthOrig,A),f=!0);if(p||!f&&!c&&!l&&I==E(n)&&I==C.length)for(i=0;i<I;i++){var B=T(n,i);null!==B&&(s[B].sWidth=Je(C.eq(i).width()))}else{var v=e(a).clone().css("visibility","hidden").removeAttr("id");v.find("tbody tr").remove();var y=e("<tr/>").appendTo(v.find("tbody"));for(v.find("thead, tfoot").remove(),v.append(e(n.nTHead).clone()).append(e(n.nTFoot).clone()),v.find("tfoot th, tfoot td").css("width",""),C=ue(n,v.find("thead")[0]),i=0;i<d.length;i++)C[i].style.width=null!==(o=s[d[i]]).sWidthOrig&&""!==o.sWidthOrig?Je(o.sWidthOrig):"",o.sWidthOrig&&c&&e(C[i]).append(e("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(i=0;i<d.length;i++)o=s[r=d[i]],e(Ke(n,r)).clone(!1).append(o.sContentPadding).appendTo(y);e("[name]",v).removeAttr("name");var x=e("<div/>").css(c||l?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(v).appendTo(A);c&&u?v.width(u):c?(v.css("width","auto"),v.removeAttr("width"),v.width()<A.clientWidth&&h&&v.width(A.clientWidth)):l?v.width(A.clientWidth):h&&v.width(h);var F=0;for(i=0;i<d.length;i++){var G=e(C[i]),Q=G.outerWidth()-G.width(),w=m.bBounding?Math.ceil(C[i].getBoundingClientRect().width):G.outerWidth();F+=w,s[d[i]].sWidth=Je(w-Q)}a.style.width=Je(F),x.remove()}if(h&&(a.style.width=Je(h)),(h||c)&&!n._reszEvt){var S=function(){e(t).on("resize.DT-"+n.sInstance,Me(function(){U(n)}))};p?setTimeout(S,1e3):S(),n._reszEvt=!0}}var Me=g.util.throttle;function _e(t,i){if(!t)return 0;var o=e("<div/>").css("width",Je(t)).appendTo(i||n.body),r=o[0].offsetWidth;return o.remove(),r}function Ke(t,n){var i=ze(t,n);if(i<0)return null;var o=t.aoData[i];return o.nTr?o.anCells[n]:e("<td/>").html(M(t,i,n,"display"))[0]}function ze(e,t){for(var n,i=-1,o=-1,r=0,a=e.aoData.length;r<a;r++)(n=(n=(n=M(e,r,t,"display")+"").replace(Ve,"")).replace(/&nbsp;/g," ")).length>i&&(i=n.length,o=r);return o}function Je(e){return null===e?"0px":"number"==typeof e?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function Pe(t){var n,o,r,a,s,l,c,u=[],I=t.aoColumns,d=t.aaSortingFixed,C=e.isPlainObject(d),h=[],A=function(t){t.length&&!e.isArray(t[0])?h.push(t):e.merge(h,t)};for(e.isArray(d)&&A(d),C&&d.pre&&A(d.pre),A(t.aaSorting),C&&d.post&&A(d.post),n=0;n<h.length;n++)for(o=0,r=(a=I[c=h[n][0]].aDataSort).length;o<r;o++)l=I[s=a[o]].sType||"string",h[n]._idx===i&&(h[n]._idx=e.inArray(h[n][1],I[s].asSorting)),u.push({src:c,col:s,dir:h[n][1],index:h[n]._idx,type:l,formatter:g.ext.type.order[l+"-pre"]});return u}function je(e){var t,n,i,o,r,a=[],s=g.ext.type.order,l=e.aoData,c=0,u=e.aiDisplayMaster;for(O(e),t=0,n=(r=Pe(e)).length;t<n;t++)(o=r[t]).formatter&&c++,nt(e,o.col);if("ssp"!=Ct(e)&&0!==r.length){for(t=0,i=u.length;t<i;t++)a[u[t]]=t;u.sort(c===r.length?function(e,t){var n,i,o,s,g,c=r.length,u=l[e]._aSortData,I=l[t]._aSortData;for(o=0;o<c;o++)if(0!=(s=(n=u[(g=r[o]).col])<(i=I[g.col])?-1:n>i?1:0))return"asc"===g.dir?s:-s;return(n=a[e])<(i=a[t])?-1:n>i?1:0}:function(e,t){var n,i,o,g,c,u=r.length,I=l[e]._aSortData,d=l[t]._aSortData;for(o=0;o<u;o++)if(0!==(g=(s[(c=r[o]).type+"-"+c.dir]||s["string-"+c.dir])(n=I[c.col],i=d[c.col])))return g;return(n=a[e])<(i=a[t])?-1:n>i?1:0})}e.bSorted=!0}function $e(e){for(var t,n,i=e.aoColumns,o=Pe(e),r=e.oLanguage.oAria,a=0,s=i.length;a<s;a++){var g=i[a],l=g.asSorting,c=g.sTitle.replace(/<.*?>/g,""),u=g.nTh;u.removeAttribute("aria-sort"),g.bSortable?(o.length>0&&o[0].col==a?(u.setAttribute("aria-sort","asc"==o[0].dir?"ascending":"descending"),n=l[o[0].index+1]||l[0]):n=l[0],t=c+("asc"===n?r.sSortAscending:r.sSortDescending)):t=c,u.setAttribute("aria-label",t)}}function qe(t,n,o,r){var a,s=t.aaSorting,g=t.aoColumns[n].asSorting,l=function(t,n){var o=t._idx;return o===i&&(o=e.inArray(t[1],g)),o+1<g.length?o+1:n?null:0};if("number"==typeof s[0]&&(s=t.aaSorting=[s]),o&&t.oFeatures.bSortMulti){var c=e.inArray(n,b(s,"0"));-1!==c?(null===(a=l(s[c],!0))&&1===s.length&&(a=0),null===a?s.splice(c,1):(s[c][1]=g[a],s[c]._idx=a)):(s.push([n,g[0],0]),s[s.length-1]._idx=0)}else s.length&&s[0][0]==n?(a=l(s[0]),s.length=1,s[0][1]=g[a],s[0]._idx=a):(s.length=0,s.push([n,g[0]]),s[0]._idx=0);ge(t),"function"==typeof r&&r(t)}function et(e,t,n,i){var o=e.aoColumns[n];lt(t,{},function(t){!1!==o.bSortable&&(e.oFeatures.bProcessing?(Ee(e,!0),setTimeout(function(){qe(e,n,t.shiftKey,i),"ssp"!==Ct(e)&&Ee(e,!1)},0)):qe(e,n,t.shiftKey,i))})}function tt(t){var n,i,o=t.aLastSort,r=t.oClasses.sSortColumn,a=Pe(t),s=t.oFeatures;if(s.bSort&&s.bSortClasses){for(n=0,i=o.length;n<i;n++)e(b(t.aoData,"anCells",o[n].src)).removeClass(r+(n<2?n+1:3));for(n=0,i=a.length;n<i;n++)e(b(t.aoData,"anCells",a[n].src)).addClass(r+(n<2?n+1:3))}t.aLastSort=a}function nt(e,t){var n,i,o,r=e.aoColumns[t],a=g.ext.order[r.sSortDataType];a&&(n=a.call(e.oInstance,e,t,W(e,t)));for(var s=g.ext.type.order[r.sType+"-pre"],l=0,c=e.aoData.length;l<c;l++)(i=e.aoData[l])._aSortData||(i._aSortData=[]),i._aSortData[t]&&!a||(o=a?n[l]:M(e,l,t,"sort"),i._aSortData[t]=s?s(o):o)}function it(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var n={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:e.extend(!0,[],t.aaSorting),search:Qe(t.oPreviousSearch),columns:e.map(t.aoColumns,function(e,n){return{visible:e.bVisible,search:Qe(t.aoPreSearchCols[n])}})};ut(t,"aoStateSaveParams","stateSaveParams",[t,n]),t.oSavedState=n,t.fnStateSaveCallback.call(t.oInstance,t,n)}}function ot(t,n,o){var r,a,s=t.aoColumns,g=function(n){if(n&&n.time){var g=ut(t,"aoStateLoadParams","stateLoadParams",[t,n]);if(-1===e.inArray(!1,g)){var l=t.iStateDuration;if(l>0&&n.time<+new Date-1e3*l)o();else if(n.columns&&s.length!==n.columns.length)o();else{if(t.oLoadedState=e.extend(!0,{},n),n.start!==i&&(t._iDisplayStart=n.start,t.iInitDisplayStart=n.start),n.length!==i&&(t._iDisplayLength=n.length),n.order!==i&&(t.aaSorting=[],e.each(n.order,function(e,n){t.aaSorting.push(n[0]>=s.length?[0,n[1]]:n)})),n.search!==i&&e.extend(t.oPreviousSearch,we(n.search)),n.columns)for(r=0,a=n.columns.length;r<a;r++){var c=n.columns[r];c.visible!==i&&(s[r].bVisible=c.visible),c.search!==i&&e.extend(t.aoPreSearchCols[r],we(c.search))}ut(t,"aoStateLoaded","stateLoaded",[t,n]),o()}}else o()}else o()};if(t.oFeatures.bStateSave){var l=t.fnStateLoadCallback.call(t.oInstance,t,g);l!==i&&g(l)}else o()}function rt(t){var n=g.settings,i=e.inArray(t,b(n,"nTable"));return-1!==i?n[i]:null}function at(e,n,i,o){if(i="DataTables warning: "+(e?"table id="+e.sTableId+" - ":"")+i,o&&(i+=". For more information about this error, please see http://datatables.net/tn/"+o),n)t.console&&console.log&&console.log(i);else{var r=g.ext,a=r.sErrMode||r.errMode;if(e&&ut(e,null,"error",[e,o,i]),"alert"==a)alert(i);else{if("throw"==a)throw new Error(i);"function"==typeof a&&a(e,o,i)}}}function st(t,n,o,r){e.isArray(o)?e.each(o,function(i,o){e.isArray(o)?st(t,n,o[0],o[1]):st(t,n,o)}):(r===i&&(r=o),n[o]!==i&&(t[r]=n[o]))}function gt(t,n,i){var o;for(var r in n)n.hasOwnProperty(r)&&(e.isPlainObject(o=n[r])?(e.isPlainObject(t[r])||(t[r]={}),e.extend(!0,t[r],o)):t[r]=i&&"data"!==r&&"aaData"!==r&&e.isArray(o)?o.slice():o);return t}function lt(t,n,i){e(t).on("click.DT",n,function(n){e(t).blur(),i(n)}).on("keypress.DT",n,function(e){13===e.which&&(e.preventDefault(),i(e))}).on("selectstart.DT",function(){return!1})}function ct(e,t,n,i){n&&e[t].push({fn:n,sName:i})}function ut(t,n,i,o){var r=[];if(n&&(r=e.map(t[n].slice().reverse(),function(e,n){return e.fn.apply(t.oInstance,o)})),null!==i){var a=e.Event(i+".dt");e(t.nTable).trigger(a,o),r.push(a.result)}return r}function It(e){var t=e._iDisplayStart,n=e.fnDisplayEnd(),i=e._iDisplayLength;t>=n&&(t=n-i),t-=t%i,(-1===i||t<0)&&(t=0),e._iDisplayStart=t}function dt(t,n){var i=t.renderer,o=g.ext.renderer[n];return e.isPlainObject(i)&&i[n]?o[i[n]]||o._:"string"==typeof i&&o[i]||o._}function Ct(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}var ht=[],At=Array.prototype;g.Api=r=function(t,n){if(!(this instanceof r))return new r(t,n);var i=[],o=function(t){var n=function(t){var n,i,o=g.settings,r=e.map(o,function(e,t){return e.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?-1!==(n=e.inArray(t,r))?[o[n]]:null:t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?i=e(t):t instanceof e&&(i=t),i?i.map(function(t){return-1!==(n=e.inArray(this,r))?o[n]:null}).toArray():void 0):[]}(t);n&&(i=i.concat(n))};if(e.isArray(t))for(var a=0,s=t.length;a<s;a++)o(t[a]);else o(t);this.context=F(i),n&&e.merge(this,n),this.selector={rows:null,cols:null,opts:null},r.extend(this,this,ht)},e.extend(r.prototype,{any:function(){return 0!==this.count()},concat:At.concat,context:[],count:function(){return this.flatten().length},each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new r(t[e],this[e]):null},filter:function(e){var t=[];if(At.filter)t=At.filter.call(this,e,this);else for(var n=0,i=this.length;n<i;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return new r(this.context,t)},flatten:function(){var e=[];return new r(this.context,e.concat.apply(e,this.toArray()))},join:At.join,indexOf:At.indexOf||function(e,t){for(var n=t||0,i=this.length;n<i;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,n,o){var a,s,g,l,c,u,I,d,C=[],h=this.context,A=this.selector;for("string"==typeof e&&(o=n,n=t,t=e,e=!1),s=0,g=h.length;s<g;s++){var f=new r(h[s]);if("table"===t)(a=n.call(f,h[s],s))!==i&&C.push(a);else if("columns"===t||"rows"===t)(a=n.call(f,h[s],this[s],s))!==i&&C.push(a);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(I=this[s],"column-rows"===t&&(u=Bt(h[s],A.opts)),l=0,c=I.length;l<c;l++)d=I[l],(a="cell"===t?n.call(f,h[s],d.row,d.column,s,l):n.call(f,h[s],d,s,l,u))!==i&&C.push(a)}if(C.length||o){var m=new r(h,e?C.concat.apply([],C):C),p=m.selector;return p.rows=A.rows,p.cols=A.cols,p.opts=A.opts,m}return this},lastIndexOf:At.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){var t=[];if(At.map)t=At.map.call(this,e,this);else for(var n=0,i=this.length;n<i;n++)t.push(e.call(this,this[n],n));return new r(this.context,t)},pluck:function(e){return this.map(function(t){return t[e]})},pop:At.pop,push:At.push,reduce:At.reduce||function(e,t){return k(this,e,t,0,this.length,1)},reduceRight:At.reduceRight||function(e,t){return k(this,e,t,this.length-1,-1,-1)},reverse:At.reverse,selector:null,shift:At.shift,slice:function(){return new r(this.context,this)},sort:At.sort,splice:At.splice,toArray:function(){return At.slice.call(this)},to$:function(){return e(this)},toJQuery:function(){return e(this)},unique:function(){return new r(this.context,F(this))},unshift:At.unshift}),r.extend=function(t,n,i){if(i.length&&n&&(n instanceof r||n.__dt_wrapper)){var o,a,s,g=function(e,t,n){return function(){var i=t.apply(e,arguments);return r.extend(i,i,n.methodExt),i}};for(o=0,a=i.length;o<a;o++)n[(s=i[o]).name]="function"==typeof s.val?g(t,s.val,s):e.isPlainObject(s.val)?{}:s.val,n[s.name].__dt_wrapper=!0,r.extend(t,n[s.name],s.propExt)}},r.register=a=function(t,n){if(e.isArray(t))for(var i=0,o=t.length;i<o;i++)r.register(t[i],n);else{var a,s,g,l,c=t.split("."),u=ht,I=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n].name===t)return e[n];return null};for(a=0,s=c.length;a<s;a++){var d=I(u,g=(l=-1!==c[a].indexOf("()"))?c[a].replace("()",""):c[a]);d||u.push(d={name:g,val:{},methodExt:[],propExt:[]}),a===s-1?d.val=n:u=l?d.methodExt:d.propExt}}},r.registerPlural=s=function(t,n,o){r.register(t,o),r.register(n,function(){var t=o.apply(this,arguments);return t===this?this:t instanceof r?t.length?e.isArray(t[0])?new r(t.context,t[0]):t[0]:i:t})},a("tables()",function(t){return t?new r(function(t,n){if("number"==typeof t)return[n[t]];var i=e.map(n,function(e,t){return e.nTable});return e(i).filter(t).map(function(t){var o=e.inArray(this,i);return n[o]}).toArray()}(t,this.context)):this}),a("table()",function(e){var t=this.tables(e),n=t.context;return n.length?new r(n[0]):t}),s("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),s("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),s("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),s("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),s("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),a("draw()",function(e){return this.iterator("table",function(t){"page"===e?se(t):("string"==typeof e&&(e="full-hold"!==e),ge(t,!1===e))})}),a("page()",function(e){return e===i?this.page.info().page:this.iterator("table",function(t){Te(t,e)})}),a("page.info()",function(e){if(0===this.context.length)return i;var t=this.context[0],n=t._iDisplayStart,o=t.oFeatures.bPaginate?t._iDisplayLength:-1,r=t.fnRecordsDisplay(),a=-1===o;return{page:a?0:Math.floor(n/o),pages:a?1:Math.ceil(r/o),start:n,end:t.fnDisplayEnd(),length:o,recordsTotal:t.fnRecordsTotal(),recordsDisplay:r,serverSide:"ssp"===Ct(t)}}),a("page.len()",function(e){return e===i?0!==this.context.length?this.context[0]._iDisplayLength:i:this.iterator("table",function(t){Re(t,e)})});var ft=function(e,t,n){if(n){var i=new r(e);i.one("draw",function(){n(i.ajax.json())})}if("ssp"==Ct(e))ge(e,t);else{Ee(e,!0);var o=e.jqXHR;o&&4!==o.readyState&&o.abort(),Ie(e,[],function(n){q(e);for(var i=Ae(e,n),o=0,r=i.length;o<r;o++)V(e,i[o]);ge(e,t),Ee(e,!1)})}};a("ajax.json()",function(){var e=this.context;if(e.length>0)return e[0].json}),a("ajax.params()",function(){var e=this.context;if(e.length>0)return e[0].oAjaxData}),a("ajax.reload()",function(e,t){return this.iterator("table",function(n){ft(n,!1===t,e)})}),a("ajax.url()",function(t){var n=this.context;return t===i?0===n.length?i:(n=n[0]).ajax?e.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource:this.iterator("table",function(n){e.isPlainObject(n.ajax)?n.ajax.url=t:n.ajax=t})}),a("ajax.url().load()",function(e,t){return this.iterator("table",function(n){ft(n,!1===t,e)})});var mt=function(t,n,r,a,s){var g,l,c,u,I,d,C=[],h=typeof n;for(n&&"string"!==h&&"function"!==h&&n.length!==i||(n=[n]),c=0,u=n.length;c<u;c++)for(I=0,d=(l=n[c]&&n[c].split&&!n[c].match(/[\[\(:]/)?n[c].split(","):[n[c]]).length;I<d;I++)(g=r("string"==typeof l[I]?e.trim(l[I]):l[I]))&&g.length&&(C=C.concat(g));var A=o.selector[t];if(A.length)for(c=0,u=A.length;c<u;c++)C=A[c](a,s,C);return F(C)},pt=function(t){return t||(t={}),t.filter&&t.search===i&&(t.search=t.filter),e.extend({search:"none",order:"current",page:"all"},t)},bt=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].length>0)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e},Bt=function(t,n){var i,o=[],r=t.aiDisplay,a=t.aiDisplayMaster,s=n.search,g=n.order,l=n.page;if("ssp"==Ct(t))return"removed"===s?[]:v(0,a.length);if("current"==l)for(u=t._iDisplayStart,I=t.fnDisplayEnd();u<I;u++)o.push(r[u]);else if("current"==g||"applied"==g){if("none"==s)o=a.slice();else if("applied"==s)o=r.slice();else if("removed"==s){for(var c={},u=0,I=r.length;u<I;u++)c[r[u]]=null;o=e.map(a,function(e){return c.hasOwnProperty(e)?null:e})}}else if("index"==g||"original"==g)for(u=0,I=t.aoData.length;u<I;u++)"none"==s?o.push(u):(-1===(i=e.inArray(u,r))&&"removed"==s||i>=0&&"applied"==s)&&o.push(u);return o};a("rows()",function(t,n){t===i?t="":e.isPlainObject(t)&&(n=t,t=""),n=pt(n);var o=this.iterator("table",function(o){return function(t,n,o){var r;return mt("row",n,function(n){var a=A(n),s=t.aoData;if(null!==a&&!o)return[a];if(r||(r=Bt(t,o)),null!==a&&-1!==e.inArray(a,r))return[a];if(null===n||n===i||""===n)return r;if("function"==typeof n)return e.map(r,function(e){var t=s[e];return n(e,t._aData,t.nTr)?e:null});if(n.nodeName){var g=n._DT_RowIndex,l=n._DT_CellIndex;if(g!==i)return s[g]&&s[g].nTr===n?[g]:[];if(l)return s[l.row]&&s[l.row].nTr===n?[l.row]:[];var c=e(n).closest("*[data-dt-row]");return c.length?[c.data("dt-row")]:[]}if("string"==typeof n&&"#"===n.charAt(0)){var u=t.aIds[n.replace(/^#/,"")];if(u!==i)return[u.idx]}var I=y(B(t.aoData,r,"nTr"));return e(I).filter(n).map(function(){return this._DT_RowIndex}).toArray()},t,o)}(o,t,n)},1);return o.selector.rows=t,o.selector.opts=n,o}),a("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||i},1)}),a("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return B(e.aoData,t,"_aData")},1)}),s("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){var i=t.aoData[n];return"search"===e?i._aFilterData:i._aSortData},1)}),s("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){te(t,n,e)})}),s("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),s("rows().ids()","row().id()",function(e){for(var t=[],n=this.context,i=0,o=n.length;i<o;i++)for(var a=0,s=this[i].length;a<s;a++){var g=n[i].rowIdFn(n[i].aoData[this[i][a]]._aData);t.push((!0===e?"#":"")+g)}return new r(n,t)}),s("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,o){var r,a,s,g,l,c,u=t.aoData,I=u[n];for(u.splice(n,1),r=0,a=u.length;r<a;r++)if(c=(l=u[r]).anCells,null!==l.nTr&&(l.nTr._DT_RowIndex=r),null!==c)for(s=0,g=c.length;s<g;s++)c[s]._DT_CellIndex.row=r;ee(t.aiDisplayMaster,n),ee(t.aiDisplay,n),ee(e[o],n,!1),t._iRecordsDisplay>0&&t._iRecordsDisplay--,It(t);var d=t.rowIdFn(I._aData);d!==i&&delete t.aIds[d]}),this.iterator("table",function(e){for(var t=0,n=e.aoData.length;t<n;t++)e.aoData[t].idx=t}),this}),a("rows.add()",function(t){var n=this.iterator("table",function(e){var n,i,o,r=[];for(i=0,o=t.length;i<o;i++)(n=t[i]).nodeName&&"TR"===n.nodeName.toUpperCase()?r.push(Y(e,n)[0]):r.push(V(e,n));return r},1),i=this.rows(-1);return i.pop(),e.merge(i,n),i}),a("row()",function(e,t){return bt(this.rows(e,t))}),a("row().data()",function(t){var n=this.context;if(t===i)return n.length&&this.length?n[0].aoData[this[0]]._aData:i;var o=n[0].aoData[this[0]];return o._aData=t,e.isArray(t)&&o.nTr.id&&j(n[0].rowId)(t,o.nTr.id),te(n[0],this[0],"data"),this}),a("row().node()",function(){var e=this.context;return e.length&&this.length&&e[0].aoData[this[0]].nTr||null}),a("row.add()",function(t){t instanceof e&&t.length&&(t=t[0]);var n=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?Y(e,t)[0]:V(e,t)});return this.row(n[0])});var vt=function(e,t){var n=e.context;if(n.length){var o=n[0].aoData[t!==i?t:e[0]];o&&o._details&&(o._details.remove(),o._detailsShow=i,o._details=i)}},yt=function(e,t){var n=e.context;if(n.length&&e.length){var i=n[0].aoData[e[0]];i._details&&(i._detailsShow=t,t?i._details.insertAfter(i.nTr):i._details.detach(),xt(n[0]))}},xt=function(e){var t=new r(e),n=e.aoData;t.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),b(n,"_details").length>0&&(t.on("draw.dt.DT_details",function(i,o){e===o&&t.rows({page:"current"}).eq(0).each(function(e){var t=n[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),t.on("column-visibility.dt.DT_details",function(t,i,o,r){if(e===i)for(var a,s=E(i),g=0,l=n.length;g<l;g++)(a=n[g])._details&&a._details.children("td[colspan]").attr("colspan",s)}),t.on("destroy.dt.DT_details",function(i,o){if(e===o)for(var r=0,a=n.length;r<a;r++)n[r]._details&&vt(t,r)}))};a("row().child()",function(t,n){var o=this.context;return t===i?o.length&&this.length?o[0].aoData[this[0]]._details:i:(!0===t?this.child.show():!1===t?vt(this):o.length&&this.length&&function(t,n,i,o){var r=[],a=function(n,i){if(e.isArray(n)||n instanceof e)for(var o=0,s=n.length;o<s;o++)a(n[o],i);else if(n.nodeName&&"tr"===n.nodeName.toLowerCase())r.push(n);else{var g=e("<tr><td/></tr>").addClass(i);e("td",g).addClass(i).html(n)[0].colSpan=E(t),r.push(g[0])}};a(i,o),n._details&&n._details.detach(),n._details=e(r),n._detailsShow&&n._details.insertAfter(n.nTr)}(o[0],o[0].aoData[this[0]],t,n),this)}),a(["row().child.show()","row().child().show()"],function(e){return yt(this,!0),this}),a(["row().child.hide()","row().child().hide()"],function(){return yt(this,!1),this}),a(["row().child.remove()","row().child().remove()"],function(){return vt(this),this}),a("row().child.isShown()",function(){var e=this.context;return e.length&&this.length&&e[0].aoData[this[0]]._detailsShow||!1});var Ft=/^([^:]+):(name|visIdx|visible)$/,Gt=function(e,t,n,i,o){for(var r=[],a=0,s=o.length;a<s;a++)r.push(M(e,o[a],t));return r};a("columns()",function(t,n){t===i?t="":e.isPlainObject(t)&&(n=t,t=""),n=pt(n);var o=this.iterator("table",function(i){return function(t,n,i){var o=t.aoColumns,r=b(o,"sName"),a=b(o,"nTh");return mt("column",n,function(n){var s=A(n);if(""===n)return v(o.length);if(null!==s)return[s>=0?s:o.length+s];if("function"==typeof n){var g=Bt(t,i);return e.map(o,function(e,i){return n(i,Gt(t,i,0,0,g),a[i])?i:null})}var l="string"==typeof n?n.match(Ft):"";if(l)switch(l[2]){case"visIdx":case"visible":var c=parseInt(l[1],10);if(c<0){var u=e.map(o,function(e,t){return e.bVisible?t:null});return[u[u.length+c]]}return[T(t,c)];case"name":return e.map(r,function(e,t){return e===l[1]?t:null});default:return[]}if(n.nodeName&&n._DT_CellIndex)return[n._DT_CellIndex.column];var I=e(a).filter(n).map(function(){return e.inArray(this,a)}).toArray();if(I.length||!n.nodeName)return I;var d=e(n).closest("*[data-dt-column]");return d.length?[d.data("dt-column")]:[]},t,i)}(i,t,n)},1);return o.selector.cols=t,o.selector.opts=n,o}),s("columns().header()","column().header()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),s("columns().footer()","column().footer()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),s("columns().data()","column().data()",function(){return this.iterator("column-rows",Gt,1)}),s("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),s("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,i,o,r){return B(t.aoData,r,"search"===e?"_aFilterData":"_aSortData",n)},1)}),s("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,i,o){return B(e.aoData,o,"anCells",t)},1)}),s("columns().visible()","column().visible()",function(t,n){var o=this.iterator("column",function(n,o){if(t===i)return n.aoColumns[o].bVisible;!function(t,n,o){var r,a,s,g,l=t.aoColumns,c=l[n],u=t.aoData;if(o===i)return c.bVisible;if(c.bVisible!==o){if(o){var I=e.inArray(!0,b(l,"bVisible"),n+1);for(a=0,s=u.length;a<s;a++)r=u[a].anCells,(g=u[a].nTr)&&g.insertBefore(r[n],r[I]||null)}else e(b(t.aoData,"anCells",n)).detach();c.bVisible=o,ae(t,t.aoHeader),ae(t,t.aoFooter),t.aiDisplay.length||e(t.nTBody).find("td[colspan]").attr("colspan",E(t)),it(t)}}(n,o,t)});return t!==i&&(this.iterator("column",function(e,i){ut(e,null,"column-visibility",[e,i,t,n])}),(n===i||n)&&this.columns.adjust()),o}),s("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?W(t,n):n},1)}),a("columns.adjust()",function(){return this.iterator("table",function(e){U(e)},1)}),a("column.index()",function(e,t){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===e||"toData"===e)return T(n,t);if("fromData"===e||"toVisible"===e)return W(n,t)}}),a("column()",function(e,t){return bt(this.columns(e,t))}),a("cells()",function(t,n,o){if(e.isPlainObject(t)&&(t.row===i?(o=t,t=null):(o=n,n=null)),e.isPlainObject(n)&&(o=n,n=null),null===n||n===i)return this.iterator("table",function(n){return function(t,n,o){var r,a,s,g,l,c,u,I=t.aoData,d=Bt(t,o),C=y(B(I,d,"anCells")),h=e([].concat.apply([],C)),A=t.aoColumns.length;return mt("cell",n,function(n){var o="function"==typeof n;if(null===n||n===i||o){for(a=[],s=0,g=d.length;s<g;s++)for(r=d[s],l=0;l<A;l++)c={row:r,column:l},o?(u=I[r],n(c,M(t,r,l),u.anCells?u.anCells[l]:null)&&a.push(c)):a.push(c);return a}if(e.isPlainObject(n))return n.column!==i&&n.row!==i&&-1!==e.inArray(n.row,d)?[n]:[];var C=h.filter(n).map(function(e,t){return{row:t._DT_CellIndex.row,column:t._DT_CellIndex.column}}).toArray();return C.length||!n.nodeName?C:(u=e(n).closest("*[data-dt-row]")).length?[{row:u.data("dt-row"),column:u.data("dt-column")}]:[]},t,o)}(n,t,pt(o))});var r,a,s,g,l,c=this.columns(n),u=this.rows(t);this.iterator("table",function(e,t){for(r=[],a=0,s=u[t].length;a<s;a++)for(g=0,l=c[t].length;g<l;g++)r.push({row:u[t][a],column:c[t][g]})},1);var I=this.cells(r,o);return e.extend(I.selector,{cols:n,rows:t,opts:o}),I}),s("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,n){var o=e.aoData[t];return o&&o.anCells?o.anCells[n]:i},1)}),a("cells().data()",function(){return this.iterator("cell",function(e,t,n){return M(e,t,n)},1)}),s("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,i){return t.aoData[n][e][i]},1)}),s("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,i){return M(t,n,i,e)},1)}),s("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:W(e,n)}},1)}),s("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,i){te(t,n,e,i)})}),a("cell()",function(e,t,n){return bt(this.cells(e,t,n))}),a("cell().data()",function(e){var t=this.context,n=this[0];return e===i?t.length&&n.length?M(t[0],n[0].row,n[0].column):i:(_(t[0],n[0].row,n[0].column,e),te(t[0],n[0].row,"data",n[0].column),this)}),a("order()",function(t,n){var o=this.context;return t===i?0!==o.length?o[0].aaSorting:i:("number"==typeof t?t=[[t,n]]:t.length&&!e.isArray(t[0])&&(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),a("order.listener()",function(e,t,n){return this.iterator("table",function(i){et(i,e,t,n)})}),a("order.fixed()",function(t){if(!t){var n=this.context,o=n.length?n[0].aaSortingFixed:i;return e.isArray(o)?{pre:o}:o}return this.iterator("table",function(n){n.aaSortingFixed=e.extend(!0,{},t)})}),a(["columns().order()","column().order()"],function(t){var n=this;return this.iterator("table",function(i,o){var r=[];e.each(n[o],function(e,n){r.push([n,t])}),i.aaSorting=r})}),a("search()",function(t,n,o,r){var a=this.context;return t===i?0!==a.length?a[0].oPreviousSearch.sSearch:i:this.iterator("table",function(i){i.oFeatures.bFilter&&me(i,e.extend({},i.oPreviousSearch,{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===r||r}),1)})}),s("columns().search()","column().search()",function(t,n,o,r){return this.iterator("column",function(a,s){var g=a.aoPreSearchCols;if(t===i)return g[s].sSearch;a.oFeatures.bFilter&&(e.extend(g[s],{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===r||r}),me(a,a.oPreviousSearch,1))})}),a("state()",function(){return this.context.length?this.context[0].oSavedState:null}),a("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),a("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),a("state.save()",function(){return this.iterator("table",function(e){it(e)})}),g.versionCheck=g.fnVersionCheck=function(e){for(var t,n,i=g.version.split("."),o=e.split("."),r=0,a=o.length;r<a;r++)if((t=parseInt(i[r],10)||0)!==(n=parseInt(o[r],10)||0))return t>n;return!0},g.isDataTable=g.fnIsDataTable=function(t){var n=e(t).get(0),i=!1;return t instanceof g.Api||(e.each(g.settings,function(t,o){var r=o.nScrollHead?e("table",o.nScrollHead)[0]:null,a=o.nScrollFoot?e("table",o.nScrollFoot)[0]:null;o.nTable!==n&&r!==n&&a!==n||(i=!0)}),i)},g.tables=g.fnTables=function(t){var n=!1;e.isPlainObject(t)&&(n=t.api,t=t.visible);var i=e.map(g.settings,function(n){if(!t||t&&e(n.nTable).is(":visible"))return n.nTable});return n?new r(i):i},g.camelToHungarian=Q,a("$()",function(t,n){var i=this.rows(n).nodes(),o=e(i);return e([].concat(o.filter(t).toArray(),o.find(t).toArray()))}),e.each(["on","one","off"],function(t,n){a(n+"()",function(){var t=Array.prototype.slice.call(arguments);t[0]=e.map(t[0].split(/\s/),function(e){return e.match(/\.dt\b/)?e:e+".dt"}).join(" ");var i=e(this.tables().nodes());return i[n].apply(i,t),this})}),a("clear()",function(){return this.iterator("table",function(e){q(e)})}),a("settings()",function(){return new r(this.context,this.context)}),a("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),a("data()",function(){return this.iterator("table",function(e){return b(e.aoData,"_aData")}).flatten()}),a("destroy()",function(n){return n=n||!1,this.iterator("table",function(i){var o,a=i.nTableWrapper.parentNode,s=i.oClasses,l=i.nTable,c=i.nTBody,u=i.nTHead,I=i.nTFoot,d=e(l),C=e(c),h=e(i.nTableWrapper),A=e.map(i.aoData,function(e){return e.nTr});i.bDestroying=!0,ut(i,"aoDestroyCallback","destroy",[i]),n||new r(i).columns().visible(!0),h.off(".DT").find(":not(tbody *)").off(".DT"),e(t).off(".DT-"+i.sInstance),l!=u.parentNode&&(d.children("thead").detach(),d.append(u)),I&&l!=I.parentNode&&(d.children("tfoot").detach(),d.append(I)),i.aaSorting=[],i.aaSortingFixed=[],tt(i),e(A).removeClass(i.asStripeClasses.join(" ")),e("th, td",u).removeClass(s.sSortable+" "+s.sSortableAsc+" "+s.sSortableDesc+" "+s.sSortableNone),C.children().detach(),C.append(A);var f=n?"remove":"detach";d[f](),h[f](),!n&&a&&(a.insertBefore(l,i.nTableReinsertBefore),d.css("width",i.sDestroyWidth).removeClass(s.sTable),(o=i.asDestroyStripes.length)&&C.children().each(function(t){e(this).addClass(i.asDestroyStripes[t%o])}));var m=e.inArray(i,g.settings);-1!==m&&g.settings.splice(m,1)})}),e.each(["column","row","cell"],function(e,t){a(t+"s().every()",function(e){var n=this.selector.opts,o=this;return this.iterator(t,function(r,a,s,g,l){e.call(o[t](a,"cell"===t?s:n,"cell"===t?n:i),a,s,g,l)})})}),a("i18n()",function(t,n,o){var r=this.context[0],a=P(t)(r.oLanguage);return a===i&&(a=n),o!==i&&e.isPlainObject(a)&&(a=a[o]!==i?a[o]:a._),a.replace("%d",o)}),g.version="1.10.19",g.settings=[],g.models={},g.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},g.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},g.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},g.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:e.extend({},g.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},G(g.defaults),g.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},G(g.defaults.column),g.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:i,oAjaxData:i,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Ct(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Ct(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,i=this.aiDisplay.length,o=this.oFeatures,r=o.bPaginate;return o.bServerSide?!1===r||-1===e?t+i:Math.min(t+e,this._iRecordsDisplay):!r||n>i||-1===e?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},g.ext=o={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:g.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:g.version},e.extend(o,{afnFiltering:o.search,aTypes:o.type.detect,ofnSearch:o.type.search,oSort:o.type.order,afnSortData:o.order,aoFeatures:o.feature,oApi:o.internal,oStdClasses:o.classes,oPagination:o.pager}),e.extend(g.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Qt=g.ext.pager;function wt(e,t){var n=[],i=Qt.numbers_length,o=Math.floor(i/2);return t<=i?n=v(0,t):e<=o?((n=v(0,i-2)).push("ellipsis"),n.push(t-1)):e>=t-1-o?((n=v(t-(i-2),t)).splice(0,0,"ellipsis"),n.splice(0,0,0)):((n=v(e-o+2,e+o-1)).push("ellipsis"),n.push(t-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}e.extend(Qt,{simple:function(e,t){return["previous","next"]},full:function(e,t){return["first","previous","next","last"]},numbers:function(e,t){return[wt(e,t)]},simple_numbers:function(e,t){return["previous",wt(e,t),"next"]},full_numbers:function(e,t){return["first","previous",wt(e,t),"next","last"]},first_last_numbers:function(e,t){return["first",wt(e,t),"last"]},_numbers:wt,numbers_length:7}),e.extend(!0,g.ext.renderer,{pageButton:{_:function(t,o,r,a,s,g){var l,c,u,I=t.oClasses,d=t.oLanguage.oPaginate,C=t.oLanguage.oAria.paginate||{},h=0,A=function(n,i){var o,a,u,f=function(e){Te(t,e.data.action,!0)};for(o=0,a=i.length;o<a;o++)if(e.isArray(u=i[o])){var m=e("<"+(u.DT_el||"div")+"/>").appendTo(n);A(m,u)}else{switch(l=null,c="",u){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=d.sFirst,c=u+(s>0?"":" "+I.sPageButtonDisabled);break;case"previous":l=d.sPrevious,c=u+(s>0?"":" "+I.sPageButtonDisabled);break;case"next":l=d.sNext,c=u+(s<g-1?"":" "+I.sPageButtonDisabled);break;case"last":l=d.sLast,c=u+(s<g-1?"":" "+I.sPageButtonDisabled);break;default:l=u+1,c=s===u?I.sPageButtonActive:""}null!==l&&(lt(e("<a>",{class:I.sPageButton+" "+c,"aria-controls":t.sTableId,"aria-label":C[u],"data-dt-idx":h,tabindex:t.iTabIndex,id:0===r&&"string"==typeof u?t.sTableId+"_"+u:null}).html(l).appendTo(n),{action:u},f),h++)}};try{u=e(o).find(n.activeElement).data("dt-idx")}catch(f){}A(e(o).empty(),a),u!==i&&e(o).find("[data-dt-idx="+u+"]").focus()}}}),e.extend(g.ext.type.detect,[function(e,t){var n=t.oLanguage.sDecimal;return m(e,n)?"num"+n:null},function(e,t){if(e&&!(e instanceof Date)&&!I.test(e))return null;var n=Date.parse(e);return null!==n&&!isNaN(n)||h(e)?"date":null},function(e,t){var n=t.oLanguage.sDecimal;return m(e,n,!0)?"num-fmt"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return p(e,n)?"html-num"+n:null},function(e,t){var n=t.oLanguage.sDecimal;return p(e,n,!0)?"html-num-fmt"+n:null},function(e,t){return h(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),e.extend(g.ext.type.search,{html:function(e){return h(e)?e:"string"==typeof e?e.replace(c," ").replace(u,""):""},string:function(e){return h(e)?e:"string"==typeof e?e.replace(c," "):e}});var St=function(e,t,n,i){return 0===e||e&&"-"!==e?(t&&(e=f(e,t)),e.replace&&(n&&(e=e.replace(n,"")),i&&(e=e.replace(i,""))),1*e):-1/0};function Xt(t){e.each({num:function(e){return St(e,t)},"num-fmt":function(e){return St(e,t,C)},"html-num":function(e){return St(e,t,u)},"html-num-fmt":function(e){return St(e,t,u,C)}},function(e,n){o.type.order[e+t+"-pre"]=n,e.match(/^html\-/)&&(o.type.search[e+t]=o.type.search.html)})}e.extend(o.type.order,{"date-pre":function(e){var t=Date.parse(e);return isNaN(t)?-1/0:t},"html-pre":function(e){return h(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return h(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0}}),Xt(""),e.extend(!0,g.ext.renderer,{header:{_:function(t,n,i,o){e(t.nTable).on("order.dt.DT",function(e,r,a,s){if(t===r){var g=i.idx;n.removeClass(i.sSortingClass+" "+o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[g]?o.sSortAsc:"desc"==s[g]?o.sSortDesc:i.sSortingClass)}})},jqueryui:function(t,n,i,o){e("<div/>").addClass(o.sSortJUIWrapper).append(n.contents()).append(e("<span/>").addClass(o.sSortIcon+" "+i.sSortingClassJUI)).appendTo(n),e(t.nTable).on("order.dt.DT",function(e,r,a,s){if(t===r){var g=i.idx;n.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[g]?o.sSortAsc:"desc"==s[g]?o.sSortDesc:i.sSortingClass),n.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==s[g]?o.sSortJUIAsc:"desc"==s[g]?o.sSortJUIDesc:i.sSortingClassJUI)}})}}});var Zt=function(e){return"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e};function Nt(e){return function(){var t=[rt(this[g.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return g.ext.internal[e].apply(this,t)}}return g.render={number:function(e,t,n,i,o){return{display:function(r){if("number"!=typeof r&&"string"!=typeof r)return r;var a=r<0?"-":"",s=parseFloat(r);if(isNaN(s))return Zt(r);s=s.toFixed(n),r=Math.abs(s);var g=parseInt(r,10),l=n?t+(r-g).toFixed(n).substring(2):"";return a+(i||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+l+(o||"")}}},text:function(){return{display:Zt,filter:Zt}}},e.extend(g.ext.internal,{_fnExternApiFunc:Nt,_fnBuildAjax:Ie,_fnAjaxUpdate:de,_fnAjaxParameters:Ce,_fnAjaxUpdateDraw:he,_fnAjaxDataSrc:Ae,_fnAddColumn:R,_fnColumnOptions:D,_fnAdjustColumnSizing:U,_fnVisibleToColumnIndex:T,_fnColumnIndexToVisible:W,_fnVisbleColumns:E,_fnGetColumns:H,_fnColumnTypes:O,_fnApplyColumnDefs:L,_fnHungarianMap:G,_fnCamelToHungarian:Q,_fnLanguageCompat:w,_fnBrowserDetect:N,_fnAddData:V,_fnAddTr:Y,_fnNodeToDataIndex:function(e,t){return t._DT_RowIndex!==i?t._DT_RowIndex:null},_fnNodeToColumnIndex:function(t,n,i){return e.inArray(i,t.aoData[n].anCells)},_fnGetCellData:M,_fnSetCellData:_,_fnSplitObjNotation:J,_fnGetObjectDataFn:P,_fnSetObjectDataFn:j,_fnGetDataMaster:$,_fnClearTable:q,_fnDeleteIndex:ee,_fnInvalidate:te,_fnGetRowElements:ne,_fnCreateTr:ie,_fnBuildHead:re,_fnDrawHead:ae,_fnDraw:se,_fnReDraw:ge,_fnAddOptionsHtml:le,_fnDetectHeader:ce,_fnGetUniqueThs:ue,_fnFeatureHtmlFilter:fe,_fnFilterComplete:me,_fnFilterCustom:pe,_fnFilterColumn:be,_fnFilter:Be,_fnFilterCreateSearch:ve,_fnEscapeRegex:ye,_fnFilterData:Ge,_fnFeatureHtmlInfo:Se,_fnUpdateInfo:Xe,_fnInfoMacros:Ze,_fnInitialise:Ne,_fnInitComplete:ke,_fnLengthChange:Re,_fnFeatureHtmlLength:De,_fnFeatureHtmlPaginate:Ue,_fnPageChange:Te,_fnFeatureHtmlProcessing:We,_fnProcessingDisplay:Ee,_fnFeatureHtmlTable:He,_fnScrollDraw:Oe,_fnApplyToChildren:Le,_fnCalculateColumnWidths:Ye,_fnThrottle:Me,_fnConvertToWidth:_e,_fnGetWidestNode:Ke,_fnGetMaxLenString:ze,_fnStringToCss:Je,_fnSortFlatten:Pe,_fnSort:je,_fnSortAria:$e,_fnSortListener:qe,_fnSortAttachListener:et,_fnSortingClasses:tt,_fnSortData:nt,_fnSaveState:it,_fnLoadState:ot,_fnSettingsFromNode:rt,_fnLog:at,_fnMap:st,_fnBindAction:lt,_fnCallbackReg:ct,_fnCallbackFire:ut,_fnLengthOverflow:It,_fnRenderer:dt,_fnDataSource:Ct,_fnRowAttributes:oe,_fnExtend:gt,_fnCalculateEnd:function(){}}),e.fn.dataTable=g,g.$=e,e.fn.dataTableSettings=g.settings,e.fn.dataTableExt=g.ext,e.fn.DataTable=function(t){return e(this).dataTable(t).api()},e.each(g,function(t,n){e.fn.DataTable[t]=n}),e.fn.dataTable});